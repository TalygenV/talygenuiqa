(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-079f8dfc"],{"01f0":function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalscheduleview",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ReportScheduling")))]),t("span",{staticClass:"user-guide"},[e._m(0),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Dynamic_Report_Scheduling"))}})])])])]),e.showschedule?t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"w-100 float-left"},[e.DataLoaded?t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.ScheduleReport},scopedSlots:e._u([{key:"tgslot-EnterEmailID",fn:function({data:a}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.fieldInfo.value},on:{input:function(t){t.target.composing||e.$set(a.fieldInfo,"value",t.target.value)}}}),t("small",{staticClass:"form-text text-info"},[e._v("Enter multiple email id by comma seperator")])]}},{key:"tgslot-TimeSlot",fn:function({data:a}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.fieldInfo.value,expression:"data.fieldInfo.value"}],class:{"form-control":!0,"is-invalid":""!=a.error},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.fieldInfo,"value",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:""}},[e._v("Select Time Slot")]),e._l(a.fieldInfo.config.options,(function(a,o){return t("option",{key:o,domProps:{value:a.value}},[e._v(" "+e._s(a.name)+" ")])}))],2),""!=a.error?t("span",{staticClass:"invalid-feedback"},[e._v(e._s(a.error))]):e._e(),t("small",{staticClass:"form-text text-info"},[e._v("Above mentioned timeslots are in Utc format")])]}}],null,!1,1170194222)}):e._e()],1)],1):e._e()])])])},s=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])}],i=(a("14d9"),a("9769")),r={props:{ReportID:{type:String,Required:!0},EditScheduleData:{type:Object}},data(){return{isLoading:!1,modelreportname:"",ddldata:[],userType:"ALL",sharetomodel:"User",modelemailid:"",selectedusername:[],selectedfrequency:"",selectedday:"",selectedTimeSlot:"",showDay:!1,showDate:!1,Options:[],modeldateselected:"",modelSendtypeid:[],Timeslotdisplay:[],showschedule:!0,modelday:[],DataLoaded:0,FormSchema:[{layoutType:"single",Data:[{astype:"RadioField",label:this.$t("SendEmailTo"),name:"SendEmailTo",value:"",placeholder:"",config:{options:[{name:"User",value:"User"},{name:"Role",value:"Role"}],onChange:this.onchange},validationRules:""},{astype:"MultiSelectField",label:this.$t("SelectRecipient"),name:"SelectRecipient",value:"",mode:"tag",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:""},{astype:"SlotField",label:this.$t("EnterEmailID"),name:"EnterEmailID",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:""},{astype:"TextField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:"required"}]},{group_name:"Time Schedule",layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Frequency"),name:"Frequency",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onFrequency},validationRules:"required"},{astype:"SelectField",label:this.$t("Day"),name:"Day",value:"",placeholder:"",visibility:!1,config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"SelectField",label:this.$t("Date"),name:"Date",value:"",placeholder:"",visibility:!1,config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"SlotField",label:this.$t("Time Slot"),name:"TimeSlot",value:"",placeholder:"",visibility:!0,config:{options:[],showAddIcon:!1},validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-clock-o pr-2'></i>Schedule"}],FrequencyList:[{name:"Daily",value:"Daily"},{name:"Weekly",value:"Weekly"},{name:"Monthly",value:"Monthly"}],WeekDays:[{name:"Sunday",value:"Sunday"},{name:"Monday",value:"Monday"},{name:"Tuesday",value:"Tuesday"},{name:"Wednesday",value:"Wednesday"},{name:"Thursday",value:"Thrusday"},{name:"Friday",value:"Friday"},{name:"Saturday",value:"Saturday"}]}},created:async function(){var e=this;e.FormSchema[0].Data[0].value=e.sharetomodel,await e.FetchUserData(),e.FormSchema[1].Data[0].config.options=e.FrequencyList,e.FormSchema[1].Data[1].config.options=e.WeekDays,e.GetDateList(),e.FetchTimeSlot(),e.EditScheduleData!=[]&&void 0!=e.EditScheduleData?setTimeout((function(){e.EditScheduleReport()}),2e3):e.EditEmailReport(e.ReportID),e.DataLoaded=1},mounted:function(){$("#modalscheduleview").modal({backdrop:"static",keyboard:!1})},methods:{close:function(){var e=this;e.sharetomodel="User",e.selectedusername=[],e.modelemailid="",e.selectedfrequency="",e.selectedday="",e.showDate=!1,e.showDay=!1,e.selectedTimeSlot="",e.modeldateselected="",e.showschedule=!1,e.$emit("close"),$("#modalscheduleview").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},EditEmailReport:function(e){var t=this,a="&Report_id="+e;i["a"].Editdyanmicreport(a).then(e=>{t.modelreportname=e.data.ReportName,t.FormSchema[0].Data[3].value=t.modelreportname}).catch(e=>{console.log(e)})},FetchUserData:async function(){var e=this;e.isLoading=!0,await i["a"].UserDDL().then(t=>{e.ddldata=t.data,e.FormSchema[0].Data[1].config.options=[],e.Options=[],e.ddldata.forEach(t=>{e.Options.push({value:t.userid,name:t.username})}),e.FormSchema[0].Data[1].config.options=e.Options,e.isLoading=!1}).catch(e=>{console.log(e)})},FetchRoleData:async function(){var e=this,t="userType="+e.userType;await i["a"].GetRolesDDl(t).then(t=>{e.ddldata=t.data.DATA,e.FormSchema[0].Data[1].config.options=[],e.Options=[],e.ddldata.forEach(t=>{e.Options.push({value:t.role_id,name:t.role_name})}),e.FormSchema[0].Data[1].config.options=e.Options}).catch(e=>{console.log(e)})},onchange:function(e){var t=this;"User"==e.target.dataset.value?(t.Options=[],t.selectedusername=[],t.FormSchema[0].Data[0].value="User",t.FormSchema[0].Data[1].value="",t.FetchUserData()):(t.Options=[],t.selectedusername=[],t.FormSchema[0].Data[0].value="Role",t.FormSchema[0].Data[1].value="",t.FetchRoleData())},onFrequency:function(e){var t=this;"Daily"==e.target.value?(t.showDate=!1,t.showDay=!1,t.selectedday="",t.modeldateselected="",t.FormSchema[1].Data[1].visibility=!1,t.FormSchema[1].Data[2].visibility=!1,t.FormSchema[1].Data[3].visibility=!0):"Weekly"==e.target.value?(t.showDate=!1,t.showDay=!0,t.modeldateselected="",t.FormSchema[1].Data[1].visibility=!0,t.FormSchema[1].Data[2].visibility=!1,t.FormSchema[1].Data[3].visibility=!0):(t.showDate=!0,t.showDay=!1,t.selectedday="",t.FormSchema[1].Data[1].visibility=!1,t.FormSchema[1].Data[2].visibility=!0,t.FormSchema[1].Data[3].visibility=!0)},MulitEmailValidate:function(e){var t=this;if(t.modelemailid=e,""==t.modelemailid||void 0==t.modelemailid)return!0;if("string"==typeof t.modelemailid){var a=t.modelemailid.split(",");t.modelemailid=a;var o=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;for(let[e]of t.modelemailid.entries()){var s=t.modelemailid[e];if(!s.match(o))return t.ShowAlert('The email address  "'+s+'"  is invalid',"danger",!0,t.$t("Alert")),!1}return!0}},ScheduleReport:function(e,t){var a=this,o=a.MulitEmailValidate(e.EnterEmailID),s="";e.SelectRecipient.length>0&&e.SelectRecipient.forEach((e,t)=>{s+=0==t?e.value:","+e.value}),a.modelSendtypeid=s,a.selectedfrequency=e.Frequency,a.sharetomodel=e.SendEmailTo,a.modeldateselected="undefined"==e.Date?"":e.Date,a.selectedTimeSlot=e.TimeSlot,a.selectedday="undefined"==e.Day?"":e.Day,a.modelreportname=e.Subject;var r=0,l=0;if(void 0!=a.EditScheduleData?(r=a.EditScheduleData.ReportId,l=a.EditScheduleData.Report_emailId):(r=a.ReportID,l=0),"object"==typeof a.modelemailid){var d=String(a.modelemailid);a.modelemailid=d}if(!(r>0)||""==a.modelemailid&&""==a.modelSendtypeid||!o)return a.ShowAlert(a.$t("SelectOneUserRoleEmail"),"warning",!0,a.$t("Alert")),!1;a.isLoading=!0;var n=`Report_Email_Id=${l}&Email_id=${a.modelemailid}&Report_Id=${r}&Send_type=${a.sharetomodel}&Send_type_id=${a.modelSendtypeid}\n        &Subject=${a.modelreportname}&Frequency=${a.selectedfrequency}&date=${a.modeldateselected}&timeslot_id=${a.selectedTimeSlot}&day=${a.selectedday}`;i["a"].ScheduleEmail(n).then(e=>{"Success"==e.data[0].Status?(a.ShowAlert(a.$t("ScheduleReport"),"success",!0,a.$t("Alert")),void 0!=a.EditScheduleData&&this.$emit("RefreshScheduleListing"),a.isLoading=!1,a.close()):"Failed"==e.data[0].Status?(a.ShowAlert(e.data[0].Value,"danger",!0,a.$t("Alert")),a.isLoading=!1):(a.ShowAlert(a.$t("EmailFailed"),"danger",!0,a.$t("Alert")),a.isLoading=!1)}).catch(e=>{console.log(e),a.ShowAlert(a.$t("EmailFailed"),"danger",!0,a.$t("Alert")),a.isLoading=!1})},FetchTimeSlot:function(){var e=this;i["a"].FetchTimeSlotService().then(t=>{var a=[];e.Timeslotdisplay=JSON.parse(t.data[0].Value),e.Timeslotdisplay.forEach(e=>{a.push({name:e.slot_display,value:e.timeslot_id})}),e.FormSchema[1].Data[3].config.options=a}).catch(e=>{console.log(e)})},EditScheduleReport:async function(){var e=this;if(e.sharetomodel=e.EditScheduleData.Send_type,"User"==e.sharetomodel?await e.FetchUserData():await e.FetchRoleData(),""!=e.EditScheduleData.Send_type_id&&void 0!=e.EditScheduleData.Send_type_id&&(e.sharetomodel=e.EditScheduleData.Send_type,e.selectedusername=e.EditScheduleData.Send_type_id.split(",")),""!=e.EditScheduleData.EmailId&&(e.modelemailid=e.EditScheduleData.EmailId),e.modelreportname=e.EditScheduleData.Subject,e.selectedfrequency=e.EditScheduleData.Frequency,""!=e.selectedfrequency){var t={target:{value:e.selectedfrequency}};e.onFrequency(t)}e.selectedday=e.EditScheduleData.scheduleday,e.modeldateselected=e.EditScheduleData.scheduledate,e.selectedTimeSlot=e.EditScheduleData.timeslot_id;var a=[];e.selectedusername.forEach(t=>{var o=e.Options.filter(e=>e.value==t);o.forEach(e=>{var t={label:e.name,value:e.value};a.push(t)})}),e.FormSchema[0].Data[0].value=e.sharetomodel,e.FormSchema[0].Data[1].value=a,e.FormSchema[0].Data[2].value=e.modelemailid,e.FormSchema[0].Data[3].value=e.modelreportname,e.FormSchema[1].Data[0].value=e.selectedfrequency,e.FormSchema[1].Data[1].value=e.selectedday,e.FormSchema[1].Data[2].value=e.modeldateselected,e.FormSchema[1].Data[3].value=e.selectedTimeSlot},GetDateList:function(){var e=this,t=[];for(let a=1;a<32;a++)t.push({name:a,value:a});e.FormSchema[1].Data[2].config.options=t}}},l=r,d=(a("79178"),a("2877")),n=Object(d["a"])(l,o,s,!1,null,"a3e4992e",null);t["a"]=n.exports},1515:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".btn[data-v-5371273b]{font-size:14px;padding:.4rem 3.75rem}",""]),e.exports=t},2652:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".btn[data-v-a3e4992e]{font-size:14px;padding:.4rem 3.75rem}",""]),e.exports=t},"2c3f":function(e,t,a){"use strict";a("b674")},"4a21":function(e,t,a){"use strict";a("64e4")},"4eec":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".card-header.heading-border h5[data-v-285c3c6c]{font-size:1.25rem;line-height:40px;text-transform:capitalize}.card-header.heading-border h5 span[data-v-285c3c6c]{padding-bottom:0;margin-bottom:0}#modulelist .md-accordion .card[data-v-285c3c6c]{border:none}.md-accordion .card .card-header.heading-border[data-v-285c3c6c]{padding:0}.custom-reports-icons[data-v-285c3c6c]{min-width:inherit;height:104px;width:33%}.verticle-action.lft25[data-v-285c3c6c]{right:2px;top:39px}.show_hide_folder[data-v-285c3c6c]{position:absolute;right:30px;z-index:999;top:5px}.close-folder-popup[data-v-285c3c6c]{margin-top:-14px;margin-right:-11px}",""]),e.exports=t},"64e4":function(e,t,a){var o=a("1515");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=a("499e").default;s("6d6f15aa",o,!0,{sourceMap:!1,shadowMode:!1})},79178:function(e,t,a){"use strict";a("9503")},9503:function(e,t,a){var o=a("2652");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=a("499e").default;s("701d533a",o,!0,{sourceMap:!1,shadowMode:!1})},b674:function(e,t,a){var o=a("4eec");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=a("499e").default;s("2571b5af",o,!0,{sourceMap:!1,shadowMode:!1})},b6d6:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("tg-list",{attrs:{IsShowAction:!0,showCheckBox:!0,ModuleName:"Dynamic_Reporting",SubModuleCode:"Dynamic_Reporting",IdentityColumn:"REPORT_ID",HeaderText:e.$t("Custom Reports"),ListData:e.ReportData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,IsSearchFieldsOnTop:!1,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,IsFilterApplied:!!e.searchCondition,LegendArray:[],sourcetype:"",NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["STATUS_NAME"==a.column.COLUMN_NAME?[e.StatusListForListing.length>0?t("listingstatus",{attrs:{isfor:"Dynamic_Reporting",dataid:a.row.REPORT_ID,"data-controller":"Report",statuslist:e.StatusListForListing,item:a,"data-action":"Index",dataselected:a.row.STATUS_NAME,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(a.row.STATUS_ID,"Dynamic_Reporting")?e._e():t("a",{staticClass:"inactive-disabled"},[t("span",{class:e.getStatusClass(a.row.STATUS_NAME,"STATUS_NAME")},[e._v(" "+e._s(a.row[a.column.STATUS_NAME])+" ")])])]:e._e()]}}])}),e.ShowManageView?t("viewmanagefolder",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],ref:"managefolder",attrs:{submodulecode:"CRM_LEADS",modulename:"CRM"},on:{close:function(t){e.ShowManageView=!1}}}):e._e(),e.ShowAddCustomReportView?t("viewcustomreport",{ref:"customreportfolder",attrs:{ReportID:e.ReportID},on:{close:function(t){e.ShowAddCustomReportView=!1}}}):e._e(),e.showsharereportview?t("sharereportview",{attrs:{folderid:e.folderid,foldername:e.foldername,sourcetype:e.report,sharetype:e.sharetype,reportid:e.ReportID},on:{close:e.closeModalSharePopup}}):e._e(),e.showemailreportview?t("emailreportview",{attrs:{ReportID:e.ReportID,MODULENAME:e.MODULENAME,SUBMODULECODE:e.SUBMODULECODE},on:{close:function(t){e.showemailreportview=!1}}}):e._e(),e.showschedulereportview?t("modalscheduleview",{attrs:{ReportID:e.ReportID},on:{close:function(t){e.showschedulereportview=!1}}}):e._e()],1)},s=[],i=(a("14d9"),a("b7ef"),a("9769"));let r=[{title:"Manage Folder",iconClass:"fa-folder",callbackfunction:"ManageFolder",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Report",iconClass:"fa-plus",callbackfunction:"AddCustomReport",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{title:"Scheduled Reports",iconClass:"fa-list",href:"javascript:void(0)",callbackfunction:"EmailScheduleListing",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],l=[{fieldName:"Report Name",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["REPORTNAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"MODULE NAME",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["MOD.MODULE_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"SUBMODULE NAME",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["sm.name"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Created By",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["REP.CREATED_BY"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Folder Name",fieldType:"ddl-check",fieldIcon:"fa-folder",fieldSearchConditionName:["FOLDER.FOLDER_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Created Date",fieldType:"date",fieldIcon:"fa-calendar",fieldSearchConditionName:["REP.CREATED_AT"],isSearch:!1,value:"",listOptions:[],datePickerConfig:{formate:"yyyy-mm-dd"}},{fieldName:"Modified Date",fieldType:"date",fieldIcon:"fa-calendar",fieldSearchConditionName:["REP.MODIFIED_AT"],isSearch:!1,value:"",listOptions:[],datePickerConfig:{formate:"yyyy-mm-dd"}},{fieldName:"Modified By",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["REP.MODIFIED_BY"],isSearch:!1,value:"",listOptions:[]}],d=[{title:"View",callbackfunction:"ViewReport",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",callbackfunction:"editreport",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Send Email",callbackfunction:"sendemail",href:"javascript:void(0)",icon:"fa fa-paper-plane text-success action-icon",additionalSpan:""},{title:"Schedule",callbackfunction:"setschedule",href:"javascript:void(0)",icon:"fa fa-clock-o text-warning action-icon",additionalSpan:""},{title:"Share",callbackfunction:"sharereport",href:"javascript:void(0)",icon:"fa fa-share-alt text-success action-icon",additionalSpan:""}];function n(e,t,a){var o=e;let s=a,r={};r["moduleName"]=t,r["type"]=a,i["a"].GetMainReportSearching(s).then((function(e){console.log(l);var t=e.data;console.log("folderid",t),null!=t&&("FOLDER_NAME"==a&&(o.leftSearchFields[4].listOptions=t.map(e=>{const t={};return t.name=e.FOLDER_NAME,t.value=e.FOLDER_ID.toString(),t}),o.LeadStatusList=t.map(e=>{const t={};return t.name=e.FOLDER_NAME,t.value=e.FOLDER_ID.toString(),t})),"CREATED_BY"==a&&(o.leftSearchFields[3].listOptions=t.map(e=>{const t={};return t.name=e.CREATED_BY,t.value=e.CREATED_ID.toString(),t}),o.LeadStatusList=t.map(e=>{const t={};return t.name=e.CREATED_BY,t.value=e.CREATED_ID.toString(),t})),"MODIFIED_BY"==a&&(o.leftSearchFields[7].listOptions=t.map(e=>{const t={};return t.name=e.MODIFIED_BY,t.value=e.MODIFIED_ID.toString(),t}),o.LeadStatusList=t.map(e=>{const t={};return t.name=e.MODIFIED_BY,t.value=e.MODIFIED_ID.toString(),t})))}))}var c={buttons:r,leftsearchSchema:l,listActions:d,bindleftCommonSearchdropdown:n},u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalManageView",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageFolderName")))]),t("span",{staticClass:"user-guide"},[e._m(0),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Dynamic_Manage_Folder"))}})])])])]),t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"w-100 float-left"},[t("div",{staticClass:"float-right"},[t("a",{staticClass:"btn btn-info my-2 my-sm-0",attrs:{title:e.$t("AddNewFolder")},on:{click:function(t){return e.Addnewfolder()}}},[t("em",{staticClass:"fa fa-folder pr-2"}),e._v(" "+e._s(e.$t("AddNewFolder"))+" ")]),t("a",{class:{"btn btn-danger my-2 my-sm-0 ml-2":!0,disabled:!e.isDeleteMultiple},attrs:{id:"DeleteMultiple",title:e.$t("Delete")},on:{click:function(t){return e.commonDeleteData()}}},[t("em",{staticClass:"fa fa-trash pr-2"}),e._v(" "+e._s(e.$t("Delete"))+" ")])]),t("div",{staticClass:"listing mt-3"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"tablelistingdata","aria-label":"Folder Listing"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"50px !important"}},[t("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"},on:{change:function(t){return e.onChange()}}})]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("FolderName")))]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("CreatedBy")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"200"}},[e._v(e._s(e.$t("Actions")))])])]),t("tbody",[e._l(e.ListingData,(function(a){return t("tr",{key:a},[t("td",{staticClass:"text-center"},[t("input",{staticClass:"chkItems",attrs:{disabled:a.associateD_REPORT>0,type:"checkbox"},domProps:{value:a.foldeR_ID},on:{change:function(t){return e.onChange()}}})]),t("td",[e._v(e._s(a.foldeR_NAME))]),t("td",[e._v(e._s(a.createD_BY))]),t("td",{staticClass:"text-center single-action"},[t("a",{class:1==a.access?"d-none":"",attrs:{href:"javascript:;",title:e.$t("Share")},on:{click:function(t){return e.showshare(a.foldeR_ID,a.foldeR_NAME)}}},[t("em",{staticClass:"fa fa-share-alt text-primary"})]),e._v("   "),t("a",{class:1==a.access?"d-none":"",attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.editfolder(a.foldeR_ID)}}},[t("em",{staticClass:"fa fa-pencil text-success"})]),e._v("  "),t("a",{class:1==a.access||2==a.access?"d-none":"",attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.DeleteActivityData(a.foldeR_ID,a.foldeR_NAME,a.associateD_REPORT)}}},[t("em",{staticClass:"fa fa-trash text-danger"})])])])})),e.noRecord?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"text-center text-danger d-flex align-items-center justify-content-center norecs"},[e._v(" "+e._s(e.$t("NoRecordfound")))])])]):e._e()],2)])]),t("Pager",{attrs:{numberofrecords:e.TotalRecords,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next"},on:{SetCurrentPage:e.SetCurrentPage}})],1)])],1)])]),t("section",{staticClass:"tab mt-2"},[e.showsharereportview?t("sharefolder",{attrs:{foldername:e.foldername,sourcetype:e.folder,folderid:e.folderid},on:{close:e.closeModalSharePopup}}):e._e()],1),t("section",{staticClass:"tab mt-2"},[e.editmodal?t("editmodel",{attrs:{folderId:e.folderId},on:{close:function(t){e.editmodal=!1}}}):e._e()],1)])},m=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])}],h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalshareview",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closePopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("Share")))]),t("span",{staticClass:"user-guide"},[e._m(0),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},["folder"==e.$parent.sourcetype?t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Folder_Share"))}}):t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Report_Share"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{ref:"formdata",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}}),t("div",{staticClass:"table-responsive w-100 float-left"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("SharedAlready")))])])]),t("div",{staticClass:"col-12 p-0 mt-2 px-small-0"},[t("div",{staticClass:"form-group mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Search,expression:"Search"}],staticClass:"form-control",attrs:{id:"searchdata",maxlength:"50",type:"text",placeholder:"Search"},domProps:{value:e.Search},on:{keyup:function(t){return e.SearchData()},input:function(t){t.target.composing||(e.Search=t.target.value)}}})])]),t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"ShareUserRole listing"}},[e._m(1),t("tbody",[e._l(e.UserListingData,(function(a){return t("tr",{key:a},[t("td",[t("div",{staticClass:"conversation-box_custreps"},["User"==a.sharewith_type?t("div",{staticClass:"name-square"},[t("em",{staticClass:"fa fa-user text-white fa-2x",attrs:{"aria-hidden":"true"}})]):e._e(),"Role"==a.sharewith_type?t("div",{staticClass:"role-square"},[t("em",{staticClass:"fa fa-user-circle text-white fa-2x",attrs:{"aria-hidden":"true"}})]):e._e(),t("div",{staticClass:"conversation-header"},[e._v(" "+e._s(a.username)+" ")]),t("div",{staticClass:"conversation-header"},[t("small",[e._v(" "+e._s(a.sharewith_type)+" ")])])])]),t("td",{staticClass:"text-right pr-3 single-action"},[t("select",{on:{change:function(t){return e.dropvalue(t,a.dynamicreportShare_Id)}}},[t("option",{attrs:{value:"1"},domProps:{selected:1==a.access}},[e._v("View Only")]),t("option",{attrs:{value:"2"},domProps:{selected:2==a.access}},[e._v("View & Edit")]),t("option",{attrs:{value:"3"},domProps:{selected:3==a.access}},[e._v("Full Control")])]),e._v("  "),t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.shareroleListingDelete(a.dynamicreportShare_Id)}}},[t("em",{staticClass:"fa fa-trash text-danger ml-4"})])])])})),e.UserListingData.length<1?t("tr",[t("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"2"}},[e._v("No Record(s) Found.")])]):e._e()],2)])]),t("Pager",{attrs:{numberofrecords:e.TotalRecords,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next"},on:{click:e.pagerMethod,change:e.SetPageSize}})],1),t("div",{staticClass:"col-12 float-left p-0 mt-3"},[t("div",{staticClass:"row flex-row-reverse"},[e.TotalRecords>0?t("div",{staticClass:"col-lg-6 text-right"},[t("a",{class:{"btn btn-primary ancsaveuserticket":!0,disabled:!e.isChanged},attrs:{href:"javascript:;",id:"btnSaveDraft",title:"","data-toggle-tooltip":"tooltip"},on:{click:function(t){return e.Updateshare()}}},[t("em",{staticClass:"fa fa-check pr-2"}),e._v("Done")])]):e._e()])])],1)])])])},p=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])},function(){var e=this,t=e._self._c;return t("thead",[t("th",{attrs:{scope:"col"}})])}],f=a("4555"),S={components:{Pager:f["a"]},props:{folderid:{type:Number,required:!0},reportid:{type:Number,required:!0},foldername:{type:String,required:!0},sourcetype:{type:String,required:!0},sharetype:{type:String,required:!0}},data(){return{isLoading:!1,ShowLisiting:!0,UserDDList:[],RoleDDList:[],sharesourcetype:"",sharesourceId:"",sharewithtype:"User",sharewithId:"",sharewithUser:"",sharewithRole:"",dynamicreportShare_Id:0,username:"",is_paged:1,sortBy:"",sortExp:"",PageSize:10,PageNumber:1,UserListingData:[],access:"",modelaccess:"",accessvalue:null,dynamicid:null,Search:"",updatevalue:[],TotalPages:0,TotalRecords:0,userType:"ALL",isChanged:!1,sourcetype:"",sharerepaortId:"",FormSchema:[{layoutType:"Single",Data:[{astype:"RadioField",label:this.$t("Share with "+this.foldername),name:"Sharewithtype",value:"User",placeholder:"",config:{options:[{value:"User",name:"User"},{value:"Role",name:"Role"}],showAddIcon:!1,onChange:this.SelectshareType},validationRules:""}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("User"),name:"User",value:"",placeholder:"Please Select User ",visibility:!0,config:{options:[],showAddIcon:!1,onChange:this.FetchData},validationRules:"required"},{astype:"SelectField",label:this.$t("Role"),name:"Role",value:"",placeholder:"Please Select Role",visibility:!1,config:{options:[],showAddIcon:!1,onChange:this.FetchDataDDL},validationRules:"required"},{astype:"SelectField",label:this.$t("Access"),name:"Access",value:"",placeholder:"Please Select Access ",visibility:!0,config:{options:[{value:"1",name:" View Only"},{value:"2",name:"View & Edit"},{value:"3",name:"Full Control"}],showAddIcon:!1,onChange:""},validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-share-alt pr-2'></i>Share"}]}},created:function(){var e=this;e.FetchData(),e.BindUserRoleListing()},methods:{FetchData:function(){var e=this;(e.FormSchema[1].Data[0].name="User")&&(e.isLoading=!0,i["a"].UserDDL().then(t=>{if(""!=t.data&&null!=t.data){let a=[];a=t.data,e.FormSchema[1].Data[0].config.options=[],a.forEach(t=>{e.FormSchema[1].Data[0].config.options.push({value:t.userid,name:t.username})})}e.isLoading=!1}).catch(e=>{console.log(e)}))},FetchDataDDL:function(e,t){var a=this;if("Role"==a.FormSchema[1].Data[1].name){var o="userType="+a.userType;i["a"].GetRolesDDl(o).then(e=>{if(null!=e.data.DATA&&""!=e.data.DATA){let t=[];t=e.data.DATA,a.FormSchema[1].Data[1].config.options=[],t.forEach((e,t)=>{a.FormSchema[1].Data[1].config.options.push({value:e.role_id,name:e.role_name})})}}).catch(e=>{console.log(e)})}},SelectshareType(e,t){var a=this;t.value=e.target.getAttribute("data-value"),"User"==t.value?(a.FormSchema[1].Data[0].visibility=!0,a.FormSchema[1].Data[1].visibility=!1,a.FetchData()):(a.FormSchema[1].Data[0].visibility=!1,a.FormSchema[1].Data[1].visibility=!0,a.FetchDataDDL()),a.$refs.formdata.validateForm.reset()},closePopup:function(){var e=this;e.$emit("close"),e.UserListingData=[]},onSubmit:function(e){var t=this,a=0;if(t.sourcetype=void 0!=t.$parent.sourcetype?t.$parent.sourcetype:"Report","Role"==e.Sharewithtype?t.sharewithId=e.Role:t.sharewithId=e.User,a="Report"==t.sourcetype?t.reportid:t.folderid,""!=e.Sharewithtype&&""!=t.sharewithId&&""!=e.Access){var o=`dynamicreportShare_Id=${t.dynamicreportShare_Id}&sharesourcetype=${t.sourcetype}&sharesourceId=${a}&sharewithtype=${e.Sharewithtype}&sharewithId=${t.sharewithId}&access=${e.Access}`;i["a"].ShareUserRole(o).then((function(a){t.BindUserRoleListing(),null!=a.data&&(1==a.data[0].Value&&("Report"==t.sourcetype?t.ShowAlert(t.$t("SharedSuccess",[t.$t("Report")]),"success",!0,t.$t("Alert")):t.ShowAlert(t.$t("SharedSuccess",[t.$t("Folder")]),"success",!0,t.$t("Alert"))),0==a.data[0].Value&&("Report"==t.sourcetype?t.ShowAlert("Report is already shared with selected user","danger",!0,t.$t("Alert")):t.ShowAlert("Folder is already shared with selected user","danger",!0,t.$t("Alert"))),e.Sharewithtype="User",t.FormSchema[1].Data[0].value="",t.FormSchema[1].Data[1].value="",t.FormSchema[1].Data[2].value="",t.$refs.formdata.validateForm.reset())}))}},BindUserRoleListing:function(){var e=this,t=0;t="sharereport"==e.sharetype?e.reportid:e.folderid;var a=`username=${e.username}&is_paged=${e.is_paged}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&pageSize=${e.PageSize}&pageNumber=${e.PageNumber}&shared_Id=${t}`;console.log("params",a),i["a"].ShareUserRoleListing(a).then((function(t){e.UserListingData=t.data,t.data.length>0?(e.TotalRecords=t.data[0].totaL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.isLoading?e.isLoading=!0:e.isLoading=!1):(e.TotalRecords=0,e.TotalPages=0)}))},shareroleListingDelete:function(e){var t=this;e>0&&(t.sourcetype=void 0!=t.$parent.sourcetype?t.$parent.sourcetype:"Report",t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t(t.sourcetype),(function(){var a="dynamicreportShare_Id="+e;i["a"].DeleteShareUserRole(a).then((function(e){"Success"==e.data[0].Status?(t.ShowAlert(t.$t("UserRemoved"),"success",!0,t.$t("Alert")),t.BindUserRoleListing()):t.ShowAlert(t.$t("DeletedError",[t.$t(t.sourcetype)]),"failure",!0,t.$t("Alert"))}))})))},SearchData:function(){var e=this,t=`username=${e.Search}&is_paged=${e.is_paged}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&pageSize=${e.PageSize}&pageNumber=${e.PageNumber}&shared_Id=${e.folderid}`;i["a"].ShareUserRoleListing(t).then((function(t){e.UserListingData=t.data,0==e.UserListingData.length?e.TotalRecords=[]:e.TotalRecords=t.data[0].totaL_RECORDS}))},Updateshare:function(){var e=this;if("User"==e.sharewithUser)e.sharewithId=e.sharewithUser;else if("Role"==e.sharewithUser)e.sharewithId=e.sharewithRole;else if(1==e.isChanged){var t=`dynamicreportShare_Id=${e.dynamicid}&sharesourcetype=Folder&sharesourceId=${e.folderid}&sharewithtype=${e.sharewithtype}&sharewithId=${e.sharewithId}&access=${e.accessvalue}`;i["a"].UpdateShareUserRole(t).then((function(t){"Update"==t.data[0].Status&&("Report"==e.sourcetype?e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Share Report")]),"success",!0,e.$t("Alert")):e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Share Folder")]),"success",!0,e.$t("Alert")),e.sharewithId="",e.sharewithUser="",e.sharewithUser=""),e.BindUserRoleListing()}))}e.isChanged=!1},dropvalue:function(e,t){var a=this;a.isChanged=!0,a.accessvalue=e.target.value,a.dynamicid=t},pagerMethod:function(e){var t=this;"Prev"==e.target.innerHTML?t.PageNumber=t.PageNumber-1:"Next"==e.target.innerHTML?t.PageNumber=parseInt(t.PageNumber)+1:t.PageNumber=e.target.innerHTML,"First"==t.PageNumber&&(t.PageNumber="1"),"Last"==t.PageNumber&&(t.PageNumber=t.TotalPages),t.PageSize=t.PageSize,t.PageNumber=t.PageNumber,t.BindUserRoleListing()},SetPageSize:function(e){var t=this;t.isLoading=!0,t.TotalRecords=0,t.PageSize=e.target.value,t.PageNumber=1,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.BindUserRoleListing()}}},v=S,g=a("2877"),D=Object(g["a"])(v,h,p,!1,null,null,null),y=D.exports,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modaleditview",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(this.editfoldername))]),t("span",{staticClass:"user-guide"},[e._m(0),t("div",{staticClass:"divancuserguide collapse",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e.folderId?t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Dynamic_Edit_Folder"))}}):t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Dynamic_Add_Folder"))}})])])])]),t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.ShowLisiting?t("div",{staticClass:"w-100 float-left"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1):e._e()],1)])])])},_=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])}],b={props:{folderId:{type:String,Required:!0}},data(){return{isLoading:!1,ShowLisiting:!0,foldernamemodel:"",folderdescmodel:"",editfoldername:"",DataLoaded:0,FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("FolderName"),name:"FolderName",value:"",placeholder:"Enter Folder Name",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:"required"}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"Description",value:"",placeholder:"Enter Description ",config:{options:[],showAddIcon:!1,cols:6,rows:7},validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){var e=this;e.editFolder(e.folderId),e.folderId>0?e.editfoldername="Edit Folder":e.editfoldername="Add Folder"},methods:{close:function(){var e=this;e.$parent.editmodal=!1,e.foldernamemodel="",e.folderdescmodel=""},editFolder:function(e){var t=this,a="&folder_Id="+e;console.log("params",a),i["a"].EditReportFolder(a).then(e=>{console.log("response",e),t.FormSchema[0].Data[0].value=e.data.folderName,t.FormSchema[1].Data[0].value=e.data.description})},onSubmit:async function(e){var t=this;if(""==t.folderId)var a=`foldername=${e.FolderName}&description=${e.Description}`;else a=`foldername=${e.FolderName}&description=${e.Description}&folder_Id=${t.folderId}`;console.log("params",a),i["a"].AddNewCustomFolder(a).then(e=>{console.log("response",e),2==e.data[0].Value?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Folder")]),"success",!0,t.$t("Alert")),t.close(),t.$parent.GetViewList()):1==e.data[0].Value?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("Folder")]),"success",!0,t.$t("Alert")),t.close(),t.$parent.GetViewList()):(t.ShowAlert(t.$t("AlreadyExists",[t.$t("FolderName")]),"danger",!0,t.$t("Alert")),t.close(),t.$parent.GetViewList())}).catch(e=>{console.log(e)})}}},A=b,R=Object(g["a"])(A,C,_,!1,null,null,null),w=R.exports,E={components:{sharefolder:y,editmodel:w,Pager:f["a"]},props:{callbackfunction:{type:Function},show:{type:Boolean},usertype:{type:String}},data:function(){return{isLoading:!1,ListingData:[],PageNumber:1,PageSize:10,SortBy:"",SortExp:"",noRecord:!0,editmodal:!1,foldername:"",is_paged:1,GroupData:[],folderId:null,TotalRecords:0,TotalPages:0,folderid:"",sourcetype:"folder",showsharereportview:!1,isDeleteMultiple:!1,privilegeParams:null}},created:function(){var e=this;e.privilegeParams="controller=Report&action=",e.GetViewList()},mounted:function(){$("#modalManageView").modal({backdrop:"static",keyboard:!1})},methods:{close:function(){var e=this;e.$parent.ShowManageView=!1,$("#modalManageView").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},GetViewList:function(){var e=this;e.foldername="";var t=`foldername=${e.foldername}&is_paged=${e.is_paged}&pageSize=${e.PageSize}&pageNumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}`;i["a"].ManagefolderListing(t).then((function(t){null!=t.data&&""!=t.data&&(e.ListingData=t.data,e.TotalRecords=t.data[0].totaL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.isLoading=!1,e.noRecord=!1)})),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)},showshare:function(e,t){var a=this;a.showsharereportview=!a.showsharereportview,a.folderid=e,a.foldername=t,a.showsharereportview=!0,$("#modalshareview").modal("show"),setTimeout((function(){$("#modalshareview").modal("show"),setTimeout((function(){a.SetBootstraptoolTip()}),200)}),1e3)},editfolder:function(e){var t=this;t.folderId=e,t.editmodal=!0,$("#modaleditview").modal("show"),setTimeout((function(){$("#modaleditview").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3)},Addnewfolder:function(){var e=this;i["a"].CheckPrivilege(e.privilegeParams+"AddFolder").then(t=>{if(!t.data)return e.ShowAlert(e.$t("UnAuthorized"),"warning",!0,"Alert"),!1;e.folderId="",e.editmodal=!0,$("#modaleditview").modal("show"),setTimeout((function(){$("#modaleditview").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)})},DeleteActivityData:function(e,t,a){var o=this,s=t;if(a>0)return o.ShowAlert(o.$t("AssociatedReport",[a]),"warning",!0,o.$t("Alert")),!1;e>0?o.confirmR(o.$t("ConfirmDelete"),!0,o.$t("Delete")+"  "+o.$t("Folder Name"),(function(){var t="folder_id="+e;i["a"].DeleteReportFolder(t).then((function(e){"Success"==e.data[0].Status?(o.ShowAlert(o.$t("DeletedSuccess",[s+" folder"]),"success",!0,o.$t("Alert")),o.GetViewList()):o.ShowAlert(o.$t("DeletedError",[o.$t("Folder Name")]),"failure",!0,o.$t("Alert"))}))})):o.ShowAlert(o.$t("Selectanyrecordtodelete"),"warning",!0,o.$t("Alert"))},pagerMethod:function(e){var t=this;t.PageNumber=e,t.GetViewList()},SetPageSize:function(e){var t=this;t.isLoading=!0,t.TotalRecords=0,t.PageSize=e,t.PageNumber=1,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.GetViewList()},closeModalSharePopup:function(){var e=this;$("#modalshareview").modal("hide"),e.showsharereportview=!1},onChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;this.isDeleteMultiple=e>0},commonDeleteData:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Folder"),(function(){var e={ids:a,moduleName:"Dynamic_Reporting",subModuleCode:"Dynamic_Reporting",refCode:"Dynamic_Reporting_Folder"},o=JSON.stringify(e);i["a"].CommonDeleteData(o).then((function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),t.isDeleteMultiple=!1,t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Folder")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.GetViewList()):t.ShowAlert(t.$t("DeletedError",[t.$t("Folder")]),"success",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))},SetCurrentPage(e){var t=this;"a"==e.PagerMethod?t.pagerMethod(e.PageNumber):"b"==e.PagerMethod&&t.SetPageSize(parseInt(e.PageSize))}}},I=E,T=Object(g["a"])(I,u,m,!1,null,null,null),F=T.exports,L=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"CustommodalManageView",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(0==e.ReportID?e.$t("AddCustomReport"):e.$t("EditCustomReport")))]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e._v("User Guide")]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Add_Custom_Report"))}})])])])]),t("div",{staticClass:"modal-body"},[t("loader",{attrs:{isVisible:e.isLoading}}),e.ShowLisiting?t("div",{staticClass:"w-100 float-left leftsideicon"},[e.DataLoaded?t("dynamic-form",{ref:"modalAddCustomForm",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.SaveDynamicreport},scopedSlots:e._u([{key:"tgslot-modulelist",fn:function({data:a}){return[t("div",{class:{"container-fluid p-0 ":!0,disabled:0!=e.ReportID}},[t("div",{staticClass:"accordion md-accordion left-filter",attrs:{id:"accordionEx"}},[t("div",{staticClass:"border p-3 bg-light"},e._l(e.MenuDataGroupBy,(function(a,o){return t("div",{key:a.GroupId,staticClass:"card"},[t("div",{staticClass:"card-header heading-border",attrs:{role:"tab",id:"MainColumn"+o}},[t("h5",{staticClass:"mb-0"},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-parent":"#accordionEx","data-target":"#ColumnCollapse"+o,href:"javascript:;","aria-expanded":"false","aria-controls":"ColumnCollapse"+o}},[t("span",{},[e._v(" "+e._s(a.GroupName))]),t("em",{staticClass:"fa fa-angle-down rotate-icon",attrs:{"aria-hidden":"true"}})])])]),t("div",{staticClass:"collapse multi-collapse",attrs:{id:"ColumnCollapse"+o,role:"tabpanel","aria-labelledby":"MainColumn"+o,"data-parent":"#accordionEx"}},[t("div",{staticClass:"user_type_choice mt-2 coloredicons"},e._l(a.GroupData,(function(s,i){return t("div",{key:s.subModuleId,staticClass:"btn-group btn-group-toggle custom-reports-icons my-2",attrs:{"data-toggle":"buttons"},on:{click:function(t){return e.getids(s.subModuleId,a.GroupId,a.GroupName,s.subModuleCode)}}},[t("label",{class:{"btn btn_cstm":!0,active:s.subModuleId==e.selectedModuleId},attrs:{for:"cls_usertype"+i+o}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedModuleId,expression:"selectedModuleId"}],attrs:{type:"radio",name:"cls_usertype",id:"cls_usertype"+i+o},domProps:{value:s.subModuleId,checked:e._q(e.selectedModuleId,s.subModuleId)},on:{change:function(t){e.selectedModuleId=s.subModuleId}}}),t("span",{staticClass:"d-block pb-2"},[t("em",{staticClass:"fa fa-folder-open-o bg-transparent",attrs:{"aria-hidden":"true"}})]),e._v(e._s(e.$t(s.subModuleName))+" ")])])})),0)])])})),0)])]),""!=a.error?t("span",{staticClass:"invalid-feedback d-block"},[e._v(e._s(a.error))]):e._e()]}}],null,!1,203080288)}):e._e(),e.isShowAddFolder?t("div",{staticClass:"parentdiv datarepfix show_hide_folder",staticStyle:{right:"0px",top:"-32px"}},[t("div",{staticClass:"verticle-action lft25"},[t("span",{staticClass:"list-actions text-left p-0 datarep mt-3",staticStyle:{width:"394px"},attrs:{id:"action-list"}},[t("div",{staticClass:"float-left col-12 p-0"},[t("div",{staticClass:"container-fluid p-0 mb-3"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white mt-2"},[e._v(e._s(e.$t("AddNewFolder")))]),t("em",{staticClass:"fa fa-times close close-action_cv close-folder-popup",staticStyle:{opacity:"9"},attrs:{"aria-hidden":"true"},on:{click:function(t){return e.CloseFolderPopup()}}})])])])]),t("div",{staticClass:"col-12 float-left"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.FolderButtons,schema:e.FolderFormSchema},on:{OnSubmit:e.SaveNewFolder}})],1)])])])]):e._e()],1):e._e()],1)])])])},M=[],N={props:{ReportID:{type:[Number,String],Required:!0}},data(){return{isLoading:!1,ShowLisiting:!0,MenuDataGroupBy:[],moduleName:"ALL",reqFrom:"Reporting",foldernamelisting:[],selectedfoldername:null,modelreportname:"",submoduleid:null,moduleid:null,Version:1.1,submodulecode:null,selectedModuleId:null,foldernamemodel:"",folderdescmodel:"",isShowAddFolder:!1,updatedmodulename:"",updatedsubmodulecodename:"",updatedreportid:"",DataLoaded:0,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("ReportName"),name:"ReportName",value:"",placeholder:"Enter Report Name",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:"required"},{astype:"SelectField",label:this.$t("FolderName"),name:"FolderID",value:"",placeholder:"",config:{options:[],showAddIcon:!0,onAddButtonClick:this.AddNewFolderPopup},validationRules:"required"}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Modules"),name:"modulelist",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save and Next"}],FolderFormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("FolderName"),name:"FolderName",value:"",placeholder:"Enter Folder Name",config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:"required"}]}],FolderButtons:[{type:"submit",class:"btn btn-success save mb-2",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){var e=this;e.GetFavDashBoardData(),e.folderlisting(),e.DataLoaded=1},updated:function(){var e=this;""!=e.ReportID&&e.EditDynamicreport(e.ReportID),e.selectedfoldername="",e.selectedModuleId=null,e.modelreportname=""},mounted:function(){$("#CustommodalManageView").modal({backdrop:"static",keyboard:!1})},methods:{close:function(){var e=this;e.selectedfoldername="",e.selectedModuleId=null,e.modelreportname="",e.FormSchema[0].Data[0].value="",e.FormSchema[0].Data[1].value="",e.$refs.modalAddCustomForm.validateForm.reset();var t=document.querySelectorAll("*");t.forEach(e=>{e.classList.remove("show")}),$("#CustommodalManageView").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),e.CloseFolderPopup()},folderlisting:function(){var e=this;i["a"].DDLfolderListing().then(t=>{if(null!=t.data&&""!=t.data){let a=[];a=t.data,e.foldernamelisting=a.sort((e,t)=>e.foldeR_NAME.localeCompare(t.foldeR_NAME)),e.FormSchema[0].Data[1].config.options=[],e.foldernamelisting.forEach((t,a)=>{e.FormSchema[0].Data[1].config.options.push({value:t.foldeR_ID,name:t.foldeR_NAME})}),e.noRecord=!1}}).catch(e=>{console.log(e)})},async GetFavDashBoardData(){var e=this;e.isLoading=!0;var t=`moduleName=${e.moduleName}&reqFrom=${e.reqFrom}`;i["a"].GetAddReportDashboard(t).then(t=>{if(t.statusText="Ok"){e.MenuData=t.data.Data;var a=[];if(null!=e.MenuData&&e.MenuData.length>0){var o=e.MenuData[0].moduleId;$.each(e.MenuData,$.proxy((function(t,s){o=s.moduleId;var i=$.grep(a,(function(e,t){return e.GroupId==o}));if(0==i.length){var r=$.grep(e.MenuData,(function(e,t){return e.moduleId==o}));if(r.length>0){var l={GroupId:o,GroupName:r[0].moduleName,GroupData:r[0].subModules};a.push(l)}}}))),e.MenuDataGroupBy=a}}e.isLoading=!1})},SaveDynamicreport:function(e){var t=this,a="",o=`Report_Id=${a}&ReportName=${e.ReportName}&Folder_Id=${e.FolderID}&Module_Id=${t.moduleid}&Sub_Module_Id=${t.submoduleid}&Ref_Code=${t.submodulecode}&Version=${t.Version}`;null!=t.moduleid&&null!=t.submoduleid&&null!=t.submodulecode?i["a"].AddDynamicreport(o).then(a=>{0==a.data[0].Value?t.ShowAlert(t.$t("AlreadyExists",[t.$t("Report name")]),"danger",!0,t.$t("Alert")):-1==a.data[0].Value?t.ShowAlert(t.$t("Failure",[t.$t("Report name")]),"danger",!0,t.$t("Alert")):(this.$router.push({name:"AddDataReport",params:{Modulename:t.moduleName,Submodulecode:t.submodulecode,ReportName:e.ReportName,ReportID:a.data[0].Value,NewReportInserted:"Save",Module_Id:t.moduleid,Folder_Id:e.FolderID,Sub_Module_Id:t.submoduleid,Version:t.Version,Action:"Add"}}),t.close())}).catch():(t.ShowAlert(""==e.ReportName&&""==e.FolderID?t.$t("FillRequiredFields"):t.$t("SelectSubModule"),"danger",!0,t.$t("Alert")),t.isLoading=!1)},EditDynamicreport:function(e){var t=this,a="&Report_id="+e;i["a"].Editdyanmicreport(a).then(e=>{t.modelreportname=e.data.ReportName,t.selectedfoldername=e.data.Folder_Id,t.moduleid=e.data.Module_Id,t.submoduleid=e.data.Sub_Module_Id,t.submodulecode=e.data.Ref_Code,t.selectedModuleId=e.data.Sub_Module_Id,t.updatedmodulename=e.data.module_name,t.updatedsubmodulecodename=e.data.Ref_Code,void 0!=t.updatedmodulename&&""!=t.updatedmodulename&&t.SaveDynamicreport(t.ReportID)}).catch(e=>{console.log(e)})},getids:function(e,t,a,o){var s=this;s.submoduleid=e,s.moduleid=t,s.moduleName=a,s.submodulecode=o},AddNewFolderPopup:function(){var e=this;e.isShowAddFolder=!0},CloseFolderPopup:function(){var e=this;e.foldernamemodel="",e.folderdescmodel="",e.FolderFormSchema[0].Data[0].value="",e.FolderFormSchema[0].Data[1].value="",e.$refs.modalAddCustomForm.validateForm.reset(),e.isShowAddFolder=!1},SaveNewFolder:function(e,t){var a=this,o=`foldername=${e.FolderName}&description=${e.Description}`;i["a"].AddNewCustomFolder(o).then(e=>{1==e.data[0].Value?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Folder")]),"success",!0,a.$t("Alert")),a.folderlisting(),a.CloseFolderPopup()):0==e.data[0].Value&&a.ShowAlert(a.$t("AlreadyExists",[a.$t("Folder name")]),"danger",!0,a.$t("Alert"))})}}},P=N,U=(a("2c3f"),Object(g["a"])(P,L,M,!1,null,"285c3c6c",null)),O=U.exports,x=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalemailview",role:"dialog"}},[t("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("Sendreport")))]),t("span",{staticClass:"user-guide"},[e._m(0),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("User_Guide_Dynamic_Send_report"))}})])])])]),e.showemail?t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"w-100 float-left"},[e.DataLoaded?t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.SendEmail},scopedSlots:e._u([{key:"tgslot-EnterEmailID",fn:function({data:a}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.fieldInfo.value},on:{input:function(t){t.target.composing||e.$set(a.fieldInfo,"value",t.target.value)}}}),t("small",{staticClass:"form-text text-info"},[e._v("Enter multiple email id by comma seperator")])]}}],null,!1,1257938839)}):e._e()],1)],1):e._e()])])])},k=[function(){var e=this,t=e._self._c;return t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:;",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v("User Guide")])}],B=(a("b0ac"),{props:{ReportID:{type:Number,Required:!0},MODULENAME:{type:String,Required:!0},SUBMODULECODE:{type:String,Required:!0}},data(){return{isLoading:!1,modelreportname:"",modelusername:"",ddldata:[],userType:"ALL",sharetomodel:"User",modelemailid:[],selectedusername:[],Options:[],CustomReportName:"CustomReport",tempdata:[],showemail:!0,UserValue:100,modelemailrequired:"",GetJsonValues:[],GetUserIds:[],DataLoaded:0,FormSchema:[{layoutType:"single",Data:[{astype:"RadioField",label:this.$t("SendEmailTo"),name:"SendEmailTo",value:"",placeholder:"",config:{options:[{name:"User",value:"User"},{name:"Role",value:"Role"}],onChange:this.onchange},validationRules:""},{astype:"MultiSelectField",label:this.$t("SelectRecipient"),name:"SelectRecipient",value:"",mode:"tag",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:""},{astype:"SlotField",label:this.$t("EnterEmailID"),name:"EnterEmailID",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:""},{astype:"TextField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-paper-plane pr-2'></i>Send"}]}},created:function(){var e=this;e.FetchUserData(),e.EditEmailReport(e.ReportID),e.GetJsonforExcel(e.ReportID),e.FormSchema[0].Data[0].value=e.sharetomodel,e.DataLoaded=1},mounted:function(){$("#modalemailview").modal({backdrop:"static",keyboard:!1})},methods:{close:function(){var e=this;e.sharetomodel="User",e.selectedusername=[],e.modelemailid=[],e.showemail=!1,e.$emit("close"),$("#modalemailview").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},GetJsonforExcel:async function(e){var t=this,a=`ReportId=${e}&IsPaged=1`;await i["a"].GetReportDetailsbyId(a).then(e=>{null!=e.data&&void 0!=e.data&&(t.GetJsonValues=e.data.JSON_To_Create_ReportListing[0])}).catch(e=>{console.log("Data Not Found")})},EditEmailReport:function(e){var t=this,a="&Report_id="+e;i["a"].Editdyanmicreport(a).then(e=>{t.modelreportname=e.data.ReportName,t.FormSchema[0].Data[3].value=t.modelreportname}).catch(e=>{console.log(e)})},FetchUserData:function(){var e=this;e.isLoading=!0,i["a"].UserDDL().then(t=>{e.ddldata=t.data,e.FormSchema[0].Data[1].config.options=[],e.Options=[],e.ddldata.forEach(t=>{e.Options.push({value:t.userid,name:t.username})}),e.FormSchema[0].Data[1].config.options=e.Options,e.isLoading=!1}).catch(e=>{console.log(e)})},FetchRoleData:function(){var e=this,t="userType="+e.userType;i["a"].GetRolesDDl(t).then(t=>{e.ddldata=t.data.DATA,e.FormSchema[0].Data[1].config.options=[],e.Options=[],e.ddldata.forEach(t=>{e.Options.push({value:t.role_id,name:t.role_name})}),e.FormSchema[0].Data[1].config.options=e.Options}).catch(e=>{console.log(e)})},onchange:function(e){var t=this;"User"==e.target.dataset.value?(t.Options=[],t.selectedusername=[],t.FormSchema[0].Data[0].value="User",t.FormSchema[0].Data[1].value="",t.FetchUserData()):(t.Options=[],t.selectedusername=[],t.FormSchema[0].Data[0].value="Role",t.FormSchema[0].Data[1].value="",t.FetchRoleData())},GetUserEmailID:function(e){var t=this;""==t.modelemailid&&(t.modelemailid=[]),e.length>0?t.ddldata.forEach((a,o)=>{e.forEach((o,s)=>{(a.userid==o||a.role_id==o)&&(t.tempdata=e,t.GetUserIds=e)})}):(t.modelemailid=[],t.modelusername="")},MulitEmailValidate:function(e){var t=this;if(t.modelemailid=e,""==t.modelemailid||void 0==t.modelemailid)return!0;if("string"==typeof t.modelemailid){var a=t.modelemailid.split(",");t.modelemailid=a;var o=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;for(let[e]of t.modelemailid.entries()){var s=t.modelemailid[e];if(!s.match(o))return t.ShowAlert('The email address  "'+s+'"  is invalid',"danger",!0,t.$t("Alert")),!1}return!0}},EmailData:function(){var e=this;if("object"==typeof e.modelemailid){e.GetUserIds.length>0?e.modelusername="User":e.modelusername=e.modelemailid;var t=String(e.modelemailid);e.modelemailid=t}},SendEmail:function(e,t){var a=this,o="";e.SelectRecipient.length>0&&e.SelectRecipient.forEach((e,t)=>{o+=0==t?e.value:","+e.value});var s=a.MulitEmailValidate(e.EnterEmailID);if(s){var r={emailPostString:[{configModuleName:"Email",reportId:a.ReportID,reportname:a.modelreportname,sendername:a.modelusername,moduleName:a.MODULENAME,subModuleCode:a.SUBMODULECODE,from:a.GetUserInfo.Name,subject:e.Subject,message:"Greetings! This is the Test Email of Reporting Data with an Excel File Attachment.Find Attachment","importance ":"high",quoteCompanyLogo:"",forInvoice:"yes",refId:0,isSaveLog:"",recipients:{type:e.SendEmailTo,ids:o,ExtraEmailIDs:e.EnterEmailID,Req_From:"FromEmail"}}]},l=JSON.stringify(r);if(!(a.ReportID>0)||""==e.EnterEmailID&&""==o)return a.ShowAlert(a.$t("SelectOneUserRoleEmail"),"warning",!0,a.$t("Alert")),!1;a.isLoading=!0,i["a"].SendEmailService(l).then(e=>{"Success"==e.data[0].Status?(a.ShowAlert(a.$t("Email_Sent"),"success",!0,a.$t("Alert")),a.isLoading=!1,a.close()):"Failed"==e.data[0].Status?(a.ShowAlert(e.data[0].Value,"danger",!0,a.$t("Alert")),a.isLoading=!1):(a.ShowAlert(a.$t("EmailFailed"),"danger",!0,a.$t("Alert")),a.isLoading=!1)}).catch(e=>{console.log(e),a.ShowAlert(a.$t("EmailFailed"),"danger",!0,a.$t("Alert")),a.isLoading=!1})}}}}),V=B,G=(a("4a21"),Object(g["a"])(V,x,k,!1,null,"5371273b",null)),q=G.exports,z=a("01f0"),j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"cstm-drop-btn"},[e.isShowLoader?t("button",{staticClass:"btn btn-dark w-100",staticStyle:{padding:"2px 10px 2px 2px"},attrs:{type:"button",disabled:""}},[t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),e._v(" Loading...")]):e._e(),e.isShowLoader?e._e():t("select",{directives:[{name:"model",rawName:"v-model",value:e.StatusId,expression:"StatusId"}],staticClass:"w-100",class:{ddlchangestatus:e.IsReponsive},style:{backgroundColor:e.StatusBgColor,color:e.StatusColor},attrs:{id:"crmlistingStatus_span",disabled:e.StatusCode==e.StatusId,oldstatus:e.PrevStatus,checkPrivilege:"yes","data-id":e.IsReponsive?e.dataid:null,"data-status":e.IsReponsive?e.StatusId:null},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.StatusId=t.target.multiple?a:a[0]},function(t){return e.ChangeStatus(e.dataid,t)}]}},e._l(e.StatusList,(function(a,o){return t("option",{key:o,domProps:{value:a.STATUS_ID}},[e._v(" "+e._s(a.STATUS)+" ")])})),0)])},Y=[],H={name:"listing-status",props:{dataid:{type:Number,required:!0},dataselected:{type:String,required:!0},dataController:{type:String,required:!0},dataAction:{type:String,required:!0},isfor:{type:String,required:!0},callbackfunction:{type:Function},statuslist:{type:Array,required:!0},isselectedvaluestring:{type:Boolean},parentid:{type:Number},haschild:{type:Boolean},hasglobal:{type:Boolean,required:!1}},data:function(){return{StatusId:this.dataselected,StatusCode:"",PrevStatus:this.dataselected,IsReponsive:!1,StatusList:this.statuslist,item:this.item,StatusColor:"#ffffff",StatusBgColor:"#525f65",isShowLoader:!0,privilegeParams:""}},created:function(){var e=this;e.privilegeParams="controller=Report&action=",1!=e.hasglobal&&"true"!=e.hasglobal||(e.StatusList=this.GetStatusList()),$.each(e.statuslist,(function(t,a){"Closed"==e.statuslist[t].STATUS&&(e.StatusCode=e.statuslist[t].STATUS_ID)}));try{this.isShowLoader=!(this.statuslist.length>0)}catch(o){this.isShowLoader=!1}var t=this;if(1==this.isselectedvaluestring){var a=this.StatusList.filter((function(e){return e.STATUS==t.dataselected}));a.length>0?(this.StatusId=a[0].STATUS_ID,this.PrevStatus=a[0].STATUS_ID,this.GetColor()):(this.StatusId="",this.PrevStatus="")}else this.StatusId=this.dataselected,this.PrevStatus=this.dataselected,this.GetColor();this.GetColor()},mounted:function(){var e=this;$("body").on("change",".ddlchangestatus",(function(t){t.stopImmediatePropagation(),e.ChangeStatus($(this).attr("data-id"),t,t.target.value)}))},watch:{dataselected:function(e){if(1==this.isselectedvaluestring){var t=this.StatusList.filter((function(t){return t.STATUS==e}));t.length>0?(this.StatusId=t[0].STATUS_ID,this.PrevStatus=t[0].STATUS_ID,this.GetColor()):(this.StatusId="",this.PrevStatus="")}else this.StatusId=e,this.PrevStatus=e,this.GetColor();this.GetColor()},statuslist:function(e){this.isShowLoader=!1,this.StatusList=e;var t=this;if(1==t.isselectedvaluestring){var a=t.StatusList.filter((function(e){return e.STATUS==t.dataselected}));a.length>0?(t.StatusId=a[0].STATUS_ID,t.PrevStatus=a[0].STATUS_ID,t.GetColor()):(t.StatusId="",t.PrevStatus="",this.GetColor())}else this.StatusId=e,t.PrevStatus=e,this.GetColor()}},methods:{GetColor:function(){var e=this;if(null!=e.StatusList&&e.StatusList.length>0){var t=$.grep(e.StatusList,(function(t,a){return t.STATUS_ID==e.StatusId}));null!=t&&t.length>0&&(e.StatusColor=t[0].STATUS_COLOR,e.StatusBgColor=t[0].STATUS_BG_COLOR,null==e.StatusColor||""==e.StatusColor?(e.StatusColor="#ffffff",e.StatusBgColor="#525f65"):e.StatusId=t[0].STATUS_ID)}},GetStatusList:function(){var e=[],t={STATUS_ID:1001,STATUS:this.$t("Active"),STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"};return e.push(t),t={STATUS_ID:1002,STATUS:this.$t("Inactive"),STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"},e.push(t),e},ChangeStatus:function(e,t,a){var o=t.target.selectedOptions[0].text,s=this;i["a"].CheckPrivilege(s.privilegeParams+"UpdateStatus").then(r=>{if(!r.data)return s.ShowAlert(s.$t("UnAuthorized"),"warning",!0,"Alert"),s.StatusId=s.PrevStatus,!1;"Closed"==o&&s.dataController+"/"+s.isfor=="Crm/CRM_LEADS"?s.dataController:(s.dataController,s.dataAction),s.PrevStatus!=$(t.target).attr("oldstatus")&&(s.PrevStatus=$(t.target).attr("oldstatus"));var l=this.$t("ConfirmUpdateStatusRecord"),d=s.isfor;"TASKLISTING"==s.isfor&&(l=s.$t("ConfirmUpdateTaskStatus"),l=1==s.haschild?this.$t("ConfirmUpdateTaskStatus"):0==s.haschild&&Number(s.parentid)>0?this.$t("ConfirmUpdateChildTaskStatus"):this.$t("ConfirmUpdateStatusRecord"));var n=!1,c=0;$.each(s.statuslist,(function(e,t){"REFPEN"==t.STATUS_CODE?c=t.STATUS_ID:"PNPGRS"==t.STATUS_CODE&&(InprogressStatusId=t.STATUS_ID)})),(Number(s.parentid)>0&&"1002"==s.PrevStatus&&"1001"==s.StatusId||Number(s.parentid)>0&&"1002"!=s.PrevStatus&&1001==s.StatusId||Number(s.parentid)>0&&s.StatusId==Number(c)||Number(s.parentid)>0&&s.StatusId==Number(InprogressStatusId))&&(n=!0),n&&(d="TASKCHILDLISTING"),"TASKLISTING"==s.isfor&&(l=n?this.$t("ConfirmUpdateChildTaskStatus"):this.$t("ConfirmUpdateTaskStatus")),s.confirmR(l,!0,this.$t("UpdateCommonStatus"),(function(t){a&&(s.StatusId=a);var o={ID:e,StatusId:s.StatusId,IsFor:d},r=JSON.stringify(o);i["a"].CommonUpdateStatus(r).then((function(e){null!=e.data&&"Success"===e.data.status?(s.ShowAlert(s.$t("RecordUpdatedSuccessfully"),"success",s.$t("Alert")),s.PrevStatus=s.StatusId,"undefined"!=typeof s.callbackfunction&&null!=s.callbackfunction&&s.callbackfunction()):s.ShowAlert(s.$t("UnknownErrorOccur"),"failure",!0,s.$t("Alert"))}),(function(e){}))}),(function(e){s.StatusId=s.PrevStatus}))})}}},J=H,W=Object(g["a"])(J,j,Y,!1,null,null,null),Z=W.exports,K={components:{sharereportview:y,viewcustomreport:O,viewmanagefolder:F,emailreportview:q,modalscheduleview:z["a"],listingstatus:Z},props:{sourcetype:{type:String,required:!0}},data(){return{noRecord:!1,isLoading:!1,ReportData:null,TotalRecords:0,listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,ShowManageView:!1,ShowAddCustomReportView:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,listActions:c.listActions,searchCondition:"",conditionForInstantSearch:"",SortBy:"",SortExp:"",showsharereportview:!1,showemailreportview:!1,showschedulereportview:!1,ReportID:null,reportname:"",reportid:"",foldername:"",folderid:"",LeadStatusList:[],StatusListForListing:[],searchcondition:"",MODULENAME:null,SUBMODULECODE:null,privilegeParams:null,sharetype:"",Headers:[{COLUMN_NAME:"REPORTNAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Report Name",DISPLAY_ORDER:1},{COLUMN_NAME:"MODULENAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Module Name",DISPLAY_ORDER:1},{COLUMN_NAME:"SUBMODULENAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sub Module Name",DISPLAY_ORDER:1},{COLUMN_NAME:"CREATED_BY",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Created By",DISPLAY_ORDER:1},{COLUMN_NAME:"FOLDER_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Folder Name",DISPLAY_ORDER:1},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Created Date",DISPLAY_ORDER:1},{COLUMN_NAME:"MODIFIED_BY",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Modified By",DISPLAY_ORDER:1},{COLUMN_NAME:"MODIFIED_AT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Modified Date",DISPLAY_ORDER:1},{COLUMN_NAME:"STATUS_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:1}]}},async created(){var e=this;e.privilegeParams="controller=Report&action=",await e.FetchData(),c.bindleftCommonSearchdropdown(e,"Dynamic_Reporting","FOLDER_NAME"),c.bindleftCommonSearchdropdown(e,"Dynamic_Reporting","CREATED_BY"),c.bindleftCommonSearchdropdown(e,"Dynamic_Reporting","MODIFIED_BY"),e.getStatuslistForListing("Dynamic_Reporting","en")},mounted(){c.leftsearchSchema.forEach(e=>{e.value="",e.isSearch=!1})},methods:{renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(t=>{let o={...t};switch(o.title){case"View":o.isVisible=(e.ACCESS,!0);break;case"Send Email":o.isVisible=1!=e.ACCESS&&2!=e.ACCESS;break;case"Schedule":o.isVisible=1!=e.ACCESS&&2!=e.ACCESS;break;case"Share":o.isVisible=1!=e.ACCESS&&2!=e.ACCESS;break;case"Edit":o.isVisible=1!=e.ACCESS;break;default:o.isVisible=!0;break}a.push(o)}),a},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"ManageFolder":this.ManageFolder();break;case"AddCustomReport":this.AddCustomReport();break;case"commonDeleteData":this.commonDeleteData();break;case"EmailScheduleListing":this.EmailScheduleListing();break}},actionButtonClick:function(e,t,a,o){var s=this;switch(e){case"sharereport":s=this;i["a"].CheckPrivilege(s.privilegeParams+"ShareReport").then(a=>{if(!a.data)return s.ShowAlert(s.$t("UnAuthorized"),"warning",!0,"Alert"),!1;s.sharetype=e,s.folderid=t.FOLDER_ID,s.ReportID=t.REPORT_ID,s.foldername=t.REPORTNAME,s.showsharereportview=!0,$("#modalshareview").modal("show"),setTimeout((function(){$("#modalshareview").modal("show"),setTimeout((function(){s.SetBootstraptoolTip()}),200)}),1e3)});break;case"sendemail":s.sendemail(t.REPORT_ID,t.MODULENAME,t.SUBMODULECODE);break;case"editreport":s.editreport(t);break;case"setschedule":s.setschedule(t.REPORT_ID);break;case"ViewReport":s.ViewReport(t.REPORT_ID,t.ACCESS,t.FOLDER_ID);break}},editreport:function(e){var t=this;i["a"].CheckPrivilege(t.privilegeParams+"Update").then(a=>{if(!a.data)return t.ShowAlert(t.$t("UnAuthorized"),"warning",!0,"Alert"),!1;t.$router.push({name:"EditDataReport",params:{Modulename:e.MODULENAME,Submodulecode:e.SUBMODULECODE,ReportName:e.REPORTNAME,ReportID:e.REPORT_ID,Module_Id:e.MODULE_ID,Folder_Id:e.FOLDER_ID,Sub_Module_Id:e.Sub_Module_Id,Version:t.Version,Action:"Edit"}})})},ViewReport:function(e,t,a){var o=this;o.$router.push("/Report/viewcustomreport/"+btoa(JSON.stringify({ReportID:e,ACCESS:t,Folder_Id:a})))},sortdata:async function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),await this.FetchData(),$("#th-"+e+"  span:first-child").attr("class",t)},pagerMethod:async function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,await this.FetchData()},leftCommonSearch:async function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",await this.FetchData()},ManageFolder:function(){var e=this;i["a"].CheckPrivilege(e.privilegeParams+"FolderListing").then(t=>{if(!t.data)return e.ShowAlert(e.$t("UnAuthorized"),"warning",!0,"Alert"),!1;var a;e.ShowManageView=!0,$("#modalManageView").modal("show"),setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3),null===(a=e.$refs.managefolder)||void 0===a||a.GetViewList()})},AddCustomReport:function(){var e=this;i["a"].CheckPrivilege(e.privilegeParams+"Add").then(t=>{if(!t.data)return e.ShowAlert(e.$t("UnAuthorized"),"warning",!0,"Alert"),!1;var a;e.ReportID="",e.ShowAddCustomReportView=!0,$("#CustommodalManageView").modal("show"),setTimeout((function(){$("#CustommodalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3),null===(a=e.$refs.customreportfolder)||void 0===a||a.folderlisting()})},EmailScheduleListing(){var e=this;e.$router.push({name:"EmailScheduleListing"})},commonDeleteData:function(e){var t=this;i["a"].CheckPrivilege(t.privilegeParams+"Delete").then(e=>{if(!e.data)return t.ShowAlert(t.$t("UnAuthorized"),"warning",!0,"Alert"),!1;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Report"),(function(){var e={ids:a,moduleName:"Dynamic_Reporting",subModuleCode:"Dynamic_Reporting",refCode:"Dynamic_Reporting"},o=JSON.stringify(e);i["a"].CommonDeleteData(o).then((async function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Report")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),await t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Report")]),"success",!0,t.$t("Alert"))}))})):ShowAlert(t.$t("Selectanyrecordtodelete"))})},sendemail:function(e,t,a){var o=this;i["a"].CheckPrivilege(o.privilegeParams+"SendEmail").then(s=>{if(!s.data)return o.ShowAlert(o.$t("UnAuthorized"),"warning",!0,"Alert"),!1;o.ReportID=e,o.MODULENAME=t,o.SUBMODULECODE=a,o.showemailreportview=!0,$("#modalemailview").modal("show"),setTimeout((function(){$("#modalemailview").modal("show"),setTimeout((function(){o.SetBootstraptoolTip()}),200)}),1e3)})},setschedule:function(e){var t=this;i["a"].CheckPrivilege(t.privilegeParams+"ScheduleReport").then(a=>{if(!a.data)return t.ShowAlert(t.$t("UnAuthorized"),"warning",!0,"Alert"),!1;t.ReportID=e,t.showschedulereportview=!0,$("#modalscheduleview").modal("show"),setTimeout((function(){$("#modalscheduleview").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3)})},getRequestParams:function(e,t,a,o,s,i){let r={};return e&&(r["pageNumber"]=e),i&&(r["searchcondition"]=i),s&&(r["is_paged"]=s),a&&(r["sortBy"]=a),o&&(r["sortExp"]=o),t&&(r["pageSize"]=t),r},clickEventOfColumn:function(e,t){"REPORTNAME"==t.COLUMN_NAME&&this.$router.push({name:"viewcustomreport",params:{ReportID:e.REPORT_ID,ACCESS:e.ACCESS}})},FetchData:async function(){const e=this.getRequestParams(this.pageNumber,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition);var t=this;this.isLoading=!0,e.pageSize=t.PageSize,e.pageNumber=t.PageNumber,e.searchCondition=t.searchCondition,t.PageNumber?e.pageNumber=t.PageNumber:t.PageNumber=e.pageNumber=1,"undefined"!=typeof t.isPaged?e.isPaged=t.isPaged:t.isPaged=e.isPaged=1,e.isPaged=t.isPaged,e.sortBy=t.SortBy,e.sortExp=t.SortExp;t.TotalRecords=t.TotalRecords-1,this.isBlank(this.searchCondition)||this.searchCondition,this.isBlank(this.conditionForInstantSearch)||(this.isBlank(this.searchCondition)?this.conditionForInstantSearch:this.conditionForInstantSearch),await i["a"].CustomReportListing(e).then((function(e){t.Headers.forEach(e=>{e.settings=null,"REPORTNAME"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn,formatter:t.columnDataFormatter}),"STATUS_NAME"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})}),""!=e.data&&null!=e.data?(e.data.data.length>0?(t.ReportData=e.data.data,t.ReportData.forEach(e=>{1==e.ACCESS||2==e.ACCESS?e.isCheckBoxDisabled=!0:e.isCheckBoxDisabled=!1,null==e.ACCESS&&(e.ACCESS=0),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/Report/viewcustomreport/"+btoa(JSON.stringify({ReportID:e.REPORT_ID,ACCESS:e.ACCESS,Folder_Id:e.FOLDER_ID})))}),t.TotalRecords=e.data.data[0].TOTAL_RECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.ReportData=[],t.noRecord=!0,t.TotalRecords=0),void 0!=localStorage.SavedParameters&&localStorage.removeItem("SavedParameters")):(t.noRecord=!0,t.ReportData=[],t.TotalRecords=0),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500),t.isLoading=!1}))},closeModalSharePopup:function(){$("#modalshareview").modal("hide"),this.showsharereportview=!1},getStatuslistForListing:function(e,t){var a=this,o="langCode="+t+"&statusType="+e+"&hasglobal=true";i["a"].statusdropdown(o).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))}}},Q=K,X=Object(g["a"])(Q,o,s,!1,null,null,null);t["default"]=X.exports}}]);
//# sourceMappingURL=chunk-079f8dfc.js.map