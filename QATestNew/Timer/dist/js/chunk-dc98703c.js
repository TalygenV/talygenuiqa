(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc98703c"],{"13d5":function(t,e,a){"use strict";var s=a("23e7"),i=a("d58f").left,l=a("a640"),r=a("2d00"),o=a("605d"),n=!o&&r>79&&r<83,d=n||!l("reduce");s({target:"Array",proto:!0,forced:d},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},"4b28":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",[e("TimeSheetListing")],1)},i=[],l=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"col-md-12 p-0 mt-2"},[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("TimeSheet"))+" ")]),e("span",{staticClass:"p-actions float-right"},[e("a",{staticClass:"p-action-btn text-white",attrs:{id:"AddManually",href:"javascript:;"},on:{click:t.exportToExcel}},[e("em",{staticClass:"fa fa-list"}),e("br"),e("span",[t._v(t._s(t.$t("Export")))])]),e("a",{staticClass:"p-action-btn text-white openWeek",attrs:{id:"AddManually",href:"javascript:;"},on:{click:t.toggleDatePanel}},[e("em",{staticClass:"fa fa-calendar"}),e("br"),e("span",[t._v(t._s(t.$t(t.selectedName)))])]),e("a",{staticClass:"p-action-btn text-white",class:t.listCheckbox.length>0?"":"tt_disabled",attrs:{id:"DeleteMultiple",title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Delete"},on:{click:t.deleteMultipleRow}},[e("i",{staticClass:"fa fa-trash"}),e("br"),e("span",[t._v("Delete")])])])])]),t.isDatePanelVisible?e("div",{ref:"weekModal",staticClass:"DatePopUp divtimer_design p-1 R75",staticStyle:{display:"block",width:"125px"},attrs:{id:"DivTimer_","data-pageaction":""}},[e("table",{staticClass:"table-responsive AssetDatePopUp d-block"},[e("tbody",{staticClass:"daterangebody"},[e("tr",{staticClass:"daterangetr"},[e("td",{staticClass:"sep daterangetd",staticStyle:{width:"100%!important"}},[e("ul",{staticClass:"date_select"},[e("li",{staticClass:"borderbottom"},[e("a",{staticClass:"Week",attrs:{title:"",id:"aWeek","data-toggle-tooltip":"tooltip","data-original-title":"This Week"},on:{click:function(e){t.getListByDateType("thisWeek",t.$t("thisWeek"))}}},[t._v(t._s(t.$t("thisWeek")))])]),e("li",[e("a",{staticClass:"LastWeek",attrs:{id:"aLastWeek",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Last Week"},on:{click:function(e){t.getListByDateType("LastWeek",t.$t("LastWeek"))}}},[t._v(t._s(t.$t("LastWeek")))])])])])])])])]):t._e(),e("div",{staticClass:"listing py-3"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.DataLoaded?e("dynamic-form",{staticClass:"daterangecontrolHS",attrs:{lang:"en",buttons:t.buttons1,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-slotdate",fn:function({data:a}){return[e("DatePicker",{staticClass:"d-flex col-12 input-group timesheetdatepicker bg-white p-0",attrs:{popover:!1,masks:t.dateMask},on:{input:t.GetStartEndDates},scopedSlots:t._u([{key:"default",fn:function({togglePopover:a,inputValue:s,inputEvents:i}){return[e("a",{staticClass:"pr-2 text-dark bg-white py-1 float-left",staticStyle:{cursor:"default"},attrs:{id:"aDateLable"}},[t._v(t._s(t.$t("DateRange"))+": "+t._s(t.DisplayWeekDate))]),e("input",t._g({staticClass:"form-control datepicker_HS",attrs:{id:"date_range"},domProps:{value:s}},i)),e("div",{staticClass:"input-group-append cursor-pointer",on:{click:a}},[e("span",{staticClass:"input-group-text"},[e("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.dateselect,callback:function(e){t.dateselect=e},expression:"dateselect"}})]}},{key:"tgslot-slotbutton",fn:function({data:a}){return[e("button",{staticClass:"btn btn-success",attrs:{title:t.$t("ShowTimeSheet")},on:{click:t.FetchData}},[t._v(t._s(t.$t("ShowTimeSheet"))+" ")])]}},{key:"tgslot-slotstartenddate",fn:function({data:a}){return[e("p",{staticStyle:{top:"-74px","margin-left":"104px"}},[t._v(t._s(t.DisplayWeekDate))])]}}],null,!1,549951234)}):t._e(),e("div",{staticClass:"listing"},[e("div",{staticClass:"col-10 mb-2 float-left p-0"},[e("div",{staticClass:"mr-2 d-inline-block"},[e("span",{staticClass:"legends-purple colorboxsquare"}),t._v(" "+t._s(t.$t("LeaveHoliday"))+" ")]),e("div",{staticClass:"mr-2 d-inline-block"},[e("span",{staticClass:"lg-flaggedentry colorboxsquare"}),t._v(t._s(t.$t("UnPaidLeaveRecords"))+" ")])]),e("div",{staticClass:"col-2 mb-2 float-right p-0"},[e("a",{ref:"taskModalOpen",staticClass:"btn btn-primary formbtn",class:t.sendForApprovalButton?"":"tt_disabled",staticStyle:{float:"right"},attrs:{id:"btnAddNewEntry",name:"btnAddNewEntry",title:t.$t("AddNewEntry")},on:{click:t.showAddTaskModal}},[e("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNewEntry")))]),t.addTaskShow?e("div",{ref:"taskAddModal",staticClass:"hs_tag3 taskAddModal"},[e("AddTaskTimeSheetModal",{ref:"hs_tag3",attrs:{store:t.store,userId:t.FormSchema[0].Data[1].value},on:{close:function(e){t.addTaskShow=!1},saveTaskEntry:t.saveTaskEntry}})],1):t._e()])]),e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 timesheettable",attrs:{id:"tableData"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"remove_td align-middle text-center",staticStyle:{"max-width":"30px","min-width":"30px",width:"30px"}},[e("div",{staticClass:"form-check form-check-inline p-0"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.allCheck,expression:"allCheck"}],class:{"chkItems custom-control-input":!0},staticStyle:{display:"none"},attrs:{disabled:!t.sendForApprovalButton,type:"checkbox",name:"DeleteInputs",id:"allCheck"},domProps:{value:"all",checked:Array.isArray(t.allCheck)?t._i(t.allCheck,"all")>-1:t.allCheck},on:{change:[function(e){var a=t.allCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var l="all",r=t._i(a,l);s.checked?r<0&&(t.allCheck=a.concat([l])):r>-1&&(t.allCheck=a.slice(0,r).concat(a.slice(r+1)))}else t.allCheck=i},t.allCheckBox]}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"allCheck"}})])])]),e("th",{staticClass:"remove_td align-middle d-none"}),e("th",{staticStyle:{"min-width":"200px"}},[t._v(t._s(t.$t("ProjectName")))]),e("th",{staticClass:"align-middle d-none"},[t._v(t._s(t.$t("TaskDescription")))]),e("th",{staticClass:"align-middle d-none"},[t._v(t._s(t.$t("TaskName")))]),t._l(t.HeaderList,(function(a,s){return e("th",{key:s,staticClass:"text-center"},[t._v(" "+t._s(t.getPreviousDay(a))+" ")])})),e("th",{staticClass:"text-center",attrs:{id:"RowTotal"}},[t._v(t._s(t.$t("Total")))]),e("th",{staticClass:"remove_td"},[t._v(t._s(t.$t("Action")))])],2)]),e("tbody",[t._l(t.computedTimesheetList,(function(a,s){return e("tr",{key:s},[e("td",{staticClass:"remove_td tabchild text-center"},[e("div",{staticClass:"form-check form-check-inline p-0"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.listCheckbox,expression:"listCheckbox"}],staticClass:"list-checkBox",class:{"chkItems custom-control-input":!0},staticStyle:{display:"none"},attrs:{disabled:!t.sendForApprovalButton,type:"checkbox",name:"DeleteInputs",id:"chk_"+s},domProps:{value:s,checked:Array.isArray(t.listCheckbox)?t._i(t.listCheckbox,s)>-1:t.listCheckbox},on:{change:[function(e){var a=t.listCheckbox,i=e.target,l=!!i.checked;if(Array.isArray(a)){var r=s,o=t._i(a,r);i.checked?o<0&&(t.listCheckbox=a.concat([r])):o>-1&&(t.listCheckbox=a.slice(0,o).concat(a.slice(o+1)))}else t.listCheckbox=l},t.selectedValues]}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_"+s}})])])]),e("td",{staticClass:"remove_td align-middle d-none"}),e("td",{staticClass:"its_projectnamebase"},[e("span",{staticClass:"float-left w-100"},[e("span",{staticClass:"font-14 font-weight-medium float-left text-align-left d-flex w-100 its_projectname"},[t._v(" "+t._s(a["ProjectName"])),e("span",{staticClass:"remove_td"},[t._v(":")]),e("span",{staticClass:"text-dark d-block its_taskname ml-1 font-weight-normal"},[t._v(t._s(a["TaskDetail"]))])]),e("span",{staticClass:"w-100 float-left"},[e("span",{staticClass:"remove_td text-dark font-14 its_taskdesc float-left w-90"},[e("span",{staticClass:"text-truncate font-weight-400",on:{click:function(e){!a.TaskDescription&&t.Edit(s+1)}}},[t._v(t._s(t.indexEdit===s+1?"":a.TaskDescription)+" "),0!=a["ProjectId"]||a.TaskDescription&&t.indexEdit!==s+1?t._e():e("input",{staticClass:"w-100",attrs:{placeholder:t.$t("NoDescription"),type:"text"},domProps:{value:a["TaskDescription"]},on:{change:function(e){return t.editChange(a,s+1,e)},input:function(e){return t.checkDescription(e)}}})]),t.indexEdit===s+1&&0!=a["ProjectId"]?e("span",{staticClass:"font-weight-400"},[e("input",{staticClass:"w-100",attrs:{type:"text",placeholder:t.$t("NoDescription")},domProps:{value:a["TaskDescription"]},on:{change:function(e){return t.editChange(a,s+1,e)},input:function(e){return t.checkDescription(e)}}})]):t._e(),a.TaskDescription||0!=a["ProjectId"]?t._e():e("span",{staticClass:"required_field"},[t._v(" "+t._s(t.$t("DescRequired"))+" ")])]),t.sendForApprovalButton?e("a",{staticClass:"float-right text-secondary",on:{click:function(e){return t.Edit(s+1)}}},[t.indexEdit==s+1?e("em",{staticClass:"fa fa-check text-success",attrs:{title:t.$t("Edit")}}):e("em",{staticClass:"fa fa-pencil",attrs:{title:t.$t("Edit")}})]):t._e()])])]),e("td",{staticClass:"align-middle d-none"},[t._v(t._s(a["TaskDescription"]))]),e("td",{staticClass:"align-middle d-none"},[t._v(t._s(a["TaskDetail"]))]),t._l(t.HeaderList,(function(s,i){return e("td",{key:i,staticClass:"align-middle",class:{"table-danger":null!=a["IsValid"]&&1!=a["IsValid"]&&a["IsValid"].Date==s,"legend_leaves ":t.checkLegendsDates(s)},attrs:{title:null!=a["IsValid"]&&1!=a["IsValid"]&&a["IsValid"].Date==s?a["IsValid"].Status:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"dataItem[item]"}],staticClass:"form-control text-center",attrs:{placeholder:"00:00",type:"text"},domProps:{value:a[s]},on:{change:function(e){return t.validateTimeInput(a,s,i)},focus:function(e){return t.setOldValue(s,e)},input:function(e){e.target.composing||t.$set(a,s,e.target.value)}}}),e("div",{staticClass:"d-none"},[t._v(t._s(a[s])+" ")])])})),e("td",{staticClass:"align-middle text-center totalvalue"},[t._v(t._s(t.rowSum(a)))]),e("td",{staticClass:"remove_td single-action text-center"},[e("a",[e("i",{staticClass:"fa fa-times text-danger",on:{click:function(e){return t.SingleDeleteData(s)}}})])])],2)})),e("tr",{staticClass:"d-none"}),t._l(t.LeaveList,(function(a,s){return e("tr",{key:s,staticClass:"its_fixedrow"},[e("td",{staticClass:"remove_td align-middle"}),e("td",{staticClass:"align-middle d-none"}),e("td",{staticClass:"align-middle d-none"}),e("td",{staticClass:"align-middle font-weight-medium"},[t._v(t._s(a["ProjectName"]))]),e("td",{staticClass:"remove_td align-middle d-none"}),e("td",{staticClass:"remove_td align-middle d-none"}),t._l(t.HeaderList,(function(s,i){return e("td",{key:i,staticClass:"align-middle",class:{"table-danger":null!=a["IsValid"]&&1!=a["IsValid"]&&a["IsValid"].Date==s},attrs:{title:null!=a["IsValid"]&&1!=a["IsValid"]&&a["IsValid"].Date==s?a["IsValid"].Status:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"dataItem[item]"}],staticClass:"form-control text-center",attrs:{value:"00:00",type:"text",disabled:"true"},domProps:{value:a[s]},on:{input:function(e){e.target.composing||t.$set(a,s,e.target.value)}}}),e("div",{staticClass:"d-none"},[t._v(t._s(a[s]))])])})),e("td",{staticClass:"align-middle text-center totalvalue"},[t._v(t._s(t.rowSum(a)))]),e("td",{staticClass:"remove_td single-action text-center"},[e("i",{staticClass:"fa fa-times text-danger d-none",on:{click:function(e){return t.SingleDeleteData(s)}}})])],2)})),t._l(t.computedBreakList,(function(a,s){return e("tr",{key:s,staticClass:"its_fixedrow"},[e("td",{staticClass:"remove_td align-middle"}),e("td",{staticClass:"align-middle d-none"}),e("td",{staticClass:"align-middle d-none"}),e("td",{staticClass:"align-middle font-weight-medium"},[t._v(t._s(a["ProjectName"]))]),e("td",{staticClass:"remove_td align-middle d-none"}),e("td",{staticClass:"remove_td align-middle d-none"}),t._l(t.HeaderList,(function(s,i){var l;return e("td",{key:i,staticClass:"align-middle",class:{"table-danger":null!=a["IsValid"]&&1!=a["IsValid"]&&(null===(l=a["IsValid"])||void 0===l?void 0:l.Date)==s},attrs:{title:null!=a["IsValid"]&&1!=a["IsValid"]&&a["IsValid"].Date==s?a["IsValid"].Status:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a[s],expression:"dataItem[item]"}],staticClass:"form-control text-center",attrs:{placeholder:"",maxlength:"5",value:"00:00",type:"text"},domProps:{value:a[s]},on:{change:function(e){return t.validateTimeInput(a,s,i)},focus:function(e){return t.setOldValue(s,e)},input:function(e){e.target.composing||t.$set(a,s,e.target.value)}}}),e("div",{staticClass:"d-none"},[t._v(t._s(a[s]))])])})),e("td",{staticClass:"align-middle text-center totalvalue"},[t._v(t._s(t.rowSum(a)))]),e("td",{staticClass:"remove_td single-action text-center"},[e("i",{staticClass:"fa fa-times text-danger d-none",on:{click:function(e){return t.SingleDeleteData(s)}}})])],2)}))],2),0==t.computedTimesheetList.length&&0==t.computedBreakList.length&&0==t.LeaveList.length?e("tbody",[e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"11"}},[t._v(t._s(t.$t("NoRecordfound")))])])]):t._e(),t.computedTimesheetList.length>0||t.computedBreakList.length>0||t.LeaveList.length>0?e("tfoot",[e("div",{staticStyle:{display:"contents",float:"left",width:"100%"}},[e("tr",{staticClass:"its_fixedrow2"},[e("td",{staticClass:"remove_td align-middle d-none"}),e("td",{staticClass:"align-middle"}),e("td",{staticClass:"align-middle d-none"}),e("td",[t._v(t._s(t.$t("Total"))+":")]),e("td",{staticClass:"remove_td align-middle d-none"}),e("td",{staticClass:"remove_td align-middle d-none"}),t._l(t.totalData,(function(a,s){return e("td",{key:s,staticClass:"text-center"},[t._v(t._s(a.value))])})),e("td",{staticClass:"text-center"},[t._v(t._s(t.SumOfFooterRows))]),e("td",{staticClass:"remove_td"})],2)])]):t._e()])]),e("div",{staticClass:"col-lg-12 col-sm-12 p-0 mt-2"},[t.sendForApprovalButton?e("a",{staticClass:"btn btn-success formbtn text-light",staticStyle:{float:"right"},attrs:{id:"btnSendForApproval",name:"",title:t.$t("SendForApproval")},on:{click:function(e){return t.SaveAsDraft(0,1)}}},[e("i",{staticClass:"fa fa-send pr-2"}),t._v(t._s(t.$t("SendForApproval"))+" ")]):t._e(),t.copyToOtherUserButton?e("a",{staticClass:"btn btn-warning formbtn mr-2 text-dark",staticStyle:{float:"right"},attrs:{id:"btnCopyLastWeek",isapprover:"0",name:"",title:t.$t("CopyToOtherUser")},on:{click:t.showCopyTimesheet}},[e("i",{staticClass:"fa fa-copy pr-2"}),t._v(t._s(t.$t("CopyToOtherUser"))+" ")]):t._e(),t.copyLastWeekButton?e("a",{staticClass:"btn btn-warning formbtn mr-2 text-dark",staticStyle:{float:"right"},attrs:{id:"btnCopyLastWeek",isapprover:"0",name:"",title:t.$t("CopyLastWeek")},on:{click:t.CopyLastWeek}},[e("i",{staticClass:"fa fa-copy pr-2"}),t._v(t._s(t.$t("CopyLastWeek"))+" ")]):t._e(),t.saveAsDraftButton?e("a",{staticClass:"btn btn-warning formbtn text-dark mr-2",staticStyle:{float:"right"},attrs:{id:"btnSaveAsDraft",isapprover:"0",name:"",title:t.$t("SaveAsDraft")},on:{click:function(e){return t.SaveAsDraft(1,0)}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("SaveAsDraft")))]):t._e()])],1),t.openModal?e("copyTimesheet",{on:{close:function(e){t.openModal=!1}}}):t._e()],1)},r=[],o=(a("14d9"),a("13d5"),a("9769")),n=a("b9b9"),d=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function({handleSubmit:a}){return[e("form",{ref:"form",on:{submit:function(e){return e.preventDefault(),a(t.submit)}}},[e("div",[e("div",{staticClass:"dynamic-multiselect",attrs:{id:"divModalTimetrack"}},[e("label",[t._v(t._s(t.$t("Project"))),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("multiselect",{staticClass:"form-group tt_ddr_1 col border-0 p-0",class:"Break"==t.store.getTimer.trackType?"tt_disabled":"",attrs:{placeholder:t.$t("searchProject"),options:t.store.getProjectsByUser,label:"projectName","track-by":"projectId","show-labels":!1,id:"exampleFormControlSelect1"},on:{input:t.taskByProject},model:{value:t.formRecord.projectId,callback:function(e){t.$set(t.formRecord,"projectId",e)},expression:"formRecord.projectId"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("No_Record_Found")))])]),e("span",{staticClass:"val_msg"},[t._v(t._s(a[0]?t.$t("ProjectRequired"):""))])]}}],null,!0)})],1),e("label",[t._v(t._s(t.$t("Task")))]),e("multiselect",{staticClass:"form-control tt_ddr col border-0 p-0",class:"Break"==t.store.getTimer.trackType?"tt_disabled":"",attrs:{placeholder:t.$t("searchTask"),id:"exampleFormControlSelect2",options:t.store.getTasksFromProject,label:"firstAttribute","track-by":"value","show-labels":!1},scopedSlots:t._u([{key:"option",fn:function(a){return[e("div",{staticClass:"option__desc"},[e("span",{staticClass:"option__title",attrs:{disabled:!0}},[t._v(t._s(a.option.firstAttribute))]),e("label",{staticClass:"float-right text-light px-2 ml-1 taskcount"},[t._v(t._s(a.option.subTasksCount))]),e("label",{staticClass:"float-right"},[t._v(" "+t._s(a.option.thirdAttribute)+"% ")])])]}}],null,!0),model:{value:t.formRecord.taskId,callback:function(e){t.$set(t.formRecord,"taskId",e)},expression:"formRecord.taskId"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("No_Record_Found")))])])],1),e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"text-end text-right col-12"},[e("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),e("button",{staticClass:"btn btn-danger",staticStyle:{"margin-left":"5px"},attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])])])])]}}])})},c=[],u=a("ed09"),h=a("8e5f"),p=a.n(h),m=a("c1df"),v=a.n(m),f=a("7bb1");Object(f["c"])("required",{validate(t){return{required:!0,valid:-1===["",null,t.length>0].indexOf(t)}},message:"{_field_} is required",computesRequired:!0});var k=Object(u["b"])({name:"Add Task",components:{Multiselect:p.a,ValidationProvider:f["b"],ValidationObserver:f["a"]},props:{store:{type:Object},userId:{type:Number}},data(){return{formRecord:{projectId:"",taskId:""}}},setup(){},created:async function(){this.store.$state.projects=[],await this.store.getProjects(this.userId);var t={projectId:"abc",projectName:"No Project"};this.store.$state.projects=[t].concat(this.store.$state.projects),this.store.$state.tasks=[]},methods:{taskByProject(){this.store.$state.tasks=[],this.formRecord.taskId="",this.formRecord.projectId&&"abc"!==this.formRecord.projectId.projectId&&this.store.loadTasks(this.formRecord.projectId.projectId,this.userId)},submit:function(){this.$emit("saveTaskEntry",{TaskId:void 0==this.formRecord.taskId.value?0:this.formRecord.taskId.value,ProjectId:"abc"==this.formRecord.projectId.projectId?0:this.formRecord.projectId.projectId,ProjectName:this.formRecord.projectId.projectName,TaskDetail:this.formRecord.taskId.firstAttribute?this.formRecord.taskId.firstAttribute:this.$t("UnassignedTask"),IsAddNewEntry:"yes",TaskDescription:""}),this.store.$state.tasks=[]}}}),g=k,D=a("2877"),C=Object(D["a"])(g,d,c,!1,null,null,null),y=C.exports,_=a("404b"),b=a.n(_),S=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"modal fade dialog my-popups ui-draggable show",staticStyle:{height:"auto",width:"auto",display:"block",top:"0px",left:"0px"},attrs:{"data-keyboard":"false","data-backdrop":"static",role:"dialog"}},[e("div",{staticClass:"modal-dialog maxwidth500",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title text-truncate pb-1",attrs:{id:"myModalLabel"}},[t._v(t._s(t.$t("CopyTimesheet")))]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.closePopup}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left",staticStyle:{width:"43%"}},[e("div",{staticClass:"col-12 p-0 mb-2 d-flex"},[e("span",[t._v(t._s(t.$t("SelectUserFrom"))+" : ")]),e("div",{staticClass:"ml-3 custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input custom-control-input",attrs:{type:"radio",value:"Department",id:"Department",name:"Department"},domProps:{checked:t._q(t.Type,"Department")},on:{change:function(e){t.Type="Department"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"Department"}},[t._v(t._s(t.$t("Department")))])]),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input custom-control-input",attrs:{type:"radio",value:"User",id:"User",name:"User"},domProps:{checked:t._q(t.Type,"User")},on:{change:function(e){t.Type="User"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"User"}},[t._v(t._s(t.$t("Users")))])]),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input custom-control-input",attrs:{type:"radio",value:"Project",id:"Project",name:"project"},domProps:{checked:t._q(t.Type,"Project")},on:{change:function(e){t.Type="Project"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"Project"}},[t._v(t._s(t.$t("Project")))])]),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Type,expression:"Type"}],staticClass:"form-check-input custom-control-input",attrs:{type:"radio",value:"Location",id:"Location",name:"Location"},domProps:{checked:t._q(t.Type,"Location")},on:{change:function(e){t.Type="Location"}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"Location"}},[t._v(t._s(t.$t("Location")))])])])])]),e("div",{staticClass:"row"},["User"!=t.Type?e("div",{staticClass:"col-lg-6"},[t.IsShowDiv?e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.LabelName)+" "),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.ParentValue,expression:"ParentValue"}],class:{"form-control":!0},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ParentValue=e.target.multiple?a:a[0]},function(e){return t.UsersByParentId(t.ParentValue)}]}},[e("option",{attrs:{value:"",disabled:"",selected:"Selected"}},[t._v(t._s(t.$t("Select")))]),t._l(t.UserParentList,(function(a,s){return e("option",{key:s,domProps:{value:a.Id}},[t._v(" "+t._s(a.Name)+" ")])}))],2)]):t._e()]):t._e(),1==t.chkValidate?e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Users: "),t.IsRequiredDiv?e("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),e("Multiselect",{attrs:{label:"label","track-by":"value",options:t.Options,mode:"tag","close-on-select":!1,searchable:!0,multiple:!0,taggable:!1,placeholder:"All"},model:{value:t.SeletcedValue,callback:function(e){t.SeletcedValue=e},expression:"SeletcedValue"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("No_Record_Found")))])])],1)]):t._e(),0==t.chkValidate?e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Users: "),t.IsRequiredDiv?e("span",{staticClass:"text-danger"},[t._v("*")]):t._e()]),e("Multiselect",{attrs:{label:"label","track-by":"value",options:t.Options,mode:"tag","close-on-select":!1,searchable:!0,multiple:!0,taggable:!1,placeholder:"All"},model:{value:t.SeletcedValue,callback:function(e){t.SeletcedValue=e},expression:"SeletcedValue"}},[e("span",{attrs:{slot:"noResult"},slot:"noResult"},[t._v(t._s(t.$t("No_Record_Found")))])])],1)]):t._e()]),e("div",{staticClass:"modal-footer px-0"},[e("div",{staticClass:"row flex-row-reverse w-100"},[e("div",{staticClass:"col-lg-6 text-right p-0"},[e("button",{staticClass:"btn btn-success",on:{click:t.submit}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),e("button",{staticClass:"btn btn-danger",staticStyle:{"margin-left":"5px"},attrs:{type:"button"},on:{click:t.closePopup}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])]),e("div",{staticClass:"col-lg-6 p-0"},[e("div",{staticClass:"py-2"},[e("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])])])])])])},T=[],L={data(){return{IsShowDiv:!1,Type:"User",LabelName:"Users",IsRequiredDiv:!0,ParentValue:"",UserParentList:[],Options:[],chkValidate:!1,SeletcedValue:[],users:""}},created:function(){this.BindUsersDDL("Users")},watch:{Type:function(t){var e=this;e.onChange()}},methods:{closePopup(){this.$parent.openModal=!1},submit(){this.SeletcedValue.forEach((t,e)=>{this.users+=0!=e?","+t.value:t.value}),this.$parent.CopyToUserWeekTimesheet(this.users)},onChange:function(){var t=this;this.SeletcedValue=[],this.ParentValue="","Department"==t.Type?(this.BindDepartmentDDL("Department"),this.IsShowDiv=!0,this.IsRequiredDiv=!0,this.LabelName="Department",this.chkValidate=!1):"User"==t.Type?(this.BindUsersDDL("Users"),this.IsShowDiv=!1,this.IsRequiredDiv=!0,this.LabelName="Users",this.chkValidate=!0):"Project"==t.Type?(this.BindDepartmentDDL("Project"),this.IsShowDiv=!0,this.IsRequiredDiv=!0,this.LabelName="Project",this.chkValidate=!1):"Location"==t.Type&&(this.BindDepartmentDDL("Location"),this.LabelName="Location",this.IsShowDiv=!0,this.IsRequiredDiv=!0,this.chkValidate=!1)},UsersByParentId(t){var e=this;"Department"==e.LabelName&&e.BindUsersDDL("Department",e.ParentValue),"Project"==e.LabelName&&e.BindUsersDDL("Project",e.ParentValue),"Users"==e.LabelName&&e.BindUsersDDL("Users",e.ParentValue),"Location"==e.LabelName&&e.BindUsersDDL("Location",e.ParentValue)},BindUsersDDL:function(t,e){var a=this;a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,o["a"].SharedUsersParentListByParentId(s).then((function(t){a.UserListData=JSON.parse(t.data),a.UserList=a.UserListData.DocParentUserListing,null!=a.UserList.length&&(a.UserList.forEach((t,e)=>{a.Value=t.Id,a.first_value=t.Name,a.Options.push({value:a.Value,label:a.first_value})}),null!=a.GroupData&&(a.BindGroupsData(a.GroupData),a.IsBindEdited=!1))}))},BindDepartmentDDL:function(t,e){var a=this;a.isLoading=!0,a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,o["a"].SharedUsersParentList(s).then((function(t){null!=t.data?(a.UserListData=JSON.parse(t.data),a.UserParentList=a.UserListData.DocParentListing,console.log("location",a.UserListData.DocParentListing)):a.UserParentList=[],a.isLoading=!1}))},BindUsersDDL:function(t,e){var a=this;a.Options=[];let s={};s["refCode"]=t,s["parentId"]=e,o["a"].SharedUsersParentListByParentId(s).then((function(t){a.UserListData=JSON.parse(t.data),a.UserList=a.UserListData.DocParentUserListing,null!=a.UserList.length&&(a.UserList.forEach((t,e)=>{a.Value=t.Id,a.first_value=t.Name,a.Options.push({value:a.Value,label:a.first_value})}),null!=a.GroupData&&(a.BindGroupsData(a.GroupData),a.IsBindEdited=!1))}))}}},w=L,I=Object(D["a"])(w,S,T,!1,null,null,null),x=I.exports,A=a("ce29"),P={components:{AddTaskTimeSheetModal:y,DatePicker:b.a,copyTimesheet:x},setup(){const t=Object(A["a"])();return{store:t}},data(){return{dateMask:{input:n["e"]},saveAsDraftButton:!0,copyLastWeekButton:!0,copyToOtherUserButton:!0,sendForApprovalButton:!0,getPreviousDay:n["j"],dateselect:Object(n["d"])(v()(),n["f"]),deletedArray:[],totalData:[],DataLoaded:0,noRecord:!1,TotalRecords:0,isLoading:!1,TimesheetList:[],BreakList:[],LeaveList:[],HeaderList:[],UserId:null,StartDate:null,EndDate:null,DisplayWeekDate:this.$t("thisWeek"),StartWeekDay:null,totalSeconds:0,addTaskShow:!1,openModal:!1,SumOfRows:[],SumOfFooterRows:0,allCheck:"",listCheckbox:[],FormSchema:[{layoutType:"triple",Data:[{astype:"SlotField",label:"",name:"slotdate",value:"",placeholder:"Date Range"},{astype:"SelectField",label:"User",name:"user_id",value:"",placeholder:"",config:{options:[],onChange:this.FetchData},validationRules:{}},{astype:"SlotField",label:"",name:"slotbutton",value:"",placeholder:""}]}],IsValidDate:[],isedit:!1,indexEdit:"",carryItems:[],oldTaskDesc:[],isOldTaskDesc:[],privilegeParams:null,holidaydates:[],isDatePanelVisible:!1,selectedName:"thisWeek",oldInputValue:[]}},created:async function(){var t=this;this.privilegeParams="controller=Timesheet&action=",this.DataLoaded=1,await t.GetStartEndDatesNew(),await t.GetUsersForTimesheet(),t.FormSchema[0].Data[1].value=t.GetUserInfo.ID,await t.FetchData()},mounted:async function(){var t=this;document.addEventListener("click",(function(e){if(1==t.isDatePanelVisible){var a=document.querySelector(".date_select"),s=document.querySelector(".openWeek");if(e.target.parentNode.closest(".DatePopUp")==t.$refs.weekModal||e.target==s||e.target.parentNode==s||e.target.parentNode==a||e.target.parentNode==e.target.parentNode.closest(".DatePopUp")||"date_select"==e.target.className)return;t.isDatePanelVisible=!1}if(t.addTaskShow){if(e.target==t.$refs.taskModalOpen||e.target.parentNode==t.$refs.taskModalOpen||e.target==t.$refs.taskAddModal||e.target.parentNode.closest(".taskAddModal")==t.$refs.taskAddModal)return;t.addTaskShow=!1}}))},computed:{computedTimesheetList(){return this.TimesheetList},computedBreakList(){return this.BreakList},computedLeaveList(){return this.LeaveList},filteredDeletedArray(){return this.deletedArray},rowSums(){return this.TimesheetList.map(t=>this.rowSum(t))},footerSums(){return this.totalData.map(t=>this.footerSums(t))}},methods:{checkDescription(t){t.target.value.match(/^\s*$/)&&(t.target.value="")},timeMask(t){-1!==$.inArray(t.keyCode,[46,8,9,27,13])||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()},formateHHMM(t){},toggleDatePanel(){this.isDatePanelVisible=!this.isDatePanelVisible},async checkHolidayDate(){var t=this,e=t.StartDate,a=t.EndDate;t.holidaydates=[];var s=`dateFrom=${e}&dateTo=${a}`;const{data:i}=await o["a"].GetHolidayDate(s);t.holidaydates=i},checkLegendsDates(t){let e=this.holidaydates.find(e=>Object(n["i"])(e.DAY_DATE)==Object(n["i"])(t));return!!e},strToMins(t){var e=t.split(":");return 60*Number(e[0])+Number(e[1])},convertH2M(t){var e=t.split(":");return 60*Number(e[0])+Number(e[1])},setOldValue(t,e){let a=this.oldInputValue.find(e=>e.index===t);a||this.oldInputValue.push({value:e.target.value,index:t})},async validateTimeInput(t,e,a){let s=this.oldInputValue.find(t=>t.index==e);var i=/^[0-9][0-9]:[0-5][0-9]$/;if("number"==typeof Number(t[e])&&t[e]<this.convertH2M("24:00")&&!i.test(t[e]))if(t[e]<13){let a=t[e]>0?""+(t[e].toString().length>1?""+t[e]:"0"+t[e]):"00";t[e]=a+":00"}else{let a=t=>("0"+(t/60^0)).slice(-2)+":"+("0"+t%60).slice(-2);t[e]=a(t[e])}i.test(t[e])||(this.ShowAlert(this.$t("validTime"),"warning",!0,"Alert"),t[e]=s.value?s.value:"00:00"),await this.SumRowColTotalList();var l=this.strToMins("24:00")-this.strToMins(this.totalData[a].value);if(l<=0){t[e]=s.value?s.value:"00:00",await this.SumRowColTotalList();let i=this.strToMins("24:00")-this.strToMins(this.totalData[a].value);i<=0&&(t[e]="00:00"),this.ShowAlert(this.$t("NotEnterAboveValue"),"warning",!0,"Alert")}this.oldInputValue=[],this.SumRowColTotalList()},buttonShowHide(){var t=this,e=t.StartDate,a=t.EndDate,s=`dateFrom=${e}&dateTo=${a}&selectedUserId=${t.FormSchema[0].Data[1].value}`;o["a"].GetTimesheetStatus(s).then(e=>{e.data?(t.saveAsDraftButton=!1,t.copyLastWeekButton=!1,t.copyToOtherUserButton=!1,t.sendForApprovalButton=!1):(t.saveAsDraftButton=!0,t.copyLastWeekButton=!0,t.copyToOtherUserButton=!0,t.sendForApprovalButton=!0)})},exportToExcel(){var t,e='<table border="1px" style="font-size:20px" ">',a=0,s=document.getElementById("tableData"),i=s.getElementsByTagName("tfoot"),l=s.rows.length;for(l>0&&(e=e+'<tr bgcolor="#DFDFDF">'+s.rows[0].innerHTML+"</tr>"),a=1;a<l;a++)e=e+"<tr>"+s.rows[a].innerHTML+"</tr>";e+=i[0].innerHTML,e+="</table>",e=e.replace(/<th class="remove_td">[^>]*>|<\/th>/gi,""),e=e.replace(/<th class="remove_td[^>]*>|<\/th>/gi,""),e=e.replace(/<A[^>]*>|<\/A>/g,""),e=e.replace(/<img[^>]*>/gi,""),e=e.replace(/<input[^>]*>|<\/input>/gi,""),e=e.replace(/<td class="remove_td[^>]*>|<\/td>/gi,""),e=e.replace(/<span class="text-dark d-block its_taskname ml-1 font-weight-normal">[^>]*>|<\/span>/gi,""),e=e.replace(/<span class="text-truncate w-90 mr-3 font-weight-400">[^>]*>|<\/span>/gi,""),e=e.replace(/<span class="remove_td">[^>]*>|<\/span>/gi,"");var r,o=window.navigator.userAgent,n=o.indexOf("MSIE ");return n>0||navigator.userAgent.match(/Trident.*rv\:11\./)?(t.document.open("txt/html","replace"),t.document.write(e),t.document.close(),t.focus(),r=t.document.execCommand("SaveAs",!0,"TimeSheetExport.xls")):r=window.open("data:application/vnd.ms-excel,"+encodeURIComponent(e)),r},allCheckBox(){if(this.listCheckbox=[],this.allCheck)for(var t=document.getElementsByClassName("list-checkBox"),e=0;t[e];++e)this.listCheckbox.push(e);else this.listCheckbox=[]},selectedValues(t){if(t.target.checked){var e=document.getElementsByClassName("list-checkBox");let t=!0;for(var a=0;e[a];++a)e[a].checked||(t=!1);t&&(this.allCheck=!0)}else this.allCheck=!1},async deleteMultipleRow(){var t=this;t.confirmR(this.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("entry"),(async function(){let e=[];if(t.listCheckbox.map(a=>{t.computedTimesheetList[a].IsAddNewEntry?t.computedTimesheetList.splice(a,1):e.push(t.computedTimesheetList[a])}),e.forEach((t,e)=>{delete t["Type"]}),e.length>0){let a={deletedData:e,userId:t.FormSchema[0].Data[1].value};const{data:s}=await o["a"].DeleteTimeSheetRecord(a);0===s&&(t.ShowAlert(t.$t("Delete_record"),"success",!0,"Alert"),t.listCheckbox=[],t.allCheck=!1,t.FetchData())}}))},footerSums(t){const e=["ProjectId","ProjectName","TaskDetail","TaskId"];let a=0;e.includes(t)||this.dataArray.forEach(e=>{const s=e[t];if(/^([01]\d|2[0-3]):([0-5]\d)$/.test(s)){const[t,e]=this.getHoursAndMinutes(s);a+=3600*t+60*e}});const s=Math.floor(a/3600),i=Math.floor(a%3600/60);return String(s).padStart(2,"0")+":"+String(i).padStart(2,"0")},columnSums(){const t=["ProjectId","ProjectName","TaskDetail","TaskId"],e={};return this.HeaderList.forEach(a=>{if(!t.includes(a)){const t=this.TimesheetList.map(t=>{const e=t[a];return/^([01]\d|2[0-3]):([0-5]\d)$/.test(e)?this.getHoursAndMinutes(e):0}),s=t.reduce((t,[e,a])=>t+3600*e+60*a,0),i=Math.floor(s/3600),l=Math.floor(s%3600/60);e[a]=String(i).padStart(2,"0")+":"+String(l).padStart(2,"0")}}),e},rowSum(t){var e=0;return Object.values(t).filter(t=>"ProjectId"!==t&&"ProjectName"!==t&&"TaskDetail"!==t&&"TaskId"!=t&&"RowTotal"!==t).reduce((t,a)=>{const s=/^([01]\d|2[0-3]):([0-5]\d)$/.test(a);if(s){let[t,s]=null!=a?a.split(":"):"00:00".split(":");e+=3600*parseInt(t)+60*parseInt(s)}let i=Math.floor(e/3600),l=Math.floor(e%3600/60);return t=String(i).padStart(2,"0")+":"+String(l).padStart(2,"0"),t},0)},saveTaskEntry(t){var e=this,a={};e.HeaderList.map(t=>{a[t]="00:00"});let s="";s=0==t.ProjectId?"":e.TimesheetList.find(e=>e.ProjectId==t.ProjectId&&e.TaskId==t.TaskId),s?(this.ShowAlert(this.$t("ProjectTaskExist"),"warning",!0,"Alert"),this.addTaskShow=!1):(this.$set(t,"RowNumber",this.TimesheetList.length+1),Object.assign(a,t),a.OldTaskDescription=null,a.TaskDescription="",e.TimesheetList.push(a),this.addTaskShow=!1),this.SumRowColTotalList(),this.SumOfFooterRows()},showAddTaskModal(){this.addTaskShow=!0},showCopyTimesheet(){o["a"].CheckPrivilege(this.privilegeParams+"CopyToOtherUsersTimesheet").then(t=>{if(!t.data)return this.ShowAlert(this.$t("UnAuthorized"),"warning",!0,"Alert"),!1;this.openModal=!0})},ChangeCurrentDateTime(t,e){const a=/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/;a.test(t[e]);t[e].includes(":")&&""!=t[e].split(":")[1]&&null!=t[e].split(":")[1]&&(this.SumRowColTotalList(),this.SumOfRows(),this.SumOfFooterRows())},async GetUsersForTimesheet(){var t=this;t.isLoading=!0;var e=`companyId=${t.GetUserInfo.CompanyId}&loggedUserId=${t.GetUserInfo.ID}&userType=${t.GetUserInfo.UserType}&userId=${t.FormSchema[0].Data[1].value}&moduleName=`;await o["a"].GetUsersForTimesheet(e).then((function(e){e.data.result.forEach(e=>{t.obj={name:e.username,value:e.useR_ID},t.FormSchema[0].Data[1].config.options.push(t.obj)})})),t.isLoading=!1},OnChange:function(){var t=$(".chkItems:checked").not("[id^='chkAll']").length;t>0?$("#DeleteMultiple").removeClass("disabled"):$("#DeleteMultiple").addClass("disabled")},async onSubmit(t,e){var a=this;a.FetchData()},GetStartEndDates:async function(t,e,a){var s=this;let i="DateSpan=thisweek&report=";await o["a"].GetStartEndDate(i).then(t=>{s.StartDate=t.data.dateStart,s.EndDate=t.data.dateEnd,s.DisplayWeekDate="",s.DisplayWeekDate=t.data.displayText,s.StartWeekDay=t.data.startWeekDay});var l=1;switch(s.StartWeekDay.toLowerCase()){case"tuesday":l=2;break;case"wednesday":l=3;break;case"thursday":l=4;break;case"friday":l=5;break;case"satureday":l=6;break;case"sunday":l=0;break;default:l=1;break}var r=new Date(this.dateselect);""==r&&(r=new Date);var n=r.getDay()-l,d=new Date(r.getFullYear(),r.getMonth(),r.getDate()-n),c=new Date(r.getFullYear(),r.getMonth(),r.getDate()-n+6),u=s.$options.filters.formatDate(d)+"-"+s.$options.filters.formatDate(c);s.StartDate=s.$options.filters.formatDate(d),s.EndDate=s.$options.filters.formatDate(c),s.DisplayWeekDate="",s.DisplayWeekDate=u},GetStartEndDatesNew:async function(t){var e=this;let a="DateSpan=thisweek&report=";await o["a"].GetStartEndDate(a).then(t=>{e.StartDate=t.data.dateStart,e.EndDate=t.data.dateEnd,e.DisplayWeekDate=t.data.displayText,e.StartWeekDay=t.data.startWeekDay}),e.FormSchema[0].Data[0].placeholder="Date Range: "+e.DisplayWeekDate,e.DisplayWeekDate=this.$t("thisWeek")},getListByDateType:async function(t){var e=this;let a=`DateSpan=${t}&report=`;await o["a"].GetStartEndDate(a).then(t=>{e.StartDate=t.data.dateStart,e.EndDate=t.data.dateEnd,e.DisplayWeekDate=t.data.displayText,e.StartWeekDay=t.data.startWeekDay,this.FetchData()}),e.FormSchema[0].Data[0].placeholder="Date Range: "+e.DisplayWeekDate,e.DisplayWeekDate=this.$t(t),e.selectedName=t},getCurrentWeek(){for(var t=v()(Object(n["d"])(v()())),e=t.clone().startOf("isoWeek"),a=[],s=0;s<=6;s++)a.push(v()(e).add(s,"days").format("MM/DD/yyyy"));return a},FetchData:async function(){this.listCheckbox=[],this.allCheck=!1,this.indexEdit="";var t=this;t.TotalRecords=[],t.totalData=[],t.TimesheetList=[],t.deletedArray=[],t.BreakList=[],t.LeaveList=[],t.SumOfFooterRows=0;var e=t.StartDate,a=t.EndDate;if(t.FormSchema[0].Data[1].value){t.isLoading=!0;var s=`companyId=${t.GetUserInfo.CompanyId}&userId=${t.FormSchema[0].Data[1].value}&dateFrom=${e}&dateTo=${a}`;t.buttonShowHide(),o["a"].ListTimesheetForWeek(s).then(e=>{if(null!=e.data&&""!=e.data&&e.data.length>0){let a=Object.keys(e.data[0]).filter(t=>"Type"!==t&&"ProjectId"!==t&&"ProjectName"!==t&&"TaskId"!==t&&"TaskDetail"!==t&&"TaskDescription"!=t);t.isLoading=!1,this.HeaderList=a,t.TotalRecords=e.data.length,t.TimesheetList=e.data.filter(t=>"TimeTrack"==t.Type),t.BreakList=e.data.filter(t=>"Break"==t.Type),t.LeaveList=e.data.filter(t=>"Leave"==t.Type),t.TimesheetList.map((t,e)=>(this.$set(t,"RowNumber",e+1),t.OldTaskDescription=t.TaskDescription,t));t.SumRowColTotalList(),t.checkHolidayDate()}else this.HeaderList=t.getCurrentWeek(),t.noRecord=!0,t.isLoading=!1,t.TimesheetList=[]})}},SumRowColTotalList:async function(){var t=this;t.totalData=[],t.HeaderList.forEach(e=>{var a=0;if("ProjectName"!==e.COLUMN_NAME&&"TaskDetail"!==e.COLUMN_NAME&&"TaskId"!==e.COLUMN_NAME&&"ProjectId"!==e.COLUMN_NAME){t.TimesheetList.forEach((t,s)=>{const[i,l]=null!=t[e]?t[e].split(":"):"00:00".split(":");a+=3600*parseInt(null!=i&&""===i.trim()?0:i)+60*parseInt(null!=l&&""===l.trim()?0:l)}),t.BreakList.forEach((t,s)=>{const[i,l]=null!=t[e]?t[e].split(":"):"00:00".split(":");a+=3600*parseInt(null!=i&&""===i.trim()?0:i)+60*parseInt(null!=l&&""===l.trim()?0:l)}),t.LeaveList.forEach((t,s)=>{const[i,l]=null!=t[e]?t[e].split(":"):"00:00".split(":");a+=3600*parseInt(null!=i&&""===i.trim()?0:i)+60*parseInt(null!=l&&""===l.trim()?0:l)});let i=Math.floor(a/3600),l=Math.floor(a%3600/60);var s=String(i).padStart(2,"0")+":"+String(l).padStart(2,"0")}t.totalData.push({value:s}),t.totalSeconds=a});var e=0;t.totalData.forEach((t,a)=>{let[s,i]=null!=t.value?t.value.split(":"):"00:00".split(":");e+=3600*parseInt(s)+60*parseInt(i)});let a=Math.floor(e/3600),s=Math.floor(e%3600/60);t.SumOfFooterRows=String(a).padStart(2,"0")+":"+String(s).padStart(2,"0")},SingleDeleteData:function(t){var e=this;e.StartDate,e.EndDate;e.TimesheetList.forEach(a=>{var s=e.TimesheetList.indexOf(a);s==t&&(a.IsAddNewEntry||e.deletedArray.push(a),e.TimesheetList.splice(t,1),e.SumRowColTotalList())}),0==e.TimesheetList.length&&(e.allCheck=!1)},SaveAsDraft:async function(t,e){this.indexEdit="";var a=this;a.isLoading=!0;let s=!1;if(a.TimesheetList.map((t,e)=>{if(0==t.ProjectId&&(t.TaskDescription||(s=!0)),t.IsAddNewEntry){let s=!1,i=Object.entries(t);i.map(([t,e]=entry)=>{"IsAddNewEntry"==t||"OldTaskDescription"==t||"ProjectId"==t||"ProjectName"==t||"RowNumber"==t||"TaskDescription"==t||"TaskId"==t||"TaskDetail"==t||null!=e&&(s=!0)}),s||a.TimesheetList.splice(e,1)}return delete t["Type"],delete t["IsValid"],t}),a.deletedArray.forEach((t,e)=>(delete t["Type"],delete t["IsValid"],t)),s)this.ShowAlert(this.$t("PleaseEnterDesc"),"warning",!0,this.$t("Alert"));else{let s={TimesheetList:a.TimesheetList,deletedData:a.deletedArray,breakData:a.BreakList,userId:a.FormSchema[0].Data[1].value,dateFrom:a.StartDate,dateTo:a.EndDate,isDraft:t,isSendForApproval:e};await o["a"].SaveTimeSheetEntry(s).then(t=>{if(a.TimesheetList=[],a.deletedArray=[],a.BreakList=[],a.LeaveList=[],null!=t.data&&""!=t.data&&t.data.length>1)t.data.forEach(t=>{t.IsValid=JSON.parse(t.IsValid)}),a.TimesheetList=t.data.filter(t=>"TimeTrack"==t.Type),a.BreakList=t.data.filter(t=>"Break"==t.Type),a.LeaveList=t.data.filter(t=>"Leave"==t.Type),a.SumRowColTotalList();else if(1==t.data.length)if(0==t.data[0].Status_Code){if(1!=e)this.ShowAlert(this.$t("TimeSheetSaved"),"success",!0,this.$t("Alert")),a.TimesheetList=[],a.FetchData();else if(1==e){var s=this.StartDate,i=this.EndDate;i=this.EndDate;let t=`dateFrom=${s}&dateTo=${i}&selectedUserId=${this.FormSchema[0].Data[1].value}`;o["a"].SendForApproval(t).then(t=>{"SUCCESS"==t.data.statusCode?(a.TimesheetList=[],a.FetchData(),this.ShowAlert(this.$t("TimesheetSendForApproval"),"success",!1,this.$t("Alert"))):"-3"==t.data.statusCode?(this.ShowAlert(this.$t("EtreesApprovedpending"),"warning",!0,this.$t("Alert")),this.FetchData()):"-4"==t.data.statusCode?(this.ShowAlert(this.$t("TimerRunning"),"warning",!0,this.$t("Alert")),this.FetchData()):"-205"==t.data.statusCode?(this.ShowAlert(this.$t("TimesheetEntryAlreadySaved"),"warning",!0,this.$t("Alert")),this.FetchData()):"-5"==t.data.statusCode?(this.ShowAlert(this.$t("NOENTRIESAVAILABLE"),"warning",!0,this.$t("Alert")),this.FetchData()):this.ShowAlert(this.$t("Something_Wrong"),"failure",!0,this.$t("Alert"))})}}else"-205"==t.data[0].Status_Code?this.ShowAlert(this.$t("TimesheetEntryAlreadySaved"),"warning",!0,this.$t("Alert")):this.ShowAlert(this.$t("Something_Wrong"),"failure",!0,this.$t("Alert"));else this.ShowAlert(this.$t("Something_Wrong"),"failure",!0,this.$t("Alert"))})}a.isLoading=!1},CopyLastWeek:async function(){var t=this;this.confirmR(this.$t("MessageForCopyLastWeekTimeEntries"),!0,this.$t("Delete")+"  "+this.$t("entry"),(function(){var e=t.StartDate,a=t.EndDate;let s=`dateFrom=${e}&dateTo=${a}&userId=${t.FormSchema[0].Data[1].value}`;o["a"].CopyLastWeekTimesheet(s).then(e=>{t.FetchData()})}))},CopyToUserWeekTimesheet:async function(t){var e=this.StartDate,a=this.EndDate;let s=`dateFrom=${e}&dateTo=${a}&selectedUserId=${t}&timeheet_userId=${this.FormSchema[0].Data[1].value}`;o["a"].CopyToUserWeekTimesheet(s).then(t=>{0==t.data[0].Code?this.ShowAlert(this.$t("CopyToUser"),"success",!0,this.$t("Alert")):1==t.data[0].Code&&"TIMESHEETALREADYSUBMITTED"==t.data[0].Msg?this.ShowAlert(this.$t("TIMESHEET_SUBMITTED"),"warning",!0,this.$t("Alert")):1==t.data[0].Code&&"DIFFERENTSHIFTS"==t.data[0].Msg&&this.ShowAlert(this.$t("DIFFERENTSHIFTS"),"warning",!0,this.$t("Alert")),this.openModal=!1,this.FetchData()})},Edit:function(t){this.indexEdit!=t?this.indexEdit=t:this.indexEdit=""},editChange:function(t,e,a){t.TaskDescription=a.target.value}}},E=P,N=Object(D["a"])(E,l,r,!1,null,null,null),j=N.exports,U={components:{TimeSheetListing:j},data(){return{}},created:function(){}},R=U,F=Object(D["a"])(R,s,i,!1,null,null,null);e["default"]=F.exports},"605d":function(t,e,a){"use strict";var s=a("da84"),i=a("c6b6");t.exports="process"===i(s.process)},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},d58f:function(t,e,a){"use strict";var s=a("59ed"),i=a("7b0b"),l=a("44ad"),r=a("07fa"),o=TypeError,n=function(t){return function(e,a,n,d){s(a);var c=i(e),u=l(c),h=r(c),p=t?h-1:0,m=t?-1:1;if(n<2)while(1){if(p in u){d=u[p],p+=m;break}if(p+=m,t?p<0:h<=p)throw new o("Reduce of empty array with no initial value")}for(;t?p>=0:h>p;p+=m)p in u&&(d=a(d,u[p],p,c));return d}};t.exports={left:n(!1),right:n(!0)}}}]);
//# sourceMappingURL=chunk-dc98703c.js.map