(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6350c3cd"],{"36db":function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,".vue-treeselect__control{border:none;height:24px;padding:0}.vue-treeselect--searchable .vue-treeselect__input-container{padding:0!important}.vue-treeselect__placeholder{color:#303030!important}.vue-treeselect__control-arrow{color:#000}.vue-treeselect__placeholder{line-height:24px}",""]),t.exports=e},"6d9a":function(t,e,a){"use strict";a("b1c4")},"924b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",{staticClass:"main-content"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white"},[t._v(" "+t._s(t.$t("NewProductTypeRequest"))+" ")]),e("span",{staticClass:"p-actions float-right"},[e("a",{staticClass:"p-action-btn text-white",attrs:{href:"/AssetRequisition/NewAssetRequisitionListing","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left pr-2"}),e("br"),e("span",[t._v(t._s(t.$t("Backtolist")))])])])]),e("div",{staticClass:"border p-3"},[e("Form",{ref:"AddReqForm"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 px-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("Location"))),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{staticClass:"w-100",attrs:{name:"Location",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("tree-view",{class:{"form-control":!0,"is-invalid":a[0]},attrs:{options:t.options,placeholder:"Select Location","show-count":!0},model:{value:t.LocationValue,callback:function(e){t.LocationValue=e},expression:"LocationValue"}}),a[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Location"}},[t._v(t._s(a[0]))]):t._e()]}}])})],1)]),e("div",{staticClass:"col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("ProductName"))),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"Product Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.txtproductName,expression:"txtproductName"}],class:{"form-control":!0,"is-invalid":a[0]},attrs:{maxlength:"100",type:"text"},domProps:{value:t.txtproductName},on:{input:function(e){e.target.composing||(t.txtproductName=e.target.value)}}}),a[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Product Name"}},[t._v(t._s(a[0]))]):t._e()]}}])})],1)]),e("div",{staticClass:"col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("ProductType")))]),e("Field",{staticClass:"w-100",attrs:{name:"AssetTypeId"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedProductValue,expression:"selectedProductValue"}],staticClass:"form-control",attrs:{name:"AssetTypeId"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedProductValue=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.AssetType,(function(a){return e("option",{key:a,domProps:{value:a.ASSETID}},[t._v(" "+t._s(a.ASSETTYPE)+" ")])}))],2)])],1)]),e("div",{staticClass:"col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("RequestedQuantity"))),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"Quantity",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.txtrequestQuantity,expression:"txtrequestQuantity"}],class:{"form-control":!0,"is-invalid":a[0]},attrs:{type:"number",min:"1",maxlength:"8"},domProps:{value:t.txtrequestQuantity},on:{input:function(e){e.target.composing||(t.txtrequestQuantity=e.target.value)}}}),a[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Quantity"}},[t._v(t._s(a[0]))]):t._e()]}}])})],1)])])]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 px-0"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"Description"}},[t._v(t._s(t.$t("Description"))),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{staticClass:"w-100",attrs:{name:"description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.txtDescription,expression:"txtDescription"}],staticClass:"form-control",class:{"form-control":!0,"is-invalid":a[0]},attrs:{name:"description",type:"text",placeholder:"Description",rows:"5",maxlength:"250"},domProps:{value:t.txtDescription},on:{input:function(e){e.target.composing||(t.txtDescription=e.target.value)}}}),a[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"description"}},[t._v(t._s(a[0]))]):t._e()]}}])})],1)]),e("AddQuotes",{on:{quotes:t.quotes}})],1),e("OnlinePurchase",{on:{purchases:t.purchases}}),e("div",{staticClass:"col-lg-12 mb-3"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-success pr-2 mr-2",attrs:{href:"javascript:;"},on:{click:function(e){return t.saveNewRequisition(t.values,t.errors,"ACT")}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-success pr-2 mr-2",attrs:{href:"javascript:;"},on:{click:function(e){return t.saveNewRequisitionAsDraft("Draft")}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" Save As Draft ")]),e("a",{staticClass:"btn btn-danger mr-2",attrs:{href:"/AssetRequisition/NewAssetRequisitionListing","data-original-title":"Cancel"}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])]),e("div",{staticClass:"col-lg-6 py-2"},[e("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("Required")))])])])])],1)])},i=[],r=(a("14d9"),function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"col-lg-12 mt-3 px-0"},[e("div",{staticClass:"heading-border mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Add Quotes")]),e("small",{staticClass:"float-right"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.addRow()}}},[e("i",{staticClass:"fa fa-plus pr-1"}),t._v("Add Row ")])])])]),e("Form",{ref:"AddQuoteForm"},t._l(t.newDynamicField,(function(a,s){return e("div",{key:s,staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3 px-0"},[e("div",{staticClass:"row addQuoteRows"},[e("div",{staticClass:"col-lg-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Vendor:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{staticClass:"w-100",attrs:{name:"Vendor"+(s+1),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.getVenderValue,expression:"item.getVenderValue"}],class:{"Vendor form-control w-100":!0,"is-invalid":s[0]},attrs:{name:"Vendor"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"getVenderValue",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.venderList,(function(a){return e("option",{key:a,domProps:{value:a.Value}},[t._v(" "+t._s(a.Text)+" ")])}))],2)]}}],null,!0)}),e("input",{directives:[{name:"model",rawName:"v-model",value:a.quoteId,expression:"item.quoteId"}],staticClass:"hdnquoteId",attrs:{type:"hidden",value:"0"},domProps:{value:a.quoteId},on:{input:function(e){e.target.composing||t.$set(a,"quoteId",e.target.value)}}})],1)])]),e("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[e("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[e("a",{staticClass:"round-icon-small btn-dark theme-primary round-icon-small AddQuoteVendor",on:{click:t.Addvendor}},[e("i",{staticClass:"fa fa-plus pt-7 AddQuoteVendor",attrs:{id:"AddQuoteVendor",title:"Add Vendor",onclick:"AddVendor('quote');"}})])])]),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Requested Quantity:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{attrs:{name:"RequestQuantity"+(s+1),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.txtrequestQuantity,expression:"item.txtrequestQuantity"}],class:{"RequestQuantity form-control":!0,"is-invalid":s[0]},attrs:{type:"text"},domProps:{value:a.txtrequestQuantity},on:{input:function(e){e.target.composing||t.$set(a,"txtrequestQuantity",e.target.value)}}})]}}],null,!0)})],1)])]),e("div",{staticClass:"col-md-1"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Currency:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{staticClass:"w-100",attrs:{name:"Currency"+(s+1),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:i}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.getCurrencyValue,expression:"item.getCurrencyValue"}],class:{"Currency form-control w-100":!0,"is-invalid":i[0]},attrs:{name:"Currency"+(s+1)},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"getCurrencyValue",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.currencyList,(function(a,s){return e("option",{key:s,domProps:{value:a.CurrencyId}},[t._v(" "+t._s(a.Currency)+" ")])}))],2)]}}],null,!0)})],1)])]),e("div",{staticClass:"col-lg-1 pl-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Unit Price:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"UnitPrice"+(s+1),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.txtUnitPrice,expression:"item.txtUnitPrice"}],class:{"UnitPrice form-control":!0,"is-invalid":s[0]},attrs:{type:"text"},domProps:{value:a.txtUnitPrice},on:{keyup:function(e){return t.calculateTotalQuantity(a)},input:function(e){e.target.composing||t.$set(a,"txtUnitPrice",e.target.value)}}})]}}],null,!0)})],1)]),e("div",{staticClass:"col-lg-1 pl-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Total Price:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{staticClass:"totalPrice form-control",attrs:{name:"totalPrice"+(s+1),id:"totalPrice"+(s+1),type:"text",disabled:""},domProps:{value:a.txtTotalPrice}})])]),e("div",{staticClass:"col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Upload Quote:")]),e("div",{staticClass:"input-group"},[e("div",{staticClass:"input-group"},[e("div",{staticClass:"custom-file"},[e("input",{staticStyle:{position:"absolute",clip:"rect(0px, 0px, 0px, 0px)"},attrs:{type:"file",name:"FileSrc"+(s+1),id:"flFile"+(s+1),"data-file":"multi",tabindex:"-1"},on:{change:function(e){return t.setFile(e,s)}}}),e("div",{staticClass:"bootstrap-filestyle input-group"},[e("input",{staticClass:"form-control disabled",attrs:{type:"text",disabled:""},domProps:{value:a.fileName}}),e("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[e("span",{staticClass:"group-span-filestyle input-group-btn input-group-text bg-white",attrs:{tabindex:"0"}},[e("label",{staticClass:"mb-0 font-weight-normal",attrs:{title:"Click here to select a file.",for:"flFile"+(s+1)}},[t._v("Choose File")])]),e("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[e("a",{staticClass:"round-icon-small btn-danger-light",attrs:{href:"javascript:;",title:"Clear"},on:{click:function(e){return t.Clear(a.count)}}},[e("i",{staticClass:"fa fa-undo"})]),e("a",{staticClass:"btn btn-danger theme-primary removefield ml-1",attrs:{href:"javascript:void;"},on:{click:function(e){return t.removeRow(a.count)}}},[e("i",{staticClass:"fa fa-times pt-7",attrs:{title:""}})])])])])])])])])])])])})),0),t.isShowvendor?e("AddVendorPopUp"):t._e()],1)],1)}),n=[],o=a("1115"),l=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("Add vendor"))+" ")]),e("button",{staticClass:"close",attrs:{type:"button",title:"Close"},on:{click:function(e){return t.closePopup()}}},[e("em",{staticClass:"fa fa-times"})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.Addvendor}})],1)])])])])])},u=[],c={components:{AddQuotes:g},data(){return{CountryData:[],FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Vendor"),name:"Vendor",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("Contact Person"),name:"ContactPerson",value:"",validationRules:{required:!1},placeholder:""}]},{layoutType:"Single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!1}}]},{layoutType:"double",group_name:"Product Type",Data:[{astype:"TextField",label:this.$t("Street"),name:"Street",value:"",placeholder:"",validationRules:{required:!1}},{astype:"TextField",label:this.$t("State"),name:"State",value:"",validationRules:{required:!1},placeholder:""}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("City"),name:"City",value:"",placeholder:"",validationRules:{required:!1}},{astype:"SelectField",label:this.$t("Country"),name:"Country",value:"",placeholder:"",validationRules:{required:!1},config:{options:[]}}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Zip code"),name:"Zipcode",value:"",placeholder:"",validationRules:{required:!1}},{astype:"TextField",label:this.$t("Phone Number"),name:"Phonenumber",value:"",validationRules:{required:!1},placeholder:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closePopup}]}},created(){this.GetCountryDDL()},methods:{Addvendor:function(t){var e=this,a={Vendor:t.Vendor,vendorOwner:t.ContactPerson,Description:t.Description,Street:t.Street,state:t.State,city:t.City,country:t.Country,zipcode:t.Zipcode,phone_number:t.Phonenumber},s=JSON.stringify(a);o["a"].Addvendor(s).then(t=>{"insert"==t.data.data.status?(e.ShowAlert(e.$t("AddedSuccessvendor",[e.$t("Group_Item")]),"success",!0,e.$t("Alert")),e.closePopup()):(e.ShowAlert(e.$t("Vendorexist"),"failure",!0,e.$t("Alert")),e.closePopup()),e.$parent.getVendorlist()})},closePopup(){var t=this;t.$parent.CloseAddVendorModel()},GetCountryDDL:function(){var t="moduleName=CRM&type=COUNTRIES";o["a"].GetCountryDDL(t).then(t=>{this.CountryData=t.data.DATA,this.CountryData.forEach(t=>{var e={name:t.name,value:t.value};this.FormSchema[3].Data[1].config.options.push(e)})})}}},d=c,p=a("2877"),m=Object(p["a"])(d,l,u,!1,null,null,null),v=m.exports,h={components:{AddVendorPopUp:v},data(){return{newDynamicField:[{quoteId:0,getVenderValue:"",txtrequestQuantity:"",getCurrencyValue:"",txtUnitPrice:"",txtTotalPrice:"",uploadQuote:"",fileName:"",count:1}],quotes:{},specificCount:null,venderList:[],currencyList:[],purchases:[],isShowvendor:!1,isLoading:!1}},created(){var t=this;t.getVendorlist(),t.getCurrencylist(),"ProductTypeList"==this.$route.params.reqForm&&(this.productItem=this.$route.params.items,null!=this.productItem&&""!=this.productItem&&"undefined"!=this.productItem&&t.UpdateRequisition(this.productItem.AssetRequisitionId))},methods:{UpdateRequisition:async function(t){var e=this;e.isLoading=!0;var a="id="+t;await o["a"].UpdateRequisition(a).then(t=>{null!=t.data&&(e.newDynamicField=[],JSON.parse(t.data.QuoteNewRequisitionList).forEach(t=>{var a={quoteId:t.quoteId,getVenderValue:t.vendorId,txtrequestQuantity:t.quantity,getCurrencyValue:t.currencyId,txtUnitPrice:t.price,txtTotalPrice:t.totalPrice,uploadQuote:t.quote,fileName:t.quote_file_name,count:1};e.newDynamicField.push(a)}),e.isLoading=!1),e.isLoading=!1})},CloseAddVendorModel(){var t=this;t.isShowvendor=!1},Addvendor(){this.isShowvendor=!0},setFile:function(t,e){var a=this;a.isLoading=!0;var s=new FormData;s.append("Files",t.target.files[0]),a.newDynamicField.forEach(t=>{const i=a.newDynamicField.find(t=>t.count===e+1);null!=i&&(o["a"].UploadNewAssetTypeQuoteFiles(s).then(t=>{null!=t.data?(a.isLoading=!1,i.uploadQuote=t.data.filepath,i.fileName=t.data.fileName):(a.isLoading=!1,a.ShowAlert(a.$t("Something Went Wrong"),"failure",a.$t("Alert")))}),a.quotes={quoteId:0,quoteVendor:i.getVenderValue,quoteQuantity:i.txtrequestQuantity,quoteAmount:i.txtUnitPrice,quotePrice:i.getCurrencyValue,quoteTotalPrice:i.txtTotalPrice,uploadQuote:i.uploadQuote,fileName:i.fileName})}),a.$emit("quotes",a.quotes)},Clear(t){var e=this;e.newDynamicField.forEach(e=>{e.count==t&&(e.fileName="")})},getVendorlist(){o["a"].GetCrmVendor().then(t=>{null!=t.data&&(this.venderList=t.data)})},getCurrencylist(){o["a"].GetCurrency().then(t=>{null!=t.data&&(this.currencyList=t.data)})},calculateTotalQuantity(t){var e=this;e.specificCount=t.count,e.newDynamicField.forEach(a=>{a.count==e.specificCount&&(a.txtTotalPrice=t.txtrequestQuantity*t.txtUnitPrice)});const a=e.newDynamicField.find(t=>t.count==e.specificCount);null!=a&&(e.quotes={quoteId:0,quoteVendor:a.getVenderValue,quoteQuantity:a.txtrequestQuantity,quoteAmount:a.txtUnitPrice,quotePrice:a.getCurrencyValue,quoteTotalPrice:a.txtTotalPrice,uploadQuote:a.uploadQuote,fileName:a.fileName}),e.$emit("quotes",e.quotes)},addRow(){var t=this;t.quotes={},t.$refs.AddQuoteForm.validate().then(e=>{if(e){let e={getVenderValue:"",txtrequestQuantity:"",getCurrencyValue:"",txtUnitPrice:"",txtTotalPrice:"",uploadQuote:"",fileName:"",count:1};e.count=t.newDynamicField.length+1,t.newDynamicField.push(e)}else t.ShowAlert(t.$t("Please correct the highlighted errors"),"failure",t.$t("Alert"))})},removeRow(t){var e=this;const a=e.newDynamicField.findIndex(e=>e.count===t);return-1!==a&&e.newDynamicField.splice(a,1),!0}}},f=h,y=Object(p["a"])(f,r,n,!1,null,null,null),g=y.exports,C=function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-12 mt-3 px-0"},[e("div",{staticClass:"heading-border mb-2"},[e("h5",{staticClass:"h5"},[e("span",{attrs:{id:"TabHeading2"}},[t._v("Online Purchase")]),e("small",{staticClass:"float-right"},[e("a",{staticClass:"addPurchaseLinkRows",attrs:{href:"javascript:;",title:""},on:{click:t.showRow}},[e("i",{staticClass:"fa fa-plus pr-1"}),t._v("Add Row ")])])])]),e("Form",{ref:"AddOnlineForm"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3"},t._l(t.newDynamicField,(function(a,s){return e("div",{key:s.count,staticClass:"row addOnlinePurchaseRows"},[e("div",{staticClass:"col-lg-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Vendor:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{staticClass:"w-100",attrs:{name:"Vendor"+(t.index+1),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.purchase_vendor,expression:"item.purchase_vendor"}],class:{"Vendor form-control w-100":!0,"is-invalid":s[0]},attrs:{name:"Vendor"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"purchase_vendor",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.venderList,(function(a){return e("option",{key:a,domProps:{value:a.Value}},[t._v(" "+t._s(a.Text)+" ")])}))],2),e("input",{directives:[{name:"model",rawName:"v-model",value:a.purchase_id,expression:"item.purchase_id"}],staticClass:"hdnpurchase_id",attrs:{type:"hidden",value:"0"},domProps:{value:a.purchase_id},on:{input:function(e){e.target.composing||t.$set(a,"purchase_id",e.target.value)}}})]}}],null,!0)})],1)])]),e("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[e("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[e("a",{staticClass:"round-icon-small btn-dark theme-primary round-icon-small AddQuoteVendor",on:{click:t.Addvendor}},[e("i",{staticClass:"fa fa-plus pt-7 AddQuoteVendor",attrs:{id:"AddQuoteVendor",title:"Add Vendor",onclick:"AddVendor('quote');"}})])])]),e("div",{staticClass:"col-lg-2"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Requested Quantity:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{attrs:{name:"Request Quantity",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.txtpurchaseQuantity,expression:"item.txtpurchaseQuantity"}],class:{"RequestQuantity form-control":!0,"is-invalid":s[0]},attrs:{type:"text"},domProps:{value:a.txtpurchaseQuantity},on:{input:function(e){e.target.composing||t.$set(a,"txtpurchaseQuantity",e.target.value)}}})]}}],null,!0)})],1)])]),e("div",{staticClass:"col-md-1"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Currency:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("div",{staticClass:"input-group"},[e("Field",{staticClass:"w-100",attrs:{name:"Currency",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.getCurrencyValue,expression:"item.getCurrencyValue"}],class:{"Currency form-control w-100":!0,"is-invalid":s[0]},attrs:{name:"Currency"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"getCurrencyValue",e.target.multiple?s:s[0])}}},[e("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.currencyList,(function(a,s){return e("option",{key:s,domProps:{value:a.CurrencyId}},[t._v(" "+t._s(a.Currency)+" ")])}))],2)]}}],null,!0)})],1)])]),e("div",{staticClass:"col-lg-1 pl-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Unit Price:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"Unit Price",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("input",{directives:[{name:"model",rawName:"v-model",value:a.priceAmount,expression:"item.priceAmount"}],class:{"UnitPrice form-control":!0,"is-invalid":s[0]},attrs:{type:"text"},domProps:{value:a.priceAmount},on:{keyup:function(e){return t.calculateTotalQuantity(a)},input:function(e){e.target.composing||t.$set(a,"priceAmount",e.target.value)}}})]}}],null,!0)})],1)]),e("div",{staticClass:"col-lg-1 pl-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Total Price:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.purchasePrice,expression:"item.purchasePrice"}],staticClass:"totalPrice form-control TotalPrice",attrs:{type:"text",disabled:""},domProps:{value:a.purchasePrice},on:{input:function(e){e.target.composing||t.$set(a,"purchasePrice",e.target.value)}}})])]),t._l(a.purchaseDynamicField,(function(s,i){return e("div",{key:"A"+i,staticClass:"purchaseDynamicField col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[t._v("Purchase Link"),e("span",{staticClass:"text-danger"})]),e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.purchase_link,expression:"purchase.purchase_link"}],staticClass:"purchaseLink form-control",attrs:{type:"text",name:"purchaseLink"},domProps:{value:s.purchase_link},on:{keyup:function(e){return t.purchaseUrlData(a,s)},input:function(e){e.target.composing||t.$set(s,"purchase_link",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:s.purchase_link_id,expression:"purchase.purchase_link_id"}],staticClass:"purchase_link_id",attrs:{type:"hidden"},domProps:{value:s.purchase_link_id},on:{input:function(e){e.target.composing||t.$set(s,"purchase_link_id",e.target.value)}}}),e("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[e("span",{staticClass:"group-span-filestyle input-group-btn input-group-text bg-grey"},[e("a",{staticClass:"mb-0 font-weight-normal",attrs:{title:"Click here to copy link."}},[e("i",{staticClass:"fa fa-copy"})])]),e("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[0==parseInt(i)?e("a",{staticClass:"round-icon-small btn-dark theme-primary round-icon-small",attrs:{href:"javascript:void(0);"},on:{click:function(e){return t.addLinkRow(a.count)}}},[e("i",{staticClass:"fa fa-plus pt-7"})]):t._e(),t._v("   "),e("a",{staticClass:"btn btn-danger theme-primary removefield",attrs:{href:"javascript:void;"},on:{click:function(e){return t.removeRow(a,s)}}},[e("i",{staticClass:"fa fa-times pt-7",attrs:{title:""}})])])])])])])}))],2)})),0)]),t.isShowvendor?e("AddVendorPopUp"):t._e()],1)},_=[],A={components:{AddVendorPopUp:v},data(){return{isShowvendor:!1,isVisible:!1,newDynamicField:[{purchase_id:0,purchase_vendor:"",txtpurchaseQuantity:"",getCurrencyValue:"",purchasePrice:"",priceAmount:"",count:1,purchaseDynamicField:[{purchase_link_id:0,purchase_link:"",pcount:1}]}],specificCount:null,venderList:[],currencyList:[],purchaseData:{}}},created(){var t=this;t.getVendorlist(),t.getCurrencylist(),"ProductTypeList"==this.$route.params.reqForm&&(this.productItem=this.$route.params.items,null!=this.productItem&&""!=this.productItem&&"undefined"!=this.productItem&&t.UpdateRequisition(this.productItem.AssetRequisitionId))},methods:{UpdateRequisition:async function(t){var e=this;e.isLoading=!0;var a="id="+t;await o["a"].UpdateRequisition(a).then(t=>{null!=t.data&&(e.newDynamicField=[],JSON.parse(t.data.PurchaseNewRequisitionList).forEach(t=>{var a={purchase_id:0,purchase_vendor:"",txtpurchaseQuantity:"",getCurrencyValue:"",purchasePrice:"",priceAmount:"",count:1,purchaseDynamicField:[]};a.purchase_id=t.purchaseId,a.purchase_vendor=t.vendorId,a.txtpurchaseQuantity=t.quantity,a.getCurrencyValue=t.currencyId,a.purchasePrice=t.totalPrice,a.priceAmount=t.price,a.count=1,JSON.parse(t.links).forEach(t=>{a.purchaseDynamicField.push({purchase_link_id:t.purchaseLinkId,purchase_link:t.purchaseLink})}),e.newDynamicField.push(a),e.isVisible=!0}),e.isLoading=!1),e.isLoading=!1})},getVendorlist(){o["a"].GetCrmVendor().then(t=>{null!=t.data&&(this.venderList=t.data)})},getCurrencylist(){o["a"].GetCurrency().then(t=>{null!=t.data&&(this.currencyList=t.data)})},Addvendor(){this.isShowvendor=!0},CloseAddVendorModel(){var t=this;t.isShowvendor=!1},calculateTotalQuantity(t){var e=this;e.specificCount=t.count,e.newDynamicField.forEach(a=>{a.count==e.specificCount&&(a.purchasePrice=t.txtpurchaseQuantity*t.priceAmount)});const a=e.newDynamicField.find(t=>t.count===e.specificCount);null!=a&&(e.purchaseData={purchase_id:0,purchase_vendor:a.purchase_vendor,purchaseQuantity:a.txtpurchaseQuantity,purchasePrice:a.getCurrencyValue,ppriceAmount:a.priceAmount,purchaseTotalPrice:a.purchasePrice,purchaselinks:a.purchaseDynamicField},e.$emit("purchases",e.purchaseData))},purchaseUrlData(t,e){var a=this;const s=a.newDynamicField.find(e=>e.count===t.count);null!=s&&(a.purchaseData={purchase_id:0,purchase_vendor:s.purchase_vendor,purchaseQuantity:s.txtpurchaseQuantity,purchasePrice:s.getCurrencyValue,ppriceAmount:s.priceAmount,purchaseTotalPrice:s.purchasePrice,purchaselinks:s.purchaseDynamicField},a.$emit("purchases",a.purchaseData))},showRow(){var t=this;t.$refs.AddOnlineForm.validate().then(e=>{if(0==t.isVisible)return t.isVisible=!0;if(e){let e={purchase_vendor:"",txtpurchaseQuantity:"",getCurrencyValue:"",purchasePrice:"",priceAmount:"",count:1,purchaseDynamicField:[{purchase_link_id:0,purchase_link:"",pcount:1}]};e.count=t.newDynamicField.length+1,t.newDynamicField.push(e)}else t.ShowAlert(t.$t("Please correct the highlighted errors"),"failure",t.$t("Alert"))})},addLinkRow(t){var e=this;e.specificCount=t,e.isVisible=!0;let a={};const s=e.newDynamicField.find(t=>t.count===e.specificCount);null!=s&&(a={purchase_link_id:0,purchase_link:"",pcount:e.newDynamicField[0].purchaseDynamicField.length+1},e.newDynamicField.forEach(t=>{t.count==e.specificCount&&t.purchaseDynamicField.push(a)})),e.purchaseData={purchase_id:0,purchase_vendor:s.purchase_vendor,purchaseQuantity:s.txtpurchaseQuantity,purchasePrice:s.getCurrencyValue,ppriceAmount:s.priceAmount,purchaseTotalPrice:s.purchasePrice,purchaselinks:s.purchaseDynamicField},e.$emit("purchases",e.purchaseData)},removeRow(t,e){var a=this;let s=t.count;a.newDynamicField.forEach(t=>t.purchaseDynamicField.forEach((i,r)=>{if(1===t.purchaseDynamicField.length){const t=a.newDynamicField.findIndex(t=>t.count===s);-1!==t&&a.newDynamicField.splice(t,1)}else if(i.pcount===e.pcount)return t.purchaseDynamicField.splice(r,1)}))}}},x=A,q=Object(p["a"])(x,C,_,!1,null,null,null),w=q.exports,P=a("ca17"),b=a.n(P),D=(a("542c"),{components:{AddQuotes:g,OnlinePurchase:w,"tree-view":b.a},data(){return{options:[],LocationValue:null,txtDescription:"",txtrequestQuantity:null,txtproductName:"",AssetType:[],selectedProductValue:null,isLoading:!1,qoutesArray:[],purchaseArray:[],productItem:"",updateItemArray:[],updateRequistionId:0}},async created(){var t=this;await t.GetLocationByCompanyId(),await t.GetAssetType(),"ProductTypeList"==this.$route.params.reqForm&&(this.productItem=this.$route.params.items,null!=this.productItem&&""!=this.productItem&&"undefined"!=this.productItem&&(t.txtrequestQuantity=this.productItem.Quantity,t.txtproductName=this.productItem.ProductName,t.txtDescription=this.productItem.Description,t.selectedProductValue=this.productItem.AssetTypeId,t.updateRequistionId=this.productItem.AssetRequisitionId,t.UpdateRequisition(this.productItem.AssetRequisitionId)))},methods:{UpdateRequisition:async function(t){var e=this;e.isLoading=!0;var a="id="+t;await o["a"].UpdateRequisition(a).then(t=>{null!=t.data&&(e.updateItemArray=t.data,e.LocationValue=e.updateItemArray.location_id),e.isLoading=!1})},GetLocationByCompanyId:async function(){var t=this,e="reqForm=assetassignment";await o["a"].GetLocationByuserId(e).then(e=>{t.FindalLocationArray=[],e.data.data.forEach(a=>{var s=t.FindalLocationArray.filter((function(t){return t.COMPANY_LOCATION_ID==a.COMPANY_LOCATION_ID}));if(0==s.length&&null==a.PARENT_LOCATION_ID){let s=a.COMPANY_LOCATION_ID,i=t.getChildLocation(s,a,e.data.data);t.FindalLocationArray.push(i)}}),t.options=t.FindalLocationArray})},getChildLocation:function(t,e,a){let s=this,i={};i={id:e.COMPANY_LOCATION_ID,label:e.LOCATION_NAME};let r=i;var n=a.filter((function(e){return e.PARENT_LOCATION_ID==t}));let o=[];return n.forEach(t=>{let e=t.COMPANY_LOCATION_ID;var r=o.filter((function(e){return e.COMPANY_LOCATION_ID==t.COMPANY_LOCATION_ID}));if(0==r.length){var n=a.filter((function(t){return t.PARENT_LOCATION_ID==e}));if(null!=n&&n.length>0){let i=s.getChildLocation(e,t,a);o.push(i)}else i={id:""+t.COMPANY_LOCATION_ID,label:""+t.LOCATION_NAME},o.push(i)}}),r.children=o,r},async GetAssetType(){var t=this;t.isLoading=!0;var e="type=ITEMCODE&issueTo=&locationId=";await o["a"].GetAssetTypeCustom(e).then(e=>{t.AssetType=JSON.parse(e.data),t.isLoading=!1})},quotes:function(t){var e=this;if(0!=e.qoutesArray.length){const a=e.qoutesArray.findIndex(e=>e.quoteVendor==t.quoteVendor);return-1!==a&&e.qoutesArray.splice(a,1),void e.qoutesArray.push(t)}e.qoutesArray.push(t)},purchases:function(t){var e=this;if(0!=e.purchaseArray.length){const a=e.purchaseArray.findIndex(e=>e.purchase_vendor==t.purchase_vendor);return-1!==a&&e.purchaseArray.splice(a,1),void e.purchaseArray.push(t)}e.purchaseArray.push(t)},saveNewRequisition(t,e,a){let s=a;var i=this;i.isLoading=!0;var r=new FormData;i.$refs.AddReqForm.validate().then(t=>{if(t){let t={RequisitionId:i.updateRequistionId?i.updateRequistionId:0,location:i.LocationValue,productname:i.txtproductName,productType:i.selectedProductValue,quantity:i.txtrequestQuantity,description:i.txtDescription,status:s,quotes:i.qoutesArray,purchases:i.purchaseArray};r.append("postString",JSON.stringify(t)),o["a"].AddUpdateNewRequisition(r).then(t=>"add"==t.data.msg?(i.isLoading=!1,i.ShowAlert(i.$t("New Product type Request successfully Added"),"Success",i.$t("Alert")),i.$router.push({path:"/AssetRequisition/NewAssetRequisitionListing"})):"update"==t.data.msg?(i.isLoading=!1,i.ShowAlert(i.$t("New Product type Request successfully Updated"),"Success",i.$t("Alert")),i.$router.push({path:"/AssetRequisition/NewAssetRequisitionListing"})):(i.isLoading=!1,i.ShowAlert(i.$t("New Product type Request failed"),"failure",i.$t("Alert"))))}else i.ShowAlert(i.$t("Please correct the highlighted errors"),"failure",i.$t("Alert"))})},saveNewRequisitionAsDraft(t){let e=t;var a=this;a.isLoading=!0;var s=new FormData;a.$refs.AddReqForm.validate().then(t=>{if(t){let t={RequisitionId:a.updateRequistionId?a.updateRequistionId:0,location:a.LocationValue,productname:a.txtproductName,productType:a.selectedProductValue,quantity:a.txtrequestQuantity,description:a.txtDescription,status:e,purchases:a.purchaseArray,quotes:a.qoutesArray};s.append("postString",JSON.stringify(t)),o["a"].AddUpdateNewRequisition(s).then(t=>"add"==t.data.msg?(a.isLoading=!1,a.ShowAlert(a.$t("New Product type Request Add as draft "),"Success",a.$t("Alert")),a.$router.push({path:"/AssetRequisition/NewAssetRequisitionListing"})):"update"==t.data.msg?(a.isLoading=!1,a.ShowAlert(a.$t("New Product type Request update as draft "),"Success",a.$t("Alert")),a.$router.push({path:"/AssetRequisition/NewAssetRequisitionListing"})):(a.isLoading=!1,a.ShowAlert(a.$t("New Product type Request failed"),"failure",a.$t("Alert"))))}})}}}),N=D,V=(a("6d9a"),Object(p["a"])(N,s,i,!1,null,null,null));e["default"]=V.exports},b1c4:function(t,e,a){var s=a("36db");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("542e3fa9",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-6350c3cd.js.map