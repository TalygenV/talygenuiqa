(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMLeadDetails","View Contract Details~ViewStageDetails"],{"04d1":function(t,e,a){var s=a("342f"),i=s.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"0a86":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.noRecordForTab?t._e():a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{id:"table-contacts-content","aria-describedby":"crmcontact"}},[a("thead",{staticClass:"thead-bg"},[a("tr",["CRM_CAMPAIGNS"==t.submodulecode?a("th",{staticClass:"text-center",staticStyle:{width:"50px !important"},attrs:{scope:"col"}},[a("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"}})]):t._e(),t._m(0),t._l(t.ContactsHeader,(function(e,s){return[e.VISIBLE&&"first_name"!=e.COLUMN_NAME&&"last_name"!=e.COLUMN_NAME&&"gender"!=e.COLUMN_NAME?a("th",{key:s,staticClass:"text-capitalize text-left",style:t.bindStyle(e.COLUMN_NAME),attrs:{scope:"col"}},[a("span",{attrs:{id:e.COLUMN_NAME}},[t._v(t._s(t.GetLocalizedValue(e.COLUMN_NAME,e.DISPLAY_NAME)))])]):t._e()]})),"CRM_CAMPAIGNS"==t.submodulecode?a("th",{staticClass:"text-center",staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ConvertLead")))])]):t._e(),"CRM_LEADS"==t.submodulecode?a("th",{staticClass:"text-center",staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[a("span",[t._v("Is Primary")])]):t._e(),"CRM_CONTRACTS"==t.submodulecode?a("th",{staticClass:"text-center",staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[a("span",[t._v("Gender")])]):t._e(),t._m(1)],2)]),a("tbody",t._l(t.ContactsData,(function(e,s){return a("tr",["CRM_CAMPAIGNS"==t.submodulecode?a("td",{key:s,staticClass:"text-center"},[a("input",{staticClass:"chkItems",attrs:{disabled:null!=e.converted_lead_id,type:"checkbox"},domProps:{value:e.contact_id}})]):t._e(),a("td",{class:{"text-left":!0}},[a("a",{staticClass:"actions-onclick",attrs:{href:"javascript:;"},on:{click:function(a){return t.openContactModal(e["contact_id"])}}},[a("span",{staticClass:"text",staticStyle:{color:"dodgerblue",cursor:"pointer"}},[t._v(t._s(e.first_name)+" "+t._s(e.last_name))])])]),t._l(t.ContactsHeader,(function(s,i){return[s.VISIBLE&&"first_name"!=s.COLUMN_NAME&&"last_name"!=s.COLUMN_NAME&&"gender"!=s.COLUMN_NAME?a("td",{key:i,class:{"text-left":!0,"text-center":"status_id"==s.COLUMN_NAME}},["date"==s.DATA_TYPE||"datetime"==s.DATA_TYPE?a("span",{class:{"px-2 bg-success text-white d-block":"status_id"==s.COLUMN_NAME&&"Active"==e[s.COLUMN_NAME],"px-2 bg-danger text-white d-block":"status_id"==s.COLUMN_NAME&&"Inactive"==e[s.COLUMN_NAME]}},[t._v(t._s(t._f("formatDate")(e[s.COLUMN_NAME])))]):"date"!=s.DATA_TYPE&&"datetime"!=s.DATA_TYPE?a("span",{class:{"px-2 bg-success text-white d-block":"status_id"==s.COLUMN_NAME&&"Active"==e[s.COLUMN_NAME],"px-2 bg-danger text-white d-block":"status_id"==s.COLUMN_NAME&&"Inactive"==e[s.COLUMN_NAME]}},[t._v(t._s("gender"==s.COLUMN_NAME?"M"==e[s.COLUMN_NAME]?"Male":"F"==e[s.COLUMN_NAME]?"Female":"":e[s.COLUMN_NAME]))]):t._e()]):t._e()]})),"CRM_CAMPAIGNS"==t.submodulecode?a("td",{staticClass:"text-center single-action"},["CRM_CAMPAIGNS"==t.submodulecode&&null==e.converted_lead_id?a("a",{staticClass:"pop",attrs:{href:"javascript:;",typefor:"ConvertLead",typetitle:t.$t("ConvertLeaded"),value:"item.contact_id",title:t.$t("ConvertLead")},on:{click:function(a){return t.ChangeLeadOwner(e.contact_id)}}},[a("em",{staticClass:"fa fa-retweet text-primary action-icon"})]):t._e(),t._v(" "),"CRM_CAMPAIGNS"==t.submodulecode&&null!=e.converted_lead_id?a("span",[a("em",{staticClass:"fa fa-retweet disabled action-icon"})]):t._e()]):t._e(),"CRM_LEADS"==t.submodulecode?a("td",[a("div",{staticClass:"form-group text-center mb-0"},[a("label",{class:{switch:!0,"switch disabled":"Closed"==t.LeadStatus||1==e.IsPrimary}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsPrimary,expression:"item.IsPrimary"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",name:"IsPrimary"+s,id:"IsPrimary"+s},domProps:{checked:e.IsPrimary,checked:Array.isArray(e.IsPrimary)?t._i(e.IsPrimary,null)>-1:e.IsPrimary},on:{change:[function(a){var s=e.IsPrimary,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=null,l=t._i(s,n);i.checked?l<0&&t.$set(e,"IsPrimary",s.concat([n])):l>-1&&t.$set(e,"IsPrimary",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e,"IsPrimary",o)},function(a){return t.SetLoginOrPrimary(e,a)}]}}),t._m(2,!0)])])]):t._e(),"CRM_CONTRACTS"==t.submodulecode?a("td",{staticClass:"text-center"},[t._v(t._s(e.gender))]):t._e(),a("td",{staticClass:"text-center single-action"},[a("a",{class:{disabled:e.IsPrimary||null!=e.converted_lead_id},attrs:{href:"javascript:;",title:t.$t("DeAssociate")},on:{click:function(a){return t.deleteContactFromTab(e["contact_id"])}}},[a("em",{staticClass:"fa fa-times action-icon text-danger pr-2",class:{disabled:e.IsPrimary||null!=e.converted_lead_id}})])])],2)})),0)])])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e(),t.showLeadOwnerModal?a("modalleadowner",{attrs:{OwnerIds:t.OwnerIds,ModuleType:"Campaign"},on:{close:t.onCloseLeadOwner}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("LeadOwner")))])]):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-capitalize text-left",staticStyle:{padding:"10px 8px !important"},attrs:{scope:"col"}},[a("span",[t._v("Name")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{"min-width":"50px"},attrs:{scope:"col"}},[a("span",[t._v("DeAssociate")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v("Yes")]),a("span",{staticClass:"slider-no"},[t._v("No")])])}],o=(a("e9c4"),a("b0c0"),a("9769")),n=a("555e"),l=a("1157"),r=a.n(l),c={components:{modalleadowner:n["a"]},props:{contactsdata:{type:Array,required:!0},contactsheader:{type:Array,required:!0},sourceid:{type:String,required:!0},submodulecode:{type:String,required:!0},modulename:{type:String,required:!0}},data:function(){return{ContactsData:[],noRecordForTab:!0,LeadStatus:"",ContactsHeader:[],RecordCount:0,OwnerIds:[],ModuleType:"",showLeadOwnerModal:!1}},watch:{contactsheader:function(t){this.ContactsHeader=t},contactsdata:function(t){var e=this;e.ContactsData=t;try{this.LeadStatus=this.$parent.LeadStatus,this.RecordCount=this.ContactsData.length}catch(a){console.log(a)}e.noRecordForTab=!(null!=e.ContactsData&&e.ContactsData.length>0),setTimeout((function(){e.ResponsiveDataTable("table-contacts-content")}),500)}},methods:{ChangeLeadOwner:function(t){var e=this;e.OwnerIds.push(t),e.OwnerIds.length>0&&(e.showLeadOwnerModal=!e.showLeadOwnerModal)},openContactModal:function(t){var e=this,a="AddContact";null!=t&&(a="UpdateContact"),"undefined"===typeof this.$parent.checkForAdditionalPermission||this.$parent.checkForAdditionalPermission(a)?(this.$parent.iscontactDetails=t,this.$parent.showContactModal=!this.$parent.showContactModal):e.confirmR(e.$t("additionalOwnerAuthorityWarning"),!0,e.$t("Alert"))},deleteContactFromTab:function(t){var e=this;if("undefined"===typeof this.$parent.checkForAdditionalPermission||this.$parent.checkForAdditionalPermission("DeleteContact")){var a=this;t>0?a.confirmR(a.$t("ConfirmDeAssociateCommonContact"),!0,null,(function(){var e={ids:t,moduleName:a.modulename,subModuleCode:a.submodulecode,refCode:"DELETE_VIEW_CONTACTS",refId:a.sourceid},s=JSON.stringify(e);o["a"].CommonDelete(s).then((function(t){var e="";"Success"==t.data[0].Status?(r()(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),a.$parent.loadData("contacts"),e=a.ShowAlert(a.$t("DeassociateSuccess",[a.$t("Contact")]),"success",!0,a.$t("Alert"))):e=a.ShowAlert(a.$t("ErrorDeassociateFailure",[a.$t("Contact")]),"failure",!0,a.$t("Alert")),setTimeout((function(){e.modal("hide")}),2e3)}))})):a.ShowAlert(a.$t("DeletedError",[a.$t("Contact")]),"failure",!0,this.$t("Alert"))}else e.confirmR(e.$t("additionalOwnerAuthorityWarning"),!0,e.$t("Alert"))},bindStyle:function(t){var e={};return e="personal_notes"==t?{"min-width":"200px"}:{"min-width":"120px"},e},SetLoginOrPrimary:function(t,e){var a=this,s=(e.currentTarget.name.indexOf("IsPrimary"),"");s="Are you sure you want to change primary?",talygen.confirm({title:"",message:s,callback:function(e){e?(r.a.each(a.ContactsData,(function(e,a){a.contact_id!=t.contact_id&&(console.log("item",a),a.IsPrimary=!1)})),a.SaveContactAsPrimary(t)):t.IsPrimary=!t.IsPrimary}})},SaveContactAsPrimary:function(t){this.deleteContactFromTab;var e=this,a={contact_id:t.contact_id,IsPrimary:t.IsPrimary,Type:"LEAD",refId:e.sourceid},s=JSON.stringify(a);e.IsLogin=t.IsLogin,o["a"].SaveContactAsPrimary(s).then((function(t){""!=t.data&&"SUCCESS"==t.data.msg&&(e.ShowAlert(e.$t("Contact Updated successfully."),"success",!0,e.$t("Alert")),e.$parent.loadData("contacts"))}))},onCloseLeadOwner:function(){this.showLeadOwnerModal=!1,this.$parent.loadData("contacts")}}},d=c,u=a("2877"),m=Object(u["a"])(d,s,i,!1,null,null,null);e["a"]=m.exports},"13af":function(t,e,a){"use strict";a("7df9")},"200d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.contactHeader))])]})),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body",staticStyle:{"max-height":"70vh",overflow:"auto"}},[a("div",{staticClass:"row form-head",staticStyle:{display:"none"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-right p-0"},[a("div",{staticClass:"userguide-box userguide_curve"},[a("a",{staticClass:"userguide-btn collapsed",attrs:{"data-toggle":"collapse",href:"#user-guidepriority","aria-expanded":"false","aria-controls":"search-content"}},[a("em",{staticClass:"fa"}),a("span",[t._v(t._s(t.$t("GuideForUser"))+" ")])]),a("div",{staticClass:"clearfix"}),t._m(0)])])])]),a("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.valid,i=e.errors;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("FirstName"))+" :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"First Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtFirstName,expression:"contactData.txtFirstName"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"txtFirstName",name:"txtFirstName",maxlength:"100",type:"text"},domProps:{value:t.contactData.txtFirstName},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtFirstName",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"First Name"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("LastName"))+" :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Last Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtLastName,expression:"contactData.txtLastName"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"txtLastName",name:"txtLastName",maxlength:"100",type:"text"},domProps:{value:t.contactData.txtLastName},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtLastName",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Last Name"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("EmailId"))+" :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email",rules:{required:!0,email:!0,max:30}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtEmailId,expression:"contactData.txtEmailId"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"txtEmailId",name:"txtEmailId",type:"text"},domProps:{value:t.contactData.txtEmailId},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtEmailId",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Email"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Mobile"))+" :")]),a("Field",{attrs:{name:"MobilePhone",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("vue-tel-input",{attrs:{id:"txtMobilePhone",name:"txtMobilePhone",mode:"international"},on:{input:t.onInputMobilePhone},model:{value:t.contactData.txtMobilePhone,callback:function(e){t.$set(t.contactData,"txtMobilePhone",e)},expression:"contactData.txtMobilePhone"}}),t.mobilephoneError?a("span",{staticClass:"invalid-feedback d-block",attrs:{id:"spantxtMobilePhone"}},[t._v("Enter valid "+t._s(t.$t("MOBILE_PHONE"))+".")]):t._e(),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"MobilePhone"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Home"))+" "+t._s(t.$t("Phone"))+" :")]),a("Field",{attrs:{name:"txtHomePhone",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("vue-tel-input",{attrs:{id:"txtHomePhone",name:"txtHomePhone",mode:"international"},on:{input:t.onInputHomePhone},model:{value:t.contactData.txtHomePhone,callback:function(e){t.$set(t.contactData,"txtHomePhone",e)},expression:"contactData.txtHomePhone"}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtHomePhone"}},[t._v(t._s(s[0]))]):t._e(),t.homephoneError?a("span",{staticClass:"invalid-feedback d-block",attrs:{id:"spantxtHomePhone"}},[t._v("Enter valid "+t._s(t.$t("Home"))+" "+t._s(t.$t("Phone"))+".")]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("BusinessPhone"))+" :")]),a("Field",{attrs:{name:"txtBusinessPhone",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("vue-tel-input",{attrs:{id:"txtBusinessPhone",name:"txtBusinessPhone",mode:"international"},on:{input:t.onInputBusinessPhone},model:{value:t.contactData.txtBusinessPhone,callback:function(e){t.$set(t.contactData,"txtBusinessPhone",e)},expression:"contactData.txtBusinessPhone"}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtBusinessPhone"}},[t._v(t._s(s[0]))]):t._e(),1==t.businessphoneError?a("span",{staticClass:"invalid-feedback d-block",attrs:{id:"spantxtBusinessPhone"}},[t._v("Enter valid "+t._s(t.$t("BusinessPhone"))+".")]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Fax"))+":")]),a("Field",{attrs:{name:"txtFax",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtFax,expression:"contactData.txtFax"}],staticClass:"form-control",attrs:{id:"txtFax",name:"Fax",maxlength:"15",type:"text"},domProps:{value:t.contactData.txtFax},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.contactData,"txtFax",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtFax"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("AddressStreet1"))+":")]),a("Field",{attrs:{name:"txtAddressLine1",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.contactData.txtAddressLine1,expression:"contactData.txtAddressLine1",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"txtAddressLine1",name:"txtAddressLine1",maxlength:"200",type:"text"},domProps:{value:t.contactData.txtAddressLine1},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtAddressLine1",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtAddressLine1"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("AddressStreet2"))+":")]),a("Field",{attrs:{name:"txtAddressLine2",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtAddressLine2,expression:"contactData.txtAddressLine2"}],staticClass:"form-control",attrs:{id:"txtAddressLine2",name:"txtAddressLine2",maxlength:"200",type:"text"},domProps:{value:t.contactData.txtAddressLine2},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtAddressLine2",e.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtAddressLine2"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("City"))+":")]),a("Field",{attrs:{name:"txtCity",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.contactData.txtCity,expression:"contactData.txtCity",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"txtCity",name:"txtCity",maxlength:"100",type:"text"},domProps:{value:t.contactData.txtCity},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtCity",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtCity"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("State"))+" :")]),a("Field",{attrs:{name:"State",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtState,expression:"contactData.txtState"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contactData,"txtState",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.stateDDLData,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"State"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("ZipCode"))+":")]),a("Field",{attrs:{name:"ZipCode",rules:{ZipCode:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtZipCode,expression:"contactData.txtZipCode"}],staticClass:"form-control",attrs:{id:"txtZipCode",name:"ZipCode",maxlength:"15",type:"text"},domProps:{value:t.contactData.txtZipCode},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.contactData,"txtZipCode",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ZipCode"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Country"))+" :")]),a("Field",{attrs:{name:"Country",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contactData.country,expression:"contactData.country"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contactData,"country",e.target.multiple?a:a[0])},function(e){return t.FillDropdown(t.contactData.country)}]}},[a("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.countryDDLData,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name))])}))],2),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Country"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("label",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[t._v("Gender:")]),a("div",{staticClass:"form-group float-left"},[a("label",{staticClass:"switch medium"},[a("Field",{attrs:{name:"Gender",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{staticClass:"form-check-input custom-control-input dynamic",attrs:{type:"checkbox"},domProps:{value:t.contactData.rGender,checked:t.contactData.rGender},on:{change:function(e){return t.onChangeToggle(e)}}}),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v("Male")]),a("span",{staticClass:"slider-no"},[t._v("Female")])]),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Gender"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("DateOfBirth"))+" :")]),a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,"max-date":new Date},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputValue,i=e.inputEvents,o=e.togglePopover;return[a("input",t._g({staticClass:"form-control",domProps:{value:s}},i)),a("div",{staticClass:"input-group-append",on:{click:function(t){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.contactData.txtDateOfBirth,callback:function(e){t.$set(t.contactData,"txtDateOfBirth",e)},expression:"contactData.txtDateOfBirth"}})],1)])]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("MaritalStatus"))+" :")]),a("Field",{attrs:{id:"MaritalStatus",name:"MaritalStatus",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contactData.maritalStatus,expression:"contactData.maritalStatus"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contactData,"maritalStatus",e.target.multiple?a:a[0])},function(e){return t.ChangeMarital()}]}},[a("option",{attrs:{value:""}},[t._v("Select")]),a("option",{attrs:{value:"Single"}},[t._v("Single")]),a("option",{attrs:{value:"Married"}},[t._v("Married")]),a("option",{attrs:{value:"Divorced"}},[t._v("Divorced")])]),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"MaritalStatus"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-right"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("SpouseName"))+" :")]),a("Field",{attrs:{name:"txtSpouseName",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtSpouseName,expression:"contactData.txtSpouseName"}],staticClass:"form-control",attrs:{id:"txtSpouseName",name:"txtSpouseName",maxlength:"100",type:"text"},domProps:{value:t.contactData.txtSpouseName},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtSpouseName",e.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"txtSpouseName"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Status"))+" :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{rules:{required:!0},id:"Status",name:"Status"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contactData.Status,expression:"contactData.Status"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contactData,"Status",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select")]),t._l(t.statusDDLData,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Status"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),"CRM_CAMPAIGNS"==t.submodulecode?a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("GroupName"))+" :")]),a("Field",{attrs:{rules:{required:!1},id:"GroupName",name:"GroupName"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtGroupName,expression:"contactData.txtGroupName"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.contactData,"txtGroupName",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("Select Group Name")]),t._l(t.groupDDLData,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name))])}))],2),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"GroupName"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]):t._e(),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Description"))+" :")]),t._v(" "),a("Field",{attrs:{name:"txtPersonalNotes",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contactData.txtPersonalNotes,expression:"contactData.txtPersonalNotes"}],staticClass:"form-control",staticStyle:{"max-height":"100px!important","min-height":"100px!important"},attrs:{id:"txtPersonalNotes",name:"txtPersonalNotes",maxlength:"1000"},domProps:{value:t.contactData.txtPersonalNotes},on:{input:function(e){e.target.composing||t.$set(t.contactData,"txtPersonalNotes",e.target.value)}}}),a("span",{staticClass:"invalid-feedback",attrs:{name:"txtPersonalNotes"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[a("div",{staticClass:"modal-footer text-right"},[a("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.SaveContact(s,i)}}},[a("em",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("submit"))+" ")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:t.CloseAddContactPopup}},[a("em",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])]),a("div",{staticClass:"my-3 float-left text-danger"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])])])])])]}}])})],1)])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-guide collapse",attrs:{id:"user-guidepriority"}},[t._v("Fill the Form to add contact. Some fields are not mendatory, but please fill these fields for more information for in future when needed."),a("br"),a("br")])}],o=(a("a9e3"),a("498a"),a("4de4"),a("d3b7"),a("e9c4"),a("b0c0"),a("9769")),n={props:{sourceid:{type:String,required:!0},submodulecode:{type:String,required:!0},userinfo:{type:Number,required:!0},companyid:{type:Number,required:!0},modulename:{type:String,required:!0},sourcename:{type:String,required:!0},iscontactDetails:null},data:function(){return{options:{format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,isLoading:!1},popover:{visibility:"click"},datePickerMaxConfig:{format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,maxDate:new Date(Date.now())},countryDDLData:[],stateDDLData:[],contactHeader:"",maxLength:20,statusDDLData:[],groupDDLData:[],contactData:{contactId:null,txtFirstName:null,txtLastName:null,txtJobTitle:null,txtEmailId:null,txtBusinessPhone:null,txtMobilePhone:null,maritalStatus:"",txtGroupName:"",txtFax:null,txtPreferredContact:null,txtAddressLine1:null,txtAddressLine2:null,txtAddressStreet3:null,txtCity:null,txtState:"",txtZipCode:null,txtHomePhone:null,country:"",rGender:null,txtSpouseName:null,txtDateOfBirth:null,txtPersonalNotes:null,Status:"",type:"",userId:null,companyId:null,sourceId:null,moduleName:null,subModuleCode:null,groupID:null},phoneList:[],businessphoneError:!1,homephoneError:!1,mobilephoneError:!1}},created:function(){var t=this;null!=t.iscontactDetails&&""!=t.iscontactDetails?t.contactHeader=t.$t("EditContact"):t.contactHeader=t.$t("AddContact"),setTimeout((function(){t.RadioButtonBootstrap()}),500),t.GetCountryDDLValues(),t.GetStatusDDLData(),t.fetchContactForForm(),t.GetGroupNameDDLData(),setTimeout((function(){t.ChangeMarital()}),500),setTimeout((function(){t.FillDropdown(t.contactData.country,"EDIT")}),1e3)},beforeUpdate:function(){var t=this;t.ChangeMarital(t.contactData.maritalStatus)},methods:{onChangeToggle:function(t){this.contactData.rGender=t.target.checked},ChangeMarital:function(){var t=this,e=t.contactData.maritalStatus;"Single"==e||""==e?$("#txtSpouseName").attr("disabled","disabled"):$("#txtSpouseName").removeAttr("disabled")},onInputMobilePhone:function(t,e,a){if(t){e&&(null===e||void 0===e?void 0:e.formatted.length)>0&&(null===e||void 0===e||!e.valid||void 0==(null===e||void 0===e?void 0:e.valid))?this.mobilephoneError=!0:null!==e&&void 0!==e&&e.formatted&&null!==e&&void 0!==e&&e.valid&&(this.contactData.txtMobilePhone=e.formatted,this.mobilephoneError=!1);var s={field_id:"txtMobilePhone",value:$.trim(e.formatted),isValid:0==this.mobilephoneError},i=this.phoneList.filter((function(t){return"txtMobilePhone"!=t.field_id}));i.push(s),this.phoneList=i}},onInputHomePhone:function(t,e,a){if(t){e&&(null===e||void 0===e?void 0:e.formatted.length)>0&&(null===e||void 0===e||!e.valid||void 0==(null===e||void 0===e?void 0:e.valid))?this.homephoneError=!0:null!==e&&void 0!==e&&e.formatted&&null!==e&&void 0!==e&&e.valid&&(this.contactData.txtHomePhone=e.formatted,this.homephoneError=!1);var s={field_id:"txtHomePhone",value:$.trim(e.formatted),isValid:0==this.homephoneError},i=this.phoneList.filter((function(t){return"txtHomePhone"!=t.field_id}));i.push(s),this.phoneList=i}},onInputBusinessPhone:function(t,e,a){if(t){e&&(null===e||void 0===e?void 0:e.formatted.length)>0&&(null===e||void 0===e||!e.valid||void 0==(null===e||void 0===e?void 0:e.valid))?this.businessphoneError=!0:null!==e&&void 0!==e&&e.formatted&&null!==e&&void 0!==e&&e.valid&&(this.contactData.txtBusinessPhone=e.formatted,this.businessphoneError=!1);var s={field_id:"txtBusinessPhone",value:$.trim(e.formatted),isValid:0==this.businessphoneError},i=this.phoneList.filter((function(t){return"txtBusinessPhone"!=t.field_id}));i.push(s),this.phoneList=i}},SaveContact:function(t,e){var a=this,s=null;s=a.iscontactDetails,a.$refs.form.validate().then((function(t){if(t){if(a.phoneList&&a.phoneList.length>0&&a.phoneList.some((function(t){return 0==t.isValid})))return!1;a.maritalStatus=""!=a.maritalStatus?a.maritalStatus:null,a.country=""!=a.country?a.country:null,a.contactData.userId=a.userinfo,a.contactData.companyId=a.companyid,a.contactData.sourceId=a.sourceid,a.contactData.moduleName=a.modulename,a.contactData.subModuleCode=a.submodulecode,a.contactData.groupID=a.txtGroupName,a.contactData.type=a.sourcename,a.contactData.rGender=a.contactData.rGender?"Male":"Female";var e=JSON.stringify(a.contactData);a.contactData.rGender="Male"==a.contactData.rGender,o["a"].SaveContactWithMapping(e).then((function(t){"Success"==t.data[0].Status?(a.$emit("close"),a.$parent.loadData("contacts"),null!=s?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Contact")]),"success",!0,a.$t("Alert")):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Contact")]),"success",!0,a.$t("Alert")),a.$parent.openCRMExistingContactModel())):"EXIST"==t.data[0].Status.toUpperCase()&&a.ShowAlert(a.$t("Email id already exist."),"warning",!0,a.$t("Alert"))}))}}))},isNumber:function(t){var e=t.which?t.which:t.keyCode;if("txtFax"!=t.target.id&&"txtZipCode"!=t.target.id||46!=e){if(!(e>31&&(e<48||e>57)&&46!=e))return!0;t.preventDefault()}else t.preventDefault()},fetchContactForForm:function(){var t=this;this.isLoading=!0;var e=t.iscontactDetails;if(null!=e&&0!=e){var a="id="+e;o["a"].GetSingleContactDetails(a).then((function(e){if(null!=e.data){t.contactData.contactId=e.data.CONTACT_ID,t.contactData.txtFirstName=e.data.FIRST_NAME,t.contactData.txtLastName=e.data.LAST_NAME,t.contactData.txtJobTitle=e.data.JOB_TITLE,t.contactData.txtEmailId=e.data.EMAIL_ID,t.contactData.txtBusinessPhone=e.data.BUSINESS_PHONE?e.data.BUSINESS_PHONE:"",t.contactData.txtHomePhone=e.data.HOME_PHONE?e.data.HOME_PHONE:"",t.contactData.txtMobilePhone=e.data.MOBILE_PHONE?e.data.MOBILE_PHONE:"",t.contactData.maritalStatus=null!=e.data.MARITAL_STATUS?e.data.MARITAL_STATUS:"",t.contactData.txtFax=e.data.FAX,t.contactData.txtPreferredContact=e.data.PREFERRED_CONTACT,t.contactData.txtAddressLine1=e.data.ADDRESS_STREET_1,t.contactData.txtAddressLine2=e.data.ADDRESS_STREET_2,t.contactData.txtAddressStreet3=e.data.ADDRESS_STREET_3,t.contactData.txtCity=e.data.CITY,t.contactData.txtState=e.data.STATE,t.contactData.txtZipCode=e.data.ZIPCODE,t.contactData.country=null==e.data.COUNTRY_ID||0==e.data.COUNTRY_ID?"":e.data.COUNTRY_ID,"false"==e.data.GENDER?t.contactData.rGender=!1:t.contactData.rGender="Male"==e.data.GENDER,t.contactData.txtSpouseName=e.data.SPOUSE_NAME,t.contactData.txtDateOfBirth=e.data.DATE_OF_BIRTH?t.$options.filters.formatDate(e.data.DATE_OF_BIRTH):"",t.contactData.txtPersonalNotes=e.data.PERSONAL_NOTES,t.contactData.Status=String(e.data.STATUS_ID),t.contactData.type=t.sourcename,t.contactData.txtGroupName=null!=e.data.GROUP_ID?e.data.GROUP_ID:"";var a={};a["contactId"]=t.contactData.contactId,a["txtFirstName"]=t.contactData.txtFirstName,a["txtLastName"]=t.contactData.txtLastName,a["txtJobTitle"]=t.contactData.txtJobTitle,a["txtEmailId"]=t.contactData.txtEmailId,a["txtBusinessPhone"]=t.contactData.txtBusinessPhone,a["txtHomePhone"]=t.contactData.txtHomePhone,a["txtMobilePhone"]=t.contactData.txtMobilePhone,a["maritalStatus"]=t.contactData.maritalStatus,a["txtFax"]=t.contactData.txtFax,a["txtPreferredContact"]=t.contactData.txtPreferredContact,a["txtAddressLine1"]=t.contactData.txtAddressLine1,a["txtAddressLine2"]=t.contactData.txtAddressLine2,a["txtAddressStreet3"]=t.contactData.txtAddressStreet3,a["txtCity"]=t.contactData.txtCity,a["txtState"]=t.contactData.txtState,a["txtZipCode"]=t.contactData.txtZipCode,a["country"]=t.contactData.country,a["rGender"]=t.contactData.rGender,a["txtSpouseName"]=t.contactData.txtSpouseName,a["txtDateOfBirth"]=t.contactData.txtDateOfBirth,a["txtPersonalNotes"]=t.contactData.txtPersonalNotes,a["Status"]=t.contactData.Status,a["type"]=t.contactData.type,a["txtGroupName"]=t.contactData.txtGroupName}t.ChangeMarital()}))}this.isLoading=!1},GetCountryDDLValues:function(){var t=this,e="id=&moduleName="+t.modulename+"&type=COUNTRIES";o["a"].getDDLData(e).then((function(e){null!=e.data&&(t.countryDDLData=e.data.DATA);var a=t.countryDDLData;0!=t.contactData.contactId&&null!=t.contactData.contactId||$.each(a,(function(e,a){"United States"==a.name&&(t.contactData.country=a.value)}))}))},FillDropdown:function(t,e){var a=this,s=t,i="ACCOUNT_STATE",n="id=&moduleName=CRM&type="+i+"&refId="+s;o["a"].getDDLData(n).then((function(t){var s=[];null!=t.data&&(s=t.data.DATA,a.stateDDLData=s,"EDIT"!=e&&(a.contactData.txtState=""))}))},GetStatusDDLData:function(){var t=this,e="id=&moduleName="+t.modulename+"&type=GLOBAL_STATUS";o["a"].getLeaOwnerBySearch(e).then((function(e){null!=e.data&&(t.statusDDLData=e.data.DATA)}))},GetGroupNameDDLData:function(){var t=this,e="id=&moduleName="+t.modulename+"&type=CRM_GROUP_NAME";o["a"].getDDLData(e).then((function(e){null!=e.data&&(t.groupDDLData=e.data.DATA)}))},CloseAddContactPopup:function(){var t=this,e=null;e=t.iscontactDetails,t.$emit("close"),null==e&&t.$parent.openCRMExistingContactModel()}}},l=n,r=a("2877"),c=Object(r["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},"2cbb":function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,".disableradio{opacity:0!important}",""]),t.exports=e},3709:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("AssociateProducts"))+" ")])]})),a("button",{staticClass:"close",attrs:{type:"button",href:"javascript:;"},on:{click:function(e){return t.closePopup()}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form_content"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 form-panel p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.SearchItemName,expression:"SearchItemName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("ItemName")},domProps:{value:t.SearchItemName},on:{input:function(e){e.target.composing||(t.SearchItemName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.SearchItemUniqueName,expression:"SearchItemUniqueName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("UniqueNameCode")},domProps:{value:t.SearchItemUniqueName},on:{input:function(e){e.target.composing||(t.SearchItemUniqueName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-left"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.FetchData()}}},[a("em",{staticClass:"fa fa-search"})]),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.cancelOrRefresh()}}},[a("em",{staticClass:"fa fa-refresh"})])])]),a("div",{staticClass:"p-actions float-right"},[a("a",{staticClass:"mr-2",attrs:{href:"javascript:void(0);",title:"",id:"ancmergeloaddata"},on:{click:function(e){return t.openProductModals()}}},[a("em",{staticClass:"fa fa-plus pr-1"}),t._v(t._s(t.$t("AddProduct"))+" ")])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divshowProductList"}},[t.isProductSelected?a("div",{staticClass:"form-group is-invalid"},[a("div",{staticClass:"invalid-feedback alert alert-danger",staticStyle:{display:"block"},attrs:{role:"alert"}},[t._v(" "+t._s(t.errorMessageForProduct)+" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.isProductSelected=!1}}},[a("em",{staticClass:"fa fa-close float-right text-danger"})])])]):t._e(),a("div",{staticClass:"listing mt-2"},[a("div",{staticClass:"table-responsive tableborder popuptablescroll_365",staticStyle:{"max-height":"550px!important","overflow-x":"auto"}},[t.noRecord?t._e():a("table",{staticClass:"table-sorting table table-bordered m-0",attrs:{"aria-describedby":"product"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[t._m(0),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemName"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemType"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Provider"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Price"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemCode"))+" ")])]),"yes"==t.INVENTORY_APPLICABLE?a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("TotalItems"))+" ")])]):t._e(),"yes"==t.INVENTORY_APPLICABLE?a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("AvailableQuantity"))+" ")])]):t._e(),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("CreatedBy")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("CreatedAt"))+" ")])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Status"))+" ")])])])]),a("tbody",t._l(t.ProductData,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[a("input",{staticClass:"chkItems",attrs:{type:"checkbox"},domProps:{value:e.asset_catalogue_id+("CRM_LEADS"==t.submodulecode||"CRM_DEALS"==t.submodulecode?"|"+e.AccountID:"")}})]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.asset_type))]),a("td",[t._v(t._s(e.ProviderName))]),a("td",[t._v(t._s(e.unit_price))]),a("td",[t._v(t._s(e.item_code))]),"yes"==t.INVENTORY_APPLICABLE?a("td",[t._v(t._s(e.number_of_item))]):t._e(),"yes"==t.INVENTORY_APPLICABLE?a("td",[t._v(t._s(e.available_items))]):t._e(),a("td",[t._v(t._s(e.created_by))]),a("td",[t._v(t._s(t.$options.filters.formatDate(e.created_at)))]),a("td",[a("span",{class:{"px-2 bg-success text-white d-block text-center":"Active"==e.status_id,"px-2 bg-danger text-white d-block text-center":"Inactive"==e.status_id}},[t._v(t._s(e.status_id))])]),a("td",{staticStyle:{display:"none"}},[t._v(t._s(e.AccountID))])])})),0)]),t.noRecord?a("div",{staticClass:"text-center text-danger",staticStyle:{padding:"20px"}},[t._v(t._s(t.$t("NoRecordfound"))+" ")]):t._e()]),t.noRecord?t._e():a("div",{staticClass:"border-top-paging"},[a("Pager",{attrs:{numberofrecords:t.TotalRecords,CurrentPageNumber:t.PageNumber,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next"},on:{SetCurrentPage:t.pagerMethod}})],1),a("div",[a("small",{staticClass:"float-right mt-2"},[a("a",{staticClass:"btn btn-success text-white",attrs:{id:"associateProduct",href:"javascript:;",title:t.$t("Associate")},on:{click:function(e){return t.addProduct()}}},[a("em",{staticClass:"fa fa-plus pr-1"}),t._v(t._s(t.$t("Associate"))+" ")])])])])])])])])])])],1),t.isaddProduct?a("AddProduct",{on:{close:function(e){t.isaddProduct=!1,t.FetchData()}}}):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{width:"50px !important"},attrs:{scope:"col"}},[a("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"}})])}],o=(a("ac1f"),a("00b4"),a("e9c4"),a("9769")),n=a("4555"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[t._v("Add Product")])]})),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body"},[a("Product",{attrs:{RequestType:"popup"},on:{close:function(e){return t.$emit("close")}}})],1)])])],1)},r=[],c=a("77cc"),d={components:{Product:c["default"]},data:function(){return{isLoading:!1}}},u=d,m=a("2877"),p=Object(m["a"])(u,l,r,!1,null,null,null),v=p.exports,f={components:{Pager:n["a"],AddProduct:v},props:{sourceid:{type:String,required:!0},submodulecode:{type:String,required:!0},companyid:{type:String,required:!0},modulename:{type:String,required:!0}},data:function(){return{isLoading:!1,ProductData:null,Headers:null,ProductCheckBoxes:[],SearchItemName:"",SearchItemUniqueName:"",TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,noRecord:!1,isProductSelected:!1,errorMessageForProduct:"",checkButtonClick:!1,INVENTORY_APPLICABLE:"No",isaddProduct:!1}},created:function(){this.FetchData(),this.GetPageSizeOption()},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},isBlank:function(t){return!t||/^\s*$/.test(t)},closePopup:function(){this.$emit("close")},formatDate:function(t){if(t)return moment(String(t),"YYYY-MM-DD").format(String(Globalize.culture().calendar.patterns.d).toUpperCase())},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)},SetCurrentPage:function(t){this.PageNumber=t,t>this.GroupEnd&&(this.GroupStart=t,this.GroupEnd=t+2),this.FetchData()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},SetPageSize:function(t){this.PageSize=t.target.value,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},addProduct:function(){var t=this;this.isProductSelected=!1,this.errorMessageForProduct="";var e=[];if(t.checkButtonClick=!0,$("#divshowProductList table tr td input[type='checkbox']:checked").each((function(){e.push($(this).val())})),e.length>0){var a={sourceId:this.sourceid,moduleName:this.modulename,subModuleCode:this.submodulecode,sourceName:"CRM_LEADS"==this.submodulecode?"lead_id":"CRM_ACCOUNTS"==this.submodulecode?"account_id":"deal_id",productIds:e},s=JSON.stringify(a);o["a"].SaveProductForMapping(s).then((function(e){"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("Product are successfully associated"),"success",!0,t.$t("Alert")),t.$emit("close"),t.$parent.loadData("products"),t.checkButtonClick=!1,$("#tab-products-content").addClass("active show"),$("#tab-products").addClass("active"),$("#tab-Details").removeClass("active"),$("#tab-timeline").removeClass("active"),$("#tab-notes").removeClass("active"),$("#tab-attachment").removeClass("active"),$("#tab-openactivities").removeClass("active"),$("#tab-emails").removeClass("active"),$("#tab-Contact").removeClass("active"),$("#tab-calls").removeClass("active"),$("#tab-CoOwner").removeClass("active"),$("#tab-lead-content").removeClass("active show"),$("#tab-timeline-content").removeClass("active show"),$("#tab-notes-content").removeClass("active show"),$("#tab-attachment-content").removeClass("active show"),$("#tab-openactivities-content").removeClass("active show"),$("#tab-emails-content").removeClass("active show"),$("#tab-Contact-content").removeClass("active show"),$("#tab-calls-content").removeClass("active show"),$("#tab-CoOwner-content").removeClass("active show"))}))}else t.checkButtonClick=!1,this.isProductSelected=!0,this.errorMessageForProduct="Please select any product first."},FetchData:function(){var t=this;t.isLoading=!0;var e="id="+this.sourceid+"&subModuleCode="+this.submodulecode+"&itemName="+this.SearchItemName+"&ItemUniqueName="+this.SearchItemUniqueName+"&pageSize="+this.PageSize+"&pageNumber="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp+"&statusId=1001&requestType=popup";o["a"].getItemListForAssociate(e).then((function(e){null!=e.data&&""!=e.data?(t.isLoading=!1,t.ProductData=e.data.data,t.TotalRecords=e.data.data[0].total_records,t.INVENTORY_APPLICABLE=e.data.data[0].INVENTORY_APPLICABLE,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.noRecord=!1):(t.noRecord=!0,t.TotalRecords=0),setTimeout((function(){t.CheckBoxBootstrap()}),100)}))},cancelOrRefresh:function(){this.SearchItemName="",this.SearchItemUniqueName="",$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),this.FetchData()},GetPageSizeOption:function(){for(var t=[],e=10,a=e;a<e+95;a+=5)t.push(a);this.PageSizeOption=t},openProductModals:function(){var t=this;t.isaddProduct=!0}}},h=f,_=Object(m["a"])(h,s,i,!1,null,null,null);e["a"]=_.exports},"3b1bd":function(t,e,a){"use strict";a("b6c5")},4555:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.TotalPages>0?a("div",{staticClass:"nu-paging"},[a("nav",{attrs:{"aria-label":"Page navigation example col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"}},[a("ul",{staticClass:"pagination row"},[a("li",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left choose-page"},[a("span",{staticClass:"mr-2"},[t._v("Show")]),a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.PageSize,expression:"PageSize"}],staticClass:"form-control form-control-sm",attrs:{id:"pageSize",name:"pageSize"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.PageSize=e.target.multiple?a:a[0]},t.SetPageSize]}},t._l(t.PageSizeOption,(function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(t._s(e))])})),0)]),a("span",{staticClass:"ml-2"},[t._v(t._s(t.$t("PagingText",[(t.CurrentPage-1)*t.PageSize+1,t.PageSize*t.CurrentPage>t.TotalRecords?t.TotalRecords:t.PageSize*t.CurrentPage,t.TotalRecords])))])]),a("li",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[t.TotalPages>1?a("ul",{staticClass:"paging-count"},[a("li",{staticClass:"page-item"},[1!=t.CurrentPage?a("a",{staticClass:"page-link first",attrs:{title:t.firstText,href:"javascript:;",val:"1"},on:{click:function(e){return t.SetCurrentPage(1)}}},[t._v(t._s(t.firstText))]):t._e(),1==t.CurrentPage?a("a",{staticClass:"page-link first disabled",attrs:{title:t.firstText,val:"1"}},[t._v(t._s(t.firstText))]):t._e()]),a("li",{staticClass:"page-item"},[1!=t.CurrentPage?a("a",{staticClass:"page-link previous",attrs:{title:t.prevText,href:"javascript:;"},on:{click:function(e){return t.SetCurrentPage(t.CurrentPage-1)}}},[t._v(t._s(t.prevText))]):t._e(),1==t.CurrentPage?a("a",{staticClass:"page-link previous disabled",attrs:{title:t.prevText}},[t._v(t._s(t.prevText))]):t._e()]),t._l(t.TotalPages,(function(e,s){return[e>=t.GroupStart&&e<=t.GroupEnd?a("li",{key:s,staticClass:"page-item"},[s+1==t.CurrentPage?a("a",{staticClass:"page-link active",attrs:{href:"javascript:;"}},[t._v(t._s(s+1))]):t._e(),s+1!=t.CurrentPage?a("a",{staticClass:"page-link",attrs:{href:"javascript:;",val:s},on:{click:function(e){return t.SetCurrentPage(s+1)}}},[t._v(t._s(s+1))]):t._e()]):t._e()]})),a("li",{staticClass:"page-item"},[t.CurrentPage<t.TotalPages?a("a",{staticClass:"page-link next",attrs:{title:t.nextText,href:"javascript:;"},on:{click:function(e){return t.SetCurrentPage(t.CurrentPage+1)}}},[t._v(t._s(t.nextText))]):t._e(),t.CurrentPage>=t.TotalPages?a("a",{staticClass:"page-link disabled next",attrs:{title:t.nextText}},[t._v(t._s(t.nextText))]):t._e()]),a("li",{staticClass:"page-item"},[t.CurrentPage!=t.TotalPages?a("a",{staticClass:"page-link next",attrs:{title:t.lastText,href:"javascript:;",val:t.TotalPages},on:{click:function(e){return t.SetCurrentPage(t.TotalPages)}}},[t._v(t._s(t.lastText))]):t._e(),t.CurrentPage==t.TotalPages?a("a",{staticClass:"page-link next disabled",attrs:{title:t.lastText,val:t.TotalPages}},[t._v(t._s(t.lastText))]):t._e()])],2):t._e()])])])]):t._e()},i=[],o=(a("a9e3"),{props:{numberofrecords:{type:Number,required:!0},prevText:{type:String,required:!0},nextText:{type:String,required:!0},firstText:{type:String,required:!0},lastText:{type:String,required:!0},callbackfunction:{type:Function},CurrentPageNumber:{type:Number}},data:function(){return{TotalRecords:0,PageNumber:1,PageSize:10,PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,LastPage:!1}},watch:{numberofrecords:function(t){this.CurrentPage>this.PageNumber&&(this.CurrentPage=this.PageNumber),this.TotalRecords=t,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.TotalPages==this.PageNumber&&this.PageNumber>3?(this.GroupStart=this.PageNumber-2,this.GroupEnd=this.PageNumber):this.TotalPages>this.PageNumber&&this.PageNumber>=3?(this.GroupStart=this.PageNumber-1,this.GroupEnd=this.PageNumber+1):(this.GroupStart=1,this.GroupEnd=3)},CurrentPageNumber:function(t){var e=this;e.CurrentPage=t,1==t&&e.SetCurrentPage(t)}},created:function(){this.GetPageSizeOption()},methods:{GetData:function(){this.$emit("SetCurrentPage",{PageNumber:this.PageNumber,PageSize:this.PageSize}),"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction&&this.callbackfunction()},SetPageSize:function(t){this.PageSize=t.target.value,this.PageNumber=1,this.CurrentPage=this.PageNumber,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.GetData()},SetCurrentPage:function(t){this.PageNumber=t,this.CurrentPage=t,this.TotalPages==this.PageNumber&&this.PageNumber>3?(this.GroupStart=this.PageNumber-2,this.GroupEnd=this.PageNumber):this.TotalPages>this.PageNumber&&this.PageNumber>=3?(this.GroupStart=this.PageNumber-1,this.GroupEnd=this.PageNumber+1):(this.GroupStart=1,this.GroupEnd=3),this.GetData()},GetPageSizeOption:function(){for(var t=[],e=10,a=e;a<e+95;a+=5)t.push(a);this.PageSizeOption=t}}}),n=o,l=a("2877"),r=Object(l["a"])(n,s,i,!1,null,null,null);e["a"]=r.exports},"4e82":function(t,e,a){"use strict";var s=a("23e7"),i=a("e330"),o=a("59ed"),n=a("7b0b"),l=a("07fa"),r=a("083a"),c=a("577e"),d=a("d039"),u=a("addb"),m=a("a640"),p=a("04d1"),v=a("d998"),f=a("2d00"),h=a("512c"),_=[],C=i(_.sort),b=i(_.push),g=d((function(){_.sort(void 0)})),A=d((function(){_.sort(null)})),S=m("sort"),y=!d((function(){if(f)return f<70;if(!(p&&p>3)){if(v)return!0;if(h)return h<603;var t,e,a,s,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(s=0;s<47;s++)_.push({k:e+s,v:a})}for(_.sort((function(t,e){return e.v-t.v})),s=0;s<_.length;s++)e=_[s].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),D=g||!A||!S||!y,x=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:c(e)>c(a)?1:-1}};s({target:"Array",proto:!0,forced:D},{sort:function(t){void 0!==t&&o(t);var e=n(this);if(y)return void 0===t?C(e):C(e,t);var a,s,i=[],c=l(e);for(s=0;s<c;s++)s in e&&b(i,e[s]);u(i,x(t)),a=i.length,s=0;while(s<a)e[s]=i[s++];while(s<c)r(e,s++);return e}})},"512c":function(t,e,a){var s=a("342f"),i=s.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},"555e":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("LeadOwner"))+" ")]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("SelectLeadOwner"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{id:"ddl_changeOwner",rules:{required:!0},label:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.leadid,expression:"leadid"}],class:{"form-control":!0,"is-invalid":s[0]},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.leadid=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select"))+" "+t._s(t.$t("OWNER")))]),t._l(t.LeadownerArray,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)]}}])})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-primary save-btn mr-1",attrs:{type:"button"},on:{click:t.submitChangeOwner}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("Save")))]),a("button",{staticClass:"btn btn-primary delete-btn",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"})])])])])])],1)])])])])])},i=[],o=(a("d3b7"),a("25f0"),a("e9c4"),a("9769")),n={props:{OwnerIds:null,ModuleType:""},data:function(){return{leadid:"",LeadownerArray:[],SubModuleCode:"CRM_LEADS"}},created:function(){this.GetLeadOwnerlist(),"Deal"==this.ModuleType&&(this.SubModuleCode="CRM_DEALS")},methods:{GetLeadOwnerlist:function(){var t=this,e="id=&moduleName=CRM&type=CRM_USERS";o["a"].getDDLData(e).then((function(e){var a=e.data;if(null!=a)return t.LeadownerArray=a.DATA,t.LeadownerArray}))},submitChangeOwner:function(){var t=this;console.log(t.$parent),t.$refs.form.validate().then((function(e){if(e)if("Campaign"==t.ModuleType){var a={leadOwner_id:t.leadid,campaign_id:t.$route.params.id,ModuleName:t.$route.params.moduleName,subModule_Code:t.$route.params.subModuleCode,contact_id:t.OwnerIds.toString()},s=JSON.stringify(a);o["a"].ConvertToLeadCampaign(s).then((function(e){"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.ShowAlert("Contact has been converted into lead successfully","success",!0,t.$t("Alert")),t.$emit("close")):t.ShowAlert("Something went wrong. Please retry!")}))}else{var i={sourceId:t.activitySourceID,moduleName:"CRM",subModuleCode:t.SubModuleCode,newleadID:t.leadid,checkedIds:t.OwnerIds,ModuleType:t.ModuleType},n=JSON.stringify(i);o["a"].ChangeOwner(n).then((function(e){"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("LeadOwnerChanged",["Deal"==t.ModuleType?t.$t("DealOwner"):t.$t("LeadOwner")]),"success",!0,t.$t("Alert")),t.$emit("close"))}))}}))}}},l=n,r=a("2877"),c=Object(r["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},"5b81":function(t,e,a){"use strict";var s=a("23e7"),i=a("c65b"),o=a("e330"),n=a("1d80"),l=a("1626"),r=a("44e7"),c=a("577e"),d=a("dc4a"),u=a("90d8"),m=a("0cb2"),p=a("b622"),v=a("c430"),f=p("replace"),h=TypeError,_=o("".indexOf),C=o("".replace),b=o("".slice),g=Math.max,A=function(t,e,a){return a>t.length?-1:""===e?a:_(t,e,a)};s({target:"String",proto:!0},{replaceAll:function(t,e){var a,s,o,p,S,y,D,x,$,w=n(this),k=0,N=0,L="";if(null!=t){if(a=r(t),a&&(s=c(n(u(t))),!~_(s,"g")))throw h("`.replaceAll` does not allow non-global regexes");if(o=d(t,f),o)return i(o,t,w,e);if(v&&a)return C(c(w),t,e)}p=c(w),S=c(t),y=l(e),y||(e=c(e)),D=S.length,x=g(1,D),k=A(p,S,0);while(-1!==k)$=y?c(e(S,k,p)):m(S,p,k,[],void 0,e),L+=b(p,N,k)+$,N=k+D,k=A(p,S,k+x);return N<p.length&&(L+=b(p,N)),L}})},"5c60":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.popupHeader))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){t.$emit("close"),t.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"ConvertLeadIntoDeal",attrs:{tag:"form"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.valid,i=e.errors;return[t.afterConvertToAccount||t.isConvertLeadToOthers?t._e():a("div",{class:{fade:t.isConvertLeadToOthers},attrs:{id:"divConvertLeadIntoAccount"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card-body p-0"},t._l(t.LeftViewData,(function(e,s){return a("div",{key:s,staticClass:"panel1"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[t._v(t._s(t.$t(e.group_name,"")))])])]),a("div",{staticClass:"row"},[t._l(e.LeftViewData,(function(e,s){return a("div",{key:s,staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[a("strong",[t._v(t._s(t.$t(e.name,e.display_name))+":")]),"date"==e.dt_code||"datetime"==e.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.$options.filters.formatDate(e.value)))]):t._e(),"decimal"==e.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.isBlank(e.value)?"0.00":t.$options.filters.currency(e.value)))]):t._e(),"date"!=e.dt_code&&"datetime"!=e.dt_code&&"decimal"!=e.dt_code&&"Lookup"!=e.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.isBlank(e.value)?"--":e.value))]):t._e(),"date"!=e.dt_code&&"datetime"!=e.dt_code&&"decimal"!=e.dt_code&&"Lookup"==e.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.isBlank(e.value)?"--":t.FilterDDLandNormalValue(e.value)))]):t._e()])])])})),a("div",{staticClass:"col-md-6"},[a("label",[a("strong",[t._v("Company Name:")]),a("span",{staticClass:"answer rightlabeltext",domProps:{innerHTML:t._s(t.LeadCompany)}})])])],2)])})),0)])]),a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v("New Account")])])]),a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"form-group row mt-2"},[a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",disabled:"InProgress"==t.LeadStatus,name:"Account",value:"1"},domProps:{checked:t._q(t.IsActiveAccount,"1")},on:{click:function(e){return t.ChangeAccount(t.IsActiveAccount)},change:function(e){t.IsActiveAccount="1"}}}),t._v(" Create New:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.NewAccName,expression:"NewAccName"}],staticClass:"form-control",attrs:{type:"text",readonly:2==t.IsActiveAccount,name:t.NewAccName},domProps:{value:t.NewAccName},on:{input:function(e){e.target.composing||(t.NewAccName=e.target.value)}}})]),a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",name:"Account",value:"2"},domProps:{checked:t._q(t.IsActiveAccount,"2")},on:{click:function(e){return t.ChangeAccount(t.IsActiveAccount)},change:function(e){t.IsActiveAccount="2"}}}),t._v(" Select Account:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.OldAccountId,expression:"OldAccountId"}],staticClass:"form-control",attrs:{readonly:1==t.IsActiveAccount},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.OldAccountId=e.target.multiple?a:a[0]},function(e){return t.getName(t.ACCountDDL,t.OldAccountId)}]}},t._l(t.ACCountDDL,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name))])})),0)])])])]),t.afterConvertToAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-2 p-0"},[""!=t.successMessage&&t.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-success alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[t._v("×")]),t._v(" "+t._s(t.successMessage)+" ")])]):t._e(),t.isContactForExistsAccount?t._e():a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-danger alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[t._v("×")]),t._v(" "+t._s(t.successMessage)+" ")])]),t.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 text-center"},[t.isConvertLeadToOthers?t._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(e){t.popupHeader="@Resources.AddContract",t.FetchData(t.createdAccountID,"CONTRACT")}}},[a("em",{staticClass:"fa fa-plus"}),t._v(t._s(t.$t("AddContract")))]),t.isConvertLeadToOthers?t._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(e){t.popupHeader="@Resources.Add @Resources.Deal",t.FetchData(t.createdAccountID,"DEAL")}}},[a("em",{staticClass:"fa fa-plus"}),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Deal")))])]):t._e()]):t._e(),t.isConvertLeadToOthers?a("div",{attrs:{id:"divConvertLeadIntoDealAfterAccount"}},[a("div",{staticClass:"d-flex flex-wrap",attrs:{id:"divMainDealData"}},[t._l(t.GroupBy,(function(e,s){return a("div",{key:s,staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t(e.group_name,e.group_display_name)))])])])]),a("div",{staticClass:"d-flex flex-wrap row"},t._l(e.dealData,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.dependent_show_type,expression:"item.dependent_show_type == 1"}],key:i,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==e.form_field_visibility||"contact_name"==e.name||"mobile_phone"==e.name||"home_phone"==e.name||"business_phone"==e.name||"lead_source_id"==e.name||"referred_by"==e.name,"col-lg-12 col-xl-12":"single"==e.layout_type,"col-lg-6 col-xl-6":"double"==e.layout_type,"col-lg-4 col-xl-4":"triple"==e.layout_type,"col-lg-3 col-xl-3":"four"==e.layout_type}},["NO"==e.form_field_visibility?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],attrs:{type:"hidden",id:e.name},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}):t._e(),"YES"==e.form_field_visibility?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t(e.label,e.display_name))+": "),e.is_required?a("span",{class:{"text-danger":e.is_required}},[t._v("*")]):t._e()]),"date"==e.dt_code?a("div",{staticClass:"input-group"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors,o=s.changed;return["date"==e.dt_code?a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,"min-date":"contract_end_date"==e.name?t.DependentOption[0].minDate:"billing_end_date"==e.name?t.DependentOption[1].minDate:t.getMinDate(),name:e.name},on:{dayclick:function(a){return t.DependentDateObject(e,e.value)},"update:modelValue":o},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.inputValue,o=e.inputEvents,n=e.togglePopover;return[a("input",t._g({class:{"form-control":!0,"is-invalid":i[0]},domProps:{value:s}},o)),a("div",{staticClass:"input-group-append",on:{click:function(t){return n()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}):t._e(),"date"==e.dt_code&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1):t._e(),"Lookup"!=e.picklist_options&&"date"!=e.dt_code&&"radio"!=e.dt_code&&"select"!=e.dt_code&&"textarea"!=e.dt_code&&"checkbox"!=e.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:t.GetValidation(e),name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=e.picklist_options&&i[0]},attrs:{type:"text",id:e.name,name:e.name,placeholder:t.GetFieldPlaceHolder(e.label,e.display_name,e.dt_code)},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),"Lookup"!=e.picklist_options&&"date"!=e.dt_code&&"radio"!=e.dt_code&&"select"!=e.dt_code&&"textarea"!=e.dt_code&&"checkbox"!=e.dt_code&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}):t._e(),"textarea"==e.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==e.dt_code&&i[0]},attrs:{id:e.name,name:e.name,placeholder:t.GetFieldPlaceHolder(e.label,e.display_name,e.dt_code)},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),"textarea"==e.dt_code&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}):t._e(),"radio"==e.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},t._l(t.MakeArray(e.picklist_options,e.dt_code),(function(i,o){return a("div",{key:o,staticClass:"form-check form-check-inline custom-control mx-2 p-0 custom-radio"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors,l=o.touched,r=o.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+e.custom_field_id+"_"+i.value,name:e.name,"data-resource":i.name,type:"radio"},domProps:{value:i.value,checked:i.value==e.value,checked:t._q(e.value,i.value)},on:{change:[function(a){return t.$set(e,"value",i.value)},function(a){return t.showDependentItem(e,i.value,s,t.index)}]}}),a("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-2 pt-1 dynamic",attrs:{for:"rdo_"+e.custom_field_id+"_"+i.value}},[t._v(t._s(i.name))]),"radio"==e.dt_code&&l&&r?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})],1)})),0)]):t._e(),"checkbox"==e.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},t._l(t.MakeArray(e.picklist_options,e.dt_code),(function(s,i){return a("div",{key:i,staticClass:"custom-control custom-checkbox"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+e.custom_field_id+"_"+s.value,name:e.name,"data-resource-id":s.name,type:"checkbox"},domProps:{value:s.value,checked:Array.isArray(e.value)?t._i(e.value,s.value)>-1:e.value},on:{change:function(a){var i=e.value,o=a.target,n=!!o.checked;if(Array.isArray(i)){var l=s.value,r=t._i(i,l);o.checked?r<0&&t.$set(e,"value",i.concat([l])):r>-1&&t.$set(e,"value",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(e,"value",n)}}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+e.custom_field_id+"_"+s.value}},[t._v(t._s(s.name))]),"checkbox"==e.dt_code&&o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})],1)})),0)]):t._e(),"Lookup"==e.picklist_options&&"select"==e.dt_code&&"custom"==e.dropdown_type?a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors,o=s.changed;return[a("Multiselect",{class:{"disable-all":!0,"is-invalid":"account_id"==e.name&&i[0]},attrs:{placeholder:t.GetFieldPlaceHolder(e.label,e.display_name,"select"),"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:t.MakeNormalArray(e.select_options),object:!0,label:"name",disabled:"account_id"==e.name||"status_id"==e.name},on:{"search-change":function(a){return t.onSearch(a,e)},select:function(a){return t.setSelectedValue(e,a)},"update:modelValue":o},model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}}),"Lookup"==e.picklist_options&&"select"==e.dt_code&&"custom"==e.dropdown_type&&"status_id"==e.name&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}):t._e(),"Lookup"==e.picklist_options&&"select"==e.dt_code&&"normal"==e.dropdown_type?a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],class:{"form-control":!0,"disable-all":!0,"is-invalid":"Lookup"==e.picklist_options&&"select"==e.dt_code&&"normal"==e.dropdown_type&&i[0]},attrs:{id:e.name,name:e.name,placeholder:t.GetFieldPlaceHolder(e.label,e.display_name,e.dt_code),disabled:"account_id"==e.name||"status_id"==e.name},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:"",selected:"selected"}},[t._v("Select")]),t._l(t.MakeNormalArray(e.select_options),(function(e,s){return a("option",{key:s,domProps:{value:String(e.value)}},[t._v(t._s(e.name))])}))],2),"Lookup"==e.picklist_options&&"select"==e.dt_code&&"normal"==e.dropdown_type&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}):t._e(),"Lookup"!=e.picklist_options&&"select"==e.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:{required:e.is_required},name:t.GetFormSchemaFieldName(e.name,e.display_name)},scopedSlots:t._u([{key:"default",fn:function(s){var i=s.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=e.picklist_options&&"select"==e.dt_code&&i[0]},attrs:{id:e.name,name:e.name},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?s:s[0])}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeArray(e.picklist_options,e.dt_code),(function(s,i){return a("option",{key:i,domProps:{selected:e.value==s.value,value:s.value}},[t._v(t._s(s.name))])}))],2),"Lookup"!=e.picklist_options&&"select"==e.dt_code&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:e.name}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)}):t._e()],1):t._e()])})),0)])})),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("Contacts")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-1 mb-1 p-0"},[t.noRecordForTab?t._e():a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{id:"table-contacts-content","aria-describedby":"modalconvertlead"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",{staticClass:"mr-3"},[t._v("#")])]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("FirstName")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("LastName")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Email")))])])]),a("tbody",t._l(t.contactsData,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.clientCheck,expression:"clientCheck"}],staticClass:"chkitems",attrs:{type:"radio",value:"-1",name:"radio_clients"},domProps:{checked:t._q(t.clientCheck,"-1")},on:{change:function(e){t.clientCheck="-1"}}})]),a("td",[t._v(t._s(e.first_name))]),a("td",[t._v(t._s(e.last_name))]),a("td",[t._v(t._s(e.email_id))])])})),0)])])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])]),t.isProjectShow?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("Select"))+" "+t._s(t.$t("Project")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 step1fixer"},[a("div",{staticClass:"table-responsive listing tableborder customborder_lightgrey"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{"aria-describedby":"modalproject"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ProjectTemplate")))])]),a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",{staticClass:"d-flex"},[t._v(t._s(t.$t("ProjectName"))),a("span",{staticClass:"text-danger"},[t._v("*")])])])])]),a("tbody",[a("tr",[a("td",[a("Field",{attrs:{name:"ProjectTemplate",rules:{required:!0},label:"Project Template"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.projectDetail.ProjectTemplate,expression:"projectDetail.ProjectTemplate"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.projectDetail,"ProjectTemplate",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("SelectTemplate")))]),t._l(t.ProjectTemplateListJson,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name))])}))],2),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectTemplate"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{name:"ProjectName",rules:{required:0==t.clientCheck},label:"Project Name"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.projectDetail.ProjectName,expression:"projectDetail.ProjectName"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{type:"text",placeholder:"ProjectName",name:"ProjectName"},domProps:{value:t.projectDetail.ProjectName},on:{keyup:function(e){return t.HideMessage()},input:function(e){e.target.composing||t.$set(t.projectDetail,"ProjectName",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectName"}},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)}),"1"==t.Duplicate?a("div",{staticClass:"text-danger"},[t._v(" "+t._s(t.existName)+" "+t._s(t.$t("AddContract")))]):t._e()],1)])])])])])]):t._e()],2)]):t._e(),a("div",{staticClass:"col-lg-12 float-left mt-2 px-0"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right py-3"},[!t.afterConvertToAccount&&t.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:t.GoPrevious}},[a("em",{staticClass:"fa  fa-angle-left mr-2"}),t._v(t._s(t.$t("Previous")))]):t._e(),t.afterConvertToAccount||t.isConvertLeadToOthers?t._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(e){t.popupHeader="Add Contract",t.convertLead("CONTRACT")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),t._v(t._s(t.$t("AddContract")))]),t.afterConvertToAccount||t.isConvertLeadToOthers?t._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(e){t.popupHeader="Add Deal",t.convertLead("DEAL")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Deal")))]),!t.afterConvertToAccount&&t.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",class:{disabled:t.SaveDisabled},attrs:{href:"javascript:;"},on:{click:function(e){return t.SubmitData(s,i)}}},[a("em",{staticClass:"fa fa-save mr-2"}),t._v(t._s(t.$t("Save")))]):t._e(),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:t.closePopup}},[a("em",{staticClass:"fa fa-times mr-2"}),t._v(t._s(t.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-3"},[a("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])]}}])})],1)])])],1)},i=[],o=a("53ca"),n=(a("99af"),a("b0c0"),a("498a"),a("ac1f"),a("00b4"),a("4de4"),a("d3b7"),a("7db0"),a("caad"),a("2532"),a("5319"),a("e9c4"),a("9769")),l={props:{leadId:null,moduleName:null,subModuleCode:null,callFrom:null},data:function(){return{isLoading:!1,noRecordLeadConvert:!1,leadConvertContactsData:null,LeadConvertContactsHeader:null,afterConvertToAccount:!1,labelForAdd:"",isSelected:!1,isErrorMessage:"",accountName:"",SortBy:"",SortExp:"",PageSize:50,PageNumber:1,dealData:[],GroupBy:[],isConvertLeadToOthers:!1,createdAccountID:0,successMessage:"",contactListForAddDeal:[],saveFor:"",submited:!1,clientData:[],ProjectTemplateListJson:[],clientCheck:-1,popupHeader:"Convert Lead",Duplicate:"0",existName:"",SaveDisabled:!1,projectDetail:{ProjectName:"",ProjectTemplate:""},DependentOption:[{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}],isProjectShow:!1,isContactForExistsAccount:!0,LeftViewData:[],AccName:"",NewAccName:"",ACCountDDL:[],OldAccountId:0,IsActiveAccount:0,contactId:0,LeadStatus:"",LeadCompany:"",Leadaddr1:"",Leadaddr2:"",Leadcity:"",Leadzip:"",Leadstate:"",contactsData:[],contactsHeader:[],noRecordForTab:!1,dataToConvertLead:{},leadName:"",clienFirstName:"",clientLastName:"",clientaddr1:"",clientaddr2:"",clientcity:"",clientstate:"",clientzip:"",clientcompany:"",defaultemailid:null,popover:{visibility:"click"}}},created:function(){this.fetchData(),this.fetchConvertLeadContacts(),this.accountName=this.leadName,this.GetProjectTemplatelist(),this.fetchContacts()},methods:{fetchData:function(){var t="id=".concat(this.leadId,"&refId=").concat(this.leadId,"&moduleName=").concat(this.moduleName,"&subModuleCode=").concat(this.subModuleCode),e=this;e.isLoading=!0,n["a"].FormLayoutView(t).then((function(t){e.isLoading=!1;var a=t.data.LEFTDATA;a=$.grep(a,(function(t,e){return"YES"==t.form_field_visibility})),null!=a&&a.length>0&&($.grep(a,(function(t,a){"role_title_id"==t.name&&(e.dataToConvertLead.roletitle=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value),"home_phone"==t.name&&(e.dataToConvertLead.home_phone=t.value),"business_phone"==t.name&&(e.dataToConvertLead.business_phone=t.value),"contact_number"==t.name&&(e.dataToConvertLead.contact_number=t.value),"account_id"==t.name&&(e.dataToConvertLead.account_id=t.value),"channel_id"==t.name&&(e.dataToConvertLead.lead_source_id=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value),"industry_type_id"==t.name&&(e.dataToConvertLead.industry_type_id=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value),"lead_country"==t.name&&(e.dataToConvertLead.lead_country=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value),"lead_state"==t.name&&(e.dataToConvertLead.lead_state=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value),"external_source_id"==t.name?e.dataToConvertLead.referred_by=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value:"status_id"==t.name?e.LeadStatus=e.FilterDDLandNormalValue(t.value):"client_first_name"==t.name?e.clienFirstName=null!=t.value?t.value:"":"client_last_name"==t.name?e.clientLastName=null!=t.value?t.value:"":"lead_address1"==t.name?e.clientaddr1=null!=t.value?t.value:"":"lead_address2"==t.name?e.clientaddr2=null!=t.value?t.value:"":"lead_city"==t.name?e.clientcity=null!=t.value?t.value:"":"lead_state"==t.name?e.clientstate=null!=t.value?JSON.parse(t.value)[0].name:"":"lead_zipcode"==t.name?e.clientzip=null!=t.value?t.value:"":"lead_company_name"==t.name?e.clientcompany=null!=t.value?t.value:"":"client_email"==t.name?e.defaultemailid=null!=t.value?t.value:"":"expected_close_date"==t.name?e.dataToConvertLead.closing_date=t.value:"money_value"==t.name?e.dataToConvertLead.ammount=t.value:"campaign_id"==t.name?e.dataToConvertLead.campaign_id=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value:"lead_owner_id"==t.name&&(e.dataToConvertLead.lead_owner=t.value),"commission_type"==t.name&&""!=$.trim(t.value)&&(t.form_field_visibility="YES",t.display_order=20),"agreement_type"==t.name&&""!=$.trim(t.value)&&(t.form_field_visibility="YES",t.display_order=19)})),""==e.leadName&&(e.leadName=e.clienFirstName+" "+e.clientLastName),e.dataToConvertLead.lead_name=e.leadName)}))},GetLocalizedValue:function(t,e){try{if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}catch(s){console.log(s)}},ChangeAccount:function(t){this.createdAccountID="2"==t?0:this.OldAccountId},fetchContacts:function(){var t=this;t.isLoading=!0;var e="sourceid=".concat(t.leadId,"&submodulecode=CRM_LEADS");n["a"].PrimaryContactDetails(e).then((function(e){t.isLoading=!1,null!=e.data?(t.contactsData=e.data.data,t.contactsHeader=e.data.schema,setTimeout((function(){t.CheckBoxBootstrap()}),100),t.noRecordForTab=!1):(t.noRecordForTab=!0,t.contactsData=null)}))},getName:function(t,e){var a=t.filter((function(t){return t.value==e}));this.AccName=a[0].name,this.createdAccountID=e},GetAssociatedAccounts:function(t){var e=this,a="id=&moduleName=CRM&type=CONTACT_ACCOUNTS&refId=".concat(t);n["a"].getDDLData(a).then((function(t){var a=[];if(null!=t.data&&""!=t.data&&(a=t.data.DATA),e.ACCountDDL=a,a.length>0)if(e.OldAccountId=a[0],e.AccName=a[0].name,e.createdAccountID>0){e.OldAccountId=e.createdAccountID,e.IsActiveAccount=2;var s=a.filter((function(t){return t.value==e.createdAccountID}));null!=s&&s.length>0?e.AccName=s[0].name:null!=a&&a.length>0&&(e.createdAccountID=a[0],e.AccName=a[0].name)}else e.createdAccountID=e.OldAccountId,e.IsActiveAccount=1;else e.IsActiveAccount=1}))},DependentDateObject:function(t,e){if("contract_start_date"==t.name){var a=new Date;a="undefined"!==typeof e&&""!=e?new Date(Date.parse(e)):new Date(Date.now()),this.DependentOption[0]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(t,e){$.each(e.Data,(function(t,e){"contract_end_date"==e.name&&(e.value="")}))}))}else if("billing_start_date"==t.name){a=new Date;a="undefined"!==typeof e&&""!=e?new Date(Date.parse(e)):new Date(Date.now()),this.DependentOption[1]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(t,e){$.each(e.Data,(function(t,e){"billing_end_date"==e.name&&(e.value="")}))}))}var s=this;setTimeout((function(){var e=$('div[name="'.concat(t.name,'"]')),a=$('div[name="'.concat(t.name,'"] input:first')),i=e.attr("value");i?(a.removeClass("is-invalid"),a.parent().parent().find("span[name='".concat(t.name,"']")).removeClass("d-block").addClass("d-none")):(a.addClass("is-invalid"),a.parent().next().is("span")?a.parent().next().removeClass("d-none"):a.parent().parent().append('<span name="'.concat(t.name,'" class="invalid-feedback d-block">').concat(s.GetFormSchemaFieldName(t.name,t.display_name)," is required.</span>")))}),200)},HideMessage:function(){this.Duplicate=0,$("input[name='ProjectName']").removeClass("is-invalid")},isBlank:function(t){return!t||/^\s*$/.test(t)},GetProjectTemplatelist:function(){var t=this,e="id=&moduleName=CRM&type=PROJECT";n["a"].getDDLData(e).then((function(e){var a=e.data;if(null!=a)return t.ProjectTemplateListJson=a.DATA,t.ProjectTemplateListJson}))},onSearch:function(t,e,a){this.searchSelectData(t,this,e,a)},searchSelectData:function(t,e,a,s){this.ShowSearchData(t,e,a,s)},ShowSearchData:function(t,e,a,s){if("contact_id"==a.name&&"select"==dt_code&&null!=e.contactListForAddDeal){var i=[];return i=$.grep(e.contactListForAddDeal,(function(e,a){return e.first_name.includes(t)})),a.select_options==i}"undefined"==typeof s&&(s=0);var o="id=&moduleName="+e.moduleName+"&type="+a.field_code;"fill"==a.dependent_type&&(o+="&refId="+s),n["a"].getDDLData(o+"&search="+escape(t)).then((function(t){var e=t.data;if(null!=e)return a.select_options=e.DATA,a.select_options}))},setSelectedValue:function(t,e){var a=this;try{Array.isArray(e)?t.value="object"===Object(o["a"])(e[0])&&null!==e[0]?e[0].value:e[0]:(t.has_dependent>0&&$.each(a.GroupBy,$.proxy((function(s,i){$.each(i.Data,(function(s,i){i.parent_id==t.custom_field_id&&"fill"==i.dependent_type&&a.ShowSearchData("",a,i,e.value)}))}),this)),t.value=e)}catch(s){}},fetchConvertLeadContacts:function(){var t=this;t.isLoading=!0;var e=""!=$.trim(t.dataToConvertLead.account_id)?t.dataToConvertLead.account_id:"",a="",s="";t.createdAccountID=0,""!=e&&e>0&&(t.createdAccountID=e,s=e),a=t.subModuleCode,s=t.leadId;var i="id="+s+"&subModuleCode="+a+"&sortBy="+t.SortBy+"&sortExp="+t.SortExp+"&pageSize="+t.PageSize+"&pageNumber="+t.PageNumber,o="id="+t.leadId+"&moduleName=CRM&subModuleCode=CRM_LEADS";n["a"].ContactListing(i).then((function(e){if(t.isLoading=!1,null!=e.data)if(t.LeadConvertContactsHeader=e.data.schema,null!=e.data.data&&e.data.data.length>0){var a=e.data.data.filter((function(t){return 1==t.IsPrimary}));null!=a&&a.length>0?t.contactId=a[0].contact_id:(t.contactId=e.data.data[0].contact_id,e.data.data[0].IsPrimary=!0),t.leadConvertContactsData=e.data.data,setTimeout((function(){t.CheckBoxBootstrap()}),100),t.noRecordLeadConvert=!1}else t.noRecordLeadConvert=!0;else t.noRecordLeadConvert=!0})),n["a"].FormLayoutView(o).then((function(e){if(null!=e.data){var a=e.data.LEFTDATA;if(a=$.grep(a,(function(t,e){return"YES"==t.form_field_visibility})),null!=a&&a.length>0){var s=a[0].group_id,i="",o="",n="",l="",r="",c="",d="",u="",m="";$.each(a,$.proxy((function(e,p){var v=$.grep(t.LeftViewData,(function(t,e){return t.group_id==s}));if(0==v.length){var f=$.grep(a,(function(e,a){if("client_first_name"==e.name&&(i=e.value),"client_last_name"==e.name&&(o=e.value),"lead_address1"==e.name&&(n=e.value),"lead_address2"==e.name&&(l=e.value),"lead_city"==e.name&&(r=e.value),"lead_company_name"==e.name&&(m=e.value),"lead_state"==e.name){d=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value;var p=JSON.parse(e.value);null!=p&&p.length>0&&(c=p[0].name)}if("lead_zipcode"==e.name&&(u=e.value),e.group_id==s&&("client_first_name"==e.name||"client_last_name"==e.name||"client_email"==e.name||"contact_number"==e.name||"home_phone"==e.name||"business_phone"==e.name))return e;t.LeadCompany=m,t.Leadaddr1=n,t.Leadaddr2=l,t.Leadcity=r,t.Leadzip=u,t.Leadstate=d}));if(f.length>0){var h={group_id:s,group_name:f[0].group_name,LeftViewData:f};t.LeftViewData.push(h)}}s=p.group_id}),this)),t.NewAccName=""==m||null==m?$.trim($.trim(i)+" "+$.trim(o)+" "+$.trim(m)+" "+$.trim(n)+" "+$.trim(l)+" "+$.trim(r)+" "+$.trim(c)+" "+$.trim(u)):$.trim(m),t.NewAccName=t.NewAccName.replace(/ +(?= )/g,"")}}else t.noRecordLeadConvert=!0;setTimeout((function(){t.GetAssociatedAccounts(t.contactId)}),400)}))},getLeadContactsIFAssociatedAccountDontHaveContacts:function(t,e){var a=this;if(a.createdAccountID>0){var s="id="+t+"&subModuleCode="+e+"&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&pageSize="+a.PageSize+"&pageNumber="+a.PageNumber;n["a"].ContactListing(s).then((function(t){null!=t.data?(a.LeadConvertContactsHeader=t.data.schema,null!=t.data.data&&t.data.data.length>0?(a.leadConvertContactsData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),100),a.afterConvertToAccount=!0,a.convertLead(),a.noRecordLeadConvert=!1):a.noRecordLeadConvert=!0):a.noRecordLeadConvert=!0}))}},getClientData:function(t){var e={user_id:0,first_name:"",last_name:"",email_id:"",account_id:t};this.clientData.push(e)},FetchData:function(t,e){var a,s=[],i=this;i.isLoading=!0,i.createdAccountID>0?(i.contactListForAddDeal=[],$.each(i.leadConvertContactsData,(function(t,e){var a={name:e.first_name+" "+e.last_name,value:e.contact_id,first_value:null,second_value:null};s.push(e.contact_id),i.contactListForAddDeal.push(a)}))):$("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var t=this;s.push($(t).val());var e=[];if(e=$.grep(i.leadConvertContactsData,(function(e,a){return e.contact_id==$(t).val()})),e.length>0){var a={name:e[0].first_name+" "+e[0].last_name,value:e[0].contact_id,first_value:null,second_value:null};i.contactListForAddDeal.push(a)}}));var o="";"DEAL"==e?(i.isProjectShow=!1,a=[{id:t,name:"account_id"},{id:i.FilterDDLValueForID(i.dataToConvertLead.lead_owner),name:"deal_owner_id"}],i.labelForAdd='{{$t("Deal ")}} {{$t("Deal ")}}',o="CRM_DEALS"):"CONTRACT"==e&&(i.isProjectShow=!0,a=[{id:t,name:"account_id"}],i.labelForAdd="AddContract",o="CRM_CONTRACTS"),i.saveFor=e;var l=encodeURIComponent(JSON.stringify(a)),r="moduleName=CRM&subModuleCode="+o+"&otherData="+l;n["a"].getFormLayout(r).then((function(a){if(i.isLoading=!1,i.GroupBy=[],i.dealData=a.data.data,null!=i.dealData&&i.dealData.length>0){var s=i.dealData[0].group_id;$.each(i.dealData,$.proxy((function(a,o){s=o.group_id;var n=$.grep(i.GroupBy,(function(t){return t.group_id==s}));if(0==n.length){var l=$.grep(i.dealData,(function(t){return t.group_id==s}));if(t>0&&$.each(l,(function(a,s){if("select"==s.dt_code)try{s.value=s.value.trim()}catch(n){console.log("value is null while trimming")}if("Lookup"==s.picklist_options&&(s.select_options=i.MakeNormalArray(s.select_options),s.select_value=s.select_options,"account_id"==s.name&&(s.value=s.select_options.find((function(e){return e.value==t})))),"Lookup"==s.picklist_options&&"custom"==s.dropdown_type&&s.select_options&&""==s.value&&(s.value=s.select_options[0]),"lead_id"==s.name&&(s.value=i.leadId),"DEAL"==e)"closing_date"==s.name&&(s.value=null!=i.dataToConvertLead.closing_date&&i.dataToConvertLead.closing_date.length>0?i.dataToConvertLead.closing_date:""),"deal_name"==s.name&&(s.value=1==i.IsActiveAccount?i.NewAccName:i.AccName),"deal_name"==s.name&&(s.value=i.dataToConvertLead.lead_name),"email_id"==s.name&&(s.value=i.dataToConvertLead.email_id),"amount"==s.name&&(s.value=null!=i.dataToConvertLead.ammount&&i.dataToConvertLead.ammount.length>0?i.dataToConvertLead.ammount:""),"Lookup"==s.picklist_options&&"status_id"==s.name&&(s.value=1001),"campaign_id"==s.name&&(s.value=i.dataToConvertLead.campaign_id),"Lookup"==s.picklist_options&&"contact_name"==s.name?(s.select_options=i.contactListForAddDeal,null!=i.contactsData&&i.contactsData.length>0&&(s.value=i.contactsData[0].contact_id)):"Lookup"==s.picklist_options&&"lead_source_id"==s.name?s.value=i.dataToConvertLead.lead_source_id:"Lookup"==s.picklist_options&&"referred_by"==s.name?s.value=i.dataToConvertLead.referred_by:"deal_address1"==s.name?s.value=i.clientaddr1:"deal_address2"==s.name?s.value=i.clientaddr2:"deal_city"==s.name?s.value=i.clientcity:"deal_state"==s.name?s.value=i.dataToConvertLead.lead_state:"deal_zipcode"==s.name?s.value=i.clientzip:"deal_country"==s.name?s.value=i.dataToConvertLead.lead_country:"deal_company_name"==s.name?s.value=i.clientcompany:"industry_type_id"==s.name?s.value=i.dataToConvertLead.industry_type_id:"role_title_id"==s.name?s.value=i.dataToConvertLead.roletitle:"email_id"==s.name?s.value=i.defaultemailid:"home_phone"==s.name?s.value=i.dataToConvertLead.home_phone:"business_phone"==s.name?s.value=i.dataToConvertLead.business_phone:"mobile_phone"==s.name&&(s.value=i.dataToConvertLead.contact_number);else if("CONTRACT"==e){if("contract_start_date"!=s.name&&"contract_end_date"!=s.name||(s.value=null!=i.dataToConvertLead.closing_date&&i.dataToConvertLead.closing_date.length>0?i.$options.filters.formatDate(i.dataToConvertLead.closing_date):"",s.value=new Date(Date.parse(s.value))),"contract_name"==s.name&&(s.value=i.accountName),"total_price"==s.name){s.value=null!=i.dataToConvertLead.ammount&&i.dataToConvertLead.ammount.length>0?i.dataToConvertLead.ammount:"";var o=s.value;null==o&&(o=0),o+="",o.includes(".")&&(s.length=s.length+3)}"Lookup"==s.picklist_options&&"status_id"==s.name&&(s.value=1001)}})),l.length>0){var r={group_id:s,group_name:l[0].group_name,dealData:l};i.GroupBy.push(r)}}}),this)),i.isConvertLeadToOthers=!0,i.afterConvertToAccount=!1}setTimeout((function(){$("div [name=account_id]").find(".vs__actions .clear").html("")}),600),setTimeout((function(){i.CheckBoxBootstrap()}),100),setTimeout((function(){i.RadioButtonBootstrap()}),500)})),$("#status_id option:selected").text("Select")},SubmitData:function(t,e){var a=this,s=this,i=!1,o=s.projectDetail.ProjectName;s.submited=!0,s.Duplicate=0,s.$refs.ConvertLeadIntoDeal.validate().then((function(t){if(t){s.isLoading=!0,s.SaveDisabled=!0;var e=s.dealData,l=[],r=[],c=$("input[name='radio_clients']:checked").val(),d=$.grep(s.clientData,(function(t,e){return t.user_id==c}));if(c)if(""!=o){var u="name="+o+"&type=PROJECT";n["a"].CheckDuplicate(u).then((function(t){var a=t.data;if(null!=a&&(s.existName=o,s.Duplicate=a,1==s.Duplicate&&($("input[name='ProjectName']").addClass("is-invalid"),i=!0,s.SaveDisabled=!1),!i||"DEAL"==s.saveFor)){$.each(e,(function(t,e){var a={field_name:e.name,required:e.is_required,length:e.length,type:e.validation_type};if("account_id"==e.name)var s={field_name:e.name,field_value:e.value.value,custom_field_id:e.custom_field_id};else s={field_name:e.name,field_value:e.value,custom_field_id:e.custom_field_id};l.push(s),r.push(a)}));var c={data:l,validation:r,clientData:d,ProjectDetail:s.projectDetail},u=JSON.stringify(c),m="DEAL"==s.saveFor?"PostDeal":"PostContract";n["a"].PostDealOrContract(m,u).then((function(t){s.isLoading=!1,"1"==t.data[0].Code?(s.$emit("close"),s.ShowAlert(s.$t("AddedSuccess",[s.$t("DEAL"==s.saveFor?"Deal":"Contract")]),"success",!0,s.$t("Alert")),"LeadListing"==s.callFrom&&($("[id^='ChangeOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='CloseLeadId']").removeClass("enable").addClass("disabled"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"))):s.ShowAlert(s.$t("AddedError",[s.$t("DEAL"==s.saveFor?"Deal":"Contract")]),"failure",!0,s.$t("Alert")),s.SaveDisabled=!1}))}}))}else{$.each(e,(function(t,e){"deal_owner_id"!=e.name&&"account_id"!=e.name||(e.value=e.value.value);var a={field_name:e.name,required:e.is_required,length:e.length,type:e.validation_type},s={field_name:e.name,field_value:e.value,custom_field_id:e.custom_field_id};l.push(s),r.push(a)}));var m={data:l,validation:r,clientData:d},p=JSON.stringify(m);u="DEAL"==s.saveFor?"PostDeal":"PostContract";n["a"].PostDealOrContract(u,p).then((function(t){"1"==t.data[0].Code?(s.$emit("close"),s.ShowAlert(s.$t("AddedSuccess",[s.$t("DEAL"==s.saveFor?"Deal":"Contract")]),"success",!0,s.$t("Alert")),s.FetchData()):s.ShowAlert(s.$t("AddedError",[s.$t("DEAL"==s.saveFor?"Deal":"Contract")]),"failure",!0,s.$t("Alert")),s.SaveDisabled=!1})),s.Duplicate=0}else s.ShowAlert(s.$t("Please Select Contact"),"warning",!0,s.$t("Alert")),s.SaveDisabled=!1}else console.log(a.$refs.ConvertLeadIntoDeal.errors)}))},MakeNormalArray:function(t){if(t)try{return JSON.parse(t)}catch(e){return t}else t=[]},convertLead:function(t){var e=[],a=this,s="";if(a.clientData=[],a.createdAccountID>0?$.each(a.leadConvertContactsData,(function(t,s){var i={name:s.first_name+" "+s.last_name,value:s.contact_id,first_value:null,second_value:null};e.push(s.contact_id),a.contactListForAddDeal.push(i)})):($("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var t=this;e.push($(t).val());var s=[];if(s=$.grep(a.leadConvertContactsData,(function(e,a){return e.contact_id==$(t).val()})),s.length>0){var i={name:s[0].first_name+" "+s[0].last_name,value:s[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(i)}})),s=a.$t("LeadConvertSuccess")+a.$t("Lead")+a.$t("Account")),0==a.contactId)return a.ShowAlert("Please add contact first.","warning",!0,a.$t("Alert")),!1;var i=$.trim(1==a.IsActiveAccount?a.NewAccName:a.AccName);if(""==i)return a.ShowAlert("Please fill Account Name.","warning",!0,a.$t("Alert")),!1;if(e.length<1){e.push(a.contactId);var o=[];if(o=$.grep(a.leadConvertContactsData,(function(t,e){return t.contact_id==a.contactId})),o.length>0){var l={name:o[0].first_name+" "+o[0].last_name,value:o[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(l)}}if(e.length>0){a.accountName=i;var r={sourceId:a.leadId,moduleName:a.moduleName,subModuleCode:a.subModuleCode,accountName:a.accountName,contactIds:e,accountId:1==a.IsActiveAccount||""==$.trim(a.createdAccountID)?0:a.createdAccountID,company:a.LeadCompany,address1:a.Leadaddr1,address2:a.Leadaddr2,city:a.Leadcity,zip:a.Leadzip,state:a.Leadstate},c=JSON.stringify(r);n["a"].ConvertLead(c).then((function(e){if("Success"==e.data[0].Status){var i=a.MakeNormalArray(e.data[0].Value);a.successMessage=s,a.isConvertLeadToOthers=!0,a.createdAccountID=i.ACCOUNT,a.clientData=i.CLIENTS,a.getClientData(i.ACCOUNT),"DEAL"==t?setTimeout((function(){a.FetchData(i.ACCOUNT,"DEAL")}),300):"CONTRACT"==t&&setTimeout((function(){a.FetchData(i.ACCOUNT,"CONTRACT")}),300)}}))}else if(a.createdAccountID>0){var d=a.FilterDDLandNormalValue(a.dataToConvertLead.account_id);a.isContactForExistsAccount=!1,vm.$t("SubmitSuccess"),a.successMessage=a.$t("AccountIsNotAssciated")+d}else a.isErrorMessage=a.$t("PleaseSelectAnyRecordsForFurther"),a.isSelected=!0},closePopup:function(){var t=this,e={accntid:t.createdAccountID},a=JSON.stringify(e);n["a"].DeleteAccountBeforeDeal(a).then((function(t){console.log(t)})),t.isConvertLeadToOthers?(t.isConvertLeadToOthers=!1,t.$emit("close")):t.$emit("close")},GoPrevious:function(){var t=this,e={accntid:t.createdAccountID},a=JSON.stringify(e);n["a"].DeleteAccountBeforeDeal(a).then((function(t){console.log(t)})),t.isConvertLeadToOthers=!1,t.IsActiveAccount=1,t.showConvertLead=!0,$("div [name=account_id]").find(".vs__actions .clear").html("")},GetValidation:function(t){var e={};if(t.is_required&&(e["required"]=!0),t.length>0&&(e["max"]=t.length),"email"==t.validation_type&&(e["email"]=!0),"decimal"!=t.dt_code&&"float"!=t.dt_code||("ORIGNAL_CONVERSION_RATE"==t.name&&(e["min_value"]=0),"estimated_hours"!=t.name&&"estimated_cost"!=t.name&&"base_rate"!=t.name||(e["min_value"]=1),"base_rate"==t.name&&(e["max_value"]=9999.99)),"int"!=t.dt_code&&"bigint"!=t.dt_code||(e["numeric"]=!0),"url"==t.dt_code&&(e["url"]="require_protocol"),null!=t.regular_expression&&""!=t.regular_expression&&(e["regex"]=t.regular_expression),"project_named"==t.name&&""!=t.value){var a=/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/;e["regex"]=a}return e}}},r=l,c=(a("3b1bd"),a("2877")),d=Object(c["a"])(r,s,i,!1,null,null,null);e["a"]=d.exports},"5f4d":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("Contacts"))+" ")])]})),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form_content"},[a("div",{staticClass:"form-content mb-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-8 col-xl-8 float-left p-0"},[a("div",{staticClass:"form-group mb-0"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchByEmailOrName,expression:"searchByEmailOrName",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("searchByNameOrEmail")},domProps:{value:t.searchByEmailOrName},on:{input:function(e){e.target.composing||(t.searchByEmailOrName=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;"},on:{click:function(e){return t.FetchData("search")}}},[a("em",{staticClass:"fa fa-search"})]),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;"},on:{click:function(e){return t.cancelOrRefresh()}}},[a("em",{staticClass:"fa fa-refresh"})])])])])])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divshowContactList"}},[t.isContactSelected?a("div",{staticClass:"form-group is-invalid"},[a("div",{staticClass:"invalid-feedback alert alert-danger",staticStyle:{display:"block"},attrs:{role:"alert"}},[t._v(t._s(t.errorMessageForProduct)+" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){t.isContactSelected=!1}}},[a("em",{staticClass:"fa fa-close float-right text-danger"})])])]):t._e(),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(" "+t._s(t.$t("Contacts"))+" ")]),t._v(" "),a("small",{staticClass:"float-right"},[a("a",{staticClass:"mr-2",attrs:{href:"javascript:void(0);",title:"",id:"ancmergeloaddata"},on:{click:function(e){return t.openContactModals(null)}}},[a("em",{staticClass:"fa fa-plus pr-1"}),t._v(t._s(t.$t("AddContact"))+" ")])])])])]),a("div",{staticClass:"listing mt-2"},[a("div",{staticClass:"table-responsive tableborder popuptablescroll_365 table200th",staticStyle:{"max-height":"550px!important","overflow-x":"auto"}},[t.noRecord?t._e():a("table",{staticClass:"table-sorting table table-bordered m-0",attrs:{"aria-describedby":"existcontact"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[t._m(0),t._l(t.ModelHeaders,(function(e){return a("th",{attrs:{scope:"col"}},[e.VISIBLE?a("span",{class:{sort:e.SORTABLE,tb_headerSortUp:"ASC"==t.ModelSortExp&&t.ModelSortBy==e.COLUMN_NAME,tb_headerSortDown:"DESC"==t.ModelSortExp&&t.ModelSortBy==e.COLUMN_NAME},attrs:{id:e.COLUMN_NAME},on:{click:function(a){return t.sortdata(e.COLUMN_NAME)}}},[t._v(t._s(t.GetFormSchemaFieldName(e.COLUMN_NAME,e.DISPLAY_NAME)))]):t._e()])}))],2)]),a("tbody",t._l(t.ModelContactData,(function(e){return a("tr",[a("td",{staticClass:"text-center"},[a("input",{staticClass:"chkItems",attrs:{type:"checkbox"},domProps:{value:e.contact_id}})]),t._l(t.ModelHeaders,(function(s){return a("td",{class:{"text-center":"status_name"==s.COLUMN_NAME}},[s.VISIBLE?["date"==s.DATA_TYPE||"datetime"==s.DATA_TYPE?a("span",{class:{"px-2 bg-info text-white d-block":"status_name"==s.COLUMN_NAME&&"Active"==e[s.COLUMN_NAME],"px-2 bg-danger text-white d-block":"status_name"==s.COLUMN_NAME&&"Inactive"==e[s.COLUMN_NAME]}},[t._v(t._s(t._f("formatDate")(e[s.COLUMN_NAME])))]):a("span",{class:{"px-2 bg-info text-white d-block":"status_name"==s.COLUMN_NAME&&"Active"==e[s.COLUMN_NAME],"px-2 bg-danger text-white d-block":"status_name"==s.COLUMN_NAME&&"Inactive"==e[s.COLUMN_NAME]}},[t._v(t._s(e[s.COLUMN_NAME]))])]:t._e()],2)}))],2)})),0)]),t.noRecord?a("div",{staticClass:"text-center text-danger",staticStyle:{padding:"20px"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e()]),a("div",{staticClass:"border-top-pagi"},[a("Pager",{attrs:{numberofrecords:t.TotalRecords,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next"},on:{SetCurrentPage:t.pagerMethod}})],1),a("div",[a("small",{staticClass:"float-right mt-2"},[a("a",{staticClass:"btn btn-success text-white",class:{disabled:t.checkButtonClick},attrs:{id:"addModelProduct",href:"javascript:;",title:t.$t("Associate")},on:{click:function(e){!t.checkButtonClick&&t.addContact()}}},[a("em",{staticClass:"fa fa-plus pr-1"}),t._v(t._s(t.$t("Associate"))+" ")])])])])])])])])],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("th",{staticClass:"text-center",staticStyle:{width:"50px !important"},attrs:{scope:"col"}},[a("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"}})])}],o=(a("ac1f"),a("00b4"),a("e9c4"),a("9769")),n=a("4555"),l={props:{sourceid:{type:String,required:!0},submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},sourcename:{type:String,required:!0}},components:{Pager:n["a"]},data:function(){return{isLoading:!1,subModuleCode:"",sourceId:"",ModelContactData:null,ModelHeaders:null,ProductCheckBoxes:[],TotalRecords:0,PageNumber:1,PageSize:10,ModelSortBy:"",ModelSortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,noRecord:!1,searchByEmailOrName:"",isContactSelected:!1,errorMessageForProduct:"",checkButtonClick:!1}},created:function(){this.FetchData(),this.GetPageSizeOption()},methods:{isBlank:function(t){return!t||/^\s*$/.test(t)},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)},SetCurrentPage:function(t){this.PageNumber=t,t>this.GroupEnd&&(this.GroupStart=t,this.GroupEnd=t+2),this.FetchData()},sortdata:function(t){this.ModelSortBy=t;var e="ASC";"ASC"==this.ModelSortExp&&(e="DESC"),this.ModelSortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},SetPageSize:function(t){this.PageSize=t.target.value,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},addContact:function(){var t=this;t.isContactSelected=!1,t.errorMessageForProduct="";var e="";if(t.checkButtonClick=!0,$("#divshowContactList table tr td input[type='checkbox']:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),e.length>0){var a={sourceId:t.sourceid,moduleName:t.modulename,subModuleCode:t.submodulecode,sourceName:t.sourcename,contactIds:e},s=JSON.stringify(a);o["a"].SaveExistingContactWithMapping(s).then((function(e){"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("Contacts are successfully associated"),"success",!0,t.$t("Alert")),t.$emit("close"),t.$parent.loadData("contacts"),t.checkButtonClick=!1)}))}else t.checkButtonClick=!1,t.isContactSelected=!0,t.errorMessageForProduct="Please select any contact first."},cancelOrRefresh:function(){this.searchByEmailOrName="",$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),this.FetchData()},FetchData:function(t){this.isLoading=!0;var e=this;"undefined"==typeof t&&(t="");var a="id="+e.sourceid+"&subModuleCode="+e.submodulecode+"&First_Name="+e.searchByEmailOrName+"&pageSize="+e.PageSize+"&pageNumber="+("search"==t&&""!=e.searchByEmailOrName?1:e.PageNumber)+"&sortBy="+e.ModelSortBy+"&sortExp="+e.ModelSortExp+"&statusId=1001&requestType=popup";o["a"].ContactListing(a).then((function(t){e.isLoading=!1,null!=t.data&&t.data.data.length>0?(e.ModelContactData=t.data.data,e.ModelHeaders=t.data.schema,e.TotalRecords=t.data.data[0].total_records,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1):(e.noRecord=!0,e.TotalRecords=0),setTimeout((function(){e.CheckBoxBootstrap()}),100)}))},GetPageSizeOption:function(){for(var t=[],e=10,a=e;a<e+95;a+=5)t.push(a);this.PageSizeOption=t},openContactModals:function(t){var e=this;e.$emit("close"),e.$parent.openCRMContactModal(null)}}},r=l,c=a("2877"),d=Object(c["a"])(r,s,i,!1,null,null,null);e["a"]=d.exports},6279:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.noRecordForTab?t._e():a("div",{},[a("div",{staticClass:"table-responsive tableborder customborder_lightgrey float-left crm_rightpanelmaximumscroll_table_btns"},[a("table",{staticClass:"table table-bordered mb-0",attrs:{id:"table-call-content","aria-describedby":"crmcall"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Call"))+" "+t._s(t.$t("Type")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Call"))+" "+t._s(t.$t("Form")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Call"))+t._s(t.$t("To")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("EventStartTime")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("EventEndTime")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Duration")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Comment")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Status")))])]),t._v("' ")])]),a("tbody",t._l(t.calldata1,(function(e){return a("tr",{key:e},[a("td",[t._v(t._s(e.CALL_TYPE))]),a("td",[t._v(t._s(e.CALL_TO))]),a("td",[t._v(t._s(t.formatDateTime(e.START_TIME)))]),a("td",[t._v(t._s(t.formatDateTime(e.END_TIME)))]),a("td",[t._v(t._s(e.DURATION))]),a("td",[t._v(t._s(e.COMMENT))]),a("td",{staticClass:"text-center"},[a("span",{class:{"px-2 bg-success text-white d-block":"1001"==e.STATUS_ID}},[t._v(t._s(t.$t("Active")))])])])})),0)])])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(t._s(t.$t("NoRecordfound")))]):t._e()])},i=[],o=(a("ac1f"),a("5319"),{props:{calldata:null,sourceid:{type:String,required:!0}},data:function(){return{calldata1:[],noRecordForTab:!0}},watch:{calldata:function(t){var e=this;e.calldata1=t,e.noRecordForTab=!(null!=e.calldata1&&e.calldata1.length>0),setTimeout((function(){e.ResponsiveDataTable("table-call-content")}),500)}},methods:{formatDate:function(t){if(t)return moment(String(t),"YYYY-MM-DD").format(String("MM-dd-yyyy"))},formatDateTime:function(t){if(t)try{var e="h:mm A";e=String(e).replace("t","A").replace("t","");var a=new Date(moment(String(t)).year(),moment(String(t)).month(),moment(String(t)).date(),moment(String(t)).hours(),moment(String(t)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format(String("MM-dd-yyyy "+String(e)))}catch(s){e="h:mm A";return e=String(e).replace("t","a").replace("t",""),moment(String(t)).format(String("MM-dd-yyyy "+String(e)))}}}}),n=o,l=a("2877"),r=Object(l["a"])(n,s,i,!1,null,null,null);e["a"]=r.exports},"71ad":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"listing"},[t.NoRecordForTab?t._e():a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[a("div",{staticClass:"table-responsive tableborder customborder_lightgrey float-left crm_rightpanelmaximumscroll_table_btns"},[a("table",{staticClass:"table table-bordered mb-0",attrs:{id:"table-email-content","aria-describedby":"crmsendemail"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Subject")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Date")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Send"))+t._s(t.$t("To")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Send"))+t._s(t.$t("By")))])]),a("th",{staticClass:"text-center",staticStyle:{"max-width":"70px"},attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Status")))])])])]),a("tbody",t._l(t.EmailLogData,(function(e,s){return a("tr",{key:s},[a("td",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.openEmailModal(e)}}},[t._v(t._s(e.EMAIL_SUBJECT))])]),a("td",[t._v(t._s(t._f("formatDate")(e.EMAIL_DATE)))]),a("td",[t._v(t._s(e.EMAIL_TO))]),a("td",[t._v(t._s(e.EMAIL_SENT_BY))]),a("td",{staticClass:"text-center"},[a("span",{class:{"":!0,"bg-danger text-white d-block":"Pending"==e.MAIL_STATUS,"bg-success text-white d-block":"Sent"==e.MAIL_STATUS}},[t._v(t._s(e.MAIL_STATUS))])])])})),0)])])]),t.NoRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])},i=[],o={props:{emaildata:null},data:function(){return{EmailLogData:[],NoRecordForTab:!0,sendEmailModal:!1,modalItem:null}},watch:{emaildata:function(t){var e=this;e.EmailLogData=t,e.NoRecordForTab=!(null!=e.EmailLogData&&e.EmailLogData.length>0),setTimeout((function(){e.ResponsiveDataTable("table-email-content")}),500)}},methods:{openEmailModal:function(t){var e="AddEmail";null!=t&&(e="UpdateEmail"),"undefined"===typeof this.$parent.checkForAdditionalPermission||this.$parent.checkForAdditionalPermission(e)?this.$emit("GetEmailInfo",t):alertR(Globalize.localize("additionalOwnerAuthorityWarning"),!0,Globalize.localize("Alert"))}}},n=o,l=a("2877"),r=Object(l["a"])(n,s,i,!1,null,null,null);e["a"]=r.exports},"7df9":function(t,e,a){var s=a("2cbb");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("5d8ca9f6",s,!0,{sourceMap:!1,shadowMode:!1})},"97da":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"divMainFormData"}},[a("section",{staticClass:"main-content",attrs:{id:"main-content"}},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"left-menu-tab div-click-event hr_jobpost_a"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition"},[a("span",{staticClass:"p-name text-white textelipsis"},[t._v(t._s(t.$t("Lead")))])])]),a("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:1==t.activeKey},attrs:{"data-bs-target":"#tab-lead-content",href:"javascript:void(0)","data-bs-toggle":"tab",role:"tab",id:"tab-Details"},on:{click:function(e){t.loadData("timeline"),t.DisableButton()}}},[a("em",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true","aria-selected":"true"}}),t._v(" "+t._s(t.$t("Detail"))+" ")])]),t.checkForAdditionalPermission("ViewNotes")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:2==t.activeKey},attrs:{"data-bs-target":"#tab-notes-content",href:"javascript:void(0)",id:"tab-notes","data-bs-toggle":"tab",role:"tab"},on:{click:function(e){return t.loadData("notes")}}},[a("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("Note"))+" ")])]):t._e(),t.checkForAdditionalPermission("ViewAttachment")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:3==t.activeKey},attrs:{"data-bs-target":"#tab-attachment-content",href:"javascript:void(0)",id:"tab-attachment","data-bs-toggle":"tab",role:"tab"},on:{click:function(e){return t.loadData("attachments")}}},[a("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("Attachments"))+" ")])]):t._e(),t.checkForAdditionalPermission("ViewAcitvities")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:4==t.activeKey},attrs:{"data-bs-target":"#tab-openactivities-content",href:"javascript:void(0)",id:"tab-openactivities","data-bs-toggle":"tab",role:"tab","aria-selected":"false"},on:{click:function(e){return t.loadData("activities")}}},[a("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Activities"))+" ")])]):t._e(),t.checkForAdditionalPermission("ViewEmail")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:5==t.activeKey},attrs:{href:"javascript:void(0)",id:"tab-emails","data-bs-toggle":"tab",role:"tab","aria-selected":"false"},on:{click:function(e){return t.loadData("email")}}},[a("em",{staticClass:"fa fa-envelope",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Emails"))+" ")])]):t._e(),t.checkForAdditionalPermission("ViewContact")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:6==t.activeKey},attrs:{href:"javascript:void(0)",id:"tab-Contact","data-bs-toggle":"tab",role:"tab","aria-selected":"false"},on:{click:function(e){return t.loadData("contacts")}}},[a("em",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Contacts"))+" ")])]):t._e(),t.checkForAdditionalPermission("ViewProducts")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:7==t.activeKey},attrs:{href:"javascript:void(0)",id:"tab-products","data-bs-toggle":"tab",role:"tab"},on:{click:function(e){return t.loadData("products")}}},[a("em",{staticClass:"fa fa-shopping-cart",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("Products"))+" ")])]):t._e(),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:8==t.activeKey},attrs:{href:"javascript:void(0)",id:"tab-calls","data-bs-toggle":"tab",role:"tab"},on:{click:function(e){return t.loadData("calls")}}},[a("em",{staticClass:"fa fa-phone-square",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("Call"))+" "+t._s(t.$t("Details"))+" ")])]),t.checkForAdditionalPermission("ViewAdditionalOwner")?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link left-menu",class:{active:9==t.activeKey},attrs:{href:"javascript:void(0)",id:"tab-CoOwner","data-bs-toggle":"tab",role:"tab"},on:{click:function(e){return t.loadData("additionalleadowners")}}},[a("em",{staticClass:"fa fa-user-plus",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("AdditionalOwners"))+" ")])]):t._e()])]),a("div",{staticClass:"right-content hr_jobpost"},[a("div",{staticClass:"col-md-12 p-0 mb-2"},[a("div",{staticClass:"theme-primary partition p-actions-expand"},[a("span",{staticClass:"p-name text-white",attrs:{id:"span_ForSelectedTabName"}}),a("input",{attrs:{type:"hidden",id:"hdnActionName"},domProps:{value:t.Acctab}}),a("span",{staticClass:"p-actions float-right"},[a("RouterLink",{staticClass:"p-action-btn text-white float-right",attrs:{to:"/CRM/Index"}},[a("em",{staticClass:"fa fa-angle-double-left"}),a("br"),t._v(" "+t._s(t.$t("BacktoList"))+" ")]),t.isNotes&&"list"==t.NoteListType?a("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Card View"},on:{click:function(e){t.NoteListType="card"}}},[a("em",{staticClass:"fa fa-th-large"}),a("br"),t._v(" "+t._s(t.$t("CardView"))+" ")]):t._e(),t.isNotes&&"list"!=t.NoteListType?a("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"List View"},on:{click:function(e){t.NoteListType="list"}}},[a("em",{staticClass:"fa fa-list"}),a("br"),t._v(" "+t._s(t.$t("ListView"))+" ")]):t._e(),t.isNotes?a("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"",id:"ancaddnotesloaddata","data-toggle-tooltip":"tooltip","data-original-title":"Add Notes"},on:{click:function(e){return t.openShowNotePopup()}}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("AddNotes"))+" ")]):t._e(),"CRM_LEADS"!=t.$route.params.subModuleCode&&"CRM_DEALS"!=t.$route.params.subModuleCode||!t.isProduct?t._e():a("a",{staticClass:"p-action-btn text-white formbtn",class:{disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:"@Resources.AssociateProducts"},on:{click:t.openCRMProductModel}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("AssociateProducts"))+" ")]),"CRM_CAMPAIGNS"==t.$route.params.subModuleCode?a("a",{staticClass:"p-action-btn text-white formbtn mr-1",class:{disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:"@Resources.ConvertLead"},on:{click:t.ChangeCRMLeadOwnerCheck}},[a("em",{staticClass:"fa fa-retweet"}),a("br"),t._v(" "+t._s(t.$t("Convert"))+" ")]):t._e(),t.isContact?a("a",{class:{"p-action-btn text-white":!0,disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:"",id:"ancmergeloaddata","data-original-title":" @Resources.AssociateContact"},on:{click:function(e){return t.openCRMExistingContactModel()}}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("AssociateContact"))+" ")]):t._e(),t.isSendEmail?a("a",{class:{"p-action-btn text-white btn_email":!0},attrs:{href:"javascript:void(0)",title:"",id:"","data-original-title":"Send Email"},on:{click:function(e){return t.openCRMEmailModal(null)}}},[a("em",{staticClass:"fa fa-envelope"}),a("br"),t._v(" "+t._s(t.$t("SendEmail"))+" ")]):t._e(),t.isActivity?a("a",{class:{"p-action-btn text-white btn_add":!0},attrs:{href:"javascript:void(0)",title:"",id:"","data-original-title":"Add Task"},on:{click:function(e){return t.openAddTaskModel()}}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("AddTask"))+" ")]):t._e(),t.isActivity?a("a",{class:{"p-action-btn text-white btn_follow":!0},attrs:{href:"javascript:void(0)",title:"",id:"","data-original-title":"Follow Up"},on:{click:function(e){return t.openAddNewEvent()}}},[a("em",{staticClass:"fa fa-share"}),a("br"),t._v(" "+t._s(t.$t("FollowUp"))+" ")]):t._e(),t.isActivity?a("a",{class:{"p-action-btn text-white btn_call":!0},attrs:{href:"javascript:void(0)",title:"",id:"","data-original-title":"Schedule Call"},on:{click:function(e){return t.openCallEvent()}}},[a("em",{staticClass:"fa fa-phone"}),a("br"),t._v(" "+t._s(t.$t("Schedule"))+" "+t._s(t.$t("Call"))+" ")]):t._e(),t.isAttachment?a("a",{class:{"p-action-btn text-white":!0,disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:t.$t("UploadFile")},on:{click:function(e){return t.openCRMAttachmentModal(null)}}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("Add"))+" "+t._s(t.$t("Attachment"))+" ")]):t._e(),"Closed"!=t.LeadStatus&&"Inactive"!=t.LeadStatus&&"Draft"!=t.LeadStatus&&"Cancelled"!=t.LeadStatus?a("a",{staticClass:"p-action-btn text-white hr_jobpost_b",attrs:{href:"javascript:;",chkk:t.LeadStatus},on:{click:function(e){return t.openConvertLeadModel()}}},[a("em",{staticClass:"fa fa-retweet"}),a("br"),t._v(" "+t._s(t.$t("Convert"))+" ")]):t._e(),"Closed"!=t.LeadStatus&&"Cancelled"!=t.LeadStatus&&t.checkForAdditionalPermission("UpdateLead")?a("RouterLink",{staticClass:"p-action-btn text-white",attrs:{to:t.editUrl}},[a("em",{staticClass:"fa fa-pencil"}),a("br"),t._v(" "+t._s(t.$t("Edit"))+" "+t._s(t.$t("Lead"))+" ")]):t._e(),t.isOwner?a("a",{class:{"p-action-btn text-white":!0,disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;"},on:{click:function(e){return t.checkPrivilegeDetailsForOwner(e,null)}}},[a("em",{staticClass:"fa fa-plus"}),a("br"),t._v(" "+t._s(t.$t("AdditionalOwner"))+" ")]):t._e(),"Closed"==t.LeadStatus?a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;"},on:{click:function(e){return t.ReopenLead()}}},[a("em",{staticClass:"fa fa-refresh"}),a("br"),t._v(" "+t._s(t.$t("Reopen"))+" ")]):t._e()],1),t._m(0)])]),a("div",{staticClass:"tab-pane mb-0"},[a("div",{staticClass:"tab-content fsmtabcontrolMobileView",attrs:{id:"myTabContent"}},[t._m(1),a("div",{staticClass:"tab-pane p-0 pb-2 border-0",class:{"active show":1==t.activeKey},attrs:{role:"tabpanel",id:"tab-lead-content","aria-labelledby":"tab-lead-content"}},[a("div",{staticClass:"listing"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card mb-3 probx"},[a("div",{staticClass:"card-header"},[a("h2",[t._v(t._s(t.$t("Details")))]),t._m(2)]),a("div",{staticClass:"card-body"},t._l(t.LeftViewData,(function(e){return a("div",{staticClass:"panel1"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[t._v(" "+t._s(t.$t(e.group_name,"")))])])]),a("div",{staticClass:"row"},t._l(e.LeftViewData,(function(e,s){return a("div",{key:s,staticClass:"col-md-6 col-lg-3"},[a("div",{staticClass:"form-group"},[a("label",[a("strong",[t._v(" "+t._s(t.$t(e.name,e.display_name))+":")]),"date"==e.dt_code||"datetime"==e.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(" "+t._s(e.value))]):t._e(),"decimal"==e.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(" "+t._s(t._f("currency")(t.isBlank(e.value)?"0.00":e.value))+" ")]):t._e(),"date"!=e.dt_code&&"datetime"!=e.dt_code&&"decimal"!=e.dt_code&&"Lookup"!=e.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(" "+t._s(t.isBlank(e.value)?"--":e.value)+" ")]):t._e(),"date"!=e.dt_code&&"datetime"!=e.dt_code&&"decimal"!=e.dt_code&&"Lookup"==e.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(" "+t._s(t.isBlank(e.value)?"--":t.FilterDDLandNormalValue(e.value))+" ")]):t._e()])])])})),0)])})),0)]),a("div",{staticClass:"card mb-3 probx"},[a("div",{staticClass:"card-header"},[a("h2",[t._v("Timeline")]),a("div",{staticClass:"col-md-6 text-right pr-0 bottom_filter_button pt-0"},[a("a",{staticClass:"position-relative",staticStyle:{"z-index":"999"},attrs:{href:"javascript:;",id:"ancActivityExpandAllCollapseAll",title:t.$t("ExpandAllCollapseAll"),"data-toggle-tooltip":"tooltip"}},[t._v(t._s(t.$t("ExpandAllCollapseAll")))])])]),a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 mbspc",attrs:{id:"divconversationbox"}},[a("crmtimeline",{attrs:{timelinedata:t.timelinedata}})],1)])])])])])])]),a("div",{staticClass:"tab-pane fade p-0 pb-2 border-0",class:{"active show":2==t.activeKey},attrs:{id:"tab-notes-content",role:"tabpanel","aria-labelledby":"tab-notes-content"}},[t.noteData?a("crmnote",{attrs:{notedata:t.noteData,userid:t.userid,companyid:t.companyId,sourceid:t.$route.params.id,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,listtype:t.NoteListType,showNotePopUp:t.isShowNotePopup,callfrom:"quickViewAndNoteJS"}}):t._e()],1),a("div",{staticClass:"tab-pane fade p-0 pb-2 border-0",class:{"active show":3==t.activeKey},attrs:{id:"tab-attachment-content",role:"tabpanel","aria-labelledby":"tab-attachment-content"}},[a("crmattachment",{attrs:{attachmentdata:t.attachmentData,sourceid:t.$route.params.id}})],1),a("div",{staticClass:"tab-pane fade border-0 listing p-0",class:{"active show":4==t.activeKey},attrs:{id:"tab-openactivities-content",role:"tabpanel","aria-labelledby":"tab-openactivities-content"}},[a("input",{attrs:{id:"hdnshowspliticon",value:"1",type:"hidden"}}),t.noRecordForTab?t._e():a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"activitescontent"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Subject")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Activity"))+" "+t._s(t.$t("Type")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Activity"))+" "+t._s(t.$t("ScheduleDate")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Activity"))+" "+t._s(t.$t("OWNER")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("CreatedAt")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Status")))])]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",t._l(t.activitiesData,(function(e){return a("tr",[a("td",[a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.openActivityModal(e)}}},[t._v(t._s(e.followup_notification_subject))])]),a("td",["FollowUp"===e.activity_type?a("div",[t._v("Follow up")]):a("div",[t._v(t._s(e.activity_type))])]),a("td",[t._v(t._s(t._f("formatDate")(e.followup_notification_schedule)))]),a("td",[t._v(t._s(e.activity_owner))]),a("td",[t._v(t._s(t._f("formatDate")(e.created_at)))]),a("td",[a("span",{class:{"px-2 bg-success text-white d-block text-center":"Active"==e.status_name,"px-2 bg-danger text-white d-block text-center":"Inactive"==e.status_name}},[t._v(t._s(e.status_name))])]),a("td",{staticClass:"text-center single-action"},[a("a",{attrs:{href:"javascript:;",title:"Delete"},on:{click:function(a){return t.DeleteActivity(e)}}},[a("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0)])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[t._v(t._s(t.$t("NoRecordfound")))]):t._e()]),a("div",{staticClass:"tab-pane fade border-0 p-0",class:{"active show":5==t.activeKey},attrs:{id:"tab-emails-content",role:"tabpanel","aria-labelledby":"tab-emails-content"}},[a("crmsendemail",{attrs:{emaildata:t.EmailData},on:{GetEmailInfo:t.GetEmailInfo}})],1),a("div",{staticClass:"tab-pane fade p-0 border-0",class:{"active show":6==t.activeKey},attrs:{id:"tab-Contact-content",role:"tabpanel","aria-labelledby":"tab-Contact-content"}},[a("crmcontacttab",{attrs:{contactsdata:t.contactsData,contactsheader:t.contactsHeader,sourceid:t.$route.params.id,submodulecode:t.$route.params.subModuleCode,modulename:t.$route.params.moduleName,userinfo:t.userid,companyid:t.companyId}})],1),a("div",{staticClass:"tab-pane fade p-0 border-0",class:{"active show":7==t.activeKey},attrs:{role:"tabpanel","aria-labelledby":"tab-products-content",id:"tab-products-content"}},[a("crmproduct",{attrs:{productdata:t.productData,sourceid:t.$route.params.id,submodulecode:t.$route.params.subModuleCode,modulename:t.$route.params.moduleName,userinfo:t.userid,companyid:t.companyId,recordstatus:t.LeadStatus}})],1),a("div",{staticClass:"tab-pane fade border-0 p-0",class:{"active show":8==t.activeKey},attrs:{role:"tabpanel","aria-labelledby":"tab-calls-content",id:"tab-calls-content"}},[a("crmcall",{attrs:{calldata:t.callData,sourceid:t.$route.params.id,userinfo:t.userid,companyid:t.companyId}})],1),a("div",{staticClass:"tab-pane fade p-0 listing border-0",class:{"active show":9==t.activeKey},attrs:{role:"tabpanel","aria-labelledby":"tab-CoOwner-content",id:"tab-CoOwner-content"}},[t.noRecordForTab?t._e():a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-leadOwner-content","aria-describedby":"leaddetail"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("LeadOwner")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Department")))])]),a("th",{staticClass:"text-center",staticStyle:{"min-width":"100px!important"},attrs:{scope:"col","data-width":"50"}},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",t._l(t.additionalLeadOwners,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.USER_NAME))]),a("td",[t._v(t._s(e.DEPARTMENT_NAME))]),e.IS_DEFAULT?t._e():a("td",{staticClass:"text-center single-action"},[a("a",{class:{disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:t.$t("Edit")},on:{click:function(a){return t.openAddAdditionalOwner(e.LEAD_OWNER_ID)}}},[a("em",{staticClass:"fa fa-pencil text-success action-icon pr-2",class:{disabled:"Closed"==t.LeadStatus}})]),a("a",{class:{disabled:"Closed"==t.LeadStatus},attrs:{href:"javascript:;",title:t.$t("Remove")},on:{click:function(a){return t.deleteAdditionalOwner(e.LEAD_OWNER_ID)}}},[a("em",{staticClass:"fa fa-trash action-icon text-danger pr-2",class:{disabled:"Closed"==t.LeadStatus}})])]),e.IS_DEFAULT?a("td",{staticClass:"text-center"},[t._v(t._s(t.$t("Default"))+" "+t._s(t.$t("LeadOwner")))]):t._e()])})),0)])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border no-record"},[t._v(t._s(t.$t("LeadOwner")))]):t._e()])])])])],1),t.showAttachmentModal?a("modalattachment",{attrs:{userid:t.userid,companyid:t.companyId,id:t.$route.params.id,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,containername:t.containername,imagesizedata:""},on:{close:function(e){t.showAttachmentModal=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v("$t('Attachments')")])]):t._e(),t.showAddTaskModal?a("modaltask",{attrs:{modalTaskItem:t.modalTaskItem},on:{close:function(e){t.showAddTaskModal=!1,t.modalTaskItem=null}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("AddTask")))])]):t._e(),t.showAddEventModal?a("modalevent",{attrs:{modalFollowUpItem:t.modalFollowUpItem,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,sourceid:t.$route.params.id},on:{close:function(e){t.showAddEventModal=!1,t.modalFollowUpItem=null}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("FollowUp")))])]):t._e(),t.showCallModal?a("modalcall",{attrs:{modalCallItem:t.modalCallItem},on:{close:function(e){t.showCallModal=!1,t.modalCallItem=null}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Schedule"))+" "+t._s(t.$t("Call")))])]):t._e(),t.sendEmailModal?a("modalemail",{attrs:{email:t.email,userid:t.userid,companyid:t.companyId,id:t.$route.params.id,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,containername:t.containername,EmailInfo:t.EmailInfo},on:{close:function(e){t.sendEmailModal=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Email")))])]):t._e(),t.showExistingContactModal?a("modalexistingcontact",{attrs:{sourceid:t.$route.params.id,submodulecode:t.$route.params.subModuleCode,modulename:t.$route.params.moduleName,userinfo:t.userid,companyid:t.companyId,sourcename:"Lead"},on:{close:function(e){t.showExistingContactModal=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Contacts")))])]):t._e(),t.showContactModal?a("modalcontact",{attrs:{sourceid:t.$route.params.id,submodulecode:t.$route.params.subModuleCode,modulename:t.$route.params.moduleName,userinfo:t.userid,iscontactDetails:t.iscontactDetails,companyid:t.companyId,sourcename:"Lead"},on:{close:function(e){t.showContactModal=!1}}}):t._e(),t.showAdditionalOwnerPopup?a("addadditionalowner",{attrs:{subModuleCode:"CRM_LEADS"},on:{close:function(e){t.showAdditionalOwnerPopup=!1}}}):t._e(),t.showProductModal?a("modalproduct",{attrs:{sourceid:t.$route.params.id,submodulecode:t.$route.params.subModuleCode,modulename:t.$route.params.moduleName,userinfo:"userid",companyid:"companyId"},on:{close:function(e){t.showProductModal=!1}}},[a("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Products")))])]):t._e(),t.showConvertLead?a("modalconvertlead",{attrs:{leadId:t.$route.params.id,moduleName:t.$route.params.moduleName,subModuleCode:t.$route.params.subModuleCode,callFrom:"LeadDetail"},on:{close:t.closeConvertLead}}):t._e()],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"collapse-head-btns"},[a("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[a("em",{staticClass:"fa fa-angle-up text-white"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expand-list"},[a("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[a("em",{staticClass:"icon-solid arrow-solid-left text-white",staticStyle:{"font-size":"9pt"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cont_right"},[a("div",{staticClass:"bar"})])}],o=a("53ca"),n=(a("99af"),a("7db0"),a("d3b7"),a("4de4"),a("e9c4"),a("ac1f"),a("00b4"),a("b0c0"),a("498a"),a("4e82"),a("5319"),a("9769")),l=a("dd2a"),r=a("84a0"),c=a("3731"),d=a("71ad"),u=a("0a86"),m=a("ba51"),p=a("6279"),v=a("9dbd"),f=a("702f"),h=a("6c06"),_=a("a672"),C=a("d7fa"),b=a("5f4d"),g=a("200d"),A=a("3709"),S=a("a2a4"),y=a("5c60"),D={components:{crmtimeline:l["a"],crmnote:r["a"],crmattachment:c["a"],crmsendemail:d["a"],crmcontacttab:u["a"],crmproduct:m["a"],crmcall:p["a"],modalattachment:v["a"],modaltask:f["a"],modalevent:h["a"],modalcall:_["a"],modalemail:C["a"],modalexistingcontact:b["a"],modalcontact:g["a"],modalproduct:A["a"],addadditionalowner:S["a"],modalconvertlead:y["a"]},data:function(){return{activeKey:1,isNotes:!1,isActivity:!1,isAttachment:!1,isSendEmail:!1,isContact:!1,isProduct:!1,isOwner:!1,isDetailPage:!1,iscontactDetails:null,showExistingContactModal:!1,showContactModal:!1,showConvertLead:!1,showProductModal:!1,showAddTaskModal:!1,showAddEventModal:!1,showCallModal:!1,sendEmailModal:!1,showAttachmentModal:!1,LeftViewData:[],IsShow:!0,noteData:[],attachmentData:[],activitiesData:null,timelinedata:[],productData:null,callData:null,contactsData:[],contactsHeader:[],noRecordForTab:!1,isShowNoteDialogue:null,dataToConvertLead:{},noteText:"",leadName:"--",Acctab:"--",SortBy:"",SortExp:"",PageNumber:1,PageSize:100,LeadStatus:"",EmailData:[],modalItem:null,modalTaskItem:null,modalFollowUpItem:null,modalCallItem:null,modalDeleteItem:null,isView:!1,modal:null,defaultemailid:null,showAdditionalOwnerPopup:!1,additionalLeadOwners:[],additionalLeadOwnerId:null,additionalOwnerPermission:[],chkpermission:!1,isShowNotePopup:!1,expirydate:"",Count:0,clienFirstName:"",clientLastName:"",clientaddr1:"",clientaddr2:"",clientcity:"",clientstate:"",clientzip:"",clientcompany:"",userid:null,companyId:null,containername:null,email:null,EmailInfo:null,ApiURLEmail:"id=0&refId=".concat(this.$route.params.id,"&moduleName=").concat(this.$route.params.moduleName,"&subModuleCode=").concat(this.$route.params.subModuleCode),ApiURL:"id=".concat(this.$route.params.id,"&refId=").concat(this.$route.params.id,"&moduleName=").concat(this.$route.params.moduleName,"&subModuleCode=").concat(this.$route.params.subModuleCode),maxsize:"@TALYGEN.Models.ConfigurationRepository.GetConfigurationValueByKey(companyId, userid, 'CRM', 'CRMPerFileSize')",disallowedfiletypes:"@TALYGEN.Models.ConfigurationRepository.GetConfigurationValueByKey(companyId, userid, 'CRM', 'CRMPerFileSize'))",NoteListType:"list",editUrl:"/CRM/ManageLeadEdit/".concat(this.$route.params.id,"/YES/CRM/CRM_LEADS"),privilegeParams:null,isLoading:!1}},created:function(){this.userid=this.GetUserInfo.ID,this.companyId=this.GetUserInfo.CompanyId,this.containername=this.GetUserInfo.ContainerName,this.privilegeParams="controller=CRM&action=",this.email=this.GetUserInfo.Email,this.FetchData()},updated:function(){var t=this;setTimeout((function(){t.setHeaderForSelectedTab()}),500),$("#ancActivityExpandAllCollapseAll").click((function(){"0"==$(this).attr("show")?($(this).attr("show","1"),$("#divconversationbox").find("#accordion").find(".collapse").addClass("show")):($(this).attr("show","0"),$("#divconversationbox").find("#accordion").find(".collapse").removeClass("show"))}))},methods:{PageTourStart:function(){startTour(0)},DisableButton:function(){var t=this;t.isNotes=!1,t.isActivity=!1,t.isAttachment=!1,t.isContact=!1,t.isSendEmail=!1,t.isProduct=!1,t.isOwner=!1},CollapseExpand:function(t){var e=this;e.IsShow=!t},openShowNotePopup:function(){var t=this;"undefined"===typeof t.checkForAdditionalPermission||t.checkForAdditionalPermission("AddNote")?(t.isShowNotePopup=!0,$("#tab-notes").trigger("click"),t.loadData("notes")):this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},checkPrivilegeDetailsForOwner:function(t,e){var a=this;a.openAddAdditionalOwner(null)},checkForAdditionalPermission:function(t){var e=!0;if(null!=this.additionalOwnerPermission&&this.additionalOwnerPermission.length>0){var a=this.additionalOwnerPermission.filter((function(e){return e.permission_code==t}));0==a.length&&(e=!1)}return e},openAddAdditionalOwner:function(t){var e="AddAdditionalOwner";null!=t?(this.additionalLeadOwnerId=t,e="UpdateAdditionalOwner"):this.additionalLeadOwnerId=null,"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission(e)?this.showAdditionalOwnerPopup=!this.showAdditionalOwnerPopup:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},deleteAdditionalOwner:function(t){if("undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("DeleteAdditionalOwner")){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,null,(function(){var a={ids:t,moduleName:"CRM",subModuleCode:"CRM_LEADS",refCode:"DELETE_VIEW_LEAD_OWNER",refId:e.$route.params.id},s=JSON.stringify(a);n["a"].CommonDelete(s).then((function(t){"Success"==t.data[0].Status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("AdditionalOwner")]),"success",!0,e.$t("Alert")),e.loadData("additionalleadowners")):e.ShowAlert(e.$t("DeletedError",[e.$t("AdditionalOwner")]),"failure",!0,e.$t("Alert"))}),(function(t){}))}))}else alert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},ReopenLead:function(){var t=this;t.$route.params.id>0&&t.confirmR(this.$t("AreYouSuretoReopenLead"),!0,null,(function(e){var a={ids:"".concat(t.$route.params.id)},s=JSON.stringify(a);n["a"].reopenLead(s).then((function(e){var a="";"Success"==e.data[0].Status?"CONVERTED_TO_CONTRACT"!=e.data[0].Value&&"CONVERTED_TO_DEAL"!=e.data[0].Value?(t.FetchData(),a=t.ShowAlert(t.$t("LeadReopenedSuccessfully"),"success",!0,t.$t("Alert"))):a=t.ShowAlert(t.$t("CantReopenDueToConverted"),"warning",!0,t.$t("Alert")):a=t.ShowAlert(t.$t("ReopenLeadError"),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),4e3)}))}))},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)},FilterDDLandNormalValue:function(t){if(!(t&&t.length>0))return"";try{return JSON.parse(t)[0].name}catch(e){return""}},FilterDDLValueForID:function(t){if(!(t.length>0))return"";try{return"object"==Object(o["a"])(JSON.parse(t)[0])?JSON.parse(t)[0].value:JSON.parse(t)[0]}catch(e){return""}},FetchData:function(){var t=this;t.isLoading=!0,n["a"].FormLayoutView(t.ApiURL).then((function(e){var a=e.data.LEFTDATA;if(t.isLoading=!1,t.timelinedata=[],a=$.grep(a,(function(e,a){return"role_title_id"==e.name&&(t.dataToConvertLead.roletitle=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"home_phone"==e.name&&(t.dataToConvertLead.home_phone=e.value),"client_email"==e.name&&(e.value=t.$options.filters.truncate(e.value,24,"...")),"business_phone"==e.name&&(t.dataToConvertLead.business_phone=e.value),"contact_number"==e.name&&(t.dataToConvertLead.contact_number=e.value),"account_id"==e.name&&(t.dataToConvertLead.account_id=e.value),"channel_id"==e.name&&(t.dataToConvertLead.lead_source_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"industry_type_id"==e.name&&(t.dataToConvertLead.industry_type_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_country"==e.name&&(t.dataToConvertLead.lead_country=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_state"==e.name&&(t.dataToConvertLead.lead_state=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"external_source_id"==e.name?t.dataToConvertLead.referred_by=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"status_id"==e.name?t.LeadStatus=t.FilterDDLandNormalValue(e.value):"client_first_name"==e.name?t.clienFirstName=null!=e.value?e.value:"":"client_last_name"==e.name?t.clientLastName=null!=e.value?e.value:"":"lead_address1"==e.name?t.clientaddr1=null!=e.value?e.value:"":"lead_address2"==e.name?t.clientaddr2=null!=e.value?e.value:"":"lead_city"==e.name?t.clientcity=null!=e.value?e.value:"":"lead_state"==e.name?t.clientstate=null!=e.value?JSON.parse(e.value)[0].name:"":"lead_zipcode"==e.name?t.clientzip=null!=e.value?e.value:"":"lead_company_name"==e.name?t.clientcompany=null!=e.value?e.value:"":"client_email"==e.name?t.defaultemailid=null!=e.value?e.value:"":"expected_close_date"==e.name?(t.dataToConvertLead.closing_date=e.value,t.expirydate=e.value):"money_value"==e.name?t.dataToConvertLead.ammount=e.value:"campaign_id"==e.name?t.dataToConvertLead.campaign_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"lead_owner_id"==e.name&&(t.dataToConvertLead.lead_owner=e.value),"commission_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=20),"agreement_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=19),"YES"==e.form_field_visibility})),"--"==t.leadName&&(t.leadName=t.clienFirstName+" "+t.clientLastName),"--"==t.Acctab&&(t.Acctab=t.clienFirstName),t.dataToConvertLead.lead_name=t.leadName,null!=e.data.RIGHTDATA&&e.data.RIGHTDATA.length>0){var s=e.data.RIGHTDATA,i="";$.each(s,$.proxy((function(e,a){i=t.$options.filters.formatDate(a.Complete_datetime);var o=$.grep(t.timelinedata,(function(t,e){return t.groupKey==i}));if(0==o.length){var n=$.grep(s,(function(e,a){return t.$options.filters.formatDate(e.Complete_datetime)==i}));if(n.length>0){var l={groupKey:i,groupData:n};t.timelinedata.push(l)}}}),this)),t.isLoading=!1,t.noRecordForTab=!1}else t.noRecordForTab=!0;if(null!=a&&a.length>0){var o=a[0].group_id;$.each(a,$.proxy((function(e,s){var i=$.grep(t.LeftViewData,(function(t,e){return t.group_id==o}));if(0==i.length){var n=$.grep(a,(function(t,e){return t.group_id==o}));if(n=n.sort((function(t,e){var a=t.display_order,s=e.display_order;return a==s?0:a>s?1:-1})),n.length>0){var l={group_id:o,group_name:n[0].group_name,LeftViewData:n};t.LeftViewData.push(l)}}o=s.group_id}),this))}t.additionalOwnerPermission=e.data.PERMISSION_DATA,setTimeout((function(){t.CheckBoxBootstrap()}),500),setTimeout((function(){t.SetResponsiveTab()}),500),setTimeout((function(){t.RadioButtonBootstrap()}),500),t.isDetailPage=!0}))},changeDateForAddNoteUsrEnd:function(t){try{var e=Globalize.culture().calendar.patterns.t;e=String(e).replace("t","A").replace("t","");var a=new Date(moment(String(t)).year(),moment(String(t)).month(),moment(String(t)).date(),moment(String(t)).hours(),moment(String(t)).minutes());return userTimeZone[0].indexOf("+")>=0?(a=new Date(a.setHours(a.getHours()-parseInt(userTimeZone[0].replace("+","")))),a=new Date(a.setMinutes(a.getMinutes()-parseInt(userTimeZone[1])))):userTimeZone[0].indexOf("-")>=0&&(a=new Date(a.setHours(a.getHours()+parseInt(userTimeZone[0].replace("-","")))),a=new Date(a.setMinutes(a.getMinutes()+parseInt(userTimeZone[1])))),moment(a,"YYYY-MM-DD HH:mm").format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(e))}catch(s){e=Globalize.culture().calendar.patterns.t;return e=String(e).replace("t","a").replace("t",""),moment(String(t)).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(e))}},DeleteActivityData:function(t){var e=this;t>0&&e.confirmR(e.$t("ConfirmDelete"),!0,null,(function(){var a={ids:t,moduleName:"CRM",subModuleCode:"CRM_LEADS",refCode:"DELETE_VIEW_ACTIVITY",refId:e.sourceId},s=JSON.stringify(a);n["a"].CommonDelete(s).then((function(t){"Success"==t.data[0].Status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Activity")]),"Success",!0,e.$t("Alert")),e.loadData("activities")):e.ShowAlert(e.$t("DeletedError",[e.$t("Activity")]),"failure",!0,e.$t("Alert"))}))}))},openAttachmentDialogue:function(){this.isShowNoteDialogue=!this.isShowNoteDialogue},openConvertLeadModel:function(){var t=this;n["a"].CheckPrivilege(t.privilegeParams+"ConvertLead").then((function(e){e.data?t.confirmR(t.$t("AreyousuretoConvertLead"),!0,null,(function(){t.showConvertLead=!t.showConvertLead})):t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},openAddTaskModel:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddAcitvities")?this.showAddTaskModal=!this.showAddTaskModal:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openAddNewEvent:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddAcitvities")?this.showAddEventModal=!this.showAddEventModal:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openCallEvent:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddAcitvities")?this.showCallModal=!this.showCallModal:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openEmailModal:function(t){this.sendEmailModal=!0,this.modalItem=t},openActivityModal:function(t){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("UpdateAcitvities")?"Task"==t.activity_type?(this.showAddTaskModal=!0,this.modalTaskItem=t):"FollowUp"==t.activity_type?(this.showAddEventModal=!0,this.modalFollowUpItem=t):"Call"==t.activity_type&&(this.showCallModal=!0,this.modalCallItem=t):this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},DeleteActivity:function(t){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("DeleteAcitvities")?(this.modalDeleteItem=t,this.DeleteActivityData(this.modalDeleteItem.followup_notification_id)):this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openCRMAttachmentModal:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddAttachment")?this.showAttachmentModal=!this.showAttachmentModal:alertR(Globalize.localize("additionalOwnerAuthorityWarning"),!0,Globalize.localize("Alert"))},loadData:function(t,e){var a=this;if(a.DisableButton(),a.isDetailPage=!1,"notes"==t?(a.isNotes=!0,a.activeKey=2,e&&"savenote"==e&&(a.isShowNotePopup=!1)):"attachments"==t?(a.isAttachment=!0,a.activeKey=3):"activities"==t?(a.activeKey=4,a.isActivity=!0):"contacts"==t?(a.activeKey=6,a.isContact=!0):"email"==t?(a.activeKey=5,a.isSendEmail=!0):"products"==t?(a.activeKey=7,a.isProduct=!0):"additionalleadowners"==t&&(a.activeKey=9,a.isOwner=!0),""!=t&&null!=t)if("attachments"==t)n["a"].AttachmentListing(a.ApiURL).then((function(t){null!=t.data?(a.attachmentData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0)}));else if("activities"==t){a=this;n["a"].CheckPrivilege(a.privilegeParams+"Upcoming_Activities").then((function(t){t.data?n["a"].ActivityListing(a.ApiURL).then((function(t){""!=t.data&&null!=t.data&&t.data.data.length>0?(a.activitiesData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0)})):a.ShowAlert("You are not authorized","failure",!0,"Alert")}))}else if("timeline"==t)a.activeKey=1,a.isDetailPage=!0,n["a"].TimelineListing(a.ApiURL).then((function(t){if(null!=t.data){a.timelinedata=[];var e=t.data.data,s="";$.each(e,$.proxy((function(t,i){s=a.$options.filters.formatDate(i.Complete_datetime);var o=$.grep(a.timelinedata,(function(t,e){return t.groupKey==s}));if(0==o.length){var n=$.grep(e,(function(t,e){return a.$options.filters.formatDate(t.Complete_datetime)==s}));if(n.length>0){var l={groupKey:s,groupData:n};a.timelinedata.push(l)}}}),this)),setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1}else setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0}));else if("products"==t){var s="id=".concat(this.$route.params.id,"&moduleName=").concat(this.$route.params.moduleName,"&subModuleCode=").concat(this.$route.params.subModuleCode,"&sortBy=").concat(a.SortBy,"&sortExp=").concat(a.SortExp,"&pageSize=").concat(a.PageSize,"&pageNumber=").concat(a.PageNumber);n["a"].getItemListForAssociate(s).then((function(t){null!=t.data&&""!=t.data?(a.productData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0,a.productData=null)}))}else if("calls"==t)a.activeKey=8,s="id=".concat(this.$route.params.id,"&subModuleCode=").concat(this.$route.params.subModuleCode),n["a"].GetCallLogsListinge(s).then((function(t){null!=t.data?(a.callData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0,a.calltData=null)}));else if("contacts"==t){s="id=".concat(this.$route.params.id,"&subModuleCode=").concat(this.$route.params.subModuleCode,"&sortBy=").concat(a.SortBy,"&sortExp=").concat(a.SortExp,"&pageSize=").concat(a.PageSize,"&pageNumber=").concat(a.PageNumber);n["a"].ContactListing(s).then((function(t){null!=t.data?(a.contactsData=t.data.data,a.contactsHeader=t.data.schema,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0,a.contactsData=null)}))}else if("email"==t){s=a.ApiURLEmail+a.SortBy+"&sortExp="+a.SortExp+"&pageSize="+a.PageSize+"&pageNumber="+a.PageNumber;n["a"].EmailListing(s).then((function(t){null!=t.data?(a.EmailData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0)}))}else if("notes"==t)a.noteData=[],n["a"].NoteListing(a.ApiURL).then((function(t){null!=t.data&&t.data.data.length>0?(a.noteData=t.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0)}));else if("additionalleadowners"==t){s="id=".concat(this.$route.params.id,"&subModuleCode=CRM_LEADS");n["a"].additionalLeadOwnerListing(s).then((function(t){null!=t.data&&t.data.DATA.length>0?(a.additionalLeadOwners=t.data.DATA,setTimeout((function(){a.CheckBoxBootstrap()}),500),setTimeout((function(){a.ResponsiveDataTable("table-leadOwner-content")}),500),setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!1):(setTimeout((function(){a.setHeaderForSelectedTab()}),500),setTimeout((function(){a.bindLeftTabEventForSetHeading()}),500),a.noRecordForTab=!0)}))}},ChangeCRMLeadOwnerCheck:function(t){var e=this;$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.OwnerIds.push($(this).val())})),this.OwnerIds.length>0?this.showLeadOwnerModal=!this.showLeadOwnerModal:alert(e.$t("Selectchangeleadowner"))},openCRMEmailModal:function(t){var e="AddEmail";null!=t&&(e="UpdateEmail"),"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission(e)?(this.EmailInfo=t,this.sendEmailModal=!this.sendEmailModal):this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openCRMProductModel:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddProducts")?this.showProductModal=!this.showProductModal:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},GetEmailInfo:function(t){this.EmailInfo=t,this.sendEmailModal=!this.sendEmailModal},openCRMExistingContactModel:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddContact")?this.showExistingContactModal=!this.showExistingContactModal:this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},openCRMContactModal:function(t){var e="AddContact";null!=t&&(e="UpdateContact"),"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission(e)?(this.iscontactDetails=t,this.showContactModal=!this.showContactModal):this.ShowAlert(this.$t("additionalOwnerAuthorityWarning"),"warning",!0,this.$t("Alert"))},closeConvertLead:function(){this.showConvertLead=!1,this.FetchData()}}},x=D,w=a("2877"),k=Object(w["a"])(x,s,i,!1,null,null,null);e["default"]=k.exports},a2a4:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("AdditionalOwner")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},["CRM_DEALS"==t.subModuleCode?a("label",[t._v(" "+t._s(t.$t("DealOwner"))+": "),a("span",{staticClass:"text-danger"},[t._v("*")])]):a("label",[t._v(" "+t._s(t.$t("LeadOwner"))+": "),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"name",rules:{required:!0},label:"name"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.changed;return[a("Multiselect",{attrs:{object:!0,label:"label","show-labels":!1,multiple:!0,taggable:!0,"track-by":"value",placeholder:"CRM_DEALS"==t.subModuleCode?"Deal Owner Search":"Lead Owner Search",searchable:!0,options:t.leadOwnerList},on:{"update:modelValue":i},model:{value:t.leadOwner,callback:function(e){t.leadOwner=e},expression:"leadOwner"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"name"}},[t._v(t._s(s[0]))])]}}])})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mb-3 float-left listing"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered mb-0",attrs:{"aria-describedby":"addaddtionalowner"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Permission"))+" "+t._s(t.$t("For")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("View")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Add")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Update")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Delete")))])])])]),a("tbody",t._l(t.permissions,(function(e){return a("tr",{attrs:{Key:e}},[a("td",{attrs:{"data-id":"item.crmModuleId"}},[t._v(t._s(e.crmModuleName))]),a("td",[e.View.length>0?a("label",{staticClass:"switch"},[e.View.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.View[0].isSelected,expression:"item.View[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:e.View[0].isDisable,onchange:t.clickOnView(e)},domProps:{value:e.View[0].permission_id,checked:1==e.View[0].isSelected,checked:Array.isArray(e.View[0].isSelected)?t._i(e.View[0].isSelected,e.View[0].permission_id)>-1:e.View[0].isSelected},on:{change:function(a){var s=e.View[0].isSelected,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e.View[0].permission_id,l=t._i(s,n);i.checked?l<0&&t.$set(e.View[0],"isSelected",s.concat([n])):l>-1&&t.$set(e.View[0],"isSelected",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e.View[0],"isSelected",o)}}}):t._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v(t._s(t.$t("Yes")))]),a("span",{staticClass:"slider-no"},[t._v(t._s(t.$t("No")))])])]):t._e()]),a("td",[e.Add.length>0?a("label",{staticClass:"switch"},[e.Add.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.Add[0].isSelected,expression:"item.Add[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:e.Add[0].isDisable,onchange:t.clickOnAdd(e)},domProps:{value:e.Add[0].permission_id,checked:1==e.Add[0].isSelected,checked:Array.isArray(e.Add[0].isSelected)?t._i(e.Add[0].isSelected,e.Add[0].permission_id)>-1:e.Add[0].isSelected},on:{change:function(a){var s=e.Add[0].isSelected,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e.Add[0].permission_id,l=t._i(s,n);i.checked?l<0&&t.$set(e.Add[0],"isSelected",s.concat([n])):l>-1&&t.$set(e.Add[0],"isSelected",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e.Add[0],"isSelected",o)}}}):t._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v(t._s(t.$t("Yes")))]),a("span",{staticClass:"slider-no"},[t._v(t._s(t.$t("No")))])])]):t._e()]),a("td",[e.Update.length>0?a("label",{staticClass:"switch"},[e.Update.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.Update[0].isSelected,expression:"item.Update[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:e.Update[0].isDisable,onchange:t.clickOnUpdate(e)},domProps:{value:e.Update[0].permission_id,checked:1==e.Update[0].isSelected,checked:Array.isArray(e.Update[0].isSelected)?t._i(e.Update[0].isSelected,e.Update[0].permission_id)>-1:e.Update[0].isSelected},on:{change:function(a){var s=e.Update[0].isSelected,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e.Update[0].permission_id,l=t._i(s,n);i.checked?l<0&&t.$set(e.Update[0],"isSelected",s.concat([n])):l>-1&&t.$set(e.Update[0],"isSelected",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e.Update[0],"isSelected",o)}}}):t._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v(t._s(t.$t("Yes")))]),a("span",{staticClass:"slider-no"},[t._v(t._s(t.$t("No")))])])]):t._e()]),a("td",[e.Delete.length>0?a("label",{staticClass:"switch"},[e.Delete.length>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.Delete[0].isSelected,expression:"item.Delete[0].isSelected"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",disabled:e.Delete[0].isDisable,onchange:t.clickOnDelete(e)},domProps:{value:e.Delete[0].permission_id,checked:1==e.Delete[0].isSelected,checked:Array.isArray(e.Delete[0].isSelected)?t._i(e.Delete[0].isSelected,e.Delete[0].permission_id)>-1:e.Delete[0].isSelected},on:{change:function(a){var s=e.Delete[0].isSelected,i=a.target,o=!!i.checked;if(Array.isArray(s)){var n=e.Delete[0].permission_id,l=t._i(s,n);i.checked?l<0&&t.$set(e.Delete[0],"isSelected",s.concat([n])):l>-1&&t.$set(e.Delete[0],"isSelected",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(e.Delete[0],"isSelected",o)}}}):t._e(),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[t._v(t._s(t.$t("Yes")))]),a("span",{staticClass:"slider-no"},[t._v(t._s(t.$t("No")))])])]):t._e()])])})),0)])])])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success save-btn mr-1",attrs:{href:"javascript:;",title:""},on:{click:function(e){return t.saveAdditionalOwnerPermission()}}},[a("em",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[t.chkpermission?a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("requiredpermission")))])]):t._e()])])])])])],1)])])])])},i=[],o=(a("d81d"),a("b0c0"),a("4de4"),a("d3b7"),a("99af"),a("ac1f"),a("5319"),a("5b81"),a("e9c4"),a("9769")),n={props:{subModuleCode:null},data:function(){return{leadOwner:[],leadOwnerList:[],leadOwnerListAll:[],permissions:[],chkpermission:!1,additionalLeadOwnerIdForEdit:null,vSelectValidate:!1}},created:function(){this.additionalLeadOwnerIdForEdit=this.$parent.additionalLeadOwnerId,this.getLeadOwnerList(),this.GetAllLeadOwnerPermission()},methods:{getLeadOwnerList:function(){var t=this,e="id=&moduleName=CRM&type=CRM_USERS";o["a"].getDDLData(e).then((function(e){var a=e.data;if(null!=a)if(t.leadOwnerList=a.DATA,t.leadOwnerList=t.leadOwnerList.map((function(t){return{value:t.value,label:t.name}})),t.leadOwnerListAll=a.DATA,t.additionalLeadOwnerIdForEdit>0){var s=t.$parent.additionalLeadOwners.filter((function(t){return 1==t.IS_DEFAULT}));$.each(s,(function(e,a){t.leadOwnerList=t.leadOwnerList.filter((function(t){return t.value!=a.LEAD_OWNER_ID}))})),t.leadOwner=t.leadOwnerList.filter((function(e){return e.value==t.additionalLeadOwnerIdForEdit})),t.leadOwnerListAll=t.leadOwnerList}else $.each(t.$parent.additionalLeadOwners,(function(e,a){t.leadOwnerList=t.leadOwnerList.filter((function(t){return t.value!=a.LEAD_OWNER_ID}))})),t.leadOwnerListAll=t.leadOwnerList}))},clickOnView:function(t){var e=this;t.View[0].isSelected?(e.chkpermission=!1,t.Add.length>0&&(t.Add[0].isDisable=!1),t.Update.length>0&&(t.Update[0].isDisable=!1),t.Delete.length>0&&(t.Delete[0].isDisable=!1)):(t.Add.length>0&&(t.Add[0].isDisable=!0,t.Add[0].isSelected=!1),t.Update.length>0&&(t.Update[0].isDisable=!0,t.Update[0].isSelected=!1),t.Delete.length>0&&(t.Delete[0].isDisable=!0,t.Delete[0].isSelected=!1))},clickOnAdd:function(t){var e=this;t.Add[0].isSelected&&(e.chkpermission=!1)},clickOnUpdate:function(t){var e=this;t.Update[0].isSelected&&(e.chkpermission=!1)},clickOnDelete:function(t){var e=this;t.Delete[0].isSelected&&(e.chkpermission=!1)},GetAllLeadOwnerPermission:function(){var t=this,e=null!=this.additionalLeadOwnerIdForEdit?this.additionalLeadOwnerIdForEdit:null,a="CRM_DEALS"==t.subModuleCode?"subModuleCode=CRM_DEALS&leadOwner=".concat(e,"&leadId=").concat(t.$route.path.indexOf("Listing")>-1||t.$route.path.indexOf("Index")>-1?null:t.$route.params.id):"subModuleCode=CRM_LEADS&leadOwner=".concat(e,"&leadId=").concat(t.$route.path.indexOf("Listing")>-1||t.$route.path.indexOf("Index")>-1?null:t.$route.params.id);a=a.replaceAll("null",""),o["a"].GetAllLeadOwnerPermission(a).then((function(e){if(null!=e.data){var a=e.data.permission,s=e.data.assignedPermission;$.each(a,(function(e,i){var o=$.grep(t.permissions,(function(t,e){return t.crmModuleId==i.crm_module_id}));if(0==o.length&&(o=$.grep(a,(function(t,e){return t.crm_module_id==i.crm_module_id})),o.length>0)){var n=[],l=o.filter((function(t){return"View"==t.permission_name}));$.each(o,(function(t,e){var a=[];s.length>0&&(a=s.filter((function(t){return t.permission_id==e.permission_id})));var i={permission_name:e.permission_name,permission_id:e.permission_id,isSelected:a.length>0,isDisable:"View"!=e.permission_name&&0!=l.length};n.push(i)}));var r={crmModuleId:i.crm_module_id,crmModuleName:i.module_name,View:n.filter((function(t){return"View"==t.permission_name})),Add:n.filter((function(t){return"Add"==t.permission_name})),Update:n.filter((function(t){return"Update"==t.permission_name})),Delete:n.filter((function(t){return"Delete"==t.permission_name}))};t.permissions.push(r)}}))}}))},saveAdditionalOwnerPermission:function(){var t=this,e="";t.chkpermission=!0,t.$refs.form.validate().then((function(a){if(a&&t.leadOwner.length>0){$.each(t.leadOwner,(function(t,a){e+=""==e?a.value:","+a.value}));var s="";$(".chkItems:checkbox:checked").each((function(){s.length>0&&(s+=","),s+=$(this).val()}));var i={leadOwner:e,leadId:""==s?t.$route.params.id:s,permissionIds:""},n="";$.each(t.permissions,(function(t,e){e.View.length>0&&e.View[0].isSelected&&(n+=""==n?e.View[0].permission_id:","+e.View[0].permission_id),e.Add.length>0&&e.Add[0].isSelected&&(n+=""==n?e.Add[0].permission_id:","+e.Add[0].permission_id),e.Update.length>0&&e.Update[0].isSelected&&(n+=""==n?e.Update[0].permission_id:","+e.Update[0].permission_id),e.Delete.length>0&&e.Delete[0].isSelected&&(n+=""==n?e.Delete[0].permission_id:","+e.Delete[0].permission_id)})),i.permissionIds=n;var l=JSON.stringify(i);"CRM_DEALS"==t.subModuleCode||window.location.pathname.indexOf("DealListing")>-1?o["a"].saveAdditionalDealOwnerPermission(l).then((function(e){null!=e&&"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("RecordsSavedSuccessfully")),t.$parent.showAdditionalOwnerPopup=!1,$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.$route.params.id>0&&t.$parent.loadData("CRM_DEALS"==t.subModuleCode?"additionalDealowners":"additionalleadowners"),t.$emit("close"))})):o["a"].saveAdditionalOwnerPermission(l).then((function(e){null!=e&&"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("RecordsSavedSuccessfully")),t.$parent.showAdditionalOwnerPopup=!1,$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.$route.params.id>0&&t.$parent.loadData("additionalleadowners"),t.$emit("close"))}))}}))}}},l=n,r=a("2877"),c=Object(r["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},b421:function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,".vc-popover-content-wrapper{z-index:999!important}",""]),t.exports=e},b6c5:function(t,e,a){var s=a("b421");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var i=a("499e").default;i("05d6f59c",s,!0,{sourceMap:!1,shadowMode:!1})},d7fa:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("SendEmail"))+" ")])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.values,i=e.meta;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email Subject",rules:{required:!0},label:"Subject"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.touched,o=e.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailSubject,expression:"emailSubject"}],class:{"form-control":!0,"is-invalid":i&&o},attrs:{type:"text",maxlength:50,name:"emailSubject",disabled:t.isView},domProps:{value:t.emailSubject},on:{input:function(e){e.target.composing||(t.emailSubject=e.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Email Subject"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1!=t.isView,expression:"isView!= true"}],staticClass:"col-sm-col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("SelectTemplate"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{id:"",name:"Email Template",rules:{required:!0},label:"Email Template"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.touched,o=e.invalid;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.Template,expression:"Template"}],class:{"form-control":!0,"is-invalid":i&&o},attrs:{disabled:t.isView},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.Template=e.target.multiple?a:a[0]},function(e){return t.loadEmailTemplate(t.Template)}]}},[a("option",{attrs:{value:""}},[t._v(" "+t._s(t.$t("PleaseSelect"))+" "+t._s(t.$t("Template")))]),t._l(t.emailTemplate,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Email Template"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Importance"))+":")]),a("div",{staticClass:"pl-0 border-0"},[a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.emailImportance,expression:"emailImportance",modifiers:{trim:!0}}],staticClass:"form-check-input",class:{disableradio:t.isView},attrs:{type:"radio",disabled:t.isView,value:"normal",name:"emailImportance"},domProps:{checked:"normal"==t.emailImportance,checked:t._q(t.emailImportance,"normal")},on:{change:function(e){t.emailImportance="normal"}}}),t._v(" "+t._s(t.$t("Normal"))+" ")]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.emailImportance,expression:"emailImportance",modifiers:{trim:!0}}],staticClass:"form-check-input",class:{disableradio:t.isView},attrs:{type:"radio",disabled:t.isView,value:"low",name:"emailImportance"},domProps:{checked:"low"==t.emailImportance,checked:t._q(t.emailImportance,"low")},on:{change:function(e){t.emailImportance="low"}}}),t._v(t._s(t.$t("Low"))+" ")]),a("div",{staticClass:"form-check form-check-inline"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.emailImportance,expression:"emailImportance",modifiers:{trim:!0}}],staticClass:"form-check-input",class:{disableradio:t.isView},attrs:{type:"radio",disabled:t.isView,value:"high",name:"emailImportance"},domProps:{checked:"high"==t.emailImportance,checked:t._q(t.emailImportance,"high")},on:{change:function(e){t.emailImportance="high"}}}),t._v(" "+t._s(t.$t("High"))+" ")])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("To"))+" :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Email To",rules:{required:!0,email:!0},label:"Email To"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.touched,o=e.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.emailTo,expression:"emailTo",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":i&&o},attrs:{type:"text",maxlength:50,name:"emailTo",disabled:t.isView},domProps:{value:t.emailTo},on:{input:function(e){e.target.composing||(t.emailTo=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Email To"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(" "+t._s(t.$t("Cc"))+" :")]),a("Field",{attrs:{name:"emailCc",rules:{required:!1,email:!0},label:"Email Cc"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.touched,o=e.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailCc,expression:"emailCc"}],class:{"form-control":!0,"is-invalid":i&&o},attrs:{type:"text",maxlength:50,name:"emailCc",disabled:t.isView},domProps:{value:t.emailCc},on:{input:function(e){e.target.composing||(t.emailCc=e.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"emailCc"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Bcc"))+":")]),a("Field",{attrs:{name:"emailBcc",rules:{required:!1,email:!0},label:"Email Bcc"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,i=e.touched,o=e.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.emailBcc,expression:"emailBcc"}],class:{"form-control":!0,"is-invalid":i&&o},attrs:{type:"text",maxlength:50,name:"emailBcc",disabled:t.isView},domProps:{value:t.emailBcc},on:{input:function(e){e.target.composing||(t.emailBcc=e.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"emailBcc"}},[t._v(t._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Description"))+":"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0},label:"Description"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;e.touched,e.invalid;return[a("ckeditor",{attrs:{editor:t.editor},model:{value:t.Description,callback:function(e){t.Description=e},expression:"Description"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(s[0]))])]}}],null,!0)}),t.contentView?a("small",{staticClass:"text-danger"},[t._v(" "+t._s(t.$t("DescRequired"))+" ")]):t._e()],1)])])])]),t.isView?t._e():a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success mx-1",class:{disabled:t.emailsubmit},attrs:{href:"javascript:;",title:t.$t("Send")},on:{click:function(e){return t.saveEmail(s,i)}}},[a("em",{staticClass:"fa fa-send pr-2"}),t._v(t._s(t.$t("Send"))+" ")]),a("a",{staticClass:"btn btn-danger mx-1",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString"))+" ")])])])])]}}])})],1)])])],1)},i=[],o=(a("a9e3"),a("e9c4"),a("ac1f"),a("1276"),a("9769")),n=a("fb3d"),l=a.n(n),r={props:{userid:{type:Number,required:!0},companyid:{type:Number,required:!0},id:{type:String,required:!0},modulename:{type:String,required:!0},email:{type:String,required:!0},submodulecode:{type:String,required:!0},containername:{type:String,required:!0},defaultemailid:{type:String,required:!1},EmailInfo:null},data:function(){return{isLoading:!1,emailSubject:"",emailPriorityValue:"",duedate:"",Message:"",emailTo:"",emailCc:"",emailImportance:"normal",emailBcc:"",emailContent:"",isView:!1,modal:null,Template:"",emailTemplate:[],contentView:!1,getemailContent:[],emailValidate:{},emailValidateemails:{},emailsubmit:!1,noRecordForTab:!1,editor:l.a,Description:""}},created:function(){var t=this;this.modal=this.EmailInfo,null!=this.modal&&(this.FetchEmailViewData(this.modal.ID),this.isView=!0),this.GetEmailTemplate(),this.emailValidate={required:!0,regex:/^(\s?[^\s,]+@[^\s,]+\.[^\s,]+\s?,)*(\s?[^\s,]+@[^\s,]+\.[^\s,]+)$/},this.emailValidateemails={regex:/^(\s?[^\s,]+@[^\s,]+\.[^\s,]+\s?,)*(\s?[^\s,]+@[^\s,]+\.[^\s,]+)$/},setTimeout((function(){t.RadioButtonBootstrap()}),500)},methods:{onReady:function(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetEmailTemplate:function(){var t=this,e="id=&moduleName="+t.modulename+"&subModuleName="+t.submodulecode+"&type=EMAILTEMPLATE";o["a"].GetDDLDataBySubModule(e).then((function(e){var a=e.data;if(null!=a)return t.emailTemplate=a.DATA,t.emailTemplate}))},loadEmailTemplate:function(t){if(""!=t){var e=this,a=t,s="id="+a;o["a"].GetEmailData(s).then((function(t){var a=t.data;null!=a&&(e.Description=a.data[0].template_content)}))}else e.$refs["editor"].setHTML("")},saveEmail:function(){var t=this;t.$refs.form.validate().then((function(e){if(e){t.isLoading=!0,t.emailsubmit=!0;var a={from:t.email,to:t.emailTo,emailSubject:t.emailSubject,body:t.Description,configModuleName:"Email",moduleName:t.modulename,submodulecode:t.submodulecode,emailPriorityValue:t.emailImportance,emailCc:t.emailCc,emailBcc:t.emailBcc,slecteditems:t.id,templatename:t.Template,mailStatus:1},s=JSON.stringify(a);o["a"].AddEmailTemplate(s).then((function(e){var a="",s=0,i=JSON.parse(e.data[0].Value).MAIN_ID;if(s=i&&-1!=i.indexOf(",")?i.split(",")[1]:i,"Success"==e.data[0].Status){var n="id="+s;o["a"].GetEmailLog(n).then((function(e){var s=e.data;if(null!=s&&""!=s&&(t.getemailContent=s.data,a=t.getemailContent[0].email_content),null!=e.data){var i={from:t.email,to:t.emailTo,Subject:t.emailSubject,body:a,configModuleName:"Email",moduleName:t.modulename,subModuleCode:t.submodulecode,emailPriorityValue:t.emailImportance,emailCc:t.emailCc,emailBcc:t.emailBcc,refId:t.id,mailStatus:1,isSaveLog:"no"},n=JSON.stringify(i);o["a"].SendEmail(n).then((function(e){t.isLoading=!1,200==e.status&&"Failure"!=e.data[0].Status?(t.ShowAlert(t.$t("EmailSentSuccessMessage",[t.$t(i.to)]),"success",!0,t.$t("Alert")),t.$emit("close"),t.$parent.loadData("email")):(t.ShowAlert(t.$t("Email Sent Failed on this email id. Please check your email id."),"warning",!0,t.$t("Alert")),t.$parent.loadData("email")),t.emailsubmit=!1,t.isLoading=!1}))}}))}}))}t.isLoading=!1}))},FetchEmailViewData:function(t){var e=this,a="id="+t+"&refId="+e.id+"&subModuleCode="+e.submodulecode;o["a"].EmailListing(a).then((function(t){if(null!=t.data){var a=t.data.data;e.emailSubject=a[0].EMAIL_SUBJECT,e.emailTo=a[0].EMAIL_TO,e.emailCc=a[0].EMAIL_CC,e.emailImportance=a[0].EMAIL_PRIORITY,e.emailBcc=a[0].EMAIL_BCC,e.emailContent=a[0].EMAIL_CONTENT;var s={};s["emailSubject"]=e.emailSubject,s["emailTo"]=e.emailTo,s["emailCc"]=e.emailCc,s["emailImportance"]=e.emailImportance,s["emailBcc"]=e.emailBcc,s["Description"]=e.emailContent}}))}}},c=r,d=(a("13af"),a("2877")),u=Object(d["a"])(c,s,i,!1,null,null,null);e["a"]=u.exports},d998:function(t,e,a){var s=a("342f");t.exports=/MSIE|Trident/.test(s)}}]);
//# sourceMappingURL=CRMLeadDetails.js.map