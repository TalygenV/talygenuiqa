(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["InwardList"],{"3b1bd":function(e,t,a){"use strict";a("b6c5")},"4fad":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_INWARD",IdentityColumn:"gin_id",HeaderText:e.$t("Goods Inward"),ListData:e.InWardData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,noRecord:e.noRecord,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber,IsFilterApplied:!!e.searchCondition},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var o=t.data;return["status_id"==o.column.COLUMN_NAME?[e.isCRMShowStausDrop(o.row.status_id,"CRM_INWARD")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_INWARD",dataid:o.row.gin_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:o,"data-action":"index",dataselected:o.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(o.row.status_id,"CRM_INWARD")?e._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:e.getStatusClass(o.row.status_id,"status_id")},[e._v(" "+e._s(o.row[o.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showAddEventModal?a("modalfollowupslist",{attrs:{srcId:e.souceID,DealInfo:e.selectedItem,modulename:"CRM",submodulecode:"CRM_INWARD",userid:e.userid},on:{close:e.closeEventViewModal}}):e._e(),e.showConvertLead?a("modalconvertlead",{attrs:{leadId:e.convertLeadValue.value,moduleName:"CRM",subModuleCode:"CRM_LEADS"},on:{close:function(t){e.showConvertLead=!1}}}):e._e(),e.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_INWARD",modulename:"CRM",callbackfunction:e.FetchData,commonapiurl:e.commonAPIUrl,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_INWARD",modulename:"CRM",userid:e.userid,companyid:e.CompanyId,callbackfunction:e.FetchData},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showDeployModal?a("modaldeploy",{on:{close:function(t){e.showDeployModal=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("DeployItems")))])]):e._e()],1)},n=[],i=a("53ca"),s=a("5530"),l=(a("d3b7"),a("159b"),a("c740"),a("e9c4"),a("b0c0"),a("05a5")),c=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filters",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"ManageView",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"AddInward",iconClass:"fa-plus",href:"/CRM/Manageinward/0/NO/CRM/CRM_INWARD",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addInward_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{id:"Approve",title:"Approve",iconClass:"fa fa-check",callbackfunction:"openlocation",isdisabled:!0,isvisible:!0},{id:"Reject",title:"Reject",iconClass:"fa fa-close",callbackfunction:"commonReject",isdisabled:!0,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],r=[{fieldName:"GinNumber",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["gin_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"GinDate",fieldType:"date-range",fieldIcon:"fa-calendar",fieldSearchConditionName:["gin_date|gin_date"],isSearch:!1,datePickerConfig:{},secondDatePickerConfig:{},value:"",secondValue:"",listOptions:[]},{fieldName:"GinVendorName",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["gin_vendor_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"GinInwardType",fieldType:"radio",fieldIcon:"fa-folder",fieldSearchConditionName:["gin_inward_type"],isSearch:!1,value:"",listOptions:[{value:"asset",name:"Asset"},{value:"inventory",name:"Inventory"}]}],d=[{title:"View",href:"/CRM/ViewInwardDetails/{gin_id}/CRM/CRM_INWARD",icon:"fa fa-eye text-info action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageInward/{gin_id}/YES/CRM/CRM_INWARD",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"FollowUps",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""},{title:"Approve",callbackfunction:"openlocation",href:"javascript:void(0)",icon:"fa fa-check text-primary action-icon",additionalSpan:""},{title:"Reject",callbackfunction:"commonReject",href:"javascript:void(0)",icon:"fa fa-close  text-danger action-icon",additionalSpan:""},{title:"ConvertLead",callbackfunction:"openConvertLeadModel",href:"javascript:void(0)",icon:"fa fa-file-text-o text-warning action-icon",additionalSpan:""}],u={buttons:c,leftsearchSchema:r,listActions:d},m=a("9769"),v=a("e29d"),p=a("5c60"),h=a("cdd5"),_=a("fc0b"),f=a("8d3e"),C=a("2aeb"),g={components:{leftsearch:l["a"],TgList:C["a"],modalfollowupslist:v["a"],modalconvertlead:p["a"],viewlayout:h["a"],modaldeploy:f["a"],searchfilter:_["a"]},data:function(){return{isLoading:!1,appliedFilter:[],SelectedGinwards:"",selectedGinVendor:[],GinVendorNameist:null,ShowManageView:!1,options:null,LegendArray:[],DependentOption:[{format:"MM-dd-yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}],FromDateForSearch:"",ToDateForSearch:"",txtGINnumber:"",InWardData:null,Headers:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,showAddEventModal:!1,stageName:"",langCode:"EN",noRecord:!1,showFilter:!1,searchCondition:"",showAddEmailTemplate:!1,showDeployModal:!1,modalItem:[],LocationSelect:null,ddlinwards:"",ginid:null,IsAnySearch:!1,StatusListForListing:[],conditionForInstantSearch:"",listheaderbuttons:u.buttons,leftSearchFields:u.leftsearchSchema,listActions:u.listActions,usertype:null,LoggedinUserId:null,privilegeParams:null,convertLeadValue:{value:null,name:""},showConvertLead:!1}},created:function(){var e=this;e.LoggedinUserId=e.GetUserInfo.ID,e.usertype=e.GetUserInfo.UserType,e.getStatuslistForListing("CRM","en"),e.privilegeParams="controller=CRM&action=",e.GetGinVendorlist(),e.FetchData()},updated:function(){this.BindActionButtonEvent()},methods:{renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(o){var n=Object(s["a"])({},o);switch(n.title){case"FollowUps":n.isVisible="Rejected"!=e.status_id&&"Approved"!=e.status_id&&"Closed"!=e.status_id;break;case"Edit":n.isVisible="Active"==e.status_id;break;case"Approve":n.isVisible="Rejected"!=e.status_id&&"Approved"!=e.status_id&&"Closed"!=e.status_id;break;case"Reject":n.isVisible="Rejected"!=e.status_id&&"Approved"!=e.status_id&&"Closed"!=e.status_id;break;case"ConvertLead":n.isVisible=(t.isBlank(e.existing_client_id)||t.isBlank(e.project_id))&&1==e.is_completed;break;default:n.isVisible=!0;break}a.push(n)})),a},clickEventOfColumn:function(e,t){"gin_number"==t.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewInwardDetails/"+e.gin_id+"/CRM/CRM_INWARD"})},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"ManageView":this.ManageView();break;case"openFilterPopUp":this.openFilterPopUp();break;case"openlocation":this.openlocation(null);break;case"commonReject":this.commonReject(null);break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var t=this;this.searchCondition="";var a=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[a].isvisible=!1;var o=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[o].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(n){}t.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},onChange:function(){var e=$(".chkItems:checked").not("[id^='chkAll']").length;e>0?$(".statuschange").removeClass("disabled"):$(".statuschange").addClass("disabled")},FilterData:function(e,t,a,o,n,s){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=o,this.searchCondition=n,null!=Object(i["a"])(s)&&this.appliedFilter.push(s),this.FetchData()},DependentDateObject:function(e){var t=new Date;t="undefined"!==typeof e&&""!=e?new Date(Date.parse(e)):new Date(Date.now()),this.DependentOption[0]={format:"MM-dd-yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:t}},InwardChange:function(e){var t=e.target.value,a=this;a.searchCondition="",a.ddlinwards=t},SetCurrentPage:function(e){this.PageNumber=e,e>this.GroupEnd||1==e?(this.GroupStart=e,this.GroupEnd=e+2):e<this.GroupStart&&e>1&&(this.GroupEnd=this.GroupStart-1,this.GroupStart=e-2),this.FetchData()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData(),$("#"+e).attr("class",t)},SetPageSize:function(e){this.PageSize=e.target.value,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},cancelOrRefresh:function(){this.SelectedGinwards="",this.selectedGinVendor=[],this.ddlinwards="",this.txtGINnumber="",this.FromDateForSearch="",this.ToDateForSearch="",this.searchCondition="",this.IsAnySearch=!1,this.stageName="",this.PageNumber=1,this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},ClearFilter:function(e){var t=this;"SelectedGinwards"==e?(t.SelectedGinwards="",t.ddlinwards=""):"selectedGinVendor"==e&&(t.selectedGinVendor=""),t.searchCondition="",t.FetchData()},GetGinVendorlist:function(){var e=this,t="id=&moduleName=CRM&type=VENDOR_NAME";m["a"].getDDLData(t).then((function(t){var a=t.data;if(null!=a)return e.leftSearchFields[2].listOptions=a.DATA,e.GinVendorNameist=a.DATA,e.GinVendorNameist}))},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},FetchData:function(e){this.isLoading=!0;var t,a=this;t=e?"pageSize="+a.TotalRecords+"&pageNumber="+a.PageNumber+"&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&stagename="+a.stageName+"&langCode="+a.langCode:"pageSize="+a.PageSize+"&pageNumber="+a.PageNumber+"&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&stagename="+a.stageName+"&langCode="+a.langCode;var o="";if(a.isBlank(a.searchCondition)||(o+=a.searchCondition),a.isBlank(this.conditionForInstantSearch)||(o+=a.isBlank(this.searchCondition)?a.conditionForInstantSearch:" AND "+a.conditionForInstantSearch),""!=o&&(t+="&searchCondition="+o,a.appliedFilter.length>0)){var n=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[n].isvisible=!0;var i=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[i].iconClass="fa fa-filter text-success"}e?m["a"].GoodInwardListing(t).then((function(e){a.isLoading=!1,null!=e.data?a.JSONToCSVConvertor(e.data,"Inward-Detail",!0):a.ModelnoRecord=!0})):m["a"].GoodInwardListing(t).then((function(e){null!=e.data&&""!=e.data?(a.InWardData=[],a.Headers=e.data.schema,a.Headers.forEach((function(e){e.settings=null,"gin_number"==e.COLUMN_NAME&&(e.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(a.InWardData=e.data.data,a.InWardData.forEach((function(e){e.isCheckBoxDisabled=!1,"Closed"!=e.status_id&&"Partially Approved"!=e.status_id&&"Partially Rejected"!=e.status_id&&"Approved"!=e.status_id&&"Rejected"!=e.status_id||(e.isCheckBoxDisabled=!0),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewInwardDetails/"+e.gin_id+"/CRM/CRM_INWARD")})),a.TotalRecords=e.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteStage").addClass("disabled"),$("#Sendbulkmail").addClass("disabled"),a.noRecord=!1):(a.noRecord=!0,a.InWardData=[],a.TotalRecords=0)):(a.noRecord=!0,a.InWardData=[],a.Headers=[],a.TotalRecords=0),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))},getStatuslistForListing:function(e,t){var a=this,o="langCode="+t+"&statusType="+e+"&hasglobal=true";m["a"].statusdropdown(o).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},GetPageSizeOption:function(){for(var e=[],t=10,a=t;a<t+95;a+=5)e.push(a);this.PageSizeOption=e},closeEventViewModal:function(){this.showAddEventModal=!1},openAddNewEvent:function(e,t){var a=this;null!=t?(a.souceID=e,a.selectedItem=t,setTimeout((function(){a.showAddEventModal=!a.showAddEventModal}),500)):(a.souceID=e,a.selectedItem=t,setTimeout((function(){console.log(a.$refs.modalfollowupslist),a.showAddEventModal=!a.showAddEventModal}),300))},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},openlocation:function(e){var t=this;m["a"].CheckPrivilege(t.privilegeParams+"ApproveInward").then((function(a){if(a.data){if($(event.target).hasClass("disabled")||$(event.target).closest("a.iconenable").hasClass("disabled"))return!1;t.ginid=e,t.showDeployModal=!t.showDeployModal}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},commonApprove:function(e){if(this.LocationSelect=e,null!=this.LocationSelect){var t=this,a="";"undefined"!==typeof this.ginid&&null!=this.ginid?a=this.ginid:$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0||""!=a?t.confirmR(t.$t("AreYouSureToApproveSelectedRecords"),!0,t.$t("Approve",[t.$t("GinInward")]),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_INWARD",approvaltype:"CRM_APPROVE",viewmode:"",locationid:t.LocationSelect},o=JSON.stringify(e);m["a"].changestausInwards(o).then((function(e){"Success"==e.data[0].Status?($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.ShowAlert(t.$t("ApprovedSuccessfully",[t.$t("GINInward")]),"success",!0,t.$t("Alert")),t.FetchData(),$(".statuschange").addClass("disabled")):t.ShowAlert(t.$t("Error Occur while Approving Record"),"warning",!0,t.$t("Alert"))}),(function(e){}))})):t.ShowAlert(t.$t("LeaveApprove"),"warning",!0,t.$t("Alert"))}else t.ShowAlert(t.$t("Please Select the location in order to approve"),"warning",!0,this.$t("Alert"))},commonReject:function(e){var t=this;m["a"].CheckPrivilege(t.privilegeParams+"RejectInward").then((function(a){if(a.data){if($(event.target).hasClass("disabled")||$(event.target).closest("a.iconenable").hasClass("disabled"))return!1;var o="";"undefined"!==typeof e&&null!=e?o=e:$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){o.length>0&&(o+=","),o+=$(this).val()})),o.length>0||""!=o?(t.confirmR(t.$t("AreYouSureToRejectSelectedRecords"),!0,t.$t("Reject")+"  "+t.$t("GinInward"),(function(){var e={ids:o,moduleName:"CRM",subModuleCode:"CRM_INWARD",approvaltype:"CRM_REJECT",viewmode:"",locationid:""},a=JSON.stringify(e);m["a"].changestausInwards(a).then((function(e){var a="";"Success"==e.data[0].Status?($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),a=t.ShowAlert(t.$t("RejectedSuccessfully",[t.$t("GinNumber")]),"success",!0,t.$t("Alert")),t.FetchData(),$(".statuschange").addClass("disabled")):a=t.ShowAlert(t.$t("RejectError",[t.$t("GinNumber")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}),(function(e){}))})),t.FetchData()):t.ShowAlert(t.$t("RemoveReject"),"warning",!0,t.$t("Alert"))}else t.ShowAlert("You are not authorized","failure",!0,"Alert")}))},openConvertLeadViewModel:function(e,t){var a=this;confirmR("Please verify, you want to convert this Lead?")&&(a.convertLeadValue.value=e,a.convertLeadValue.name=t,a.showConvertLead=!a.showConvertLead)},actionButtonClick:function(e,t,a,o){var n=this;switch(e){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openlocation":n.commonApprove(t,a);break;case"commonReject":n.commonReject(t.gin_id);break;case"openAddNewEvent":n.openAddNewEvent(t.gin_id,t);break;case"openConvertLeadModel":var i=(null!=t.client_first_name?t.client_first_name:"")+" "+(null!=t.client_last_name?t.client_last_name:"");n.openConvertLeadViewModel(t.gin_id,i);break}},ManageView:function(){var e=this;this.ShowManageView=!0,$("#modalManageView").modal("show"),setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},commonDeleteData:function(e){var t=this;m["a"].CheckPrivilege(t.privilegeParams+"DeleteInwards").then((function(e){if(e.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("GinInward"),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_INWARD"},o=JSON.stringify(e);m["a"].CommonDeleteData(o).then((function(e){"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("GinInward")]),"success",!0,t.$t("Alert")),$("#DeleteMultiple").addClass("disabled"),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("GinInward")]),"failure",!0,t.$t("Alert")),setTimeout((function(){t.box.modal("hide")}),2e3)}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))}else t.ShowAlert("Sorry, You are not authorized to access this section.","failure",!0,"Alert")}))}}},b=g,A=a("2877"),D=Object(A["a"])(b,o,n,!1,null,null,null);t["default"]=D.exports},"5c60":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.popupHeader))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){e.$emit("close"),e.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("Form",{ref:"ConvertLeadIntoDeal",attrs:{tag:"form"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.valid,n=t.errors;return[e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("div",{class:{fade:e.isConvertLeadToOthers},attrs:{id:"divConvertLeadIntoAccount"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"card-body p-0"},e._l(e.LeftViewData,(function(t,o){return a("div",{key:o,staticClass:"panel1"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[e._v(e._s(e.$t(t.group_name,"")))])])]),a("div",{staticClass:"row"},[e._l(t.LeftViewData,(function(t,o){return a("div",{key:o,staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[a("strong",[e._v(e._s(e.$t(t.name,t.display_name))+":")]),"date"==t.dt_code||"datetime"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.$options.filters.formatDate(t.value)))]):e._e(),"decimal"==t.dt_code?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"0.00":e.$options.filters.currency(t.value)))]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"!=t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"--":t.value))]):e._e(),"date"!=t.dt_code&&"datetime"!=t.dt_code&&"decimal"!=t.dt_code&&"Lookup"==t.picklist_options?a("span",{staticClass:"answer rightlabeltext ml-1"},[e._v(e._s(e.isBlank(t.value)?"--":e.FilterDDLandNormalValue(t.value)))]):e._e()])])])})),a("div",{staticClass:"col-md-6"},[a("label",[a("strong",[e._v("Company Name:")]),a("span",{staticClass:"answer rightlabeltext",domProps:{innerHTML:e._s(e.LeadCompany)}})])])],2)])})),0)])]),a("div",{staticClass:"heading-border mt-2"},[a("h5",{staticClass:"h5"},[a("span",[e._v("New Account")])])]),a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"form-group row mt-2"},[a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",disabled:"InProgress"==e.LeadStatus,name:"Account",value:"1"},domProps:{checked:e._q(e.IsActiveAccount,"1")},on:{click:function(t){return e.ChangeAccount(e.IsActiveAccount)},change:function(t){e.IsActiveAccount="1"}}}),e._v(" Create New:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.NewAccName,expression:"NewAccName"}],staticClass:"form-control",attrs:{type:"text",readonly:2==e.IsActiveAccount,name:e.NewAccName},domProps:{value:e.NewAccName},on:{input:function(t){t.target.composing||(e.NewAccName=t.target.value)}}})]),a("div",{staticClass:"col-md-6"},[a("label",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.IsActiveAccount,expression:"IsActiveAccount"}],attrs:{type:"radio",name:"Account",value:"2"},domProps:{checked:e._q(e.IsActiveAccount,"2")},on:{click:function(t){return e.ChangeAccount(e.IsActiveAccount)},change:function(t){e.IsActiveAccount="2"}}}),e._v(" Select Account:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.OldAccountId,expression:"OldAccountId"}],staticClass:"form-control",attrs:{readonly:1==e.IsActiveAccount},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.OldAccountId=t.target.multiple?a:a[0]},function(t){return e.getName(e.ACCountDDL,e.OldAccountId)}]}},e._l(e.ACCountDDL,(function(t,o){return a("option",{key:o,domProps:{value:t.value}},[e._v(" "+e._s(t.name))])})),0)])])])]),e.afterConvertToAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-2 p-0"},[""!=e.successMessage&&e.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-success alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[e._v("×")]),e._v(" "+e._s(e.successMessage)+" ")])]):e._e(),e.isContactForExistsAccount?e._e():a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2"},[a("div",{staticClass:"alert alert-danger alert-dismissible mt-1"},[a("a",{staticClass:"close",attrs:{href:"javascript:;","data-dismiss":"alert","aria-label":"close"}},[e._v("×")]),e._v(" "+e._s(e.successMessage)+" ")])]),e.isContactForExistsAccount?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 text-center"},[e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="@Resources.AddContract",e.FetchData(e.createdAccountID,"CONTRACT")}}},[a("em",{staticClass:"fa fa-plus"}),e._v(e._s(e.$t("AddContract")))]),e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="@Resources.Add @Resources.Deal",e.FetchData(e.createdAccountID,"DEAL")}}},[a("em",{staticClass:"fa fa-plus"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Deal")))])]):e._e()]):e._e(),e.isConvertLeadToOthers?a("div",{attrs:{id:"divConvertLeadIntoDealAfterAccount"}},[a("div",{staticClass:"d-flex flex-wrap",attrs:{id:"divMainDealData"}},[e._l(e.GroupBy,(function(t,o){return a("div",{key:o,staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t(t.group_name,t.group_display_name)))])])])]),a("div",{staticClass:"d-flex flex-wrap row"},e._l(t.dealData,(function(t,n){return a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.dependent_show_type,expression:"item.dependent_show_type == 1"}],key:n,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==t.form_field_visibility||"contact_name"==t.name||"mobile_phone"==t.name||"home_phone"==t.name||"business_phone"==t.name||"lead_source_id"==t.name||"referred_by"==t.name,"col-lg-12 col-xl-12":"single"==t.layout_type,"col-lg-6 col-xl-6":"double"==t.layout_type,"col-lg-4 col-xl-4":"triple"==t.layout_type,"col-lg-3 col-xl-3":"four"==t.layout_type}},["NO"==t.form_field_visibility?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],attrs:{type:"hidden",id:t.name},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}):e._e(),"YES"==t.form_field_visibility?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t(t.label,t.display_name))+": "),t.is_required?a("span",{class:{"text-danger":t.is_required}},[e._v("*")]):e._e()]),"date"==t.dt_code?a("div",{staticClass:"input-group"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors,i=o.changed;return["date"==t.dt_code?a("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5,"min-date":"contract_end_date"==t.name?e.DependentOption[0].minDate:"billing_end_date"==t.name?e.DependentOption[1].minDate:e.getMinDate(),name:t.name},on:{dayclick:function(a){return e.DependentDateObject(t,t.value)},"update:modelValue":i},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.inputValue,i=t.inputEvents,s=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":n[0]},domProps:{value:o}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):e._e(),"date"==t.dt_code&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)})],1):e._e(),"Lookup"!=t.picklist_options&&"date"!=t.dt_code&&"radio"!=t.dt_code&&"select"!=t.dt_code&&"textarea"!=t.dt_code&&"checkbox"!=t.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:e.GetValidation(t),name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=t.picklist_options&&n[0]},attrs:{type:"text",id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code)},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}),"Lookup"!=t.picklist_options&&"date"!=t.dt_code&&"radio"!=t.dt_code&&"select"!=t.dt_code&&"textarea"!=t.dt_code&&"checkbox"!=t.dt_code&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)}):e._e(),"textarea"==t.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==t.dt_code&&n[0]},attrs:{id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code)},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}}),"textarea"==t.dt_code&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)}):e._e(),"radio"==t.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(n,i){return a("div",{key:i,staticClass:"form-check form-check-inline custom-control mx-2 p-0 custom-radio"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.errors,l=i.touched,c=i.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+t.custom_field_id+"_"+n.value,name:t.name,"data-resource":n.name,type:"radio"},domProps:{value:n.value,checked:n.value==t.value,checked:e._q(t.value,n.value)},on:{change:[function(a){return e.$set(t,"value",n.value)},function(a){return e.showDependentItem(t,n.value,o,e.index)}]}}),a("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-2 pt-1 dynamic",attrs:{for:"rdo_"+t.custom_field_id+"_"+n.value}},[e._v(e._s(n.name))]),"radio"==t.dt_code&&l&&c?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)})),0)]):e._e(),"checkbox"==t.dt_code?a("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[a("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(o,n){return a("div",{key:n,staticClass:"custom-control custom-checkbox"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+t.custom_field_id+"_"+o.value,name:t.name,"data-resource-id":o.name,type:"checkbox"},domProps:{value:o.value,checked:Array.isArray(t.value)?e._i(t.value,o.value)>-1:t.value},on:{change:function(a){var n=t.value,i=a.target,s=!!i.checked;if(Array.isArray(n)){var l=o.value,c=e._i(n,l);i.checked?c<0&&e.$set(t,"value",n.concat([l])):c>-1&&e.$set(t,"value",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(t,"value",s)}}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+t.custom_field_id+"_"+o.value}},[e._v(e._s(o.name))]),"checkbox"==t.dt_code&&i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(i[0]))]):e._e()]}}],null,!0)})],1)})),0)]):e._e(),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"custom"==t.dropdown_type?a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors,i=o.changed;return[a("Multiselect",{class:{"disable-all":!0,"is-invalid":"account_id"==t.name&&n[0]},attrs:{placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,"select"),"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:e.MakeNormalArray(t.select_options),object:!0,label:"name",disabled:"account_id"==t.name||"status_id"==t.name},on:{"search-change":function(a){return e.onSearch(a,t)},select:function(a){return e.setSelectedValue(t,a)},"update:modelValue":i},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"custom"==t.dropdown_type&&"status_id"==t.name&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)}):e._e(),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type?a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"disable-all":!0,"is-invalid":"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type&&n[0]},attrs:{id:t.name,name:t.name,placeholder:e.GetFieldPlaceHolder(t.label,t.display_name,t.dt_code),disabled:"account_id"==t.name||"status_id"==t.name},on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",a.target.multiple?o:o[0])}}},[a("option",{attrs:{value:"",selected:"selected"}},[e._v("Select")]),e._l(e.MakeNormalArray(t.select_options),(function(t,o){return a("option",{key:o,domProps:{value:String(t.value)}},[e._v(e._s(t.name))])}))],2),"Lookup"==t.picklist_options&&"select"==t.dt_code&&"normal"==t.dropdown_type&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)}):e._e(),"Lookup"!=t.picklist_options&&"select"==t.dt_code?a("Field",{staticClass:"w-100",attrs:{rules:{required:t.is_required},name:e.GetFormSchemaFieldName(t.name,t.display_name)},scopedSlots:e._u([{key:"default",fn:function(o){var n=o.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=t.picklist_options&&"select"==t.dt_code&&n[0]},attrs:{id:t.name,name:t.name},on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",a.target.multiple?o:o[0])}}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(t.picklist_options,t.dt_code),(function(o,n){return a("option",{key:n,domProps:{selected:t.value==o.value,value:o.value}},[e._v(e._s(o.name))])}))],2),"Lookup"!=t.picklist_options&&"select"==t.dt_code&&n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.name}},[e._v(e._s(n[0]))]):e._e()]}}],null,!0)}):e._e()],1):e._e()])})),0)])})),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t("Contacts")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-1 mb-1 p-0"},[e.noRecordForTab?e._e():a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{id:"table-contacts-content","aria-describedby":"modalconvertlead"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",{staticClass:"mr-3"},[e._v("#")])]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("FirstName")))]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("LastName")))]),a("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Email")))])])]),a("tbody",e._l(e.contactsData,(function(t,o){return a("tr",{key:o},[a("td",{staticClass:"text-center"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clientCheck,expression:"clientCheck"}],staticClass:"chkitems",attrs:{type:"radio",value:"-1",name:"radio_clients"},domProps:{checked:e._q(e.clientCheck,"-1")},on:{change:function(t){e.clientCheck="-1"}}})]),a("td",[e._v(e._s(t.first_name))]),a("td",[e._v(e._s(t.last_name))]),a("td",[e._v(e._s(t.email_id))])])})),0)])])]),e.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])]),e.isProjectShow?a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-2 validationfixer p-0"},[a("div",{staticClass:"passpolicy-detailshead mb-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[e._v(e._s(e.$t("Select"))+" "+e._s(e.$t("Project")))])])])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 step1fixer"},[a("div",{staticClass:"table-responsive listing tableborder customborder_lightgrey"},[a("table",{staticClass:"table-sorting table table-bordered mb-0",attrs:{"aria-describedby":"modalproject"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",[e._v(e._s(e.$t("ProjectTemplate")))])]),a("th",{staticStyle:{width:"50%"},attrs:{scope:"col"}},[a("span",{staticClass:"d-flex"},[e._v(e._s(e.$t("ProjectName"))),a("span",{staticClass:"text-danger"},[e._v("*")])])])])]),a("tbody",[a("tr",[a("td",[a("Field",{attrs:{name:"ProjectTemplate",rules:{required:!0},label:"Project Template"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.projectDetail.ProjectTemplate,expression:"projectDetail.ProjectTemplate"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.projectDetail,"ProjectTemplate",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectTemplate")))]),e._l(e.ProjectTemplateListJson,(function(t,o){return a("option",{key:o,domProps:{value:t.value}},[e._v(" "+e._s(t.name))])}))],2),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectTemplate"}},[e._v(e._s(o[0]))]):e._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{name:"ProjectName",rules:{required:0==e.clientCheck},label:"Project Name"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.projectDetail.ProjectName,expression:"projectDetail.ProjectName"}],class:{"form-control":!0,"is-invalid":o[0]},attrs:{type:"text",placeholder:"ProjectName",name:"ProjectName"},domProps:{value:e.projectDetail.ProjectName},on:{keyup:function(t){return e.HideMessage()},input:function(t){t.target.composing||e.$set(e.projectDetail,"ProjectName",t.target.value)}}}),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProjectName"}},[e._v(e._s(o[0]))]):e._e()]}}],null,!0)}),"1"==e.Duplicate?a("div",{staticClass:"text-danger"},[e._v(" "+e._s(e.existName)+" "+e._s(e.$t("AddContract")))]):e._e()],1)])])])])])]):e._e()],2)]):e._e(),a("div",{staticClass:"col-lg-12 float-left mt-2 px-0"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right py-3"},[!e.afterConvertToAccount&&e.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:e.GoPrevious}},[a("em",{staticClass:"fa  fa-angle-left mr-2"}),e._v(e._s(e.$t("Previous")))]):e._e(),e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="Add Contract",e.convertLead("CONTRACT")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),e._v(e._s(e.$t("AddContract")))]),e.afterConvertToAccount||e.isConvertLeadToOthers?e._e():a("a",{staticClass:"btn btn-success save-btn mr-2",attrs:{href:"javascript:;"},on:{click:function(t){e.popupHeader="Add Deal",e.convertLead("DEAL")}}},[a("em",{staticClass:"fa fa-plus mr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Deal")))]),!e.afterConvertToAccount&&e.isConvertLeadToOthers?a("a",{staticClass:"btn btn-success save-btn mr-2",class:{disabled:e.SaveDisabled},attrs:{href:"javascript:;"},on:{click:function(t){return e.SubmitData(o,n)}}},[a("em",{staticClass:"fa fa-save mr-2"}),e._v(e._s(e.$t("Save")))]):e._e(),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:e.closePopup}},[a("em",{staticClass:"fa fa-times mr-2"}),e._v(e._s(e.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-3"},[a("span",{staticClass:"mandatory"},[e._v(e._s(e.$t("MandatoryString")))])])])])])]}}])})],1)])])],1)},n=[],i=a("53ca"),s=(a("99af"),a("b0c0"),a("498a"),a("ac1f"),a("00b4"),a("4de4"),a("d3b7"),a("7db0"),a("caad"),a("2532"),a("5319"),a("e9c4"),a("9769")),l={props:{leadId:null,moduleName:null,subModuleCode:null,callFrom:null},data:function(){return{isLoading:!1,noRecordLeadConvert:!1,leadConvertContactsData:null,LeadConvertContactsHeader:null,afterConvertToAccount:!1,labelForAdd:"",isSelected:!1,isErrorMessage:"",accountName:"",SortBy:"",SortExp:"",PageSize:50,PageNumber:1,dealData:[],GroupBy:[],isConvertLeadToOthers:!1,createdAccountID:0,successMessage:"",contactListForAddDeal:[],saveFor:"",submited:!1,clientData:[],ProjectTemplateListJson:[],clientCheck:-1,popupHeader:"Convert Lead",Duplicate:"0",existName:"",SaveDisabled:!1,projectDetail:{ProjectName:"",ProjectTemplate:""},DependentOption:[{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}],isProjectShow:!1,isContactForExistsAccount:!0,LeftViewData:[],AccName:"",NewAccName:"",ACCountDDL:[],OldAccountId:0,IsActiveAccount:0,contactId:0,LeadStatus:"",LeadCompany:"",Leadaddr1:"",Leadaddr2:"",Leadcity:"",Leadzip:"",Leadstate:"",contactsData:[],contactsHeader:[],noRecordForTab:!1,dataToConvertLead:{},leadName:"",clienFirstName:"",clientLastName:"",clientaddr1:"",clientaddr2:"",clientcity:"",clientstate:"",clientzip:"",clientcompany:"",defaultemailid:null,popover:{visibility:"click"}}},created:function(){this.fetchData(),this.fetchConvertLeadContacts(),this.accountName=this.leadName,this.GetProjectTemplatelist(),this.fetchContacts()},methods:{fetchData:function(){var e="id=".concat(this.leadId,"&refId=").concat(this.leadId,"&moduleName=").concat(this.moduleName,"&subModuleCode=").concat(this.subModuleCode),t=this;t.isLoading=!0,s["a"].FormLayoutView(e).then((function(e){t.isLoading=!1;var a=e.data.LEFTDATA;a=$.grep(a,(function(e,t){return"YES"==e.form_field_visibility})),null!=a&&a.length>0&&($.grep(a,(function(e,a){"role_title_id"==e.name&&(t.dataToConvertLead.roletitle=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"home_phone"==e.name&&(t.dataToConvertLead.home_phone=e.value),"business_phone"==e.name&&(t.dataToConvertLead.business_phone=e.value),"contact_number"==e.name&&(t.dataToConvertLead.contact_number=e.value),"account_id"==e.name&&(t.dataToConvertLead.account_id=e.value),"channel_id"==e.name&&(t.dataToConvertLead.lead_source_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"industry_type_id"==e.name&&(t.dataToConvertLead.industry_type_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_country"==e.name&&(t.dataToConvertLead.lead_country=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"lead_state"==e.name&&(t.dataToConvertLead.lead_state=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value),"external_source_id"==e.name?t.dataToConvertLead.referred_by=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"status_id"==e.name?t.LeadStatus=t.FilterDDLandNormalValue(e.value):"client_first_name"==e.name?t.clienFirstName=null!=e.value?e.value:"":"client_last_name"==e.name?t.clientLastName=null!=e.value?e.value:"":"lead_address1"==e.name?t.clientaddr1=null!=e.value?e.value:"":"lead_address2"==e.name?t.clientaddr2=null!=e.value?e.value:"":"lead_city"==e.name?t.clientcity=null!=e.value?e.value:"":"lead_state"==e.name?t.clientstate=null!=e.value?JSON.parse(e.value)[0].name:"":"lead_zipcode"==e.name?t.clientzip=null!=e.value?e.value:"":"lead_company_name"==e.name?t.clientcompany=null!=e.value?e.value:"":"client_email"==e.name?t.defaultemailid=null!=e.value?e.value:"":"expected_close_date"==e.name?t.dataToConvertLead.closing_date=e.value:"money_value"==e.name?t.dataToConvertLead.ammount=e.value:"campaign_id"==e.name?t.dataToConvertLead.campaign_id=null==JSON.parse(e.value)?"":JSON.parse(e.value)[0].value:"lead_owner_id"==e.name&&(t.dataToConvertLead.lead_owner=e.value),"commission_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=20),"agreement_type"==e.name&&""!=$.trim(e.value)&&(e.form_field_visibility="YES",e.display_order=19)})),""==t.leadName&&(t.leadName=t.clienFirstName+" "+t.clientLastName),t.dataToConvertLead.lead_name=t.leadName)}))},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(o){console.log(o)}},ChangeAccount:function(e){this.createdAccountID="2"==e?0:this.OldAccountId},fetchContacts:function(){var e=this;e.isLoading=!0;var t="sourceid=".concat(e.leadId,"&submodulecode=CRM_LEADS");s["a"].PrimaryContactDetails(t).then((function(t){e.isLoading=!1,null!=t.data?(e.contactsData=t.data.data,e.contactsHeader=t.data.schema,setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordForTab=!1):(e.noRecordForTab=!0,e.contactsData=null)}))},getName:function(e,t){var a=e.filter((function(e){return e.value==t}));this.AccName=a[0].name,this.createdAccountID=t},GetAssociatedAccounts:function(e){var t=this,a="id=&moduleName=CRM&type=CONTACT_ACCOUNTS&refId=".concat(e);s["a"].getDDLData(a).then((function(e){var a=[];if(null!=e.data&&""!=e.data&&(a=e.data.DATA),t.ACCountDDL=a,a.length>0)if(t.OldAccountId=a[0],t.AccName=a[0].name,t.createdAccountID>0){t.OldAccountId=t.createdAccountID,t.IsActiveAccount=2;var o=a.filter((function(e){return e.value==t.createdAccountID}));null!=o&&o.length>0?t.AccName=o[0].name:null!=a&&a.length>0&&(t.createdAccountID=a[0],t.AccName=a[0].name)}else t.createdAccountID=t.OldAccountId,t.IsActiveAccount=1;else t.IsActiveAccount=1}))},DependentDateObject:function(e,t){if("contract_start_date"==e.name){var a=new Date;a="undefined"!==typeof t&&""!=t?new Date(Date.parse(t)):new Date(Date.now()),this.DependentOption[0]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(e,t){$.each(t.Data,(function(e,t){"contract_end_date"==t.name&&(t.value="")}))}))}else if("billing_start_date"==e.name){a=new Date;a="undefined"!==typeof t&&""!=t?new Date(Date.parse(t)):new Date(Date.now()),this.DependentOption[1]={format:null,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},$.each(this.GroupBy,(function(e,t){$.each(t.Data,(function(e,t){"billing_end_date"==t.name&&(t.value="")}))}))}var o=this;setTimeout((function(){var t=$('div[name="'.concat(e.name,'"]')),a=$('div[name="'.concat(e.name,'"] input:first')),n=t.attr("value");n?(a.removeClass("is-invalid"),a.parent().parent().find("span[name='".concat(e.name,"']")).removeClass("d-block").addClass("d-none")):(a.addClass("is-invalid"),a.parent().next().is("span")?a.parent().next().removeClass("d-none"):a.parent().parent().append('<span name="'.concat(e.name,'" class="invalid-feedback d-block">').concat(o.GetFormSchemaFieldName(e.name,e.display_name)," is required.</span>")))}),200)},HideMessage:function(){this.Duplicate=0,$("input[name='ProjectName']").removeClass("is-invalid")},isBlank:function(e){return!e||/^\s*$/.test(e)},GetProjectTemplatelist:function(){var e=this,t="id=&moduleName=CRM&type=PROJECT";s["a"].getDDLData(t).then((function(t){var a=t.data;if(null!=a)return e.ProjectTemplateListJson=a.DATA,e.ProjectTemplateListJson}))},onSearch:function(e,t,a){this.searchSelectData(e,this,t,a)},searchSelectData:function(e,t,a,o){this.ShowSearchData(e,t,a,o)},ShowSearchData:function(e,t,a,o){if("contact_id"==a.name&&"select"==dt_code&&null!=t.contactListForAddDeal){var n=[];return n=$.grep(t.contactListForAddDeal,(function(t,a){return t.first_name.includes(e)})),a.select_options==n}"undefined"==typeof o&&(o=0);var i="id=&moduleName="+t.moduleName+"&type="+a.field_code;"fill"==a.dependent_type&&(i+="&refId="+o),s["a"].getDDLData(i+"&search="+escape(e)).then((function(e){var t=e.data;if(null!=t)return a.select_options=t.DATA,a.select_options}))},setSelectedValue:function(e,t){var a=this;try{Array.isArray(t)?e.value="object"===Object(i["a"])(t[0])&&null!==t[0]?t[0].value:t[0]:(e.has_dependent>0&&$.each(a.GroupBy,$.proxy((function(o,n){$.each(n.Data,(function(o,n){n.parent_id==e.custom_field_id&&"fill"==n.dependent_type&&a.ShowSearchData("",a,n,t.value)}))}),this)),e.value=t)}catch(o){}},fetchConvertLeadContacts:function(){var e=this;e.isLoading=!0;var t=""!=$.trim(e.dataToConvertLead.account_id)?e.dataToConvertLead.account_id:"",a="",o="";e.createdAccountID=0,""!=t&&t>0&&(e.createdAccountID=t,o=t),a=e.subModuleCode,o=e.leadId;var n="id="+o+"&subModuleCode="+a+"&sortBy="+e.SortBy+"&sortExp="+e.SortExp+"&pageSize="+e.PageSize+"&pageNumber="+e.PageNumber,i="id="+e.leadId+"&moduleName=CRM&subModuleCode=CRM_LEADS";s["a"].ContactListing(n).then((function(t){if(e.isLoading=!1,null!=t.data)if(e.LeadConvertContactsHeader=t.data.schema,null!=t.data.data&&t.data.data.length>0){var a=t.data.data.filter((function(e){return 1==e.IsPrimary}));null!=a&&a.length>0?e.contactId=a[0].contact_id:(e.contactId=t.data.data[0].contact_id,t.data.data[0].IsPrimary=!0),e.leadConvertContactsData=t.data.data,setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordLeadConvert=!1}else e.noRecordLeadConvert=!0;else e.noRecordLeadConvert=!0})),s["a"].FormLayoutView(i).then((function(t){if(null!=t.data){var a=t.data.LEFTDATA;if(a=$.grep(a,(function(e,t){return"YES"==e.form_field_visibility})),null!=a&&a.length>0){var o=a[0].group_id,n="",i="",s="",l="",c="",r="",d="",u="",m="";$.each(a,$.proxy((function(t,v){var p=$.grep(e.LeftViewData,(function(e,t){return e.group_id==o}));if(0==p.length){var h=$.grep(a,(function(t,a){if("client_first_name"==t.name&&(n=t.value),"client_last_name"==t.name&&(i=t.value),"lead_address1"==t.name&&(s=t.value),"lead_address2"==t.name&&(l=t.value),"lead_city"==t.name&&(c=t.value),"lead_company_name"==t.name&&(m=t.value),"lead_state"==t.name){d=null==JSON.parse(t.value)?"":JSON.parse(t.value)[0].value;var v=JSON.parse(t.value);null!=v&&v.length>0&&(r=v[0].name)}if("lead_zipcode"==t.name&&(u=t.value),t.group_id==o&&("client_first_name"==t.name||"client_last_name"==t.name||"client_email"==t.name||"contact_number"==t.name||"home_phone"==t.name||"business_phone"==t.name))return t;e.LeadCompany=m,e.Leadaddr1=s,e.Leadaddr2=l,e.Leadcity=c,e.Leadzip=u,e.Leadstate=d}));if(h.length>0){var _={group_id:o,group_name:h[0].group_name,LeftViewData:h};e.LeftViewData.push(_)}}o=v.group_id}),this)),e.NewAccName=""==m||null==m?$.trim($.trim(n)+" "+$.trim(i)+" "+$.trim(m)+" "+$.trim(s)+" "+$.trim(l)+" "+$.trim(c)+" "+$.trim(r)+" "+$.trim(u)):$.trim(m),e.NewAccName=e.NewAccName.replace(/ +(?= )/g,"")}}else e.noRecordLeadConvert=!0;setTimeout((function(){e.GetAssociatedAccounts(e.contactId)}),400)}))},getLeadContactsIFAssociatedAccountDontHaveContacts:function(e,t){var a=this;if(a.createdAccountID>0){var o="id="+e+"&subModuleCode="+t+"&sortBy="+a.SortBy+"&sortExp="+a.SortExp+"&pageSize="+a.PageSize+"&pageNumber="+a.PageNumber;s["a"].ContactListing(o).then((function(e){null!=e.data?(a.LeadConvertContactsHeader=e.data.schema,null!=e.data.data&&e.data.data.length>0?(a.leadConvertContactsData=e.data.data,setTimeout((function(){a.CheckBoxBootstrap()}),100),a.afterConvertToAccount=!0,a.convertLead(),a.noRecordLeadConvert=!1):a.noRecordLeadConvert=!0):a.noRecordLeadConvert=!0}))}},getClientData:function(e){var t={user_id:0,first_name:"",last_name:"",email_id:"",account_id:e};this.clientData.push(t)},FetchData:function(e,t){var a,o=[],n=this;n.isLoading=!0,n.createdAccountID>0?(n.contactListForAddDeal=[],$.each(n.leadConvertContactsData,(function(e,t){var a={name:t.first_name+" "+t.last_name,value:t.contact_id,first_value:null,second_value:null};o.push(t.contact_id),n.contactListForAddDeal.push(a)}))):$("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var e=this;o.push($(e).val());var t=[];if(t=$.grep(n.leadConvertContactsData,(function(t,a){return t.contact_id==$(e).val()})),t.length>0){var a={name:t[0].first_name+" "+t[0].last_name,value:t[0].contact_id,first_value:null,second_value:null};n.contactListForAddDeal.push(a)}}));var i="";"DEAL"==t?(n.isProjectShow=!1,a=[{id:e,name:"account_id"},{id:n.FilterDDLValueForID(n.dataToConvertLead.lead_owner),name:"deal_owner_id"}],n.labelForAdd='{{$t("Deal ")}} {{$t("Deal ")}}',i="CRM_DEALS"):"CONTRACT"==t&&(n.isProjectShow=!0,a=[{id:e,name:"account_id"}],n.labelForAdd="AddContract",i="CRM_CONTRACTS"),n.saveFor=t;var l=encodeURIComponent(JSON.stringify(a)),c="moduleName=CRM&subModuleCode="+i+"&otherData="+l;s["a"].getFormLayout(c).then((function(a){if(n.isLoading=!1,n.GroupBy=[],n.dealData=a.data.data,null!=n.dealData&&n.dealData.length>0){var o=n.dealData[0].group_id;$.each(n.dealData,$.proxy((function(a,i){o=i.group_id;var s=$.grep(n.GroupBy,(function(e){return e.group_id==o}));if(0==s.length){var l=$.grep(n.dealData,(function(e){return e.group_id==o}));if(e>0&&$.each(l,(function(a,o){if("select"==o.dt_code)try{o.value=o.value.trim()}catch(s){console.log("value is null while trimming")}if("Lookup"==o.picklist_options&&(o.select_options=n.MakeNormalArray(o.select_options),o.select_value=o.select_options,"account_id"==o.name&&(o.value=o.select_options.find((function(t){return t.value==e})))),"Lookup"==o.picklist_options&&"custom"==o.dropdown_type&&o.select_options&&""==o.value&&(o.value=o.select_options[0]),"lead_id"==o.name&&(o.value=n.leadId),"DEAL"==t)"closing_date"==o.name&&(o.value=null!=n.dataToConvertLead.closing_date&&n.dataToConvertLead.closing_date.length>0?n.dataToConvertLead.closing_date:""),"deal_name"==o.name&&(o.value=1==n.IsActiveAccount?n.NewAccName:n.AccName),"deal_name"==o.name&&(o.value=n.dataToConvertLead.lead_name),"email_id"==o.name&&(o.value=n.dataToConvertLead.email_id),"amount"==o.name&&(o.value=null!=n.dataToConvertLead.ammount&&n.dataToConvertLead.ammount.length>0?n.dataToConvertLead.ammount:""),"Lookup"==o.picklist_options&&"status_id"==o.name&&(o.value=1001),"campaign_id"==o.name&&(o.value=n.dataToConvertLead.campaign_id),"Lookup"==o.picklist_options&&"contact_name"==o.name?(o.select_options=n.contactListForAddDeal,null!=n.contactsData&&n.contactsData.length>0&&(o.value=n.contactsData[0].contact_id)):"Lookup"==o.picklist_options&&"lead_source_id"==o.name?o.value=n.dataToConvertLead.lead_source_id:"Lookup"==o.picklist_options&&"referred_by"==o.name?o.value=n.dataToConvertLead.referred_by:"deal_address1"==o.name?o.value=n.clientaddr1:"deal_address2"==o.name?o.value=n.clientaddr2:"deal_city"==o.name?o.value=n.clientcity:"deal_state"==o.name?o.value=n.dataToConvertLead.lead_state:"deal_zipcode"==o.name?o.value=n.clientzip:"deal_country"==o.name?o.value=n.dataToConvertLead.lead_country:"deal_company_name"==o.name?o.value=n.clientcompany:"industry_type_id"==o.name?o.value=n.dataToConvertLead.industry_type_id:"role_title_id"==o.name?o.value=n.dataToConvertLead.roletitle:"email_id"==o.name?o.value=n.defaultemailid:"home_phone"==o.name?o.value=n.dataToConvertLead.home_phone:"business_phone"==o.name?o.value=n.dataToConvertLead.business_phone:"mobile_phone"==o.name&&(o.value=n.dataToConvertLead.contact_number);else if("CONTRACT"==t){if("contract_start_date"!=o.name&&"contract_end_date"!=o.name||(o.value=null!=n.dataToConvertLead.closing_date&&n.dataToConvertLead.closing_date.length>0?n.$options.filters.formatDate(n.dataToConvertLead.closing_date):"",o.value=new Date(Date.parse(o.value))),"contract_name"==o.name&&(o.value=n.accountName),"total_price"==o.name){o.value=null!=n.dataToConvertLead.ammount&&n.dataToConvertLead.ammount.length>0?n.dataToConvertLead.ammount:"";var i=o.value;null==i&&(i=0),i+="",i.includes(".")&&(o.length=o.length+3)}"Lookup"==o.picklist_options&&"status_id"==o.name&&(o.value=1001)}})),l.length>0){var c={group_id:o,group_name:l[0].group_name,dealData:l};n.GroupBy.push(c)}}}),this)),n.isConvertLeadToOthers=!0,n.afterConvertToAccount=!1}setTimeout((function(){$("div [name=account_id]").find(".vs__actions .clear").html("")}),600),setTimeout((function(){n.CheckBoxBootstrap()}),100),setTimeout((function(){n.RadioButtonBootstrap()}),500)})),$("#status_id option:selected").text("Select")},SubmitData:function(e,t){var a=this,o=this,n=!1,i=o.projectDetail.ProjectName;o.submited=!0,o.Duplicate=0,o.$refs.ConvertLeadIntoDeal.validate().then((function(e){if(e){o.isLoading=!0,o.SaveDisabled=!0;var t=o.dealData,l=[],c=[],r=$("input[name='radio_clients']:checked").val(),d=$.grep(o.clientData,(function(e,t){return e.user_id==r}));if(r)if(""!=i){var u="name="+i+"&type=PROJECT";s["a"].CheckDuplicate(u).then((function(e){var a=e.data;if(null!=a&&(o.existName=i,o.Duplicate=a,1==o.Duplicate&&($("input[name='ProjectName']").addClass("is-invalid"),n=!0,o.SaveDisabled=!1),!n||"DEAL"==o.saveFor)){$.each(t,(function(e,t){var a={field_name:t.name,required:t.is_required,length:t.length,type:t.validation_type};if("account_id"==t.name)var o={field_name:t.name,field_value:t.value.value,custom_field_id:t.custom_field_id};else o={field_name:t.name,field_value:t.value,custom_field_id:t.custom_field_id};l.push(o),c.push(a)}));var r={data:l,validation:c,clientData:d,ProjectDetail:o.projectDetail},u=JSON.stringify(r),m="DEAL"==o.saveFor?"PostDeal":"PostContract";s["a"].PostDealOrContract(m,u).then((function(e){o.isLoading=!1,"1"==e.data[0].Code?(o.$emit("close"),o.ShowAlert(o.$t("AddedSuccess",[o.$t("DEAL"==o.saveFor?"Deal":"Contract")]),"success",!0,o.$t("Alert")),"LeadListing"==o.callFrom&&($("[id^='ChangeOwnerId']").removeClass("enable").addClass("disabled"),$("[id^='CloseLeadId']").removeClass("enable").addClass("disabled"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"))):o.ShowAlert(o.$t("AddedError",[o.$t("DEAL"==o.saveFor?"Deal":"Contract")]),"failure",!0,o.$t("Alert")),o.SaveDisabled=!1}))}}))}else{$.each(t,(function(e,t){"deal_owner_id"!=t.name&&"account_id"!=t.name||(t.value=t.value.value);var a={field_name:t.name,required:t.is_required,length:t.length,type:t.validation_type},o={field_name:t.name,field_value:t.value,custom_field_id:t.custom_field_id};l.push(o),c.push(a)}));var m={data:l,validation:c,clientData:d},v=JSON.stringify(m);u="DEAL"==o.saveFor?"PostDeal":"PostContract";s["a"].PostDealOrContract(u,v).then((function(e){"1"==e.data[0].Code?(o.$emit("close"),o.ShowAlert(o.$t("AddedSuccess",[o.$t("DEAL"==o.saveFor?"Deal":"Contract")]),"success",!0,o.$t("Alert")),o.FetchData()):o.ShowAlert(o.$t("AddedError",[o.$t("DEAL"==o.saveFor?"Deal":"Contract")]),"failure",!0,o.$t("Alert")),o.SaveDisabled=!1})),o.Duplicate=0}else o.ShowAlert(o.$t("Please Select Contact"),"warning",!0,o.$t("Alert")),o.SaveDisabled=!1}else console.log(a.$refs.ConvertLeadIntoDeal.errors)}))},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},convertLead:function(e){var t=[],a=this,o="";if(a.clientData=[],a.createdAccountID>0?$.each(a.leadConvertContactsData,(function(e,o){var n={name:o.first_name+" "+o.last_name,value:o.contact_id,first_value:null,second_value:null};t.push(o.contact_id),a.contactListForAddDeal.push(n)})):($("#ConvertLeadContacts table tr td input[type='checkbox']:checked").each((function(){var e=this;t.push($(e).val());var o=[];if(o=$.grep(a.leadConvertContactsData,(function(t,a){return t.contact_id==$(e).val()})),o.length>0){var n={name:o[0].first_name+" "+o[0].last_name,value:o[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(n)}})),o=a.$t("LeadConvertSuccess")+a.$t("Lead")+a.$t("Account")),0==a.contactId)return a.ShowAlert("Please add contact first.","warning",!0,a.$t("Alert")),!1;var n=$.trim(1==a.IsActiveAccount?a.NewAccName:a.AccName);if(""==n)return a.ShowAlert("Please fill Account Name.","warning",!0,a.$t("Alert")),!1;if(t.length<1){t.push(a.contactId);var i=[];if(i=$.grep(a.leadConvertContactsData,(function(e,t){return e.contact_id==a.contactId})),i.length>0){var l={name:i[0].first_name+" "+i[0].last_name,value:i[0].contact_id,first_value:null,second_value:null};a.contactListForAddDeal.push(l)}}if(t.length>0){a.accountName=n;var c={sourceId:a.leadId,moduleName:a.moduleName,subModuleCode:a.subModuleCode,accountName:a.accountName,contactIds:t,accountId:1==a.IsActiveAccount||""==$.trim(a.createdAccountID)?0:a.createdAccountID,company:a.LeadCompany,address1:a.Leadaddr1,address2:a.Leadaddr2,city:a.Leadcity,zip:a.Leadzip,state:a.Leadstate},r=JSON.stringify(c);s["a"].ConvertLead(r).then((function(t){if("Success"==t.data[0].Status){var n=a.MakeNormalArray(t.data[0].Value);a.successMessage=o,a.isConvertLeadToOthers=!0,a.createdAccountID=n.ACCOUNT,a.clientData=n.CLIENTS,a.getClientData(n.ACCOUNT),"DEAL"==e?setTimeout((function(){a.FetchData(n.ACCOUNT,"DEAL")}),300):"CONTRACT"==e&&setTimeout((function(){a.FetchData(n.ACCOUNT,"CONTRACT")}),300)}}))}else if(a.createdAccountID>0){var d=a.FilterDDLandNormalValue(a.dataToConvertLead.account_id);a.isContactForExistsAccount=!1,vm.$t("SubmitSuccess"),a.successMessage=a.$t("AccountIsNotAssciated")+d}else a.isErrorMessage=a.$t("PleaseSelectAnyRecordsForFurther"),a.isSelected=!0},closePopup:function(){var e=this,t={accntid:e.createdAccountID},a=JSON.stringify(t);s["a"].DeleteAccountBeforeDeal(a).then((function(e){console.log(e)})),e.isConvertLeadToOthers?(e.isConvertLeadToOthers=!1,e.$emit("close")):e.$emit("close")},GoPrevious:function(){var e=this,t={accntid:e.createdAccountID},a=JSON.stringify(t);s["a"].DeleteAccountBeforeDeal(a).then((function(e){console.log(e)})),e.isConvertLeadToOthers=!1,e.IsActiveAccount=1,e.showConvertLead=!0,$("div [name=account_id]").find(".vs__actions .clear").html("")},GetValidation:function(e){var t={};if(e.is_required&&(t["required"]=!0),e.length>0&&(t["max"]=e.length),"email"==e.validation_type&&(t["email"]=!0),"decimal"!=e.dt_code&&"float"!=e.dt_code||("ORIGNAL_CONVERSION_RATE"==e.name&&(t["min_value"]=0),"estimated_hours"!=e.name&&"estimated_cost"!=e.name&&"base_rate"!=e.name||(t["min_value"]=1),"base_rate"==e.name&&(t["max_value"]=9999.99)),"int"!=e.dt_code&&"bigint"!=e.dt_code||(t["numeric"]=!0),"url"==e.dt_code&&(t["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(t["regex"]=e.regular_expression),"project_named"==e.name&&""!=e.value){var a=/^[A-Za-z0-9 _]*[A-Za-z0-9][A-Za-z0-9 _]*$/;t["regex"]=a}return t}}},c=l,r=(a("3b1bd"),a("2877")),d=Object(r["a"])(c,o,n,!1,null,null,null);t["a"]=d.exports},"8d3e":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("DeployItems")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Location"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"row"},[a("input",{attrs:{type:"hidden",id:"hdnCompantLocationSelect"}}),a("div",{staticClass:"col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left",attrs:{id:"divmultilevelselect1"},on:{click:function(t){return e.OnChangeLocation()}}}),e.validatelocation?a("small",{staticClass:"float-left text-danger col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left font-weight-light"},[e._v("Please select the Location")]):e._e()])])])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success formbtn text-white mr-1",attrs:{href:"javascript:;"},on:{click:function(t){return e.saveDeployItems()}}},[a("em",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Save")))]),a("a",{staticClass:"btn btn-danger  delete-btn formbtn widthhalf text-white",on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])])])])])])])])])],1)},n=[],i=(a("7db0"),a("d3b7"),a("9769")),s={data:function(){return{isLoading:!1,CompantLocationSelect:null,validatelocation:!1}},created:function(){this.isLoading=!0,this.GetLocationByCompanyId()},methods:{GetLocationByCompanyId:function(){var e=this;i["a"].GetMultiLocationByCompanyId("").then((function(t){if(e.isLoading=!1,null!=t.data.list){$("#divmultilevelselect1").show();try{$("#divmultilevelselect1").RMultiLevelSelect({chartElement:"#divmultilevelselect1",chartClass:"treeheight",data:t.data.list,id:"CompantLocationSelect",wrap:!1,close:function(){var t=$("#LocationId").val(),a=$("#hdnCompantLocationSelect").val();""==$("#hdnCompantLocationSelect").val()||"0"==$("#hdnCompantLocationSelect").val()?$("span[data-valmsg-for='CompnayLocation']").addClass("invalid-feedback").html(String.Format(e.$t("Required"),e.$t("Location"))):$("span[data-valmsg-for='CompnayLocation']").removeClass("invalid-feedback").html(""),t==a&&(alert(e.$t("ParentLocationNotSame")),$("#divmultilevelselect1").find("a.CompantLocationSelectdd-selected").removeAttr("style").html("Select"))}}),$("#divmultilevelselect1").show()}catch(a){}}else ShowMsgWithMsg(jsondata.msg,"failure"),$("#divmultilevelselect1").hide()}))},saveDeployItems:function(){this.CompantLocationSelect=$("#hdnCompantLocationSelect").val(),null!=this.CompantLocationSelect&&""!=this.CompantLocationSelect?(this.validatelocation=!1,$(".CompantLocationSelectdd-container").find("div.btn").removeClass("form-control is-invalid"),this.$parent.commonApprove(CompantLocationSelect.value),this.$parent.showDeployModal=!1):(this.validatelocation=!0,$(".CompantLocationSelectdd-container").find("div.btn").addClass("form-control is-invalid"),$(".CompantLocationSelectselected").removeClass("w-80"))},OnChangeLocation:function(){var e=this;e.isLoading=!0,setTimeout((function(){$("#divmultilevelselect1").find("ul#CompantLocationSelect").css("display","block"),e.CompantLocationSelect=$("#hdnCompantLocationSelect").val(),null!=e.CompantLocationSelect&&""!=e.CompantLocationSelect&&($("#divmultilevelselect1").find("ul#CompantLocationSelect").css("display","none"),e.validatelocation=!1,$(".CompantLocationSelectdd-container").find("div.btn").removeClass("form-control is-invalid")),e.isLoading=!1}),300)}}},l=s,c=a("2877"),r=Object(c["a"])(l,o,n,!1,null,null,null);t["a"]=r.exports},b421:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".vc-popover-content-wrapper{z-index:999!important}",""]),e.exports=t},b6c5:function(e,t,a){var o=a("b421");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var n=a("499e").default;n("05d6f59c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=InwardList.js.map