(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMDealDetails~CRMLeadDetails~Campaign Details~SalesOrderDetails~View Invoice Details~View PriceBook~30c3c97b"],{3731:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"listing mt-2"},[a("loader",{attrs:{"is-visible":t.isLoading}}),t.NoRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(t._s(t.$t("NoRecordfound")))]):t._e(),a("div",{staticClass:"row custom-box-width"},t._l(t.AttachmentData,(function(e,i){return a("div",{key:i,staticClass:"col-xl-2 col-lg-4 col-md-6"},[a("div",{staticClass:"box border pt-4 text-center"},[a("div",{staticClass:"verticle-action"},[a("em",{staticClass:"fa fa-ellipsis-v action_icon",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.openActionIcon(e)}}}),a("span",{staticClass:"action-list-box",staticStyle:{width:"240px",display:"none"}},[a("span",{staticClass:"list-actions",staticStyle:{"padding-left":"0"},attrs:{id:"action-list"}},[a("a",{staticClass:"actions-onclick edit-list",attrs:{"data-toggle":"modal",href:"javascript:void(0)"},on:{click:function(a){return t.downloadAttachment(e)}}},[a("em",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}}),a("br"),t._v("Download")]),"fa-file-image-o"==t.returntFileIconClass(e)?a("a",{staticClass:"actions-onclick view-list",attrs:{href:e.attachement_path,target:"_blank"}},[a("em",{staticClass:"fa fa-eye"}),a("br"),t._v("View")]):t._e(),a("a",{staticClass:"actions-onclick view-list",on:{click:function(a){return t.deleteAttachment(e)}}},[a("em",{staticClass:"fa fa-trash"}),a("br"),t._v("Delete")]),a("em",{staticClass:"fa fa-times close close-action",attrs:{"aria-hidden":"true"},on:{click:function(e){return t.closeActionIcon(e)}}})])])]),a("div",{class:{"img-ico text-center p-5 file-image doc-icon":null==e.thumb_nail_path||""==e.thumb_nail_path,"img-ico fix145 text-center pb-4 file-image doc-icon pt-3":null!=e.thumb_nail_path&&""!=e.thumb_nail_path}},[null!=e.thumb_nail_path&&""!=e.thumb_nail_path?a("img",{attrs:{src:e.thumb_nail_path,alt:"",loading:"'lazy'"}}):t._e(),null==e.thumb_nail_path||""==e.thumb_nail_path?a("em",{class:"fa "+t.returntFileIconClass(e)}):t._e()]),a("hr",{staticClass:"mb-0"}),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"row mx-0 my-2"},[a("div",{staticClass:"col-md-12 text-left text-truncate font-14 mb-2 font-weight-bold",attrs:{title:e.attachement_name+"."+JSON.parse(e.attachement_mime).Extension}},[t._v(t._s(e.attachement_name+"."+JSON.parse(e.attachement_mime).Extension))]),a("div",{staticClass:"col-md-5 font-14 align-self-center text-left pr-0"},[a("span",[t._v(t._s(t.bytesToSize(JSON.parse(e.attachement_mime).Size)))])]),a("div",{staticClass:"col-md-7 text-right pl-0 text-truncate"},[a("small",[t._v(t._s(t._f("formatDateTime")(e.created_at)))])])])])])})),0)],1)},s=[],n=(a("7db0"),a("d3b7"),a("25f0"),a("99af"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("1157")),o=a.n(n),l=a("9769"),c={props:{attachmentdata:null,sourceid:{type:String}},data:function(){return{isLoading:!1,AttachmentData:[],NoRecordForTab:!0,LeadStatus:this.$parent.LeadStatus,showAttachmentModal:!1,imageUrl:""}},watch:{attachmentdata:function(t){var e=o()("#hdnLoggedInUserId").val();o.a.each(t,(function(t,a){a.created_by==e?a.IsDelete=!0:a.IsDelete=!1})),this.AttachmentData=t,this.NoRecordForTab=!(null!=this.AttachmentData&&this.AttachmentData.length>0),setTimeout((function(){o()(".action_icon").click((function(){o()(this).parent().find(".action-list-box").show(500)})),o()(".close-action").click((function(){o()(this).parent().parent(".action-list-box").hide(500)}))}),1e3)}},methods:{openActionIcon:function(t){t.target.nextSibling.removeAttribute("style"),t.target.nextSibling.setAttribute("style","width:240px;"),t.target.nextSibling.style.display="block"},closeActionIcon:function(t){t.target.nextSibling.style.display="none"},StrTruncate:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return StrTruncate(t,25)})),returntFileIconClass:function(t){var e=["JPG","JPEG","BMP","GIF","PNG"],a=JSON.parse(t.attachement_mime),i=a.Extension.toUpperCase();return"COMPRESSEDFILES"==i||"ZIP"==i||"RAR"==i?"fa-file-archive-o":"XLS"==i||"XLSX"==i||"DATAFILES"==i?"fa-file-excel-o":"PPT"==i?"fa-file-powerpoint-o":"PDF"==i?"fa-file-pdf-o":"DOC"==i||"DOCX"==i?"fa-file-word-o":"TXT"==i?"fa-file-text-o":e.indexOf(i)>-1?"fa-file-image-o":"fa-file-o"},bytesToSize:function(t){var e=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";var a=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,a),2)+" "+e[a]},downloadAttachment:function(t){this.isLoading=!0;var e=this,a="fileId=".concat(t.attachement_id,"&filePath=").concat(t.blob_path,"&fileType=").concat(JSON.parse(t.attachement_mime).ContentType,"&fileName=").concat(t.attachement_name+"."+JSON.parse(t.attachement_mime).Extension,"&downloadType=single");l["a"].CRMDownloadFile(a).then((function(a){e.isLoading=!1;var i=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",t.attachement_name+"."+JSON.parse(t.attachement_mime).Extension),document.body.appendChild(s),s.click()}))},deleteAttachment:function(t){var e=this;e.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Delete")+"  "+this.$t("Attachment"),(function(){e.isLoading=!0;var a=t.attachement_id,i=parseInt(e.sourceid),s="id="+a+"&sourceid="+i;l["a"].DeleteAttachment(s).then((function(t){e.isLoading=!1,"SUCCESS"==t.data&&(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Attachment")]),"success",!0,e.$t("Alert")),e.$parent.loadData("attachments"))}))}))}}},r=c,d=a("2877"),u=Object(d["a"])(r,i,s,!1,null,null,null);e["a"]=u.exports},"9dbd":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("headerForModal",(function(){return[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachments")))])]})),a("button",{staticClass:"close",attrs:{type:"button",href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row form-head",staticStyle:{display:"none"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-right p-0"},[a("div",{staticClass:"userguide-box userguide_curve"},[a("a",{staticClass:"userguide-btn collapsed",attrs:{"data-toggle":"collapse",href:"#user-guidepriority","aria-expanded":"false","aria-controls":"search-content"}},[a("em",{staticClass:"fa"}),a("span",[t._v(t._s(t.$t("GuideForUser")))])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"user-guide collapse",attrs:{id:"user-guidepriority"}},[t._v(" "+t._s(t.$t("GuideForUser"))+" "),a("br"),a("br")])])])])]),a("Form",{ref:"attachment"},[a("div",{staticClass:"form-content"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("DisplayName"))+":")]),a("span",{staticClass:"text-danger"},[t._v("*")]),a("Field",{attrs:{name:"Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.DisplayName,expression:"DisplayName"}],staticClass:"form-control",class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",maxlength:"50",id:"DisplayName",name:"DisplayName"},domProps:{value:t.DisplayName},on:{keyup:function(e){return t.CheckAttach(t.DisplayName)},input:function(e){e.target.composing||(t.DisplayName=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"DisplayName"}},[t._v(t._s(i[0]))]):t._e()]}}])})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6",attrs:{id:"attach"}},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("Attachment"))+":")]),a("span",{staticClass:"text-danger"},[t._v("*")]),void 0!=t.imagesizedata&&t.imagesizedata.length>0?a("a",{directives:[{name:"popover",rawName:"v-popover:tooltip",value:t.imagesizedata,expression:"imagesizedata",arg:"tooltip"}],attrs:{href:"javascript:;","data-toggle":"popoveruserguide"}},[a("em",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14p  x"}})]):t._e(),a("div",{staticClass:"custom-file"},[a("Field",{ref:"provider",attrs:{name:"File",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{class:{"form-control":!0,"is-invalid":i[0]||1==t.isFileValidation},attrs:{type:"file",name:"FileSrc",id:"inputAttach"},on:{change:t.GetBase64String,click:function(e){return t.onClickFile(e)}}}),1==t.isFileValidation?a("span",{staticClass:"invalid-feedback d-block"},[t._v("The Attachment is required")]):i[0]?a("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}])})],1)])])])])])])],1),a("div",{staticClass:"modal-footer text-right"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"search-btm-btn"},[a("a",{staticClass:"btn btn-success  save-btn mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SaveAttachment()}}},[a("em",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times pr-1"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])])])])])])],1)},s=[],n=(a("a9e3"),a("313d"),a("0eb6"),a("b7ef"),a("8bd4"),a("b0c0"),a("a15b"),a("ac1f"),a("1276"),a("caad"),a("2532"),a("e9c4"),a("9769")),o=a("1157"),l=a.n(o),c={props:{userid:{type:Number,required:!0},companyid:{type:Number,required:!0},id:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},containername:{type:String,required:!0},maxsize:{type:String},disallowedfiletypes:{type:String},imagesizedata:{type:String}},data:function(){return{isFileValidation:!1,fileData:[],DisplayName:"",FileName:"",btnDisable:!1,isLoading:!1}},methods:{checkForDisplayName:function(t){this.DisplayName||t.preventDefault()},CheckAttach:function(t){""!=t?(this.btnDisable=!0,this.fileData.fileName=t):this.btnDisable=!1},GetBase64String:function(t){var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),n=a.name,o=n.lastIndexOf("."),l=n.substring(o+1,n.length),c='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}';""==e.DisplayName?(n=a.name,e.FileName=a.name):(n=e.DisplayName,e.FileName=a.name);var r=["doc","docx","jpg","pdf","csv","png","xls","txt","jpeg","jfif","pjpeg","svg","pjp"];if(n.length>0&&-1===r.indexOf(l))return e.ShowAlert("Invalid file Format. Only "+r.join(", ")+" are allowed."),!1;var d={attachement_mime:c,fileName:n,userId:e.userid,companyId:e.companyid,id:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,containerName:e.containername,base64String:s};e.fileData.push(d),e.isFileValidation=!1}}(),i.readAsBinaryString(a)},byteToSize:function(t){return 0==t?"0 Byte":t/Math.pow(1024,2)},onClickFile:function(){var t=document.getElementById("inputAttach"),e=t.files;0==e.length?this.isFileValidation=!0:this.isFileValidation=!1},SaveAttachment:function(){var t=this,e=this,a=0,i="";this.onClickFile(),""!=l()("#inputAttach").val()&&(a=e.byteToSize(JSON.parse(e.fileData[0].attachement_mime).Size),i=JSON.parse(e.fileData[0].attachement_mime).Extension);var s=parseFloat(e.maxsize)||0;if(a>s&&0!=s)return e.ShowAlert("Size exceeds than "+s+" MB. Please upload file with valid size.","warning",!0,e.$t("Alert")),!1;var o=void 0!=e.disallowedfiletypes?e.disallowedfiletypes.split(","):"",c="."+i;if(o.includes(c))return e.ShowAlert(e.$t("InvalidFileUploadMsg"),"warning",!0,e.$t("Alert")),!1;e.$refs.attachment.validate().then((function(a){if(a&&0==t.isFileValidation){e.isLoading=!0;var i=JSON.stringify(e.fileData);o.includes(c)?e.ShowAlert(e.$t("InvalidFileUploadMsg")):n["a"].UploadFile(i).then((function(t){e.isLoading=!1,"Success"==t.data[0].Status?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Attachment")]),"Success",!0,e.$t("Alert")),e.$emit("close"),e.$parent.loadData("attachments")):"Exist"==t.data[0].Status?e.ShowAlert(e.$t("FileNameAlreadyExist",[e.$t("Attachment")]),"warning",!0,e.$t("Alert")):e.ShowAlert(e.$t("ValidFileType",[e.$t("Attachment")]),"failure",!0,e.$t("Alert"))}))}else console.log(t.$refs.attachment.errors)}))}}},r=c,d=a("2877"),u=Object(d["a"])(r,i,s,!1,null,null,null);e["a"]=u.exports},ba51:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.noRecordForTab?t._e():a("div",{},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered mb-0",attrs:{id:"table-products-content","aria-describedby":"crmproduct"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemName")))])]),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemCode")))])]),"CRM_SALES_ORDERS"==t.submodulecode||"CRM_PURCHASE_ORDERS"==t.submodulecode?a("th",{attrs:{scope:"col"}},[a("span",[t._v(" "+t._s(t.$t("Quantity"))+" ")])]):t._e(),a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("ItemType")))])]),"CRM_LEADS"==t.submodulecode||"CRM_DEALS"==t.submodulecode?a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Provider")))])]):t._e(),"CRM_LEADS"==t.submodulecode||"CRM_DEALS"==t.submodulecode?a("th",{attrs:{scope:"col"}},[a("span",[t._v(t._s(t.$t("Price")))])]):t._e(),a("th",{attrs:{scope:"col"}},[a("span",[t._v(" "+t._s(t.$t("AssociatedAt")))])]),"Closed"==t.recordstatus||"CRM_LEADS"!=t.submodulecode&&"CRM_DEALS"!=t.submodulecode?t._e():a("th",{staticClass:"text-center",attrs:{scope:"col"}},[a("span",[t._v(" "+t._s(t.$t("Action")))])])])]),a("tbody",t._l(t.productData,(function(e,i){return a("tr",{key:i},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.item_code))]),"CRM_SALES_ORDERS"==t.submodulecode||"CRM_PURCHASE_ORDERS"==t.submodulecode?a("td",[t._v(t._s(e.quantity))]):t._e(),a("td",[t._v(t._s(e.asset_type))]),"CRM_LEADS"==t.submodulecode||"CRM_DEALS"==t.submodulecode?a("td",[t._v(t._s(e.ProviderName))]):t._e(),"CRM_LEADS"==t.submodulecode||"CRM_DEALS"==t.submodulecode?a("td",[t._v(t._s(e.unit_price))]):t._e(),a("td",[t._v(t._s(t._f("formatDate")(e.created_at)))]),"Closed"==t.recordstatus||"CRM_LEADS"!=t.submodulecode&&"CRM_DEALS"!=t.submodulecode?t._e():a("td",{staticClass:"text-center single-action mobileactions"},[a("a",{attrs:{href:"javascript:;",title:t.$t("DeassociateProduct")},on:{click:function(a){return t.deassociateProduct(e.asset_catalogue_id,e.AccountID)}}},[a("em",{staticClass:"fa fa-times action-icon text-danger"})])])])})),0)])])])]),t.noRecordForTab?a("div",{staticClass:"text-center text-danger p-4 border"},[t._v(t._s(t.$t("NoRecordfound")))]):t._e()])},s=[],n=(a("e9c4"),a("498a"),a("ac1f"),a("00b4"),a("9769")),o=a("1157"),l=a.n(o),c={props:{productdata:null,sourceid:{type:String,required:!0},submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},recordstatus:{type:String,required:!1}},data:function(){return{productData:[],noRecordForTab:!0,LeadStatus:"",ContactsHeader:[],Count:0}},watch:{productdata:function(t){var e=this;l.a.each(t,(function(t,e){e.TotalAmount=e.quantity*e.unit_price})),e.productData=t?JSON.parse(JSON.stringify(t)):null,e.noRecordForTab=!(null!=e.productData&&e.productData.length>0),setTimeout((function(){e.ResponsiveDataTable("table-products-content")}),500)}},methods:{SaveQty:function(t){var e=this,a={account_id:t.AccountID,product_id:t.asset_catalogue_id,price:""==t.unit_price?0:t.unit_price,sourceid:e.sourceid,quantity:t.quantity,submodulecode:e.submodulecode},i=JSON.stringify(a);e.Count>0&&(e.Count=0,n["a"].SaveProductPrice(i).then((function(t){"UPDATE"==t.body.msg&&e.ShowAlert(e.$t("Quantity updated Successfully"),"success",!0,e.$t("Alert"))})))},SetTotalAmount:function(t){""==l.a.trim(t.quantity)&&(t.quantity=0),t.TotalAmount=parseInt(t.quantity)*t.unit_price,this.Count++},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)},isBlank:function(t){return!t||/^\s*$/.test(t)},formatDate:function(t){if(t)return moment(String(t),"YYYY-MM-DD").format(String("MM-dd-yyyy"))},deassociateProduct:function(t,e){if("undefined"===typeof this.$parent.checkForAdditionalPermission||this.$parent.checkForAdditionalPermission("DeleteProducts")){var a=this;t>0?0==a.Count&&(a.Count++,setTimeout((function(){a.Count=0}),300),a.confirmR(a.$t("ConfirmDeAssociateProduct"),!0,null,(function(i){var s={ids:t,moduleName:a.modulename,subModuleCode:a.submodulecode,refCode:"DELETE_VIEW_PRODUCTS",refId:a.sourceid,AccountId:e},o=JSON.stringify(s);n["a"].CommonDelete(o).then((function(t){"Success"==t.data[0].Status?(a.ShowAlert(a.$t("Product has been successfully De-associated."),"success",!0,a.$t("Alert")),a.$parent.loadData("products")):a.ShowAlert(a.$t("ErrorDeassociateFailure",[a.$t("Product")]),"success",!0,a.$t("Alert"))}))}))):a.ShowAlert(a.$t("DeletedError",[a.$t("Product")]),"failure",!0,a.$t("Alert"))}else this.confirmR(this.$t("additionalOwnerAuthorityWarning"),!0,this.$t("Alert"))}}},r=c,d=a("2877"),u=Object(d["a"])(r,i,s,!1,null,null,null);e["a"]=u.exports}}]);
//# sourceMappingURL=CRMDealDetails~CRMLeadDetails~Campaign Details~SalesOrderDetails~View Invoice Details~View PriceBook~30c3c97b.js.map