(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMManageContact"],{ff6a:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"main-content"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{attrs:{id:"divMainLeadData"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 padding-t_8"},[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("ManageContact")))])])])]),e("div",{staticClass:"border p-3"},[e("Form",{ref:"form"},[e("dynamic-form",{ref:"StageForm",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"py-2"},[e("small",[e("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.$t("MandatoryString")))])])])])],1)],1)])],1)},s=[],i=e("c7eb"),o=e("1da1"),r=(e("d3b7"),e("159b"),e("b0c0"),e("e9c4"),e("9769")),c={data:function(){return{isLoading:!1,contactId:this.$route.params.id,userId:null,compnayId:null,FormSchema:[],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}]}},created:function(){this.userId=this.GetUserInfo.ID,this.companyId=this.GetUserInfo.CompanyId,this.FetchData()},methods:{onCancel:function(){this.$router.push({name:"Contract"})},FetchData:function(){var t=this;t.isLoading=!0;var a="id=".concat(t.$route.params.id,"&moduleName=CRM&subModuleCode=CRM_CONTACTS&langCode=en");r["a"].getFormLayout(a).then((function(a){t.isLoading=!1,t.FormSchema=t.$refs.StageForm.ConvertCustomFieldIntoDynamicFormObj(a.data.data),t.FormSchema.forEach((function(a,e){a.Data.forEach(function(){var a=Object(o["a"])(Object(i["a"])().mark((function a(e,n){return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:"gender"==e.name&&(e.value="Male"),e.config.onChange=t.onChangeEventForFields;case 2:case"end":return a.stop()}}),a)})));return function(t,e){return a.apply(this,arguments)}}())}))}))},onSubmit:function(t,a){var e=this;e.$refs.form.validate().then((function(t){if(t){var a=e.$refs.StageForm.ConvertDynamicFormObjToCustomFieldObj(e.FormSchema);a.forEach((function(t){"created_by"==t.field_name&&(t.field_value=e.userId),"modified_by"==t.field_name&&(t.field_value=e.userId),"company_id"==t.field_name&&(t.field_value=e.companyId),"contact_id"==t.field_name&&(t.field_value=e.contactId)}));var n={data:a},s=JSON.stringify(n);r["a"].SaveContact(s).then((function(t){e.isLoading=!1,"1"==t.data[0].Code?(e.contactId>0?e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Contacts")]),"Success",!0,e.$t("Alert")):e.ShowAlert(e.$t("AddedSuccess",[e.$t("Contacts")]),"Success",!0,e.$t("Alert")),e.$router.push({name:"ContactListing"})):"-1"==t.data[0].Code?e.ShowAlert(e.$t("AlreadyExists",[e.$t("Email")]),"warning",!0,e.$t("Alert")):e.ShowAlert(e.$t("AddedError",[e.$t("Contacts")]),"error",!0,e.$t("Alert"))}))}}))}}},d=c,l=e("2877"),u=Object(l["a"])(d,n,s,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=CRMManageContact.js.map