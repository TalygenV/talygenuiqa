(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ManageQuotation"],{"4e2c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my-popups"},[s("div",{staticClass:"modal d-block"},[s("div",{staticClass:"modal-dialog modal-dialog-centered"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(" PriceBook ")]),s("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[s("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"form_content"},[s("section",{staticClass:"main-content no-left-bar"},[s("div",{staticClass:"container-fluid padding-t_10 p-0",attrs:{id:"Div_OuterForVue"}},[s("div",{staticClass:"right-content"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 searchpanel tablehead search float-left p-0"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 Search-panel float-left py-2 p-0"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"row mt-0"},[s("div",{staticClass:"col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left pr-1 pl-0"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.PriceBookName,expression:"PriceBookName"}],staticClass:"form-control",attrs:{type:"search",placeholder:t.$t("Search by")+" "+t.$t("PriceBook")},domProps:{value:t.PriceBookName},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.FetchPriceBookData.apply(null,arguments)},input:function(e){e.target.composing||(t.PriceBookName=e.target.value)}}})])]),s("div",{staticClass:"col-6 col-sm-6 col-md-6 col-lg-6 col-xl-6 float-left pl-0"},[s("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"},[s("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"},on:{click:function(e){return t.FetchPriceBookData()}}},[s("em",{staticClass:"fa fa-search"})]),s("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"},on:{click:function(e){return t.CancelOrRefresh()}}},[s("em",{staticClass:"fa fa-refresh"})])])])])])])]),s("div",{staticClass:"listing mt-2"},[s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-describedby":"pricebook"}},[s("thead",{staticClass:"thead-bg"},[s("tr",{staticClass:"text-capitalize"},[s("th",{attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Name")))])]),s("th",{attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("PricingModel")))])]),s("th",{attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("ListPrice")))])]),s("th",{attrs:{scope:"col"}},[s("span",[t._v(t._s(t.$t("Status")))])])])]),s("tbody",[t._l(t.PriceBookData,(function(e,i){return s("tr",{key:i},[s("td",[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.SetPriceBook(e)}}},[t._v(" "+t._s(e.PRICE_BOOK_NAME))])]),s("td",{staticClass:"position-relative"},[s("span",{staticClass:"float-left"},[t._v(t._s(1==e.PRICE_BOOK_MODEL?"Flat":"Differential"))]),s("a",{staticClass:"float-left ml-2 showdiscount",attrs:{href:"javascript:;",title:t.$t("PriceBook")+" "+t.$t("Discount")},on:{mouseover:function(s){return t.ShowDiscountPricebook(e)}}},[s("em",{staticClass:"fa fa-eye text-info",staticStyle:{"font-size":"18px"}})]),s("div",{staticClass:"col-12 float-left p-0",staticStyle:{display:"none"},attrs:{id:"popover-content"+e.PRICE_BOOK_ID}},[s("div",{staticClass:"col-12 float-left listing p-0"},[s("div",{staticClass:"table-responsive tblpricebookdata",staticStyle:{width:"255px"}},[s("table",{staticClass:"table table-bordered mb-0",attrs:{"aria-describedby":"range"}},[s("thead",{staticClass:"thead-bg"},[s("tr",[s("th",{attrs:{scope:"col"}},[s("small",[t._v(t._s(t.$t("RangeFrom")))])]),s("th",{attrs:{scope:"col"}},[s("small",[t._v(t._s(t.$t("RangeTo")))])]),s("th",{attrs:{scope:"col"}},[s("small",[t._v(t._s(t.$t("Discount"))+" "+t._s(1==e.PRICE_BOOK_MODEL?"(Flat)":"(%)"))])])])]),s("tbody",t._l(t.MakeNormalArray(e.PRICE_BOOK_RANGE),(function(e,i){return s("tr",{key:i},[s("td",[t._v(t._s(e.FROM_RANGE))]),s("td",[t._v(t._s(e.TO_RANGE))]),s("td",[t._v(t._s(t.$options.filters.currency(e.DISCOUNT)))])])})),0)])])]),s("div",{staticClass:"clearfix"})])]),s("td",[t._v(t._s(t.$options.filters.currency(e.LIST_PRICE)))]),s("td",{staticClass:"text-center"},[s("span",{class:{"px-2 bg-success text-white d-block":"Active"==e.STATUS_NAME,"px-2 bg-danger text-white d-block text-center":"Closed"==e.STATUS_NAME}},[t._v(" "+t._s(e.STATUS_NAME))])])])})),null==t.PriceBookData||0==t.PriceBookData.length?s("tr",[s("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"4"}},[t._v(" "+t._s(t.$t("NoRecordfound")))])]):t._e()],2)])])])])])])])]),s("div",{staticClass:"modal-footer d-none"},[s("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[t._v("Close")])])])])])])},a=[],n=(s("99af"),s("9769")),r={props:{selectedItemIndex:null,summaryData:null},data:function(){return{PriceBookData:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,PriceBookName:"",ProductId:0}},created:function(){this.FetchPriceBookData(),this.GetPageSizeOption()},methods:{CancelOrRefresh:function(){this.PriceBookName="",this.FetchPriceBookData()},GetPageSizeOption:function(){for(var t=[],e=10,s=e;s<e+95;s+=5)t.push(s);this.PageSizeOption=t},SetPageSize:function(t){this.PageSize=t.target.value,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},SetCurrentPage:function(t){this.PageNumber=t,t>this.GroupEnd||1==t?(this.GroupStart=t,this.GroupEnd=t+2):t<this.GroupStart&&t>1&&(this.GroupEnd=this.GroupStart-1,this.GroupStart=t-2),this.FetchData()},SetPriceBook:function(t){this.$emit("SetPriceBook",t)},ShowDiscountPricebook:function(t){var e=t.PRICE_BOOK_ID;$(".showdiscount").popover("dispose"),$(".showdiscount").popover({html:!0,sanitize:!1,content:function(){return $("#popover-content"+e).html()},placement:"right",template:'<div class="popover my-popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body">'+$("#popover-content"+e).html()+"</div></div>",trigger:"focus"})},MakeNormalArray:function(t){try{return JSON.parse(t)}catch(e){return t}},FetchPriceBookData:function(){var t=this,e=t.selectedItemIndex,s=null==t.summaryData?null:t.summaryData[e];s&&null!=s.ProductName&&(Array.isArray(s.ProductName)?t.ProductId=s.ProductName[0]:t.ProductId=s.ProductName.value);var i="moduleName=".concat(t.$route.params.moduleName,"&subModuleCode=").concat(t.$route.params.subModuleCode,"&pageSize=").concat(t.PageSize,"&pageNumber=").concat(t.PageNumber,"&sortBy=").concat(t.SortBy,"&sortExp=").concat(t.SortExp,"&search=").concat(t.PriceBookName,"&refId=&productId=").concat(t.ProductId);t.PriceBookData=[],n["a"].PriceBookProduct(i).then((function(e){null!=e.data?(t.PriceBookData=e.data.DATA,t.TotalRecords=t.PriceBookData[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.PriceBookData=[],t.TotalRecords=0,t.TotalPages=0),setTimeout((function(){t.CheckBoxBootstrap()}),100)}))}}},o=r,d=s("2877"),l=Object(d["a"])(o,i,a,!1,null,null,null);e["a"]=l.exports},c6cc:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"main-content"},[s("loader",{attrs:{"is-visible":t.isLoading}}),s("div",{attrs:{id:"divMainLeadData"}},[t._m(0),s("div",{staticClass:"border p-3"},[s("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.valid,a=e.errors;return[s("DynamicForm",{attrs:{schema:t.GroupBy,odnumber:t.odnumber,subModuleCode:t.$route.params.subModuleCode,selectedQuotationType:t.selectedQuotationType,dateformat:t.dateformat,DependentOption:t.DependentOption},on:{setSelectedValue:t.setSelectedValue,showDependentItem:t.showDependentItem,setDependentDate:t.DependentDateObject,onSearchDDL:t.onSearch}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left my-2"},[s("div",{staticClass:"heading-border"},[s("h5",{staticClass:"h5"},[s("span",[t._v(t._s(t.$t("BillingAddress")))])])])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Address Name:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingCompanyName,expression:"Address.BillingAddress.BillingCompanyName"}],staticClass:"form-control",attrs:{name:"BillingCompanyName"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.BillingAddress,"BillingCompanyName",e.target.multiple?s:s[0])},function(e){return t.GetAddrData(t.Address.BillingAddress.BillingCompanyName)}]}},[s("option",{attrs:{value:"0"}},[t._v("Primary")]),t._l(t.Address.BillingAddress.BillingCompanyNameList,(function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2)])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("ContactName"))+":"),s("span",{staticClass:"text-danger"},[t._v("*")])]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingContactPerson,expression:"Address.BillingAddress.BillingContactPerson"}],staticClass:"form-control",attrs:{type:"text",disabled:""==t.Address.BillingAddress.BillingContactPerson||""!=t.Address.BillingAddress.BillingContactPerson,name:"BillingContactPerson",maxlength:"200"},domProps:{value:t.Address.BillingAddress.BillingContactPerson},on:{input:[function(e){e.target.composing||t.$set(t.Address.BillingAddress,"BillingContactPerson",e.target.value)},t.CloneBillingAddress]}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Address1"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingAccountAddress,expression:"Address.BillingAddress.BillingAccountAddress"}],staticClass:"form-control",attrs:{type:"text",name:"BillingAccountAddress",maxlength:"200",disabled:""==t.Address.BillingAddress.BillingAccountAddress||""!=t.Address.BillingAddress.BillingAccountAddress},domProps:{value:t.Address.BillingAddress.BillingAccountAddress},on:{input:[function(e){e.target.composing||t.$set(t.Address.BillingAddress,"BillingAccountAddress",e.target.value)},t.CloneBillingAddress]}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Address2"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingAccountAddress2,expression:"Address.BillingAddress.BillingAccountAddress2"}],staticClass:"form-control",attrs:{type:"text",name:"BillingAccountAddress2",maxlength:"200",disabled:""==t.Address.BillingAddress.BillingAccountAddress2||""!=t.Address.BillingAddress.BillingAccountAddress2},domProps:{value:t.Address.BillingAddress.BillingAccountAddress2},on:{input:function(e){e.target.composing||t.$set(t.Address.BillingAddress,"BillingAccountAddress2",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("City"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingAccountCity,expression:"Address.BillingAddress.BillingAccountCity"}],staticClass:"form-control",attrs:{type:"text",name:"BillingAccountCity",maxlength:"200",disabled:""==t.Address.BillingAddress.BillingAccountCity||""!=t.Address.BillingAddress.BillingAccountCity},domProps:{value:t.Address.BillingAddress.BillingAccountCity},on:{input:function(e){e.target.composing||t.$set(t.Address.BillingAddress,"BillingAccountCity",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("State"))+":"),s("span",{staticClass:"text-danger"},[t._v("*")])]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingState,expression:"Address.BillingAddress.BillingState"}],staticClass:"form-control",attrs:{name:"State",disabled:""!=t.Address.BillingAddress.BillingState||""==t.Address.BillingAddress.BillingState},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.BillingAddress,"BillingState",e.target.multiple?s:s[0])},function(e){return t.CloneBillingAddress(e,"BillingCity")}]}},[s("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")+" "+t.$t("State"))+" ")]),t._l(t.Address.BillingAddress.BillingStateList,(function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2)])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("ZipCode"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingZipCode,expression:"Address.BillingAddress.BillingZipCode"}],staticClass:"form-control",attrs:{type:"text",name:"ZipCode",maxlength:"15",disabled:""!=t.Address.BillingAddress.BillingZipCode||""==t.Address.BillingAddress.BillingZipCode},domProps:{value:t.Address.BillingAddress.BillingZipCode},on:{input:function(e){e.target.composing||t.$set(t.Address.BillingAddress,"BillingZipCode",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Country"))+":"),s("span",{staticClass:"text-danger"},[t._v("*")])]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.BillingAddress.BillingCountry,expression:"Address.BillingAddress.BillingCountry"}],staticClass:"form-control",attrs:{name:"Country",disabled:""!=t.Address.BillingAddress.BillingCountry},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.BillingAddress,"BillingCountry",e.target.multiple?s:s[0])},function(e){return t.CloneBillingAddress(e,"BillingState")}]}},[s("option",{attrs:{value:""}},[t._v(t._s(t.$t("SelectCountry")))]),t._l(t.CountryData,(function(e){return s("option",{domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left mt-2"},[s("div",{staticClass:"form-group"},[s("label",[t._v("Check If Shipping Address Applicable:")]),s("input",{attrs:{id:"chkshippingbox",value:"1",type:"checkbox"},on:{change:function(e){return t.chkapplicableshipping(e)}}})])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.Ischeckshipping,expression:"Ischeckshipping"}],staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left my-2"},[s("div",{staticClass:"heading-border"},[s("h5",{staticClass:"h5"},[s("span",[t._v(t._s(t.$t("ShippingAddress")))])])])]),s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left my-2"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"float-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.sameShippingAddressAsBilling,expression:"sameShippingAddressAsBilling"}],staticClass:"ml-3",attrs:{id:"chkCloneBillingAddress","data-change-id":"no",value:"1",type:"checkbox"},domProps:{checked:Array.isArray(t.sameShippingAddressAsBilling)?t._i(t.sameShippingAddressAsBilling,"1")>-1:t.sameShippingAddressAsBilling},on:{click:t.CloneShippingAddress,change:function(e){var s=t.sameShippingAddressAsBilling,i=e.target,a=!!i.checked;if(Array.isArray(s)){var n="1",r=t._i(s,n);i.checked?r<0&&(t.sameShippingAddressAsBilling=s.concat([n])):r>-1&&(t.sameShippingAddressAsBilling=s.slice(0,r).concat(s.slice(r+1)))}else t.sameShippingAddressAsBilling=a}}})]),s("div",{staticClass:"float-left pt-1"},[s("label",{staticStyle:{"font-size":"14px",float:"left"}},[t._v("Check if same as billing address.")])])])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("AddressName"))+":")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingCompanyName,expression:"Address.ShippingAddress.ShippingCompanyName"}],staticClass:"form-control",attrs:{name:"ShippingCompanyName",disabled:1==t.sameShippingAddressAsBilling},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.ShippingAddress,"ShippingCompanyName",e.target.multiple?s:s[0])},function(e){return t.GetAddrData2(t.Address.ShippingAddress.ShippingCompanyName)}]}},[s("option",{attrs:{value:"0"}},[t._v("Primary")]),t._l(t.Address.ShippingAddress.ShippingCompanyNameList,(function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2)])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("ContactName"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingContactPerson,expression:"Address.ShippingAddress.ShippingContactPerson"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.sameShippingAddressAsBilling,name:"Address",maxlength:"200"},domProps:{value:t.Address.ShippingAddress.ShippingContactPerson},on:{input:[function(e){e.target.composing||t.$set(t.Address.ShippingAddress,"ShippingContactPerson",e.target.value)},t.CloneBillingAddress]}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Address1"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingAccountAddress,expression:"Address.ShippingAddress.ShippingAccountAddress"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.sameShippingAddressAsBilling,maxlength:"200"},domProps:{value:t.Address.ShippingAddress.ShippingAccountAddress},on:{input:function(e){e.target.composing||t.$set(t.Address.ShippingAddress,"ShippingAccountAddress",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Address2"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingAccountAddress2,expression:"Address.ShippingAddress.ShippingAccountAddress2"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.sameShippingAddressAsBilling,maxlength:"200"},domProps:{value:t.Address.ShippingAddress.ShippingAccountAddress2},on:{input:function(e){e.target.composing||t.$set(t.Address.ShippingAddress,"ShippingAccountAddress2",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("City"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingAccountCity,expression:"Address.ShippingAddress.ShippingAccountCity"}],staticClass:"form-control",attrs:{type:"text",disabled:1==t.sameShippingAddressAsBilling,name:"ShippingAccountCity",maxlength:"200"},domProps:{value:t.Address.ShippingAddress.ShippingAccountCity},on:{input:function(e){e.target.composing||t.$set(t.Address.ShippingAddress,"ShippingAccountCity",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("State"))+":")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingState,expression:"Address.ShippingAddress.ShippingState"}],staticClass:"form-control",attrs:{disabled:1==t.sameShippingAddressAsBilling},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.ShippingAddress,"ShippingState",e.target.multiple?s:s[0])},function(e){return t.CloneBillingAddress(e,"ShippingCity")}]}},[s("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")+" "+t.$t("State"))+" ")]),t._l(t.Address.ShippingAddress.ShippingStateList,(function(e){return s("option",{domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2)])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("ZipCode"))+":")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingZipCode,expression:"Address.ShippingAddress.ShippingZipCode"}],staticClass:"form-control",attrs:{type:"text",name:"ZipCode",disabled:1==t.sameShippingAddressAsBilling,maxlength:"15"},domProps:{value:t.Address.ShippingAddress.ShippingZipCode},on:{input:function(e){e.target.composing||t.$set(t.Address.ShippingAddress,"ShippingZipCode",e.target.value)}}})])]),s("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("Country"))+":")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.Address.ShippingAddress.ShippingCountry,expression:"Address.ShippingAddress.ShippingCountry"}],staticClass:"form-control",attrs:{disabled:1==t.sameShippingAddressAsBilling},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.Address.ShippingAddress,"ShippingCountry",e.target.multiple?s:s[0])},function(e){return t.CloneBillingAddress(e,"ShippingState")}]}},[s("option",{attrs:{value:""}},[t._v(t._s(t.$t("SelectCountry"))+" ")]),t._l(t.CountryData,(function(e){return s("option",{domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])}))],2)])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left my-2"},[s("div",{staticClass:"heading-border"},[s("h5",{staticClass:"h5"},[s("span",[t._v(" "+t._s(1==t.selectedQuotationType?t.$t("Project")+t.$t("Summary"):2==t.selectedQuotationType?t.$t("ProductSummary"):t.$t("Item")+t.$t("Summary"))+" ")])])])]),s("div",{staticClass:"listing p-3"},[s("div",{staticClass:"table-responsive mb-3"},[s("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"salesOrderTable","aria-describedby":"salescontent"}},[s("thead",{staticClass:"thead-bg"},[s("tr",[s("th",{staticClass:"nonresize text-center",attrs:{scope:"col","data-width":"50"}},[t._v(" "+t._s(t.$t("SerialNumbering"))+". ")]),s("th",{staticClass:"nonresize",attrs:{scope:"col","data-width":"300"}},[s("span",[t._v(t._s(1==t.selectedQuotationType?t.$t("ProjectDetail"):t.$t("PRODUCT_DETAILS")))])]),s("th",{attrs:{scope:"col"}},[s("span",[t._v(t._s(2==t.selectedQuotationType?t.$t("ListPrice"):t.$t("Price")))])]),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Quantity")))]),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Amount")))]),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Discount")))]),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Tax")))]),s("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Total")))]),s("th",{staticClass:"text-center nonresize",attrs:{scope:"col","data-width":"100"}},[s("a",{staticClass:"btn btn-primary mnw-140",attrs:{href:"javascript:;",title:t.$t("AddNewLine")},on:{click:t.AddNewProductSummary}},[s("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNewLine")))])])])]),s("tbody",[s("tr",[null==t.ProductSummary.SummaryData||0==t.ProductSummary.SummaryData.length?s("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"10"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e()]),t._l(t.ProductSummary.SummaryData,(function(e,i){return s("tr",{key:i},[s("td",{staticClass:"text-center"},[t._v(t._s(i+1)+".")]),2==t.selectedQuotationType?s("td",{staticClass:"overflow-visible"},[s("Multiselect",{attrs:{name:"ProductName"+i,placeholder:t.$t("SelectNameMultiSelect",[t.$t("ProductName")]),"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:e.ProductList,object:!0,label:"name"},on:{select:function(s){return t.setSelectedValue(e,s,"ITEM_NAME_SUMMARY")},"search-change":function(s){return t.onSearch(s,e,"ITEM_NAME_SUMMARY")}},model:{value:e.ProductName,callback:function(s){t.$set(e,"ProductName",s)},expression:"item.ProductName"}}),""!=e.ProductName&&null!=e.ProductName?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ProductDescription,expression:"item.ProductDescription"}],staticClass:"form-control mt-2",staticStyle:{height:"60px"},attrs:{type:"text",placeholder:t.$t("EnterDescription")},domProps:{value:e.ProductDescription},on:{input:function(s){s.target.composing||t.$set(e,"ProductDescription",s.target.value)}}}):t._e()],1):t._e(),2!=t.selectedQuotationType?s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductName,expression:"item.ProductName"}],staticClass:"form-control ",attrs:{type:"text",placeholder:1==t.selectedQuotationType?t.$t("ProjectDetail"):2==t.selectedQuotationType?t.$t("ProductName"):t.$t("ItemName"),"item-value":"value","item-text":"name"},domProps:{value:e.ProductName},on:{change:function(s){return t.checkIfQuoteTypeSelected(e)},input:function(s){s.target.composing||t.$set(e,"ProductName",s.target.value)}}}),""!=e.ProductName&&null!=e.ProductName?s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.ProductDescription,expression:"item.ProductDescription"}],staticClass:"form-control mt-2",attrs:{type:"text",placeholder:t.$t("EnterDescription")},domProps:{value:e.ProductDescription},on:{input:function(s){s.target.composing||t.$set(e,"ProductDescription",s.target.value)}}}):t._e()]):t._e(),2==t.selectedQuotationType?s("td",{staticClass:"single-action"},[s("span",{staticClass:"float-left"},[t._v(t._s(""==e.ProductName||null==e.ProductName?"":e.ProductRate))]),""!=e.ProductName&&null!=e.ProductName?s("a",{staticClass:"float-left ml-2",attrs:{href:"javascript:;",title:t.$t("PriceBook")},on:{click:function(e){return t.SelectPriceBook(i)}}},[s("em",{staticClass:"fa fa-book text-info",staticStyle:{"font-size":"20px"}})]):t._e(),e.PriceBookId>0?s("a",{staticClass:"float-left ml-2",attrs:{href:"javascript:;",title:t.$t("Delete")},on:{click:function(s){return t.CancelPriceBook(e)}}},[s("em",{staticClass:"fa fa-trash-o text-danger",staticStyle:{"font-size":"20px"}})]):t._e()]):t._e(),2!=t.selectedQuotationType?s("td",[s("Field",{attrs:{name:"ProductRate"+i,label:t.$t("Price"),rules:{required:!0,min_value:0}},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.errors,r=a.touched,o=a.invalid;return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductRate,expression:"item.ProductRate"}],class:{"form-control":!0,"is-invalid":r&&o},attrs:{name:"ProductRate"+i,type:"text"},domProps:{value:e.ProductRate},on:{keypress:function(e){return t.isNumber(e)},input:[function(s){s.target.composing||t.$set(e,"ProductRate",s.target.value)},function(s){return t.CalculateAmount(e)}]}}),s("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProductRate"+i}},[t._v(t._s(n[0]))])]}}],null,!0)})],1):t._e(),t.IsInventory?s("td",[s("Field",{attrs:{name:"ProductQuantity"+i,label:t.$t("Quantity"),rules:t.getQuantityValidationRule(e)},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.errors,r=a.touched,o=a.invalid;return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductQuantity,expression:"item.ProductQuantity"}],class:{"form-control filterme":!0,"is-invalid":r&&o},attrs:{name:"ProductQuantity"+i,type:"text",disabled:""==e.ProductName||null==e.ProductName,maxlength:"8"},domProps:{value:e.ProductQuantity},on:{keypress:function(e){return t.isNumber(e)},input:[function(s){s.target.composing||t.$set(e,"ProductQuantity",s.target.value)},function(s){2==t.selectedQuotationType?t.CheckQuantity(e,s):t.CalculateAmount(e)}]}}),s("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProductQuantity"+i}},[t._v(t._s(n[0]))])]}}],null,!0)}),""!=e.ProductName&&null!=e.ProductName&&2==t.selectedQuotationType?s("span",{staticClass:"text-success"},[t._v(" "+t._s(t.$t("QuantityinStock"))+" "+t._s(e.ProductInStock))]):t._e()],1):t._e(),t.IsInventory?t._e():s("td",[s("Field",{attrs:{name:"ProductQuantity"+i,label:t.$t("Quantity"),rules:t.getQuantityValidationRule(e)},scopedSlots:t._u([{key:"default",fn:function(a){var n=a.errors;a.touched,a.invalid;return[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductQuantity,expression:"item.ProductQuantity"}],staticClass:"form-control filterme",attrs:{name:"ProductQuantity"+i,type:"text",disabled:""==e.ProductName||null==e.ProductName,maxlength:"8"},domProps:{value:e.ProductQuantity},on:{input:[function(s){s.target.composing||t.$set(e,"ProductQuantity",s.target.value)},function(s){return t.CalculateAmount(e)}]}}),s("span",{staticClass:"invalid-feedback d-block",attrs:{name:"ProductQuantity"+i}},[t._v(t._s(n[0]))])]}}],null,!0)})],1),s("td",[s("span",{staticClass:"float-left"},[t._v(t._s(t.currency)+" "+t._s(t._f("currency")(""==e.ProductName||null==e.ProductName?"0.0":e.ProductAmount)))])]),s("td",{staticClass:"position-relative overflow-visible single-action"},[s("span",[t._v(t._s(t.currency)+" "+t._s(t._f("currency")(""==e.ProductName||null==e.ProductName?"0.0":e.ProductDiscount)))]),""!=e.ProductName&&null!=e.ProductName?s("a",{staticClass:"d-inline-block px-2",attrs:{href:"javascript:;",title:t.$t("Add")},on:{click:function(s){return t.ShowDiscount(e)}}},[s("em",{staticClass:"fa fa-arrow-circle-right text-info",staticStyle:{"font-size":"20px"}})]):t._e(),e.toggleDiscount?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],staticClass:"position-absolute panelcoming panelfix"},[s("a",{staticClass:"close pt-0",staticStyle:{"font-size":"23px"},attrs:{href:"javascript:;","data-dismiss":"alert"},on:{click:function(s){return t.ShowDiscount(e)}}},[t._v("×")]),s("div",{staticClass:"col-12 float-left p-0"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductDiscountType,expression:"item.ProductDiscountType"}],staticClass:"float-left",attrs:{type:"radio",value:"percent",name:"ProductDiscountType"+i,"data-resource":"Percentage"},domProps:{checked:t._q(e.ProductDiscountType,"percent")},on:{change:[function(s){return t.$set(e,"ProductDiscountType","percent")},function(t){e.ProductDiscountValue=0}]}}),"percent"==e.ProductDiscountType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductDiscountValue,expression:"item.ProductDiscountValue"}],staticClass:"form-control float-left col-4",attrs:{type:"text"},domProps:{value:e.ProductDiscountValue},on:{input:[function(s){s.target.composing||t.$set(e,"ProductDiscountValue",s.target.value)},function(s){return t.onlyDecimal(e,"DISCOUNT",!0)}]}}):t._e(),"percent"==e.ProductDiscountType?s("span",{staticClass:"p-1 mt-1 float-left"},[t._v("%")]):t._e()]),s("div",{staticClass:"col-12 float-left p-0 div1floatleft"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductDiscountType,expression:"item.ProductDiscountType"}],staticClass:"float-left",attrs:{type:"radio",value:"flat",name:"ProductDiscountType"+i,"data-resource":"Fixed"},domProps:{checked:t._q(e.ProductDiscountType,"flat")},on:{change:[function(s){return t.$set(e,"ProductDiscountType","flat")},function(t){e.ProductDiscountValue=0}]}}),"flat"==e.ProductDiscountType?s("input",{directives:[{name:"model",rawName:"v-model",value:e.ProductDiscountValue,expression:"item.ProductDiscountValue"}],staticClass:"form-control float-left col-4",attrs:{type:"text"},domProps:{value:e.ProductDiscountValue},on:{input:[function(s){s.target.composing||t.$set(e,"ProductDiscountValue",s.target.value)},function(s){return t.onlyDecimal(e,"DISCOUNT",!1)}]}}):t._e()])]):t._e()]),s("td",{staticClass:"position-relative overflow-visible single-action"},[s("span",[t._v(t._s(t.currency)+" "+t._s(t._f("currency")(e.ProductTax)))]),""!=e.ProductName&&null!=e.ProductName?s("a",{staticClass:"d-inline-block",attrs:{href:"javascript:;",title:t.$t("Add")},on:{click:function(s){return t.ShowTax(e)}}},[s("em",{staticClass:"fa fa-arrow-circle-right text-info",staticStyle:{"font-size":"20px"}})]):t._e(),e.toggleTax?s("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],staticClass:"position-absolute panelcoming paneltax panelfix bg-light listing border-0 p-0 bg-white"},[s("div",{staticClass:"col-12 float-left p-0"},[s("div",{staticClass:"p-0 border-0"},[s("a",{staticClass:"close pt-0",staticStyle:{"font-size":"23px",right:"-20px",top:"10px"},attrs:{href:"javascript:;","data-dismiss":"alert"},on:{click:function(s){return t.ShowTax(e)}}},[t._v("×")])]),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table-responsive border-0",attrs:{id:"example","aria-describedby":"content"}},[s("thead",{staticClass:"thead-bg"},[s("tr",[s("th",{attrs:{scope:"col",width:"150px"}},[s("span",[t._v(t._s(t.$t("Tax")))])]),s("th",{attrs:{scope:"col",width:"150px"}},[s("span",[t._v(t._s(t.$t("TaxFor")))])]),s("th",{attrs:{scope:"col",width:"150px"}},[s("span",[t._v(t._s(t.$t("Rate")))])]),s("th",{staticClass:"text-center",attrs:{scope:"col"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.AddMoreTax(e)}}},[s("em",{staticClass:"fa fa-plus-circle text-success",staticStyle:{"font-size":"20px"}})])])])]),s("tbody",[t._l(e.TaxData,(function(i,a){return s("tr",{key:a},[s("td",[i.TAX_ID>0?s("span",[t._v(t._s(i.TAX_NAME))]):t._e(),i.TAX_ID<=0?s("input",{directives:[{name:"model",rawName:"v-model",value:i.TAX_NAME,expression:"taxItem.TAX_NAME"}],class:{"form-control":!0,"is-invalid":t.isTaxNameFilled},attrs:{type:"text"},domProps:{value:i.TAX_NAME},on:{input:[function(e){e.target.composing||t.$set(i,"TAX_NAME",e.target.value)},function(e){return t.clearRateIfNameEmpty(i,"TAX",!0)}]}}):t._e()]),s("td",[t._v(t._s(i.TAX_FOR))]),s("td",[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:i.TAX_RATE,expression:"taxItem.TAX_RATE"}],staticClass:"form-control col-9 float-left",attrs:{type:"text"},domProps:{value:i.TAX_RATE},on:{input:[function(e){e.target.composing||t.$set(i,"TAX_RATE",e.target.value)},function(e){return t.onlyDecimal(i,"TAX",!0)}]}}),s("div",{staticClass:"input-group-append"},["percent"==i.TAX_TYPE?s("span",{staticClass:"input-group-text"},[t._v("%")]):t._e()])])]),i.TAX_ID<=0?s("td",{staticClass:"text-center"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.DeleteMoreTax(e,a)}}},[s("em",{staticClass:"fa fa-trash-o text-danger",staticStyle:{"font-size":"20px"}})])]):t._e()])})),null==e.TaxData||0==e.TaxData.length?s("tr",[s("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"4"}},[t._v(" "+t._s(t.$t("NoRecordfound")))])]):t._e()],2)])])])]):t._e()]),s("td",[s("span",[t._v(t._s(t.currency)+" "+t._s(t._f("currency")(t.totalSumlineItem(e))))])]),s("td",{staticClass:"text-center single-action",attrs:{"data-width":"50"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return t.DeleteProductSummaryItem(e,i)}}},[s("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),s("tr",[s("td",{staticClass:"text-dark text-right font-weight-bold align-middle border-bottom-0",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("SubTotal"))+":")]),s("td",{staticClass:"border-bottom-0 align-middle",attrs:{colspan:"2"}},[s("span",[t._v(t._s(t.ProductSummary.SubTotal))])])]),s("tr",[s("td",{staticClass:"text-dark text-right font-weight-bold align-middle border-bottom-0",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("ShippingCharges"))+" :")]),s("td",{staticClass:"border-bottom-0",attrs:{colspan:"2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.ProductSummary.ShippingCharges,expression:"ProductSummary.ShippingCharges"}],staticClass:"form-control",attrs:{type:"text",placeholder:"0.00"},domProps:{value:t.ProductSummary.ShippingCharges},on:{input:function(e){e.target.composing||t.$set(t.ProductSummary,"ShippingCharges",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"text-dark text-right font-weight-bold align-middle border-bottom-0",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("Adjustments"))+" :")]),s("td",{staticClass:"border-bottom-0",attrs:{colspan:"2"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.ProductSummary.Adjustments,expression:"ProductSummary.Adjustments"}],staticClass:"form-control",attrs:{type:"text",placeholder:"0.00"},domProps:{value:t.ProductSummary.Adjustments},on:{input:function(e){e.target.composing||t.$set(t.ProductSummary,"Adjustments",e.target.value)}}})])]),s("tr",[s("td",{staticClass:"text-dark text-right font-weight-bold align-middle border-bottom-0",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("Total"))+" :")]),s("td",{staticClass:"border-bottom-0",attrs:{colspan:"2"}},[s("span",{attrs:{value:t.summaryTotal}},[t._v(t._s(t.ProductSummary.SummaryTotal))])])])],2)])])])]),s("div",{staticClass:"row flex-row-reverse mt-2"},[s("div",{staticClass:"col-lg-6 text-right"},[1001!=t.statusId?s("a",{staticClass:"btn btn-warning mr-2",class:{disabled:t.submited},attrs:{href:"javascript:;",title:t.$t("SaveAsDraft")},on:{click:function(e){return t.SaveAsDraft(i,a,"D")}}},[s("em",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("SaveAsDraft")))]):t._e(),s("a",{staticClass:"btn btn-success mr-2 addQuote_a",class:{disabled:t.submited},attrs:{href:"javascript:;","data-tour":"step: 1; title: enter  dealDetail; content: AddVendorDetailContent",title:"Save"},on:{click:function(e){return t.SubmitData(i,a,"A")}}},[s("em",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save"))+" ")]),s("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:void(0)",title:"Cancel"},on:{click:t.onCancel}},[s("em",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel"))+" ")])]),s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"py-2"},[s("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))])])])])]}}])}),t.showPricebookModal?s("modalpricebook",{attrs:{selectedItemIndex:t.selectedItemIndex,summaryData:t.ProductSummary.SummaryData},on:{close:function(e){t.showPricebookModal=!1},SetPriceBook:t.SetPriceBook}}):t._e()],1)])],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12 padding-t_8"},[s("div",{staticClass:"theme-primary partition-full"},[s("span",{staticClass:"p-name text-white"},[t._v("Manage Quote")]),s("span",{staticClass:"float-right"})])])])}],n=s("c7eb"),r=s("1da1"),o=s("53ca"),d=(s("a9e3"),s("b680"),s("a15b"),s("ac1f"),s("1276"),s("5319"),s("498a"),s("b0c0"),s("99af"),s("4de4"),s("d3b7"),s("d81d"),s("00b4"),s("159b"),s("b64b"),s("e9c4"),s("a434"),s("c740"),s("7db0"),s("9769")),l=s("5ba0"),c=s("4e2c"),u=s("1157"),p=s.n(u),m=!0,A={components:{DynamicForm:l["a"],modalpricebook:c["a"]},data:function(){return{value:"",LeadData:null,LeadOwner:null,GroupBy:[],Channel:null,IndustryType:null,Status:null,quoteID:this.$route.params.id,reqFromId:this.$route.params.reqFromId,currency:null,options:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,maxDate:new Date(Date.now())},DependentOption:[{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}],selected:!1,selectoptions:[],Address:null,ProductSummary:null,CountryData:[],AccountData:[],ShippingContactPerson:[],showPricebookModal:!1,selectedItemIndex:null,AccountId:0,statusId:0,submited:!1,isTaxNameFilled:!1,vSelectValidate:!1,vSelectContactPerson:!1,sameShippingAddressAsBilling:!1,qlist:"",redirectURL:"",selectedQuotationType:"0",Ischeckshipping:!1,IsInventory:!0,accntid:0,dealid:0,odnumber:"",dateformat:null,userId:null,companyId:null,isLoading:!1}},created:function(){this.userId=this.GetUserInfo.ID,this.companyId=this.GetUserInfo.CompanyId,this.dateformat=this.GetUserInfo.DateFormat,this.currency=this.GetUserInfo.Currency,this.currency&&(this.currency="(USD)"==this.currency?"$":this.currency),Number.prototype.toFixed2=function(){var t=Math.floor(100*parseFloat(this,10))/100;return parseFloat(t,10).toFixed(2)},this.FetchData(),this.GetCountryData("","COUNTRIES"),this.qlist=this.$route.params.reqFromId,this.redirectURL=decodeURIComponent(this.qlist).split("&amp;").join("&")},methods:{getQuantityValidationRule:function(t){var e={required:!0,numeric:!0,min_value:1};return 2==this.selectedQuotationType&&(e.max_value=t.ProductInStock?0==t.ProductInStock?e.min_value:t.ProductInStock:e.min_value),e},onCancel:function(){"0"!=this.reqFromId?this.$router.push({path:"/CRM/ViewDealDetails/".concat(this.reqFromId,"/CRM/CRM_DEALS")}):this.$router.push({name:"CRMQuote"})},encodeHtmlCode:function(t){return Array.isArray(t)||(t=t.replace('"','\\"')),t},decodeHtmlCode:function(t){return Array.isArray(t)||(t=unescape(t)),t},ClearAll:function(t){t.ProductQuantity="",this.ProductSummary.ShippingCharges="",this.ProductSummary.Adjustments="",this.ProductSummary.SubTotal="",this.ProductSummary.SummaryTotal=""},checkIfQuoteTypeSelected:function(t){var e=this;"0"==this.selectedQuotationType&&(e.ShowAlert("Please select Quotation type first.","warning",!0,this.$t("Alert")),t.ProductName="")},isNumber:function(t){var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},chkapplicableshipping:function(t){this.Ischeckshipping=p()(t.target).prop("checked"),this.Ischeckshipping?(p()("#chkCloneBillingAddress").attr("checked",!1),this.sameShippingAddressAsBilling=!1):(this.Address.ShippingAddress.ShippingAccountCity="",this.Address.ShippingAddress.ShippingAccountAddress="",this.Address.ShippingAddress.ShippingZipCode="",this.Address.ShippingAddress.ShippingAccountAddress2="",this.Address.ShippingAddress.ShippingState="",this.Address.ShippingAddress.ShippingContactPerson="",this.Address.ShippingAddress.ShippingCountry="",this.Address.ShippingAddress.ShippingCompanyName="",this.sameShippingAddressAsBilling=!1)},checkForSameBillingAndShippingAddress:function(){"undefined"!=typeof this.Address.ShippingAddress.ShippingContactPerson&&this.Address.ShippingAddress.ShippingContactPerson&&this.Address.ShippingAddress.ShippingContactPerson.length>0&&this.Address.ShippingAddress.ShippingContactPerson[0].value==this.Address.BillingAddress.BillingContactPerson[0].value&&this.Address.ShippingAddress.ShippingAccountAddress==this.Address.BillingAddress.BillingAccountAddress&&this.Address.ShippingAddress.ShippingCity==this.Address.BillingAddress.BillingCity&&this.Address.ShippingAddress.ShippingZipCode==this.Address.BillingAddress.BillingZipCode&&this.Address.ShippingAddress.ShippingState==this.Address.BillingAddress.BillingState&&this.Address.ShippingAddress.ShippingAccountAddress2==this.Address.BillingAddress.BillingAccountAddress2&&this.Address.ShippingAddress.ShippingAccountCity==this.Address.BillingAddress.BillingAccountCity&&this.Address.ShippingAddress.ShippingCompanyName==this.Address.BillingAddress.BillingCompanyName&&this.Address.ShippingAddress.ShippingAccountAddress2==this.Address.BillingAddress.BillingAccountAddress2&&(this.sameShippingAddressAsBilling=!0,this.Ischeckshipping=!0)},clearRateIfNameEmpty:function(t,e,s){""==p.a.trim(t.TAX_NAME)?(t.TAX_RATE=0,t.TAX_NAME=p.a.trim(t.TAX_NAME)):this.isTaxNameFilled=!1},outside:function(t){},onlyDecimal:function(t,e,s){"TAX"==e?""!=t.TAX_NAME?(t.TAX_RATE=t.TAX_RATE.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"),s&&parseFloat(""!=t.TAX_RATE?t.TAX_RATE:0)>100&&(t.TAX_RATE="100")):(this.isTaxNameFilled=!0,t.TAX_RATE="0"):"DISCOUNT"==e?(t.ProductDiscountValue=t.ProductDiscountValue.replace(/[^0-9.]/g,"").replace(/(\..*)\./g,"$1"),s&&parseFloat(""!=t.ProductDiscountValue?t.ProductDiscountValue:0)>100&&(t.ProductDiscountValue="100")):"Adjustments"==e?"."==t.Adjustments.charAt(0)&&(t.Adjustments="0"+t.Adjustments):"Shipping"==e&&"."==t.ShippingCharges.charAt(0)&&(t.ShippingCharges="0"+t.ShippingCharges)},DependentDateObject:function(t,e,s){var i=this.Quoteid;if("undefined"!=typeof i&&""!=i||(i=0),"order_date"==t.name){var a=new Date;a="undefined"!==typeof e&&""!=e?new Date(Date.parse(e)):t.value,this.DependentOption[0]={useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:a},p.a.each(this.GroupBy,(function(t,e){p.a.each(e.Data,(function(t,e){"order_expiry_date"==e.name&&"fetchCall"!=s&&(e.value="")}))}))}},showDependentItem:function(t,e){var s=this,i=0;if(2==e){i=1;s.selectedQuotationType=e}else if(1==e){i=1;s.selectedQuotationType=e}else s.selectedQuotationType=e;p.a.each(s.GroupBy,p.a.proxy((function(s,a){p.a.each(a.Data,(function(s,a){a.parent_id==t.custom_field_id&&"show"==a.dependent_type&&(a.dependent_show_type=0,(2==e&&"deal_id"==a.name||1==e&&"client_id"==a.name)&&(a.dependent_show_type=i))}))}),s)),t.value=e;var a=[{ProductName:"",ProductList:[],ProductDescription:"",ProductQuantity:0,ProductInStock:0,ProductRate:0,ProductTax:0,ProductAmount:0,ProductDiscount:0,ProductDiscountType:"percent",ProductDiscountValue:0,ProductItemTotal:0,PriceBookId:0,toggleDiscount:!1,toggleTax:!1,TaxData:[],DiscountData:[]}];s.ProductSummary={SubTotal:0,ShippingCharges:0,Adjustments:0,RoundOff:0,SummaryTotal:0,SummaryData:a}},onKeyDown:function(){m=!0},onSearch:function(t,e,s){t&&this.searchSelectData(t,this,e,s)},searchSelectData:function(t,e,s,i){this.ShowSearchData(t,e,s,i)},ShowSearchData:function(t,e,s,i){var a="";if("ITEM_NAME_SUMMARY"==i)a="id=&moduleName=".concat(e.$route.params.moduleName,"&type=ITEM_NAME");else{var n=0;e.AccountId>0&&"ACCOUNTS"!=s.field_code&&(n=e.AccountId),a="id=&moduleName=".concat(e.$route.params.moduleName,"&type=").concat(s.field_code,"&refId=").concat(n)}d["a"].getDDLData(a+"&search="+escape(t)).then((function(t){e.productLoading=!1;var a=[];null!=t.data&&(a=t.data),"ITEM_NAME_SUMMARY"==i?(p.a.each(e.ProductSummary.SummaryData,(function(t,e){a.DATA=a.DATA.filter((function(t){return t.value!=e.ProductName.value}))})),s.ProductList=a.DATA):s.select_options=a.DATA}))},GetAddrData:function(t){var e=this;t=e.Address.BillingAddress.BillingCompanyName,"undefined"==typeof t&&(t=0);var s="addressid="+t+"&sourceid="+e.accntid;d["a"].GetAddressdata(s).then((function(t){var s=t.data.DATA;e.Address.BillingAddress.BillingAccountAddress=null==s[0].ACCOUNT_ADDRESS?"":s[0].ACCOUNT_ADDRESS,e.Address.BillingAddress.BillingAccountAddress2=null==s[0].ACCOUNT_ADDRESS2?"":s[0].ACCOUNT_ADDRESS2,e.Address.BillingAddress.BillingAccountCity=null==s[0].ACCOUNT_CITY?"":s[0].ACCOUNT_CITY,e.Address.BillingAddress.BillingZipCode=null==s[0].ACCOUNT_ZIP_CODE?"":s[0].ACCOUNT_ZIP_CODE,e.Address.BillingAddress.BillingCountry=null==s[0].ACCOUNT_COUNTRY?"":s[0].ACCOUNT_COUNTRY,e.Address.BillingAddress.BillingState=null==s[0].ACCOUNT_STATE?"":s[0].ACCOUNT_STATE,e.Address.BillingAddress.BillingContactPerson=s[0].CONTACT_ID,e.Address.BillingAddress.BillingCompanyName=null==s[0].ADDRESS_NAME||"undefined"==typeof s[0].ADDRESS_NAME?0:s[0].ADDRESS_NAME,1==e.sameShippingAddressAsBilling&&(e.Address.ShippingAddress.ShippingAccountAddress=null==s[0].ACCOUNT_ADDRESS?"":s[0].ACCOUNT_ADDRESS,e.Address.ShippingAddress.ShippingAccountAddress2=null==s[0].ACCOUNT_ADDRESS2?"":s[0].ACCOUNT_ADDRESS2,e.Address.ShippingAddress.ShippingAccountCity=null==s[0].ACCOUNT_CITY?"":s[0].ACCOUNT_CITY,e.Address.ShippingAddress.ShippingZipCode=null==s[0].ACCOUNT_ZIP_CODE?"":s[0].ACCOUNT_ZIP_CODE,e.Address.ShippingAddress.ShippingCountry=null==s[0].ACCOUNT_COUNTRY?"":s[0].ACCOUNT_COUNTRY,e.Address.ShippingAddress.ShippingState=null==s[0].ACCOUNT_STATE?"":s[0].ACCOUNT_STATE,e.Address.ShippingAddress.ShippingContactPerson=s[0].CONTACT_ID,e.Address.ShippingAddress.ShippingCompanyName=null==s[0].ADDRESS_NAME||"undefined"==typeof s[0].ADDRESS_NAME?0:s[0].ADDRESS_NAME)}))},GetAddrData2:function(t){var e=this;"undefined"==typeof t&&(t=0);var s="addressid="+t+"&sourceid="+e.accntid;d["a"].GetAddressdata(s).then((function(t){var s=t.data.DATA;e.Address.ShippingAddress.ShippingAccountAddress=null==s[0].ACCOUNT_ADDRESS?"":s[0].ACCOUNT_ADDRESS,e.Address.ShippingAddress.ShippingAccountAddress2=null==s[0].ACCOUNT_ADDRESS2?"":s[0].ACCOUNT_ADDRESS2,e.Address.ShippingAddress.ShippingAccountCity=null==s[0].ACCOUNT_CITY?"":s[0].ACCOUNT_CITY,e.Address.ShippingAddress.ShippingZipCode=null==s[0].ACCOUNT_ZIP_CODE?"":s[0].ACCOUNT_ZIP_CODE,e.Address.ShippingAddress.ShippingCountry=null==s[0].ACCOUNT_COUNTRY?"":s[0].ACCOUNT_COUNTRY,e.Address.ShippingAddress.ShippingState=null==s[0].ACCOUNT_STATE?"":s[0].ACCOUNT_STATE,e.Address.ShippingAddress.ShippingCompanyName=null==s[0].ADDRESS_NAME||"undefined"==typeof s[0].ADDRESS_NAME?0:s[0].ADDRESS_NAME,e.Address.ShippingAddress.ShippingContactPerson=s[0].CONTACT_ID}))},setSelectedValue:function(t,e,s,i){var a=this,n=this;if("shipping"==s){var r=e;"search"!=s&&(r=e.value);var l="";if("undefined"!=typeof r){var c="id=&moduleName=".concat(n.$route.params.moduleName,"&type=").concat(i,"&refId=").concat(r);d["a"].getDDLData(c+"&search="+escape(l)).then((function(t){var e=t.data;if(null!=e)return n.Address.ShippingAddress.ShippingContactPerson="",a.ShippingContactPerson=e.DATA.map((function(t){return{value:t.value,label:t.name}}))}))}}else if("ITEM_NAME_SUMMARY"==s)t.ProductName=e,m&&(e.first_value>0&&(t.ProductInStock=e.first_value),e.second_value>0&&(t.ProductRate=e.second_value),n.ShowTaxItems(t),n.CalculateAmount(t),t.PriceBookId=0);else try{var u=e;if(Array.isArray(e)?u="object"===Object(o["a"])(e[0])&&null!==e[0]?e[0].value:e[0]:(u=e.value,n.accntid=u),"account_id"==t.name&&u>0&&0==n.quoteID){n.AccountId="object"==Object(o["a"])(u)?u.value:u,n.FillDropdown("ACCOUNT_CONTACTS",n.AccountId),n.FillDropdown("ACCOUNT_DEALS",n.AccountId),n.FillDropdown("ACCOUNT_CLIENTS",n.AccountId),n.FillDropdown("ADDRESS_NAMES",n.AccountId);var p="addressid=-1&sourceid=".concat(n.AccountId);d["a"].GetAddressdata(p).then((function(t){var e=t.data.DATA;console.log(e),n.Address.BillingAddress.BillingContactPerson=e[0].CONTACT_ID,n.Address.BillingAddress.BillingAccountAddress=null==e[0].ACCOUNT_ADDRESS?"":e[0].ACCOUNT_ADDRESS,n.Address.BillingAddress.BillingAccountAddress2=null==e[0].ACCOUNT_ADDRESS2?"":e[0].ACCOUNT_ADDRESS2,n.Address.BillingAddress.BillingAccountCity=null==e[0].ACCOUNT_CITY?"":e[0].ACCOUNT_CITY,n.Address.BillingAddress.BillingZipCode=null==e[0].ACCOUNT_ZIP_CODE?"":e[0].ACCOUNT_ZIP_CODE,n.Address.BillingAddress.BillingCountry=null==e[0].ACCOUNT_COUNTRY?"":e[0].ACCOUNT_COUNTRY,n.Address.BillingAddress.BillingState=null==e[0].ACCOUNT_STATE?"":e[0].ACCOUNT_STATE,n.Address.BillingAddress.BillingCompanyName=null==e[0].ADDRESS_NAME||"undefined"==typeof e[0].ADDRESS_NAME?0:e[0].ADDRESS_NAME}))}}catch(A){}},formatDate:function(t){if(t)return moment(String(t),"YYYY-MM-DD").format(String(Globalize.culture().calendar.patterns.d).toUpperCase())},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var s=this.$t(String(t).toUpperCase());return s||/^\s*$/.test(s)?s:(s=this.$t(String(t)),s||/^\s*$/.test(s)?s:t)}s=this.$t(String(e).toUpperCase());return s||/^\s*$/.test(s)?s:(s=this.$t(String(e)),s||/^\s*$/.test(s)?s:e)},isBlank:function(t){return!t||/^\s*$/.test(t)},SubmitData:function(t,e,s){var i="",a=(i="",this),n=document.getElementById("client_id"),r=n.computedStyleMap().get("display"),l=document.getElementById("deal_id"),c=l.computedStyleMap().get("display"),u=!!c&&"none"!=c.value,m=!!r&&"none"!=r.value;a.$refs.form.validate().then((function(t){a.vSelectValidate=!0,0==m&&(a.$refs.form.errors["Client Name"]=[]),0==u&&(a.$refs.form.errors["Deal"]=[]);var e=[];if(Object.keys(a.$refs.form.errors).forEach((function(t){e.push(a.$refs.form.errors[t].length)})),t=!e.some((function(t){return t>0})),t){a.isLoading=!0,a.submited=!0;var n=a.LeadData,r=[],l=[],c=0;p.a.each(n,(function(t,e){var s={field_name:e.name,required:e.is_required,length:e.length,type:e.validation_type},i="order_id"==e.name?a.quoteID:"undefined"===typeof e.value?"":e.value;if(i="undefined"===typeof i?"":i,"date"==e.dt_code&&(i=e.value),"quotation_type"==e.name&&(c=e.value),"checkbox"==e.dt_code){var n=e.select_value.filter((function(t){return null!=t&&""!=t}));i=n.join(",")}if("select"==e.dt_code)try{i="object"===Object(o["a"])(i)&&null!==i?i.value:i}catch(u){}"created_at"==e.name&&(i=""),"created_by"==e.name&&(i=a.userId),"modified_by"==e.name&&(i=a.userId),"company_id"==e.name&&(i=a.companyId);var d={field_name:e.name,field_value:i,custom_field_id:e.custom_field_id};r.push(d),l.push(s)}));var A=[];p.a.each(a.ProductSummary.SummaryData,(function(t,e){var s=0;if(2==c)if(Array.isArray(e.ProductName))try{s="object"===Object(o["a"])(e.ProductName[0])&&null!==e.ProductName[0]?e.ProductName[0].value:e.ProductName[0]}catch(a){s=e.ProductName[0]}else s=null==e.ProductName?"":e.ProductName.value;else s=e.ProductName;if(("undefined"!=typeof s||""!=e.ProductName)&&(s.length>0||0!=s)){var i={ProductName:s,ProductDescription:e.ProductDescription,ProductQuantity:e.ProductQuantity,ProductRate:e.ProductRate,ProductTax:e.ProductTax,ProductAmount:e.ProductAmount,ProductDiscount:e.ProductDiscount,ProductDiscountType:e.ProductDiscountType,ProductDiscountValue:e.ProductDiscountValue,ProductItemTotal:e.ProductItemTotal,PriceBookId:e.PriceBookId,IsTaxApplicable:null!=e.TaxData&&e.TaxData.length>0?1:0,TaxData:e.TaxData};A.push(i)}})),0==A.length&&(i="no");var g={SubTotal:a.ProductSummary.SubTotal,ShippingCharges:""!=a.ProductSummary.ShippingCharges?a.ProductSummary.ShippingCharges:"0",Adjustments:""!=a.ProductSummary.Adjustments?a.ProductSummary.Adjustments:"0",SummaryTotal:a.ProductSummary.SummaryTotal,SummaryData:A};if(a.ProductSummary.SummaryTotal<0)return a.ShowAlert("Total amount cannot be in minus.","warning",!0,a.$t("Alert")),a.submited=!1,a.isLoading=!1,!1;if(0==a.ProductSummary.SummaryTotal)return a.ShowAlert("Total amount cannot be zero.","warning",!0,a.$t("Alert")),a.submited=!1,a.isLoading=!1,!1;var h={BillingContactPerson:a.Address.BillingAddress.BillingContactPerson,BillingCompanyName:a.Address.BillingAddress.BillingCompanyName,BillingAccountAddress:a.Address.BillingAddress.BillingAccountAddress,BillingCity:a.Address.BillingAddress.BillingCity,BillingZipCode:a.Address.BillingAddress.BillingZipCode,BillingState:a.Address.BillingAddress.BillingState,BillingCountry:a.Address.BillingAddress.BillingCountry,BillingAccountAddress2:a.Address.BillingAddress.BillingAccountAddress2,BillingAccountCity:a.Address.BillingAddress.BillingAccountCity},S={ShippingContactPerson:a.Address.ShippingAddress.ShippingContactPerson,ShippingCompanyName:a.Address.ShippingAddress.ShippingCompanyName,ShippingAccountAddress:a.Address.ShippingAddress.ShippingAccountAddress,ShippingCity:a.Address.ShippingAddress.ShippingCity,ShippingZipCode:a.Address.ShippingAddress.ShippingZipCode,ShippingState:a.Address.ShippingAddress.ShippingState,ShippingCountry:a.Address.ShippingAddress.ShippingCountry,ShippingAccountAddress2:a.Address.ShippingAddress.ShippingAccountAddress2,ShippingAccountCity:a.Address.ShippingAddress.ShippingAccountCity},C={BillingAddress:h,ShippingAddress:S},v={Status:s},_={SubModuleCode:a.$route.params.subModuleCode},f={data:r,address:C,productSummary:g,validation:l,status:v,subModuleCode:_};if(0==i.length){var y=JSON.stringify(f);console.log(f),d["a"].SaveOrder(y).then((function(t){if(a.isLoading=!1,"1"==t.data[0].Code){var e="";"0"!=a.quoteID?"D"==s?a.ShowAlert(a.$t("DraftSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):"D"==s?a.ShowAlert(a.$t("DraftSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):(e=a.$t("SubmitSuccess",[a.$t("Quotation"),a.$t("Generated").toLowerCase(),t.data[0].Name]),a.ShowAlert(e,"success",!0,a.$t("Alert"))),a.onCancel()}else a.ShowAlert(a.$t("AddedError",[a.$t("Quotation")]),"failure",!0,a.$t("Alert"));a.submited=!1}))}else if(2==i.length&&"D"==s){y=JSON.stringify(f);d["a"].SaveOrder(y).then((function(t){if("1"==t.data[0].Code){var e="";"0"!=a.quoteID?"D"==s?a.ShowAlert(a.$t("DraftSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):"D"==s?a.ShowAlert(a.$t("DraftSuccess",[a.$t("Quotation")]),"success",!0,a.$t("Alert")):(e=a.$t("Quotation")+" "+a.$t("SubmitSuccess")+" "+a.$t("Generated")+" "+t.data[0].Name,a.ShowAlert(e,"success",!0,a.$t("Alert"))),a.onCancel()}else a.ShowAlert(a.$t("AddedError",[a.$t("Quotation")]),"failure",!0,a.$t("Alert"));a.submited=!1}))}else a.submited=!1,a.ShowAlert(a.$t("PleaseAddSomeLineItems"),"warning",!0,a.$t("Alert"))}else console.log(a.$refs.form.errors),a.submited=!1,a.ShowAlert(a.$t("CorrectHighlightedErrors",[a.$t("Quotation")]),"warning",!0,a.$t("Alert"))}))},SaveAsDraft:function(t,e){var s=this,i="";s.vSelectValidate=!0,s.vSelectContactPerson=!0,s.submited=!0;var a=s.LeadData,n=[],r=[],l=0,c=0;p.a.each(a,(function(t,e){var i={field_name:e.name,required:e.is_required,length:e.length,type:e.validation_type},a="order_id"==e.name?s.quoteID:"undefined"===typeof e.value?"":e.value;if(a="undefined"===typeof a?"":a,"date"==e.dt_code&&(a=e.value),"quotation_type"==e.name&&(l=e.value),"account_id"==e.name&&(c=e.value),"checkbox"==e.dt_code){var d=e.select_value.filter((function(t){return null!=t&&""!=t}));a=d.join(",")}if("created_by"==e.name&&(a=s.userid),"modified_by"==e.name&&(a=s.userid),"company_id"==e.name&&(a=s.companyId),"select"==e.dt_code)try{a="object"===Object(o["a"])(a)&&null!==a?a.value:a}catch(p){}var u={field_name:e.name,field_value:a,custom_field_id:e.custom_field_id};n.push(u),r.push(i)}));var u=[];p.a.each(s.ProductSummary.SummaryData,(function(t,e){var s=0;if(2==l)if(Array.isArray(e.ProductName))try{s="object"===Object(o["a"])(e.ProductName[0])&&null!==e.ProductName[0]?e.ProductName[0].value:e.ProductName[0]}catch(a){s=e.ProductName[0]}else s=null==e.ProductName?"":e.ProductName.value;else s=e.ProductName;if(("undefined"!=typeof s||""!=e.ProductName)&&(s.length>0||0!=s)){var i={ProductName:s,ProductDescription:e.ProductDescription,ProductQuantity:e.ProductQuantity,ProductRate:e.ProductRate,ProductTax:e.ProductTax,ProductAmount:e.ProductAmount,ProductDiscount:e.ProductDiscount,ProductDiscountType:e.ProductDiscountType,ProductDiscountValue:e.ProductDiscountValue,ProductItemTotal:e.ProductItemTotal,PriceBookId:e.PriceBookId,IsTaxApplicable:null!=e.TaxData&&e.TaxData.length>0?1:0,TaxData:e.TaxData};u.push(i)}})),0==u.length&&(i="no");var m={SubTotal:s.ProductSummary.SubTotal,ShippingCharges:""!=s.ProductSummary.ShippingCharges?s.ProductSummary.ShippingCharges:"0",Adjustments:""!=s.ProductSummary.Adjustments?s.ProductSummary.Adjustments:"0",SummaryTotal:s.ProductSummary.SummaryTotal,SummaryData:u};if(s.ProductSummary.SummaryTotal<0)return s.ShowAlert("Total amount cannot be in minus.","warning",!0,s.$t("Alert")),s.submited=!1,!1;var A={BillingContactPerson:s.Address.BillingAddress.BillingContactPerson,BillingCompanyName:s.Address.BillingAddress.BillingCompanyName,BillingAccountAddress:s.Address.BillingAddress.BillingAccountAddress,BillingCity:s.Address.BillingAddress.BillingCity,BillingZipCode:s.Address.BillingAddress.BillingZipCode,BillingState:s.Address.BillingAddress.BillingState,BillingCountry:s.Address.BillingAddress.BillingCountry,BillingAccountAddress2:s.Address.BillingAddress.BillingAccountAddress2,BillingAccountCity:s.Address.BillingAddress.BillingAccountCity},g={ShippingContactPerson:s.Address.ShippingAddress.ShippingContactPerson,ShippingCompanyName:s.Address.ShippingAddress.ShippingCompanyName,ShippingAccountAddress:s.Address.ShippingAddress.ShippingAccountAddress,ShippingCity:s.Address.ShippingAddress.ShippingCity,ShippingZipCode:s.Address.ShippingAddress.ShippingZipCode,ShippingState:s.Address.ShippingAddress.ShippingState,ShippingCountry:s.Address.ShippingAddress.ShippingCountry,ShippingAccountAddress2:s.Address.ShippingAddress.ShippingAccountAddress2,ShippingAccountCity:s.Address.ShippingAddress.ShippingAccountCity},h={BillingAddress:A,ShippingAddress:g},S="D",C={Status:S},v={SubModuleCode:s.$route.params.subModuleCode},_={data:n,address:h,productSummary:m,validation:r,status:C,subModuleCode:v};if(i.length>=0&&""!=c){var f=JSON.stringify(_);d["a"].SaveOrder(f).then((function(t){if("1"==t.data[0].Code||"0"==t.data[0].Code){var e="";s.quoteID>0?"D"==S?s.ShowAlert(s.$t("DraftSuccess",[s.$t("Quotation")]),"success",!0,s.$t("Alert")):s.ShowAlert(s.$t("UpdatedSuccess",[s.$t("Quotation")]),"success",!0,s.$t("Alert")):"D"==S?s.ShowAlert(s.$t("DraftSuccess",[s.$t("Quotation")]),"success",!0,s.$t("Alert")):(e=s.$t("SubmitSuccess")+s.$t("Quotation")+String(s.$t("Generated")).toLowerCase()+t.data[0].Name,s.ShowAlert(e,"success",!0,s.$t("Alert")))}else s.ShowAlert(s.$t("AddedError",[s.$t("Quotation")]),"failure",!0,s.$t("Alert"));s.submited=!1,"0"!=s.reqFromId?s.$router.push({path:"/CRM/ViewDealDetails/".concat(s.reqFromId,"/CRM/CRM_DEALS")}):s.$router.push({name:"CRMQuote"})}))}else s.submited=!1,s.ShowAlert("Please Select Account Name","warning",!0,s.$t("Alert"))},MakeArray:function(t,e){var s=[],i=String(t).split(",");if("radio"==e||"checkbox"==e){if(i.length>0)for(var a=0;a<i.length;a++)if(i[a].split("|").length>1){var n={name:i[a].split("|")[0],value:i[a].split("|")[1]};s.push(n)}else{n={name:i[a],value:i[a]};s.push(n)}}else if(i.length>0)for(a=0;a<i.length;a++){n={name:i[a],value:i[a]};s.push(n)}return s},MakeNormalArray:function(t){try{return JSON.parse(t)}catch(e){return t}},MakeSelectArray:function(t){var e=[],s=String(t.select_options).split(",");if(s.length>0&&"Lookup"==t.picklist_options&&"YES"==t.form_field_visibility&&"select"==t.dt_code){var i={name:s[0],value:s[1]};e.push(i)}return e},GetValidation:function(t){var e={};return t.is_required&&(e["required"]=!0),t.length>0&&(e["max"]=t.length),"email"==t.validation_type&&(e["email"]=!0),"date"==t.dt_code&&(e["date_format"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"decimal"==t.dt_code&&(e["decimal"]=2),"int"!=t.dt_code&&"bigint"!=t.dt_code||(e["numeric"]=!0),"url"==t.dt_code&&(e["url"]="require_protocol"),e},AddNewProductSummary:function(){var t={ProductName:"",ProductList:[],ProductDescription:"",ProductQuantity:0,ProductInStock:0,ProductRate:0,ProductTax:0,ProductAmount:0,ProductDiscount:0,ProductDiscountType:"percent",ProductDiscountValue:0,ProductItemTotal:0,PriceBookId:0,toggleDiscount:!1,toggleTax:!1,TaxData:[],DiscountData:[]};this.ProductSummary.SummaryData.push(t)},DeleteProductSummaryItem:function(t,e){var s=this;s.confirmR(s.$t("ConfirmDeleteRecord"),!0,s.$t("Delete")+"  "+s.$t("ProductSummary"),(function(){s.ProductSummary.SummaryData.splice(e,1)}))},FillDropdown:function(){var t=Object(r["a"])(Object(n["a"])().mark((function t(e,s){var i,a,r,o;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i=this,i.Loading=!0,"",a=e,"BillingCity"==e||"ShippingCity"==e?a="STATE_DISTRICT":"BillingState"==e||"ShippingState"==e?a="STATE":"ADDRESS_NAMES"==e&&(a="ADDRESS_NAMES"),r=[],""==s){t.next=12;break}return o="id=&moduleName=".concat(i.$route.params.moduleName,"&type=").concat(a,"&refId=").concat(s),t.next=10,d["a"].getDDLData(o).then((function(t){i.Loading=!1,r=[],null!=t.data&&(r=t.data.DATA),null!=r||"undefined"!=typeof r?"BillingCity"==e?(i.Address.BillingAddress.BillingCity="",i.Address.BillingAddress.BillingCityList=r):"BillingState"==e?(i.Address.BillingAddress.BillingState="",i.Address.BillingAddress.BillingStateList=r):"ShippingCity"==e?(i.Address.ShippingAddress.ShippingCity="",i.Address.ShippingAddress.ShippingCityList=r):"ShippingState"==e?(i.Address.ShippingAddress.ShippingState="",i.Address.ShippingAddress.ShippingStateList=r):"ADDRESS_NAMES"==e?(i.Address.BillingAddress.BillingCompanyName="",i.Address.BillingAddress.BillingCompanyNameList=r,i.Address.ShippingAddress.ShippingCompanyName="",i.Address.ShippingAddress.ShippingCompanyNameList=r):"ACCOUNT_CONTACTS"==e?(i.ShippingContactPerson=r,p.a.each(i.LeadData,(function(t,e){"contact_id"==e.name&&(e.select_options=r,m&&(e.value="",e.select_value="",i.Address.ShippingAddress.ShippingContactPerson="",i.Address.BillingAddress.BillingContactPerson=""))}))):"ACCOUNT_DEALS"==e?p.a.each(i.LeadData,(function(t,e){"deal_id"==e.name&&(e.select_options=r)})):"ACCOUNT_CLIENTS"==e&&p.a.each(i.LeadData,(function(t,e){"client_id"==e.name&&(e.select_options=r)})):(i.Address.BillingAddress.BillingCompanyName=0,i.Address.BillingAddress.BillingCompanyNameList=r)}));case 10:t.next=13;break;case 12:"BillingCity"==e?(i.Address.BillingAddress.BillingCity="",i.Address.BillingAddress.BillingCityList=r):"BillingState"==e?(i.Address.BillingAddress.BillingState="",i.Address.BillingAddress.BillingStateList=r):"ShippingCity"==e?(i.Address.ShippingAddress.ShippingCity="",i.Address.ShippingAddress.ShippingCityList=r):"ShippingState"==e?(i.Address.ShippingAddress.ShippingState="",i.Address.ShippingAddress.ShippingStateList=r):"ADDRESS_NAMES"==e&&(i.Address.BillingAddress.BillingCompanyName="",i.Address.BillingAddress.BillingCompanyNameList=r);case 13:case"end":return t.stop()}}),t,this)})));function e(e,s){return t.apply(this,arguments)}return e}(),GetCountryData:function(t,e){var s="id=&moduleName=".concat(this.$route.params.moduleName,"&type=").concat(e),i=this;d["a"].getDDLData(s+"&search="+escape(t)).then((function(t){var e=t.data,s=e.DATA.filter((function(t){return"United States"==t.name}));if(null!=e){i.CountryData=e.DATA;var a=i.quoteID;null!=s&&s.length>0&&"0"==a&&(i.FillDropdown("BillingState",s[0].value),i.Address.BillingAddress.BillingCountry=s[0].value)}})),s="id=&moduleName=".concat(this.$route.params.moduleName,"&type=ACCOUNTS"),d["a"].getDDLData(s+"&search="+escape(t)).then((function(t){var e=t.data;null!=e&&(i.AccountData=e.DATA)}))},CloneBillingAddress:function(t,e){"undefined"!=typeof e?("loadtax"!=e&&this.FillDropdown(e,t.target.value),"ShippingZipCode"!=e&&"ShippingCity"!=e&&"ShippingState"!=e&&"loadtax"!=e||this.CalculateTax()):p()("#chkCloneBillingAddress").prop("checked")&&(this.Address.ShippingAddress.ShippingContactPerson=this.Address.BillingAddress.BillingContactPerson,this.Address.ShippingAddress.ShippingZipCodeList=this.Address.BillingAddress.BillingZipCodeList,this.Address.ShippingAddress.ShippingCityList=this.Address.BillingAddress.BillingCityList,this.Address.ShippingAddress.ShippingStateList=this.Address.BillingAddress.BillingStateList,this.Address.ShippingAddress.ShippingAccountAddress=this.Address.BillingAddress.BillingAccountAddress,this.Address.ShippingAddress.ShippingAccountAddress2=this.Address.BillingAddress.BillingAccountAddress2,this.Address.ShippingAddress.ShippingCity=this.Address.BillingAddress.BillingCity,this.Address.ShippingAddress.ShippingZipCode=this.Address.BillingAddress.BillingZipCode,this.Address.ShippingAddress.ShippingState=this.Address.BillingAddress.BillingState,this.Address.ShippingAddress.ShippingCountry=this.Address.BillingAddress.BillingCountry,this.Address.ShippingAddress.ShippingAccountCity=this.Address.BillingAddress.BillingAccountCity,this.Address.ShippingAddress.ShippingCompanyName=this.Address.BillingAddress.BillingCompanyName)},CloneShippingAddress:function(t,e){"undefined"!=typeof e?("loadtax"!=e&&this.FillDropdown(e,t.target.value),"ShippingZipCode"!=e&&"ShippingCity"!=e&&"ShippingState"!=e&&"loadtax"!=e||this.CalculateTax()):p()("#chkCloneBillingAddress").prop("checked")?(this.Address.ShippingAddress.ShippingContactPerson=this.Address.BillingAddress.BillingContactPerson,this.Address.ShippingAddress.ShippingZipCodeList=this.Address.BillingAddress.BillingZipCodeList,this.Address.ShippingAddress.ShippingCityList=this.Address.BillingAddress.BillingCityList,this.Address.ShippingAddress.ShippingStateList=this.Address.BillingAddress.BillingStateList,this.Address.ShippingAddress.ShippingAccountAddress=this.Address.BillingAddress.BillingAccountAddress,this.Address.ShippingAddress.ShippingAccountAddress2=this.Address.BillingAddress.BillingAccountAddress2,this.Address.ShippingAddress.ShippingCity=this.Address.BillingAddress.BillingCity,this.Address.ShippingAddress.ShippingZipCode=this.Address.BillingAddress.BillingZipCode,this.Address.ShippingAddress.ShippingState=this.Address.BillingAddress.BillingState,this.Address.ShippingAddress.ShippingCountry=this.Address.BillingAddress.BillingCountry,this.Address.ShippingAddress.ShippingAccountCity=this.Address.BillingAddress.BillingAccountCity,this.Address.ShippingAddress.ShippingCompanyName=this.Address.BillingAddress.BillingCompanyName,this.Address.ShippingAddress.ShippingCompanyNameList=this.Address.BillingAddress.BillingCompanyNameList):(this.Address.ShippingAddress.ShippingContactPerson="",this.Address.ShippingAddress.ShippingAccountAddress="",this.Address.ShippingAddress.ShippingAccountAddress2="",this.Address.ShippingAddress.ShippingAccountCity="",this.Address.ShippingAddress.ShippingCity="",this.Address.ShippingAddress.ShippingZipCode="",this.Address.ShippingAddress.ShippingState="",this.Address.ShippingAddress.ShippingCountry="",this.Address.ShippingAddress.ShippingCompanyName="")},SelectPriceBook:function(t){this.selectedItemIndex=t,this.showPricebookModal=!0},CancelPriceBook:function(t){Array.isArray(t.ProductName)?t.ProductName[0].second_value>0&&(t.PriceBookId=0,t.ProductRate=t.ProductName[0].second_value,t.ProductDiscountType="percent",t.ProductDiscountValue=0):(t.ProductName.second_value>0||t.ProductName.first_value>0||t.ProductName.value>0)&&(t.PriceBookId=0,t.ProductRate=t.ProductName.second_value,t.ProductDiscountType="percent",t.ProductDiscountValue=0),this.CalculateAmount(t),this.totalSumlineItem(t)},CalculateAmount:function(t){t.ProductQuantity>0&&t.ProductRate>0&&(t.ProductAmount=parseFloat(t.ProductQuantity,10)*parseFloat(t.ProductRate,10),this.CalculateDiscount(t))},CheckQuantity:function(t,e){var s=this,i=0;null!=t.ProductName&&(i=Array.isArray(t.ProductName)?t.ProductName[0]:t.ProductName.value),e.target.value>0&&i>0&&(p()(e.target).addClass("loadinginner"),d["a"].CheckItemQuantity("itemId="+i).then((function(i){var a=i.data;p()(e.target).removeClass("loadinginner"),null!=a&&(t.ProductInStock=a.DATA),t.ProductInStock<e.target.value&&(t.ProductQuantity=t.ProductInStock),s.CalculateAmount(t),t.ProductInStock<=0&&(t.ProductQuantity=0)})))},CalculateDiscount:function(t){var e=p.a.grep(t.DiscountData,(function(e,s){return e.FROM_RANGE<=t.ProductQuantity&&e.TO_RANGE>=t.ProductQuantity}));null!=e&&e.length>0&&(t.ProductDiscountValue=parseFloat(e[0].DISCOUNT,10).toFixed2())},ShowDiscount:function(t){var e=this;setTimeout((function(){e.RadioButtonBootstrap()}),100),t.toggleDiscount=!t.toggleDiscount},CalculateTax:function(){var t=this.ProductSummary.SummaryData,e=this;p.a.each(t,p.a.proxy((function(t,s){e.ShowTaxItems(s)}),this))},ShowTaxItems:function(t){var e=this.Address.ShippingAddress.ShippingState,s=this.Address.ShippingAddress.ShippingCountry,i=this.Address.ShippingAddress.ShippingZipCode,a=this.Address.ShippingAddress.ShippingCity,n=0;if(null!=t.ProductName&&(n=Array.isArray(t.ProductName)?t.ProductName[0]:t.ProductName.value),n>0&&s>0){var r="state=".concat(e,"&zipcode=").concat(i,"&district=").concat(a,"&countryId=").concat(s,"&projectId=").concat(n);d["a"].GetTaxByProduct(r).then((function(e){var s=e.data;if(null!=s&&""!=s)return t.TaxData=[],t.TaxData=s.DATA,t.TaxData}))}},ShowTax:function(t){t.toggleTax=!t.toggleTax},AddMoreTax:function(t){var e={TAX_ID:0,TAX_FOR:"custom",TAX_TYPE:"percent",TAX_RATE:0,TAX_NAME:""};t.TaxData.push(e)},DeleteMoreTax:function(t,e){var s=this;s.confirmR(s.$t("ConfirmDeleteRecord"),!0,s.$t("Delete")+"  "+s.$t("Tax"),(function(){t.TaxData.splice(e,1),t.ProductTax="0.00"}))},FetchData:function(){var t=this;t.isLoading=!0;var e={BillingContactPerson:"",BillingCompanyName:0,BillingAccountAddress:"",BillingAccountAddress2:"",BillingAccountCity:"",BillingCity:"",BillingCityList:[],BillingZipCode:"",BillingZipCodeList:[],BillingState:"",BillingStateList:[],BillingCompanyNameList:[],BillingCountry:""},s={ShippingAccountName:"",ShippingCompanyName:"",ShippingContactPerson:"",ShippingAccountAddress:"",ShippingAccountAddress2:"",ShippingAccountCity:"",ShippingCity:"",ShippingCityList:[],ShippingZipCode:"",ShippingZipCodeList:[],ShippingState:"",ShippingStateList:[],ShippingCompanyNameList:[],ShippingCountry:""};t.Address={BillingAddress:e,ShippingAddress:s};var i=[{ProductName:"",ProductList:[],ProductDescription:"",ProductQuantity:0,ProductInStock:0,ProductRate:0,ProductTax:0,ProductAmount:0,ProductDiscount:0,ProductDiscountType:"percent",ProductDiscountValue:0,ProductItemTotal:0,PriceBookId:0,toggleDiscount:!1,toggleTax:!1,TaxData:[],DiscountData:[]}];t.ProductSummary={SubTotal:0,ShippingCharges:0,Adjustments:0,RoundOff:0,SummaryTotal:0,SummaryData:i};var a=t.reqFromId,n={},r={},o="id=".concat(t.$route.params.id,"&moduleName=CRM&subModuleCode=CRM_QUOTES&langCode=en");t.quoteID=String(t.quoteID),d["a"].getFormLayout(o).then((function(e){t.isLoading=!1;var s=1;if(t.LeadData=e.data.data,"0"==t.quoteID?t.IsInventory="no"!=e.data.INVENTORY_APPLICABLE[0].INVENTORY_APPLICABLE:t.IsInventory="no"!=e.data.INVENTORY_APPLICABLE,null!=t.LeadData&&t.LeadData.length>0){var i=t.LeadData[0].group_id;p.a.each(t.LeadData,p.a.proxy((function(e,a){if(i=a.group_id,"order_date"==a.name&&t.DependentDateObject(a,a.value,"fetchCall"),"date"==a.dt_code&&(a.value=""==a.value?null:a.value),"checkbox"==a.dt_code&&(a.select_value=a.value.split(",")),"quotation_type"==a.name&&(t.selectedQuotationType=a.value,"0"!=t.reqFromId&&(a.value=2,s=2,t.selectedQuotationType=a.value)),"order_number"==a.name&&(t.odnumber=a.value),"contact_id"==a.name&&"0"!=t.quoteID){var o=a.select_options.reduce((function(t,e){var s=t.filter((function(t){return e.name==t.name&&e.value==t.value}));return 0==s.length&&t.push(e),t}),[]);a.select_options=[],a.select_value=[],a.select_options=o,a.select_value=o}if("client_id"==a.name&&"Lookup"==a.picklist_options&&"show"==a.dependent_type&&(a.select_options=[]),"deal_id"==a.name&&"Lookup"==a.picklist_options&&"show"==a.dependent_type&&(a.select_options=[],"0"!=t.reqFromId&&2==s&&(a.dependent_show_type=1)),"deal_id"==a.name&&"0"!=t.quoteID&&(t.dealid=a.value),"account_id"==a.name&&"0"!=t.quoteID&&(t.accntid=a.value),"account_id"==a.name&&"0"==t.quoteID&&(n=a),"deal_id"==a.name&&"0"==t.quoteID&&(r=a),"order_date"!=a.name||""!=a.value&&null!=a.value||(a.value=new Date,t.DependentDateObject(a,a.value,"fetchCall")),"template_id"==a.name&&""==a.value&&(a.value=JSON.parse(a.select_options)[0].value),"0"!=t.quoteID){var d=p.a.grep(t.LeadData,(function(t,e){return"deal_id"==t.name||"client_id"==t.name}));"quotation_type"==a.name&&p.a.each(d,(function(t,e){e.dependent_show_type=0,1==a.value&&"client_id"==e.name?e.dependent_show_type=1:"deal_id"==e.name&&(2==a.value?e.dependent_show_type=1:e.dependent_show_type=0)}))}d=p.a.grep(t.GroupBy,(function(t,e){return t.group_id==i}));if(0==d.length){var l=p.a.grep(t.LeadData,(function(t,e){return t.group_id==i}));if(t.quoteID>0)p.a.each(l,(function(e,s){if("select"==s.dt_code)try{s.value=s.value.trim()}catch(i){console.log("value is null while trimming")}"custom"==s.dropdown_type&&"Lookup"==s.picklist_options&&s.select_options?(s.select_options=t.MakeNormalArray(s.select_options),s.select_value=s.select_options,s.select_options.length>0&&(s.value=s.select_options[0])):"decimal"==s.dt_code&&"YES"==s.form_field_visibility?s.value=parseFloat(s.value,10).toFixed2():"date"==s.dt_code?s.value=s.value:"status_id"==s.name&&(t.statusId=s.value)}));else{var c=l.findIndex((function(t){return"order_number"==t.name}));null!=c&&"undefined"!=typeof l[c]&&(l[c].value=t.$t("InvoiceNumberGenratesAutomatically",{0:t.$t("Quotation")}))}if(l.length>0){var u={group_id:i,group_name:l[0].group_name,group_display_name:l[0].group_display_name,Data:l};t.GroupBy.push(u)}}}),t))}if("0"!=t.quoteID){var o=e.data.addressData,l=p.a.grep(o,(function(t,e){return"B"==t.address_type})),c=null;l.length>0&&(c={BillingCompanyName:l[0].address_name,BillingContactPerson:l[0].contact_name,BillingAccountAddress:l[0].account_address,BillingAccountAddress2:l[0].account_address2,BillingAccountCity:l[0].city,BillingCity:l[0].county,BillingCityList:t.MakeNormalArray(l[0].county_list),BillingZipCode:l[0].zip_code,BillingZipCodeList:t.MakeNormalArray(l[0].zipcode_list),BillingState:l[0].state,BillingStateList:t.MakeNormalArray(l[0].state_list),BillingCompanyNameList:t.MakeNormalArray(l[0].address_list),BillingCountry:l[0].country},t.ShippingContactPerson=t.MakeNormalArray(l[0].contact_person_list));var u=p.a.grep(o,(function(t,e){return"S"==t.address_type})),m=null;u.length>0&&(m={ShippingCompanyName:u[0].address_name,ShippingContactPerson:u[0].contact_name,ShippingAccountAddress:u[0].account_address,ShippingAccountAddress2:u[0].account_address2,ShippingAccountCity:u[0].city,ShippingCity:u[0].county,ShippingCityList:t.MakeNormalArray(u[0].county_list),ShippingZipCode:u[0].zip_code,ShippingZipCodeList:t.MakeNormalArray(u[0].zipcode_list),ShippingState:u[0].state,ShippingStateList:t.MakeNormalArray(u[0].state_list),ShippingCompanyNameList:t.MakeNormalArray(u[0].address_list),ShippingCountry:u[0].country},t.ShippingContactPerson=t.MakeNormalArray(u[0].contact_person_list),t.Ischeckshipping=!0,p()("#chkshippingbox").attr("checked",!0),t.sameShippingAddressAsBilling=!0,""!=u[0].contact_name||""!=u[0].account_address||""!=u[0].account_address2||""!=u[0].city||""!=u[0].zip_code&&0!=u[0].zip_code||""!=u[0].state&&0!=u[0].state||""!=u[0].country&&null!=u[0].country||(t.Ischeckshipping=!1,p()("#chkshippingbox").attr("checked",!1))),t.Address={BillingAddress:c,ShippingAddress:m},t.checkForSameBillingAndShippingAddress();var A=[],g=e.data.productSummaryAmount,h=e.data.productSummary;t.IsInventory="no"!=h[0].INVENTORY_APPLICABLE,p.a.each(h,p.a.proxy((function(e,s){s.product_name=null==s.product_name?[]:s.product_name;var i=t.MakeNormalArray(s.product_name),a=i,n={ProductName:a[0],ProductList:a,ProductDescription:s.item_product_desc,ProductQuantity:s.item_product_Quantity,ProductInStock:parseInt(s.inventory_available_quantity),ProductRate:s.item_product_list_price,ProductTax:0,ProductAmount:s.item_product_amount,ProductDiscount:s.item_product_discount,ProductDiscountType:s.item_product_discount_type,ProductDiscountValue:s.item_product_discount_value,ProductItemTotal:s.item_total,PriceBookId:s.item_price_book_id,toggleDiscount:!1,toggleTax:!1,TaxData:null!=s.tax_data?t.MakeNormalArray(s.tax_data):[],DiscountData:[]};console.log(n),A.push(n)}),t)),t.ProductSummary={SubTotal:g[0].summary_sub_total,ShippingCharges:g[0].summary_shipping_charges,Adjustments:g[0].summary_adjustments,SummaryTotal:g[0].summary_total,SummaryData:A}}else if("0"!=p.a.trim(a)){var S="companyId=".concat(t.companyId,"&userId=").concat(t.userId,"&sourceid=").concat(a);d["a"].GetQuoteProductbyDeal(S).then((function(e){var s=[],i=[];i=""==e.data?[]:e.data.DATA;var a=""==e.data?null:e.data.hasOwnProperty("BillAddress")&&e.data.BillAddress.length>0?e.data.BillAddress[0]:null;if(0==i.length){var o=[];o.push(t.MakeNormalArray(e.data.AccountSelect[0])),n.select_options=o,n.select_value=n.select_options,n.value=e.data.AccountId?o.find((function(t){return t.value==e.data.AccountId[0]})):n.select_options[0],t.FillDropdown("ACCOUNT_CONTACTS",n.value.value),t.FillDropdown("ACCOUNT_DEALS",n.value.value),t.FillDropdown("ACCOUNT_CLIENTS",n.value.value),t.FillDropdown("ADDRESS_NAMES",n.value.value),t.FillDropdown("BillingState",a.account_country),r.select_options=e.data.DealSelect[0],r.select_value=r.select_options,r.value=String(e.data.DealId[0]),t.Address.BillingAddress.BillingAccountAddress=null==a?null:a.account_address,t.Address.BillingAddress.BillingAccountAddress2=null==a?null:a.account_address2,t.Address.BillingAddress.BillingAccountCity=null==a?null:a.account_city,t.Address.BillingAddress.BillingZipCode=null==a?null:a.account_zip_code,t.Address.BillingAddress.BillingCountry=null==a?null:a.account_country,t.Address.BillingAddress.BillingState=null==a?null:a.account_state,t.accntid=null==a?null:a.accid}else{o=[];o.push(t.MakeNormalArray(i[0].AccountSelect)),n.select_options=o,n.select_value=n.select_options,n.value=e.data.AccountId?o.find((function(t){return t.value==e.data.AccountId[0]})):n.select_options[0],t.FillDropdown("ACCOUNT_CONTACTS",n.value.value),t.FillDropdown("ACCOUNT_DEALS",n.value.value),t.FillDropdown("ACCOUNT_CLIENTS",n.value.value),t.FillDropdown("ADDRESS_NAMES",n.value.value),t.FillDropdown("BillingState",a.account_country),r.select_options=i[0].DealSelect,r.select_value=r.select_options,r.value=String(i[0].DealId),t.Address.BillingAddress.BillingAccountAddress=null==a?null:a.account_address,t.Address.BillingAddress.BillingAccountAddress2=null==a?null:a.account_address2,t.Address.BillingAddress.BillingAccountCity=null==a?null:a.account_city,t.Address.BillingAddress.BillingZipCode=null==a?null:a.account_zip_code,t.Address.BillingAddress.BillingCountry=null==a?null:a.account_country,t.Address.BillingAddress.BillingState=null==a?null:a.account_state,t.accntid=null==a?null:a.accid,t.IsInventory="no"!=i[0].INVENTORY_APPLICABLE,p.a.each(i,p.a.proxy((function(e,i){var a={ProductName:t.MakeNormalArray(i.product_name),ProductList:[],ProductDescription:i.item_product_desc,ProductQuantity:i.item_product_Quantity,ProductInStock:parseInt(i.inventory_available_quantity),ProductRate:i.item_product_list_price,ProductTax:0,ProductAmount:i.item_product_amount,ProductDiscount:i.item_product_discount,ProductDiscountType:i.item_product_discount_type,ProductDiscountValue:i.item_product_discount_value,ProductItemTotal:i.item_total,PriceBookId:i.item_price_book_id,toggleDiscount:!1,toggleTax:!1,TaxData:null!=i.tax_data?t.MakeNormalArray(i.tax_data):[],DiscountData:[]};s.push(a)}),t))}t.ProductSummary={SummaryData:s}}))}setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.RadioButtonBootstrap()}),500)}))},totalSumlineItem:function(t){var e=0;if(t.ProductAmount>0&&(e=parseFloat(t.ProductAmount,10)),e=parseFloat(e,10),"percent"==t.ProductDiscountType){var s=""!=p.a.trim(t.ProductDiscountValue)?p.a.trim(t.ProductDiscountValue):0;if(s>0){var i=parseFloat(e,10)*parseFloat(s,10)/100;t.ProductDiscount=parseFloat(i,10).toFixed2()}else t.ProductDiscount=0}else t.ProductDiscount=parseFloat(""!=p.a.trim(t.ProductDiscountValue)?p.a.trim(t.ProductDiscountValue):0,10).toFixed2();if(t.ProductDiscount>0&&(parseFloat(t.ProductDiscount,10),e=parseFloat(e,10)-parseFloat(t.ProductDiscount,10)),null!=t.TaxData&&t.TaxData.length>0){var a=0;p.a.each(t.TaxData,p.a.proxy((function(t,s){var i=parseFloat(s.TAX_RATE,10);if("percent"==s.TAX_TYPE){if(i>0){var n=parseFloat(e,10)*parseFloat(i,10)/100;a+=parseFloat(n,10)}}else a+=parseFloat(i,10)}),this)),a>0?(a=parseFloat(a,10),e=parseFloat(e,10)+parseFloat(a,10),t.ProductTax=a):t.ProductTax=0}var n=0;return e<0?(vm.ShowAlert("Total amount cannot be in minus.","warning",!0,Globalize.localize("Alert")),t.ProductItemTotal=0,t.ProductDiscountValue=0):(n=parseFloat(t.ProductAmount,10)+parseFloat(t.ProductTax,10)-parseFloat(t.ProductDiscount,10),t.ProductItemTotal=parseFloat(n,10).toFixed2()),n},SetPriceBook:function(t){var e=this.selectedItemIndex;this.ProductSummary.SummaryData[e].ProductRate=t.LIST_PRICE,this.ProductSummary.SummaryData[e].PriceBookId=t.PRICE_BOOK_ID,this.ProductSummary.SummaryData[e].DiscountData=this.MakeNormalArray(t.PRICE_BOOK_RANGE),this.ProductSummary.SummaryData[e].ProductDiscountType=2==t.PRICE_BOOK_MODEL?"percent":"flat",this.showPricebookModal=!1,this.CalculateAmount(this.ProductSummary.SummaryData[e])}},computed:{summaryTotal:function(){for(var t=0,e=this.ProductSummary.SummaryData,s=0;s<e.length;s++)e[s].ProductRate>0&&(t=parseFloat(t,10)+parseFloat(e[s].ProductItemTotal,10));return t=parseFloat(t,10).toFixed2(),this.ProductSummary.SubTotal=t,this.ProductSummary.ShippingCharges>0&&(t=parseFloat(t,10)+parseFloat(this.ProductSummary.ShippingCharges,10)),this.ProductSummary.Adjustments>0&&(t=parseFloat(t,10)-parseFloat(this.ProductSummary.Adjustments,10)),t=parseFloat(t,10).toFixed2(),this.ProductSummary.SummaryTotal=t,t}}},g=A,h=s("2877"),S=Object(h["a"])(g,i,a,!1,null,null,null);e["default"]=S.exports}}]);
//# sourceMappingURL=ManageQuotation.js.map