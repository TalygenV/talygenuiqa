(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMSMSCampaign"],{5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var i=a("ade3");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},"66ee":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CRM",SubModuleCode:"CRM_CAMPAIGN",RenderRowActionMethod:e.renderActions,IdentityColumn:"campaign_id",HeaderText:e.$t("SMSCampaign"),listType:["List"],ListData:e.CampaignData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.FetchData,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata}}),e.ShowmodalAddSMSCampaign?a("modalAddSMSCampaign",{on:{close:function(t){e.ShowmodalAddSMSCampaign=!1}}}):e._e()],1)},o=[],s=a("5530"),l=(a("d3b7"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header mheader-user"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closepopup}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ComposeSMS")))])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-sm-12 col-md-6 p-0 float-right bg-light p-4"},[a("div",{staticClass:"mobilebase mx-auto"},[e._m(0),a("div",{staticClass:"col-12 p-2 bg-light border",staticStyle:{"min-height":"350px"}},[a("div",{staticClass:"col-12",attrs:{id:"textcontent"}},[e._v("Dear "+e._s(e.msgcustomvalue)+" Please follow the given link "+e._s(e.msgtriggervalue)+" to access the website.")])])])]),a("dynamic-form",{attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-Send_Test",fn:function(t){var i=t.data;return[a("div",{staticClass:"col-12 float-left mt-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"w-100 d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.MobileNumber,expression:"MobileNumber"}],class:""!=i.error?"form-control w-70 mr-2 is-invalid":"form-control w-70 mr-2",attrs:{type:"text",placeholder:"Enter Mobile Number",autocomplete:"off"},domProps:{value:e.MobileNumber},on:{input:function(t){t.target.composing||(e.MobileNumber=t.target.value)}}})]),""!=i.error?a("span",{staticClass:"invalid-feedback d-block"},[e._v(e._s(i.error))]):e._e()])])]}}])})],1)])])],1)])}),n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 bg-light p-2 border"},[a("em",{staticClass:"fa fa-bars text-secondary"})])}],r=(a("7db0"),a("e9c4"),a("b0c0"),a("9769")),c={data:function(){return{CustomValue:[],TiggerData:[],modelcustomvalue:"",modeltriggervalue:"",msgcustomvalue:"",msgtriggervalue:"",MobileNumber:"",MobSMS:"Dear "+this.msgcustomvalue+" Please follow the given link "+this.msgtriggervalue+" to access the website.",FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("name"),name:"name",value:"",placeholder:"Enter Campaign Name",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("CustomValue"),name:"CustomValue",value:"",placeholder:"",config:{options:[],onChange:this.onSetvalue},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("TriggerLink"),name:"TriggerLink",value:"",placeholder:"",config:{options:[],onChange:this.onSetvalue},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"FileField",label:this.$t("FileControlText"),name:"ChooseFile",value:"",placeholder:"Select",config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],options:[],showAddIcon:!0},validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("MobileNumber"),name:"Send_Test",value:"",placeholder:"Enter Mobile Number",config:{options:[]},validationRules:{required:!0},visibility:!0}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onclick:this.onSubmit},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup,isVisible:!0},{type:"submit",class:"btn btn-success",text:"Send",onClick:this.SendSMS,isVisible:!0}]}},created:function(){var e=this;e.GetCustomFieldValue(),e.GetTriggerFieldValue()},methods:{closepopup:function(){var e=this;e.$parent.ClosemodalAddSMSCampaign()},GetCustomFieldValue:function(){var e=this,t="MODULE_NAME=CRM&SUB_MODULE_CODE=CRM_CAMPAIGNS,CRM_CONTACTS";r["a"].GetCustomFieldValue(t).then((function(t){e.CustomValue=t.data,e.CustomValue.forEach((function(t){e.FormSchema[1].Data[0].config.options.push({name:t.DISPLAY_NAME,value:t.CUSTOM_FIELD_ID})}))}))},GetTriggerFieldValue:function(){var e=this,t="TYPE=CRM_TRIGGER&MODULE_NAME=null";r["a"].GetTriggerFieldValue(t).then((function(t){e.TiggerData=t.data,e.TiggerData.forEach((function(t){e.FormSchema[1].Data[1].config.options.push({name:t.NAME,value:t.ID})}))}))},onSetvalue:function(){var e=this;if(""!=e.FormSchema[1].Data[0].value){var t=e.CustomValue.find((function(t){return t.CUSTOM_FIELD_ID===e.FormSchema[1].Data[0].value}));void 0!=t&&(e.msgcustomvalue=t.DISPLAY_NAME)}if(""!=e.FormSchema[1].Data[1].value){var a=e.TiggerData.find((function(t){return t.ID===e.FormSchema[1].Data[1].value}));void 0!=a&&(e.msgtriggervalue=a.NAME)}},SendSMS:function(){var e=this;e.MobSMS="Dear "+e.msgcustomvalue+" Please follow the given link "+e.msgtriggervalue+" to access the website.";var t={Send_sms:e.MobSMS,Send_to:e.MobileNumber},a=JSON.stringify(t);r["a"].SendTwilioSMS(a).then((function(e){}))},onSubmit:function(e,t){var a=this;a.MobSMS="Dear "+a.msgcustomvalue+" Please follow the given link "+a.msgtriggervalue+" to access the website.";var i={name:e.name,Choose_File:e.ChooseFile,MobSMS:a.MobSMS},o=JSON.stringify(i);r["a"].SaveAddSMSCampaign(o).then((function(e){}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,l,n,!1,null,null,null),f=m.exports,S=[{title:"Add Email Template",iconClass:"fa-plus",callbackfunction:"",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add SMS Campaign",iconClass:"fa-plus",callbackfunction:"modalAddSMSCampaign",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""}],p=[{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["STATUS_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Date",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:["DATE"],isSearch:!1,value:"",listOptions:[]}],g=[{title:"Edit",href:"javascript:void(0)",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"DeleteCampaign",additionalSpan:""}],h={buttons:S,listActions:g,leftsearchSchema:p},b={components:{modalAddSMSCampaign:f},data:function(){return{ShowmodalAddSMSCampaign:!1,isLoading:!1,CampaignData:[],listheaderbuttons:h.buttons,leftSearchFields:h.leftsearchSchema,listActions:h.listActions,TotalRecords:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,searchCondition:"",Headers:[{COLUMN_NAME:"name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"description",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2},{COLUMN_NAME:"type",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Type",DISPLAY_ORDER:3},{COLUMN_NAME:"attachment",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Attachment",DISPLAY_ORDER:4}]}},created:function(){this.CampaignData=[{rownumber:1,total_records:125,campaign_id:572,name:"Noise watch",description:"Dave Junior",type:"SMS",attachment:"2"}]},methods:{commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"modalAddSMSCampaign":this.modalAddSMSCampaign();break}},modalAddSMSCampaign:function(){this.ShowmodalAddSMSCampaign=!0},ClosemodalAddSMSCampaign:function(){this.ShowmodalAddSMSCampaign=!1},renderActions:function(e){var t=this,a=[];return t.listActions.forEach((function(e){var t=Object(s["a"])({},e);switch(t.title){case"Edit":t.isVisible=!0;break;case"Delete":t.isVisible=!0;break;default:t.isVisible=!0}a.push(t)})),a}}},v=b,C=Object(u["a"])(v,i,o,!1,null,null,null);t["default"]=C.exports},dbb4:function(e,t,a){var i=a("23e7"),o=a("83ab"),s=a("56ef"),l=a("fc6a"),n=a("06cf"),r=a("8418");i({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){var t,a,i=l(e),o=n.f,c=s(i),d={},u=0;while(c.length>u)a=o(i,t=c[u++]),void 0!==a&&r(d,t,a);return d}})},e439:function(e,t,a){var i=a("23e7"),o=a("d039"),s=a("fc6a"),l=a("06cf").f,n=a("83ab"),r=o((function(){l(1)})),c=!n||r;i({target:"Object",stat:!0,forced:c,sham:!n},{getOwnPropertyDescriptor:function(e,t){return l(s(e),t)}})}}]);
//# sourceMappingURL=CRMSMSCampaign.js.map