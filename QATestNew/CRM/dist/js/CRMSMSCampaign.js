(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMSMSCampaign"],{"15ec":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".ck-body-wrapper{z-index:99999}.text-end.text-right{text-align:left!important}.fileFieldAttachment .already-uploaded-file span i.cross{margin-left:21px}",""]),t.exports=e},4521:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CRM",SubModuleCode:"CRM_TRIGGER_LINK",RenderRowActionMethod:t.renderActions,IdentityColumn:"TRIGGER_ID",HeaderText:t.$t("Integration"),listType:["List"],ListData:t.IntegrationData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),t.ShowModalAddSMTP?a("modaladdsmtp",{on:{close:function(e){t.ShowModalAddSMTP=!1}}}):t._e(),t.ShowmodalManageAdditionalSMTP?a("modalManageAdditionalSMTP",{attrs:{reqFrom:t.reqFrom},on:{close:function(e){t.ShowmodalManageAdditionalSMTP=!1}}}):t._e()],1)},o=[],n=a("5530"),r=(a("d3b7"),a("159b"),[{title:"Add SMTP",iconClass:"fa-plus",callbackfunction:"OpenModalAddSMTP",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{title:"Add MailChimp",iconClass:"fa-plus",callbackfunction:"ManageMailChimp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{title:"Add SendGrid",iconClass:"fa-plus",callbackfunction:"ManageSendGrid",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0}]),s=[{fieldName:"Profile Name",fieldType:"text",fieldIcon:"fa fa-search",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]}],l=[{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"",additionalSpan:"",class:"round-icon-small btn-primary"},{title:"Edit",href:"javascript:void(0)",callbackfunction:"",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"Delete",additionalSpan:""}],c={buttons:r,listActions:l,leftsearchSchema:s},d=a("c511"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",[t._v(t._s(t.$t("AddNewSMTP")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Password",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],class:{"form-control w-100":!0,"is-invalid":""!=i.error.length},attrs:{type:"password",name:"Password"},domProps:{value:i.fieldInfo.value},on:{input:function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)}}}),""!=i.error.length?a("span",{staticClass:"invalid-feedback",attrs:{name:"Password"}},[t._v(t._s(i.error))]):t._e()])]}}])}),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))])])])],1)])])])},m=[],h=a("ade3"),p=(a("e9c4"),a("9769")),f={props:{reqFrom:{type:String,required:!0}},data:function(){return{FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("SenderName"),name:"SenderName",value:"",placeholder:"Select",config:{options:[{name:"Mail Chimp",value:"MailChimp"},{name:"Send Grid",value:"SendGrid"}],onChange:this.onChangeSendThrough},validationRules:{required:!0}},{astype:"TextField",label:this.$t("ProfileName"),name:"ProfileName",value:"",placeholder:"",validationRules:{required:!1}},{astype:"CheckBoxField",label:this.$t("EnableSSL"),name:"EnableSSL",value:"",placeholder:"",validationRules:{required:!1},config:{options:[{name:"",value:!0}]}},{astype:"CheckBoxField",label:this.$t("EnableTSL"),name:"EnableTSL",value:"",placeholder:"",validationRules:{required:!1},config:{options:[{name:"",value:!0}]}},{astype:"TextField",label:this.$t("Username"),name:"UserName",value:"",placeholder:"",validationRules:{required:!0},visibility:!0},{astype:"SlotField",label:this.$t("password"),name:"Password",value:"",placeholder:"",validationRules:{required:!1},visibility:!0},{astype:"SelectField",label:this.$t("AuthenticationType"),name:"AuthenticationType",value:"",placeholder:"Select",config:{options:[{name:"Login",value:"Login"}]},validationRules:{required:!0},visibility:!0},{astype:"TextField",label:this.$t("Domain"),name:"Domain",value:"",placeholder:"",validationRules:{required:!1},visibility:!0,config:{options:[]}},{astype:"TextField",label:this.$t("AuthenticationPassword"),name:"AuthenticationPassword",value:"",placeholder:"",validationRules:{required:!0},visibility:!0,config:{options:[]}},{astype:"TextField",label:this.$t("AuthenticationEmail"),name:"AuthenticationEmail",value:"",placeholder:"",validationRules:{required:!0},visibility:!0,config:{options:[]}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.close}]}},created:function(){var t=this;"MailChimp"==t.reqFrom?(t.FormSchema[0].Data[8].visibility=!1,t.FormSchema[0].Data[9].visibility=!1):"SendGrid"==t.reqFrom&&(t.FormSchema[0].Data[4].visibility=!1,t.FormSchema[0].Data[5].visibility=!1,t.FormSchema[0].Data[6].visibility=!1,t.FormSchema[0].Data[7].visibility=!1)},methods:{onSubmit:function(t,e){var a=this,i=Object(h["a"])({from_name:t.SenderName,smtp_server:t.ProfileName,smtp_security:t.EnableSSL,send_through:t.EnableTSL,user_name:t.UserName,password:t.Password,smtp_type:t.AuthenticationType,smtp_port:t.Domain,from_email:t.AuthenticationEmail},"password",t.AuthenticationPassword),o=JSON.stringify(i);p["a"].SaveEmailSetting(o).then((function(t){"INSERTED"==t.data?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("AddNewSMTP")]),"success",!0,a.$t("Alert")),a.$emit("close")):"UPDATED"==t.data?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("AddNewSMTP")]),"success",!0,a.$t("Alert")),a.$emit("close")):a.ShowAlert(a.$t("AddedError",[a.$t("AddNewSMTP")]),"danger",!0,a.$t("Alert"))}))},close:function(){var t=this;t.$emit("close")}}},g=f,S=a("2877"),b=Object(S["a"])(g,u,m,!1,null,null,null),C=b.exports,v={components:{modaladdsmtp:d["a"],modalManageAdditionalSMTP:C},data:function(){return{ShowmodalManageAdditionalSMTP:!1,reqFrom:"",isLoading:!1,ShowModalAddSMTP:!1,IntegrationData:[],listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,privilegeParams:null,TotalPages:0,CurrentPage:1,Headers:[{COLUMN_NAME:"",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sender Name",DISPLAY_ORDER:1},{COLUMN_NAME:"",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Profile Name",DISPLAY_ORDER:2}]}},created:function(){},methods:{OpenmodalManageAdditionalSMTP:function(t){this.reqFrom=t,this.ShowmodalManageAdditionalSMTP=!0},ClosemodalManageAdditionalSMTP:function(){this.reqFrom="",this.ShowmodalManageAdditionalSMTP=!1},OpenModalAddSMTP:function(){this.ShowModalAddSMTP=!0},CloseModalAddSMTP:function(){this.ShowModalAddSMTP=!1},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition=""},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"OpenModalAddSMTP":this.OpenModalAddSMTP();break;case"ManageMailChimp":this.OpenmodalManageAdditionalSMTP("MailChimp");break;case"ManageSendGrid":this.OpenmodalManageAdditionalSMTP("SendGrid");break;case"commonDeleteData":this.commonDeleteData();break}},actionButtonClick:function(t,e){var a=this;switch(t){case"OpenModalAddSMTP":a.OpenModalAddSMTP(e);break;case"Delete":a.commonDeleteData();break}},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(t){var e=Object(n["a"])({},t);switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)})),a},FetchData:function(){}}},A=v,T=Object(S["a"])(A,i,o,!1,null,null,null);e["default"]=T.exports},"66ee":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CRM",SubModuleCode:"CRM_SMS_TEMPLATE",RenderRowActionMethod:t.renderActions,IdentityColumn:"TEMPLATE_ID",HeaderText:t.$t("Template"),listType:["List"],ListData:t.TemplateData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),t.ShowmodalAddSMSCampaign?a("modalAddSMSCampaign",{attrs:{GetTemplateData:t.GetTemplateData,reqType:t.reqType},on:{FetchData:t.FetchData,close:function(e){t.ShowmodalAddSMSCampaign=!1}}}):t._e()],1)},o=[],n=a("5530"),r=a("c7eb"),s=a("1da1"),l=(a("d3b7"),a("159b"),a("99af"),a("498a"),a("25f0"),a("e9c4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[a("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header mheader-user"},[a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closepopup}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[t._v(t._s(t.$t("ComposeSMS")))])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5 mb-2"},[a("span",[t._v(t._s(t.$t("ComposeSMS")))])])]),a("modalManageSMSTemplate",{attrs:{GetTemplateData:t.GetTemplateData}})],1)])])])])}),c=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-sm-12 col-md-6 p-0 float-right bg-light p-4"},[a("div",{staticClass:"mobilebase mx-auto"},[t._m(0),a("div",{staticClass:"col-12 p-2 bg-light border",staticStyle:{"min-height":"350px"}},[a("div",{staticClass:"col-12",attrs:{id:"textcontent"}},[a("span",{domProps:{innerHTML:t._s(t.editorData)}})])])]),a("div",{staticClass:"col-12 float-left mt-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"w-100 d-flex"},[a("dynamic-form",{ref:"AddTestForm",attrs:{lang:"en",buttons:t.Testbuttons,schema:t.TestFormSchema},on:{OnSubmit:t.onTestSubmit}})],1)])])]),a("dynamic-form",{ref:"AddForm",attrs:{buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Content",fn:function(e){var i=e.data;return[a("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:t.editorData,callback:function(e){t.editorData=e},expression:"editorData"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Content"}},[t._v(t._s(i.error))])]}}])})],1)],1)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 bg-light p-2 border"},[a("em",{staticClass:"fa fa-bars text-secondary"})])}],m=a("53ca"),h=(a("b0c0"),a("ac1f"),a("5319"),a("caad"),a("2532"),a("313d"),a("0eb6"),a("b7ef"),a("8bd4"),a("9769")),p={props:{GetTemplateData:{type:Object},item:{type:String}},data:function(){return{blobPath:"https://cogniterblob.blob.core.windows.net/",AttachData:[],attachments:[],CustomValue:[],FileName:null,ProfileId:0,SendThrough:"",TwilioAccountSid:"",TwilioAuthToken:"",TwilioPhoneNumber:"",IntegrationData:null,TiggerData:[],MobileNumber:"",CompanyId:null,TEMPLATE_ID:0,ContainerName:null,UserId:null,ModuleName:"CRM",SubModuleCode:"CRM_SMS_TEMPLATE",fileData:[],editor:this.CLASSIC_EDITOR,editorData:"",Content:"",isLoading:!1,imagePath:"",privilegeParams:null,FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("name"),name:"template_name",value:"",placeholder:"",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("CustomValue"),name:"CustomValue",value:"",placeholder:"",config:{options:[],onChange:this.onChangeCustomValueTrigger},validationRules:{required:!1}},{astype:"SelectField",label:this.$t("TriggerLink"),name:"TiggerData",value:"",placeholder:"",config:{options:[],onChange:this.onChangeCustomTrigger},validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Content",value:"",placeholder:"",validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"FileField",label:this.$t("FileControlText"),name:"attachments",value:"",placeholder:"Select",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],showSelectedFiles:[],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,options:[],multiple:!0},validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onclick:this.onSubmit},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup}],TestFormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Mobilenumber"),name:"MobileNumber",value:"",placeholder:"Enter Mobile Number",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("SendThrough"),name:"SendThrough",value:"",placeholder:"Select",config:{options:[{name:"Twilio",value:"Twilio"},{name:"Ring Central",value:"RingCentral"}],onChange:this.onChangeSendThrough},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SendProfile"),name:"SendProfile",value:"",placeholder:"Select",config:{options:[],onChange:this.onChangeProfile},validationRules:{required:!0}}]}],Testbuttons:[{type:"Send Test",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Send Test"}]}},created:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.privilegeParams="controller=CRM&action=",a.CompanyId=a.GetUserInfo.CompanyId,a.ContainerName=a.GetUserInfo.ContainerName,a.UserId=a.GetUserInfo.ID,e.next=7,a.GetCustomFieldValue();case 7:return e.next=9,a.GetTriggerFieldValue();case 9:"undefined"!=typeof a.GetTemplateData.TEMPLATE_ID&&a.EditSmsTemplate(),a.$refs.AddForm.UpdateKeyValue();case 11:case"end":return e.stop()}}),e)})))()},methods:{onDeleteSelectedFiles:function(t){this.$delete(this.FormSchema[3].Data[0].config,"showSelectedFiles")},onReady:function(t){this.editor=t,t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},EditSmsTemplate:function(){var t=this;t.TEMPLATE_ID=t.GetTemplateData.TEMPLATE_ID,t.FormSchema[0].Data[0].value=t.GetTemplateData.TEMPLATE_NAME,t.FormSchema[2].Data[0].value=t.GetTemplateData.TEMPLATE_CONTENT,t.FormSchema[3].Data[0].value=t.GetTemplateData.ATTACHMENT_COUNT,t.editorData=t.GetTemplateData.TEMPLATE_CONTENT;var e=JSON.parse("["+t.GetTemplateData.ATTACHMENTS_JSON+"]");e.forEach((function(a,i){t.FormSchema[3].Data[0].config.showSelectedFiles.push({attachmentId:"".concat(i),attachmentName:"".concat(a.attachement_name,".").concat(JSON.parse(e[0].attachement_MIME).Extension),attachmentPath:t.blobPath+"/"+t.containerName+"/"+a.THUMB_NAIL_PATH}),t.attachments.push({value:t.blobPath+"/"+t.containerName+"/"+a.THUMB_NAIL_PATH})}))},onChangeSendThrough:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e,i.ProfileId=0,"object"==Object(m["a"])(t)?i.SendThrough=t.target.value:i.SendThrough=t,i.TestFormSchema[1].Data[1].value="",a.next=6,i.FillProfileDropdown(i.SendThrough);case 6:i.$refs.AddTestForm.UpdateKeyValue();case 7:case"end":return a.stop()}}),a)})))()},onChangeProfile:function(t){var e=this;e.ProfileId=t.target.value,e.GetSMTPProfile(e.ProfileId),e.$refs.AddTestForm.UpdateKeyValue()},FillProfileDropdown:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function a(){var i,o;return Object(r["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e,i.TestFormSchema[1].Data[1].config.options=[],o="id=&moduleName=CRM&type=".concat(t),a.next=5,h["a"].getDDLData(o+"&search=").then((function(t){if(void 0!=t.data.DATA){var e=t.data.DATA;e.forEach((function(t){i.TestFormSchema[1].Data[1].config.options.push({name:t.name,value:t.value})}))}}));case 5:i.$refs.AddTestForm.UpdateKeyValue();case 6:case"end":return a.stop()}}),a)})))()},closepopup:function(){var t=this;t.$parent.$parent.ClosemodalAddSMSCampaign()},GetCustomFieldValue:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,i="MODULE_NAME=CRM&SUB_MODULE_CODE=CRM_CAMPAIGNS,CRM_CONTACTS",e.next=4,h["a"].GetCustomFieldValue(i).then((function(t){a.CustomValue=t.data,a.CustomValue.forEach((function(t){a.FormSchema[1].Data[0].config.options.push({name:t.DISPLAY_NAME,value:t.DISPLAY_NAME})}))}));case 4:case"end":return e.stop()}}),e)})))()},GetTriggerFieldValue:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,i="TYPE=CRM_TRIGGER&MODULE_NAME=null",e.next=4,h["a"].GetTriggerFieldValue(i).then((function(t){a.TiggerData=t.data,a.TiggerData.forEach((function(t){a.FormSchema[1].Data[1].config.options.push({name:t.NAME,value:t.LINK})}))}));case 4:case"end":return e.stop()}}),e)})))()},onChangeCustomTrigger:function(t){var e=this,a="";e.editor&&(e.TiggerData.forEach((function(e,i){""!=t.target.value&&t.target.value==e.LINK&&(a=t.target.value+"?_id="+e.ID)})),e.editor.model.change((function(t){var i=e.editor.model.document.selection.getFirstPosition();t.insertText(a,i)})))},onChangeCustomValueTrigger:function(t){var e=this,a="";e.editor&&(e.CustomValue.forEach((function(e,i){""!=t.target.value&&t.target.value==e.DISPLAY_NAME&&(a="@"+t.target.value+"@")})),e.editor.model.change((function(t){var i=e.editor.model.document.selection.getFirstPosition();t.insertText(a,i)})))},onTestSubmit:function(t,e){var a=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=a,h["a"].CheckPrivilege(i.privilegeParams+"SendTestSMS").then(function(){var e=Object(s["a"])(Object(r["a"])().mark((function e(a){var o,n,s,l,c,d,u;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.data){e.next=23;break}if(i.isLoading=!0,o=JSON.stringify(i.fileData),!(i.fileData.length>0)){e.next=6;break}return e.next=6,h["a"].UploadFile(o).then((function(t){if(""!=t.data){var e=t.data;e.forEach((function(t,e){0==e?i.imagePath=t.Name:i.imagePath+=","+t.Name}))}}));case 6:if(n=i.removeHTMLTags(i.editorData),s=n.replace(/&nbsp;/g,"").replace(/\s+/g," "),"twilio"!=t.SendThrough.toLowerCase()){e.next=15;break}return l={Send_sms:s,Send_to:t.MobileNumber,image_path:i.imagePath,TwilioAccountSid:i.TwilioAccountSid,TwilioAuthToken:i.TwilioAuthToken,TwilioPhoneNumber:i.TwilioPhoneNumber},c=JSON.stringify(l),e.next=13,h["a"].SendTwilioSMS(c).then((function(t){"queued"!=t.data||"OK"!=t.statusText&&200!=t.status?""!=t.data||"OK"!=t.statusText&&200!=t.status?i.ShowAlert(i.$t("SendSMSError",[i.$t("Message")]),"failure",!0,i.$t("Alert")):i.ShowAlert(i.$t([i.$t("InvalidNumber")]),"warning",!0,i.$t("Alert")):i.ShowAlert(i.$t([i.$t("MessageSend")]),"success",!0,i.$t("Alert"))}));case 13:e.next=20;break;case 15:if("ringcentral"!=t.SendThrough.toLowerCase()){e.next=20;break}return d={ClientId:"a3WZFNEyE5kdo5jIkI8ejg",ClientSecret:"dX3BUFT4ZJ0bV929fvxHHIcngibAC93Vde2QvG98w1cj",RingCentralUsername:"+15188315278",RingCentralExtension:"101",RingCentralPassword:"S#2@8out",RingCentralPhoneNumber:"+15188315278",SendTo:t.MobileNumber,Message:i.editorData},u=JSON.stringify(d),e.next=20,h["a"].SendRingCentralSMS(u).then((function(t){}));case 20:i.isLoading=!1,e.next=24;break;case 23:i.ShowAlert(i.$t("NotAuthorizedSection"),"warning",!0,"Alert");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},GetSMTPProfile:function(t){var e=this;return Object(s["a"])(Object(r["a"])().mark((function t(){var a,i;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,i="profileId=".concat(a.ProfileId),a.TwilioAccountSid="",a.TwilioAuthToken="",a.TwilioPhoneNumber="",t.next=7,h["a"].GetEmailProfile(i).then((function(t){""!=t.data&&(a.IntegrationData=t.data[0],a.TwilioAccountSid=a.IntegrationData.key,a.TwilioAuthToken=a.IntegrationData.SecretKey,a.TwilioPhoneNumber=a.IntegrationData.from_email)}));case 7:case"end":return t.stop()}}),t)})))()},onSubmit:function(t,e){var a=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var i,o,n,l;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a,i.isLoading=!0,o=i.editorData,o.includes("<p>")?i.editorData=o.replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/&nbsp;/g,"").replace(/\s+/g," "):i.editorData=i.editorData,n={template_id:i.TEMPLATE_ID,template_name:t.template_name,template_content:i.editorData},l=JSON.stringify(n),e.next=8,h["a"].ManageSMSCampaign(l).then(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e){var a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.isLoading=!1,"INSERT"!=e.data.MSG){t.next=14;break}if(!(e.data.MAIN_ID>0)){t.next=8;break}if(!(e.data.MAIN_ID>0)){t.next=8;break}return i.fileData.length>0&&i.fileData.forEach((function(t){t.id=e.data.MAIN_ID})),a=JSON.stringify(i.fileData),t.next=8,h["a"].UploadFile(a).then((function(t){}));case 8:return i.ShowAlert(i.$t("AddedSuccess",[i.$t("Campaign")]),"Success",!0,i.$t("Alert")),t.next=11,i.$parent.$parent.FetchData();case 11:i.closepopup(),t.next=28;break;case 14:if("UPDATE"!=e.data.MSG){t.next=27;break}if(!(e.data.MAIN_ID>0)){t.next=25;break}if(!(e.data.MAIN_ID>0)){t.next=21;break}return i.fileData.length>0&&i.fileData.forEach((function(t){t.id=e.data.MAIN_ID})),a=JSON.stringify(i.fileData),t.next=21,h["a"].UploadFile(a).then((function(t){}));case 21:return i.ShowAlert(i.$t("UpdatedSuccess",[i.$t("Campaign")]),"Success",!0,i.$t("Alert")),t.next=24,i.$parent.$parent.FetchData();case 24:i.closepopup();case 25:t.next=28;break;case 27:"ALREADY_EXISTS"==e.data.MSG?i.ShowAlert(i.$t("AlreadyExists",[i.$t("Campaign")]),"warning",!0,i.$t("Alert")):i.ShowAlert(i.$t("AddedError",[i.$t("Campaign")]),"failure",!0,i.$t("Alert"));case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})))()},GetBase64String:function(t){try{var e=this;e.fileData=[];for(var a=t.target.files,i=0;i<a.length;i++){var o=a[i],n=new FileReader;n.onload=function(t){return function(a){var i=a.target.result,o=window.btoa(i),n=t.name;e.fileName=n;var r=n.lastIndexOf("."),s=n.substring(r+1,n.length);e.fileExt+="."+s;var l='{"ContentType":"'+t.type+'","Size":"'+t.size+'","Extension":"'+s+'"}',c=t.size;e.fileSize=c;var d={attachement_mime:l,fileName:t.name,base64String:o,fileSize:t.size,contentType:t.type,moduleName:"CRM",subModuleCode:"CRM_SMS_TEMPLATE",containerName:e.ContainerName,companyId:e.CompanyId,userId:e.UserId};e.fileData.push(d)}}(o),n.readAsBinaryString(o)}}catch(r){console.error(r)}},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},removeHTMLTags:function(t){return t.replace(/<[^>]*>/g,"")}}},f=p,g=(a("a69e"),a("2877")),S=Object(g["a"])(f,d,u,!1,null,null,null),b=S.exports,C={components:{modalManageSMSTemplate:b},props:{GetTemplateData:{type:Object}},methods:{closepopup:function(){var t=this;t.$parent.ClosemodalAddSMSCampaign()}}},v=C,A=Object(g["a"])(v,l,c,!1,null,null,null),T=A.exports,D=[{title:"Add SMS Template",iconClass:"fa-plus",callbackfunction:"modalAddSMSCampaign",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0}],P=[{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["STATUS_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Date",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:["DATE"],isSearch:!1,value:"",listOptions:[]}],_=[{title:"View",href:"javascript:void(0)",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"javascript:void(0)",callbackfunction:"modalAddSMSCampaign",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"Delete",additionalSpan:""}],M={buttons:D,listActions:_,leftsearchSchema:P},E={components:{modalAddSMSCampaign:T},data:function(){return{ShowmodalAddSMSCampaign:!1,isLoading:!1,TemplateData:[],listheaderbuttons:M.buttons,leftSearchFields:M.leftsearchSchema,listActions:M.listActions,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,template_name:"",privilegeParams:null,TotalPages:0,CurrentPage:1,GetTemplateData:{},searchCondition:"",Headers:[{COLUMN_NAME:"TEMPLATE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"TEMPLATE_CONTENT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2},{COLUMN_NAME:"TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Type",DISPLAY_ORDER:3},{COLUMN_NAME:"ATTACHMENT_COUNT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Attachment",DISPLAY_ORDER:4}]}},created:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.FetchData();case 3:t.privilegeParams="controller=CRM&action=";case 4:case"end":return e.stop()}}),e)})))()},methods:{pagerMethod:function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,t.next=4,this.FetchData();case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},commonHeaderButtonClick:function(t){var e=this;switch(t.callbackfunction){case"modalAddSMSCampaign":h["a"].CheckPrivilege(e.privilegeParams+"AddSMSTemplate").then((function(t){t.data?e.modalAddSMSCampaign(0):e.ShowAlert(e.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"commonDeleteData":this.commonDeleteData();break}},actionButtonClick:function(t,e,a){var i=this;switch(t){case"modalAddSMSCampaign":h["a"].CheckPrivilege(i.privilegeParams+"EditSMSTemplate").then((function(t){t.data?i.modalAddSMSCampaign(e):i.ShowAlert(i.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"Delete":i.commonDeleteData(e.TEMPLATE_ID);break}},modalAddSMSCampaign:function(t){t.TEMPLATE_ID>0?(this.reqType="Update",this.GetTemplateData=t):this.GetTemplateData={},this.ShowmodalAddSMSCampaign=!0},ClosemodalAddSMSCampaign:function(){this.ShowmodalAddSMSCampaign=!1},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(t){var e=Object(n["a"])({},t);switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)})),a},FetchData:function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,e.isLoading=!0,a="templateName=".concat(e.template_name,"&sortBy=").concat(e.SortBy,"&sortExp=").concat(e.SortExp,"&pageSize=").concat(e.PageSize,"&pageNumber=").concat(e.PageNumber,"&searchQuery=").concat(e.searchCondition.trim()),t.next=5,h["a"].SMSTemplateListing(a).then((function(t){e.isLoading=!1,"undefined"!=typeof t.data.data&&null!=t.data.data?(e.TemplateData=t.data.data,e.TotalRecord=t.data.data[0].Total,e.TotalPages=Math.ceil(e.TotalRecord/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.TemplateData=[],e.TotalRecord=0)}));case 5:setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500),e.isLoading=!1;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),commonDeleteData:function(t){var e=this;h["a"].CheckPrivilege(e.privilegeParams+"DeleteSMSTemplate").then((function(a){if(a.data){var i="";"undefined"!=typeof t?i=t.toString():$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Campaign"),(function(){var t={ids:i,moduleName:"CRM",subModuleCode:"CRM_SMS_TEMPLATE"},a=JSON.stringify(t);h["a"].CommonDeleteData(a).then((function(t){var a="";200==t.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=e.ShowAlert(e.$t("DeletedSuccessfully",[e.$t("Campaign")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("Campaign")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"warning",!0,e.$t("Alert"))}else e.ShowAlert("You are not authorized","failure",!0,"Alert")}))}}},w=E,k=Object(g["a"])(w,i,o,!1,null,null,null);e["default"]=k.exports},"7b9a":function(t,e,a){var i=a("c8eb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("4eef0db8",i,!0,{sourceMap:!1,shadowMode:!1})},"809d":function(t,e,a){"use strict";a("7b9a")},a435:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CRM",SubModuleCode:"CRM_SMS_TRIGGER",RenderRowActionMethod:t.renderActions,IdentityColumn:"TRIGGER_ID",HeaderText:t.$t("TriggerLink"),listType:["List"],ListData:t.TriggerData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),t.ShowmodalManageTriggerLink?a("modalManageTriggerLink",{attrs:{Data:t.TriggerLinkData},on:{close:function(e){t.ShowmodalManageTriggerLink=!1}}}):t._e(),t.ShowmodalTriggerLinkStatistics?a("modalTriggerLinkStatistics",{on:{close:function(e){t.ShowmodalTriggerLinkStatistics=!1}}}):t._e()],1)},o=[],n=a("5530"),r=(a("d3b7"),a("159b"),a("99af"),a("25f0"),a("e9c4"),[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Link",iconClass:"fa-plus",callbackfunction:"modalManageTriggerLink",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0}]),s=[{fieldName:"Name",fieldType:"text",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TRIGGER_TITLE"],isSearch:!1,value:"",listOptions:[]}],l=[{title:"Statistics",href:"javascript:void(0)",callbackfunction:"modalTriggerLinkStatistics",icon:"fa fa-bar-chart text-success action-icon",additionalSpan:""},{title:"Edit",href:"javascript:void(0)",callbackfunction:"modalManageTriggerLink",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"Delete",additionalSpan:""}],c={buttons:r,listActions:l,leftsearchSchema:s},d=a("9769"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",[t._v(t._s(t.$t("AddTriggerLink")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))])])])],1)])])])},m=[],h=a("c7eb"),p=a("1da1"),f={props:{Data:{type:Object}},data:function(){return{FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("name"),name:"TriggerTitle",value:"",placeholder:this.$t("name"),validationRules:{required:!0}},{astype:"TextField",label:this.$t("LinkURL"),name:"TriggerLink",value:"",placeholder:this.$t("LinkURL"),validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.closepopup}],TriggerId:0}},created:function(){var t=this;"undefined"!=typeof t.Data&&(t.TriggerId=t.Data.TRIGGER_ID,t.FormSchema[0].Data[0].value=t.Data.TRIGGER_TITLE,t.FormSchema[0].Data[1].value=t.Data.TRIGGER_LINK)},methods:{onSubmit:function(t){var e=this;return Object(p["a"])(Object(h["a"])().mark((function a(){var i,o,n,r,s;return Object(h["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e,o="",n=t.TriggerLink,a.next=5,d["a"].ConvertFullURLtoTinyURL("URL=".concat(n)).then((function(t){""!=t.data&&(o=t.data)}));case 5:return r={trigger_id:i.TriggerId,trigger_title:t.TriggerTitle,trigger_link:t.TriggerLink,status_id:1001,tiny_url:o},s=JSON.stringify(r),a.next=9,d["a"].SaveTriggerLink(s).then((function(t){"INSERT"==t.data?(i.ShowAlert(i.$t("AddedSuccess",[i.$t("TriggerLink")]),"Success",!0,i.$t("Alert")),i.$parent.FetchData(),i.closepopup()):"UPDATE"==t.data?(i.ShowAlert(i.$t("UpdatedSuccess",[i.$t("TriggerLink")]),"Success",!0,i.$t("Alert")),i.$parent.FetchData(),i.closepopup()):"DUPLICATE"==t.data?i.ShowAlert(i.$t("AlreadyExists",[i.$t("TriggerLink")]),"warning",!0,i.$t("Alert")):i.ShowAlert(i.$t("AddedError",[i.$t("TriggerLink")]),"failure",!0,i.$t("Alert"))}));case 9:case"end":return a.stop()}}),a)})))()},closepopup:function(){var t=this;t.$parent.ClosemodalManageTriggerLink()}}},g=f,S=a("2877"),b=Object(S["a"])(g,u,m,!1,null,null,null),C=b.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",[t._v(t._s(t.$t("TriggerLink")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),a("div",{staticClass:"pl-0 border-1"},[a("v-date-picker",{staticClass:"timedate input-group col-md-3 float-right",attrs:{"is-range":""},on:{input:t.onDateChange},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.inputValue,o=e.inputEvents,n=e.togglePopover;return[a("input",t._g({staticClass:"form-control",domProps:{value:i.start+" - "+i.end}},o)),a("div",{staticClass:"input-group-append",on:{click:n}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:t.startEndDate,callback:function(e){t.startEndDate=e},expression:"startEndDate"}})],1),a("div",{staticClass:"col-md-12 float-left p-4 text-center"},[a("div",{attrs:{id:"chart"}},[t.ischartvisibility?a("apexcharts",{attrs:{height:"350",type:"bar",options:t.chartOptions,series:t.series}}):t._e()],1)]),a("div",{staticClass:"col-md-12 float-left p-0 mt-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"d-inline-block"},[a("span",[t._v(t._s(t.$t("TriggerLink")))])])])]),a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!1,ModuleName:"CRM",SubModuleCode:"",RenderRowActionMethod:t.renderActions,IdentityColumn:"",HeaderText:t.$t("TriggerLink"),listType:["List"],ListData:t.StatisticsData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}})],1)])])])},A=[],T=a("1321"),D=a.n(T),P={components:{apexcharts:D.a},data:function(){return{startEndDate:{start:new Date,end:new Date},chartOptions:{chart:{id:"basic-bar"},xaxis:{categories:[]}},series:[{name:"series-1",data:[]}],listheaderbuttons:"",leftSearchFields:"",leftCommonSearch:"",listActions:[],TotalRecord:0,StatisticsData:[],SortExp:"",SortBy:"",PageNumber:1,PageSize:10,TotalPages:0,CurrentPage:1,FormSchema:"",ischartvisibility:!1,isLoading:!1,triggerTitle:"",datefrom:new Date,dateto:new Date,Headers:[{COLUMN_NAME:"TRIGGER_TITLE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"CLICK_DATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:2},{COLUMN_NAME:"TOTAL_CLICKS",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Clicks",DISPLAY_ORDER:3}]}},created:function(){var t=this;t.FetchData()},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},commonHeaderButtonClick:function(){},actionButtonClick:function(){},renderActions:function(){},FetchData:function(){var t=this;t.isLoading=!0,t.ischartvisibility=!1;var e="triggerTitle=&datefrom=".concat(t.$options.filters.formatDate(t.datefrom),"&dateto=").concat(t.$options.filters.formatDate(t.dateto));d["a"].GetTriggerLinkStatistics(e).then((function(e){t.StatisticsData=[],""!=e.data&&(t.StatisticsData=e.data,t.StatisticsData.forEach((function(e){t.chartOptions.xaxis.categories.push(e.CLICK_DATE),t.series[0].data.push(e.TOTAL_CLICKS)})),t.ischartvisibility=!0),t.isLoading=!1}))},onDateChange:function(){var t=this;t.datefrom=t.startEndDate.start,t.dateto=t.startEndDate.end,t.FetchData()}}},_=P,M=(a("edd5"),Object(S["a"])(_,v,A,!1,null,null,null)),E=M.exports,w={components:{modalManageTriggerLink:C,modalTriggerLinkStatistics:E},data:function(){return{ShowmodalManageTriggerLink:!1,ShowmodalTriggerLinkStatistics:!1,isLoading:!1,TriggerData:[],listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,privilegeParams:null,TotalPages:0,CurrentPage:1,TriggerLinkData:null,Headers:[{COLUMN_NAME:"TRIGGER_TITLE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"TRIGGER_LINK",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Link URL",DISPLAY_ORDER:2}]}},created:function(){this.FetchData(),this.privilegeParams="controller=CRM&action="},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},commonHeaderButtonClick:function(t){var e=this;switch(t.callbackfunction){case"modalManageTriggerLink":d["a"].CheckPrivilege(e.privilegeParams+"AddTriggerLink").then((function(t){t.data?e.modalManageTriggerLink():e.ShowAlert(e.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"commonDeleteData":this.commonDeleteData();break;case"setTourGuideSteps":this.setTourGuideSteps();break}},actionButtonClick:function(t,e){var a=this;switch(t){case"modalManageTriggerLink":d["a"].CheckPrivilege(a.privilegeParams+"EditTriggerLink").then((function(t){t.data?a.modalManageTriggerLink(e):a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"Delete":a.commonDeleteData(e.TRIGGER_ID);break;case"modalTriggerLinkStatistics":d["a"].CheckPrivilege(a.privilegeParams+"TriggerStatistics").then((function(t){t.data?a.modalTriggerLinkStatistics():a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break}},modalTriggerLinkStatistics:function(){this.ShowmodalTriggerLinkStatistics=!0},ClosemodalTriggerLinkStatistics:function(){this.ShowmodalTriggerLinkStatistics=!1},modalManageTriggerLink:function(t){this.TriggerLinkData=t,this.ShowmodalManageTriggerLink=!0},ClosemodalManageTriggerLink:function(){this.ShowmodalManageTriggerLink=!1},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(t){var e=Object(n["a"])({},t);switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)})),a},FetchData:function(){var t=this;t.isLoading=!0;var e="triggerlink=".concat(t.trigger_title,"&sortBy=").concat(t.SortBy,"&sortExp=").concat(t.SortExp,"&pageSize=").concat(t.PageSize,"&pageNumber=").concat(t.PageNumber);d["a"].GetTriggerLinkListing(e).then((function(e){t.TriggerData=[],""!=e.data&&(t.TriggerData=e.data.data,t.TotalRecord=e.data.data[0].Total,t.TotalPages=Math.ceil(t.TotalRecord/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1)})),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500),t.isLoading=!1},commonDeleteData:function(t){var e=this;d["a"].CheckPrivilege(e.privilegeParams+"DeleteTriggerLink").then((function(a){if(a.data){var i="";"undefined"!=typeof t?i=t.toString():$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){i.length>0&&(i+=","),i+=$(this).val()})),i.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Campaign"),(function(){var t={ids:i,moduleName:"CRM",refCode:"CRM_SMS_TRIGGER"},a=JSON.stringify(t);d["a"].CommonDeleteData(a).then((function(t){var a="";200==t.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=e.ShowAlert(e.$t("DeletedSuccessfully",[e.$t("Campaign")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("Campaign")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"warning",!0,e.$t("Alert"))}else e.ShowAlert("You are not authorized","failure",!0,"Alert")}))}}},k=w,x=Object(S["a"])(k,i,o,!1,null,null,null);e["default"]=x.exports},a69e:function(t,e,a){"use strict";a("c606")},a967:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"span.timedate.input-group{z-index:999}",""]),t.exports=e},b187:function(t,e,a){var i=a("a967");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("63c3ee68",i,!0,{sourceMap:!1,shadowMode:!1})},c606:function(t,e,a){var i=a("15ec");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("6e9cc91a",i,!0,{sourceMap:!1,shadowMode:!1})},c8eb:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".my-popups .customModal .modal-dialog{max-width:600px}.customModal .fsmtabcontrolMobileView{overflow-y:scroll;height:477px}.customModal .nav-tabs .nav-item a{border-bottom:3px solid transparent;border-left:none;border-right:none;border-top:none;padding:6px 11px}.customModal .nav-tabs .nav-item a.active{border-bottom:3px solid #000}",""]),t.exports=e},d9d5:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CRM",SubModuleCode:"CRM_APPROVAL",RenderRowActionMethod:t.renderActions,IdentityColumn:"id",HeaderText:t.$t("CampaignApproval"),listType:["List"],ListData:t.ApprovalData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,LegendArray:t.LegendArray,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["status_id"==i.column.COLUMN_NAME?[a("a",{staticClass:"inactive-disabled"},[a("span",{class:t.getStatusClassList(i.row.status_name,"status_id")},[t._v(" "+t._s(i.row.status_name)+" ")])])]:t._e(),"created_at"==i.column.COLUMN_NAME?[t._v(" "+t._s(t.$options.filters.formatDate(i.row[i.column.COLUMN_NAME]))+" ")]:t._e()]}}])}),t.OpenPostModal?a("OpenModalViewPost",{attrs:{ApproverId:t.ApproverId,PostId:t.PostId},on:{ApproveReject:t.ApproveReject}}):t._e(),t.PostComment?a("PostCommentModal",{attrs:{AllPages:t.AllPages,CommentId:t.CommentId,ApproverId:t.ApproverId,PostId:t.PostId,CommentType:t.CommentType,PostStatus:t.PostStatus,resultData:t.resultData}}):t._e()],1)},o=[],n=a("5530"),r=a("c7eb"),s=a("1da1"),l=(a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("9769")),c=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Approve",iconClass:"fa fa fa-check",callbackfunction:"approve",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,id:"",isEnabledOnSelectedRow:!0},{title:"Reject",iconClass:"fa fa fa-remove",callbackfunction:"reject",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,id:"",isEnabledOnSelectedRow:!0}],d=[{fieldName:"DATE FROM",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:["DATE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"DATE TO",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:["DATE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Campaign Owner",fieldType:"ddl-check",fieldIcon:"fa-solid fa-folder-open",fieldSearchConditionName:["CAMPAIGN_OWNER"],isSearch:!1,value:"",listOptions:[]}],u=[{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"ViewPost",additionalSpan:"",class:"round-icon-small btn-primary"},{title:"Comments",href:"javascript:void(0)",callbackfunction:"PostCommentModal",icon:"fa fa-comment",additionalSpan:""},{title:"Send for Correction",href:"javascript:void(0)",icon:"fa fa-send",callbackfunction:"SendForCorrection",additionalSpan:"",isvisible:!1},{title:"View Correction",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"ViewCorrection",additionalSpan:"",isvisible:!1}];function m(t,e,a){return h.apply(this,arguments)}function h(){return h=Object(s["a"])(Object(r["a"])().mark((function t(e,a,i){var o,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e,n={},n["moduleName"]=a,n["type"]=i,t.next=6,l["a"].GetLeftSearchStatus(n).then((function(t){var e=t.data;if(null!=e&&"CAMPAIGN_OWNER_SEARCH"==i)return o.leftSearchFields[2].listOptions=e.DATA,o.LeadStatusList=e.DATA,o.LeadStatusList}));case 6:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}var p={buttons:c,listActions:u,leftsearchSchema:d,bindleftCommonSearchdropdown:m},f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block customModal"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ApprovalRequest")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12  float-left"},[a("div",{staticClass:"col-md-12 float-left p-0"},[a("div",{staticClass:"tab_container"},[a("div",{staticClass:"responsive-tabs-container accordion-xs accordion-sm"},[a("ul",{staticClass:"socialtabs nav nav-tabs all-tabs responsive-tabs mt-2 responivecustomtab HideTab ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header",attrs:{id:"myTab",role:"tablist"}},[t._m(0),a("li",{staticClass:"nav-item ui-tabs-tab ui-corner-top ui-state-default ui-tab ui-tabs-active ui-state-active",attrs:{role:"tab",tabindex:"0","aria-controls":"tabs-1","aria-labelledby":"tab-Details","aria-selected":"true","aria-expanded":"true"}},[a("a",{staticClass:"nav-link active productCreateTab1 ui-tabs-anchor",attrs:{href:"#tabs-1","data-toggle":"tab",title:"",onclick:"UserGuideChange('User_Guide_Asset_Catalogue_Add')",role:"presentation",id:"tab-Details","data-toggle-tooltip":"tooltip","data-original-title":"Create Product",tabindex:"-1"}},[a("svg",{staticClass:"bi bi-facebook",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951"}})])])]),a("li",{staticClass:"nav-item ui-tabs-tab ui-corner-top ui-state-default ui-tab disabled",attrs:{role:"tab",tabindex:"-1","aria-controls":"tabs-2","aria-labelledby":"tab-timeline","aria-selected":"false","aria-expanded":"false",disabled:""}},[a("a",{staticClass:"nav-link gen_icon productDeployTab2 ui-tabs-anchor",attrs:{href:"#tabs-2",title:"",onclick:"UserGuideChange('User_Guide_Asset_Catalogue_DeployProduct_Tab')","data-toggle":"tab",role:"presentation",id:"tab-timeline","data-toggle-tooltip":"tooltip","data-original-title":"Deploy Product",tabindex:"-1"}},[a("svg",{staticClass:"bi bi-twitter-x",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z"}})])])])]),a("div",{staticClass:"tab-content fsmtabcontrolMobileView",attrs:{id:"myTabContent"}},[a("div",{staticClass:"tab-pane call-detail  show active border-0 p-0 ui-tabs-panel ui-corner-bottom ui-widget-content",attrs:{id:"tabs-1"}},[a("div",{staticClass:"col-sm-12 col-md-12 float-left p-0"},[a("div",{staticClass:"col-sm-12 col-md-12 float-left p-0",staticStyle:{border:"5px solid #d9d9d9"}},[a("div",{staticClass:"col-sm-12 col-md-8 float-left"},[a("div",{staticClass:"float-left w-80 fb_pagelist mb-3 mt-3"},[a("img",{staticClass:"float-left",attrs:{src:"/Content/images/hr_1.jpg"}}),a("span",{staticClass:"float-left ml-2 w-60"},[a("span",{staticClass:"float-left w-100"},[t._v(t._s(t.PageName))]),a("small",{staticClass:"text-secondary float-left"},[t._v(" "+t._s(t.formattedDate))])])])]),t._m(1),a("div",{staticClass:"col-sm-12 col-md-12 float-left sociallisting"},[a("ul",{staticClass:"mb-3"},[a("li",[t._v(t._s(t.PostContent))]),a("li",[t._v(t._s(t.ApproverNote)+".")])])]),a("div",{staticClass:"col-12 text-center fck_img_dynamic my-2",attrs:{id:"textfck_editor"}},[a("img",{attrs:{src:t.attachmentPath}})])])])]),t._m(2)])])])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{class:"btn btn-success text-white mr-2 "+t.statusClass,attrs:{href:"javascript:;",id:"btnSave",title:"",tabindex:"11","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:function(e){return t.ApproveRejectPost("CRM_APPROVE")}}},[a("i",{staticClass:"fa fa-check pr-2"}),t._v("Approve")]),a("a",{class:"btn btn-danger "+t.statusClass,attrs:{href:"javascript:;",title:"",id:"ancgotolistscreen",tabindex:"12","data-toggle-tooltip":"tooltip","data-original-title":"Cancel"},on:{click:function(e){return t.ApproveRejectPost("CRM_REJECT")}}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v("Reject")])])])])])])])])])],1)},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("label",{staticClass:"mt-2 mr-4 float-left text-left"},[t._v("Preview In")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 col-md-4 float-right text-right"},[a("i",{staticClass:"fa fa-ellipsis-h text-secondary mt-4"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tab-pane call-detail show border-0 p-0 ui-tabs-panel ui-corner-bottom ui-widget-content",attrs:{id:"tabs-2"}},[a("div",{staticClass:"col-sm-12 col-md-12 float-left p-0"},[a("div",{staticClass:"col-sm-12 col-md-12 float-left p-0",staticStyle:{border:"5px solid #d9d9d9"}},[a("div",{staticClass:"col-sm-12 col-md-8 float-left"},[a("div",{staticClass:"float-left w-80 fb_pagelist mb-3 mt-3"},[a("img",{staticClass:"float-left",attrs:{src:"/Content/images/hr_1.jpg"}}),a("span",{staticClass:"float-left ml-2 w-60"},[a("span",{staticClass:"float-left w-100"},[t._v("Digital Diana - Twitter")]),a("small",{staticClass:"text-secondary float-left"},[t._v("26 January at 12:19")])])])]),a("div",{staticClass:"col-sm-12 col-md-4 float-right text-right"},[a("i",{staticClass:"fa fa-ellipsis-h text-secondary mt-4"})])])])])}],S=(a("a9e3"),a("caad"),a("2532"),a("99af"),{props:{PostId:{type:Number,required:!0},ApproverId:{type:Number,required:!0}},data:function(){return{isLoading:!1,attachmentPath:"",blobPath:"https://cogniterblob.blob.core.windows.net/",containerName:"",PostContent:"",ApproverNote:"",modified_at:"",formattedDate:"",PageName:"",PageId:"",statusClass:"",ApprovalData:[]}},created:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.UserId=a.GetUserInfo.ID,a.UserId==a.ApproverId?a.statusClass="":a.statusClass="disabled",a.containerName=a.GetUserInfo.ContainerName,e.next=6,a.FetchData();case 6:case"end":return e.stop()}}),e)})))()},methods:{FetchData:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,i="id=".concat(a.PostId),e.next=4,l["a"].GetSocialMediaPost(i).then(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e){var i,o,n,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==e.data||""==e.data){t.next=14;break}if(!(e.data.data.length>=1)){t.next=14;break}return"CRM_APPROVE"!=e.data.data[0].status_code&&"CRM_REJECT"!=e.data.data[0].status_code||(a.statusClass="disabled"),i=e.data.data[0].attachement_path,i&&(a.attachmentPath=a.blobPath+a.containerName+"/"+i),a.ApprovalData=e.data,a.PageId=e.data.data[0].ref_page_id,a.ApproverNote=e.data.data[0].note,o=e.data.data[0].content,o.includes("<p>")?a.PostContent=o.replace("<p>","").replace("</p>",""):a.PostContent=e.data.data[0].content,n=e.data.data[0].created_at,""!=n&&(s=a.formatDateforPost(n),a.formattedDate=s),t.next=14,a.GetPageList();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},Close:function(){this.$parent.OpenPostModal=!1},formatDateforPost:function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(t),i=a.getDate(),o=e[a.getMonth()],n=(a.getFullYear(),a.getHours()),r=a.getMinutes(),s=n>=12?"PM":"AM",l="".concat(i," ").concat(o," at ").concat(n,":").concat(r<10?"0":"").concat(r," ").concat(s);return l},GetPageList:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,i="TYPE=CRM_SOCIAL&MODULE_NAME=CRM",l["a"].GetTriggerFieldValue(i).then((function(t){a.AllPages=t.data,null!=a.AllPages&&void 0!=a.AllPages&&a.AllPages.forEach((function(t){t.PAGE_ID==a.PageId&&(a.PageName=t.PAGE_NAME)}))}));case 3:case"end":return e.stop()}}),e)})))()},ApproveRejectPost:function(t){var e=this;e.$emit("ApproveReject",t,e.PostId)}}}),b=S,C=(a("809d"),a("2877")),v=Object(C["a"])(b,f,g,!1,null,null,null),A=v.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("PostComment")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},D=[],P=(a("313d"),a("0eb6"),a("b7ef"),a("8bd4"),a("e9c4"),a("4de4"),{props:{PostId:{type:Number,required:!0},resultData:{type:Object,required:!0},PostStatus:{type:String,required:!0},AllPages:{type:Object,required:!0},CommentType:{type:String,required:!0},CommentId:{type:Number,required:!0},ApproverId:{type:Number,required:!0}},data:function(){return{isLoading:!1,fileData:[],base64StringData:"",UserId:0,CompanyId:0,ContainerName:null,UserTimeZone:"",ModuleName:"CRM",FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Title"),name:"TitleName",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"RadioField",label:this.$t("Visibility"),name:"Visibility",value:"1",config:{options:[{name:"Public",value:"1"},{name:"Private",value:"0"}]},placeholder:"",validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:{required:!0,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-paper-plane pr-2'></i>Post New Comment"},{type:"button",class:"btn btn-success",text:"<i class='fa fa-paper-plane pr-2'></i>Update Post",onClick:this.UpdatePost}]}},created:function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(){var e;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.UserId=e.GetUserInfo.ID,e.CompanyId=e.GetUserInfo.CompanyId,e.ContainerName=e.GetUserInfo.ContainerName,e.UserTimeZone=void 0==e.GetUserInfo.TimeZone?"+00:00":e.GetUserInfo.TimeZone,e.UserId==e.ApproverId?e.buttons[1].isVisible=!1:e.buttons[0].isVisible=!1,e.CommentId>0&&this.FetchData();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{FetchData:function(){var t=this,e="id=".concat(t.CommentId);l["a"].GetPostCommentData(e).then((function(e){null!=e.data&&""!=e.data&&e.data.data.length>0&&(t.FormSchema[0].Data[0].value=e.data.data[0].title,t.FormSchema[0].Data[1].value=e.data.data[0].is_visibility,t.FormSchema[1].Data[0].value=e.data.data[0].Comment)}))},Close:function(){this.$parent.PostComment=!1},UpdatePost:function(){var t=this,e=btoa(t.PostId);this.$router.push({name:"AddSocialMediaPost",params:{id:e}})},onSubmit:function(t,e){var a=this;if("SendForCorrection"==a.CommentType){var i=1;a.PostStatus=""}else i=0;var o={id:a.CommentId,post_approver_id:a.PostId,title:t.TitleName,comment:t.Description,is_visibility:t.Visibility,is_send_for_correction:i,is_corrected:0,status_id:1001},n=JSON.stringify(o);l["a"].SavePostComment(n).then((function(t){if("Insert Success"==t.data.MSG||"Updated Success"==t.data.MSG)if("CRM_APPROVE"==a.PostStatus||"CRM_REJECT"==a.PostStatus){var e={ids:a.PostId,moduleName:"CRM",subModuleCode:"CRM_APPROVAL_PENDING",approvaltype:a.PostStatus},i=JSON.stringify(e),o=new Date,n=a.resultData.start_date,c=a.resultData.start_time,d=n+"T"+c,u=new Date(d);if(o<=u||"CRM_REJECT"==a.PostStatus){var m=u-o,h=m/6e4;if(Math.abs(h)<20&&"CRM_REJECT"!=a.PostStatus)return a.ShowAlert(a.$t([a.$t("MinimumTimeApprovePost")]),"warning",!0,a.$t("Alert")),!1;l["a"].ApproveRejectCampaign(i).then(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e){var i,o,n,s,c;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("",0!=e.data){t.next=33;break}if($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),a.ShowAlert(a.$t("RecordUpdatedSuccessfully"),"success",a.$t("Alert")),a.$parent.OpenPostModal=!1,a.Close(),"CRM_APPROVE"!=a.PostStatus){t.next=28;break}if("OK"!=e.statusText&&200!=e.status){t.next=28;break}if(null==a.resultData.attachement_path){t.next=14;break}return i="path=".concat(a.resultData.attachement_path),t.next=12,l["a"].GetBase64String(i).then((function(t){a.base64StringData=t.data}));case 12:o={attachement_mime:a.resultData.attachement_mime,fileName:a.resultData.attachement_name,userId:a.UserId,companyId:a.CompanyId,id:0,moduleName:a.ModuleName,subModuleCode:a.SubModuleCode,containerName:a.ContainerName,base64String:a.base64StringData,attachement_path:""},a.fileData.push(o);case 14:if(n={post_id:a.PostId,ref_page_id:a.resultData.ref_page_id,campaign_owner_id:a.resultData.campaign_owner_id,content:a.resultData.content,followup_content:a.resultData.followup_content,category_id:a.resultData.category_id,tag_id:a.resultData.tag_id,is_draft:!1,schedule_date:a.resultData.start_date?a.$options.filters.formatDate(a.resultData.start_date):a.resultData.start_date,schedule_time:a.resultData.start_time?a.$options.filters.formatTime(a.resultData.start_time):a.resultData.start_time,schedule:[],approver:[],attachments:a.fileData,UserTimeZone:a.UserTimeZone,PostMessageAndTags:a.resultData.content},s=JSON.stringify(n),c=a.AllPages.filter((function(t){return t.PAGE_ID==n.ref_page_id}))[0].ACCOUNT_NAME,!c){t.next=24;break}if("facebook"!=c.toLowerCase()){t.next=23;break}return t.next=21,l["a"].UploadFacebookPost(s).then((function(t){var e=JSON.parse(s),i=void 0==t.data.post_id?t.data.id:t.data.post_id;e.Fb_Post_id=i,s=JSON.stringify(e),a.$parent.FetchData()}));case 21:t.next=24;break;case 23:c.toLowerCase();case 24:return a.scheduleDate=null,a.scheduleTime=null,t.next=28,a.SaveSocialMediaPost(s,"SendForApproval");case 28:a.$parent.PostStatus="",a.$parent.FetchData(),$(".statuschange").addClass("disabled"),t.next=34;break;case 33:a.ShowAlert(a.$t("Error Occur while Approving Record"),"warning",!0,a.$t("Alert"));case 34:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){}))}else a.ShowAlert(a.$t("ApprovalTimeExpired"),"warning",!0,a.$t("Alert"))}else a.CommentId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Comment")]),"success",!0,a.$t("Alert")),a.$parent.FetchData(),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Comment")]),"success",!0,a.$t("Alert")),a.$parent.FetchData(),a.Close())}))},SaveSocialMediaPost:function(t,e){var a=this;return Object(s["a"])(Object(r["a"])().mark((function e(){return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a,e.next=3,l["a"].SaveSocialPost(t).then(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e){return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))()}}}),_=P,M=Object(C["a"])(_,T,D,!1,null,null,null),E=M.exports,w={components:{OpenModalViewPost:A,PostCommentModal:E},data:function(){return{privilegeParams:null,StatusListForListing:[],LegendArray:[],OpenPostModal:!1,PostComment:!1,isLoading:!1,PostId:0,CommentId:0,ApproverId:0,PostStatus:"",CommentType:"",AllPages:[],resultData:[],ApprovalData:[],listheaderbuttons:p.buttons,leftSearchFields:p.leftsearchSchema,listActions:p.listActions,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,TotalPages:0,CurrentPage:1,postContent:"",campaignOwnerId:"",status:"",dateto:"",datefrom:"",Headers:[{COLUMN_NAME:"created_at",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:1},{COLUMN_NAME:"campaign_name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Campaign Name",DISPLAY_ORDER:2},{COLUMN_NAME:"content",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Post Description",DISPLAY_ORDER:2},{COLUMN_NAME:"created_by",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Created By",DISPLAY_ORDER:3},{COLUMN_NAME:"status_id",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:4}]}},created:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.next=3,a.GetPageList();case 3:return a.UserId=a.GetUserInfo.ID,a.getStatuslistForListing("CRM_APPROVER","en"),a.privilegeParams="controller=CRM&action=",a.LegendArray=[{class:"bg-yellow colorboxsquare",text:a.$t("PendingRequest")},{class:"bg-red colorboxsquare",text:a.$t("RejectedRequest")}],a.Headers.forEach((function(t){t.settings=null,"status_id"!=t.COLUMN_NAME&&"created_at"!=t.COLUMN_NAME||(t.settings={isInSlot:!0,isForTag:!0})})),e.next=9,a.FetchData();case 9:return e.next=11,p.bindleftCommonSearchdropdown(a,"CRM","CAMPAIGN_OWNER_SEARCH");case 11:case"end":return e.stop()}}),e)})))()},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition=""},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"approve":this.ApproveReject("CRM_APPROVE","");break;case"reject":this.ApproveReject("CRM_REJECT","");break}},actionButtonClick:function(t,e){var a=this;switch(t){case"ViewPost":l["a"].CheckPrivilege(a.privilegeParams+"QuickViewApproval").then((function(t){t.data?a.OpenModalViewPost(e.id,e.approver_id):a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"PostCommentModal":l["a"].CheckPrivilege(a.privilegeParams+"PostCommentApproval").then((function(t){t.data?a.PostCommentModal(e.id,"",e.comment_id,e.approver_id):a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"SendForCorrection":l["a"].CheckPrivilege(a.privilegeParams+"SendForCorrectionApproval").then((function(t){t.data?a.PostCommentModal(e.id,"SendForCorrection",e.comment_id,e.approver_id):a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break;case"ViewCorrection":l["a"].CheckPrivilege(a.privilegeParams+"ViewCorrectionApproval").then((function(t){t.data?a.PostCommentModal(e.id,"ViewCorrection",e.comment_id,e.approver_id):a.ShowAlert(a.$t("NotAuthorizedSection"),"warning",!0,"Alert")}));break}},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(i){var o=Object(n["a"])({},i);switch(o.title){case"Send for Correction":t.approver_id==e.UserId?o.isVisible=!0:o.isVisible=!1;break;case"View Correction":t.approver_id==e.UserId?o.isVisible=!1:o.isVisible=!0;break;case"Edit":o.isVisible=!0;break;case"Delete":o.isVisible=!0;break;default:o.isVisible=!0}a.push(o)})),a},OpenModalViewPost:function(t,e){var a=this;void 0==t&&(t=0),this.PostId=t,a.CommentType="",this.ApproverId=e,this.OpenPostModal=!this.OpenPostModal},PostCommentModal:function(t,e,a,i){var o=this;void 0==t&&(t=0),this.PostId=t,this.CommentId=a,this.ApproverId=i,"SendForCorrection"==e?(o.CommentType="SendForCorrection",o.PostStatus=""):"ViewCorrection"==e?(o.CommentType="ViewCorrection",o.PostStatus=""):(o.CommentType="",o.PostStatus=""),this.PostComment=!this.PostComment},getStatuslistForListing:function(t,e){var a=this,i="langCode="+e+"&statusType="+t+"&hasglobal=true";l["a"].statusdropdown(i).then((function(t){if("Success"==t.data.status){var e=t.data.result;a.StatusListForListing=e.data}}))},getStatusClassList:function(t){var e="";switch(t){case"Active":e="px-2 text-center bg-success text-white d-block";break;case"Approved":e="px-2 bg-primary text-center text-white d-block";break;case"Approval Pending":e="px-2 bg-info text-center text-white d-block";break;case"Rejected":e="px-2 text-center bg-warning text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;default:e=""}return e},FetchData:function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(){var e,a;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,a="",t.next=4,l["a"].CampaignApprovalListing(a).then((function(t){e.ApprovalData=[],""!=t.data?(e.ApprovalData=t.data,e.ApprovalData.length>0&&e.ApprovalData.forEach((function(t){t.content=e.removeHTMLTags(t.content)})),e.ApprovalData.forEach((function(t){t.isCheckBoxDisabled=!1,"CRM_APPROVE"!=t.status_code&&"CRM_REJECT"!=t.status_code||(t.isCheckBoxDisabled=!0),t.additionalClass="","CRM_REJECT"==t.status_code?t.additionalClass="danger-bar":t.additionalClass="warning-bar"})),e.TotalRecord=t.data[0].total,e.TotalPages=Math.ceil(e.TotalRecord/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):e.noRecord=!0}));case 4:e.isLoading=!1;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),removeHTMLTags:function(t){return t.replace(/<[^>]*>/g,"")},GetPageList:function(){var t=this;return Object(s["a"])(Object(r["a"])().mark((function e(){var a,i;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t,i="TYPE=CRM_SOCIAL&MODULE_NAME=CRM",l["a"].GetTriggerFieldValue(i).then((function(t){a.AllPages=t.data}));case 3:case"end":return e.stop()}}),e)})))()},ApproveReject:function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(e,a){var i,o;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this,o="",o="CRM_APPROVE"==e?"ApproveCampaign":"RejectCampaign",t.next=5,l["a"].CheckPrivilege(i.privilegeParams+o).then(function(){var t=Object(s["a"])(Object(r["a"])().mark((function t(o){var n,s;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o.data){t.next=15;break}if(n="",i.PostStatus=e,""!=a?n=a:"undefined"!==typeof this.id&&null!=this.id?n=this.id:$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){n.length>0&&(n+=","),n+=$(this).val()})),i.PostId=n,!(n.length>0||""!=n)){t.next=12;break}return s="id=".concat(n),t.next=9,l["a"].GetSocialMediaPost(s).then((function(t){null!=t.data.data&&""!=t.data.data&&(i.resultData=t.data.data[0])}));case 9:i.confirmR(i.$t("AreYouSureToApproveSelectedRecords"),!0,i.$t("Approve",[i.$t("CampaignApproval")]),(function(){i.PostComment=!0})),t.next=13;break;case 12:i.ShowAlert(i.$t("LeaveApprove"),"warning",!0,i.$t("Alert"));case 13:t.next=16;break;case 15:i.ShowAlert(i.$t("NotAuthorizedSection"),"warning",!0,"Alert");case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()}},k=w,x=Object(C["a"])(k,i,o,!1,null,null,null);e["default"]=x.exports},edd5:function(t,e,a){"use strict";a("b187")}}]);
//# sourceMappingURL=CRMSMSCampaign.js.map