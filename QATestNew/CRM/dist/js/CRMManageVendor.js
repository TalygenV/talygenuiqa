(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMManageVendor"],{"682d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-content"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{attrs:{id:"divMainLeadData"}},[e._m(0),a("div",{staticClass:"border p-3"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.valid,i=t.errors;return[a("DynamicForm",{attrs:{schema:e.GroupBy,dateformat:e.dateformat},on:{onSearchDDL:e.onSearch,setSelectedValue:e.setSelectedValue}}),a("div",{staticClass:"row flex-row-reverse mt-2"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success",class:{disabled:e.submited},attrs:{href:"javascript:;","data-tour":"step: 1; title: enter  dealDetail; content: AddVendorDetailContent",title:"Save"},on:{click:function(t){return e.SubmitData(n,i)}}},[a("em",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Save"))+" ")]),e._v("Â  "),a("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:void(0)",title:"Cancel"},on:{click:e.onCancel}},[a("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])])]}}])})],1)])],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 padding-t_8"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v("Manage Vendor")])])])])}],o=a("53ca"),l=(a("b0c0"),a("4de4"),a("d3b7"),a("a15b"),a("e9c4"),a("ac1f"),a("5319"),a("498a"),a("1276"),a("b680"),a("159b"),a("9769")),r=a("5ba0"),s={components:{DynamicForm:r["a"]},data:function(){return{isLoading:!1,value:"",LeadData:null,LeadOwner:null,GroupBy:[],Channel:null,IndustryType:null,Status:null,selected:!1,selectoptions:[],submited:!1,vSelectValidate:!1,vendorId:this.$route.params.id,userId:null,compnayId:null,dateformat:null}},created:function(){this.userId=this.GetUserInfo.ID,this.companyId=this.GetUserInfo.CompanyId,this.dateformat=this.GetUserInfo.DateFormat,this.FetchData()},methods:{onSearch:function(e,t){e&&this.searchSelectData(e,this,t)},searchSelectData:function(e,t,a){this.ShowSearchData(e,t,a,a.value.value)},ShowSearchData:function(e,t,a,n){"undefined"==typeof n&&(n=0);var i="id=&moduleName="+this.$route.params.moduleName+"&type="+a.field_code;l["a"].getDDLData(i+"&search="+escape(e)).then((function(e){var t=[];return e.data,""!=e.data&&(t=e.data),a.select_options=t.DATA}))},setSelectedValue:function(e,t){try{Array.isArray(t)?e.value="object"===Object(o["a"])(t[0])&&null!==t[0]?t[0].value:t[0]:e.value=t}catch(a){}},SubmitData:function(e,t){var a=this;this.$refs.form.validate().then((function(e){if(e){a.isLoading=!0,a.submited=!0;var t=a.LeadData,n=[],i=[],r=0;if($.each(t,(function(e,t){var l={field_name:t.name,required:t.is_required,length:t.length,type:t.validation_type},r="vendor_id "==t.name?a.vendorId:"undefined"===typeof t.value?"":t.value;if(r="undefined"===typeof r?"":r,"date"==t.dt_code&&(r=t.value),"checkbox"==t.dt_code){var s=t.select_value.filter((function(e){return null!=e&&""!=e}));r=s.join(",")}if("select"==t.dt_code)try{r="object"===Object(o["a"])(r)&&null!==r?r.value:r}catch(c){}"created_by"==t.name&&(r=a.userId),"modified_by"==t.name&&(r=a.userId),"company_id"==t.name&&(r=a.companyId),"vendor_id"==t.name&&(r=a.vendorId);var d={field_name:t.name,field_value:r,custom_field_id:t.custom_field_id};n.push(d),i.push(l)})),r>0)return a.submited=!1,!1;var s={data:n,validation:i},d=JSON.stringify(s);l["a"].SaveVendor(d).then((function(e){a.isLoading=!1,"1"==e.data[0].Code?(a.vendorId>0?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Vendor")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("Vendor")]),"success",!0,a.$t("Alert")),a.$router.push({name:"CRMVendor"})):a.ShowAlert(a.$t("AddedError",[a.$t("Vendor")]),"failure",!0,a.$t("Alert")),a.submited=!1}))}}))},onCancel:function(){this.$router.push({name:"CRMVendor"})},Onkeypress:function(e){var t=e.value;t.length>=1&&(t=t.replace(/<|>/g,""),e.value!=t&&(e.value=$.trim(t)),t.indexOf("&#")>-1)&&vm.ShowAlert(vm.$t("EnterValidSearch").replace(/\&amp;/g,"&"),"warning",!0,vm.$t("Alert"))},FetchData:function(){var e=this;e.isLoading=!0;var t="id=".concat(e.$route.params.id,"&moduleName=CRM&subModuleCode=CRM_VENDORS&langCode=en");l["a"].getFormLayout(t).then((function(t){if(e.isLoading=!1,e.LeadData=t.data.data,null!=e.LeadData&&e.LeadData.length>0){var a=e.LeadData[0].group_id;$.each(e.LeadData,$.proxy((function(t,n){a=n.group_id,n.placeholder=e.GetFieldPlaceHolder(n.label,n.display_name);var i=$.grep(e.GroupBy,(function(e,t){return e.group_id==a}));if("checkbox"==n.dt_code&&(n.select_value=n.value.split(",")),0==i.length){var o=$.grep(e.LeadData,(function(e,t){return e.group_id==a}));if(e.vendorId>0&&$.each(o,(function(t,a){if("select"==a.dt_code)try{a.value=a.value.trim()}catch(n){console.log("value is null while trimming")}"custom"==a.dropdown_type&&"Lookup"==a.picklist_options?(a.select_options=e.MakeNormalArray(a.select_options),a.select_value=a.select_options,null!=a.select_options&&a.select_options.length>0&&(a.value=a.select_options[0])):"decimal"==a.dt_code&&"YES"==a.form_field_visibility?null!=a.value&&""!=a.value&&(a.value=parseFloat(a.value,10).toFixed(2)):"date"==a.dt_code&&null!=a.value&&""!=a.value&&(a.value=a.value)})),o.length>0){var l={group_id:a,group_name:o[0].group_name,group_display_name:o[0].group_display_name,Data:o};e.GroupBy.push(l)}}}),e))}setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.RadioButtonBootstrap()}),500);var n={};e.LeadData.forEach((function(e){""!=e.astype&&"YES"==e.form_field_visibility&&(n[e.name]=e.value)}))}))}}},d=s,c=a("2877"),u=Object(c["a"])(d,n,i,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=CRMManageVendor.js.map