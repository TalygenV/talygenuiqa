(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ContactListing"],{5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var i=a("ade3");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},"5bfc":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("input",{attrs:{type:"hidden",value:"",id:"hdnstatusId"}}),a("input",{attrs:{type:"hidden",name:"currentPage",id:"currentPage"}}),a("input",{attrs:{type:"hidden",value:"Home",name:"ControllerName",id:"ControllerName"}}),a("input",{attrs:{type:"hidden",value:"Index",name:"ActionName",id:"ActionName"}}),a("input",{attrs:{type:"hidden",id:"hdnNotifyMsg"}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_CONTACTS",IdentityColumn:"contact_id",HeaderText:t.$t("Contact"),ListData:t.ContactData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,IsFilterApplied:!!t.searchCondition,LegendArray:t.LegendArray,SortExp:t.SortExp,SortBy:t.SortBy,CurrentPageNumber:t.PageNumber},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,ActionButtonClick:t.actionButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["status_id"==i.column.COLUMN_NAME?[t.isCRMShowStausDrop(i.row.status_id,"CRM_CONTACTS")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_CONTACTS",dataid:i.row.contact_id,"data-controller":"Crm",statuslist:t.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:t.FetchData,isselectedvaluestring:!0}}):t._e(),t.isCRMShowStausDrop(i.row.status_id,"CRM_CONTACTS")?t._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:t.getStatusClass(i.row.status_id,"status_id")},[t._v(t._s(i.row[i.column.COLUMN_NAME]))])])]:t._e()]}}])}),t.showFilter?a("searchfilter",{attrs:{submodulecode:"CRM_CONTACTS",modulename:"CRM",callbackfunction:t.FetchData},on:{close:function(e){t.showFilter=!1},FilterData:t.FilterData}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Search")))])]):t._e(),t.ShowManageView?a("viewlayout",{directives:[{name:"show",rawName:"v-show",value:t.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_CONTACTS",modulename:"CRM",callbackfunction:t.FetchData,usertype:t.usertype},on:{close:function(e){t.ShowManageView=!1}}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Search")))])]):t._e()],1)},n=[],o=a("53ca"),s=a("5530"),r=a("ade3"),c=(a("d3b7"),a("159b"),a("c740"),a("498a"),a("ac1f"),a("00b4"),a("5319"),a("25f0"),a("e9c4"),a("9769")),l=a("fc0b"),d=a("cdd5"),h=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filters",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"ManageView",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Contacts",iconClass:"fa-plus",href:"/CRM/ManageContact/0/CRM/CRM_CONTACTS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addContact_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Import Contacts",iconClass:"fa-users",href:"/CRM/ImportContacts/ContactListing",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],u=[{fieldName:"Name",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["CONT.FIRST_NAME","CONT.LAST_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Email",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["CONT.email_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Phone   Number",fieldType:"text",isNumeric:!0,fieldIcon:"fa-phone",fieldSearchConditionName:["CONT.MOBILE_PHONE","CONT.BUSINESS_PHONE"],isSearch:!1,value:"",min:0,listOptions:[]}],f=[{title:"View",href:"/CRM/ViewContactDetails/{contact_id}/CRM/CRM_CONTACTS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageContact/{contact_id}/CRM/CRM_CONTACTS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""}],C={buttons:h,leftsearchSchema:u,listActions:f},b=a("2aeb"),p={components:{viewlayout:d["a"],TgList:b["a"],LeadDataService:c["a"],searchfilter:l["a"]},data:function(){var t;return t={isLoading:!1,ShowManageView:!1,ContactData:null},Object(r["a"])(t,"ShowManageView",!1),Object(r["a"])(t,"Headers",null),Object(r["a"])(t,"TotalRecords",0),Object(r["a"])(t,"PageNumber",1),Object(r["a"])(t,"PageSize",10),Object(r["a"])(t,"SortBy",""),Object(r["a"])(t,"SortExp",""),Object(r["a"])(t,"PageSizeOption",null),Object(r["a"])(t,"CurrentPage",1),Object(r["a"])(t,"TotalPages",0),Object(r["a"])(t,"GroupStart",1),Object(r["a"])(t,"GroupEnd",3),Object(r["a"])(t,"firstNameId",""),Object(r["a"])(t,"jobTitleId",""),Object(r["a"])(t,"buisnessPhoneId",""),Object(r["a"])(t,"Status",""),Object(r["a"])(t,"showFilter",!1),Object(r["a"])(t,"NameSearch",""),Object(r["a"])(t,"ContactEmail",""),Object(r["a"])(t,"PhoneNum",""),Object(r["a"])(t,"searchCondition",""),Object(r["a"])(t,"noRecord",!1),Object(r["a"])(t,"IsAnySearch",!1),Object(r["a"])(t,"userid",null),Object(r["a"])(t,"usertype",null),Object(r["a"])(t,"companyId",null),Object(r["a"])(t,"conditionForInstantSearch",""),Object(r["a"])(t,"leftSearchFields",C.leftsearchSchema),Object(r["a"])(t,"listheaderbuttons",C.buttons),Object(r["a"])(t,"listActions",C.listActions),Object(r["a"])(t,"appliedFilter",[]),Object(r["a"])(t,"StatusListForListing",[]),Object(r["a"])(t,"LegendArray",[]),Object(r["a"])(t,"privilegeParams",null),t},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,this.privilegeParams="controller=CRM&action=";var t=this;t.getStatuslistForListing("CRMContract","en"),this.FetchData(),this.GetPageSizeOption()},updated:function(){this.BindActionButtonEvent()},methods:{actionButtonClick:function(){},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(t){var e=Object(s["a"])({},t);switch(e.title){case"View":case"Edit":default:e.isVisible=!0;break}a.push(e)})),a},clickEventOfColumn:function(t,e){"first_name"!=e.COLUMN_NAME&&"View"!=e.COLUMN_NAME||this.$router.push({path:"/CRM/ViewContactDetails/"+t.contact_id+"/CRM/CRM_CONTACTS"}),"Edit"==e.COLUMN_NAME&&this.$router.push({path:"/CRM/Manage/"+t.contact_id+"/CRM/CRM_CONTACTS"})},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"ManageView":this.ManageView();break;case"openFilterPopUp":this.openFilterPopUp();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var e=this;e.searchCondition="";var a=e.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));e.listheaderbuttons[a].isvisible=!1;var i=e.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));e.listheaderbuttons[i].iconClass="fa fa-filter";try{e.appliedFilter=[]}catch(n){}e.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},ManageView:function(){var t=this;t.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3)},checkPrivilegeLayout:function(t){},checkPrivilegeManage:function(t){},checkPrivilegeView:function(t){},checkPrivilegeImport:function(t){window.location.href="/CRM/ImportContacts?reqfrom=/CRM/ContactListing"},SetCurrentPage:function(t){this.PageNumber=t,t>this.GroupEnd||1==t?(this.GroupStart=t,this.GroupEnd=t+2):t<this.GroupStart&&t>1&&(this.GroupEnd=this.GroupStart-1,this.GroupStart=t-2),this.FetchData()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},SetPageSize:function(t){this.PageSize=t.target.value,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()},Searchdata:function(t){var e=this;e.PageNumber=1,e.GroupStart=e.PageNumber,e.GroupEnd=e.PageNumber+2,e.conditionForInstantSearch="",e.IsAnySearch=!1,""!=$.trim(e.ContactEmail)&&(e.IsAnySearch=!0,e.conditionForInstantSearch+=""!=$.trim(e.conditionForInstantSearch)?" AND":"",e.conditionForInstantSearch+=" CONT.email_id LIKE '%25"+e.ContactEmail+"%25'"),""!=$.trim(e.NameSearch)&&(e.IsAnySearch=!0,e.conditionForInstantSearch+=""!=$.trim(e.conditionForInstantSearch)?" AND":"",e.conditionForInstantSearch+=" (CONT.FIRST_NAME LIKE '%25"+e.NameSearch+"%25' OR ",e.conditionForInstantSearch+=" CONT.LAST_NAME LIKE '%25"+e.NameSearch+"%25' ) "),""!=$.trim(e.PhoneNum)&&(e.IsAnySearch=!0,e.conditionForInstantSearch+=""!=$.trim(e.conditionForInstantSearch)?" AND":"",e.conditionForInstantSearch+=" (CONT.MOBILE_PHONE LIKE '%25"+e.PhoneNum+"%25' OR ",e.conditionForInstantSearch+=" CONT.BUSINESS_PHONE LIKE '%25"+e.PhoneNum+"%25' ) "),e.FetchData()},cancelOrRefresh:function(){this.NameSearch="",this.ContactEmail="",this.PhoneNum="",this.searchCondition="",this.IsAnySearch=!1,this.firstNameId="",this.jobTitleId="",this.buisnessPhoneId="",this.FetchData()},FilterData:function(t,e,a,i,n,s){this.pageNum=t,this.pageSize=e,this.sortBy=a,this.sortExp=i,this.searchCondition=n,null!=Object(o["a"])(s)&&this.appliedFilter.push(s),this.FetchData()},GetLocalizedValue:function(t,e){if(this.isBlank(e)){var a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)},FetchData:function(t){var e,a=this;a.isLoading=!0,e=t?"pageSize="+this.TotalRecords+"&pageNumber="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp+"&StatusID="+this.Status+"&First_Name="+this.firstNameId+"&job_title="+this.jobTitleId+"&business_phone="+this.buisnessPhoneId:"pageSize="+this.PageSize+"&pageNumber="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp+"&StatusID="+this.Status+"&First_Name="+this.firstNameId+"&job_title="+this.jobTitleId+"&business_phone="+this.buisnessPhoneId;var i="";if(this.isBlank(this.searchCondition)||(i+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(i+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=i){if(e=e+"&searchCondition="+i,a.appliedFilter.length>0){var n=a.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));a.listheaderbuttons[n].isvisible=!0;var o=a.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));a.listheaderbuttons[o].iconClass="fa fa-filter text-success"}}else if(0==a.appliedFilter.length){var s=a.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction}));a.listheaderbuttons[s].isvisible=!1;var r=a.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}));a.listheaderbuttons[r].iconClass="fa fa-filter"}t?c["a"].ContactListing(e).then((function(t){null!=t.data?($.each(t.data.schema,(function(e){$.each(t.data.schema[e],(function(){t.data.schema[e].DISPLAY_NAME=t.data.schema[e].COLUMN_NAME.replace(/_/g," ")}))})),a.JSONToCSVConvertor(t.data,"Contact-Detail",!0)):a.ModelnoRecord=!0,a.isLoading=!1})):c["a"].ContactListing(e).then((function(t){null!=t.data&&""!=t.data?(a.Headers=t.data.schema,a.Headers.forEach((function(t){t.settings=null,"first_name"==t.COLUMN_NAME&&(t.settings={clickEvent:a.clickEventOfColumn,formatter:a.columnDataFormatter}),"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})})),t.data.data.length>0?(a.ContactData=t.data.data,a.ContactData.forEach((function(t){t.rowDetailsUrl="",""==t.rowDetailsUrl&&(t.rowDetailsUrl="/CRM/ViewContactDetails/"+t.contact_id+"/CRM/CRM_CONTACTS")})),a.TotalRecords=t.data.data[0].total_records,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),a.CurrentPage=a.PageNumber,a.noRecord=!1,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked")):(a.noRecord=!0,a.ContactData=[],a.TotalRecords=0)):(a.noRecord=!0,a.ContactData=[],a.Headers=[],a.TotalRecords=0),setTimeout((function(){a.ResponsiveDataTable("tablelistingdata")}),500),a.isLoading=!1}))},unescape:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){if(null!=t){var e=unescape(t);return e}})),GetPageSizeOption:function(){for(var t=[],e=10,a=e;a<e+95;a+=5)t.push(a);this.PageSizeOption=t},openFilterPopUp:function(t){this.showFilter=!0},commonDeleteData:function(t){var e=this;c["a"].CheckPrivilege(e.privilegeParams+"DeleteContact").then((function(t){if(t.data){var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Contacts"),(function(){var t={ids:a,moduleName:"CRM",subModuleCode:"CRM_CONTACTS"},i=JSON.stringify(t);c["a"].deleteActivityData(i).then((function(t){var a="";"Success"==t.data[0].Status?($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),a=e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Contacts")]),"Success",!0,e.$t("Alert")),$("#DeleteMultiple").addClass("disabled"),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("Contacts")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):alert(e.$t("Selectanyrecordtodelete"))}else e.ShowAlert("You are not authorized","failure",!0,"Alert")}))},getStatuslistForListing:function(t,e){var a=this,i="langCode="+e+"&statusType="+t+"&hasglobal=true";c["a"].statusdropdown(i).then((function(t){if("Success"==t.data.status){var e=t.data.result;a.StatusListForListing=e.data}}))}}},S=p,m=a("2877"),g=Object(m["a"])(S,i,n,!1,null,null,null);e["default"]=g.exports},dbb4:function(t,e,a){var i=a("23e7"),n=a("83ab"),o=a("56ef"),s=a("fc6a"),r=a("06cf"),c=a("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,i=s(t),n=r.f,l=o(i),d={},h=0;while(l.length>h)a=n(i,e=l[h++]),void 0!==a&&c(d,e,a);return d}})},e439:function(t,e,a){var i=a("23e7"),n=a("d039"),o=a("fc6a"),s=a("06cf").f,r=a("83ab"),c=n((function(){s(1)})),l=!r||c;i({target:"Object",stat:!0,forced:l,sham:!r},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})}}]);
//# sourceMappingURL=ContactListing.js.map