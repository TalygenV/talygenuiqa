(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMContactImportDetails"],{a016:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divImportContactDatakData"}},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 mt-3 float-left",attrs:{id:"divshowImportContactList"}},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition  p-actions-expand"},[e("span",{staticClass:"p-name text-white"},[t._v(" "+t._s(t.$t("Import"))+" "+t._s("ImportContacts"==t.reqfrom?t.$t("Contacts"):t.$t("Accounts"))+" "+t._s(t.$t("Detail"))+" ")]),e("span",{staticClass:"p-actions float-right"},[e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:t.$t("BacktoList")},on:{click:function(a){return t.cancel()}}},[e("em",{staticClass:"fa fa-angle-double-left pr-2"}),e("br"),t._v(t._s(t.$t("BacktoList")))])]),t._m(0)])]),e("Form",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(a){var s=a.valid,o=a.errors;return[e("div",{staticClass:"listing mt-2"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered mt-0",attrs:{id:"tablecontactdata","aria-describedby":"contactimp"}},[e("thead",{staticClass:"thead-bg"},[e("tr",{staticClass:"text-capitalize"},t._l(t.Headers,(function(a,s){return e("th",{key:s,staticStyle:{"min-width":"240px"},attrs:{scope:"col"}},[e("span",{staticStyle:{display:"initial !important"}},[t._v(t._s(t.$t(a.DISPLAY_NAME)))]),a.IS_REQUIRED?e("span",{staticClass:"d-inline-block",class:{"text-danger":a.IS_REQUIRED}},[t._v("*")]):t._e()])})),0)]),e("tbody",t._l(t.ImportContactData,(function(a,s){return e("tr",{key:s},t._l(t.Headers,(function(o,c){return e("td",{key:c,staticClass:"text-center",staticStyle:{width:"100px"},style:["radio"==o.ACTUAL_DATA_TYPE?{"min-width":"220px !important"}:{"min-width":"100px"}]},["date"==o.ACTUAL_DATA_TYPE?e("div",{staticClass:"input-group table_datepickerfix"},[e("Field",{attrs:{name:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME),rules:{required:o.IS_REQUIRED}},scopedSlots:t._u([{key:"default",fn:function(s){var c=s.errors,n=s.changed;return[e("v-date-picker",{staticClass:"input-group",attrs:{"minute-increment":5},on:{"update:modelValue":n},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.inputValue,o=a.inputEvents,n=a.togglePopover;return[e("input",t._g({class:{"form-control":!0,"is-invalid":c[0]},domProps:{value:s}},o)),e("div",{staticClass:"input-group-append",on:{click:function(t){return n()}}},[e("span",{staticClass:"input-group-text"},[e("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a[o.COLUMN_NAME],callback:function(e){t.$set(a,o.COLUMN_NAME,e)},expression:"item[key.COLUMN_NAME]"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:o.COLUMN_NAME}},[t._v(t._s(c[0]))])]}}],null,!0)})],1):t._e(),"select"==o.ACTUAL_DATA_TYPE?e("Field",{attrs:{name:o.TABLE_COLUMN_NAME+s,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},scopedSlots:t._u([{key:"default",fn:function(c){var n=c.touched,r=c.invalid;return["select"==o.ACTUAL_DATA_TYPE?e("select",{class:{"form-control":!0,"is-invalid":"select"==o.ACTUAL_DATA_TYPE&&n&&r},attrs:{id:o.TABLE_COLUMN_NAME+s},on:{change:function(a){return t.FillDropdown(o,s)}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(o.SELECT_OPTIONS),(function(s,c){return e("option",{key:c,domProps:{selected:a[o.COLUMN_NAME]==s.name,value:s.value}},[t._v(t._s(s.name))])}))],2):t._e(),"select"==o.ACTUAL_DATA_TYPE&&n&&r?e("span",{staticClass:"invalid-feedback",attrs:{name:o.TABLE_COLUMN_NAME+s}},[t._v(t._s(t.error[0]))]):t._e()]}}],null,!0),model:{value:a[o.COLUMN_NAME],callback:function(e){t.$set(a,o.COLUMN_NAME,e)},expression:"item[key.COLUMN_NAME]"}}):t._e(),"radio"==o.ACTUAL_DATA_TYPE?e("div",{staticClass:"form-control border-0 bg-transparent"},t._l(t.MakeArray(o.SELECT_OPTIONS,o.ACTUAL_DATA_TYPE),(function(c,n){return e("div",{key:n,staticClass:"form-check form-check-inline"},[e("div",{staticClass:"form-check form-check-inline custom-control mx-4 p-0 custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+s+"_"+c.value,name:o.COLUMN_NAME+s,"data-resource":c.name,type:"radio"},domProps:{value:c.value,checked:t._q(a[o.COLUMN_NAME],c.value)},on:{change:[function(e){return t.$set(a,o.COLUMN_NAME,c.value)},function(e){return t.showDependentItem(a,c.value,o.COLUMN_NAME,s)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s+"_"+c.value}},[t._v(t._s(c.name))])])])})),0):t._e(),"Lookup"!=o.COLUMN_NAME&&"date"!=o.ACTUAL_DATA_TYPE&&"radio"!=o.ACTUAL_DATA_TYPE&&"select"!=o.ACTUAL_DATA_TYPE&&"textarea"!=o.ACTUAL_DATA_TYPE&&"checkbox"!=o.ACTUAL_DATA_TYPE?e("Field",{attrs:{name:o.COLUMN_NAME+"_"+s,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},scopedSlots:t._u([{key:"default",fn:function(c){var n=c.errors,r=c.touched,i=c.invalid;return["Lookup"!=o.COLUMN_NAME&&"date"!=o.ACTUAL_DATA_TYPE&&"radio"!=o.ACTUAL_DATA_TYPE&&"select"!=o.ACTUAL_DATA_TYPE&&"textarea"!=o.ACTUAL_DATA_TYPE&&"checkbox"!=o.ACTUAL_DATA_TYPE?e("input",{directives:[{name:"model",rawName:"v-model",value:a[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],class:{"form-control":!0,"is-invalid":"select"!=o.ACTUAL_DATA_TYPE&&r&&i},attrs:{type:"text",id:o.COLUMN_NAME+"_"+s,name:o.COLUMN_NAME+"_"+s},domProps:{value:a[o.COLUMN_NAME]},on:{input:function(e){e.target.composing||t.$set(a,o.COLUMN_NAME,e.target.value)}}}):t._e(),"select"!=o.ACTUAL_DATA_TYPE&&r&&i?e("span",{staticClass:"invalid-feedback",attrs:{name:o.COLUMN_NAME+"_"+s}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)}):t._e(),"checkbox"==o.ACTUAL_DATA_TYPE?e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"form-check form-check-inline"},t._l(t.MakeArray(o.SELECT_OPTIONS,o.ACTUAL_DATA_TYPE),(function(c,n){return e("div",{key:n,staticClass:"custom-control custom-checkbox"},[e("Field",{attrs:{name:"chk_"+s+"_"+c.value,rules:{required:o.IS_REQUIRED},label:t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a[o.COLUMN_NAME],expression:"item[key.COLUMN_NAME]"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s+"_"+c.value,name:"chk_"+s+"_"+c.value,"data-resource-id":c.name,type:"checkbox","data-vv-as":t.GetFormSchemaFieldName(o.COLUMN_NAME,o.DISPLAY_NAME)},domProps:{value:c.value,checked:Array.isArray(a[o.COLUMN_NAME])?t._i(a[o.COLUMN_NAME],c.value)>-1:a[o.COLUMN_NAME]},on:{change:function(e){var s=a[o.COLUMN_NAME],n=e.target,r=!!n.checked;if(Array.isArray(s)){var i=c.value,l=t._i(s,i);n.checked?l<0&&t.$set(a,o.COLUMN_NAME,s.concat([i])):l>-1&&t.$set(a,o.COLUMN_NAME,s.slice(0,l).concat(s.slice(l+1)))}else t.$set(a,o.COLUMN_NAME,r)}}})]),e("label",{staticClass:"custom-control-label universal-custom-control-label pl-1 pr-3 dynamic",attrs:{for:"chk_"+s+"_"+c.value}},[t._v(t._s(c.name))])],1)})),0)]):t._e()],1)})),0)})),0)]),t.noRecord?e("div",{staticClass:"text-center text-danger no-record",staticStyle:{padding:"20px"}},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])]),e("div",{staticClass:"col-lg-12 float-left px-0"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right mt-2"},[e("a",{staticClass:"btn btn-success mr-2",class:{disabled:t.submited},attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(a){return t.SubmitData(s,o)}}},[e("em",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:t.cancel}},[e("em",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])]),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"py-2"},[e("small",[e("span",{staticClass:"text-danger"})])])])])])]}}])})],1)],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"collapse-head-btns"},[e("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[e("em",{staticClass:"fa fa-angle-up text-white"})])])}],c=(e("498a"),e("99af"),e("b0c0"),e("d3b7"),e("159b"),e("e9c4"),e("9769")),n={data:function(){return{isLoading:!1,CompanyId:null,batchid:null,ImportContactData:null,Headers:null,options:null,noRecord:!1,submited:!1,selectedStates:[],reqfrom:null,submodule:null}},created:function(){this.CompanyId=this.GetUserInfo.CompanyId,this.batchid=this.$route.params.batchid,this.reqfrom=this.$route.params.reqfrom,this.submodule=this.$route.params.subModuleCode,this.FetchData()},methods:{FillDropdown:function(t,a,e,s){var o=this,n="",r="";"account_country"==t.TABLE_COLUMN_NAME?(r="STATE",$("#account_state"+a).empty(),$("#account_city"+a).empty(),$("#account_state"+a).append("<option value=''>Select</option>"),$("#account_city"+a).append("<option value=''>Select</option>")):"account_state"==t.TABLE_COLUMN_NAME&&(r="STATE_DISTRICT",$("#account_city"+a).empty(),$("#account_city"+a).append("<option value=''>Select</option>"));var i=t.TABLE_COLUMN_NAME;if(n=$("#"+t.TABLE_COLUMN_NAME+a+" option:selected").val(),""!=$.trim(e)&&(n=e),""!=n){var l="id=&moduleName=".concat(o.$route.params.moduleName,"&type=").concat(r,"&refId=").concat(n);c["a"].getDDLData(l).then((function(t){var e=[];if(null!=t.data&&(e=t.data.DATA),"account_country"==i){var c=o.selectedStates[a];$.each(e,(function(t,e){var o="";$.trim(c)==$.trim(e.name)&&(o="selected=true",s["account_state_lookup"]=e.value),$("#account_state"+a).append("<option value="+e.value+" "+o+">"+e.name+"</option>")}))}else"account_state"==i&&$.each(e,(function(t,e){$("#account_city"+a).append("<option value="+e.value+">"+e.name+"</option>")}));o.isLoading=!1}))}},cancel:function(){var t=this,a=t.submodule;"CRM_CONTACTS"==a?t.$router.push({name:"CRMImportContacts",params:{reqfrom:"ContactListing"}}):"CRM_Account"==a?t.$router.push({name:"CRMImportAccounts",params:{reqfrom:"Accounts"}}):t.$router.push({name:"CRMImportLeads",params:{reqfrom:"CRMLead"}})},showDependentItem:function(t,a,e,s){this.ImportContactData[s][e]=a},GetValidationLocal:function(t,a){var e={};return t.IS_REQUIRED&&(e["required"]=!0),"decimal"==t.ACTUAL_DATA_TYPE&&(e["decimal"]=2),t.length>0&&(e["max"]=t.length),"text"==t.ACTUAL_DATA_TYPE&&(e["regex"]="^[@@#.a-zA-Z0-9 ._-s]+$"),"date"==t.ACTUAL_DATA_TYPE&&(e["date"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"int"!=t.ACTUAL_DATA_TYPE&&"bigint"!=t.ACTUAL_DATA_TYPE||(e["numeric"]=!0),"url"==t.ACTUAL_DATA_TYPE&&(e["url"]="require_protocol"),e},FetchData:function(){this.isLoading=!0;var t="batchid="+this.batchid,a=this;c["a"].Importlead(t).then((function(t){a.isLoading=!1,null!=t.data?(a.Headers=[],a.Headers=t.data.schema,t.data.data.length>0?(a.ImportContactData=[],a.ImportContactData=t.data.data,a.noRecord=!1):(a.noRecord=!0,a.ImportContactData=[])):(a.noRecord=!0,a.ImportContactData=[],a.Headers=[]),setTimeout((function(){a.ResponsiveDataTable("tablecontactdata");var t={};a.ImportContactData.forEach((function(e,s){a.Headers.forEach((function(a){"date"==a.ACTUAL_DATA_TYPE?t[a.COLUMN_NAME]=e[a.COLUMN_NAME]:"select"==a.ACTUAL_DATA_TYPE?t[a.TABLE_COLUMN_NAME+s]=e[a.COLUMN_NAME]:"Lookup"!=a.COLUMN_NAME&&"date"!=a.ACTUAL_DATA_TYPE&&"radio"!=a.ACTUAL_DATA_TYPE&&"select"!=a.ACTUAL_DATA_TYPE&&"textarea"!=a.ACTUAL_DATA_TYPE&&"checkbox"!=a.ACTUAL_DATA_TYPE?t[a.COLUMN_NAME+"_"+s]=e[a.COLUMN_NAME]:"checkbox"==a.ACTUAL_DATA_TYPE&&(t["chk_"+s+"_"+option.value]=e[a.COLUMN_NAME])}))})),console.log(t)}),500)}))},SubmitData:function(t,a){var e=this;this.$refs.form.validate().then((function(t){if(t){e.isLoading=!0;var a=e.ImportContactData,s={data:JSON.stringify(a),BatchId:e.batchid},o=JSON.stringify(s),n=e.submodule,r=e.reqfrom,i="";i="CRM_ACCOUNTS"==n&&"ImportAccounts"==r?"/SaveImportAccounts":"/SaveImportContact",c["a"].postImportAccountsOrContact(i,o).then((function(t){e.isLoading=!1,"Success"==t.data[0].Status?"CRM_ACCOUNTS"==n?("ImportContacts"==r?e.ShowAlert(e.$t("AddedSuccess",[e.$t("Contact")]),"success",!0,e.$t("Alert")):e.ShowAlert(e.$t("AddedSuccess",[e.$t("Account")]),"success",!0,e.$t("Alert")),e.$router.push({name:"CRMAccounts"})):(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Contact")]),"success",!0,e.$t("Alert")),e.$router.push({name:"ContactListing"})):e.ShowAlert(e.$t("AddedError",[e.$t("Contact")]),"warning",!0,e.$t("Alert"))}))}}))}}},r=n,i=e("2877"),l=Object(i["a"])(r,s,o,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=CRMContactImportDetails.js.map