{"version":3,"sources":["webpack:///./src/views/CRM/PriceBook/ManagePriceBookCustomLayout.vue?88ed","webpack:///src/views/CRM/PriceBook/ManagePriceBookCustomLayout.vue","webpack:///./src/views/CRM/PriceBook/ManagePriceBookCustomLayout.vue?3096","webpack:///./src/views/CRM/PriceBook/ManagePriceBookCustomLayout.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isLoading","_v","_s","$t","ref","buttons","FormSchema","on","onSubmit","scopedSlots","_u","key","fn","data","staticStyle","discountType","_l","item","index","parseInt","priceInformation","rangeTo","errors","touched","invalid","directives","name","rawName","value","expression","class","domProps","$event","target","composing","$set","changevalue","rangeFrom","discountFix","discount","deletePriceDetailRow","addNewForPriceDetails","_e","staticRenderFns","pricebookid","userId","compnayId","dateformat","isPriceInfo","onEditPriceInfo","type","text","onClick","created","methods","onCancel","FetchData","vm","PriceBookDataService","then","group","field","layoutType","Data","astype","visibility","onSearch","searchSelectData","ShowSearchData","appendingUrl","search","selctedValue","response","onChangeEventForFields","ths","priceDetails","thisvar","formfields","val","CustomFieldArray","x","component"],"mappings":"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ACA5C,cACAF,aAEA6C,4BAEAd,4CAlBA,0GAAAW,GAuBAK,uCACA,WACA,6BACAC,sCACA,6CACA,kBAKAA,sBAJAA,sBACAA,kBAKAA,iBACAA,sDAGAA,sBACAA,oBAIAC,wBACA,OACAtC,aACAhB,WACAkB,aAEA,+BAEAE,iCACA,2IACA,OACAJ,aACAhB,WACAkB,aAEA,mCAEA,6EAGAC,iCACA,WACA,gCAEA,OADA,yFACA,EAEAoC,kGACAA,+BACA,8BACAA,8BAIAxC,wBACA,6CACAR,eAGAU,0BACA,WACA,sBACA,mBACA,YACA,WACA,cACAmB,wDAGAA,2DAMAjD,SA9IA,SA8IAqE,EAAAC,GACA,WACArB,0CACA,MACAA,eACA,gFACAsB,uBACA,6BACAC,wBAEA,8BACAA,wBAEA,6BACAA,2BAEA,gCACAA,gCAGA,OACAnE,OACAO,qCAEA,oBACAsC,0CACAD,eACA,qBACA,gBACAA,mFAGAA,iFAEAA,gBAAA/B,uBAGA+B,yFC7RmY,I,YCO/XwB,EAAY,eACd,EACA1F,EACAoD,GACA,EACA,KACA,KACA,MAIa,aAAAsC,E","file":"js/CRMManagePriceBook.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"main-content\"},[_c('loader',{attrs:{\"is-visible\":_vm.isLoading}}),_c('div',{attrs:{\"id\":\"divMainLeadData\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12 padding-t_8\"},[_c('div',{staticClass:\"theme-primary partition-full\"},[_c('span',{staticClass:\"p-name text-white\"},[_vm._v(_vm._s(_vm.$t('CAMANAGESTAGE')))])])])]),_c('div',{staticClass:\"border p-3\"},[_c('Form',{ref:\"form\"},[_c('dynamic-form',{ref:\"PriceBookForm\",attrs:{\"lang\":\"en\",\"buttons\":_vm.buttons,\"schema\":_vm.FormSchema},on:{\"OnSubmit\":_vm.onSubmit},scopedSlots:_vm._u([{key:\"tgslot-PriceBookTable\",fn:function(ref){\nvar data = ref.data;\nreturn [(_vm.isPriceInfo)?_c('div',{staticClass:\"listing p-3\"},[_c('div',{staticClass:\"table-responsive\"},[_c('table',{staticClass:\"table table-bordered dt-responsive nowrap mt-0\",staticStyle:{\"width\":\"100%\",\"min-width\":\"650px!important\"},attrs:{\"id\":\"priceBookTable\",\"aria-describedby\":\"pricebooktable\"}},[_c('thead',{staticClass:\"thead-bg\"},[_c('tr',{staticClass:\"text-capitalize\"},[_c('th',{attrs:{\"scope\":\"col\"}},[_c('span',[_vm._v(_vm._s(_vm.$t('RangeFrom')))])]),_c('th',{attrs:{\"scope\":\"col\"}},[_c('span',[_vm._v(_vm._s(_vm.$t('RangeTo')))])]),_c('th',{attrs:{\"scope\":\"col\"}},[_c('span',[_vm._v(_vm._s(_vm.$t('Discount'))+\" \"+_vm._s((_vm.discountType == 2)?'(%)': '(Flat)'))])]),_c('th',{staticClass:\"text-center\",attrs:{\"scope\":\"col\"}},[_c('span',[_vm._v(_vm._s(_vm.$t('Action')))])])])]),_c('tbody',_vm._l((_vm.priceInformation),function(item,index){return _c('tr',{key:index},[_c('td',[_c('Field',{attrs:{\"name\":'rangeFrom'+index,\"rules\":{'required':true,'numeric':true,'min_value':((index>0)?(parseInt(_vm.priceInformation[index-1].rangeTo)+1):1)},\"label\":\"Range From\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar touched = ref.touched;\nvar invalid = ref.invalid;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.rangeFrom),expression:\"item.rangeFrom\"}],class:{ 'form-control': true, 'is-invalid': touched && invalid },attrs:{\"type\":\"text\",\"name\":'rangeFrom'+index,\"id\":'rangeFrom'+index},domProps:{\"value\":(item.rangeFrom)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(item, \"rangeFrom\", $event.target.value)},function($event){return _vm.changevalue(item)}]}}),_c('span',{staticClass:\"invalid-feedback d-block\",attrs:{\"name\":_vm.rangeFrom}},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('td',[_c('Field',{attrs:{\"name\":'rangeTo'+index,\"rules\":{'required':true,'numeric':true,'min_value':(parseInt(item.rangeFrom =='' ? 0: item.rangeFrom)+1)},\"label\":\"Range To\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar touched = ref.touched;\nvar invalid = ref.invalid;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.rangeTo),expression:\"item.rangeTo\"}],class:{ 'form-control': true, 'is-invalid': touched && invalid },attrs:{\"type\":\"text\",\"name\":'rangeTo'+index,\"id\":'rangeTo'+index},domProps:{\"value\":(item.rangeTo)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"rangeTo\", $event.target.value)}}}),_c('span',{staticClass:\"invalid-feedback d-block\",attrs:{\"name\":_vm.rangeTo}},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('td',[_c('Field',{attrs:{\"name\":'discount'+index,\"rules\":{'required':true,'numeric':true,'max_value':100},\"label\":\"Discount\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar touched = ref.touched;\nvar invalid = ref.invalid;\nreturn [_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.discount),expression:\"item.discount\"}],class:{ 'form-control': true, 'is-invalid': touched && invalid },attrs:{\"type\":\"text\",\"name\":'discount'+index,\"id\":'discount'+index},domProps:{\"value\":(item.discount)},on:{\"keyup\":function($event){return _vm.discountFix(index,item.discount)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"discount\", $event.target.value)}}}),_c('span',{staticClass:\"invalid-feedback d-block\",attrs:{\"name\":_vm.discount}},[_vm._v(_vm._s(errors[0]))])]}}],null,true)})],1),_c('td',{staticClass:\"text-center single-action\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.deletePriceDetailRow(index)}}},[_c('em',{staticClass:\"fa fa-trash action-icon text-danger\"})])])])}),0)]),_c('div',{staticClass:\"col-lg-12 add-form-field text-right py-3\"},[_c('a',{staticClass:\"btn btn-success\",attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.addNewForPriceDetails()}}},[_c('em',{staticClass:\"fa fa-plus pr-2\",attrs:{\"aria-hidden\":\"true\"}}),_vm._v(_vm._s(_vm.$t('AddMore')))])])])]):_vm._e()]}}])}),_c('div',{staticClass:\"col-lg-6\"},[_c('div',{staticClass:\"py-2\"},[_c('small',[_c('span',{staticClass:\"text-danger\"},[_vm._v(\" \"+_vm._s(_vm.$t('MandatoryString')))])])])])],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <section class=\"main-content\">\r\n       <loader :is-visible=\"isLoading\"></loader>\r\n           <div  id=\"divMainLeadData\" v-cloak>\r\n           <div class=\"row\">\r\n                   <div class=\"col-md-12 padding-t_8\">\r\n                       <div class=\"theme-primary partition-full\">\r\n                           <span class=\"p-name text-white\">{{$t('CAMANAGESTAGE')}}</span>                           \r\n                       </div>\r\n                   </div>\r\n               </div>\r\n               <div class=\"border p-3\">\r\n                   <Form  ref=\"form\">\r\n                       <dynamic-form lang=\"en\" ref=\"PriceBookForm\" :buttons=\"buttons\" :schema=\"FormSchema\" v-on:OnSubmit=\"onSubmit\">\r\n                        <template v-slot:tgslot-PriceBookTable=\"{ data }\">\r\n                            <div class=\"listing p-3\" v-if=\"isPriceInfo\">\r\n                                <div class=\"table-responsive\">\r\n                                    <table id=\"priceBookTable\" class=\"table table-bordered dt-responsive nowrap mt-0\" style=\"width: 100%; min-width: 650px!important;\" aria-describedby=\"pricebooktable\">\r\n                                        <thead class=\"thead-bg\">\r\n                                            <tr class=\"text-capitalize\">\r\n                                                <th scope=\"col\"><span>{{$t('RangeFrom')}}</span></th>\r\n                                                <th scope=\"col\"><span>{{$t('RangeTo')}}</span></th>\r\n                                                <th scope=\"col\"><span>{{$t('Discount')}} {{(discountType == 2)?'(%)': '(Flat)' }}</span></th>\r\n                                                <th scope=\"col\" class=\"text-center\"><span>{{$t('Action')}}</span></th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody>\r\n                                            <tr v-for=\"(item,index) in priceInformation\" :key=\"index\">\r\n                                                <td>\r\n                                                    <Field :name=\"'rangeFrom'+index\" :rules=\"{'required':true,'numeric':true,'min_value':((index>0)?(parseInt(priceInformation[index-1].rangeTo)+1):1)}\" label=\"Range From\" v-slot=\"{errors,touched,invalid}\">\r\n                                                    <input  type=\"text\" v-bind:class=\"{ 'form-control': true, 'is-invalid': touched && invalid }\" v-model=\"item.rangeFrom\" \r\n                                                        v-bind:name=\"'rangeFrom'+index\" :id=\"'rangeFrom'+index\" v-on:input=\"changevalue(item)\"   />\r\n                                                        <span   :name=\"rangeFrom\" class=\"invalid-feedback d-block\">{{errors[0]}}</span>                                \r\n                                                </Field>                                               \r\n                                                </td>\r\n                                                <td>\r\n                                                    <Field :name=\"'rangeTo'+index\" :rules=\"{'required':true,'numeric':true,'min_value':(parseInt(item.rangeFrom =='' ? 0: item.rangeFrom)+1)}\" label=\"Range To\" v-slot=\"{errors,touched,invalid}\">\r\n                                                    <input   type=\"text\" v-bind:class=\"{ 'form-control': true, 'is-invalid': touched && invalid }\" v-model=\"item.rangeTo\"  v-bind:name=\"'rangeTo'+index\" :id=\"'rangeTo'+index\"/>\r\n                                                    <span   :name=\"rangeTo\" class=\"invalid-feedback d-block\">{{errors[0]}}</span>                                \r\n                                                </Field>\r\n                                                </td>\r\n                                                <td>\r\n                                                    <Field :name=\"'discount'+index\" :rules=\"{'required':true,'numeric':true,'max_value':100}\" label=\"Discount\" v-slot=\"{errors,touched,invalid}\">\r\n                                                    <input   type=\"text\" v-bind:class=\"{ 'form-control': true, 'is-invalid': touched && invalid }\" v-model=\"item.discount\" v-on:keyup=\"discountFix(index,item.discount)\" \r\n                                                    v-bind:name=\"'discount'+index\" :id=\"'discount'+index\" />\r\n                                                    <span   :name=\"discount\" class=\"invalid-feedback d-block\">{{errors[0]}}</span>                                \r\n                                                </Field>\r\n                                                </td>\r\n                                                <td class=\"text-center single-action\"><a href=\"javascript:;\" v-on:click=\"deletePriceDetailRow(index)\">\r\n                                                    <em class=\"fa fa-trash action-icon text-danger\"></em></a></td>\r\n                                            </tr>\r\n                                        </tbody>\r\n                                    </table>\r\n                                    <div class=\"col-lg-12 add-form-field text-right py-3\">\r\n                                        <a href=\"javascript:;\" class=\"btn btn-success\" v-on:click=\"addNewForPriceDetails()\"><em class=\"fa fa-plus pr-2\" aria-hidden=\"true\"></em>{{$t('AddMore')}}</a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </template>\r\n                       </dynamic-form>\r\n                       <div class=\"col-lg-6\">\r\n                       <div class=\"py-2\"><small><span class=\"text-danger\">\r\n                                   {{ $t('MandatoryString') }}</span></small>\r\n                       </div>\r\n                       </div>\r\n                   </Form>\r\n               </div>\r\n           </div>\r\n       </section>        \r\n</template>\r\n<script>\r\nimport PriceBookDataService from \"../../../services/DataService\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            isLoading:false,\r\n            pricebookid: this.$route.params.id,\r\n            userId:null,\r\n            compnayId:null,\r\n            dateformat:null,            \r\n            isPriceInfo: false,\r\n            discountType: 0,\r\n            onEditPriceInfo: false,\r\n            priceInformation: [],\r\n            FormSchema:[],\r\n            buttons: [\r\n                {\r\n                    type: \"submit\",\r\n                    class: \"btn btn-success save\",\r\n                    text: \"<i class='fa fa-save pr-2'></i>Submit\",\r\n                },\r\n                {\r\n                    type: \"button\",\r\n                    class: \"btn btn-danger\",\r\n                    text: \"<i class='fa fa-close pr-2'></i>Cancel\",\r\n                    onClick: this.onCancel\r\n                }\r\n            ]\r\n        }\r\n    },\r\n    created: function () {\r\n        this.userId= this.GetUserInfo.ID;\r\n        this.companyId= this.GetUserInfo.CompanyId;\r\n        this.dateformat= this.GetUserInfo.DateFormat;\r\n        this.FetchData();\r\n    },\r\n    methods: {\r\n        onCancel: function () {\r\n            this.$router.push({ name: 'CRMPriceBook' });\r\n        },\r\n        FetchData:function(){\r\n            var vm = this;\r\n            vm.isLoading=true;\r\n            const params = `id=${vm.$route.params.id}&moduleName=CRM&subModuleCode=CRM_PRICE_BOOKS&langCode=en`;\r\n            PriceBookDataService.getFormLayout(params)\r\n                .then(function (response) {                     \r\n                    vm.isLoading=false;\r\n                    vm.FormSchema = vm.$refs.PriceBookForm.ConvertCustomFieldIntoDynamicFormObj(response.data.data);\r\n                    vm.FormSchema.forEach((group, gi) => {\r\n                        group.Data.forEach(async  (field, fi) => {\r\n                            if (field.name == \"price_book_owner\") {\r\n                                field.config.onSearchChange = vm.onSearch;                                \r\n                            } \r\n                            field.config.onChange = vm.onChangeEventForFields;\r\n                        })\r\n                    })\r\n                    vm.FormSchema.push(\r\n                        {\r\n                            layoutType: \"single\",\r\n                            Data: [{\r\n                                astype: \"SlotField\",\r\n                                name: \"PriceBookTable\",\r\n                                value: \"\",\r\n                                visibility: false,\r\n                            }]\r\n                    });\r\n                    if (response.data.otherData != '' && response.data.otherData !== undefined) {\r\n                        vm.isPriceInfo = true;\r\n                        vm.FormSchema[1].Data[0].visibility=true;\r\n                        vm.priceInformation = response.data.otherData;\r\n                    }\r\n                })\r\n        },\r\n        onSearch: function (e, selctedValue, search) { \r\n            var vm = this;\r\n            vm.searchSelectData(search, vm, selctedValue);\r\n        },\r\n        searchSelectData: function (search,ths, selctedValue) {\r\n            this.ShowSearchData(search, ths, selctedValue);\r\n        },       \r\n        ShowSearchData: async function (search, ths,selctedValue) {             \r\n            var vm = this;  \r\n            var appendingUrl = `id=&&moduleName=CRM&type=CRM_USERS&search=${search}&refId=`;\r\n            if (typeof (selctedValue) == 'undefined') {\r\n                selctedValue = 0;\r\n            }\r\n            selctedValue.config.options = [];\r\n            await PriceBookDataService.getDDLData(appendingUrl).then(function (response) {                \r\n                if (response.data) {\r\n                    vm.JsonObj = response.data;\r\n                    if (vm.JsonObj != null) {\r\n                        response.data.DATA.forEach((item) => {\r\n                            var obj = {\r\n                                value: item.value,\r\n                                name: item.name\r\n                            }                            \r\n                            selctedValue.config.options.push(obj);                           \r\n                        })\r\n                        vm.$refs.PriceBookForm.UpdateKeyValue();\r\n                    }\r\n                }\r\n            });\r\n        },\r\n        onChangeEventForFields: function (x, y, z) {\r\n            let ths = this;           \r\n            if (y.name == \"price_book_model\") {                \r\n                ths.FormSchema[1].Data[0].visibility=true;\r\n                if (y.value != '' && y.value !== undefined && y.value != \"0\") {\r\n                    if (!ths.onEditPriceInfo) {\r\n                        ths.priceInformation = [];\r\n                        ths.priceDetails();\r\n                    }\r\n                    else {\r\n                        ths.onEditPriceInfo = false;\r\n                    }\r\n                    ths.isPriceInfo = true;\r\n                    ths.discountType = (y.value == null || y.value == \"\") ? 0 : y.value;\r\n                } \r\n                else {\r\n                    ths.priceInformation = [];\r\n                    ths.isPriceInfo = false;\r\n                }\r\n            }\r\n        },\r\n        priceDetails: function () {\r\n            var dataObject = {\r\n                rangeFrom: '',\r\n                rangeTo: '',\r\n                discount: ''\r\n            };\r\n            this.priceInformation.push(dataObject);\r\n        },\r\n        addNewForPriceDetails: function () {\r\n            if (this.priceInformation[this.priceInformation.length - 1].rangeFrom != '' && this.priceInformation[this.priceInformation.length - 1].rangeTo != '') {\r\n                var dataObject = {\r\n                    rangeFrom: '',\r\n                    rangeTo: '',\r\n                    discount: ''\r\n                };\r\n                this.priceInformation.push(dataObject);\r\n            } else {\r\n                this.ShowAlert(this.$t(\"lastOneRowRequired\"),\"warning\", true, this.$t(\"Alert\"));\r\n            }\r\n        },\r\n        deletePriceDetailRow: function (index) {\r\n            var thisvar = this;\r\n            if (thisvar.priceInformation.length == 1) {\r\n                this.ShowAlert(this.$t(\"Atleastonerowismandatorytosave\"),\"warning\", true, this.$t(\"Alert\"));\r\n                return false;\r\n            }\r\n            thisvar.confirmR(this.$t(\"AssetGroup_ConfirmDelete\"), true, this.$t(\"Delete\",['Price Details']), function () {\r\n                thisvar.priceInformation.splice(index, 1);\r\n                if (thisvar.priceInformation.length <= 0) {\r\n                    thisvar.addNewForPriceDetails();\r\n                }\r\n            });\r\n        },\r\n        changevalue: function (value) {            \r\n            if (parseInt(value.rangeFrom) >= parseInt(value.rangeTo)) {\r\n                value.rangeTo = '';\r\n            }\r\n        },\r\n        discountFix: function (index, item) {\r\n           var vm = this;\r\n            if (item.indexOf('.') >= 0) {\r\n                var parts = item.split('.');\r\n                if (parts.length > 1) {\r\n                    if (parts[1] != '') {\r\n                        if (parts[1].length > 1) {\r\n                            vm.priceInformation[index].discount = parseFloat(item).toFixed(2);\r\n                        }\r\n                        else {\r\n                            vm.priceInformation[index].discount = parseFloat(item).toFixed(1);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        onSubmit(formfields, val) {\r\n            var vm = this;\r\n            vm.$refs.form.validate().then((result) => {     \r\n                if (result) {     \r\n                    vm.isLoading=true;\r\n                    var CustomFieldArray = vm.$refs.PriceBookForm.ConvertDynamicFormObjToCustomFieldObj(vm.FormSchema);\r\n                    CustomFieldArray.forEach((x) => {\r\n                        if (x.field_name == 'created_by') {\r\n                            x.field_value = vm.userId;\r\n                        }\r\n                        if (x.field_name == 'modified_by') {\r\n                            x.field_value = vm.userId;\r\n                        }\r\n                        if (x.field_name == 'company_id') {\r\n                            x.field_value = vm.companyId;\r\n                        }    \r\n                        if (x.field_name == 'price_book_id') {\r\n                            x.field_value = vm.pricebookid;\r\n                        }                    \r\n                    });\r\n                    var postJSON = {\r\n                        data: CustomFieldArray,\r\n                        priceInformation: vm.priceInformation\r\n                    };\r\n                    var objectPostString = JSON.stringify(postJSON);\r\n                    PriceBookDataService.PostPriceBook(objectPostString).then(response => {  \r\n                        vm.isLoading=false;                               \r\n                        if (response.data[0].Code == \"1\") {\r\n                            if (vm.pricebookid > 0) {                        \r\n                                vm.ShowAlert(vm.$t('UpdatedSuccess', [vm.$t('PriceBook')]), \"success\", true, vm.$t(\"Alert\")); \r\n                            }\r\n                            else {\r\n                                vm.ShowAlert(vm.$t('AddedSuccess', [vm.$t('PriceBook')]), \"success\", true, vm.$t(\"Alert\")); \r\n                            }\r\n                            vm.$router.push({ name: 'CRMPriceBook' });\r\n                        }\r\n                        else {\r\n                            vm.ShowAlert(vm.$t('AddedError', [vm.$t('PriceBook')]), \"failure\", true, vm.$t(\"Alert\"));                            \r\n                        }                    \r\n                    });\r\n                }\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManagePriceBookCustomLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ManagePriceBookCustomLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ManagePriceBookCustomLayout.vue?vue&type=template&id=525e1c6b&\"\nimport script from \"./ManagePriceBookCustomLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./ManagePriceBookCustomLayout.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}