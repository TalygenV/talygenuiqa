(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMBrand"],{"5a92":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!1,showCheckBox:!0,ModuleName:"CRM",SubModuleCode:"CRM_BRANDS",IdentityColumn:"brand_id",HeaderText:t.$t("Brand"),ListData:t.BrandData,HeaderData:t.Headers,RenderRowActionMethod:t.renderActions,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,IsFilterApplied:!!t.searchCondition,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["Thumbnail"==i.column.COLUMN_NAME?[a("td",[a("img",{attrs:{src:"/Content/images/imagenotavailable.jpg",width:"100",height:"50",alt:"Image"}})])]:t._e(),"Social"==i.column.COLUMN_NAME?[a("div",{staticClass:"text-center SocialMedia_c"},[a("RouterLink",{staticClass:"btn btn-success text-white",attrs:{to:"/Brand/SocialConnect"}},[t._v(t._s(t.$t("Connect")))])],1)]:t._e()]}}])}),t.showAddEditModal?a("modaladdbrand",{attrs:{submodulecode:"CRM_BRANDS",modulename:"CRM",modalAddEditItem:t.modalAddEditItem},on:{close:t.ClosePopUp}},[a("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Brand")))])]):t._e()],1)},s=[],d=a("5530"),o=(a("d3b7"),a("159b"),a("e9c4"),[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Brand",iconClass:"fa-plus SocialMedia_a",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,callbackfunction:"openPopUp"},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}]),n=[{fieldName:"Brand Name",fieldType:"text",fieldIcon:"fa fa-search",isSearch:!1,fieldSearchConditionName:["BRAND_NAME"],isvisible:!0,isdisabled:!1,value:""}],r={buttons:o,leftSearchFields:n},l=a("9769"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},["Edit"===t.AddEditText?a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("EditBrand")))]):a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("AddBrand")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"AddBrand",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("small",[a("span",{staticClass:"text-danger"},[t._v(" "+t._s(t.$t("MandatoryString")))])])])])],1)])])])],1)},u=[],h={props:{modalAddEditItem:null},data:function(){return{AddEditText:"",txtBrandId:0,modal:null,FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("brand_name"),name:"brand_name",value:"",placeholder:this.$t("Enterbrand_name"),validationRules:{required:!0,max:400}},{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:function(){this.modal=this.modalAddEditItem,null!=this.modal&&this.FetchAddEditBrandData(this.modal.brand_id)},methods:{Close:function(){this.$parent.ClosePopUp()},FetchAddEditBrandData:function(t){var e=this;this.AddEditText="Edit",l["a"].FetchAddEditBrandData(t).then((function(t){null!=t.data.data&&(e.txtBrandId=t.data.data[0].brand_id,e.FormSchema[0].Data[0].value=t.data.data[0].brand_name,e.FormSchema[0].Data[1].value=t.data.data[0].brand_description)}))},onSubmit:function(t,e){var a=this;a.isLoading=!0;var i={brand_id:this.txtBrandId,brandname:t.brand_name,branddescription:t.Description,STATUS_ID:1001},s={data:i},d=JSON.stringify(s);l["a"].SaveBrand(d).then((function(t){"Success"==t.data[0].Status?("Edit"==a.AddEditText?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Brand")]),"Success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("Brand")]),"Success",!0,a.$t("Alert")),a.$parent.FetchData(),a.Close(),a.isLoading=!1):(a.ShowAlert(a.$t("Error",[a.$t("Brand")]),"Warning",!0,a.$t("Alert")),a.Close(),a.isLoading=!1)}))}}},m=h,b=a("2877"),p=Object(b["a"])(m,c,u,!1,null,null,null),S=p.exports,A={components:{modaladdbrand:S},data:function(){return{leftSearchFields:r.leftSearchFields,listheaderbuttons:r.buttons,modalAddEditItem:null,userid:null,usertype:null,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",noRecord:!1,TotalRecords:0,searchCondition:"",isLoading:!1,srchcondition:"",BrandData:null,showAddEditModal:!1,fieldInfo:[],Headers:[{COLUMN_NAME:"brand_name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"brand_name",DISPLAY_ORDER:1},{COLUMN_NAME:"brand_description",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"brand_description",DISPLAY_ORDER:2},{COLUMN_NAME:"created_at",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created at",DISPLAY_ORDER:3},{COLUMN_NAME:"Name",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created by",DISPLAY_ORDER:4},{COLUMN_NAME:"Social",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Social",DISPLAY_ORDER:5}]}},created:function(){this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType;var t=this;t.FetchData()},methods:{clickEventOfColumn:function(t,e){"brand_name"==e.COLUMN_NAME&&(this.showAddEditModal=!0,this.modalAddEditItem=t)},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(e){var i=Object.assign(e);switch(e.title){case"View":i.isVisible="Draft"!=t.status_id;break;case"Edit":i.isVisible=t.ref_source_id<=0&&"Closed"!=t.status_id;break;case"FollowUps":i.isVisible="Closed"!=t.status_id;break;case"ConvertSalesOrder":i.isVisible="Draft"!=t.status_id&&t.ref_source_id<=0&&"Closed"!=t.status_id;break}a.push(Object(d["a"])({},i))})),a},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},openPopUp:function(){this.showAddEditModal=!0},ClosePopUp:function(){this.showAddEditModal=!1,this.modalAddEditItem=null,this.FetchData()},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"openPopUp":this.openPopUp();break;case"setTourGuideSteps":this.setTourGuideSteps(0,this);break}},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Brand"),(function(){var t={ids:a,moduleName:"CRM",subModuleCode:"CRM_BRANDS"},i=JSON.stringify(t);l["a"].CommonDeleteData(i).then((function(t){var a="";200==t.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),a=e.ShowAlert(e.$t("DeletedSuccessfully",[e.$t("Brand")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("Brand")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):alert(e.$t("Selectanyrecordtodelete"))},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},getRequestParams:function(t,e,a,i,s,d){var o={};return t&&(o["pageNum"]=t),d&&(o["brandname"]=d),s&&(o["isPaged"]=s),a&&(o["sortBy"]=a),i&&(o["sortExp"]=i),e&&(o["pageSize"]=e),o},FetchData:function(){var t=this.getRequestParams(this.pageNumber,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.brandname),e=this;e.isLoading=!0,t.pageSize=e.PageSize,t.pageNumber=e.PageNumber,t.brandname=e.leftSearchFields[0].value,e.PageNumber?t.pageNum=e.PageNumber:e.PageNumber=t.pageNum=1,"undefined"!=typeof e.isPaged?t.isPaged=e.isPaged:e.isPaged=t.isPaged=1,t.isPaged=e.isPaged,t.sortBy=e.SortBy,t.sortExp=e.SortExp,l["a"].BrandListing(t).then((function(t){e.isLoading=!1,e.Headers.forEach((function(t){t.settings=null,"brand_name"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn,formatter:e.columnDataFormatter}),"Social"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"Thumbnail"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})})),null!=t.data&&""!=t.data?(e.BrandData=t.data.data,e.TotalRecords=t.data.data[0].totalrecords,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.noRecord=!1):(e.noRecord=!0,e.BrandData=[],e.TotalRecords=0),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500),e.isLoading=!1}))}}},f=A,C=Object(b["a"])(f,i,s,!1,null,null,null);e["default"]=C.exports}}]);
//# sourceMappingURL=CRMBrand.js.map