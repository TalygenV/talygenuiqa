(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMAccounts"],{5530:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("b64b"),a("a4d3"),a("4de4"),a("d3b7"),a("e439"),a("159b"),a("dbb4");var i=a("ade3");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}},dbb4:function(t,e,a){var i=a("23e7"),n=a("83ab"),s=a("56ef"),o=a("fc6a"),c=a("06cf"),r=a("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,a,i=o(t),n=c.f,l=s(i),u={},d=0;while(l.length>d)a=n(i,e=l[d++]),void 0!==a&&r(u,e,a);return u}})},e439:function(t,e,a){var i=a("23e7"),n=a("d039"),s=a("fc6a"),o=a("06cf").f,c=a("83ab"),r=n((function(){o(1)})),l=!c||r;i({target:"Object",stat:!0,forced:l,sham:!c},{getOwnPropertyDescriptor:function(t,e){return o(s(t),e)}})},f367:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_ACCOUNTS",IdentityColumn:"USER_ID",HeaderText:t.$t("Accounts"),ListData:t.AccountsData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,IsSearchFieldsOnTop:!1,SearchFields:t.leftSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,LegendArray:t.LegendArray,IsFilterApplied:!!t.searchCondition,SortExp:t.SortExp,SortBy:t.SortBy,CurrentPageNumber:t.PageNumber},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,ActionButtonClick:t.actionButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["STATUS_ID"==i.column.COLUMN_NAME?[1002==i.row.STATUS_ID?a("span",{staticClass:"px-2 bg-danger text-center text-white d-block",attrs:{title:""}},[t._v(t._s(i.row.STATUS_NAME))]):1001==i.row.STATUS_ID?a("span",{staticClass:"px-2 bg-success text-center text-white d-block",attrs:{title:""}},[t._v(t._s(i.row.STATUS_NAME))]):12506==i.row.STATUS_ID?a("span",{staticClass:"px-2 bg-warning text-center text-white d-block",attrs:{title:""}},[t._v(t._s(i.row.STATUS_NAME))]):t._e(),t.isCRMShowStausDrop(i.row.status_id,"CRM_ACCOUNTS")?t._e():a("a",{staticClass:"inactive-disabled"},[a("span",{class:t.getStatusClass(i.row.status_id,"STATUS_ID")},[t._v(" "+t._s(i.row[i.column.COLUMN_NAME])+" ")])])]:t._e()]}}])}),t.showAccountPopup?a("openaddaccountmodal",{on:{close:function(e){t.showAccountPopup=!1}}}):t._e()],1)},n=[],s=a("53ca"),o=a("5530"),c=a("c7eb"),r=a("1da1"),l=(a("99af"),a("d3b7"),a("159b"),a("e9c4"),a("c740"),a("9769")),u=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Import Accounts",iconClass:"fa fa-address-card-o",href:"/CRM/ImportAccounts",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add Accounts",iconClass:"fa-plus",callbackfunction:"openAddAccount",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"ancCreateDepartment"},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],d=[{fieldName:"Search By Account Name",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["ACC.ACCOUNT_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Search By Account Type",fieldType:"ddl-check",fieldIcon:"fa-file",fieldSearchConditionName:["ACC.ACCOUNT_TYPE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["ACC.STATUS_ID"],isSearch:!1,value:"",listOptions:[]}],h=[{title:"Inactive",callbackfunction:"InActiveClientStatus",href:"javascript:void(0)",icon:"fa fa-times text-danger"},{title:"Active",callbackfunction:"ActiveClientStatus",href:"javascript:void(0)",icon:"fa fa-check text-success",additionalSpan:""},{title:"View",href:"/CRM/ViewAccountDetails/{USER_ID}/CRM/CRM_ACCOUNTS/{ACCOUNT_CODE}",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageAccount?id={USER_ID}",icon:"fa fa-pencil text-success action-icon",additionalSpan:""}];function A(t,e,a){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(Object(c["a"])().mark((function t(e,a,i){var n,s;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,s={},s["moduleName"]=a,s["type"]=i,t.next=6,l["a"].GetLeftSearchStatus(s).then((function(t){var e=t.data;if(null!=e){if("clientAccType"==i)return n.leftSearchFields[1].listOptions=e.DATA,n.LeadStatusList=e.DATA,n.LeadStatusList;if("CRMACCOUNTS"==i)return n.leftSearchFields[2].listOptions=e.DATA,n.LeadOwnerList=e.DATA,n.LeadOwnerList}}));case 6:case"end":return t.stop()}}),t)}))),S.apply(this,arguments)}var p={buttons:u,leftsearchSchema:d,bindleftCommonSearchdropdown:A,listActions:h},f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal d-block my-popups dialog"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[t._t("header",(function(){return[a("h5",{staticClass:"modal-title"},[t._v("Select Account Type")])]})),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("em",{staticClass:"fa fa-times"})])],2),a("div",{staticClass:"modal-body",staticStyle:{"max-height":"70vh",overflow:"auto"},attrs:{id:"dialogAddAccountType"}},[a("div",{staticClass:"container-fluid",attrs:{id:"divMainAccountType"}},[a("form",{staticClass:"row"},[a("div",{staticClass:"col-md-12  p-0"},t._l(t.GetAccountType,(function(e,i){return a("div",{key:i,staticClass:"custom-radio mb-2"},[a("div",{staticClass:"form-check custom-radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.SelectedValue,expression:"SelectedValue"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{"data-resource":e.name,name:"AccountType",type:"radio",id:"rdo_"+e.value},domProps:{value:e.value,checked:t._q(t.SelectedValue,e.value)},on:{change:function(a){t.SelectedValue=e.value}}}),a("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-0 pt-0 dynamic",attrs:{for:"rdo_"+e.value}},[t._v(t._s(e.name))])])])})),0),a("div",{staticClass:"col-md-12 text-right  p-0"},[a("a",{staticClass:"btn btn-primary",attrs:{title:"Next"},on:{click:t.RedirectAccount}},[a("em",{staticClass:"fa fa-forward pr-2"}),t._v("Next")])])])])])])])])])},C=[],m={data:function(){return{GetAccountType:[],SelectedValue:1}},created:function(){this.FetchData()},methods:{RedirectAccount:function(){var t=this.SelectedValue,e="";$.each(this.GetAccountType,(function(a,i){i.value==t&&(e=i.account_code)})),this.$router.push({name:"CRMManageAccount",query:{id:0,AccountId:t,AccountCode:e}})},FetchData:function(){var t=this;l["a"].GetAccountTypes().then((function(e){var a=e.data.DATA;t.GetAccountType=a}))}}},b=m,T=a("2877"),_=Object(T["a"])(b,f,C,!1,null,null,null),D=_.exports,g=a("2aeb"),E=a("1157"),N=a.n(E),O={components:{TgList:g["a"],openaddaccountmodal:D},data:function(){return{isLoading:!1,leftSearchFields:p.leftsearchSchema,listheaderbuttons:p.buttons,AccountsData:null,StatusListForListing:[],Headers:[{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Account Name",DISPLAY_ORDER:1},{COLUMN_NAME:"STATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:null,DISPLAY_ORDER:2},{COLUMN_NAME:"ACCOUNT_TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:null,DISPLAY_ORDER:3},{COLUMN_NAME:"OWNER_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"OWNER_NAME",DISPLAY_ORDER:4},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:null,DISPLAY_ORDER:5},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"select",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:6}],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,LeadStatusList:null,LeadOwnerList:null,Status:"",ModuleType:"",conditionForInstantSearch:"",LoggedinUserId:null,usertype:null,username:null,listActions:p.listActions,showAccountPopup:!1,LegendArray:[],searchCondition:""}},created:function(){var t=Object(r["a"])(Object(c["a"])().mark((function t(){var e;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,this.LoggedinUserId=this.GetUserInfo.ID,this.username=this.GetUserInfo.Name,this.usertype=this.GetUserInfo.UserType,e=this,t.next=7,p.bindleftCommonSearchdropdown(e,"CRM","CRMACCOUNTS");case 7:return t.next=9,p.bindleftCommonSearchdropdown(e,"CRM","clientAccType");case 9:e.getStatuslistForListing("CRM","en"),e.FetchData();case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{UpdateClientStatus:function(t,e,a){var i=this,n="id=".concat(t,"&statusId=").concat(e,"&type=").concat(a);l["a"].UpdateStatusAccount(n).then((function(t){i.ShowAlert(i.$t("Status has been changed successfully."),"success",!0,i.$t("Alert")),i.FetchData()}))},clickEventOfColumn:function(t,e){"CLIENT_NAME"==e.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewAccountDetails/"+t.USER_ID+"/CRM/CRM_ACCOUNTS/"+t.ACCOUNT_CODE})},renderActions:function(t){var e=this,a=[];return e.listActions.forEach((function(i){var n=Object(o["a"])({},i);switch(n.title){case"Active":n.isVisible=(e.isBlank(t.existing_client_id)||e.isBlank(t.project_id))&&("1002"==t.STATUS_ID||"NOT_VERIFIED"==t.STATUS_CODE);break;case"Inactive":n.isVisible=(e.isBlank(t.existing_client_id)||e.isBlank(t.project_id))&&("1001"==t.STATUS_ID||"NOT_VERIFIED"==t.STATUS_CODE);break;case"View":case"Edit":n.isVisible=(e.isBlank(t.existing_client_id)||e.isBlank(t.project_id))&&"Closed"!=t.status_id&&"Cancelled"!=t.status_id;break;default:n.isVisible=!0;break}a.push(n)})),a},actionButtonClick:function(t,e){switch(t){case"ActiveClientStatus":this.UpdateClientStatus(e.USER_ID,1001,"Account");break;case"InActiveClientStatus":this.UpdateClientStatus(e.USER_ID,1002,"Account");break}},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"openAddAccount":this.showAccountPopup=!0;break;case"commonDeleteData":this.commonDeleteData();break;case"setTourGuideSteps":this.setTourGuideSteps(0,this);break}},importAccount:function(){this.$router.push({name:"CRMAccounts"})},commonDeleteData:function(t){var e=this,a="";N()(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=N()(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("CRM_ACCOUNTS"),(function(){var t={ids:a,moduleName:"CRM",subModuleCode:"CRM_ACCOUNTS"},i=JSON.stringify(t);l["a"].CommonDeleteData(i).then((function(t){var a="";200==t.status?(N()(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),a=e.ShowAlert(e.$t("DeletedSuccess",[e.$t("CRM_ACCOUNTS")]),"success",!0,e.$t("Alert")),N()("#DeleteMultiple").addClass("disabled"),e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):a=e.ShowAlert(e.$t("DeletedError",[e.$t("CRM_ACCOUNTS")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"warning","failure",!0,e.$t("Alert"))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},openFilterPopUp:function(t){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},ManageView:function(){this.ShowManageView=!0,setTimeout((function(){N()("#modalManageView").modal("show"),setTimeout((function(){SetBootstraptoolTip()}),200)}),1e3)},sortdata:function(t){var e="sort tb_headerSortDown";switch(t){case"CLIENT_NAME":t="ACCOUNT_NAME";break;case"STATE":t="TStat.name";break}this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),N()("#"+t).attr("class",e)},getRequestParams:function(t,e,a,i){var n={};return t&&(n["pageNum"]=t),a&&(n["sortBy"]=a),i&&(n["sortExp"]=i),e&&(n["pageSize"]=e),n},FilterData:function(t,e,a,i,n,o){this.pageNum=t,this.pageSize=e,this.sortBy=a,this.sortExp=i,this.searchCondition=n,null!=Object(s["a"])(o)&&this.appliedFilter.push(o),this.FetchData()},FetchData:function(){var t=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged),e=this;this.isLoading=!0,t.pageSize=e.PageSize,t.pageNum=e.PageNumber,t.searchCondition=e.searchCondition,e.PageNumber?t.pageNum=e.PageNumber:e.PageNumber=t.pageNum=1,t.sortBy=e.SortBy,t.sortExp=e.SortExp;var a="";if(this.isBlank(this.searchCondition)||(a+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(a+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=a){t.searchCondition=a;e.listheaderbuttons.findIndex((function(t){return"removeFilter"===t.callbackfunction})),e.listheaderbuttons.findIndex((function(t){return"openFilterPopUp"===t.callbackfunction}))}l["a"].AccountList(t).then((function(t){e.isLoading=!1,e.Headers.forEach((function(t){t.settings=null,"CLIENT_NAME"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn,formatter:e.columnDataFormatter}),"STATUS_ID"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})})),""!=t.data&&null!=t.data&&t.data.data.length>0?(e.AccountsData=t.data.data,e.AccountsData.forEach((function(t){t.rowDetailsUrl="",""==t.rowDetailsUrl&&(t.rowDetailsUrl="/CRM/ViewAccountDetails/"+t.USER_ID+"/CRM/CRM_ACCOUNTS/"+t.ACCOUNT_CODE)})),e.TotalRecords=t.data.data[0].total_records,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.AccountsData=[],e.TotalRecords=0)})),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)},getStatuslistForListing:function(t,e){var a=this,i="langCode="+e+"&statusType="+t+"&hasglobal=true";l["a"].statusdropdown(i).then((function(t){if("Success"==t.data.status){var e=t.data.result;a.StatusListForListing=e.data}}))},openAdditionalOwnerpopup:function(){this.showAdditionalOwnerPopup=!0}},updated:function(){this.BindActionButtonEvent()}},v=O,w=Object(T["a"])(v,i,n,!1,null,null,null);e["default"]=w.exports}}]);
//# sourceMappingURL=CRMAccounts.js.map