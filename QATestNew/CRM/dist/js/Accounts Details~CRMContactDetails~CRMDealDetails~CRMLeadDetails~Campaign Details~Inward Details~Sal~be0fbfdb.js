(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Accounts Details~CRMContactDetails~CRMDealDetails~CRMLeadDetails~Campaign Details~Inward Details~Sal~be0fbfdb"],{"6c06":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v(e._s(e.header))]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.valid,l=t.errors;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Subject,expression:"Subject"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"Subject",name:"Subject",maxlength:"200",type:"text"},domProps:{value:e.Subject},on:{input:function(t){t.target.composing||(e.Subject=t.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Subject"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUp"))+" "+e._s(e.$t("ScheduleDate"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"due date",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{mode:"dateTime","min-date":new Date,"minute-increment":5},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.inputValue,i=t.inputEvents,r=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":s[0]},domProps:{value:l}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return r()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.duedate,callback:function(t){e.duedate=t},expression:"duedate"}}),s[0]?a("span",{staticClass:"invalid-feedback d-block"},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Priority"))+":")]),a("Field",{attrs:{name:"priority",rules:{required:!1}}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.priorityValue,expression:"priorityValue"}],staticClass:"form-control",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.priorityValue=t.target.multiple?a:a[0]},e.getSelectedValue]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectPriorityLevel"))+" ")]),e._l(e.priority,(function(t,s){return a("option",{key:s,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)])],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left",class:{"d-none":e.enableReminder}},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Default"))+" "+e._s(e.$t("Reminder"))+":")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.DefaultReminder,expression:"DefaultReminder"}],staticClass:"form-control disabled",attrs:{id:"DefaultReminder",name:"DefaultReminder",value:"",maxlength:"200",type:"text"},domProps:{value:e.DefaultReminder},on:{input:function(t){t.target.composing||(e.DefaultReminder=t.target.value)}}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("OverrideDefault"))+" "+e._s(e.$t("Reminder"))+":")]),a("div",{staticClass:"Col-4"},[a("label",{staticClass:"switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.enableReminder,expression:"enableReminder"}],staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox"},domProps:{value:e.enableReminder,checked:Array.isArray(e.enableReminder)?e._i(e.enableReminder,e.enableReminder)>-1:e.enableReminder},on:{change:function(t){var a=e.enableReminder,s=t.target,l=!!s.checked;if(Array.isArray(a)){var i=e.enableReminder,r=e._i(a,i);s.checked?r<0&&(e.enableReminder=a.concat([i])):r>-1&&(e.enableReminder=a.slice(0,r).concat(a.slice(r+1)))}else e.enableReminder=l}}}),a("span",{staticClass:"slider round"},[a("span",{staticClass:"slider-yes"},[e._v("Yes")]),a("span",{staticClass:"slider-no"},[e._v("NO")])])])])])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("Duration"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationValue,expression:"selectedDurationValue"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"duration"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationValue=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationValues,(function(t,s){return a("option",{key:s,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationReq small",class:{"d-none":!e.enableReminder},attrs:{id:"DurationReq"}})])]),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",{class:{"d-none":!e.enableReminder}},[e._v(e._s(e.$t("SelectType"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedDurationType,expression:"selectedDurationType"}],staticClass:"form-control",class:{"d-none":!e.enableReminder},staticStyle:{"max-width":"100%"},attrs:{id:"durationType"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedDurationType=t.target.multiple?a:a[0]},e.getValidate]}},[a("option",{attrs:{value:""}},[e._v("Select")]),e._l(e.reminderDurationTypes,(function(t,s){return a("option",{key:s,domProps:{value:t,innerHTML:e._s(t)}})}))],2),a("span",{staticClass:"text-danger DurationTypeReq small",class:{"d-none":!e.enableReminder}})])]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("FollowUpCRM"))+" "+e._s(e.$t("Message"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Message",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Message,expression:"Message"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"Message",name:"Message",maxlength:1e3,rows:"5"},domProps:{value:e.Message},on:{input:function(t){t.target.composing||(e.Message=t.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback",attrs:{name:"Message"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("button",{staticClass:"btn btn-success save-btn mr-1",attrs:{type:"button"},on:{click:function(t){return e.saveTask(s,l)}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Save"))+" ")]),a("button",{staticClass:"btn btn-danger delete-btn",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-close pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Cancel"))+" ")])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])])])]}}])})],1)])])])],1)},l=[],i=a("c7eb"),r=a("1da1"),o=(a("ac1f"),a("5319"),a("d3b7"),a("3ca3"),a("ddb0"),a("9861"),a("841c"),a("e9c4"),a("9769")),n={props:{modulename:{type:String,required:!0},modalFollowUpItem:null,submodulecode:{type:String,required:!0},sourceid:{Type:String,required:!0}},data:function(){return{isLoading:!1,currentDate:new Date,duedate:new Date,Subject:"",priority:[],Message:"",priorityValue:"",activitySourceID:0,modal:null,isView:!1,popover:{visibility:"click"},optionsMindate:{format:"MMM dd yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())},FollowUpIdForEdit:0,reminderDurationValues:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60"],reminderDurationTypes:["Minutes","Hours","Days"],enableReminder:!1,selectedDurationType:"",selectedDurationValue:"",DefaultReminder:"",header:this.$t("Add")+" "+this.$t("FollowUp")}},created:function(){this.activitySourceID=this.sourceid,this.GetPriority(),this.GetDefaultReminder(),this.FollowUpIdForEdit=0,this.modalFollowUpItem&&this.FetchEventViewData(this.modalFollowUpItem.followup_notification_id),this.optionsMindate.minDate=new Date(Date.now())},methods:{FetchEventViewData:function(e){var t=this;t.FollowUpIdForEdit=0,t.optionsMindate.minDate=!1;var a="id="+e+"&refId="+t.sourceid+"&subModuleCode="+t.modulename+"&moduleCode="+t.submodulecode;o["a"].updateActivityData(a).then((function(a){if(t.FollowUpIdForEdit=e,t.header=t.$t("Edit")+" "+t.$t("FollowUp"),null!=a.data){var s=a.data.data;t.duedate=t.$options.filters.formatDate(s[0].followUpDate),t.Message=s[0].followup_notification_message,t.Subject=s[0].followup_notification_subject,t.priorityValue=null!=s[0].priority_lavel&&0!=s[0].priority_lavel?s[0].priority_lavel:"",t.optionsMindate.minDate=new Date(Date.now());var l=s[0].reminder_duration;0!=l&&l<60?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Minutes",t.selectedDurationValue=l):0!=l&&(60==l||l<1440)?($(".rdoticketfor").trigger("click"),t.selectedDurationType="Hours",t.selectedDurationValue=parseInt(l/60)):0!=l&&l>=1440&&($(".rdoticketfor").trigger("click"),t.selectedDurationType="Days",t.selectedDurationValue=parseInt(l/1440))}}))},GetPriority:function(){var e=this,t="id=&moduleName="+this.submodulecode+"&type=PRIORITY";o["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.priority=a.DATA,e.priority}))},getSelectedValue:function(e){this.priorityValue=e.target.value},formatDate:function(e){if(e)try{var t=Globalize.culture().calendar.patterns.t;t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format("MM-dd-yyyy")}catch(s){}},getValidate:function(){var e=$(".rdoticketfor").is(":checked")?"yes":"no",t=$("#duration").val(),a=$("#durationType").val();"yes"!=e||"0"!=t&&""!=t?$(".DurationReq").html(""):$(".DurationReq").html("Duration Is Required."),"yes"==e&&""==a?$(".DurationTypeReq").html("Duration Type Is Required."):$(".DurationTypeReq").html("")},saveTask:function(e,t){var a=this;this.$refs.form.validate().then((function(e){var t=new URLSearchParams(window.location.search),s=t.get("reqfrom");null==s&&(s=window.location.pathname.indexOf("Listing")>-1||window.location.pathname.indexOf("Index")>-1?1:0);var l=parseInt(s)||0,i=$(".rdoticketfor").is(":checked")?"yes":"no",r=$("#duration").val(),n=$("#durationType").val(),c=0,d="";"yes"!=i||"0"!=r&&""!=r?$(".DurationReq").html(""):(d="no",$(".DurationReq").html("Duration Is Required.")),"yes"==i&&""==n?(d="no",$(".DurationTypeReq").html("Duration Type Is Required.")):$(".DurationTypeReq").html("");var u=new Date(a.duedate),m=new Date,p=u-m,v=Math.floor(p/1e3/60);if("yes"==i){if("Minutes"==n?c=r:"Hours"==n?c=60*r:"Days"==n&&(c=24*r*60),v<=c||v<=0)return a.ShowAlert(a.$t("InvalidReminderDuration"),"failure",!0,a.$t("Alert")),!1}else if(c=a.DefaultReminder.value,v<=c||v<=0)return a.ShowAlert(a.$t("InvalidReminderDate"),"failure",!0,a.$t("Alert")),!1;if(i&&0==d.length){var f={sourceId:a.activitySourceID,moduleName:a.modulename,subModuleCode:a.submodulecode,subjecttext:a.Subject,dueDate:a.duedate,priorityLavel:a.priorityValue,messagetext:a.Message,reminderduration:c,activityType:"FollowUp",activityId:a.FollowUpIdForEdit},g=JSON.stringify(f);e&&(a.isLoading=!0,o["a"].Addtask(g).then((function(e){a.isLoading=!1,"Success"==e.data[0].Status?(f.activityId>0?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("FollowUp")]),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.showAddTaskModal=!1,a.$emit("close"),l>0?a.$parent.loadFollowUpData(null,a.sourceid):a.$parent.loadData("activities")):"Exist"==e.data[0].Status&&a.ShowAlert(a.$t("AlreadyExist",[a.$t("FollowUp")]),"warning",!0,a.$t("Alert"))}))),a.isLoading=!1}}))},GetDefaultReminder:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var a;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,a.DefaultReminder="",t.next=4,o["a"].GetConfigurationValueForCompanyByKey("key=ReminderDuration").then((function(e){a.DefaultReminder=e.data}));case 4:parseInt(a.DefaultReminder)>60&&parseInt(a.DefaultReminder)<=1440?a.DefaultReminder=parseInt(a.DefaultReminder/60)+" Hours":parseInt(a.DefaultReminder)>1440?a.DefaultReminder=parseInt(a.DefaultReminder/1440)+" Days":a.DefaultReminder=a.DefaultReminder+" Minutes";case 5:case"end":return t.stop()}}),t)})))()}}},c=n,d=a("2877"),u=Object(d["a"])(c,s,l,!1,null,null,null);t["a"]=u.exports},"702f":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[e._v(" "+e._s(e.$t("AddTask"))+" ")]})),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closePopup()}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row form-head",staticStyle:{display:"none"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4 float-right p-0"},[a("div",{staticClass:"userguide-box userguide_curve"},[e._m(0),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"user-guide collapse",attrs:{id:"user-guidepriority"}},[e._v(" "+e._s(e.$t("Filltheformtoaddtask"))+" "),a("br"),a("br")])])])])]),a("Form",{ref:"form"},[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(" "+e._s(e.$t("Task"))+" "+e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Subject",rules:{required:!0},label:"Subject"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,l=t.touched,i=t.invalid;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Subject,expression:"Subject"}],class:{"form-control":!0,"is-invalid":l&&i},attrs:{id:"Subject",name:"Subject",maxlength:"200",type:"text"},domProps:{value:e.Subject},on:{input:function(t){t.target.composing||(e.Subject=t.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Subject"}},[e._v(e._s(s[0]))])]}}])})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Task"))+" "+e._s(e.$t("ScheduleDate"))+":")]),a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"input-group",attrs:{mode:"dateTime","minute-increment":5,"min-date":e.getMinDate()},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.inputValue,l=t.inputEvents,i=t.togglePopover;return[a("input",e._g({staticClass:"form-control",domProps:{value:s}},l)),a("div",{staticClass:"input-group-append",on:{click:function(e){return i()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}]),model:{value:e.duedate,callback:function(t){e.duedate=t},expression:"duedate"}})],1)])]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Priority"))+":")]),a("Field",{attrs:{name:"priorityValue",rules:{required:!1},label:"priorityValue"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.priorityValue,expression:"priorityValue"}],staticClass:"form-control",attrs:{id:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.priorityValue=t.target.multiple?a:a[0]},e.getSelectedValue]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectPriorityLevel")))]),e._l(e.priority,(function(t,s){return a("option",{key:s,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2)])],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Message"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Message",rules:{required:!0},label:"Message"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors,l=t.touched,i=t.invalid;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Message,expression:"Message"}],class:{"form-control":!0,"is-invalid":l&&i},attrs:{maxlength:"1000",name:"Message",rows:"5"},domProps:{value:e.Message},on:{input:function(t){t.target.composing||(e.Message=t.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Message"}},[e._v(e._s(s[0]))])]}}])})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success save-btn mr-1",attrs:{href:"javascript:;"},on:{click:function(t){return e.saveTask()}}},[a("em",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Save")))]),a("a",{staticClass:"btn btn-danger delete-btn",on:{click:function(t){return e.closePopup()}}},[a("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])])])])],1)])])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"userguide-btn collapsed",attrs:{"data-toggle":"collapse",href:"#user-guidepriority","aria-expanded":"false","aria-controls":"search-content"}},[a("em",{staticClass:"fa"}),a("span",[e._v("@Resources.UserGuide")])])}],i=(a("ac1f"),a("5319"),a("e9c4"),a("99af"),a("9769")),r={props:{modalTaskItem:null},data:function(){return{isLoading:!1,id:null,duedate:new Date,Subject:"",priority:[],Message:"",priorityValue:"",modal:null,isView:!1,popover:{visibility:"click"},optionsMindate:{format:"MMM dd yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}}},created:function(){this.modal=this.modalTaskItem,null!=this.modal&&(this.FetchTaskViewData(this.modal.followup_notification_id),this.isView=!0),this.GetPriority()},methods:{GetPriority:function(){var e=this,t="id=&moduleName=".concat(e.$route.params.moduleName,"&type=PRIORITY");i["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.priority=a.DATA,e.priority}))},getSelectedValue:function(e){this.priorityValue=e.target.value},formatDate:function(e){if(e)return moment(String(e),"YYYY-MM-DD").format(String(Globalize.culture().calendar.patterns.d).toUpperCase())},formatDateTime:function(e){if(e)try{var t=Globalize.culture().calendar.patterns.t;t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(t))}catch(s){t=Globalize.culture().calendar.patterns.t;return t=String(t).replace("t","a").replace("t",""),moment(String(e)).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(t))}},closePopup:function(){this.$emit("close")},saveTask:function(){var e=this,t=this;this.$refs.form.validate().then((function(a){if(a){e.isLoading=!0;var s={sourceId:t.$route.params.id,moduleName:t.$route.params.moduleName,subModuleCode:t.$route.params.subModuleCode,subjecttext:t.Subject,dueDate:t.duedate,priorityLavel:t.priorityValue,messagetext:t.Message,activityId:null==t.modal?0:t.modal.followup_notification_id,activityType:"Task"},l=t.$parent.expirydate;if(null!=l){var r=new Date(l),o=new Date(t.duedate);if(o>r)return t.ShowAlert(t.$t("Schedule date can not be greater than expected close date."),"warning",!0,t.$t("Alert")),t.duedate="",!1}var n=JSON.stringify(s);i["a"].Addtask(n).then((function(e){t.isLoading=!1,"Success"==e.data[0].Status?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("Task")]),"success",!0,t.$t("Alert")),t.duedate="",t.Subject="",t.priority="",t.Message="",t.showAddTaskModal=!1,t.$emit("close"),t.$parent.loadData("activities")):t.ShowAlert(t.$t("AlreadyExists",[t.$t("Task")]),"warning",!0,t.$t("Alert"))}))}}))},FetchTaskViewData:function(e){var t=this;t.optionsMindate.minDate=!1;var a="id=".concat(e,"&refId=").concat(t.$route.params.id,"&subModuleCode=").concat(t.$route.params.subModuleCode,"&moduleCode=").concat(t.$route.params.moduleName);i["a"].updateActivityData(a).then((function(e){if(null!=e.data){var a=e.data.data;t.duedate=a[0].followUpDate,t.Message=a[0].followup_notification_message,t.Subject=a[0].followup_notification_subject,t.priorityValue=a[0].priority_lavel;var s={};s["Message"]=t.Message,s["Subject"]=t.Subject,s["priorityValue"]=t.priorityValue}}))}}},o=r,n=a("2877"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["a"]=c.exports},a672:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal d-block my-popups dialog"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[e._t("header",(function(){return[a("h5",[e._v(e._s(e.$t("ScheduleCall")))])]})),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row form-head",staticStyle:{display:"none"}},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-4 float-right p-0"},[a("div",{staticClass:"userguide-box userguide_curve"},[e._m(0),a("div",{staticClass:"clearfix"}),a("div",{staticClass:"user-guide collapse",attrs:{id:"user-guidepriority"}},[e._v(" "+e._s(e.$t("FillFormtoaddScheduleCall"))+" "),a("br"),a("br")])])])])]),a("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var s=t.valid,l=t.errors;return[a("div",{staticClass:"d-flex flex-wrap"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("ContactName"))+" :"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Contact Name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.UserValue,expression:"UserValue"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{name:"UserValue"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.UserValue=t.target.multiple?a:a[0]},e.getSelectedValue]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectContact"))+" ")]),e._l(e.Users,(function(t){return a("option",{attrs:{Key:t},domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])}))],2),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Contact Name"}},[e._v(e._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Notification"))+" "+e._s(e.$t("Schedule"))+" :"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"Schedule",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"minute-increment":5,mode:"dateTime"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.inputValue,i=t.inputEvents,r=t.togglePopover;return[a("input",e._g({class:{"form-control":!0,"is-invalid":s[0]},domProps:{value:l}},i)),a("div",{staticClass:"input-group-append",on:{click:function(e){return r()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:e.callScheduleTime,callback:function(t){e.callScheduleTime=t},expression:"callScheduleTime"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Schedule"}},[e._v(e._s(s[0]))])]}}],null,!0)})],1)])]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("Subject"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Subject",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.Subject,expression:"Subject"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"Subject",name:"Subject",maxlength:"200",type:"text"},domProps:{value:e.Subject},on:{input:function(t){t.target.composing||(e.Subject=t.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Subject"}},[e._v(e._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.$t("callPurpose"))+":"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Call Purpose",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.callPurpose,expression:"callPurpose"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{id:"callPurpose",name:"callPurpose",maxlength:"200",type:"text"},domProps:{value:e.callPurpose},on:{input:function(t){t.target.composing||(e.callPurpose=t.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Call Purpose"}},[e._v(e._s(s[0]))])]}}],null,!0)})],1)]),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Description:"),a("span",{staticClass:"text-danger"},[e._v("*")])]),a("Field",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.errors;return[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Description,expression:"Description"}],class:{"form-control":!0,"is-invalid":s[0]},attrs:{maxlength:"1000",name:"Description",rows:"5"},domProps:{value:e.Description},on:{input:function(t){t.target.composing||(e.Description=t.target.value)}}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(s[0]))])]}}],null,!0)})],1)])]),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success save-btn mr-1",attrs:{href:"javascript:;",title:"",id:"anctransferloaddata"},on:{click:function(t){return e.SaveScheduleCall(s,l)}}},[a("em",{staticClass:"fa fa-save pr-2"}),e._v(e._s(e.$t("Save")))]),a("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[a("em",{staticClass:"fa fa-times"}),e._v(" "+e._s(e.$t("Cancel")))])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[e._v(" "+e._s(e.$t("MandatoryString"))+" ")])])])])])])]}}])})],1)])])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"userguide-btn collapsed",attrs:{"data-toggle":"collapse",href:"#user-guidepriority","aria-expanded":"false","aria-controls":"search-content"}},[a("em",{staticClass:"fa"}),a("span",[e._v("@Resources.UserGuide")])])}],i=(a("ac1f"),a("5319"),a("e9c4"),a("9769")),r={props:{modalCallItem:null},data:function(){return{isLoading:!1,contactName:"",Subject:"",callPurpose:"",relatedTo:"",callScheduleTime:new Date,Description:"",Users:[],UserValue:"",modal:null,isView:!1,popover:{visibility:"click"},optionsMindate:{format:"MMM dd yyyy",useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:new Date(Date.now())}}},created:function(){this.modal=this.modalCallItem,null!=this.modal&&(this.FetchCallViewData(this.modal.followup_notification_id),this.isView=!0),this.GetUsers()},methods:{GetUsers:function(){var e=this,t="id=&moduleName=".concat(e.$route.params.moduleName,"&type=USERS");i["a"].getLeaOwnerBySearch(t).then((function(t){var a=t.data;if(null!=a)return e.Users=a.DATA,e.Users}))},getSelectedValue:function(e){this.UserValue=e.target.value},formatDate:function(e){if(e){var t="h:mm A";try{t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format(String("MM-dd-yyyy").toUpperCase()+" "+String(t))}catch(s){return t="h:mm A",t=String(t).replace("t","a").replace("t",""),moment(String(e)).format(String("MM-dd-yyyy").toUpperCase()+" "+String(t))}}},SaveScheduleCall:function(e){var t=this,a=this;this.$refs.form.validate().then((function(e){if(e){t.isLoading=!0,$("#Fields_mandatory").hide();var s={sourceId:a.$route.params.id,moduleName:a.$route.params.moduleName,subModuleCode:a.$route.params.subModuleCode,contactid:a.UserValue,subjectText:a.Subject,callpurpose:a.callPurpose,callScheduletime:a.callScheduleTime,description:a.Description,activityId:null==a.modal?0:a.modal.followup_notification_id,activityType:"Call"},l=a.$parent.expirydate;if(null!=l){var r=new Date(l),o=new Date(a.callScheduleTime);if(o>r)return a.ShowAlert(a.$t("Schedule date can not be greater than expected close date."),"warning",!0,a.$t("Alert")),a.callScheduleTime="",!1}var n=JSON.stringify(s);i["a"].SaveScheduleCall(n).then((function(e){"Success"==e.data[0].Status&&(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Call")]),"success",!0,a.$t("Alert")),a.duedate="",a.Subject="",a.priority="",a.Message="",a.showAddTaskModal=!1,a.$emit("close"),a.$parent.loadData("activities")),a.isLoading=!1}))}}))},FetchCallViewData:function(e){var t=this,a="id="+e+"&refId="+this.$route.params.id+"&subModuleCode="+this.$route.params.subModuleCode+"&moduleCode="+this.$route.params.moduleName;i["a"].updateActivityData(a).then((function(e){if(null!=e.data){var a=e.data.data;t.UserValue=a[0].contact_person,t.callScheduleTime=a[0].followUpDate,t.callPurpose=a[0].call_purpose,t.Subject=a[0].followup_notification_subject,t.Description=a[0].followup_notification_message;var s={};s["UserValue"]=t.UserValue,s["callPurpose"]=t.callPurpose,s["Subject"]=t.Subject,s["Description"]=t.Description}}))}}},o=r,n=a("2877"),c=Object(n["a"])(o,s,l,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=Accounts Details~CRMContactDetails~CRMDealDetails~CRMLeadDetails~Campaign Details~Inward Details~Sal~be0fbfdb.js.map