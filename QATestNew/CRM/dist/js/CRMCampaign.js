(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CRMCampaign"],{"1d4a":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,".shortcuts-menu.man_camp li{max-width:33%;padding:10px}.shortcuts-menu.man_camp li.active a.short-menu-item{background:#00b298;color:#fff;border-color:#00b298}.shortcuts-menu.man_camp li.active a span.left-icon-m{background-color:#00a68e}.shortcuts-menu.man_camp li.active a span.left-icon-m i{color:#fff}.shortcuts-menu.man_camp li:hover a.short-menu-item{background:#00b298!important;color:#fff!important;border-color:#00b298!important}.shortcuts-menu li:hover .short-item-name{color:#fff!important}.shortcuts-menu.man_camp li:hover a span.left-icon-m{background-color:#00a68e}.shortcuts-menu.man_camp li:hover a span.left-icon-m i{color:#fff}.shortcuts-menu.man_camp li a span.left-icon-m i{color:#00b298;font-size:32px}.btn_template{background:#ebfffc;color:#78b9af;border:1px solid #99e6da;font-size:20px}.btn_template:hover{border:1px solid #99e6da}.btn_template:hover,.defaultpic_control .btn-select{background:#00b298;color:#fff}.defaultpic_control .btn-view{background:#30b3f1;color:#fff}.default_templates .default-tags,.default_templates .default-tags:hover{background:hsla(0,0%,100%,.9)}.default_templates .img-ico.ticket-attachments{min-height:200px;display:flex;justify-content:center;align-items:center;max-height:200px}.shortcuts-menu.man_camp.man_view li.active a.short-menu-item{background:#e5fcff;color:#17a2b8;border-color:#17a2b8}.shortcuts-menu.man_camp.man_view li.active a span.left-icon-m{background-color:#e5fcff}.shortcuts-menu.man_camp.man_view li.active a span.left-icon-m i{color:#17a2b8}.shortcuts-menu.man_camp.man_view li:hover a.short-menu-item{background:#e5fcff!important;color:#17a2b8!important;border-color:#17a2b8!important}.shortcuts-menu.man_camp.man_view li:hover a span.left-icon-m{background-color:#e5fcff}.shortcuts-menu.man_camp.man_view li:hover a span.left-icon-m i{color:#17a2b8}.shortcuts-menu.man_camp.man_view li a span.left-icon-m i{color:#737373;font-size:32px}.shortcuts-menu.man_camp.man_view li a span.left-icon-m{background-color:#fff}.shortcuts-menu.man_camp.man_view li:hover .short-item-name{color:#17a2b8!important}.shortcuts-menu.man_camp.man_view li a.short-menu-item{background-color:#fff}",""]),e.exports=a},"258f":function(e,a,t){var i=t("593f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("499e").default;n("6ec7ab38",i,!0,{sourceMap:!1,shadowMode:!1})},"44c7":function(e,a,t){"use strict";t("5f92")},5579:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("TgList",{attrs:{IsShowAction:"true",ModuleName:"CRM",SubModuleCode:"CRM_CAMPAIGNS",IdentityColumn:"campaign_id",HeaderText:e.$t("Campaign"),ListData:e.CampaignData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,LegendArray:e.LegendArray,IsFilterApplied:!!e.searchCondition,SortExp:e.SortExp,SortBy:e.SortBy,CurrentPageNumber:e.PageNumber},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(a){var i=a.data;return["status_id"==i.column.COLUMN_NAME?[e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?t("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_CAMPAIGNS",dataid:i.row.campaign_id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:i,"data-action":"index",dataselected:i.row.status_id,callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(i.row.status_id,"CRM_CAMPAIGNS")?e._e():t("a",{staticClass:"inactive-disabled"},[t("span",{class:e.getStatusClass(i.row.status_id,"status_id")},[e._v(" "+e._s(i.row[i.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showFilter?t("searchfilter",{attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData},on:{close:function(a){e.showFilter=!1},FilterData:e.FilterData}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showAddEventModal?t("modalfollowupslist",{attrs:{srcId:e.souceID,modulename:"CRM",submodulecode:"CRM_CAMPAIGNS",userid:e.userid},on:{close:e.closeEventViewModal}}):e._e(),e.ShowManageView?t("viewlayout",{directives:[{name:"show",rawName:"v-show",value:e.ShowManageView,expression:"ShowManageView"}],attrs:{submodulecode:"CRM_CAMPAIGNS",modulename:"CRM",callbackfunction:e.FetchData,usertype:e.usertype},on:{close:function(a){e.ShowManageView=!1}}}):e._e(),e.ShowManageCampaignPopup?t("modalManageCampaign",{attrs:{campaignId:e.CampaignId},on:{close:function(a){e.ShowManageCampaignPopup=!1}}}):e._e(),e.isShowManageSchedule?t("modalManageSchedule",{attrs:{campaignId:e.CampaignId,campaignName:e.CampaignName,mailChimpTemplateId:e.MailChimpTemplateId},on:{close:function(a){e.isShowManageSchedule=!1}}}):e._e()],1)},n=[],o=t("53ca"),s=t("5530"),l=t("c7eb"),r=t("1da1"),c=(t("d3b7"),t("159b"),t("c740"),t("e9c4"),t("9769")),u=[{title:"Page Tour",iconClass:"fa fa-road",callbackfunction:"setTourGuideSteps",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Manage View",iconClass:"fa-list-alt",callbackfunction:"ManageView",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add a Campaign",iconClass:"fa-plus",href:"/CRM/ManageCampaign/0/No/CRM/CRM_CAMPAIGNS",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"addCampaign_a"},{title:"ExportToExcel",iconClass:"fa-file-excel-o",callbackfunction:"downloadExceldata",isdisabled:!1,isvisible:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],d=[{fieldName:"Campaign Name",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["CAMPAIGN_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CampaignOwner",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["CAMPAIGN_OWNER"],isSearch:!1,value:"",listOptions:[]},{fieldName:"CampaignType",fieldType:"ddl-check",fieldIcon:"fa-envelope",fieldSearchConditionName:["CAMPAIGN_TYPE"],isSearch:!1,value:"",listOptions:[]}],m=[{title:"View",href:"/CRM/ViewCampaignDetails/{campaign_id}/CRM/CRM_CAMPAIGNS",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"/CRM/ManageCampaign/{campaign_id}/Yes/CRM/CRM_CAMPAIGNS",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Follow-Ups",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-flag text-muted action-icon",additionalSpan:""}];function p(e,a,t){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(Object(l["a"])().mark((function e(a,t,i){var n,o;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a,o={},o["moduleName"]=t,o["type"]=i,e.next=6,c["a"].GetLeftSearchStatus(o).then((function(e){var a=e.data;if(null!=a){if("CAMPAIGN_OWNER_SEARCH"==i)return n.leftSearchFields[1].listOptions=a.DATA,n.LeadStatusList=a.DATA,n.LeadStatusList;"CAMPAIGN_TYPES"==i&&(n.leftSearchFields[2].listOptions=a.DATA)}}));case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var f={buttons:u,listActions:m,leftsearchSchema:d,bindleftCommonSearchdropdown:p},v=t("fc0b"),g=t("cdd5"),b=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closepopup}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageCampaign")))])]),t("div",{staticClass:"border p-3"},[t("dynamic-form",{attrs:{schema:e.FormSchema,buttons:e.buttons},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-CampaignType",fn:function(a){a.data;return[t("ul",{staticClass:"shortcuts-menu pb-3 man_camp",attrs:{id:"divChannelTypes"}},[t("li",{class:1==e.campaignType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickCampaignType(1)}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-envelope"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("Email Campaign")]),t("span",{staticClass:"font-12 float-left"},[e._v("Enhance your engagement today.")])])])]),t("li",{class:2==e.campaignType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickCampaignType(2)}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-bullhorn"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("Social Media Campaign")]),t("span",{staticClass:"font-12 float-left"},[e._v("A place where ideas grow.")])])])]),t("li",{class:3==e.campaignType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickCampaignType(3)}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-comments"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("SMS Campaign")]),t("span",{staticClass:"font-12 float-left"},[e._v("Be the first. To ensure higher sales rate.")])])])])])]}},{key:"tgslot-SelectTemplate",fn:function(a){a.data;return[t("div",{staticClass:"w-100 float-left mt-3"},[t("a",{staticClass:"btn btn-success p-4 d-block btn_template",on:{click:function(a){return e.createTemplate()}}},[t("i",{staticClass:"fa fa-plus mr-2 font-16"}),e._v("Create New Template ")])]),e._v("   "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-2 float-right"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTemplate,expression:"searchTemplate"}],staticClass:"form-control",attrs:{name:"search",placeholder:"Search Template",type:"text"},domProps:{value:e.searchTemplate},on:{keyup:e.onSearch,input:function(a){a.target.composing||(e.searchTemplate=a.target.value)}}})])]),t("div",{staticClass:"row mt-2"},[e._v("   "),t("div",{staticClass:"col-lg-12 mb-3"},[t("h6",[t("span",[e._v("Choose From Templates")])])]),t("div",{staticClass:"listing col-12 p-0"},[t("div",{staticClass:"row custom-box-width default_templates"},e._l(e.displayedTemplates,(function(a,i){return t("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[t("div",{staticClass:"box border positionrelative float-left w-100 ml-2"},[t("div",{staticClass:"default-tags"},[t("div",{staticClass:"defaultpic_control"},[t("span",{staticClass:"w-100 float-left p-2 font-weight-medium text-secondary"},[e._v(e._s(a.TEMPLATE_NAME))]),t("a",{staticClass:"btn btn-select mr-2",attrs:{title:"Select",href:"javascript:;"},on:{click:function(t){return e.Templateclick(a.TEMPLATE_ID)}}},[e._v("Select")]),t("a",{staticClass:"btn btn-view mr-2",attrs:{title:"View",href:"javascript:;"}},[e._v("View")])])]),t("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t("i",{staticClass:"fa fa-file-text-o font-pic-size-28"})])])])})),0)])]),e.showAll?e._e():t("button",{staticClass:"mt-2 float-right",on:{click:function(a){e.showAll=!0}}},[e._v("View All")])]}}])}),t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("span",{staticClass:"mandatory"},[e._v(e._s(e.$t("MandatoryString")))])])])],1)])])],1)])},S=[],C=(t("a9e3"),t("fb6a"),t("ac1f"),t("1276"),t("b0c0"),t("4de4"),t("841c"),t("25f0"),t("a15b"),{props:{campaignId:{type:Number,required:!0}},data:function(){return{StaticObj:{layoutType:"Single",Data:[{astype:"SlotField",label:"",name:"CampaignType",value:"",placeholder:""}]},StaticObj2:{layoutType:"Single",group_name:"SelectTemplate",group_display_name:this.$t("SelectTemplate"),Data:[{astype:"SlotField",name:"SelectTemplate",value:"",placeholder:""}]},buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",value:"Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup,isVisible:!0}],FormSchema:[],campaignOwnerDDL:[],EmailTemplateData:[],SortBy:"",SortExp:"",PageSize:10,PageNumber:1,showAll:!1,search:"",searchTemplate:"",campaignType:1,CampaignData:[],GroupBy:[],isLoading:!1,CampaignId:0,CampaignOwnerData:[],templateId:0,statusId:1001,CampOwner:""}},created:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,e.next=3,a.FetchData();case 3:return e.next=5,a.GetDropDownData();case 5:return e.next=7,a.emailTemplateData();case 7:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),computed:{displayedTemplates:function(){return this.showAll?this.EmailTemplateData:this.EmailTemplateData.slice(0,4)}},methods:{FetchData:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var a,t;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this,a.isLoading=!0,t="id=".concat(a.campaignId,"&moduleName=CRM&subModuleCode=CRM_CAMPAIGNS&langCode=en"),e.next=5,c["a"].getFormLayout(t).then(function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(t){var i;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.isLoading=!1,a.CampaignData=t.data.data,null!=a.CampaignData&&a.CampaignData.length>0&&(i=a.CampaignData[0].group_id,a.GroupBy.push(a.StaticObj),$.each(a.CampaignData,$.proxy(function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(t,n){var o,s,r,c;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("NO"!=n.form_field_visibility){e.next=2;break}return e.abrupt("return");case 2:i=n.group_id,"date"==n.dt_code&&(n.value=""==n.value?null:n.value),"checkbox"==n.dt_code&&(n.select_value=n.value.split(",")),o=$.grep(a.GroupBy,(function(e,a){return e.group_id==i})),0==o.length&&(s=$.grep(a.CampaignData,(function(e,a){return e.group_id==i})),r=[],s.forEach((function(e){if("YES"==e.form_field_visibility){var t={};"TextField"==e.astype&&(t={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(t)),"NumericField"==e.astype&&(t={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(t)),"CustomSelectField"==e.astype&&(a.CampOwner=e.value,t={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,config:{options:[]},validationRules:{required:e.system_is_required}},r.push(t)),"SelectField"==e.astype&&(t={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,config:{options:[]},validationRules:{required:e.system_is_required}},r.push(t)),"TextAreaField"==e.astype&&(t={astype:e.astype,label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(t)),"DatetimeField"==e.astype&&(t={astype:"DateField",label:e.display_name,name:e.name,value:e.value,disabled:!1,validationRules:{required:e.system_is_required}},r.push(t))}})),s.length>0&&(c={group_id:i,layoutType:"double",group_name:s[0].group_name,group_display_name:s[0].group_display_name,Data:r},a.GroupBy.push(c)));case 7:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}())),a.GroupBy.push(a.StaticObj2),a.FormSchema=a.GroupBy);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),GetDropDownData:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var t,i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,i="id=&moduleName=CRM&type=CRM_USERS",a.next=4,c["a"].getDDLData(i+"&search=").then((function(e){var a=[];e.data,""!=e.data&&(a=e.data);var i=[];if(t.CampaignOwnerData=a.DATA,null!=t.CampaignOwnerData){t.CampaignOwnerData.forEach((function(e){i.push({name:e.name,value:e.value})})),t.CampaignOwnerData=i,t.GroupBy.forEach((function(e){"campaign_details"==e.group_name&&(e.Data.filter((function(e){return"campaign_owner"==e.name}))[0].config.options=t.CampaignOwnerData)}));var n=t.CampaignOwnerData.filter((function(e){return e.value==t.CampOwner})),o=[];n.forEach((function(e){o.push({label:e.name,value:e.value})})),t.FormSchema[1].Data[1].value=o}}));case 4:case"end":return a.stop()}}),a)})))()},closepopup:function(){var e=this;e.$parent.CloseManageCampaignPopup()},emailTemplateData:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var t,i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t=e,i="id=0&search="+t.search+"&refId=&subModuleCode=CRM_CAMPAIGNS&sortBy="+t.SortBy+"&sortExp="+t.SortExp+"&pageSize="+t.PageSize+"&pageNumber="+t.PageNumber,c["a"].TemplateListing(i).then((function(e){null==e.data||""==e.data?t.NoRecordForModel=!0:t.EmailTemplateData=e.data.data}));case 3:case"end":return a.stop()}}),a)})))()},onSubmit:function(e){var a=this;e.CampaignType=a.campaignType,e.SelectTemplate=a.templateId,a.isLoading=!0;var t=[],i=a.CampaignData;$.each(i,(function(i,n){"campaign_name"==n.name?n.value=e.campaign_name:"campaign_owner"==n.name?n.value=e.campaign_owner:"campaign_description"==n.name?n.value=e.campaign_description:"campaign_type"==n.name?n.value=a.campaignType:"status_id"==n.name?n.value=a.statusId:"template_id"==n.name&&(n.value=a.templateId.toString());var s="campaign_id"==n.name?a.campaignId:n.value;if("date"==n.dt_code&&(s=n.value),"checkbox"==n.dt_code){var l=n.select_value.filter((function(e){return null!=e&&""!=e}));s=l.join(",")}if("select"==n.dt_code)try{s="object"===Object(o["a"])(s)&&null!==s?s.value:s}catch(c){console.log(c)}var r={field_name:n.name,field_value:s,custom_field_id:n.custom_field_id,CampaignType:n.value};t.push(r)}));var n={data:t},s=JSON.stringify(n);c["a"].PostCampaign(s).then(function(){var t=Object(r["a"])(Object(l["a"])().mark((function t(i){var n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a.isLoading=!1,"1"!=i.data[0].Code){t.next=9;break}return n=a.EmailTemplateData.filter((function(e){return e.TEMPLATE_ID==a.templateId}))[0],t.next=5,a.AddOrUpdateMailChimpTemplate(n.TEMPLATE_ID,n.MAILCHIMP_TEMPLATE_ID,n.TEMPLATE_NAME,n.TEMPLATE_CONTENT);case 5:a.campaignId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Campaign")]),"success",!0,a.$t("Alert")),a.closepopup()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Campaign")]),"success",!0,a.$t("Alert")),a.closepopup(),a.$parent.CampaignId=i.data[0].Value,a.$parent.CampaignName=e.campaign_name,a.$parent.isShowManageSchedule=!0),a.$parent.FetchData(),t.next=10;break;case 9:a.ShowAlert(a.$t("AddedError",[a.$t("Campaign")]),"failure",!0,a.$t("Alert"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},AddOrUpdateMailChimpTemplate:function(e,a,t,i){var n=this;return Object(r["a"])(Object(l["a"])().mark((function o(){var s,u,d;return Object(l["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return s=n,null==a&&(a=0),u={templateId:a,templateName:t,folderId:null,htmlContent:i},d=JSON.stringify(u),o.next=6,c["a"].AddOrUpdateTemplate(d).then(function(){var a=Object(r["a"])(Object(l["a"])().mark((function a(t){var i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(null==t.data){a.next=5;break}return i=t.data.id,s.$parent.MailChimpTemplateId=i,a.next=5,s.AddUpdateMailChimpTemplateId(e,i);case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 6:case"end":return o.stop()}}),o)})))()},AddUpdateMailChimpTemplateId:function(e,a){return Object(r["a"])(Object(l["a"])().mark((function t(){var i,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i={templateId:e,mailChimpTemplateId:a},n=JSON.stringify(i),t.next=4,c["a"].AddUpdateMailChimpTemplateId(n).then((function(e){}));case 4:case"end":return t.stop()}}),t)})))()},onClickCampaignType:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a,i.campaignType=e;case 2:case"end":return t.stop()}}),t)})))()},onSearch:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var t;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t=e,t.search=t.searchTemplate,t.emailTemplateData();case 3:case"end":return a.stop()}}),a)})))()},Templateclick:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a,i.templateId=e;case 2:case"end":return t.stop()}}),t)})))()},createTemplate:function(){return Object(r["a"])(Object(l["a"])().mark((function e(){return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}}),y=C,_=(t("d514"),t("2877")),w=Object(_["a"])(y,b,S,!1,null,null,null),T=w.exports,D=t("e29d"),M=t("2aeb"),k=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("div",{staticClass:"modal my-popups right fade show",staticStyle:{display:"block"},attrs:{role:"dialog"}},[t("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.closepopup}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageCampaign")))])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-SendType",fn:function(a){return[t("ul",{staticClass:"shortcuts-menu pb-3 man_camp man_view",attrs:{id:"ManageCampaignTypes"}},[t("li",{class:"SendNow"==e.SendType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickSendOrSchedule("SendNow")}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-send-o"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("Send Now")]),t("span",{staticClass:"font-12 float-left"},[e._v("Send the email campaign immediately")])])])]),t("li",{class:"Schedule"==e.SendType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickSendOrSchedule("Schedule")}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-calendar-o"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("Schedule")]),t("span",{staticClass:"font-12 float-left"},[e._v("Pick a date and time")])])])]),t("li",{class:"BatchSchedule"==e.SendType?"position-relative active":"position-relative"},[t("a",{staticClass:"short-menu-item",attrs:{href:"javascript:","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip"},on:{click:function(a){return e.onClickSendOrSchedule("BatchSchedule")}}},[t("span",{staticClass:"left-icon-m"},[t("i",{staticClass:"fa fa-users"})]),t("span",{staticClass:"short-item-name"},[t("span",{staticClass:"w-100 float-left"},[e._v("Batch Schedule")]),t("span",{staticClass:"font-12 float-left"},[e._v("Schedule to large groups of contacts in drip mode")])])])])])]}},{key:"tgslot-ScheduleAtTime",fn:function(a){a.data;return[t("div",{staticClass:"input-group"},[t("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.inputValue,n=a.inputEvents,o=a.togglePopover;return[t("input",e._g({class:{"form-control":!0},attrs:{placeholder:"HH:MM"},domProps:{value:i}},n)),t("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-clock-o"})])])]}}],null,!0),model:{value:e.ScheduleAtTime,callback:function(a){e.ScheduleAtTime=a},expression:"ScheduleAtTime"}})],1)]}},{key:"tgslot-BatchStartTime",fn:function(a){a.data;return[t("div",{staticClass:"input-group"},[t("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.inputValue,n=a.inputEvents,o=a.togglePopover;return[t("input",e._g({class:{"form-control":!0},attrs:{placeholder:"Start Time"},domProps:{value:i}},n)),t("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-clock-o"})])])]}}],null,!0),model:{value:e.BatchStartTime,callback:function(a){e.BatchStartTime=a},expression:"BatchStartTime"}})],1)]}},{key:"tgslot-BatchEndTime",fn:function(a){a.data;return[t("div",{staticClass:"input-group"},[t("v-date-picker",{staticClass:"timedate timedate_hs input-group",attrs:{"min-date":e.getMinDate(),"minute-increment":5,mode:"time"},scopedSlots:e._u([{key:"default",fn:function(a){var i=a.inputValue,n=a.inputEvents,o=a.togglePopover;return[t("input",e._g({class:{"form-control":!0},attrs:{placeholder:"End Time"},domProps:{value:i}},n)),t("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-clock-o"})])])]}}],null,!0),model:{value:e.BatchEndTime,callback:function(a){e.BatchEndTime=a},expression:"BatchEndTime"}})],1)]}}])})],1)])])]),e.isShowSMTPModal?t("modaladdsmtp",{attrs:{SendThrough:e.SendThrough,ProfileId:e.ProfileId},on:{close:function(a){e.isShowSMTPModal=!1}}}):e._e()],1)},A=[],F=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"modal d-block my-popups dialog"},[t("div",{staticClass:"modal-dialog"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._t("header",(function(){return[t("h5",[e._v(e._s(e.$t("Emails")))])]})),t("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(a){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-Password",fn:function(a){var i=a.data;return[t("div",{staticClass:"input-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],class:{"form-control w-100":!0,"is-invalid":""!=i.error.length},attrs:{type:"password",name:"Password"},domProps:{value:i.fieldInfo.value},on:{input:function(a){a.target.composing||e.$set(i.fieldInfo,"value",a.target.value)}}}),""!=i.error.length?t("span",{staticClass:"invalid-feedback",attrs:{name:"Password"}},[e._v(e._s(i.error))]):e._e()])]}}])}),t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])],1)])])])},P=[],x={props:{SendThrough:{type:String,required:!0},ProfileId:{type:Number,required:!1}},data:function(){return{FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("SMTPServer"),name:"SMTPServer",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("UserName"),name:"UserName",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SlotField",label:this.$t("Password"),name:"Password",value:"",placeholder:"",validationRules:{required:!0}},{astype:"TextField",label:this.$t("FromEmail"),name:"FromEmail",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SMTPPort"),name:"SMTPPort",value:"",placeholder:"",config:{options:[],showAddIcon:!1}},{astype:"RadioField",label:this.$t("SMTPSecurity"),name:"SMTPSecurity",value:!1,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"true",value:!0},{name:"false",value:!1}],showAddIcon:!1}},{astype:"SelectField",label:this.$t("SMTPType"),name:"SMTPType",value:"",placeholder:"",config:{options:[],showAddIcon:!1}},{astype:"TextField",label:this.$t("FromName"),name:"FromName",value:"",placeholder:"",validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var t;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t=e,!(t.ProfileId>0)){a.next=4;break}return a.next=4,t.GetSMTPProfile(t.ProfileId);case 4:return a.next=6,t.getModuleIdByModuleName();case 6:case"end":return a.stop()}}),a)})))()},methods:{getModuleIdByModuleName:function(){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var t,i;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e,i="moduleName=Email",a.next=4,c["a"].GetModuleIdByModuleName(i).then((function(e){var a=e.data;t.BindDropdownData(a)}));case 4:case"end":return a.stop()}}),a)})))()},BindDropdownData:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=a,n="moduleId=".concat(e,"&IsWizard=false"),t.next=4,c["a"].GetModuleKeys(n).then((function(e){var a=e.data.StorageKeys,t=a.filter((function(e){return"smtpport"==e.CORE_CONFIG_KEY.toLowerCase()}))[0].CORE_CONFIG_OPTIONS.split("^"),n=a.filter((function(e){return"smtptype"==e.CORE_CONFIG_KEY.toLowerCase()}))[0].CORE_CONFIG_OPTIONS.split("^");t.forEach((function(e,a){i.FormSchema[0].Data[4].config.options.push({name:e,value:e})})),n.forEach((function(e,a){i.FormSchema[0].Data[6].config.options.push({name:e,value:e})}))}));case 4:case"end":return t.stop()}}),t)})))()},GetSMTPProfile:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=a,n="profileId=".concat(e),t.next=4,c["a"].GetEmailProfile(n).then((function(e){i.FormSchema[0].Data[0].value=e.data.smtp_server,i.FormSchema[0].Data[1].value=e.data.user_name,i.FormSchema[0].Data[2].value=e.data.password,i.FormSchema[0].Data[3].value=e.data.from_email,i.FormSchema[0].Data[4].value=null==e.data.smtp_port?"":e.data.smtp_port,i.FormSchema[0].Data[5].value=e.data.smtp_security,i.FormSchema[0].Data[6].value=null==e.data.smtp_type?"":e.data.smtp_type,i.FormSchema[0].Data[7].value=e.data.from_email}));case 4:case"end":return t.stop()}}),t)})))()},onSubmit:function(e,a){var t=this,i={smtp_server:e.SMTPServer,user_name:e.UserName,password:e.Password,from_email:e.FromEmail,smtp_port:e.SMTPPort,smtp_security:e.SMTPSecurity,smtp_type:e.SMTPType,from_name:e.FromName,send_through:t.SendThrough,profile_id:t.ProfileId},n=JSON.stringify(i);c["a"].SaveEmailSetting(n).then((function(e){"INSERTED"==e.data?(t.$parent.FillProfileDropdown(t.SendThrough),t.ShowAlert(t.$t("AddedSuccess",[t.$t("EmailSetting")]),"success",!0,t.$t("Alert")),t.$emit("close")):"UPDATED"==e.data?(t.$parent.FillProfileDropdown(t.SendThrough),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("EmailSetting")]),"success",!0,t.$t("Alert")),t.$emit("close")):t.ShowAlert(t.$t("AddedError",[t.$t("EmailSetting")]),"danger",!0,t.$t("Alert"))}))}}},O=x,N=Object(_["a"])(O,F,P,!1,null,null,null),E=N.exports,I={components:{modaladdsmtp:E},props:{campaignId:{type:Number,required:!0},campaignName:{type:String,required:!0},mailChimpTemplateId:{type:Number,required:!0}},data:function(){return{Contactlist:[],timezone:[],isShowSMTPModal:!1,Grouplist:[],FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",name:"SendType",value:"",placeholder:""}]},{layoutType:"double",Data:[{astype:"SlotField",name:"Schedule",value:"",placeholder:"",visibility:!1}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Batch",value:"",placeholder:"",visibility:!1}]},{layoutType:"double",group_name:this.$t("ScheduleAt"),group_display_name:this.$t("ScheduleAt"),Data:[{astype:"DateField",label:"Schedule Date",name:"ScheduleAtDate",value:"",placeholder:"Enter Start Date",config:{options:[]},validationRules:{required:!0},visibility:!1},{astype:"SlotField",label:this.$t("ScheduleTime"),name:"ScheduleAtTime",value:"",placeholder:"Time",config:{options:[]},validationRules:{required:!0},visibility:!1}]},{layoutType:"triple",group_name:this.$t("NoofRecipients"),group_display_name:this.$t("NoofRecipients"),Data:[{astype:"DateField",label:this.$t("EventStartDate"),name:"BatchStartDate",value:"",placeholder:"Enter Start Date",config:{options:[]},validationRules:{required:!0},visibility:!1},{astype:"SlotField",label:this.$t("Specifystartandendtime"),name:"BatchStartTime",value:"",placeholder:"Time",config:{options:[]},validationRules:{required:!1},visibility:!1},{astype:"SlotField",label:"",name:"BatchEndTime",value:"",placeholder:"Time",config:{options:[]},validationRules:{required:!1},visibility:!1}]},{layoutType:"four",Data:[{astype:"NumericField",label:this.$t("BatchQuantity"),name:"BatchQuantity",value:"",placeholder:"Batch Quantity",config:{options:[]},validationRules:{required:!1},visibility:!1},{astype:"SelectField",label:"",name:"BatchType",value:"",placeholder:"",config:{options:[{value:"Days",name:"Days"},{value:"Hours",name:"Hours"},{value:"Minutes",name:"Minutes"},{value:"Seconds",name:"Seconds"}]},validationRules:{required:!1},visibility:!1},{astype:"NumericField",label:this.$t("RepeatAfter"),name:"RepeatAfter",value:"",placeholder:"Repeat After",config:{options:[]},validationRules:{required:!1},visibility:!1}]},{layoutType:"single",Data:[{astype:"CheckBoxField",label:this.$t("SelectDay"),name:"BatchDays",value:["1","2","3","4","5","6","7"],config:{options:[{value:"1",name:"Mon"},{value:"2",name:"Tue"},{value:"3",name:"Wed"},{value:"4",name:"Thu"},{value:"5",name:"Fri"},{value:"6",name:"Sat"},{value:"7",name:"Sun"}]},validationRules:{required:!1},visibility:!1}]},{group_name:"Sender Details",group_display_name:this.$t("Sender Details"),layoutType:"double",Data:[{astype:"SelectField",label:this.$t("SendThrough"),name:"SendThrough",value:"",placeholder:"Select",config:{options:[{name:"MailChimp",value:"MailChimp"},{name:"SendGrid",value:"SendGrid"},{name:"SMTP",value:"SMTP"}],onChange:this.onChangeSendThrough},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SendProfile"),name:"SendProfile",value:"",placeholder:"Select",config:{options:[],onChange:this.onChangeProfile,showAddIcon:!0,onAddButtonClick:this.AddSMTPCredentials},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"CheckBoxField",label:this.$t("TrackEmail"),name:"TrackEmail",value:"",config:{options:[{name:"",value:!0}]},validationRules:{required:!1}}]},{group_name:"Enter Email Details",group_display_name:this.$t("Enter Email Details"),layoutType:"double",Data:[{astype:"TextField",label:this.$t("SenderEmail"),name:"SenderEmail",value:"",placeholder:"",config:{},validationRules:{required:!0}},{astype:"TextField",label:this.$t("SenderName"),name:"SenderName",value:"",placeholder:"",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Subjectline"),name:"Subjectline",value:"",placeholder:"Subject line",config:{},validationRules:{required:!0}},{astype:"TextField",label:this.$t("PreviewText"),name:"PreviewText",value:"",placeholder:"(Optional)",config:{},validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"RadioField",label:this.$t(""),name:"Recipient",value:"1",placeholder:"",config:{options:[{value:"1",name:"Choose Contacts"},{value:"2",name:"Send to Smart List"}],onChange:this.onclickContactorGroup},visibility:!0,validationRules:{required:!1}}]},{layoutType:"double",Data:[{astype:"MultiSelectField",label:this.$t("Contact"),name:"Contact",value:"",mode:"tag",config:{options:[]},visibility:!0,validationRules:{required:!0}},{astype:"MultiSelectField",label:this.$t("ContactGroup"),name:"ContactGroup",value:"",mode:"tag",config:{options:[]},visibility:!1,validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"submit",class:"btn btn-primary",text:"<i class='fa fa-envelope pr-2'></i>Schedule"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel"}],SendThrough:"",ProfileId:0,SendType:"SendNow",ScheduleAtTime:null,BatchStartTime:null,BatchEndTime:null}},created:function(){var e=this;e.FormSchema[3].group_display_name="",e.FormSchema[4].group_display_name="",e.FormSchema[3].group_name="",e.FormSchema[4].group_name="",e.GetContacts()},methods:{closepopup:function(){var e=this;e.$parent.closeManageCampaign()},GetContacts:function(){var e=this,a="id=&moduleName=CRM&type=CRM_CONTACTS&search=&refId=";c["a"].getDDLData(a).then((function(a){e.Contactlist=[],e.FormSchema[12].Data[0].config.options=[],e.Contactlist=a.data.DATA,e.Contactlist.forEach((function(a,t){e.FormSchema[12].Data[0].config.options.push({name:a.name,value:a.value})}))}))},onChangeSendThrough:function(e){var a=this;a.ProfileId=0,a.SendThrough=e.target.value,a.FormSchema[7].Data[1].value="",a.FillProfileDropdown(a.SendThrough)},FillProfileDropdown:function(e){var a=this;a.FormSchema[7].Data[1].config.options=[];var t="id=&moduleName=CRM&type=".concat(e);c["a"].getDDLData(t+"&search=").then((function(e){if(void 0!=e.data.DATA){var t=e.data.DATA;t.forEach((function(e){a.FormSchema[7].Data[1].config.options.push({name:e.name,value:e.value})}))}}))},onChangeProfile:function(e){var a=this;a.ProfileId=e.target.value},AddSMTPCredentials:function(){var e=this;if(""==e.FormSchema[7].Data[0].value)return e.ShowAlert("Please select atleast one value in send through dropdown.","warning",!0,e.$t("Alert")),!1;e.isShowSMTPModal=!0},onClickSendOrSchedule:function(e){var a=this;a.ResetProperties(),a.SendType=e,"SendNow"==e?(a.FormSchema[3].group_display_name="",a.FormSchema[4].group_display_name="",a.FormSchema[4].group_name="",a.FormSchema[3].group_name="",a.FormSchema[3].Data[0].visibility=!1,a.FormSchema[3].Data[1].visibility=!1,a.FormSchema[4].Data[0].visibility=!1,a.FormSchema[4].Data[1].visibility=!1,a.FormSchema[4].Data[2].visibility=!1,a.FormSchema[5].Data[0].visibility=!1,a.FormSchema[5].Data[1].visibility=!1,a.FormSchema[5].Data[2].visibility=!1,a.FormSchema[6].Data[0].visibility=!1):"Schedule"==e?(a.FormSchema[4].group_display_name="",a.FormSchema[4].group_name="",a.FormSchema[3].group_display_name=a.$t("ScheduleAt"),a.FormSchema[3].group_name=a.$t("ScheduleAt"),a.FormSchema[3].Data[0].visibility=!0,a.FormSchema[3].Data[1].visibility=!0,a.FormSchema[4].Data[0].visibility=!1,a.FormSchema[4].Data[1].visibility=!1,a.FormSchema[4].Data[2].visibility=!1,a.FormSchema[5].Data[0].visibility=!1,a.FormSchema[5].Data[1].visibility=!1,a.FormSchema[5].Data[2].visibility=!1,a.FormSchema[6].Data[0].visibility=!1):(a.FormSchema[4].group_display_name=a.$t("NoofRecipients"),a.FormSchema[4].group_name=a.$t("NoofRecipients"),a.FormSchema[3].group_display_name="",a.FormSchema[3].group_name="",a.FormSchema[3].Data[0].visibility=!1,a.FormSchema[3].Data[1].visibility=!1,a.FormSchema[4].Data[0].visibility=!0,a.FormSchema[4].Data[1].visibility=!0,a.FormSchema[4].Data[2].visibility=!0,a.FormSchema[5].Data[0].visibility=!0,a.FormSchema[5].Data[1].visibility=!0,a.FormSchema[5].Data[2].visibility=!0,a.FormSchema[6].Data[0].visibility=!0)},GetContactGroup:function(){var e=this,a="id=&subModuleCode=CRM_CAMPAIGNS";c["a"].ContactGroupListing(a).then((function(a){e.Contactlist=[],e.FormSchema[12].Data[1].config.options=[],e.Contactlist=a.data.data,e.Contactlist.forEach((function(a,t){e.FormSchema[12].Data[1].config.options.push({name:a.NAME,value:a.GROUP_ID})}))}))},onclickContactorGroup:function(e){var a=this,t=e.target.getAttribute("data-value");a.FormSchema[12].Data[1].value="",a.FormSchema[12].Data[0].value="","1"==t?(a.GetContacts(),a.FormSchema[12].Data[1].visibility=!1,a.FormSchema[12].Data[0].visibility=!0):(a.GetContactGroup(),a.FormSchema[12].Data[0].visibility=!1,a.FormSchema[12].Data[1].visibility=!0)},ResetProperties:function(){var e=this;e.BatchStartTime=null,e.BatchEndTime=null,e.ScheduleAtTime=null,e.FormSchema[3].Data[0].value="",e.FormSchema[4].Data[0].value="",e.FormSchema[5].Data[0].value="",e.FormSchema[5].Data[1].value="",e.FormSchema[5].Data[2].value="",e.FormSchema[6].Data[0].value=["1","2","3","4","5","6","7"]},onSubmit:function(e,a){var t=this,i={date:e.ScheduleAtDate,time:t.ScheduleAtTime,timezone:null},n={start_date:e.BatchStartDate,batch_quantity:e.BatchQuantity,batch_type:e.BatchType,repeat_after:e.RepeatAfter,batch_days:e.BatchDays.join(),start_time:t.BatchStartTime,end_time:t.BatchEndTime},o={campaign_id:t.campaignId,sub_module_code:"CRM_CAMPAIGNS",send_type:t.SendType,send_through:e.SendThrough,profile_id:e.SendProfile,track_email:""!=e.TrackEmail,recipient:e.Recipient,from_email:e.SenderEmail,from_name:e.SenderName,contact:e.Contact,contact_group:e.ContactGroup,subject:e.Subjectline,preview_text:e.PreviewText,schedule:i,batch_schedule:n},s=JSON.stringify(o);c["a"].SaveScheduleCampaign(s).then((function(e){"SENT"==e.data?(t.ShowAlert("Email Sent Successfully.","success",!0,t.$t("Alert")),t.closepopup()):"SCHEDULED"==e.data?(t.ShowAlert("Email Scheduled Successfully.","success",!0,t.$t("Alert")),t.closepopup()):"BATCH_SCHEDULED"==e.data?(t.ShowAlert("Email Batch Scheduled Successfully.","success",!0,t.$t("Alert")),t.closepopup()):t.ShowAlert("Something went wrong.","danger",!0,t.$t("Alert"))})),"MailChimp"==e.SendThrough&&t.GetContactListData(o)},GetContactListData:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i,n,o,s,u,d,m,p,h;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=a,n="",o="","1"==e.recipient?(n="contacts",s=JSON.stringify(e.contact),u=JSON.parse(s),u.forEach((function(e,a){0==a?o=e.value:o+=","+e.value}))):(n="groups",d=JSON.stringify(e.contact_group),m=JSON.parse(d),m.forEach((function(e,a){0==a?o=e.value:o+=","+e.value}))),p={type:n,ids:o},h=JSON.stringify(p),t.next=8,c["a"].GetContacts(h).then(function(){var a=Object(r["a"])(Object(l["a"])().mark((function a(t){var n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t.data.RESULT,"SUCCESS"!=t.data.STATUS||null==n){a.next=6;break}return a.next=4,i.AddMemberToMailChimp(n);case 4:return a.next=6,i.SaveSendMaliChimpCampaign(e);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 8:case"end":return t.stop()}}),t)})))()},AddMemberToMailChimp:function(e){return Object(r["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,c["a"].AddMemberToMailChimp(e).then((function(e){}));case 2:case"end":return a.stop()}}),a)})))()},SaveSendMaliChimpCampaign:function(e){var a=this;return Object(r["a"])(Object(l["a"])().mark((function t(){var i,n,o,s,r,u;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=a,n="",o=e.batch_schedule.batch_type,s=parseInt(e.batch_schedule.repeat_after),n="Seconds"==o?Math.floor(s/60):"Hours"==o?Math.floor(60*s):"Days"==o?Math.floor(24*s*60):s,r={templateId:i.mailChimpTemplateId,fromName:e.from_name,subjectLine:e.subject,issueTitle:i.campaignName,previewText:e.preview_text,fromEmail:e.from_email,sendType:e.send_type,scheduleDate:e.schedule.date,scheduleTime:e.schedule.time,batchStartDate:e.batch_schedule.start_date,batchStartTime:e.batch_schedule.start_time,batchQuantity:e.batch_schedule.batch_quantity,repeatAfter:n},u=JSON.stringify(r),c["a"].AddCampaignToMailChimp(u).then((function(e){}));case 8:case"end":return t.stop()}}),t)})))()}}},R=I,j=(t("44c7"),Object(_["a"])(R,k,A,!1,null,null,null)),B=j.exports,L={components:{TgList:M["a"],searchfilter:v["a"],viewlayout:g["a"],modalfollowupslist:D["a"],modalManageCampaign:T,modalManageSchedule:B},data:function(){return{isLoading:!1,leftSearchFields:f.leftsearchSchema,listheaderbuttons:f.buttons,listActions:f.listActions,CampaignData:null,StatusListForListing:[],Headers:null,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,Status:"",ModuleType:"",txtcampaign:"",selectedCampaignOwner:[],CampaignOwnerList:null,souceID:0,showAddEventModal:!1,campaignName:"",StatusIds:"",campaignOwner:"",campaignType:"",campaignDateFrom:"",campaignDateTo:"",langCode:"en",showAddEmailTemplate:!1,noRecord:!1,showFilter:!1,searchCondition:"",IsAnySearch:!1,ShowManageView:!1,ShowManageCampaignPopup:!1,userid:null,usertype:null,companyId:null,privilegeParams:null,LegendArray:[],appliedFilter:[],isShowManageSchedule:!1,CampaignId:0,MailChimpTemplateId:0,CampaignName:""}},created:function(){var e=Object(r["a"])(Object(l["a"])().mark((function e(){var a;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userid=this.GetUserInfo.ID,this.usertype=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,this.privilegeParams="controller=CRM&action=",a=this,a.getStatuslistForListing("CRM","en"),e.next=8,f.bindleftCommonSearchdropdown(a,"CRM","CAMPAIGN_OWNER_SEARCH");case 8:return e.next=10,f.bindleftCommonSearchdropdown(a,"CRM","CAMPAIGN_TYPES");case 10:a.FetchData(),a.LegendArray=[{class:"bg-primary colorboxsquare",text:a.$t("CloseLeadLegend",["Campaign"])}];case 12:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),methods:{renderActions:function(e){var a=this,t=[];return a.listActions.forEach((function(a){var i=Object(s["a"])({},a);switch(i.title){case"View":i.isVisible=!0;break;case"Edit":case"FollowUps":i.isVisible="Closed"!=e.status_id;break;default:i.isVisible=!0;break}t.push(i)})),t},clickEventOfColumn:function(e,a){"campaign_name"==a.COLUMN_NAME&&this.$router.push({path:"/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS"})},getStatuslistForListing:function(e,a){var t=this,i="langCode="+a+"&statusType="+e+"&hasglobal=true";c["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var a=e.data.result;t.StatusListForListing=a.data}}))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"downloadExceldata":this.FetchData(!0);break;case"openFilterPopUp":this.openFilterPopUp();break;case"ManageView":this.ManageView();break;case"OpenManageCampaignPopup":this.OpenManageCampaignPopup(0);break;case"ManageSchedule":this.ManageSchedule();break;case"commonDeleteData":this.commonDeleteData();break;case"removeFilter":var a=this;this.searchCondition="";var t=a.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));a.listheaderbuttons[t].isvisible=!1;var i=a.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));a.listheaderbuttons[i].iconClass="fa fa-filter";try{a.appliedFilter=[]}catch(n){}a.FetchData();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break}},actionButtonClick:function(e,a,t,i){var n=this;switch(e){case"checkPrivilegeView":break;case"checkPrivilegeDetails":break;case"openNoteListPopUp":n.openNoteListPopUp(a,t);break;case"openAddNewEvent":n.openAddNewEvent(a.campaign_id,a);break;case"OpenManageCampaignPopup":n.OpenManageCampaignPopup(a.campaign_id);break}},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},openFilterPopUp:function(e){this.cancelOrRefresh(),this.showFilter=!0},cancelOrRefresh:function(){this.clientemail="",this.selectedLeadOwner="",this.NameSearch="",this.CompanyName="",this.hdnOwnerId="",this.conditionForInstantSearch="",this.IsAnySearch=!1,this.FetchData()},ManageSchedule:function(){this.isShowManageSchedule=!0},closeManageCampaign:function(){this.isShowManageSchedule=!1},commonDeleteData:function(e){var a=this;c["a"].CheckPrivilege(a.privilegeParams+"Delete").then((function(e){if(e.data){var t="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),t.length>0?a.confirmR(a.$t("ConfirmDelete"),!0,a.$t("Delete")+"  "+a.$t("Campaign"),(function(){var e={ids:t,moduleName:"CRM",subModuleCode:"CRM_CAMPAIGNS"},i=JSON.stringify(e);c["a"].CommonDeleteData(i).then((function(e){var t="";200==e.status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t=a.ShowAlert(a.$t("DeletedSuccessfully",[a.$t("Campaign")]),"success",!0,a.$t("Alert")),a.PageNumber=parseInt(a.PageNumber)-1,a.PageNumber<=0&&(a.PageNumber=1),a.FetchData()):t=a.ShowAlert(a.$t("DeletedError",[a.$t("Campaign")]),"failure",!0,a.$t("Alert")),setTimeout((function(){t.modal("hide")}),2e3)}))})):alert(a.$t("Selectanyrecordtodelete"))}else a.ShowAlert("You are not authorized","failure",!0,"Alert")}))},openAddNewEvent:function(e,a){var t=this;t.souceID=a.campaign_id,t.selectedItem=e,t.showAddEventModal=!t.showAddEventModal},closeEventViewModal:function(){this.showAddEventModal=!1},ManageView:function(){var e=this;this.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},OpenManageCampaignPopup:function(e){this.CampaignId=e,this.ShowManageCampaignPopup=!0},CloseManageCampaignPopup:function(){this.ShowManageCampaignPopup=!1},sortdata:function(e){var a="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",a="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",a="sort tb_headerSortUp"):(this.SortExp="ASC",a="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",a)},getRequestParams:function(e,a,t,i,n,o){var s={};return e&&(s["pageNum"]=e),o&&(s["searchcondition"]=o),n&&(s["isPaged"]=n),t&&(s["sortBy"]=t),i&&(s["sortExp"]=i),a&&(s["pageSize"]=a),s},FilterData:function(e,a,t,i,n,s){this.pageNum=e,this.pageSize=a,this.sortBy=t,this.sortExp=i,this.searchCondition=n,null!=Object(o["a"])(s)&&this.appliedFilter.push(s),this.FetchData()},FetchData:function(e){var a=this.getRequestParams(this.pageNum,this.pageSize,this.sortBy,this.sortExp,this.isPaged,this.searchCondition),t=this;t.isLoading=!0,a.pageSize=e?t.TotalRecords:t.PageSize,a.pageNumber=t.PageNumber,a.langCode=t.langCode,a.searchCondition=t.searchCondition,t.PageNumber?a.pageNum=t.PageNumber:t.PageNumber=a.pageNum=1,a.sortBy=t.SortBy,a.sortExp=t.SortExp;var i="";if(t.isBlank(t.searchCondition)||(i+=t.searchCondition),t.isBlank(t.conditionForInstantSearch)||(i+=t.isBlank(t.searchCondition)?t.conditionForInstantSearch:" AND "+t.conditionForInstantSearch),""!=i){if(a.searchCondition=i,t.appliedFilter.length>0){var n=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[n].isvisible=!0;var o=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[o].iconClass="fa fa-filter text-success"}}else if(0==t.appliedFilter.length){var s=t.listheaderbuttons.findIndex((function(e){return"removeFilter"===e.callbackfunction}));t.listheaderbuttons[s].isvisible=!1;var l=t.listheaderbuttons.findIndex((function(e){return"openFilterPopUp"===e.callbackfunction}));t.listheaderbuttons[l].iconClass="fa fa-filter"}e?(a.isPaged=0,c["a"].CampaignListing(a).then((function(e){t.isLoading=!1,""!=e.data?t.JSONToCSVConvertor(e.data,"Campaign-Detail",!0):t.ModelnoRecord=!0,t.isLoading=!1}))):c["a"].CampaignListing(a).then((function(e){t.isLoading=!1,null!=e.data?(t.Headers=e.data.schema,t.Headers.forEach((function(e){e.settings=null,"campaign_name"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn,formatter:t.columnDataFormatter}),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})})),e.data.data.length>0?(t.CampaignData=e.data.data,t.CampaignData.forEach((function(e){e.isCheckBoxDisabled=!1,e.additionalClass="","Closed"==e.status_id&&(e.isCheckBoxDisabled=!0,e.additionalClass="medium-bar"),e.rowDetailsUrl="",""==e.rowDetailsUrl&&(e.rowDetailsUrl="/CRM/ViewCampaignDetails/"+e.campaign_id+"/CRM/CRM_CAMPAIGNS")})),t.TotalRecords=e.data.data[0].total_records,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,$("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),$("#DeleteCampaign").addClass("disabled"),$("#Sendbulkmail").addClass("disabled"),t.noRecord=!1):(t.noRecord=!0,t.CampaignData=[],t.TotalRecords=0)):(t.noRecord=!0,t.CampaignData=[],t.Headers=[],t.TotalRecords=0),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500),t.isLoading=!1}))}},updated:function(){this.BindActionButtonEvent()}},G=L,q=Object(_["a"])(G,i,n,!1,null,null,null);a["default"]=q.exports},"593f":function(e,a,t){var i=t("24fb");a=i(!1),a.push([e.i,".shortcuts-menu.man_camp li{max-width:33%;padding:10px}.shortcuts-menu.man_camp li.active a.short-menu-item{background:#00b298;color:#fff;border-color:#00b298}.shortcuts-menu.man_camp li.active a span.left-icon-m{background-color:#00a68e}.shortcuts-menu.man_camp li.active a span.left-icon-m i{color:#fff}.shortcuts-menu.man_camp li:hover a.short-menu-item{background:#00b298!important;color:#fff!important;border-color:#00b298!important}.shortcuts-menu li:hover .short-item-name{color:#fff!important}.shortcuts-menu.man_camp li:hover a span.left-icon-m{background-color:#00a68e}.shortcuts-menu.man_camp li:hover a span.left-icon-m i{color:#fff}.shortcuts-menu.man_camp li a span.left-icon-m i{color:#00b298;font-size:32px}.btn_template{background:#ebfffc;color:#78b9af;border:1px solid #99e6da;font-size:20px}.btn_template:hover{border:1px solid #99e6da}.btn_template:hover,.defaultpic_control .btn-select{background:#00b298;color:#fff}.defaultpic_control .btn-view{background:#30b3f1;color:#fff}.default_templates .default-tags,.default_templates .default-tags:hover{background:hsla(0,0%,100%,.9)}.default_templates .img-ico.ticket-attachments{min-height:200px;display:flex;justify-content:center;align-items:center;max-height:200px}",""]),e.exports=a},"5f92":function(e,a,t){var i=t("1d4a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=t("499e").default;n("483f53f8",i,!0,{sourceMap:!1,shadowMode:!1})},d514:function(e,a,t){"use strict";t("258f")}}]);
//# sourceMappingURL=CRMCampaign.js.map