(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Product Type Detail"],{3731:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"listing mt-2"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoRecordForTab?e("div",{staticClass:"text-center text-danger p-4 border"},[t._v(t._s(t.$t("NoRecordfound")))]):t._e(),e("div",{staticClass:"row custom-box-width"},t._l(t.AttachmentData,(function(a,i){return e("div",{key:i,staticClass:"col-xl-2 col-lg-4 col-md-6"},[e("div",{staticClass:"box border pt-4 text-center"},[e("div",{staticClass:"verticle-action"},[e("em",{staticClass:"fa fa-ellipsis-v action_icon",attrs:{"aria-hidden":"true"},on:{click:function(a){return t.openActionIcon(a)}}}),e("span",{staticClass:"action-list-box",staticStyle:{width:"240px",display:"none"}},[e("span",{staticClass:"list-actions",staticStyle:{"padding-left":"0"},attrs:{id:"action-list"}},[e("a",{staticClass:"actions-onclick edit-list",attrs:{"data-toggle":"modal",href:"javascript:void(0)"},on:{click:function(e){return t.downloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Download")]),"fa-file-image-o"==t.returntFileIconClass(a)?e("a",{staticClass:"actions-onclick view-list",attrs:{href:a.attachement_path,target:"_blank"}},[e("em",{staticClass:"fa fa-eye"}),e("br"),t._v("View")]):t._e(),e("a",{staticClass:"actions-onclick view-list",on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash"}),e("br"),t._v("Delete")]),e("em",{staticClass:"fa fa-times close close-action",attrs:{"aria-hidden":"true"},on:{click:function(a){return t.closeActionIcon(a)}}})])])]),e("div",{class:{"img-ico text-center p-5 file-image doc-icon":null==a.thumb_nail_path||""==a.thumb_nail_path,"img-ico fix145 text-center pb-4 file-image doc-icon pt-3":null!=a.thumb_nail_path&&""!=a.thumb_nail_path}},[null!=a.thumb_nail_path&&""!=a.thumb_nail_path?e("img",{attrs:{src:a.thumb_nail_path,alt:"",loading:"'lazy'"}}):t._e(),null==a.thumb_nail_path||""==a.thumb_nail_path?e("em",{class:"fa "+t.returntFileIconClass(a)}):t._e()]),e("hr",{staticClass:"mb-0"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row mx-0 my-2"},[e("div",{staticClass:"col-md-12 text-left text-truncate font-14 mb-2 font-weight-bold",attrs:{title:a.attachement_name+"."+JSON.parse(a.attachement_mime).Extension}},[t._v(t._s(a.attachement_name+"."+JSON.parse(a.attachement_mime).Extension))]),e("div",{staticClass:"col-md-5 font-14 align-self-center text-left pr-0"},[e("span",[t._v(t._s(t.bytesToSize(JSON.parse(a.attachement_mime).Size)))])]),e("div",{staticClass:"col-md-7 text-right pl-0 text-truncate"},[e("small",[t._v(t._s(t._f("formatDateTime")(a.created_at)))])])])])])})),0)],1)},s=[],n=(e("7db0"),e("d3b7"),e("25f0"),e("99af"),e("3ca3"),e("ddb0"),e("2b3d"),e("9861"),e("1157")),o=e.n(n),r=e("9769"),l={props:{attachmentdata:null,sourceid:{type:String}},data:function(){return{isLoading:!1,AttachmentData:[],NoRecordForTab:!0,LeadStatus:this.$parent.LeadStatus,showAttachmentModal:!1,imageUrl:""}},watch:{attachmentdata:function(t){var a=o()("#hdnLoggedInUserId").val();o.a.each(t,(function(t,e){e.created_by==a?e.IsDelete=!0:e.IsDelete=!1})),this.AttachmentData=t,this.NoRecordForTab=!(null!=this.AttachmentData&&this.AttachmentData.length>0),setTimeout((function(){o()(".action_icon").click((function(){o()(this).parent().find(".action-list-box").show(500)})),o()(".close-action").click((function(){o()(this).parent().parent(".action-list-box").hide(500)}))}),1e3)}},methods:{openActionIcon:function(t){t.target.nextSibling.removeAttribute("style"),t.target.nextSibling.setAttribute("style","width:240px;"),t.target.nextSibling.style.display="block"},closeActionIcon:function(t){t.target.nextSibling.style.display="none"},StrTruncate:function(t){function a(a){return t.apply(this,arguments)}return a.toString=function(){return t.toString()},a}((function(t){return StrTruncate(t,25)})),returntFileIconClass:function(t){var a=["JPG","JPEG","BMP","GIF","PNG"],e=JSON.parse(t.attachement_mime),i=e.Extension.toUpperCase();return"COMPRESSEDFILES"==i||"ZIP"==i||"RAR"==i?"fa-file-archive-o":"XLS"==i||"XLSX"==i||"DATAFILES"==i?"fa-file-excel-o":"PPT"==i?"fa-file-powerpoint-o":"PDF"==i?"fa-file-pdf-o":"DOC"==i||"DOCX"==i?"fa-file-word-o":"TXT"==i?"fa-file-text-o":a.indexOf(i)>-1?"fa-file-image-o":"fa-file-o"},bytesToSize:function(t){var a=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";var e=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,e),2)+" "+a[e]},downloadAttachment:function(t){this.isLoading=!0;var a=this,e="fileId=".concat(t.attachement_id,"&filePath=").concat(t.blob_path,"&fileType=").concat(JSON.parse(t.attachement_mime).ContentType,"&fileName=").concat(t.attachement_name+"."+JSON.parse(t.attachement_mime).Extension,"&downloadType=single");r["a"].CRMDownloadFile(e).then((function(e){a.isLoading=!1;var i=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=i,s.setAttribute("download",t.attachement_name+"."+JSON.parse(t.attachement_mime).Extension),document.body.appendChild(s),s.click()}))},deleteAttachment:function(t){var a=this;a.confirmR(this.$t("ConfirmDelete"),!0,this.$t("Delete")+"  "+this.$t("Attachment"),(function(){a.isLoading=!0;var e=t.attachement_id,i=parseInt(a.sourceid),s="id="+e+"&sourceid="+i;r["a"].DeleteAttachment(s).then((function(t){a.isLoading=!1,"SUCCESS"==t.data&&(a.ShowAlert(a.$t("DeletedSuccess",[a.$t("Attachment")]),"success",!0,a.$t("Alert")),a.$parent.loadData("attachments"))}))}))}}},c=l,d=e("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);a["a"]=u.exports},"9dbd":function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal d-block my-popups dialog"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[t._t("headerForModal",(function(){return[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachments")))])]})),e("button",{staticClass:"close",attrs:{type:"button",href:"javascript:;"},on:{click:function(a){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times"})])],2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row form-head",staticStyle:{display:"none"}},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 col-xl-4 float-right p-0"},[e("div",{staticClass:"userguide-box userguide_curve"},[e("a",{staticClass:"userguide-btn collapsed",attrs:{"data-toggle":"collapse",href:"#user-guidepriority","aria-expanded":"false","aria-controls":"search-content"}},[e("em",{staticClass:"fa"}),e("span",[t._v(t._s(t.$t("GuideForUser")))])]),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"user-guide collapse",attrs:{id:"user-guidepriority"}},[t._v(" "+t._s(t.$t("GuideForUser"))+" "),e("br"),e("br")])])])])]),e("Form",{ref:"attachment"},[e("div",{staticClass:"form-content"},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("DisplayName"))+":")]),e("span",{staticClass:"text-danger"},[t._v("*")]),e("Field",{attrs:{name:"Name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.DisplayName,expression:"DisplayName"}],staticClass:"form-control",class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",maxlength:"50",id:"DisplayName",name:"DisplayName"},domProps:{value:t.DisplayName},on:{keyup:function(a){return t.CheckAttach(t.DisplayName)},input:function(a){a.target.composing||(t.DisplayName=a.target.value)}}}),i[0]?e("span",{staticClass:"invalid-feedback",attrs:{name:"DisplayName"}},[t._v(t._s(i[0]))]):t._e()]}}])})],1)]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-6 col-xl-6",attrs:{id:"attach"}},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("Attachment"))+":")]),e("span",{staticClass:"text-danger"},[t._v("*")]),void 0!=t.imagesizedata&&t.imagesizedata.length>0?e("a",{directives:[{name:"popover",rawName:"v-popover:tooltip",value:t.imagesizedata,expression:"imagesizedata",arg:"tooltip"}],attrs:{href:"javascript:;","data-toggle":"popoveruserguide"}},[e("em",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14p  x"}})]):t._e(),e("div",{staticClass:"custom-file"},[e("Field",{ref:"provider",attrs:{name:"File",rules:{required:!1}},scopedSlots:t._u([{key:"default",fn:function(a){var i=a.errors;return[e("input",{class:{"form-control":!0,"is-invalid":i[0]||1==t.isFileValidation},attrs:{type:"file",name:"FileSrc",id:"inputAttach"},on:{change:t.GetBase64String,click:function(a){return t.onClickFile(a)}}}),1==t.isFileValidation?e("span",{staticClass:"invalid-feedback d-block"},[t._v("The Attachment is required")]):i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}])})],1)])])])])])])],1),e("div",{staticClass:"modal-footer text-right"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"search-btm-btn"},[e("a",{staticClass:"btn btn-success  save-btn mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(a){return t.SaveAttachment()}}},[e("em",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),e("a",{staticClass:"btn btn-danger delete-btn",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(a){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times pr-1"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])])])])])])],1)},s=[],n=(e("a9e3"),e("313d"),e("0eb6"),e("b7ef"),e("8bd4"),e("b0c0"),e("a15b"),e("ac1f"),e("1276"),e("caad"),e("2532"),e("e9c4"),e("9769")),o=e("1157"),r=e.n(o),l={props:{userid:{type:Number,required:!0},companyid:{type:Number,required:!0},id:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},containername:{type:String,required:!0},maxsize:{type:String},disallowedfiletypes:{type:String},imagesizedata:{type:String}},data:function(){return{isFileValidation:!1,fileData:[],DisplayName:"",FileName:"",btnDisable:!1,isLoading:!1}},methods:{checkForDisplayName:function(t){this.DisplayName||t.preventDefault()},CheckAttach:function(t){""!=t?(this.btnDisable=!0,this.fileData.fileName=t):this.btnDisable=!1},GetBase64String:function(t){var a=this;a.fileData=[];var e=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),n=e.name,o=n.lastIndexOf("."),r=n.substring(o+1,n.length),l='{"ContentType":"'+e.type+'","Size":"'+e.size+'","Extension":"'+r+'"}';""==a.DisplayName?(n=e.name,a.FileName=e.name):(n=a.DisplayName,a.FileName=e.name);var c=["doc","docx","jpg","pdf","csv","png","xls","txt","jpeg","jfif","pjpeg","svg","pjp"];if(n.length>0&&-1===c.indexOf(r))return a.ShowAlert("Invalid file Format. Only "+c.join(", ")+" are allowed."),!1;var d={attachement_mime:l,fileName:n,userId:a.userid,companyId:a.companyid,id:a.id,moduleName:a.modulename,subModuleCode:a.submodulecode,containerName:a.containername,base64String:s};a.fileData.push(d),a.isFileValidation=!1}}(),i.readAsBinaryString(e)},byteToSize:function(t){return 0==t?"0 Byte":t/Math.pow(1024,2)},onClickFile:function(){var t=document.getElementById("inputAttach"),a=t.files;0==a.length?this.isFileValidation=!0:this.isFileValidation=!1},SaveAttachment:function(){var t=this,a=this,e=0,i="";this.onClickFile(),""!=r()("#inputAttach").val()&&(e=a.byteToSize(JSON.parse(a.fileData[0].attachement_mime).Size),i=JSON.parse(a.fileData[0].attachement_mime).Extension);var s=parseFloat(a.maxsize)||0;if(e>s&&0!=s)return a.ShowAlert("Size exceeds than "+s+" MB. Please upload file with valid size.","warning",!0,a.$t("Alert")),!1;var o=void 0!=a.disallowedfiletypes?a.disallowedfiletypes.split(","):"",l="."+i;if(o.includes(l))return a.ShowAlert(a.$t("InvalidFileUploadMsg"),"warning",!0,a.$t("Alert")),!1;a.$refs.attachment.validate().then((function(e){if(e&&0==t.isFileValidation){a.isLoading=!0;var i=JSON.stringify(a.fileData);o.includes(l)?a.ShowAlert(a.$t("InvalidFileUploadMsg")):n["a"].UploadFile(i).then((function(t){a.isLoading=!1,"Success"==t.data[0].Status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Attachment")]),"Success",!0,a.$t("Alert")),a.$emit("close"),a.$parent.loadData("attachments")):"Exist"==t.data[0].Status?a.ShowAlert(a.$t("FileNameAlreadyExist",[a.$t("Attachment")]),"warning",!0,a.$t("Alert")):a.ShowAlert(a.$t("ValidFileType",[a.$t("Attachment")]),"failure",!0,a.$t("Alert"))}))}else console.log(t.$refs.attachment.errors)}))}}},c=l,d=e("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);a["a"]=u.exports},c9c5:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("section",{staticClass:"main-content",attrs:{id:"main-content"}},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("section",{staticClass:"main-content"},[e("div",{staticClass:"left-menu-tab div-click-event"},[e("div",{staticClass:"col-md-12 p-0 "},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white textelipsis"},[t._v(t._s(t.itemTypeName))])])]),e("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",class:{active:1==t.activeKey},attrs:{"data-bs-target":"#tab-lead-content",href:"javascript:void(0)","data-bs-toggle":"tab",role:"tab",id:"tab-Details"},on:{click:function(a){t.loadData("timeline"),t.DisableButton()}}},[e("em",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true","aria-selected":"true"}}),t._v(" "+t._s(t.$t("Detail"))+" ")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",class:{active:2==t.activeKey},attrs:{"data-bs-target":"#tab-notes-content",href:"javascript:void(0)",id:"tab-notes","data-bs-toggle":"tab",role:"tab"},on:{click:function(a){return t.loadData("notes")}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("NOTE"))+" ")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",class:{active:3==t.activeKey},attrs:{"data-bs-target":"#tab-attachment-content",href:"javascript:void(0)",id:"tab-attachment","data-bs-toggle":"tab",role:"tab"},on:{click:function(a){return t.loadData("attachments")}}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(" "+t._s(t.$t("Attachments"))+" ")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",class:{active:4==t.activeKey},attrs:{"data-toggle":"tab",role:"tab","data-bs-target":"#tab-tax-content",href:"javascript:void(0)",id:"tab-tax"},on:{click:function(a){return t.loadData("tax")}}},[e("em",{staticClass:"fa fa-money",attrs:{"aria-hidden":"true","aria-selected":"false"}}),t._v(t._s(t.$t("Tax"))+" ")])])])]),e("div",{staticClass:"right-content"},[e("div",{staticClass:"tab-pane mb-2"},[e("div",{staticClass:"theme-primary partition p-actions-expand"},[e("span",{staticClass:"p-name text-white",attrs:{id:"span_ForSelectedTabName"}}),e("span",{staticClass:"p-actions float-right"},[t.isNotes&&"list"==t.NoteListType?e("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Card View"},on:{click:function(a){t.NoteListType="card"}}},[e("em",{staticClass:"fa fa-th-large"}),e("br"),t._v(" "+t._s(t.$t("CardView"))+" ")]):t._e(),t.isNotes&&"list"!=t.NoteListType?e("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"List View"},on:{click:function(a){t.NoteListType="list"}}},[e("em",{staticClass:"fa fa-list"}),e("br"),t._v(" "+t._s(t.$t("ListView"))+" ")]):t._e(),t.isNotes?e("a",{class:{"p-action-btn text-white":!0,disabled:!1},attrs:{href:"javascript:;",title:"",id:"ancaddnotesloaddata","data-toggle-tooltip":"tooltip","data-original-title":"Add Notes"},on:{click:function(a){return t.openShowNotePopup()}}},[e("em",{staticClass:"fa fa-plus"}),e("br"),t._v(" "+t._s(t.$t("AddNotes"))+" ")]):t._e(),t.isAttachment?e("a",{class:{"p-action-btn text-white":!0},attrs:{href:"javascript:;",title:t.$t("UploadFile")},on:{click:function(a){return t.openCRMAttachmentModal(null)}}},[e("em",{staticClass:"fa fa-plus"}),e("br"),t._v(" "+t._s(t.$t("Add"))+" "+t._s(t.$t("Attachment"))+" ")]):t._e(),t._v(" "),e("RouterLink",{staticClass:"p-action-btn text-white float-right",attrs:{to:"/CRM/ItemTypeListing"}},[e("em",{staticClass:"fa fa-angle-double-left"}),e("br"),t._v(" "+t._s(t.$t("BacktoList"))+" ")]),e("RouterLink",{staticClass:"p-action-btn text-white",attrs:{to:"/Asset/Update/"+this.$route.params.id+"?moduleName="+this.$route.params.moduleName+"&subModuleCode="+this.$route.params.subModuleCode+"&reqfrom=/CRM/ItemTypeListing"}},[e("em",{staticClass:"fa fa-pencil"}),e("br"),t._v(t._s(t.$t("Edit"))+" ")])],1),t._m(0)])]),e("div",{staticClass:"tab-pane mb-0"},[e("div",{staticClass:"tab-content fsmtabcontrolMobileView",attrs:{id:"myTabContent"}},[t._m(1),e("div",{staticClass:"tab-pane p-0 pb-2 border-0",class:{"active show":1==t.activeKey},attrs:{role:"tabpanel",id:"tab-detail-content","aria-labelledby":"tab-detail-content"}},[e("div",{staticClass:"listing"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card mb-3 probx"},[e("div",{staticClass:"card-header"},[e("h2",[t._v(t._s(t.$t("Details")))]),t._m(2)]),e("div",{staticClass:"card-body"},t._l(t.LeftViewData,(function(a){return e("div",{key:a,staticClass:"panel1"},[e("div",{staticClass:"heading-border"},[e("h5",{staticClass:"h5 mb-2"},[e("span",[t._v(t._s(t.GetLocalizedValue(a.group_name,"")))])])]),e("div",{staticClass:"row"},t._l(a.LeftViewData,(function(a,i){return e("div",{key:i,staticClass:"col-md-6 col-lg-3"},[e("div",{staticClass:"form-group"},[e("label",[e("strong",[t._v(t._s(t.GetLocalizedValue(a.name,a.display_name))+":")]),"date"==a.dt_code||"datetime"==a.dt_code?e("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(" "+t._s(t._f("formatDate")(a.value)))]):t._e(),"decimal"==a.dt_code?e("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t._f("currency")(t.isBlank(a.value)?"0.00":a.value)))]):t._e(),"date"!=a.dt_code&&"datetime"!=a.dt_code&&"decimal"!=a.dt_code&&"Lookup"!=a.picklist_options&&("description"!=a.name||"description"==a.name&&1!=t.isBlank(a.value))?e("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.isBlank(a.value)?"--":a.value))]):t._e(),"description"!=a.name&&"term_and_conditions"!=a.name||t.isBlank(a.value)?t._e():e("crmreadmore",{staticClass:"ml-1",attrs:{callFrom:"ProductTypeDetails",data:a.value,heading:t.$t("Description"),length:"100"}}),"date"!=a.dt_code&&"datetime"!=a.dt_code&&"decimal"!=a.dt_code&&"Lookup"==a.picklist_options?e("span",{staticClass:"answer rightlabeltext ml-1"},[t._v(t._s(t.isBlank(a.value)?"--":a.value))]):t._e()],1)])])})),0)])})),0)]),e("div",{staticClass:"card mb-3 probx"},[t._m(3),e("div",{staticClass:"card-body"},[e("crmtimeline",{attrs:{timelinedata:t.timelinedata}})],1)])])])])]),e("div",{staticClass:"tab-pane fade p-0 pb-2 border-0",class:{"active show":2==t.activeKey},attrs:{id:"tab-notes-content",role:"tabpanel","aria-labelledby":"tab-notes-content"}},[t.noteData?e("crmnote",{attrs:{notedata:t.noteData,userid:t.userid,companyid:t.companyId,sourceid:t.$route.params.id,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,listtype:t.NoteListType,showNotePopUp:t.isShowNotePopup,callfrom:"quickViewAndNoteJS"}}):t._e()],1),e("div",{staticClass:"tab-pane fade p-0 pb-2 border-0",class:{"active show":3==t.activeKey},attrs:{id:"tab-attachment-content",role:"tabpanel","aria-labelledby":"tab-attachment-content"}},[e("crmattachment",{attrs:{attachmentdata:t.attachmentData,sourceid:t.$route.params.id}})],1),e("div",{staticClass:"tab-pane fade p-0 border-0",class:{"active show":4==t.activeKey},attrs:{id:"tab-tax-content",role:"tabpanel","aria-labelledby":"tab-tax-content"}},[e("taxdata")],1)])])])]),t.showAttachmentModal?e("modalattachment",{attrs:{userid:t.userid,companyid:t.companyId,id:t.$route.params.id,modulename:t.$route.params.moduleName,submodulecode:t.$route.params.subModuleCode,containername:t.containername,imagesizedata:""},on:{close:function(a){t.showAttachmentModal=!1}}},[e("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Attachments")))])]):t._e()],1)},s=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"collapse-head-btns"},[e("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[e("em",{staticClass:"fa fa-angle-up text-white"})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"expand-list"},[e("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[e("em",{staticClass:"icon-solid arrow-solid-left text-white",staticStyle:{"font-size":"9pt"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"cont_right "},[e("div",{staticClass:"bar"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card-header"},[e("h2",[t._v("Timeline")])])}],n=e("53ca"),o=(e("99af"),e("7db0"),e("d3b7"),e("ac1f"),e("00b4"),e("b0c0"),e("5319"),e("9769")),r=e("dd2a"),l=e("84a0"),c=e("3731"),d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 "},[e("Form",{ref:"form",attrs:{autocomplete:"off"}},[t._l(t.taxData,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 border border-grey mb-2"},[e("div",{staticClass:"black-header "},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left py-2"},[e("div",{staticClass:"form-head"},[e("div",{staticClass:"heading-border"},["country"==a.forName?e("h5",{staticClass:"h5"},[e("span",[t._v(" "+t._s(t.$t("CountryTax"))+" ")]),"country"==a.forName?e("a",{staticClass:"text-dark formbtn float-right p-0 w-10 text-right",attrs:{href:"javascript:;"},on:{click:function(a){return t.AddMoreTax("0",i)}}},[e("em",{staticClass:"fa fa-plus-circle",staticStyle:{"font-size":"26px"}})]):t._e()]):t._e(),"state"==a.forName?e("h5",{staticClass:"h5"},[e("span",[t._v(" "+t._s(t.$t("StateTax"))+" ")]),"state"==a.forName?e("a",{staticClass:"text-dark formbtn float-right p-0 w-10 text-right",attrs:{href:"javascript:;"},on:{click:function(a){return t.AddMoreTax("1",i)}}},[e("em",{staticClass:"fa fa-plus-circle",staticStyle:{"font-size":"26px"}})]):t._e()]):t._e(),"district"==a.forName?e("h5",{staticClass:"h5"},[e("span",[t._v(" "+t._s("CountyTax")+" ")]),"district"==a.forName?e("a",{staticClass:"text-dark formbtn float-right p-0 w-10 text-right",attrs:{href:"javascript:;"},on:{click:function(a){return t.AddMoreTax("2",i)}}},[e("em",{staticClass:"fa fa-plus-circle",staticStyle:{"font-size":"26px"}})]):t._e()]):t._e(),"zipcode"==a.forName?e("h5",{staticClass:"h5"},[e("span",[t._v(" "+t._s(t.$t("ZipcodeTax"))+" ")]),"zipcode"==a.forName?e("a",{staticClass:"text-dark formbtn float-right p-0 w-10 text-right",attrs:{href:"javascript:;"},on:{click:function(a){return t.AddMoreTax("3",i)}}},[e("em",{staticClass:"fa fa-plus-circle",staticStyle:{"font-size":"26px"}})]):t._e()]):t._e()])])])]),e("div",{staticClass:"col-12 float-left p-0 py-2 mb-2 highlighter"},t._l(a.taxFor,(function(a,s){return e("div",{key:s,staticClass:"col-12 float-left mt-2 p-0 bg_highlighter"},[e("div",{staticClass:"col-12 float-left my-0 p-0"},[e("div",{staticClass:"col-11 float-left p-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left"},[e("Field",{attrs:{name:"countryname",rules:{required:!1},label:"countryname"},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.errors,r=(n.touched,n.invalid,n.changed);return[e("Multiselect",{attrs:{placeholder:t.$t("SelectCountry"),noOptionsText:"","filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,"track-by":"value",label:"label",options:t.CountryData},on:{"update:modelValue":r,"search-change":function(e){return t.onSearch(e,a,i,s,"search")}},model:{value:a.countryId,callback:function(e){t.$set(a,"countryId",e)},expression:"txtforItem.countryId"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"countryname"}},[t._v(t._s(o[0]))])]}}],null,!0)})],1),"state"==a.taxForName?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2 float-left"},[e("Field",{attrs:{name:"statename",rules:{required:!1},label:"statename"},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.errors,r=(n.touched,n.invalid,n.changed);return[e("Multiselect",{attrs:{placeholder:t.$t("SelectStateName"),noOptionsText:"","filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,"track-by":"value",label:"label",options:a.taxForOption},on:{"update:modelValue":r,"search-change":function(e){return t.onSearch(e,a,i,s,"search")}},model:{value:a.stateId,callback:function(e){t.$set(a,"stateId",e)},expression:"txtforItem.stateId"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"statename"}},[t._v(t._s(o[0]))])]}}],null,!0)})],1):t._e(),"district"==a.taxForName?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2 float-left"},[e("Field",{attrs:{name:"districtname",rules:{required:!1},label:"districtname"},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.errors,r=(n.touched,n.invalid,n.changed);return[e("Multiselect",{attrs:{"filter-results":!1,"min-chars":1,label:"label","resolve-on-load":!1,delay:0,noOptionsText:"",searchable:!0,"track-by":"value",options:a.taxForOption},on:{"update:modelValue":r,"search-change":function(e){return t.onSearch(e,a,i,s,"search")}},model:{value:a.districtId,callback:function(e){t.$set(a,"districtId",e)},expression:"txtforItem.districtId"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"districtname"}},[t._v(t._s(o[0]))])]}}],null,!0)})],1):t._e(),"zipcode"==a.taxForName?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2 float-left"},[e("Field",{attrs:{name:"zipCode",rules:{ZipCode:!0},label:"zipCode"},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.errors,r=(n.touched,n.invalid,n.changed);return[e("Multiselect",{attrs:{"filter-results":!1,"min-chars":1,noOptionsText:"",label:"label","resolve-on-load":!1,delay:0,searchable:!0,"track-by":"value",options:a.taxForOption},on:{"update:modelValue":r,"search-change":function(e){return t.onSearch(e,a,i,s,"search")}},model:{value:a.zipCodeId,callback:function(e){t.$set(a,"zipCodeId",e)},expression:"txtforItem.zipCodeId"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"zipCode"}},[t._v(t._s(o[0]))])]}}],null,!0)})],1):t._e()]),e("div",{staticClass:"col-1 float-right p-0"},[s>0?e("a",{staticClass:"btn formbtn ",attrs:{href:"javascript:;"},on:{click:function(e){return t.RemoveTaxForRow(a,i,s)}}},[e("em",{staticClass:"fa fa-trash text-danger",staticStyle:{"font-size":"23px"}}),e("span",{staticClass:"ml-1 text-dark",staticStyle:{"font-size":"14px"}})]):t._e()])]),t._l(a.taxItem,(function(a,n){return e("div",{key:n,staticClass:"col-12 float-left mt-2 p-0"},[e("div",{staticClass:"col-11 float-left p-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2"},[e("Field",{attrs:{name:"taxName"+i+s+n,rules:{required:!1},label:"taxName"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.taxName,expression:"taxitem.taxName"}],staticClass:"form-control",attrs:{name:"taxName"+i+s+n},domProps:{value:a.taxName},on:{input:function(e){e.target.composing||t.$set(a,"taxName",e.target.value)}}})])],1),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2"},[e("Field",{attrs:{name:"taxType",rules:{required:!1},label:"taxType"},model:{value:a.taxType,callback:function(e){t.$set(a,"taxType",e)},expression:"taxitem.taxType"}},[e("select",{staticClass:"form-control",on:{change:function(e){return t.CheckProbability(a)}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("SelectTaxType")))]),e("option",{attrs:{value:"percent"}},[t._v(t._s(t.$t("Percent")))]),e("option",{attrs:{value:"flat"}},[t._v(t._s(t.$t("Flat")))])])])],1),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-4 col-xl-4 float-left mb-2"},[e("Field",{attrs:{name:"taxValue"+i+s+n,rules:{required:!0},label:"Tax type"},scopedSlots:t._u([{key:"default",fn:function(o){var r=o.errors,l=o.touched,c=o.invalid;return[e("input",{directives:[{name:"model",rawName:"v-model.number",value:a.taxValue,expression:"taxitem.taxValue",modifiers:{number:!0}}],class:{"form-control":!0,"is-invalid":l&&c},attrs:{name:"taxValue"+i+s+n},domProps:{value:a.taxValue},on:{keypress:function(a){return t.isNumber(a)},keyup:function(e){return t.CheckProbability(a)},input:function(e){e.target.composing||t.$set(a,"taxValue",t._n(e.target.value))},blur:function(a){return t.$forceUpdate()}}}),e("span",{staticClass:"invalid-feedback",attrs:{name:"taxValue"+i+s+n}},[t._v(t._s(r[0]))])]}}],null,!0)})],1)]),e("div",{staticClass:"col-1 float-left p-0"},[n>0?e("a",{staticClass:"btn formbtn",attrs:{href:"javascript:;",title:t.$t("DeleteLineItem")},on:{click:function(e){return t.RemoveTaxRow(a,i,s)}}},[e("em",{staticClass:"fa fa-trash text-danger",staticStyle:{"font-size":"23px"}})]):t._e(),0==n?e("a",{staticClass:"btn formbtn text-success",attrs:{href:"javascript:;",title:t.$t("AddMoreLineItem")},on:{click:function(a){return t.AddItem(i,s)}}},[e("em",{staticClass:"fa fa-plus text-success",staticStyle:{"font-size":"23px"}})]):t._e()])])}))],2)})),0)])})),e("div",{staticClass:"col-12 float-right text-right py-1 px-0"},[e("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(a){return t.SaveTax()}}},[e("em",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("RouterLink",{staticClass:"btn btn-danger",attrs:{to:"/CRM/ItemTypeListing",title:t.$t("Cancel")}},[e("em",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])],1)],2)],1)},u=[],m=e("b85c"),p=(e("159b"),e("b64b"),e("d81d"),e("a434"),e("a15b"),e("e9c4"),e("8c4f")),f=e("1157"),h=e.n(f),v={components:{RouterLink:p["a"]},data:function(){return{CountryData:[],taxData:[],taxGroupData:[]}},created:function(){var t=this;t.ShowSearchData("","COUNTRIES"),t.FetchData()},methods:{map:function(t){var a={};return Object.keys(t).forEach((function(e){switch(e){case"name":a["label"]=t[e];break;case"value":a["value"]=t[e];break}})),a},CheckProbability:function(t){if("percent"==t.taxType&&""!=t.taxType&&t.taxValue>100)return t.taxValue="",this.ShowAlert(this.$t("Tax percentage can not be more than 100."),"warning",!0,this.$t("Alert")),!1},isNumber:function(t){var a=t.which?t.which:t.keyCode;if(!(a>31&&(a<48||a>57)&&46!==a))return!0;t.preventDefault()},onSearch:function(t,a,e,i,s){var n=this,r=a.taxForName,l=a.countryId.value;if("search"!=s&&(l=a.value),"undefined"!=typeof l){var c="id=&moduleName=".concat(n.$route.params.moduleName,"&type=").concat(r,"&refId=").concat(l);c+="&search="+escape(t),o["a"].getDDLData(c).then((function(t){var o=t.data;o?"search"==s?a.taxForOption=o.DATA.map((function(t){return{value:t.value,label:t.name}})):(n.taxData[e].taxFor[i].taxForOption=o.DATA,"search"!=s&&(n.taxData[e].taxFor[i].countryId=val)):(n.taxData[e].taxFor[i].taxForOption=[],"search"!=s&&(n.taxData[e].taxFor[i].countryId=val))}))}},setSelectedValue:function(t,a,e,i,s,n){var r=a,l=this;if("search"!=n&&(r=a.value),"undefined"!=typeof r){var c="id=".concat(l.$route.params.id,"&moduleName=").concat(l.$route.params.moduleName,"&type=").concat(l.type,"&refId=").concat(l.refId);o["a"].GetDDLData(c+"&search="+escape(s)).then((function(s){var o=s.data;if(null!=o){if("search"==n)return t.taxForOption=o.DATA,t.taxForOption;l.taxData[e].taxFor[i].taxForOption=o.DATA,"search"!=n&&(l.taxData[e].taxFor[i].countryId=a)}else l.taxData[e].taxFor[i].taxForOption=[],"search"!=n&&(l.taxData[e].taxFor[i].countryId=a)}))}},getSelected:function(t,a){Array.isArray(a)&&(t.value=a),"object"===Object(n["a"])(a)&&("state"==t.taxForName?t.stateId=a:"district"==t.taxForName?t.districtId=a:"zipcode"==t.taxForName&&(t.zipCodeId=a))},RemoveTaxRow:function(t,a,e){var i=this;i.confirmR(i.$t("ConfirmDeleteField"),!0,null,(function(s){i.taxData[a].taxFor[e].taxItem.splice(t,1)}))},RemoveTaxForRow:function(t,a,e){var i=this;i.confirmR(i.$t("ConfirmDeleteField"),!0,null,(function(e){i.taxData[a].taxFor.splice(t,1)}))},ShowSearchData:function(t,a){var e=this,i="id=&moduleName=".concat(e.$route.params.moduleName,"&type=").concat(a);o["a"].getDDLData(i+"&search="+escape(t)).then((function(t){var a=t.data;null!=a&&(e.CountryData=a.DATA.map((function(t){return{value:t.value,label:t.name}})))}))},MakeNormalArray:function(t){if(t)try{return JSON.parse(t)}catch(a){return t}else t=[]},FetchData:function(){var t=[{name:"country"},{name:"state"},{name:"district"},{name:"zipcode"}],a=this,e="id=".concat(a.$route.params.id);o["a"].GetProductTypeTax(e).then((function(e){if(null!=e.data){var i=e.data.DATA;if(null!=i){var s,n=Object(m["a"])(t);try{for(n.s();!(s=n.n()).done;){var o=s.value,r=o.name,l=h.a.grep(i,(function(t,a){return t.TAX_FOR==r}));if(l.length>0){var c=[],d="",u="";h.a.each(l,(function(t,e){var s=[],n=[];if("country"==r?(d=e.TAX_COUNTRY,s=h.a.grep(i,(function(t,a){return t.TAX_FOR==r&&t.TAX_COUNTRY==e.TAX_COUNTRY}))):"state"==r?(d=e.TAX_STATE,s=h.a.grep(i,(function(t,a){return t.TAX_FOR==r&&t.TAX_STATE==e.TAX_STATE}))):"district"==r?(d=e.TAX_DISTRICT,s=h.a.grep(i,(function(t,a){return t.TAX_FOR==r&&t.TAX_DISTRICT==e.TAX_DISTRICT}))):"zipcode"==r&&(d=e.TAX_ZIPCODE,s=h.a.grep(i,(function(t,a){return t.TAX_FOR==r&&t.TAX_ZIPCODE==e.TAX_ZIPCODE}))),s.length>0){if(n=[],d!=u){h.a.each(s,(function(t,a){var e={taxName:a.TAX_NAME,taxType:a.TAX_TYPE,taxValue:a.TAX_RATE};n.push(e)}));var o=[],l=[];if(""!=s[0].TAX_COUNTRY_OPTIONS&&(l=a.MakeNormalArray(s[0].TAX_COUNTRY_OPTIONS)),""!=s[0].TAX_ZIPCODE_OPTIONS&&"zipcode"==r?o=a.MakeNormalArray(s[0].TAX_ZIPCODE_OPTIONS):""!=s[0].TAX_DISTRICT_OPTIONS&&"district"==r?o=a.MakeNormalArray(s[0].TAX_DISTRICT_OPTIONS):""!=s[0].TAX_STATE_OPTIONS&&"state"==r&&(o=a.MakeNormalArray(s[0].TAX_STATE_OPTIONS)),null!=o&&o.length>0){var m={taxForName:r,countryId:l,stateId:o,districtId:o,zipCodeId:o,taxForOption:o,taxItem:n};c.push(m)}else{m={taxForName:r,countryId:l,stateId:s[0].TAX_STATE,districtId:s[0].TAX_DISTRICT,zipCodeId:s[0].TAX_ZIPCODE,taxForOption:o,taxItem:n};c.push(m)}}"country"==r?u=s[0].TAX_COUNTRY:"state"==r?u=s[0].TAX_STATE:"district"==r?u=s[0].TAX_DISTRICT:"zipcode"==r&&(u=s[0].TAX_ZIPCODE)}else{n=[{taxName:"",taxType:"",taxValue:""}];m={taxForName:r,countryId:e.TAX_COUNTRY,stateId:e.TAX_STATE,districtId:e.TAX_DISTRICT,zipCodeId:e.TAX_ZIPCODE,taxForOption:[],taxItem:n};c.push(m)}}));var p={forName:r,taxFor:c};a.taxData.push(p)}else a.RenderItem(r)}}catch(f){n.e(f)}finally{n.f()}}else a.RenderEmptyData(t)}else a.RenderEmptyData(t)}))},RenderEmptyData:function(t){var a,e=Object(m["a"])(t);try{for(e.s();!(a=e.n()).done;){var i=a.value;this.RenderItem(i.name)}}catch(s){e.e(s)}finally{e.f()}},RenderItem:function(t){var a=[{taxName:"",taxType:"",taxValue:""}],e=[{taxForName:t,countryId:"",stateId:"",districtId:"",zipCodeId:"",taxForOption:[],taxItem:a}],i={forName:t,taxFor:e};this.taxData.push(i)},AddItem:function(t,a){var e={taxName:"",taxType:"",taxValue:""};this.taxData[t].taxFor[a].taxItem.push(e)},AddMoreTax:function(t,a){var e=[{name:"country"},{name:"state"},{name:"district"},{name:"zipcode"}],i=[{taxName:"",taxType:"",taxValue:""}],s={taxForName:e[t].name,countryId:"",stateId:"",districtId:"",zipCodeId:"",taxForOption:[],taxItem:i};this.taxData[a].taxFor.push(s)},createString:function(t,a){return t.map((function(t){return""+t[a]})).join(",")},SaveTax:function(){var t=this;this.$refs.form.validate().then((function(a){if(a&&t.taxData.length>0){var e=t,i=[];h.a.each(t.taxData,h.a.proxy((function(t,a){h.a.each(a.taxFor,(function(t,a){h.a.each(a.taxItem,(function(t,s){var o=a.countryId;"object"!==Object(n["a"])(a.countryId)||Array.isArray(a.countryId)?Array.isArray(a.countryId)&&(o=e.createString(a.countryId,"value")):o=a.countryId.value;var r=a.stateId;Array.isArray(a.stateId)&&(r=e.createString(a.stateId,"value"));var l=a.districtId;Array.isArray(a.districtId)&&(l=e.createString(a.districtId,"value"));var c=a.zipCodeId;if(Array.isArray(a.zipCodeId)&&(c=e.createString(a.zipCodeId,"value")),""!=o){var d={name:s.taxName,taxFor:a.taxForName,countryId:o,stateId:"state"==a.taxForName?r:"",districtId:"district"==a.taxForName?l:"",zipCodeId:"zipcode"==a.taxForName?c:"",taxType:s.taxType,taxValue:s.taxValue};i.push(d)}}))}))}),t));var s={productTypeId:e.$route.params.id,taxData:i},r=JSON.stringify(s);o["a"].SaveTax(r).then((function(t){if("Success"==t.data[0].Status){if(0==i.length)return e.ShowAlert(e.$t("Select Atleast one type of tax."),"warning",!0,e.$t("Alert")),!1;var a=e.ShowAlert(e.$t("AddedSuccess",[e.$t("Tax")]),"success",!0,e.$t("Alert"));e.$emit("close"),setTimeout((function(){a.modal("hide")}),1500)}}))}}))}}},b=v,g=e("2877"),x=Object(g["a"])(b,d,u,!1,null,null,null),C=x.exports,_=e("3e9a"),y=e("9dbd"),T={components:{crmtimeline:r["a"],crmnote:l["a"],crmattachment:c["a"],taxdata:C,modalattachment:y["a"],crmreadmore:_["a"]},data:function(){return{activeKey:1,isNotes:!1,isTax:!1,isAttachment:!1,iscontactDetails:null,LeftViewData:[],RightViewData:null,showAttachmentModal:!1,attachmentData:[],activitiesData:null,productData:null,noteData:[],productHeaders:null,contactsData:null,contactsHeader:null,timelinedata:[],priceHeader:null,priceData:null,noRecordForTab:!1,isShowNoteDialogue:null,showPriceBookModal:null,showtaxModal:!1,imagePath:"",itemTypeName:"--",noteText:"",SortBy:"",SortExp:"",PageNumber:1,PageSize:50,currentTab:"",NoteListType:"list",userid:null,companyId:null,containername:null,ApiURL:"id=".concat(this.$route.params.id,"&moduleName=").concat(this.$route.params.moduleName,"&subModuleCode=").concat(this.$route.params.subModuleCode),maxsize:"@TALYGEN.Models.ConfigurationRepository.GetConfigurationValueByKey(companyId, userid, 'CRM', 'CRMPerFileSize')",disallowedfiletypes:"@TALYGEN.Models.ConfigurationRepository.GetConfigurationValueByKey(companyId, userid, 'CRM', 'CRMPerFileSize'))",isShowNotePopup:!1,isLoading:!1}},created:function(){this.userid=this.GetUserInfo.ID,this.companyId=this.GetUserInfo.CompanyId,this.containername=this.GetUserInfo.ContainerName,this.FetchData()},updated:function(){var t=this;setTimeout((function(){t.setHeaderForSelectedTab()}),500),h()("#ancActivityExpandAllCollapseAll").click((function(){"0"==h()(this).attr("show")?(h()(this).attr("show","1"),h()("#divconversationbox").find("#accordion").find(".collapse").addClass("show")):(h()(this).attr("show","0"),h()("#divconversationbox").find("#accordion").find(".collapse").removeClass("show"))}))},methods:{DisableButton:function(){var t=this;t.isNotes=!1,t.isAttachment=!1},GetLocalizedValue:function(t,a){if(this.isBlank(a)){var e=this.$t(String(t));return e||/^\s*$/.test(e)?e:(e=this.$t(String(t)),e||/^\s*$/.test(e)?e:t)}e=this.$t(String(a));return e||/^\s*$/.test(e)?e:(e=this.$t(String(a)),e||/^\s*$/.test(e)?e:a)},openShowNotePopup:function(){var t=this;"undefined"===typeof t.checkForAdditionalPermission||t.checkForAdditionalPermission("AddNote")?(t.isShowNotePopup=!0,h()("#tab-notes").trigger("click"),t.loadData("notes")):vm.ShowAlert(vm.$t("additionalOwnerAuthorityWarning"),"warning",!0,vm.$t("Alert"))},checkPrivilegeDetailsForOwner:function(t,a){GetPrivilege("@Url.Action(AddAdditionalowner, CRM)",!0,!1)?this.openAddAdditionalOwner(null):t.preventDefault()},FilterDDLandNormalValue:function(t){if(!(t&&t.length>0))return"";try{return JSON.parse(t)[0].name}catch(a){return""}},openCRMAttachmentModal:function(){"undefined"===typeof this.checkForAdditionalPermission||this.checkForAdditionalPermission("AddAttachment")?this.showAttachmentModal=!this.showAttachmentModal:alertR(Globalize.localize("additionalOwnerAuthorityWarning"),!0,Globalize.localize("Alert"))},FilterDDLValueForID:function(t){if(!(t.length>0))return"";try{return"object"==Object(n["a"])(JSON.parse(t)[0])?JSON.parse(t)[0].value:JSON.parse(t)[0]}catch(a){return""}},FetchData:function(){var t=this;t.isLoading,o["a"].FormLayoutView(t.ApiURL).then((function(a){var e=a.data.LEFTDATA;if(t.timelinedata=[],e=h.a.grep(e,(function(t,a){return"YES"==t.form_field_visibility})),t.imagePath=a.data.IMAGEPATH,null!=a.data.RIGHTDATA&&a.data.RIGHTDATA.length>0){var i=a.data.RIGHTDATA,s="";h.a.each(i,h.a.proxy((function(a,e){s=t.$options.filters.formatDate(e.Complete_datetime);var n=h.a.grep(this.timelinedata,(function(t,a){return t.groupKey==s}));if(0==n.length){var o=h.a.grep(i,(function(a,e){return t.$options.filters.formatDate(a.Complete_datetime)==s}));if(o.length>0){var r={groupKey:s,groupData:o};t.timelinedata.push(r)}}}),t)),t.isLoading=!1,t.noRecordForTab=!1}else t.noRecordForTab=!0;if(null!=e&&e.length>0){var n=e[0].group_id;h.a.each(e,h.a.proxy((function(a,i){"asset_type"==i.name&&(t.itemTypeName=i.value);var s=h.a.grep(t.LeftViewData,(function(t,a){return t.group_id==n}));if(0==s.length){var o=h.a.grep(e,(function(t,a){return t.group_id==n}));if(o.length>0){var r={group_id:n,group_name:o[0].group_name,LeftViewData:o};t.LeftViewData.push(r)}}n=i.group_id}),t))}setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.RadioButtonBootstrap()}),500)}))},changeDateForAddNoteUsrEnd:function(t){try{var a=Globalize.culture().calendar.patterns.t;a=String(a).replace("t","A").replace("t","");var e=new Date(moment(String(t)).year(),moment(String(t)).month(),moment(String(t)).date(),moment(String(t)).hours(),moment(String(t)).minutes());return userTimeZone[0].indexOf("+")>=0?(e=new Date(e.setHours(e.getHours()-parseInt(userTimeZone[0].replace("+","")))),e=new Date(e.setMinutes(e.getMinutes()-parseInt(userTimeZone[1])))):userTimeZone[0].indexOf("-")>=0&&(e=new Date(e.setHours(e.getHours()+parseInt(userTimeZone[0].replace("-","")))),e=new Date(e.setMinutes(e.getMinutes()+parseInt(userTimeZone[1])))),moment(e,"YYYY-MM-DD HH:mm").format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(a))}catch(i){a=Globalize.culture().calendar.patterns.t;return a=String(a).replace("t","a").replace("t",""),moment(String(t)).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(a))}},openNoteDialogue:function(){this.isShowNoteDialogue=!this.isShowNoteDialogue},openPriceBookModel:function(t){this.iscontactDetails=t,this.showPriceBookModal=!this.showPriceBookModal},loadData:function(t,a){var e=this;e.currentTab=t,e.DisableButton(),"attachments"==t?(e.isAttachment=!0,e.activeKey=3):"notes"==t?(e.isNotes=!0,e.activeKey=2,a&&"savenote"==a&&(e.isShowNotePopup=!1)):"tax"==t&&(e.isTax=!0,e.activeKey=4),""!=t&&null!=t&&("attachments"==t?o["a"].AttachmentListing(e.ApiURL).then((function(t){null!=t.data?(e.attachmentData=t.data.data,setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordForTab=!1):e.noRecordForTab=!0})):"timeline"==t?(e.activeKey=1,e.isDetailPage=!0,o["a"].TimelineListing(e.ApiURL).then((function(t){if(null!=t.data){e.timelinedata=[];var a=t.data.data,i="";h.a.each(a,h.a.proxy((function(t,s){i=e.$options.filters.formatDate(s.Complete_datetime);var n=h.a.grep(e.timelinedata,(function(t,a){return t.groupKey==i}));if(0==n.length){var o=h.a.grep(a,(function(t,a){return e.$options.filters.formatDate(t.Complete_datetime)==i}));if(o.length>0){var r={groupKey:i,groupData:o};e.timelinedata.push(r)}}}),e)),setTimeout((function(){e.CheckBoxBootstrap()}),100),e.noRecordForTab=!1}else e.noRecordForTab=!0}))):"notes"==t&&(e.noteData=[],o["a"].NoteListing(e.ApiURL).then((function(t){null!=t.data&&t.data.data.length>0?(e.noteData=t.data.data,setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.setHeaderForSelectedTab()}),500),setTimeout((function(){e.bindLeftTabEventForSetHeading()}),500),e.noRecordForTab=!1):(setTimeout((function(){e.setHeaderForSelectedTab()}),500),setTimeout((function(){e.bindLeftTabEventForSetHeading()}),500),e.noRecordForTab=!0)}))))}}},A=T,S=Object(g["a"])(A,i,s,!1,null,null,null);a["default"]=S.exports}}]);
//# sourceMappingURL=Product Type Detail.js.map