{"version":3,"sources":["webpack:///./src/views/ApprovalChain/AddApprovalChain.vue?a488","webpack:///src/views/ApprovalChain/AddApprovalChain.vue","webpack:///./src/views/ApprovalChain/AddApprovalChain.vue?d1fe","webpack:///./src/views/ApprovalChain/AddApprovalChain.vue"],"names":["data","isLoading","DataLoaded","ApprovalChainId","groupList","TagsSelectedArray","FormSchema","layoutType","Data","astype","label","$t","name","value","placeholder","config","onChange","checkName","validationRules","options","mode","buttons","type","class","text","onClick","onCancel","created","GetApprovalGroups","$route","params","id","ManageChain","methods","onSubmit","formfields","vm","jsonobj","ApprovalChainName","StatusId","Status","Groups","Array","prototype","map","call","ApprovalGroup","item","join","Description","poststring","JSON","stringify","DataService","AddApprovalChain","then","response","ShowAlert","GetApprovalGroupByCompanyId","json","forEach","index","push","APPROVAL_GROUP_NAME","APPROVAL_GROUP_ID","url","GetByChainId","chainData","parse","length","approval_chain_name","status_id","GROUPS","split","UserList","i","obj","find","x","undefined","description","$router","e","Fields","chainName","CheckDuplicate","required"],"mappings":"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","file":"js/chunk-2d217725.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('loader',{attrs:{\"is-visible\":_vm.isLoading}}),_c('div',[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12 padding-t_8\"},[_c('div',{staticClass:\"theme-primary partition-full\"},[_c('span',{staticClass:\"p-name text-white\"},[_vm._v(_vm._s(_vm.$t('AddApprovalChain')))])])])])]),_c('div',{staticClass:\"border p-3\"},[_c('dynamic-form',{attrs:{\"lang\":\"en\",\"buttons\":_vm.buttons,\"schema\":_vm.FormSchema},on:{\"OnSubmit\":_vm.onSubmit}}),_c('small',{staticClass:\"text-danger\"},[_vm._v(\"Fields marked with an asterisk (*) are mandatory.\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"en\">\r\n    <section>\r\n        <loader :is-visible=\"isLoading\"></loader>\r\n        <div>\r\n            <div class=\"row\">\r\n                <div class=\"col-md-12 padding-t_8\">\r\n                    <div class=\"theme-primary partition-full\">\r\n                        <span class=\"p-name text-white\">{{$t('AddApprovalChain')}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"border p-3\">\r\n            <dynamic-form lang=\"en\" :buttons=\"buttons\" :schema=\"FormSchema\" v-on:OnSubmit=\"onSubmit\"></dynamic-form>\r\n            <small class=\"text-danger\">Fields marked with an asterisk (*) are mandatory.</small>\r\n        </div>\r\n    </section>\r\n    </template>\r\n    \r\n<script>\r\nimport DataService from '../../service/DataService';\r\nexport default {\r\n\r\n    data() {\r\n\r\n        return {\r\n            isLoading: false,\r\n            DataLoaded: 0,\r\n            ApprovalChainId: 0,\r\n            groupList: [],\r\n            TagsSelectedArray: [],\r\n            FormSchema: [{\r\n                layoutType: \"triple\",\r\n                Data: [{\r\n                    astype: \"TextField\",\r\n                    label: this.$t('ApprovalChainName'),\r\n                    name: \"ApprovalChainName\",\r\n                    value: \"\",\r\n                    placeholder: \"\",\r\n                    config: {\r\n                        onChange: this.checkName\r\n                    },\r\n                    validationRules: {\r\n                        \"required\": true\r\n                    },\r\n\r\n                },\r\n                {\r\n                    astype: \"SelectField\",\r\n                    label: this.$t('Status'),\r\n                    name: \"Status\",\r\n                    value: 1001,\r\n                    placeholder: \"\",\r\n                    validationRules: {\r\n                        \"required\": true\r\n                    },\r\n                    config: {\r\n                        options: [{\r\n                            value: \"1001\",\r\n                            name: 'Active'\r\n                        }, {\r\n                            value: \"1002\",\r\n                            name: 'Inactive'\r\n                        }]\r\n                    },\r\n                },\r\n                {\r\n                    astype: \"MultiSelectField\",\r\n                    label: this.$t('SelectApprovalGroup'),\r\n                    name: \"ApprovalGroup\",\r\n                    value: \"\",\r\n                    mode: \"tag\",\r\n                    placeholder: \"\",\r\n                    validationRules: {\r\n                        \"required\": true\r\n                    },\r\n                    config: {\r\n                        options: []\r\n                    },\r\n                },\r\n\r\n                ]\r\n            },\r\n            {\r\n                layoutType: \"Single\",\r\n                Data: [{\r\n                    astype: \"TextAreaField\",\r\n                    label: this.$t('Description'),\r\n                    name: \"Description\",\r\n                    value: \"\",\r\n                    placeholder: \"\",\r\n                    validationRules: {\r\n                        \"required\": false\r\n                    },\r\n                },]\r\n            },\r\n            ],\r\n            buttons: [{\r\n                type: \"submit\",\r\n                class: \"btn btn-success\",\r\n                text: \"<i class='fa fa-save pr-2'></i>Save\",\r\n            },\r\n\r\n            {\r\n                type: \"button\",\r\n                class: \"btn btn-danger\",\r\n                text: \"<i class='fa fa-close pr-2'></i>Cancel\",\r\n                onClick: this.onCancel\r\n            }\r\n            ],\r\n        }\r\n    },\r\n    created: async function () {\r\n        await this.GetApprovalGroups();\r\n        if (this.$route.params.id != null) {\r\n            this.ApprovalChainId = this.$route.params.id;\r\n            await this.GetApprovalGroups();\r\n            await this.ManageChain();\r\n        }\r\n        this.DataLoaded = 1;\r\n    },\r\n    methods: {\r\n        onSubmit: function (formfields) {\r\n            var vm = this;\r\n            var jsonobj = {\r\n                ApprovalChainId: vm.ApprovalChainId,\r\n                ApprovalChainName: formfields.ApprovalChainName,\r\n                StatusId: formfields.Status,\r\n                Groups: Array.prototype.map.call(formfields.ApprovalGroup, function (item) {\r\n                    return item.value;\r\n                }).join(\",\"),\r\n                Description: formfields.Description,\r\n            }\r\n            var poststring = JSON.stringify(jsonobj);\r\n            DataService.AddApprovalChain(poststring).then(response => {\r\n                if (response.data == '-1') {\r\n                    vm.ShowAlert(vm.$t('AlreadyExists'), \"warning\", true, vm.$t(\"Alert\"));\r\n                    vm.onCancel();\r\n                } else if (response.data == '-2') {\r\n                    vm.ShowAlert(vm.$t('AlreadyExists'), \"warning\", true, vm.$t(\"Alert\"));\r\n                    vm.onCancel();\r\n                } else if (response.data == '-3') {\r\n                    vm.ShowAlert(vm.$t(\"Something went Wrong\"), \"failure\", true, vm.$t('Alert'));\r\n                    vm.onCancel();\r\n                } else {\r\n                    vm.ShowAlert(vm.$t(\"ApprovalChainSuccessfullyAdded\"), \"Success\", true, vm.$t('Alert'));\r\n                    vm.onCancel();\r\n                }\r\n            });\r\n        },\r\n\r\n        GetApprovalGroups: async function () {\r\n            var vm = this;\r\n            DataService.GetApprovalGroupByCompanyId().then(response => {\r\n                var json = response.data;\r\n                if (json != null) {\r\n                    json.forEach(function (item, index) {\r\n                        (vm.FormSchema)[0].Data[2].config.options.push({\r\n                            name: item.APPROVAL_GROUP_NAME,\r\n                            value: `${item.APPROVAL_GROUP_ID}`\r\n                        })\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        ManageChain: async function () {\r\n            var vm = this;\r\n            vm.isLoading = true;\r\n            var url = `id=${this.$route.params.id}`\r\n            await DataService.GetByChainId(url).then(response => {\r\n                var chainData = JSON.parse(response.data)\r\n                if (chainData.length > 0) {\r\n                    (this.FormSchema)[0].Data[0].value = chainData[0].approval_chain_name;\r\n                    (this.FormSchema)[0].Data[1].value = chainData[0].status_id;\r\n                    vm.groupList = chainData[0].GROUPS.split(\",\");\r\n                    var UserList = [];\r\n                    for (let i = 0; i < vm.groupList.length - 1; i++) {\r\n                        UserList.push(vm.groupList[i]);\r\n                    }\r\n                    UserList.forEach((item) => {\r\n                        var obj = (vm.FormSchema)[0].Data[2].config.options.find(x => x.value == item);\r\n                        if (obj != undefined) {\r\n                            vm.TagsSelectedArray.push({\r\n                                label: obj.name,\r\n                                value: obj.value\r\n                            })\r\n                        }\r\n                    });\r\n                    (this.FormSchema)[0].Data[2].value = vm.TagsSelectedArray;\r\n                    (this.FormSchema)[1].Data[0].value = chainData[0].description;\r\n                }\r\n            })\r\n            vm.isLoading = false;\r\n        },\r\n        onCancel: function () {\r\n            this.$router.push({\r\n                name: 'Approval Chain'\r\n            });\r\n        },\r\n        checkName(e, Fields) {\r\n            var vm = this;\r\n            var chainName = Fields.value\r\n            var url = `ApprovalChainName=${chainName}`\r\n            DataService.CheckDuplicate(url).then(response => {\r\n                if (response.data == true && vm.FormSchema[0].Data[0].value) {\r\n                    vm.FormSchema[0].Data[0].value = '';\r\n                    vm.ShowAlert(vm.$t('ChainExist'), \"warning\", true, vm.$t(\"Alert\"));\r\n                    vm.FormSchema[0].Data[0].validationRules.required = true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n</script>\r\n    ","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddApprovalChain.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddApprovalChain.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AddApprovalChain.vue?vue&type=template&id=4c07ad16&lang=en\"\nimport script from \"./AddApprovalChain.vue?vue&type=script&lang=js\"\nexport * from \"./AddApprovalChain.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}