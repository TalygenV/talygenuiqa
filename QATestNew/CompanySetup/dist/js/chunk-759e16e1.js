(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-759e16e1"],{"0cb2":function(e,t,a){"use strict";var i=a("e330"),o=a("7b0b"),n=Math.floor,l=i("".charAt),s=i("".replace),r=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,a,i,u,m){var f=a+e.length,h=i.length,p=d;return void 0!==u&&(u=o(u),p=c),s(m,p,(function(o,s){var c;switch(l(s,0)){case"$":return"$";case"&":return e;case"`":return r(t,0,a);case"'":return r(t,f);case"<":c=u[r(s,1,-1)];break;default:var d=+s;if(0===d)return o;if(d>h){var m=n(d/10);return 0===m?o:m<=h?void 0===i[m-1]?l(s,1):i[m-1]+l(s,1):o}c=i[d-1]}return void 0===c?"":c}))}},"44e7":function(e,t,a){"use strict";var i=a("861d"),o=a("c6b6"),n=a("b622"),l=n("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[l])?!!t:"RegExp"===o(e))}},"502a":function(e,t,a){"use strict";a("f372")},"5b81":function(e,t,a){"use strict";var i=a("23e7"),o=a("c65b"),n=a("e330"),l=a("1d80"),s=a("1626"),r=a("7234"),c=a("44e7"),d=a("577e"),u=a("dc4a"),m=a("90d8"),f=a("0cb2"),h=a("b622"),p=a("c430"),S=h("replace"),g=TypeError,T=n("".indexOf),v=n("".replace),C=n("".slice),b=Math.max;i({target:"String",proto:!0},{replaceAll:function(e,t){var a,i,n,h,A,M,D,E,_,y=l(this),I=0,w=0,N="";if(!r(e)){if(a=c(e),a&&(i=d(l(m(e))),!~T(i,"g")))throw new g("`.replaceAll` does not allow non-global regexes");if(n=u(e,S),n)return o(n,e,y,t);if(p&&a)return v(d(y),e,t)}h=d(y),A=d(e),M=s(t),M||(t=d(t)),D=A.length,E=b(1,D),I=T(h,A);while(-1!==I)_=M?d(t(A,I,h)):f(A,h,I,[],void 0,t),N+=C(h,w,I)+_,w=I+D,I=I+E>h.length?-1:T(h,A,I+E);return w<h.length&&(N+=C(h,w)),N}})},"8cc6":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".left-tab-container[data-v-2b7f3374]{max-height:70vh;overflow-y:auto}.left-tab .nav-link.left-menu a[data-v-2b7f3374]{width:100%;display:flex}.left-tab .nav-link.left-menu.active .listing[data-v-2b7f3374],.left-tab .nav-link.left-menu[data-v-2b7f3374]:hover,.listing[data-v-2b7f3374]:hover{color:#fff}",""]),e.exports=t},"90d8":function(e,t,a){"use strict";var i=a("c65b"),o=a("1a2d"),n=a("3a9b"),l=a("ad6d"),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||o(e,"flags")||!n(s,e)?t:i(l,e)}},aae2:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left-menu-tab mt-2"},[e._m(0),a("div",{staticClass:"left-tab-container"},[a("div",{staticClass:"mb-0 d-lg-block p-2 border"},[a("div",{staticClass:"input-group customsearchbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.MainSearchmodel,expression:"MainSearchmodel"}],staticClass:"form-control searchcustomfilter border-right-0",attrs:{type:"text",maxlength:"50",id:"searchinput",placeholder:"Search by Name",autocomplete:"off"},domProps:{value:e.MainSearchmodel},on:{keydown:e.ListFiltering,keyup:e.ListFiltering,mouseup:e.SelectAllSearch,mouseleave:e.SelectAllSearch,input:function(t){t.target.composing||(e.MainSearchmodel=t.target.value)}}}),e._m(1)])]),a("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab lefttabiconfix"},e._l(0==e.searchColumnfilter.length?e.leftTabList:e.searchColumnfilter,(function(t){return a("li",{class:{"nav-link left-menu":!0,active:t.goTo===e.$route.path}},[a("router-link",{staticStyle:{"align-items":"center"},attrs:{to:t.goTo}},[a("div",{staticClass:"listing"},[a("i",{staticClass:"mr-2",class:t.icon}),e._v(e._s(t.title))])])],1)})),0)])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"theme-primary partition"},[a("span",{staticClass:"p-name text-white"},[e._v("Company Setup")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text bg-transparent bg-white border-left-0"},[a("i",{staticClass:"fa fa-search"})])])}],n=(a("14d9"),a("5b81"),{name:"listing-status",props:{HeaderText:{type:String,required:!0}},data:function(){return{GetSelectedValue:"",Header:this.HeaderText,searchColumnfilter:[],Header:this.HeaderText,leftTabList:[{title:"Announcement",icon:"fa fa-bullhorn",goTo:"/AnnouncementMessage/Index"},{title:"Break",icon:"fa fa-clock-o",goTo:"/Break/Index"},{title:"Category",icon:"fa fa-tasks",goTo:"/Category/Index"},{title:"Channel",icon:"fa fa-television",goTo:"/Channel/Index"},{title:"Company Holiday",icon:"fa fa-calendar",goTo:"/CompanyHoliday/Index"},{title:"Company Notification",icon:"fa fa-bell",goTo:"/CompanyNotification/Index"},{title:"Contact Type",icon:"fa fa-list-alt",goTo:"/ContactType/Index"},{title:"Currency Management",icon:"fa fa-list-alt",goTo:"/CurrencyManagement/Index"},{title:"Department",icon:"fa fa-users",goTo:"/Department/Index"},{title:"Designation",icon:"fa fa-address-card",goTo:"/Designation/Index"},{title:"Email Template",icon:"fa fa-clock-o",goTo:"/EmailTemplate/Index"},{title:"Feedback",icon:"fa fa-map-marker",goTo:"/Feedback/Index"},{title:"Greeting",icon:"fa fa-thumbs-o-up",goTo:"/Greeting/Index"},{title:"Industry Type",icon:"fa fa-building-o",goTo:"/IndustryType/Index"},{title:"Immigration",icon:"fa fa-address-card",goTo:"/Immigration/Index"},{title:"Location",icon:"fa fa-map-marker",goTo:"/Location/Index"},{title:"Login Authorization",icon:"fa fa-map-marker",goTo:"/LoginAuthorization/Index"},{title:"Payment Gateway",icon:"fa fa-clock-o",goTo:"/PaymentGateway/Index"},{title:"Provisional Right",icon:"fa fa-map-marker",goTo:"/ProvisionalRight/Index"},{title:"Review Template",icon:"fa fa-clock-o",goTo:"/ReviewTemplate/Index"},{title:"Service",icon:"fa fa-star",goTo:"/Service/Index"},{title:"Shift",icon:"fa fa-clock-o",goTo:"/Shift/Index"},{title:"Skill",icon:"fa fa-star",goTo:"/Skill/Index"},{title:"Stage",icon:"fa fa-bar-chart",goTo:"/Stage/Index"},{title:"Status",icon:"fa fa-bar-chart",goTo:"/Status/Index"},{title:"User Title",icon:"fa fa-star",goTo:"/UserTitle/Index"}]}},methods:{SelectAllSearch(){var e=this;e.GetSelectedValue=window.getSelection().toString()},ListFiltering(){var e=this,t=document.getElementById("searchinput"),a=t.value;""!=e.GetSelectedValue&&(a=a.replaceAll(e.GetSelectedValue,""),e.GetSelectedValue="");var i=[],o=[];e.leftTabList.forEach(t=>{o.push(t),i=o.filter(t=>{var i=e.$t(t.title);return i.replace(/\W/g,"").toLowerCase().includes(a.replace(/\W/g,"").toLowerCase())})}),e.searchColumnfilter=i,o=[],i=[]}}}),l=n,s=(a("502a"),a("2877")),r=Object(s["a"])(l,i,o,!1,null,"2b7f3374",null);t["a"]=r.exports},ad6d:function(e,t,a){"use strict";var i=a("825a");e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},bf79:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 mt-2"},[a("LeftColumn")],1),e.isShowList?a("div",{staticClass:"col-10"},[a("tg-list",{attrs:{IsShowAction:!1,showCheckBox:!0,ModuleName:"CRM",SubModuleCode:"CRM_SMS_TEMPLATE",IdentityColumn:"TEMPLATE_ID",HeaderText:e.$t("SMSTemplate"),ListData:e.TemplateData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecord,IsSearchFieldsOnTop:!1,SearchPosition:"top",SearchFields:e.topSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,IsFilterApplied:!!e.searchCondition,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function(t){var i=t.data;return["STATUS_ID"==i.column.COLUMN_NAME?[e.isCRMShowStausDrop(i.row.STATUS_ID,"COMPANYSETUP_UPDATE")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"CRM_SMS_TEMPLATE",dataid:i.row.TEMPLATE_ID,"data-controller":"COMPANYSETUP_UPDATE",statuslist:e.StatusListForListing,item:i.row,"data-action":"index",module:"CRM",subModule:"CRM_SMS_TEMPLATE",dataselected:1001==i.row.STATUS_ID?"Active":"Inactive",callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e()]:e._e()]}}],null,!1,3374912101)},[e._v("+ ")])],1):e._e(),e.ShowmodalManageSMSTemplate?a("modalManageSMSTemplate",{attrs:{GetTemplateData:e.GetTemplateData},on:{close:function(t){e.ShowmodalManageSMSTemplate=!1}}}):e._e()],1)],1)},o=[],n=a("aae2");let l=[{title:"Add SMS Template",iconClass:"fa-plus",callbackfunction:"modalManageSMSTemplate",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:""},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0}],s=[{fieldName:"Search by Name",fieldType:"text",fieldSearchConditionName:["TEMPLATE_NAME"],isSearch:!0}],r=[{title:"View",href:"javascript:void(0)",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"javascript:void(0)",callbackfunction:"modalAddSMSCampaign",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"Delete",additionalSpan:""}];var c={buttons:l,listActions:r,topsearchSchema:s},d=a("9769"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"right-content"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"container-fluid border-0 m-0 p-0"},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("AddSMSTemplate")))]),a("span",{staticClass:"p-actions float-right tablehead"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"/SMSTemplate/Index"}},[a("i",{staticClass:"fa fa-angle-double-left"}),a("br"),e._v(e._s(e.$t("BacktoList")))])])])])])]),a("div",{staticClass:"col-sm-12 col-md-6 p-0 float-right bg-light p-4"},[a("div",{staticClass:"mobilebase mx-auto"},[e._m(0),a("div",{staticClass:"col-12 p-2 bg-light border",staticStyle:{"min-height":"350px"}},[a("div",{staticClass:"col-12",attrs:{id:"textcontent"}},[a("span",{domProps:{innerHTML:e._s(e.editorData)}})])])]),a("div",{staticClass:"col-12 float-left mt-3"},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"w-100 centre-flex"},[a("dynamic-form",{ref:"AddForm2",attrs:{lang:"en",buttons:e.Testbuttons,schema:e.TestFormSchema},on:{OnSubmit:e.onTestSubmit}})],1)])])]),a("dynamic-form",{ref:"AddForm",attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-Content",fn:function(t){var i=t.data;return[a("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}}),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Content"}},[e._v(e._s(i.error))])]}}])})],1)},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 bg-light p-2 border"},[a("em",{staticClass:"fa fa-bars text-secondary"})])}],f=(a("14d9"),a("b7ef"),{props:{GetTemplateData:{type:Object},item:{type:String}},data(){return{isLoading:!1,blobPath:"https://cogniterblob.blob.core.windows.net/",attachments:[],ProfileId:0,SendThrough:"",TwilioAccountSid:"",TwilioAuthToken:"",TwilioPhoneNumber:"",FileName:null,CustomValue:[],TiggerData:[],MobileNumber:"",CompanyId:null,TEMPLATE_ID:0,ContainerName:null,UserId:null,ModuleName:"CRM",SubModuleCode:"CRM_SMS_TEMPLATE",fileData:[],editor:this.CLASSIC_EDITOR,editorData:"",Content:"",sourceType:null,imagePath:"",FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("name"),name:"template_name",value:"",placeholder:"",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("CustomValue"),name:"CustomValue",value:"",placeholder:"",config:{options:[],onChange:this.onChangeCustomValueTrigger},validationRules:{required:!1}},{astype:"SelectField",label:this.$t("TriggerLink"),name:"TiggerData",value:"",placeholder:"",config:{options:[],onChange:this.onChangeCustomTrigger},validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Content",value:"",placeholder:"",validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"FileField",label:this.$t("FileControlText"),name:"attachments",value:"",placeholder:"Select",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],showSelectedFiles:[],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,options:[],multiple:!0},validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onclick:this.onSubmit},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Cancel}],TestFormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Mobilenumber"),name:"MobileNumber",value:"",placeholder:"Enter Mobile Number",config:{},validationRules:{required:!0}}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("SendThrough"),name:"SendThrough",value:"",placeholder:"Select",config:{options:[{name:"Twilio",value:"Twilio"},{name:"Ring Central",value:"RingCentral"}],onChange:this.onChangeSendThrough},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SendProfile"),name:"SendProfile",value:"",placeholder:"Select",config:{options:[],onChange:this.onChangeProfile},validationRules:{required:!0}}]}],Testbuttons:[{type:"Send Test",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Send Test"}]}},async created(){var e=this;e.CompanyId=e.GetUserInfo.CompanyId,e.ContainerName=e.GetUserInfo.ContainerName,e.UserId=e.GetUserInfo.ID,await e.GetCustomFieldValue(),await e.GetTriggerFieldValue(),"undefined"!=typeof e.GetTemplateData.TEMPLATE_ID&&e.EditSmsTemplate(),e.$refs.AddForm.UpdateKeyValue()},methods:{EditSmsTemplate(){var e=this;e.TEMPLATE_ID=e.GetTemplateData.TEMPLATE_ID,e.FormSchema[0].Data[0].value=e.GetTemplateData.TEMPLATE_NAME,e.FormSchema[2].Data[0].value=e.GetTemplateData.TEMPLATE_CONTENT,e.FormSchema[3].Data[0].value=e.GetTemplateData.ATTACHMENT_COUNT,e.editorData=e.GetTemplateData.TEMPLATE_CONTENT;var t=JSON.parse("["+e.GetTemplateData.ATTACHMENTS_JSON+"]");t.forEach((a,i)=>{e.FormSchema[3].Data[0].config.showSelectedFiles.push({attachmentId:""+i,attachmentName:`${a.attachement_name}.${JSON.parse(t[0].attachement_MIME).Extension}`,attachmentPath:e.blobPath+"/"+e.containerName+"/"+a.THUMB_NAIL_PATH}),e.attachments.push({value:e.blobPath+"/"+e.containerName+"/"+a.THUMB_NAIL_PATH})})},Cancel:function(){window.location.reload()},onDeleteSelectedFiles:function(e){this.$delete(this.FormSchema[3].Data[0].config,"showSelectedFiles")},onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},async GetCustomFieldValue(){var e=this,t="moduleName=CRM&subModuleCode=CRM_CAMPAIGNS,CRM_CONTACTS";await d["a"].GetCustomFieldValue(t).then((function(t){""!=t.data&&(e.CustomValue=t.data,e.CustomValue.forEach(t=>{e.FormSchema[1].Data[0].config.options.push({name:t.DISPLAY_NAME,value:t.DISPLAY_NAME})}))}))},async GetTriggerFieldValue(){var e=this,t="type=CRM_TRIGGER&moduleName=null";await d["a"].GetTriggerFieldValue(t).then((function(t){""!=t.data&&(e.TiggerData=t.data,e.TiggerData.forEach(t=>{e.FormSchema[1].Data[1].config.options.push({name:t.NAME,value:t.LINK})}))}))},onChangeCustomTrigger(e){var t=this;$("#template_content .form-control").focus(),""!=e.target.value&&(t.editorData+=e.target.value+"?_id=@id")},onChangeCustomValueTrigger(e){var t=this;$("#template_content .form-control").focus(),""!=e.target.value&&(t.editorData+="@"+e.target.value+"@")},async onChangeSendThrough(e){var t=this;t.ProfileId=0,t.SendThrough="object"==typeof e?e.target.value:e,t.TestFormSchema[1].Data[1].value="",await t.FillProfileDropdown(t.SendThrough),t.$refs.AddForm2.UpdateKeyValue()},onChangeProfile(e){var t=this;t.ProfileId=e.target.value,t.GetEmailProfile(t.ProfileId),t.$refs.AddForm2.UpdateKeyValue()},async FillProfileDropdown(e){var t=this;t.TestFormSchema[1].Data[1].config.options=[];var a="id=&moduleName=CRM&type="+e;await d["a"].GetDDLData(a+"&search=").then(e=>{if(void 0!=e.data.DATA){var a=e.data.DATA;a.forEach(e=>{t.TestFormSchema[1].Data[1].config.options.push({name:e.name,value:e.value})})}}),t.$refs.AddForm2.UpdateKeyValue()},async GetEmailProfile(e){var t=this;t.TwilioAccountSid="",t.TwilioAuthToken="",t.TwilioPhoneNumber="";var a=`profileId=${t.ProfileId}&sourceType=`;await d["a"].GetEmailProfile(a).then(e=>{if(""!=e.data){if("object"==typeof e.data)var a=JSON.parse(Object.values(e.data)[0])[0];t.TwilioAccountSid=a.key,t.TwilioAuthToken=a.SecretKey,t.TwilioPhoneNumber=a.from_email}})},async onTestSubmit(e,t){var a=this;a.isLoading=!0;var i=JSON.stringify(a.fileData);a.fileData.length>0&&await d["a"].UploadFile(i).then((function(e){if(""!=e.data){var t=e.data;t.forEach((e,t)=>{0==t?a.imagePath=e.Name:a.imagePath+=","+e.Name})}}));var o=a.removeHTMLTags(a.editorData),n=o.replace(/&nbsp;/g,"").replace(/\s+/g," "),l={Send_sms:n,Send_to:e.MobileNumber,image_path:a.imagePath,TwilioAccountSid:a.TwilioAccountSid,TwilioAuthToken:a.TwilioAuthToken,TwilioPhoneNumber:a.TwilioPhoneNumber},s=JSON.stringify(l);await d["a"].SendTwilioSMS(s).then((function(e){"queued"!=e.data||"OK"!=e.statusText&&200!=e.status?""!=e.data||"OK"!=e.statusText&&200!=e.status?a.ShowAlert(a.$t("SendSMSError",[a.$t("Message")]),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t([a.$t("InvalidNumber")]),"warning",!0,a.$t("Alert")):a.ShowAlert(a.$t([a.$t("MessageSend")]),"success",!0,a.$t("Alert"))})),a.isLoading=!1},async onSubmit(e,t){var a=this;a.isLoading=!0;var i=a.editorData;i.includes("<p>")?a.editorData=i.replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/&nbsp;/g,"").replace(/\s+/g," "):a.editorData=a.editorData;var o={template_id:a.TEMPLATE_ID,template_name:e.template_name,template_content:a.editorData},n=JSON.stringify(o);await d["a"].ManageSMSCampaign(n).then((async function(e){if(a.isLoading=!1,"INSERT"==e.data.MSG){if(e.data.MAIN_ID>0&&e.data.MAIN_ID>0){a.fileData.length>0&&a.fileData.forEach(t=>{t.id=e.data.MAIN_ID});var t=JSON.stringify(a.fileData);await d["a"].UploadFile(t).then((function(e){}))}a.ShowAlert(a.$t("AddedSuccess",[a.$t("Campaign")]),"Success",!0,a.$t("Alert")),window.location.reload()}else if("UPDATE"==e.data.MSG){if(e.data.MAIN_ID>0){if(e.data.MAIN_ID>0){a.fileData.length>0&&a.fileData.forEach(t=>{t.id=e.data.MAIN_ID});t=JSON.stringify(a.fileData);await d["a"].UploadFile(t).then((function(e){}))}a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Campaign")]),"Success",!0,a.$t("Alert")),window.location.reload()}}else"ALREADY_EXISTS"==e.data.MSG?a.ShowAlert(a.$t("AlreadyExists",[a.$t("Campaign")]),"warning",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedError",[a.$t("Campaign")]),"failure",!0,a.$t("Alert"))}))},GetBase64String:function(e){try{var t=this;t.fileData=[];const a=e.target.files;for(let e=0;e<a.length;e++){const i=a[e],o=new FileReader;o.onload=function(e){return function(a){var i=a.target.result,o=window.btoa(i),n=e.name;t.fileName=n;var l=n.lastIndexOf("."),s=n.substring(l+1,n.length);t.fileExt+="."+s;var r='{"ContentType":"'+e.type+'","Size":"'+e.size+'","Extension":"'+s+'"}',c=e.size;t.fileSize=c;var d={attachement_mime:r,fileName:e.name,base64String:o,fileSize:e.size,contentType:e.type,moduleName:"CRM",subModuleCode:"CRM_SMS_TEMPLATE",containerName:t.ContainerName,companyId:t.CompanyId,userId:t.UserId};t.fileData.push(d)}}(i),o.readAsBinaryString(i)}}catch(a){console.error(a)}},setFile:function(e){var t=this;t.file=e.target.files[0],t.FileName=e.target.files[0].name},removeHTMLTags(e){return e.replace(/<[^>]*>/g,"")}}}),h=f,p=a("2877"),S=Object(p["a"])(h,u,m,!1,null,null,null),g=S.exports,T={components:{LeftColumn:n["a"],modalManageSMSTemplate:g},data(){return{isShowList:!0,ShowmodalManageSMSTemplate:!1,isLoading:!1,TemplateData:[],listheaderbuttons:c.buttons,listActions:c.listActions,topSearchFields:c.topsearchSchema,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,templateName:"",privilegeParams:null,TotalPages:0,CurrentPage:1,searchCondition:"",GetTemplateData:{},StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],Headers:[{COLUMN_NAME:"TEMPLATE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"TEMPLATE_CONTENT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:3},{COLUMN_NAME:"TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Type",DISPLAY_ORDER:4},{COLUMN_NAME:"ATTACHMENT_COUNT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Attachment",DISPLAY_ORDER:5}]}},async created(){var e=this;await e.FetchData(),e.privilegeParams="controller=SMSTemplate&action=",await e.getStatuslistForListing("Dynamic_Reporting","en"),e.Headers.forEach(t=>{t.settings=null,"STATUS_ID"==t.COLUMN_NAME&&(t.settings={isInSlot:!0,isForTag:!0}),"TEMPLATE_NAME"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn,formatter:e.columnDataFormatter})})},mounted(){c.topsearchSchema.forEach(e=>{e.value="",e.isSearch=!1})},methods:{modalManageSMSTemplate:function(){this.ShowmodalManageSMSTemplate=!0,this.isShowList=!1},ClosemodalManageSMSTemplate:function(){this.ShowmodalManageSMSTemplate=!1},clickEventOfColumn:function(e,t){var a=this;"TEMPLATE_NAME"==t.COLUMN_NAME&&(e.TEMPLATE_ID>0?(a.reqType="Update",a.GetTemplateData=e,a.ShowmodalManageSMSTemplate=!0,a.isShowList=!1):(a.GetTemplateData={},a.ShowmodalManageSMSTemplate=!1,a.isShowList=!1))},sortdata:async function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),await this.FetchData(),$("#th-"+e+"  span:first-child").attr("class",t)},pagerMethod:async function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,await this.FetchData()},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"modalManageSMSTemplate":this.modalManageSMSTemplate();break;case"commonDeleteData":this.commonDeleteData();break}},renderActions:function(e){console.log(e)},actionButtonClick:function(e){console.log(e)},getStatuslistForListing:async function(e,t){var a=this,i="langCode="+t+"&statusType="+e+"&hasglobal=true";await d["a"].statusdropdown(i).then((function(e){if("Success"==e.data.status){var t=e.data.result;a.StatusListForListing=t.data}}))},leftCommonSearch:async function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",await this.FetchData()},FetchData:async function(){var e=this;e.isLoading=!0;var t=`templateName=${e.templateName}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&pageSize=${e.PageSize}&pageNumber=${e.PageNumber}&searchQuery=${e.searchCondition.trim()}`;await d["a"].SMSTemplateListing(t).then((function(t){e.isLoading=!1,"undefined"!=typeof t.data.data&&null!=t.data.data?(e.TemplateData=t.data.data,e.TotalRecord=t.data.data[0].Total,e.TotalPages=Math.ceil(e.TotalRecord/e.PageSize),e.CurrentPage=e.PageNumber):(e.TemplateData=[],e.TotalRecord=0)})),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500),e.isLoading=!1},commonDeleteData:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Report"),(function(){var e={ids:a,moduleName:"CRM",subModuleCode:"CRM_SMS_TEMPLATE"},i=JSON.stringify(e);d["a"].CommonDeleteData(i).then((async function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Report")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),await t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Report")]),"success",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"))}}},v=T,C=Object(p["a"])(v,i,o,!1,null,null,null);t["default"]=C.exports},f372:function(e,t,a){var i=a("8cc6");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var o=a("499e").default;o("5279c6f0",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-759e16e1.js.map