(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0dab7b"],{"6d90":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-2 mt-2"},[a("LeftColumn",{attrs:{HeaderText:t.$t("Shift")}})],1),a("div",{staticClass:"col-10"},[a("tg-list",{attrs:{IsShowAction:!1,showCheckBox:!0,ModuleName:"Dynamic_Reporting",SubModuleCode:"Dynamic_Reporting",IdentityColumn:"shift_id",HeaderText:t.$t("Shift"),ListData:t.ShiftData,HeaderData:t.filteredHeaders,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,IsSearchFieldsOnTop:!1,SearchPosition:"top",SearchFields:t.topSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,IsFilterApplied:!!t.searchCondition,LegendArray:[],sourcetype:"",NorecordfoundText:t.$t("NoRecordfound")},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,ActionButtonClick:t.actionButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["shift_type"==i.column.COLUMN_NAME?[1==i.row.shift_type?[a("div",[t._v("Flexible")])]:[a("div",[t._v("Fixed")])]]:t._e(),"status_id"==i.column.COLUMN_NAME?[t.isCRMShowStausDrop(i.row.status_id,"COMPANYSETUP_UPDATE")?a("listing-status",{ref:"updatestatus",attrs:{isfor:"COMPANYSETUP_UPDATE",dataid:i.row.shift_id,"data-controller":"COMPANYSETUP_UPDATE",statuslist:t.StatusListForListing,item:i.row.shift_id,"data-action":"index",module:"Shift",subModule:"Shift",dataselected:1001==i.row.status_id.value?"Active":"Inactive",callbackfunction:t.FetchData,isselectedvaluestring:!0}}):t._e()]:t._e()]}}])})],1)]),t.showShift?a("AddCompanySetup",{attrs:{recordId:t.recordId,title:t.$t("Manage Shift"),moduleName:"Shift",emitName:"addReloadData",addApiUrl:"/shift/add",subModule:"Shift"},on:{close:function(e){t.showShift=!1,t.recordId=0},addReloadData:function(e){t.FetchData(),t.showShift=!1,t.recordId=0}}}):t._e()],1)},o=[],s=(a("14d9"),a("b7ef"),a("9769"));let r=[{title:"Add",iconClass:"fa-plus",callbackfunction:"AddDepartment",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"ActiveMultiple",title:"Active",iconClass:"fa-check",callbackfunction:"ActiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0},{id:"InactiveMultiple",title:"Inactive",iconClass:"fa-close",callbackfunction:"InactiveMultipleListing",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0}],n=[{fieldName:"Search by Shift Name",fieldType:"text",fieldSearchConditionName:["shift_name"],isSearch:!0}],c=[{title:"View",callbackfunction:"ViewReport",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",callbackfunction:"editreport",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Send Email",callbackfunction:"sendemail",href:"javascript:void(0)",icon:"fa fa-paper-plane text-success action-icon",additionalSpan:""},{title:"Schedule",callbackfunction:"setschedule",href:"javascript:void(0)",icon:"fa fa-clock-o text-warning action-icon",additionalSpan:""},{title:"Share",callbackfunction:"sharereport",href:"javascript:void(0)",icon:"fa fa-share-alt text-success action-icon",additionalSpan:""}];function l(t,e,a){var i=t;let o=a,r={};r["moduleName"]=e,r["type"]=a,s["a"].GetMainReportSearching(o).then((function(t){console.log(leftsearchSchema);var e=t.data;console.log("folderid",e),null!=e&&("FOLDER_NAME"==a&&(i.leftSearchFields[4].listOptions=e.map(t=>{const e={};return e.name=t.FOLDER_NAME,e.value=t.FOLDER_ID.toString(),e}),i.LeadStatusList=e.map(t=>{const e={};return e.name=t.FOLDER_NAME,e.value=t.FOLDER_ID.toString(),e})),"CREATED_BY"==a&&(i.leftSearchFields[3].listOptions=e.map(t=>{const e={};return e.name=t.CREATED_BY,e.value=t.CREATED_ID.toString(),e}),i.LeadStatusList=e.map(t=>{const e={};return e.name=t.CREATED_BY,e.value=t.CREATED_ID.toString(),e})),"MODIFIED_BY"==a&&(i.leftSearchFields[7].listOptions=e.map(t=>{const e={};return e.name=t.MODIFIED_BY,e.value=t.MODIFIED_ID.toString(),e}),i.LeadStatusList=e.map(t=>{const e={};return e.name=t.MODIFIED_BY,e.value=t.MODIFIED_ID.toString(),e})))}))}var d={buttons:r,topsearchSchema:n,listActions:c,bindleftCommonSearchdropdown:l},h=a("8dd4"),u=a("aae2"),S={components:{LeftColumn:u["a"],AddCompanySetup:h["a"]},props:{sourcetype:{type:String,required:!0}},data(){return{recordId:0,showShift:!1,noRecord:!1,isLoading:!1,CompanyId:null,ShiftData:[],TotalRecords:0,listheaderbuttons:d.buttons,topSearchFields:d.topsearchSchema,ShowManageView:!1,ShowAddCustomReportView:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,listActions:d.listActions,searchCondition:"",conditionForInstantSearch:"",SortBy:"",SortExp:"",showsharereportview:!1,showemailreportview:!1,showschedulereportview:!1,ReportID:null,reportname:"",reportid:"",foldername:"",folderid:"",LeadStatusList:[],searchcondition:"",MODULENAME:null,SUBMODULECODE:null,privilegeParams:null,sharetype:"",filteredHeaders:[],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}]}},async created(){var t=this;t.CompanyId=t.GetUserInfo.CompanyId,t.privilegeParams="controller=Shift&action=",await t.FetchData(),d.bindleftCommonSearchdropdown(t,"Dynamic_Reporting","FOLDER_NAME"),d.bindleftCommonSearchdropdown(t,"Dynamic_Reporting","CREATED_BY"),d.bindleftCommonSearchdropdown(t,"Dynamic_Reporting","MODIFIED_BY"),t.getStatuslistForListing("Dynamic_Reporting","en")},computed:{filteredUserData(){return this.vueObj.UserData.map(t=>{const e={...t};return null!==e.USER_EMP_ID&&""!==e.USER_EMP_ID||(e.USER_EMP_ID="--"),e})}},mounted(){d.topsearchSchema.forEach(t=>{t.value="",t.isSearch=!1})},methods:{renderActions:function(t){console.log(t)},commonHeaderButtonClick:function(t){switch(console.log(t),t.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"ActiveMultipleListing":this.UpdateStatus("Active");break;case"InactiveMultipleListing":this.UpdateStatus("Inactive");break;case"AddDepartment":this.showShift=!0;break}},actionButtonClick:function(t,e,a,i){var o=this;switch(t){case"sharereport":o=this;s["a"].CheckPrivilege(o.privilegeParams+"ShareReport").then(a=>{if(!a.data)return o.ShowAlert(o.$t("UnAuthorized"),"warning",!0,"Alert"),!1;o.sharetype=t,o.folderid=e.FOLDER_ID,o.ReportID=e.REPORT_ID,o.foldername=e.REPORTNAME,o.showsharereportview=!0,$("#modalshareview").modal("show"),setTimeout((function(){$("#modalshareview").modal("show"),setTimeout((function(){o.SetBootstraptoolTip()}),200)}),1e3)});break;case"sendemail":o.sendemail(e.REPORT_ID,e.MODULENAME,e.SUBMODULECODE);break;case"editreport":o.editreport(e);break;case"setschedule":o.setschedule(e.REPORT_ID);break;case"ViewReport":o.ViewReport(e.REPORT_ID,e.ACCESS,e.FOLDER_ID);break}},editreport:function(t){var e=this;s["a"].CheckPrivilege(e.privilegeParams+"Update").then(a=>{if(!a.data)return e.ShowAlert(e.$t("UnAuthorized"),"warning",!0,"Alert"),!1;e.$router.push({name:"EditDataReport",params:{Modulename:t.MODULENAME,Submodulecode:t.SUBMODULECODE,ReportName:t.REPORTNAME,ReportID:t.REPORT_ID,Module_Id:t.MODULE_ID,Folder_Id:t.FOLDER_ID,Sub_Module_Id:t.Sub_Module_Id,Version:e.Version,Action:"Edit"}})})},ViewReport:function(t,e,a){var i=this;i.$router.push("/Report/viewcustomreport/"+btoa(JSON.stringify({ReportID:t,ACCESS:e,Folder_Id:a})))},sortdata:async function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),await this.FetchData(),$("#th-"+t+"  span:first-child").attr("class",e)},pagerMethod:async function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,await this.FetchData()},leftCommonSearch:async function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",await this.FetchData()},ManageFolder:function(){var t=this;s["a"].CheckPrivilege(t.privilegeParams+"FolderListing").then(e=>{if(!e.data)return t.ShowAlert(t.$t("UnAuthorized"),"warning",!0,"Alert"),!1;var a;t.ShowManageView=!0,$("#modalManageView").modal("show"),setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3),null===(a=t.$refs.managefolder)||void 0===a||a.GetViewList()})},AddDesignation:function(){var t=this;console.log(t,"Add")},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Report"),(function(){var t={ids:a,moduleName:"Shift",subModuleCode:"Shift",refCode:"COMPANYSETUP_DELETE"},i=JSON.stringify(t);s["a"].CommonDeleteData(i).then((async function(t){200==t.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.ShowAlert(e.$t("DeletedSuccessfully",[e.$t("Report")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),await e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Report")]),"success",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"))},UpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&e.confirmR(e.$t("AreYouSureToUpdateStatus"),!0,e.$t("update")+"  "+e.$t("status"),(function(){var i={ID:a,StatusId:t,IsFor:"COMPANYSETUP_UPDATE",Module:"Shift",Submodule:"Shift"},o=JSON.stringify(i);console.log(o),s["a"].CommonUpdateStatus(o).then(t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Report")]),"success",!0,e.$t("Alert")),e.FetchData())})}))},getRequestParams:function(t,e,a,i,o,s){let r={};return t&&(r["pageNumber"]=t),s&&(r["searchcondition"]=s),o&&(r["is_paged"]=o),a&&(r["sortBy"]=a),i&&(r["sortExp"]=i),e&&(r["pageSize"]=e),r},clickEventOfColumn:function(t,e){console.log(t,e.COLUMN_NAME),"shift_name"==e.COLUMN_NAME&&(this.recordId=t.shift_id,this.showShift=!0),"USERNAME"==e.COLUMN_NAME&&this.$router.push({name:"viewcustomreport",params:{ReportID:t.REPORT_ID,ACCESS:t.ACCESS}})},FetchData:async function(){var t=this;this.isLoading=!0;var e=`CompanyId=${t.CompanyId}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&searchQuery=${t.searchCondition.trim()}`;await s["a"].ShiftListing(e).then((function(e){t.Headers=e.data.FieldSchema;const a=["shift_name","shift_desc","start_time","end_time","shift_type","status_id"];t.filteredHeaders=t.Headers.filter(t=>a.includes(t.COLUMN_NAME)),t.filteredHeaders.forEach(e=>{e.settings=null,"shift_name"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn,formatter:t.columnDataFormatter}),"shift_type"!=e.COLUMN_NAME&&"status_id"!=e.COLUMN_NAME||(e.settings={isInSlot:!0})}),""!=e.data.Data&&null!=e.data.Data?(e.data.Data.length>0?(t.ShiftData=e.data.Data,t.ShiftData.forEach(t=>{t.created_by=JSON.parse(t.created_by),t.modified_by=JSON.parse(t.modified_by),t.status_id=JSON.parse(t.status_id)}),t.TotalRecords=t.ShiftData[0].total_records,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.ReportData=[],t.noRecord=!0,t.TotalRecords=0),void 0!=localStorage.SavedParameters&&localStorage.removeItem("SavedParameters")):(t.noRecord=!0,t.ReportData=[],t.TotalRecords=0),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500),t.isLoading=!1}))},closeModalSharePopup:function(){$("#modalshareview").modal("hide"),this.showsharereportview=!1},getStatuslistForListing:function(t,e){var a=this,i="langCode="+e+"&statusType="+t+"&hasglobal=true";s["a"].statusdropdown(i).then((function(t){if("Success"==t.data.status){var e=t.data.result;a.StatusListForListing=e.data}}))}}},f=S,p=a("2877"),m=Object(p["a"])(f,i,o,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0dab7b.js.map