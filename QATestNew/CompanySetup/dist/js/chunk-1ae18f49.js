(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ae18f49"],{"0747":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".left-icon-m i{font-size:33px}.shortcuts-menu li:nth-child(9n+1) .left-icon-m i{color:#216bca}.shortcuts-menu li:nth-child(9n+2) .left-icon-m i{color:#63983e}.shortcuts-menu li:nth-child(9n+3) .left-icon-m i{color:#575b6f}.shortcuts-menu li:nth-child(9n+4) .left-icon-m i{color:#43a38a}.shortcuts-menu li:nth-child(9n+5) .left-icon-m i{color:#cc7d38}.shortcuts-menu li:nth-child(9n+6) .left-icon-m i{color:#735da5}.shortcuts-menu li:nth-child(9n+7) .left-icon-m i{color:#7e6c5e}.shortcuts-menu li:nth-child(9n+8) .left-icon-m i{color:#e3644b}.shortcuts-menu li:nth-child(9n+9) .left-icon-m i{color:#dcad3a}.shortcuts-menu li{max-width:25%!important}.short-item-name{font-size:16px}.dashbord-widget .cursor-pointer h3{font-size:16px;font-weight:700;max-width:100%}.dashbord-widget li h3 span{font-size:12px}.dashbord-widget li{position:relative}.dashbord-widget i{position:absolute;right:16px;top:30px}.barprogress{position:relative;float:left;right:auto}.c100:after{background-color:#edf7ff}",""]),t.exports=e},"0cd4":function(t,e,a){"use strict";a("72d6")},"1d22":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".mandatory{font-size:11px}",""]),t.exports=e},"1e1f":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#modelAddProduct .modal-dialog{max-width:1200px!important}#Location .vue-treeselect__control .vue-treeselect__x-container{display:none}#Location .vue-treeselect{position:relative;text-align:left}#Location .vue-treeselect--single .vue-treeselect__input{width:100%;height:100%;box-sizing:border-box;border:none}#modelAddProduct .custom-checkbox.custom-checkbox .custom-control-label:before,.custom-checkbox .custom-control-input:checked~.custom-control-label:after{display:none}.vue-treeselect.form-control .vue-treeselect__control{border:none!important;height:auto}.vue-treeselect.form-control .vue-treeselect__control .vue-treeselect__single-value{line-height:20px;padding-left:0}.no-spinner::-webkit-inner-spin-button,.no-spinner::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.no-spinner{-moz-appearance:textfield}.custlocation>span{width:91%}.custlocation .vue-treeselect__placeholder.vue-treeselect-helper-zoom-effect-off{line-height:22px}.modal-backdrop{visibility:hidden}",""]),t.exports=e},"29ca":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"main-content"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"container-fluid padding-t_10"},[a("div",{staticClass:"left-menu-tab new_tab nosrcoll"},[a("div",{staticClass:"col-md-12 p-0 "},[a("div",{staticClass:"theme-primary partition"},[a("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("Settings")))])])]),t._m(0),a("div",{staticClass:"mt-2 mCustomScrollbar _mCS_4"},[a("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab lefttabiconfix"},t._l(t.moduleList,(function(e){return a("li",[a("a",{class:{"nav-link left-menu":!0,active:t.currentTab==e.module_name.toLowerCase()},attrs:{checkprivilege:"Yes","data-toggle":"tab",role:"tab","aria-controls":e.module_name,"aria-selected":"false","data-text":e.module_name,"data-tabr":"#"+e.module_name,href:"javascript:;"},on:{click:function(a){return t.SetCurrentTab(e.module_name,e.display_name)}}},[a("i",{class:t.getModuleIcon(e.module_name),attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t(e.display_name))+" ")])])})),0)])]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"tab-content"},[t._m(1),a("section",{staticClass:"page-action action-margin tablehead"},[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"theme-primary partition  p-actions-expand"},[a("span",{staticClass:"p-name text-white",staticStyle:{"text-transform":"capitalize"},attrs:{id:"titleName"}},[t._v(t._s(t.$t("Settings")+" > "+t.$t(t.moduleDisplayName)))])])])]),"configuration"!=t.currentTab.toLowerCase()?a("div",{staticClass:"tab-pane call-detail fade p-0 active show border pb-3"},[a("div",{staticClass:"mx-3"},[a("ul",{staticClass:"dashbord-widget py-3"},[a("li",{staticClass:"cursor-pointer one_wid",staticStyle:{cursor:"pointer !important"},on:{click:t.CloseOpenSetupModule}},[a("span",{staticClass:"barprogress"},[a("div",{staticClass:"Task"},[a("div",{staticClass:"c100 small",class:[t.progressColor,"p"+t.setupProgress]},[a("span",[t._v(t._s(t.setupProgress)+"%")]),t._m(2)])])]),a("h3",{staticStyle:{width:"65%"}},[t._v(t._s(t.$t("Setup"))+" "),a("br"),t._v(" "),a("span",[t._v("Setup the module in a few steps")])]),a("i",{staticClass:"fa fa fa-cog",attrs:{"aria-hidden":"true"}})]),a("li",{staticClass:"cursor-pointer two_wid",staticStyle:{cursor:"pointer !important"},on:{click:t.CloseOpenConfigPopup}},[a("h3",[t._v(t._s(t.$t("Configuration"))),a("br"),a("span",[t._v("Configure the module as per the requirements")])]),t._v(" "),a("i",{staticClass:"fa fa fa-wrench",attrs:{"aria-hidden":"true"}})])]),a("div",{staticStyle:{clear:"both"}}),a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",{staticClass:"spngropuname"},[t._v(" "+t._s(t.$t("MoreSettings"))+" ")])])])]),t.moreSettings.length>0?a("ul",{staticClass:"shortcuts-menu pb-3 connectedSortable"},t._l(t.moreSettings,(function(e,i){return a("li",{key:i,staticClass:"position-relative clients",attrs:{target:"_blank"}},[a("a",{staticClass:"short-menu-item",attrs:{onmousedown:"return false;",href:e.redirectTo,"data-id":"37","data-fav_id":"48522","data-order":"1","data-displayname":"Clients","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip","data-original-title":"Clients"}},[a("span",{staticClass:"left-icon-m"},[a("i",{class:"fa "+e.icon})]),a("span",{staticClass:"short-item-name"},[t._v(t._s(t.$t(e.diaplayName)))])])])})),0):t._e(),0==t.moreSettings.length?a("div",{staticClass:"text-danger text-center p-4"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e()]):t._e(),"configuration"==t.currentTab.toLowerCase()?a("div",{staticClass:"tab-pane call-detail fade p-0 active pt-3 show border pb-3"},[t._l(t.generalSettingList,(function(e){return[a("div",{staticClass:"px-3"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",{staticClass:"spngropuname"},[t._v(" "+t._s(t.$t(e.groupName))+" ")])])])]),a("ul",{staticClass:"shortcuts-menu pb-3 connectedSortable"},t._l(e.links,(function(e,i){return a("li",{key:i,staticClass:"position-relative clients"},[a("a",{staticClass:"short-menu-item",attrs:{onmousedown:"return false;","data-toggle":"tooltip",title:"","data-placement":"bottom","data-toggle-tooltip":"tooltip","data-original-title":t.$t(e.diaplayName)},on:{click:function(a){return t.RedirectTo(e)}}},[a("span",{staticClass:"left-icon-m"},[a("i",{class:"fa "+e.icon})]),a("span",{staticClass:"short-item-name"},[t._v(t._s(t.$t(e.diaplayName)))])])])})),0),a("div",{staticStyle:{clear:"both"}})]}))],2):t._e()])])])]),t.isOpenConfiguration?a("configuration",{attrs:{moduleCode:t.currentTab},on:{close:t.CloseOpenConfigPopup}}):t._e(),t.isOpenSetupModule?a("moduleSetupPopup",{attrs:{moduleCode:t.currentTab,setupTabs:t.setupTabs},on:{close:t.CloseOpenSetupModule}}):t._e()],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt-2 mb-1 w-100 d-none d-lg-block"},[a("div",{staticClass:"input-group customsearchbox"},[a("input",{staticClass:"form-control searchcustomfilter border-right-0",attrs:{type:"text",maxlength:"50",placeholder:"Search by Name",autocomplete:"off"}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text bg-transparent bg-white border-left-0"},[a("i",{staticClass:"fa fa-search"})])])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"expand-list"},[a("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[a("i",{staticClass:"icon-solid arrow-solid-left text-white",staticStyle:{"font-size":"9pt"}})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"slice"},[a("div",{staticClass:"bar"}),a("div",{staticClass:"fill"})])}],s=(a("14d9"),a("9769")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-popups modal right fade show",staticStyle:{display:"block"}},[a("div",{staticClass:"modal d-block "},[a("div",{staticClass:"modal-dialog doc-setup-slide",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle"},[a("h5",{staticClass:"modal-title",attrs:{id:"ui-id-26"}},[t._v(" Configuration")]),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body bg-white newtabsdes_configuration_mainbase newtabdes_buttonsbase"},[t.modueKeys.length>0?a("section",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"left-menu-tab new_tab"},[a("div",{staticClass:"mt-0",staticStyle:{"max-height":"calc(100vh - 2px)"},attrs:{id:"divscrollsetuptabs"}},[a("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab newtabsdes_configuration"},t._l(t.modueKeys,(function(e){return a("li",{staticClass:"nav-item FirstScreen"},[a("a",{class:{"nav-link":!0,active:e.moduleName.toLowerCase()==t.currentSelectedModule.moduleName.toLowerCase()},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.GetModuleConfigurationKeys(e)}}},[a("i",{class:"pr-2 text-muted "+t.getModuleIcon(e.moduleName)}),t._v(" "+t._s(t.$t(e.moduleName))+" ")])])})),0)])]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tab-content"},[a("div",{staticClass:"tab-pane call-detail fade p-3 border-0 active show ",attrs:{id:"step1"}},[a("dynamic-form",{attrs:{schema:t.formSchema,buttons:t.buttons},on:{OnSubmit:t.SaveConfigurations},scopedSlots:t._u([{key:"tgslot-TicketStartingNumber",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:i.fieldInfo.value},on:{input:function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("a",{attrs:{id:"QuotePreviewtemplate",href:"javascript:;","data-key":"TicketStartingNumber"},on:{click:function(e){return t.CloseOpenTicketPopup(i.fieldInfo,"Ticket Number")}}},[a("i",{staticClass:"fa fa-pencil text-info font-18"})])])]),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"LocationTracking",id:"LocationTracking"}})]),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(i.error))])]}},{key:"tgslot-CRMQuotationStartNumber",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:i.fieldInfo.value},on:{input:function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text"},[a("a",{attrs:{id:"QuotePreviewtemplate",href:"javascript:;","data-key":"TicketStartingNumber"},on:{click:function(e){return t.CloseOpenTicketPopup(i.fieldInfo,"Qoute Number")}}},[a("i",{staticClass:"fa fa-pencil text-info font-18"})])])]),a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"LocationTracking",id:"LocationTracking"}})]),a("span",{staticClass:"invalid-feedback"},[t._v(t._s(i.error))])]}},{key:"tgslot-SmtpPassword",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:i.fieldInfo.value},on:{input:function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)}}})])]}}],null,!1,3031362263)})],1)])])]):t._e(),0==t.modueKeys.length&&1==t.noRecordfound?a("section",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"text-danger text-center p-4"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e()])])])])]),t.showTicketNumber?a("modalConfigureTicketNumberVue",{attrs:{callbackfunction:t.GetModuleConfigurationKeys,Message:t.Message,coreConfigId:t.ticketCoreConfigId},on:{close:t.CloseOpenTicketPopup}}):t._e()],1)},l=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups modal right fade show",staticStyle:{display:"block"}},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Configure"))+" "+t._s(t.Message))]),a("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("section",{staticClass:"main-content"},[a("div",{staticClass:"container-fluid padding-t_10 p-0",attrs:{id:"divInvNumData"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"preview-panel"},[a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text",attrs:{id:"basic-addon3"}},[t._v(t._s(t.$t("Preview")))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.PreviewId,expression:"PreviewId"}],staticClass:"form-control",attrs:{type:"text",disabled:"disabled",maxlength:"100"},domProps:{value:t.PreviewId},on:{input:function(e){e.target.composing||(t.PreviewId=e.target.value)}}})])])])]),a("div",{staticClass:"row"},[a("draggable",{staticClass:"element-panel",attrs:{options:{group:{name:"people",pull:"clone",put:!1},sort:!1},move:t.checkMove},on:{change:function(e){return t.log(e)}},model:{value:t.filedList,callback:function(e){t.filedList=e},expression:"filedList"}},t._l(t.filedList,(function(e,i){return a("div",{key:i,staticClass:"single-element mb-2 ml-3",class:e.name,staticStyle:{cursor:"pointer"}},[a("i",{class:e.classname}),t._v(" "+t._s(e.name)+" ")])})),0)],1),a("div",{staticClass:"row mt-2",staticStyle:{"overflow-y":"auto","max-height":"400px"}},[a("div",{staticClass:"col-lg-12"},[a("draggable",{staticClass:"list-group d-flex flex-wrap dragarea mt-0",staticStyle:{"flex-direction":"unset","min-height":"105px"},attrs:{list:t.arr1,options:{group:{name:"people"}},id:"divmanualconfigsetting"},on:{change:function(e){return t.SetPreviewNumber()}}},t._l(t.arr1,(function(e,i){return a("div",{key:e.name,staticClass:"dragelements config-data"},["Year"==e.name?a("div",{staticClass:"col-12 yeardiv",attrs:{id:i}},[a("div",{staticClass:"pickflowbase ml-cutomf-bg float-left p-2 w-100 box-warning"},[a("div",{staticClass:"labeltext text-left p-0 float-left"},[a("label",[t._v(t._s(e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.yeardata,expression:"yeardata"}],staticClass:"form-control form-control-sm data1",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.yeardata},on:{input:function(e){e.target.composing||(t.yeardata=e.target.value)}}})]),a("i",{staticClass:"close fa fa-times",staticStyle:{cursor:"pointer"},on:{click:function(e){t.DeleteArrayObject(i,e),t.yeardata=""}}}),a("div",{staticClass:"dropdown float-right pt-1 mr-3"},[a("a",{staticClass:"action-icon dotts",attrs:{href:"javascript:;",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fa fa-ellipsis-h text-secondary"})]),a("div",{staticClass:"dropdown-menu panelfix_dots rounded border bg-white"},[a("a",{staticClass:"dropdown-item px-2 py-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.twodigit()}}},[a("span",{staticClass:"ml-1 text-secondary",staticStyle:{"font-size":"14px"}},[t._v("Two Digit")])]),a("a",{staticClass:"dropdown-item px-2 py-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.fourdigit()}}},[a("span",{staticClass:"ml-1 text-secondary",staticStyle:{"font-size":"14px"}},[t._v("Four Digit")])])])])])]):t._e(),"Month"==e.name?a("div",{staticClass:"col-12 monthdiv",attrs:{id:i}},[a("div",{staticClass:"pickflowbase ml-cutomf-bg float-left p-2 w-100 box-warning"},[a("div",{staticClass:"labeltext text-left p-0 float-left"},[a("label",[t._v(t._s(e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.monthdata,expression:"monthdata"}],staticClass:"form-control form-control-sm data1",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.monthdata},on:{input:function(e){e.target.composing||(t.monthdata=e.target.value)}}})]),a("i",{staticClass:"close fa fa-times",staticStyle:{cursor:"pointer"},on:{click:function(e){t.DeleteArrayObject(i,e),t.monthdata=""}}}),a("div",{staticClass:"dropdown float-right pt-1 mr-3"},[a("a",{staticClass:"action-icon dotts",attrs:{href:"javascript:;",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fa fa-ellipsis-h text-secondary"})]),a("div",{staticClass:"dropdown-menu panelfix_dots rounded border bg-white"},[a("a",{staticClass:"dropdown-item px-2 py-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.shortmonth()}}},[a("span",{staticClass:"ml-1 text-secondary",staticStyle:{"font-size":"14px"}},[t._v("Short Name")])]),a("a",{staticClass:"dropdown-item px-2 py-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.fullmonth()}}},[a("span",{staticClass:"ml-1 text-secondary",staticStyle:{"font-size":"14px"}},[t._v("Full Name")])]),a("a",{staticClass:"dropdown-item px-2 py-1",attrs:{href:"javascript:;"},on:{click:function(e){return t.numbermonth()}}},[a("span",{staticClass:"ml-1 text-secondary",staticStyle:{"font-size":"14px"}},[t._v("Month Number")])])])])])]):t._e(),"Separator"==e.name?a("div",{staticClass:"col-12 separatordiv",attrs:{id:i}},[a("div",{staticClass:"pickflowbase ml-cutomf-bg float-left p-2 w-100 box-warning"},[a("div",{staticClass:"labeltext text-left p-0 float-left"},[a("label",[t._v("Separator")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.separatordata,expression:"separatordata"}],staticClass:"form-control form-control-sm data1",attrs:{type:"text",maxlength:"5",onpaste:"return false;"},domProps:{value:t.separatordata},on:{keyup:t.SetPreviewNumber,input:function(e){e.target.composing||(t.separatordata=e.target.value)}}})]),a("i",{staticClass:"close fa fa-times",staticStyle:{cursor:"pointer"},on:{click:function(e){t.DeleteArrayObject(i,e),t.separatordata=""}}})])]):t._e(),"Character"==e.name?a("div",{staticClass:"col-12 characterdiv",attrs:{id:i}},[a("div",{staticClass:"pickflowbase ml-cutomf-bg float-left p-2 w-100 box-warning"},[a("div",{staticClass:"labeltext text-left p-0 float-left"},[a("label",[t._v("Character")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.characterdata,expression:"characterdata"}],staticClass:"form-control form-control-sm data1",attrs:{type:"text",maxlength:"8",onpaste:"return false;"},domProps:{value:t.characterdata},on:{keyup:t.SetPreviewNumber,input:function(e){e.target.composing||(t.characterdata=e.target.value)}}})]),a("i",{staticClass:"close fa fa-times",staticStyle:{cursor:"pointer"},on:{click:function(e){t.DeleteArrayObject(i,e),t.characterdata=""}}})])]):t._e(),"Number"==e.name?a("div",{staticClass:"col-12 numberdiv",attrs:{id:i}},[a("div",{staticClass:"pickflowbase ml-cutomf-bg float-left p-2 w-100 box-warning"},[a("div",{staticClass:"labeltext text-left p-0 float-left"},[a("label",[t._v("Number")]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"},{name:"model",rawName:"v-model",value:t.numberdata,expression:"numberdata"}],staticClass:"form-control form-control-sm data1",attrs:{type:"text",maxlength:"10",onpaste:"return false;"},domProps:{value:t.numberdata},on:{keyup:t.SetPreviewNumber,input:function(e){e.target.composing||(t.numberdata=e.target.value)}}})]),a("i",{staticClass:"close fa fa-times",staticStyle:{cursor:"pointer"},on:{click:function(e){t.DeleteArrayObject(i,e),t.numberdata=""}}}),a("div",{staticClass:"dropdown float-right pt-1 mr-3"},[a("a",{staticClass:"action-icon dotts",attrs:{href:"javascript:;",id:"dropdownMenuButton"},on:{click:t.showdropdown}},[a("i",{staticClass:"fa fa-ellipsis-h text-secondary"})]),a("div",{staticClass:"dropdown-menu panelfix_dots rounded border bg-white dropdivdata",staticStyle:{display:"none",width:"220px",right:"-70px",left:"auto"}},[a("a",{staticClass:"dropdown-item px-2 py-2",attrs:{href:"javascript:;"}},[a("label",{staticClass:"form-check-inline d-block m-0 mb-1"},[a("span",{staticClass:"label-text text-secondary mx-1",staticStyle:{"font-size":"14px",float:"left"}},[t._v("Incr. By")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.exceedby,expression:"exceedby"},{name:"validate",rawName:"v-validate",value:"numeric",expression:"'numeric'"}],staticClass:"form-control form-control-sm",staticStyle:{width:"84px",height:"25px !important","min-height":"25px !important",margin:"auto"},attrs:{type:"text",maxlength:"2",onpaste:"return false;"},domProps:{value:t.exceedby},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||(t.exceedby=e.target.value)}}})]),a("label",{staticClass:"form-check-inline d-block m-0 mb-1"},[a("span",{staticClass:"label-text text-secondary mx-1",staticStyle:{"font-size":"14px",float:"left"}},[t._v("Reset By")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.resetby,expression:"resetby"}],on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.resetby=e.target.multiple?a:a[0]},t.Onchangeresetby]}},[a("option",{attrs:{value:"Month"}},[t._v("Month")]),a("option",{attrs:{value:"EM"}},[t._v("Every Month")]),a("option",{attrs:{value:"Year"}},[t._v("Year")])])]),"Month"==t.resetby?a("label",{staticClass:"form-check-inline d-block m-0 mb-1"},[a("span",{staticClass:"label-text text-secondary mx-1",staticStyle:{"font-size":"14px",float:"left"}},[t._v("Month")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.ddlmonth,expression:"ddlmonth"}],staticStyle:{"margin-left":"15px"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ddlmonth=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"January"}},[t._v("Jan")]),a("option",{attrs:{value:"February"}},[t._v("Feb")]),a("option",{attrs:{value:"March"}},[t._v("Mar")]),a("option",{attrs:{value:"April"}},[t._v("Apr")]),a("option",{attrs:{value:"May"}},[t._v("May")]),a("option",{attrs:{value:"June"}},[t._v("June")]),a("option",{attrs:{value:"July"}},[t._v("July")]),a("option",{attrs:{value:"August"}},[t._v("Aug")]),a("option",{attrs:{value:"September"}},[t._v("Sep")]),a("option",{attrs:{value:"October"}},[t._v("Oct")]),a("option",{attrs:{value:"November"}},[t._v("Nov")]),a("option",{attrs:{value:"December"}},[t._v("Dec")])])]):t._e()])])])])]):t._e()])})),0)],1),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"help-block"},[a("p",{attrs:{id:"divHelpText"}},[t._v(t._s(t.$t("HelpTextForNextTicket"))+":")]),a("span",[t._v(t._s(t.$t("NextInvoice")))]),a("br"),a("p",{attrs:{id:"divHelpTextAfterReset"}},[t._v(t._s(t.$t("HelpTextForNextTicketAfterReset"))+": ")]),a("span",[t._v(t._s(t.$t("ResetNextInvoice")))])])])]),a("div",{staticClass:"col-lg-12 p-0"},[a("div",{staticClass:"row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-6 text-right"},[a("a",{staticClass:"btn btn-success formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:"Save"},on:{click:function(e){return t.SaveData()}}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save"))+" ")]),a("a",{staticClass:"btn btn-danger formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:"Cancel"},on:{click:t.Close}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(t._s(t.$t("Cancel")))])])])])])])])])])])])},d=[],u=a("b76a"),p=a.n(u),m=a("c427");class v{async AddTicketPriority(t){return await m["a"].instanceTicketing.post("Common/AddTicketPriority?"+t)}async IsExtraMapFeature(){return await m["a"].instanceTicketing.get("/ServiceAppointment/IsExtraMapFeature")}async GetConfigNumberJsonData(t){return await m["a"].instanceCRM.get("/Form/GetConfigNumberJsonData?"+t)}async SaveConfiguringJsonData(t){return await m["a"].instanceCRM.post("/Form/SaveConfiguringJsonData",{postString:t})}async SaveConfiguringJsonData(t){return await m["a"].instanceCRM.post("/Form/SaveConfiguringJsonData",{postString:t})}async GetSkill(){return await m["a"].instanceTicketing.get("/Common/GetSkill")}async GetDepartment(){return await m["a"].instanceTicketing.get("/Common/GetDepartment")}async CheckPrivilege(t){return await m["a"].instanceCommon.get("/Common/HasPermission?"+t)}async GetResolveTicketUserListbydept(t){return await m["a"].instanceTicketing.get("/Ticketing/GetResolveTicketUserList?"+t)}async GetGroupTicketData(t){return await m["a"].instanceTicketing.get("/FSM/GetTicketGroup?"+t)}async AddTicketGroup(t){return await m["a"].instanceTicketing.post("/FSM/AddTicketGroup?"+t)}async GetTicketGroupsForDropdownList(){return await m["a"].instanceTicketing.get("/FSM/GetTicketGroupsForDropdownList")}async AddTicketServiceBoard(t){return await m["a"].instanceTicketing.post("/FSM/AddTicketServiceBoard?"+t)}GetCountryDDL(t){return m["a"].instanceCommon.get("/Common/GetDDLData?"+t)}async GetTagsByModuleId(t){return await m["a"].instanceAsset.get("/GetTagsByModuleId?"+t)}GetStateListwithIDByCountryId(t){return m["a"].instanceAsset.get("/GetStateListwithIDByCountryId?"+t)}async GetLocationByCompanyIdAsset(t){return await m["a"].instanceAsset.get("/GetLocationByCompanyId?"+t)}LocationExist(t){return m["a"].instanceAsset.post("/LocationExist?"+t)}SaveUpdateLocation(t){return m["a"].instanceAsset.post("/SaveUpdateLocation",{postString:t})}GetAllowFileType(){return m["a"].instanceAsset.get("/CheckAllowFileType")}DownloadAttachment(t){return m["a"].instanceAsset.get("/DownloadAttachment?"+t)}async GetAssetItemStatusList(){return await m["a"].instanceAsset.get("/GetAssetItemStatusList")}AddProductType(t){return m["a"].instanceAsset.post("/AddProductType/",t)}GetAssetTagsById(t){return m["a"].instanceAsset.get("/GetAssetTagsById?"+t)}AssetGetById(t){return m["a"].instanceAsset.get("/AssetGetById?"+t)}AssetCatalogueListing(t){return m["a"].instanceAsset.get("/AssetCatalogueListing?",{params:t})}IsDuplicateAssetCatalog(t){return m["a"].instanceAsset.post("/IsDuplicateAssetCatalog?",{postString:t})}async GetLocationByuserId(t){return await m["a"].instanceAsset.get("/AssetAssignment/GetLocationByuserId?"+t)}async EnableAssetManagement(t){return await m["a"].instanceAsset.get("/EnableAssetManagement?"+t)}async GetCountryData(){return await m["a"].instanceCommon.get("HelpAndGuide/GetCountryList")}async AddLead(t){return await m["a"].instanceCRM.post("/AddLead",{postString:t})}async GetDDLDataForAddGroup(t){return await m["a"].instanceCRM.get("/Form/GetDDLData?"+t)}async SaveConfigData(t){return await m["a"].instanceCRM.post("/SaveConfigData",{postString:t})}async AddApprovalChain(t){return await m["a"].instanceApproval.post("/ApprovalChain/AddApprovalChain?",{postString:t})}async GetApprovalGroupByCompanyId(){return await m["a"].instanceApproval.get("/ApprovalChain/GetApprovalGroupByCompanyId?")}async GetByChainId(t){return await m["a"].instanceApproval.get("/ApprovalChain/GetByChainId?"+t)}async CheckDuplicate(t){return await m["a"].instanceApproval.get("/ApprovalChain/CheckDuplicate?"+t)}async AddGroup(t){return await m["a"].instanceApproval.post("/ApprovalGroup/AddGroup?",{postString:t})}async LoadUsersByCompanyId(t){return await m["a"].instanceApproval.get("/ApprovalRule/LoadUsersByCompanyId?"+t)}async GetLocationByCompanyId(t){return await m["a"].instanceApproval.get("/ApprovalRule/GetLocationByCompanyId?"+t)}async AddRule(t){return await m["a"].instanceApproval.post("/ApprovalRule/AddRule?",{postString:t})}async GetRuleById(t){return await m["a"].instanceApproval.get("/ApprovalRule/GetRuleById?"+t)}async GetUsersByProjectId(t){return await m["a"].instanceApproval.get("/ApprovalRule/LoadUsersByProjectId?"+t)}async LoadClientByProjectId(t){return await m["a"].instanceApproval.get("/ApprovalRule/LoadClientByProjectId?"+t)}async GetProjectListing(t){return await m["a"].instanceApproval.get("/ApprovalRule/GetProjectList?"+t)}async GetApprovalChainsByCompanyId(){return await m["a"].instanceApproval.get("/ApprovalRule/GetApprovalChainsByCompanyId?")}async CheckDuplicateRule(t){return await m["a"].instanceApproval.get("/ApprovalRule/ApprovalRuleExist?"+t)}async SwapApproverOrder(t){return await m["a"].instanceApproval.get("/ApprovalChain/SwapApproverOrderofApprovalGroups?"+t)}async DeleteApprovalGroup(t){return await m["a"].instanceApproval.post("/ApprovalChain/DeleteApprovalGroupFromApprovalChain?"+t)}async ApprovalGroupListByApprovalCHainId(t){return await m["a"].instanceApproval.get("/ApprovalRule/GroupList?"+t)}async CheckDuplicateGroup(t){return await m["a"].instanceApproval.get("/ApprovalGroup/CheckDuplicateGroup?"+t)}GetConfigDataValue(t){return m["a"].instanceDocStorage.get("/GetConfigDataValue?"+t)}SaveDocStorageSourceConfigData(t){return m["a"].instanceDocStorage.post("/SaveDocStorageSourceConfigData?"+t)}TestCredential(t){return m["a"].instanceDocStorage.post("/TestCredential?"+t)}GetStorageSourceList(){return m["a"].instanceDocStorage.get("/GetStorageSourceList")}GetStorageRegionList(t){return m["a"].instanceDocStorage.get("/GetStorageRegionList?"+t)}GetStorageSetupStatusDetail(){return m["a"].instanceDocStorage.get("/GetStorageSetupStatusDetail")}GetStorageReport(){return m["a"].instanceDocStorage.get("/GetStorageReport")}GetCompanyStorageSourceConfig(){return m["a"].instanceDocStorage.get("/GetCompanyStorageSourceConfig")}GetCompanyContainerDetails(){return m["a"].instanceDocStorage.get("/GetCompanyContainerDetails?")}SaveContainerDetails(t){return m["a"].instanceDocStorage.post("/SaveContainerDetails?"+t)}async GetUserStorageDetail(t){return await m["a"].instanceDocStorage.get("/GetUserStorageDetail?"+t)}ManageDocUserStorageSettingData(t){return m["a"].instanceDocStorage.post("/ManageDocUserStorageSettingData",t)}}var h=new v,S={components:{draggable:p.a},data(){return{filedList:[{name:"Year",classname:"fa fa fa-calendar",order:1},{name:"Month",classname:"fa fa-calendar-o",order:2},{name:"Separator",classname:"fa fa-code",order:3},{name:"Character",classname:"fa fa-downcase-a",order:4},{name:"Number",classname:"fa fa-sort-numeric-asc",order:5}],arr1:[],PreviewId:"",yeardata:"",monthdata:"",separatordata:"",characterdata:"",numberdata:"",exceedby:"",resetby:"",ddlmonth:"",isUpdated:!0}},props:{coreConfigId:{required:!1},callbackfunction:{type:Function},Message:{type:String,Required:!0}},updated:function(){var t=this;1==t.isUpdated?t.SetPreviewNumber():t.isUpdated=!0},created:function(){var t=this;t.Fetchdata(),t.numbermonth(),t.twodigit(),t.fourdigit(),t.fullmonth(),t.shortmonth()},methods:{Close:function(){var t=this;this.$emit("close"),t.callbackfunction()},showdropdown:function(){$(".dropdivdata").toggle()},numbermonth:function(){const t=["01","02","03","04","05","06","07","08","09","10","11","12"],e=new Date;this.monthdata=t[e.getMonth()]},DeleteArrayObject:function(t,e){var a=this;$(e.target).closest(".config-data").remove(),a.arr1.splice(t,1),setTimeout(a.SetPreviewNumber(),100)},twodigit:function(){const t=new Date;this.yeardata=t.getFullYear().toString().substr(-2)},log:function(t){this.FiledList.sort(dynamicSort("order"))},fourdigit:function(){const t=new Date;this.yeardata=t.getFullYear()},fullmonth:function(){const t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=new Date;this.monthdata=t[e.getMonth()]},shortmonth:function(){const t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=new Date;this.monthdata=t[e.getMonth()]},checkMove:function(t){return!($("#divmanualconfigsetting .yeardiv").length>0&&"Year"==t.draggedContext.element.name)&&(!($("#divmanualconfigsetting .monthdiv").length>0&&"Month"==t.draggedContext.element.name)&&(!($("#divmanualconfigsetting .numberdiv").length>0&&"Number"==t.draggedContext.element.name)&&(!($("#divmanualconfigsetting .characterdiv").length>0&&"Character"==t.draggedContext.element.name)&&(!($("#divmanualconfigsetting .separatordiv").length>0&&"Separator"==t.draggedContext.element.name)&&void 0))))},SetPreviewNumber:function(t){this.isUpdated=!1,this.PreviewId="";var e=$(".data1"),a="";$.each(e,(function(t,e){a+=$(e).val()})),this.PreviewId=a},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},Fetchdata:function(){var t=this,e="id="+t.coreConfigId;h.GetConfigNumberJsonData(e).then(e=>{if(null!=e.data&&"undefined"!=typeof e.data&&""!=e.data){var a=e.data.data,i=a;i.splice("order",-1),$.each(i,(function(e,a){if("Year"==a.type&&(t.yeardata=a.value,""!=t.yeardata)){var i={};i["name"]=a.type,t.arr1.push(i)}if("Month"==a.type&&(t.monthdata=a.value,""!=t.monthdata)){var o={};o["name"]=a.type,t.arr1.push(o)}if("Separator"==a.type&&(t.separatordata=a.value,""!=t.separatordata)){var n={};n["name"]=a.type,t.arr1.push(n)}if("Character"==a.type&&(t.characterdata=a.value,""!=t.characterdata)){var s={};s["name"]=a.type,t.arr1.push(s)}if("Number"==a.type&&(t.numberdata=a.value,t.exceedby=a.propvalue1,t.resetby=a.property2,t.ddlmonth=a.propvalue2,""!=t.numberdata)){var r={};r["name"]=a.type,t.arr1.push(r)}"PreviewNum"==a.type&&(t.PreviewId=a.value)}))}})},SaveData:function(){var t=this;if(""!=t.PreviewId){var e="",a="",i="",o="",n="",s="",r="";if(2==t.yeardata.length?(e="two-digit",s="YY"):(e="four-digit",s="YYYY"),t.monthdata.length>3?(a="full-month",r="MMMM"):2==t.monthdata.length?(a="number-month",r="MM"):(a="short-month",r="MMM"),""!=t.exceedby&&(i="exceedby"),"EM"==t.resetby?(o=t.resetby,n=""):"Month"==t.resetby?(o=t.resetby,n=t.ddlmonth):(o=t.resetby,n=""),"Month"==t.resetby&&""==t.ddlmonth)return this.ShowAlert("Please Select Month","warning",!0,"Alert"),!1;if(""==t.numberdata)return this.ShowAlert("Number is required","warning",!0,"Alert"),!1;var l="undefined"==typeof $(".yeardiv").attr("id")?"-1":$(".yeardiv").attr("id"),c="undefined"==typeof $(".separatordiv").attr("id")?"-1":$(".separatordiv").attr("id"),d="undefined"==typeof $(".characterdiv").attr("id")?"-1":$(".characterdiv").attr("id"),u="undefined"==typeof $(".numberdiv").attr("id")?"-1":$(".numberdiv").attr("id"),p="undefined"==typeof $(".monthdiv").attr("id")?"-1":$(".monthdiv").attr("id"),m=[{type:"Year",value:t.yeardata,property1:e,propvalue1:t.yeardata,order:l,format:s},{type:"Month",value:t.monthdata,property1:a,propvalue1:t.monthdata,order:p,format:r},{type:"Separator",value:t.separatordata,property1:"",propvalue1:"",order:c,format:t.separatordata},{type:"Character",value:t.characterdata,property1:"",propvalue1:"",order:d,format:t.characterdata},{type:"Number",value:t.numberdata,property1:i,propvalue1:t.exceedby,property2:o,propvalue2:n,order:u,format:t.numberdata},{type:"PreviewNum",value:t.PreviewId,resetvalue:t.numberdata}],v={Configtype:"TicketStartingNumber"};m.sort((t,e)=>t.order-e.order);var S="";m.forEach(t=>{"PreviewNum"!==t.type&&(S+=t.value)});var g={PreviewNumFormat:S},f={PreviewNum:t.PreviewId},C={SerialNum:t.numberdata},A={mainarray:m,configtype:v,previewnum:f,previewnumformat:g,serialnumber:C},y=JSON.stringify(A);h.SaveConfiguringJsonData(y).then(e=>{(1==e.data||0==e.data)&&(this.ShowAlert(t.$t("RecordsUpdatedSuccessfully"),"success",!0,"Alert"),this.$emit("close",S))},(function(t){}))}else ShowAlert("Preview is required","warning",!0,"Alert")}}},g=S,f=a("2877"),C=Object(f["a"])(g,c,d,!1,null,null,null),A=C.exports,y={components:{modalConfigureTicketNumberVue:A},props:{moduleCode:null},data:function(){return{modueKeys:[],currentSelectedModule:"",formSchema:[],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i> Save"}],showTicketNumber:!1,ticketCoreConfigId:0,noRecordfound:!1,Message:""}},created:function(){this.GetConfigurationModule()},methods:{CloseOpenTicketPopup:function(t,e){t&&(this.ticketCoreConfigId=t.customFieldId,this.Message=e),this.showTicketNumber=!this.showTicketNumber},GetConfigurationModule:function(){var t=this,e="moduleName="+this.moduleCode;s["a"].GetModuleForConfiguration(e).then((function(e){null!=e&&null!=e.data&&e.data.length>0?(t.modueKeys=e.data,t.currentSelectedModule=t.modueKeys[0],t.GetModuleConfigurationKeys()):t.noRecordfound=!0}))},GetModuleConfigurationKeys:function(t){var e=this;"undefined"!=typeof t&&(e.currentSelectedModule=t);var a="moduleId="+e.currentSelectedModule.moduleId;s["a"].GetModuleKeys(a).then((function(t){null!=t&&null!=t.data&&e.ConvertConfigurationDataIntoDynamicFormobj(t.data.StorageKeys)}))},Getoption:function(t){t=null==t?"":t;var e=[];return $.each(t.split("^"),(function(t,a){e.push(a)})),e},ConvertConfigurationDataIntoDynamicFormobj:function(t){var e=this;if(e.formSchema=[],t.sort((t,a)=>e.$t(t.CORE_CONFIG_KEY)>e.$t(a.CORE_CONFIG_KEY)?1:e.$t(a.CORE_CONFIG_KEY)>e.$t(t.CORE_CONFIG_KEY)?-1:0),null!=t&&t.length>0){let a={layoutType:"double",groupId:0,group_name:"",Data:[]};t.forEach((function(t,i){var o;let n={required:!0},s=t.ASTYPE,r=[];var l=t.CORE_CONFIG_VALUE;null!=t.CORE_CONFIG_OPTIONS&&(r=e.MakeArray(t.CORE_CONFIG_OPTIONS,"radio","^"));let c="Enter "+e.$t(t.CORE_CONFIG_KEY);"SelectField"==s||"CustomSelectField"==s||"MultiSelectField"==s||"TreeSelectField"==s?c="Select "+e.$t(t.CORE_CONFIG_KEY):"CheckBoxField"==s&&(l=t.CORE_CONFIG_VALUE.split("^"));let d="",u="date";"DateField"==s&&(u="date");let p={customFieldId:t.CORE_CONFIG_ID,astype:s,label:e.$t(t.CORE_CONFIG_KEY),name:t.CORE_CONFIG_KEY,value:null!==(o=l)&&void 0!==o?o:"",placeholder:c,config:{mode:u,options:r,dependentOn:null,showWhen:null,valueMapping:null,fieldCode:null},mode:d,visibility:!0,validationRules:n,dtCode:t.CORE_CONFIG_TYPE};a.Data.push(p)})),e.formSchema.push(a)}},SaveConfigurations:function(t,e){var a=this,i=[];a.formSchema.forEach((function(t,e){t.Data.forEach((function(t,e){var a=t.value;"CheckBoxField"==t.astype&&(a=t.value.filter(t=>""!=t).join("^"));var o={DataId:t.customFieldId,key:t.name,DataValue:a};i.push(o)}))}));var o={configData:i,conditionData:{refCode:"CompanySetting",moduleName:a.moduleCode}},n=JSON.stringify(o);s["a"].ManageDocUserStorageSettingData(n).then((function(t){null!=t&&null!=t.data&&1==t.data?a.ShowAlert(a.$t("RecordsSavedSuccessfully"),"success"):a.ShowAlert(a.$t("UnknownErrorOccur"),"failure",!0,a.$t("Alert"))}))}}},b=y,D=(a("0cd4"),Object(f["a"])(b,r,l,!1,null,null,null)),T=D.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"my-popups modal right fade show",staticStyle:{display:"block"}},[a("div",{staticClass:"modal d-block "},[a("div",{staticClass:"modal-dialog doc-setup-slide mw-1100",staticStyle:{display:"inline-block"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header ui-draggable-handle"},[a("h5",{staticClass:"modal-title",attrs:{id:"ui-id-26"}},[t._v(" Setup")]),a("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.$emit("close")}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body bg-white initialsetup_newtab_mainbase newtabdes_buttonsbase"},[t.TabList.length>0?a("section",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"left-menu-tab new_tab"},[a("div",{staticClass:"col-md-12 pb-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-8 pr-0 font-weight600 mb-1"},[t._v(t._s(t.$t("CompleteYourProfile")))]),a("div",{staticClass:"col-4 text-right"},[a("b",{},["Completed"!==t.setupProgresText?a("span",{staticClass:"smallresult"},[t._v("Progress "+t._s(t.currentTabIndex)+" of "+t._s(t.TabList.length))]):t._e()]),"Completed"==t.setupProgresText?a("span",{staticClass:"smallresult"},[a("i",{staticClass:"fa fa-check-circle",class:{"text-success":"Completed"==t.setupProgresText,"text-muted":"Completed"!==t.setupProgresText}}),t._v(" "+t._s(t.$t(t.setupProgresText))+" ")]):t._e()]),a("div",{staticClass:"col-4 pl-0 text-right"})]),a("div",{staticClass:"initialsetup_newtab_design progress storagegraph smaller"},[a("div",{staticClass:"progress-bar progress-bar-primary px-0 text-right memoryused",class:""+t.progressBarColor,style:"width: "+t.setupProgress+"%; font-weight:500; font-size:14px",attrs:{id:"divConsumendStorage",title:t.setupProgress}})])])])]),a("div",{staticClass:"mt-3",staticStyle:{"max-height":"calc(100vh - 2px)"},attrs:{id:"divscrollsetuptabs"}},[a("ul",{staticClass:"nav nav-pills flex-column left-tab responivecustomtab lefttabiconfix initialsetup_newtab_design"},t._l(t.TabList,(function(e,i){return a("li",{class:{"nav-item FirstScreen":!0,active:e.tabCode==t.currentSelectedTab.tabCode,initialsetup_completed:e.isCompleted},on:{click:function(a){return t.setCurrectTab(e)}}},[a("a",{staticClass:"digits_num"},[t._v(t._s(i+1)+".")]),a("a",{class:{"nav-link":!0},staticStyle:{cursor:"pointer"}},[e.isCompleted?a("i",{staticClass:"fa fa-check-circle text-success"}):t._e(),e.isCompleted?t._e():a("i",{class:"pr-2 text-muted "+e.icon}),a("span",[t._v(t._s(t.$t(e.displayName)))])])])})),0)])]),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tab-content"},[null!=t.currentSelectedTab?a("div",{staticClass:"tab-pane call-detail fade p-0 border-0 active show ",attrs:{id:"step1"}},[a("moduleSetupBridge",{attrs:{component:t.currentSelectedTab.componentName,moduleCode:t.moduleCode,tabCount:t.TabList.length,currentTabIndex:t.currentTabIndex},on:{PreviousTab:t.PreviousTab,UpdateProgress:t.UpdateProgress,NextTab:t.NextTab,Close:t.Close}})],1):t._e()])])]):t._e(),0==t.TabList.length?a("section",{staticClass:"container-fluid p-0"},[a("div",{staticClass:"text-danger text-center p-4"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e()])])])])])])},I=[],x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a(t.component,{tag:"component",attrs:{moduleCode:t.moduleCode,tabCount:t.tabCount,currentTabIndex:t.currentTabIndex},on:{nextTab:t.NextTab,updateProgress:t.UpdateProgress,previousTab:t.PreviousTab,close:t.Close}})],1)},w=[],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("dynamic-form",{ref:"validatePriority",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)},L=[],E={props:{tabCount:0,currentTabIndex:0},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Priority Name"),name:"ResourceTypeName",value:"",placeholder:this.$t("Enter Priority Name"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"InActive"}]},placeholder:this.$t("SelectStatus"),validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"ColorField",label:this.$t("ColorField"),name:"ColorField",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Display Order"),name:"Status",value:"",config:{options:[{value:"1",name:"1"},{value:"2",name:"2"},{value:"3",name:"3"},{value:"4",name:"4"},{value:"5",name:"5"},{value:"6",name:"6"},{value:"7",name:"7"},{value:"8",name:"8"}]},placeholder:this.$t("SelectStatus"),validationRules:{required:!0,max:100}}]}],buttons:[{type:"button",class:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",text:"Skip",isVisible:this.tabCount>this.currentTabIndex,onClick:this.Skip},{type:"submit",class:"btn btn-success",isVisible:!(this.tabCount>this.currentTabIndex),text:"<i class='fa fa-save pr-2'></i>Save"},{type:"submit",class:"btn btn-success",isVisible:this.tabCount>this.currentTabIndex,text:"<i class='fa fa-save pr-2'></i>Save And Next"}],ListData:[]}},methods:{onSubmit(t,e){var a=this,i=`priorityId=0&priorityName=${a.FormSchema[0].Data[0].value}&statusId=${a.FormSchema[0].Data[1].value}&displayOrder=${a.FormSchema[1].Data[1].value}&priorityColor=${a.FormSchema[1].Data[0].value}`;h.AddTicketPriority(i).then(t=>{"1"==t.data?(a.ShowAlert("Priority successfully added.","success"),a.tabCount>1?(a.$emit("nextTab"),a.$emit("updateProgress",currentTabIndex,!0)):a.clearFields(),a.$parent.GetStorageSetupStatusDetail()):"2"==t.data?a.ShowAlert("Priority already Exist.","failure"):a.ShowAlert(a.$t("AddedError"),"failure")})},clearFields:function(){var t=this;t.FormSchema[0].Data[0].value="",t.FormSchema[0].Data[1].value="",t.FormSchema[1].Data[0].value="#000000",t.FormSchema[1].Data[1].value="",t.$refs.validatePriority.validateForm.reset()},Skip:function(){var t=this;t.$emit("nextTab")}}},F=E,O=Object(f["a"])(F,N,L,!1,null,null,null),R=O.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"tab-content"},[a("dynamic-form",{ref:"AddLead",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")},on:{OnSubmit:t.onSubmit}})],1)])])},k=[],M={props:{tabCount:0,currentTabIndex:0},data(){return{LeadData:[],username:null,userid:null,isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("FirstName"),name:"FirstName",value:"",placeholder:this.$t("FirstName"),validationRules:{required:!0}},{astype:"TextField",label:this.$t("LastName"),name:"LastName",value:"",placeholder:this.$t("LastName"),validationRules:{required:!0}},{astype:"TextField",label:this.$t("LeadEmail"),name:"LeadEmail",value:"",placeholder:this.$t("LeadEmail"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("LeadOwner"),name:"LeadOwner",value:"",placeholder:this.$t("LeadOwner"),config:{options:[],onChange:this.onChangeProfile},validationRules:{required:!0}},{astype:"DateField",label:this.$t("LeadDate"),name:"LeadDate",value:new Date,placeholder:this.$t("LeadDate"),validationRules:{required:!0},config:{mode:"date",format:"M/D/YYYY"}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"1001",placeholder:this.$t("Status"),config:{options:[{name:"Active",value:1001},{name:"InActive",value:"1002"}],onChange:this.onChangeProfile},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Country"),name:"Country",value:"",placeholder:this.$t("Country"),config:{options:[],onChange:this.onChangeProfile},validationRules:{required:!0}}]}],buttons:[{type:"button",class:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",text:"Skip",isVisible:!1,onClick:this.Skip},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){this.username=this.GetUserInfo.Name,this.userid=this.GetUserInfo.ID,this.buttons[0].isVisible=this.tabCount>this.currentTabIndex,this.GetCountryData(),this.GetLeadOwner()},methods:{GetCountryData:function(){var t=this;h.GetCountryData().then((function(e){var a=e.data;a.forEach(e=>{t.FormSchema[0].Data[6].config.options.push({name:e.countrY_FULL_NAME,value:e.id})}),t.$refs.AddLead.UpdateKeyValue()}))},GetLeadOwner:function(){var t=this;t.FormSchema[0].Data[3].config.options.push({name:t.username,value:t.userid})},onSubmit:function(t){var e=this;e.isLoading=!0;var a={first_name:t.FirstName,last_name:t.LastName,email:t.LeadEmail,lead_owner:t.LeadOwner,lead_date:t.LeadDate,status_id:t.Status,country:t.Country},i=a;h.AddLead(i).then((function(t){null!=t&&"Success"==t.data[0].Status&&(e.ShowAlert(e.$t("RecordsSavedSuccessfully")),e.tabCount>1?e.$emit("nextTab"):e.clearFields())})),e.isLoading=!1},clearFields:function(){var t=this;t.FormSchema[0].Data[0].value="",t.FormSchema[0].Data[1].value="",t.FormSchema[0].Data[2].value="",t.FormSchema[0].Data[3].value="",t.FormSchema[0].Data[4].value="",t.FormSchema[0].Data[5].value="",t.FormSchema[0].Data[6].value="",t.$refs.validatePriority.validateForm.reset()},Skip:function(){var t=this;t.$parent.ShowNextTab(2)}}},G=M,U=Object(f["a"])(G,P,k,!1,null,null,null),B=U.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"col-md-12 p-0"},[a("div",{staticClass:"tab-content"},[a("dynamic-form",{ref:"AddConfig",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")},on:{OnSubmit:t.onSubmit}})],1)])],1)},V=[],j={data(){return{UserData:[],FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("User"),name:"User",value:"",placeholder:this.$t("User"),config:{options:[],onChange:this.onChangeProfile},validationRules:{required:!0}},{astype:"ToggleField",label:this.$t("CanViewAllCrmRecord"),name:"CanViewAllCrmRecord",value:"Yes",placeholder:"",validationRules:{required:!1}}]}],isLoading:!1,buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:function(){var t=this;t.GetUser()},methods:{onSubmit:function(t){var e=this;e.isLoading=!0;var a={User:t.User,CanViewAllCrmRecord:t.CanViewAllCrmRecord},i=JSON.stringify(a);h.SaveConfigData(i).then(t=>{"INSERT"==t.data.result?e.ShowAlert(e.$t("AddedSuccess",[e.$t("Configuration")]),"success",!0,e.$t("Alert")):"UPDATE"==t.data.result?e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Configuration")]),"success",!0,e.$t("Alert")):e.ShowAlert(e.$t("AddedError",[e.$t("Configuration")]),"danger",!0,e.$t("Alert")),e.isLoading=!1})},GetUser:function(){var t=this,e="moduleName=CRM_USER&type=USERS";h.GetDDLDataForAddGroup(e).then(e=>{t.UserData=e.data.DATA,t.UserData.forEach((e,a)=>{t.FormSchema[0].Data[0].config.options.push({name:e.name,value:e.value})}),t.$refs.AddConfig.UpdateKeyValue()})}}},Y=j,J=Object(f["a"])(Y,z,V,!1,null,null,null),q=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("dynamic-form",{ref:"AddlocationRef",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-parent_location_id",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group custlocation"},[a("tree-view",{class:{"form-control":!0},attrs:{options:t.options,placeholder:"Select Location11d","show-count":!0},model:{value:t.TreeValue,callback:function(e){t.TreeValue=e},expression:"TreeValue"}}),i.fieldInfo.config.showAddIcon?a("div",{staticClass:"ml-2 mt-1"},[a("a",{staticClass:"round-icon-small btn-dark theme-primary",on:{click:t.AddLocation}},[a("i",{staticClass:"fa fa-plus text-white pt-7 font-18",attrs:{alt:"+"}})])]):t._e()],1)]}}])})],1)},H=[],W=a("ca17"),Z=a.n(W),X=(a("542c"),{props:{popupCondition:{type:Boolean,required:!0},tabCount:0,currentTabIndex:0},components:{"tree-view":Z.a},data(){return{TreeValue:null,FormSchema:[],isLoading:!1,buttons:[{type:"button",class:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",text:this.$t("Skip"),isVisible:this.tabCount>this.currentTabIndex,onClick:this.Skip},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save & New",name:"SaveAndNew",isVisible:!1},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save & Next",name:"SaveAndNext",isVisible:!1},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save And Next",name:"Save"}],myObj:[],LocationData:[],CountryData:[],StatusData:[{name:"Active",value:1001},{name:"Inactive",value:1002}],StateData:[],TagData:[],CreatedAt:"",CreatedBy:"",ModifiedAt:"",ModifiedBy:"",DataLoaded:0,UserId:"",SetupProgresText:"",FindalLocationArray:[]}},created:async function(){var t=this;t.getForm(),await t.GetLocationByCompanyId(),t.UserId=t.GetUserInfo.ID},methods:{getForm:function(t){var e=this;e.isLoading=!0;var a="recordId=0&moduleName=Company&subModuleCode=Location";s["a"].GetDynamicForm(a).then((function(t){null!=t&&null!=t.data&&(e.FormSchema=e.$refs.AddlocationRef.ConvertCustomFieldIntoDynamicFormObj(t.data.data),e.FormSchema.forEach((t,a)=>{t.Data.forEach((t,a)=>{e.FormSchema.length>0&&("parent_location_id"==t.name&&(t.config.showAddIcon=!1,t.astype="SlotField",t.is_required=!1),"tag_id"==t.name&&(t.mode="tag",t.astype="MultiSelectField",t.is_required=!1,t.config.showAddIcon=!1))})}),e.isLoading=!1)}))},Skip:function(){var t=this;t.$parent.NextTab()},async AdvancedSetupFields(){var t=this;"setup"==t.popupCondition&&(t.FormSchema[0].Data[6].visibility=!1,t.FormSchema[0].Data[7].visibility=!1,t.FormSchema[0].Data[8].visibility=!1,t.FormSchema[0].Data[9].visibility=!1,t.FormSchema[0].Data[10].visibility=!1,t.FormSchema[0].Data[11].visibility=!1,t.FormSchema[0].Data[12].visibility=!1,t.buttons[0].isVisible=!0,t.buttons[1].isVisible=!1,t.buttons[2].isVisible=!0,t.buttons[3].isVisible=!1,t.buttons[4].isVisible=!1)},GetCountryDDL:function(){var t="moduleName=CRM&type=COUNTRIES";s["a"].GetCountryDDL(t).then(t=>{t.data.DATA.forEach(t=>{this.FormSchema[0].Data[5].config.options.push({name:""+t.name,value:""+t.value})})})},async GetTagsByModuleId(){var t=this,e="modulename=Asset";await h.GetTagsByModuleId(e).then((function(e){t.TagData=JSON.parse(e.data),t.TagData.data.forEach((e,a)=>{t.FormSchema[0].Data[12].config.options.push({name:e.TAG_NAME,value:e.TAG_ID})}),console.log(" GetTagsByModuleId  call end")}))},onChangeDropdown(t){var e=this,a="countryId="+t.target.value;h.GetStateListwithIDByCountryId(a).then((function(t){e.StateData=JSON.parse(t.data).data,e.StateData=e.StateData.map(t=>({name:t.name,value:t.state_id})),$.each(e.FormSchema,(function(t,a){$.each(a.Data,(function(t,a){"State"==a.name&&(a.value="",a.config.options=e.StateData)}))})),e.$refs.AddlocationRef.UpdateKeyValue()}))},async GetLocationByCompanyId(){var t=this;t.isLoading=!0;var e="reqForm=";await h.GetLocationByCompanyIdAsset(e).then((function(e){t.FindalLocationArray=[],t.LocationData=JSON.parse(e.data).data,t.LocationData.forEach(a=>{var i=t.FindalLocationArray.filter((function(t){return t.COMPANY_LOCATION_ID==a.COMPANY_LOCATION_ID}));if(0==i.length&&null==a.PARENT_LOCATION_ID){let i=a.COMPANY_LOCATION_ID,o=t.getChildLocation(i,a,JSON.parse(e.data).data);t.FindalLocationArray.push(o)}}),t.options=t.FindalLocationArray}))},getChildLocation:function(t,e,a){let i=this,o={};o={id:e.COMPANY_LOCATION_ID,label:e.LOCATION_NAME};let n=o;var s=a.filter((function(e){return e.PARENT_LOCATION_ID==t}));let r=[];return s.forEach(t=>{let e=t.COMPANY_LOCATION_ID;var n=r.filter((function(e){return e.COMPANY_LOCATION_ID==t.COMPANY_LOCATION_ID}));if(0==n.length){var s=a.filter((function(t){return t.PARENT_LOCATION_ID==e}));if(null!=s&&s.length>0){let o=i.getChildLocation(e,t,a);r.push(o)}else o={id:""+t.COMPANY_LOCATION_ID,label:""+t.LOCATION_NAME},r.push(o)}}),n.children=r,n},GetStatusDDL(){var t=this;t.StatusData.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({name:e.name,value:e.value})})},ClosePopup(){var t=this;t.$parent.CloseLocationPopup()},onSubmit:function(t,e){var a=this,i=`LocationName=${t.LocationName}&LocationId=0`;h.LocationExist(i).then((function(i){a.LocationId=i.data.result,i.data.result>0?a.ShowAlert(a.$t("CostCentreExists",[a.$t("Location")]),"warning",!0,a.$t("Alert")):a.$refs.AddlocationRef.validateForm.validate().then(i=>{if(i){a.isLoading=!0;var o=a.$refs.AddlocationRef.ConvertDynamicFormObjToCustomFieldObj(a.FormSchema);o.forEach((e,a)=>{"parent_location_id"==e.field_name&&(e.field_value=null==t.LocationName?0:t.LocationName)});var n={data:o,moduleCode:"Company",subModuleCode:"Location"};s["a"].SaveDynamicForm(JSON.stringify(n)).then((function(t){null!=t&&null!=t.data&&"Success"==t.data[0].Status?"SaveAndNew"==e?(a.close(),setTimeout(()=>{""==a.popupCondition||void 0==a.popupCondition?a.$parent.OpenModelAddProduct():a.$parent.showadvancesettingpopup(a.popupCondition)},400),a.isLoading=!1,a.$parent.GetProgresSetupStatusDetail()):"Save"==e&&("1"!=t.data&&null!=t.data||(a.ShowAlert(a.$t("LocationSaveSuccessfully",[a.$t("Location")]),"success",!0,a.$t("Alert")),a.tabCount>1&&(a.$emit("nextTab"),a.$emit("updateProgress",currentTabIndex,!0)))):(a.ShowAlert(a.$t("ErrorWhileSaving",[a.$t("Product")]),"danger",!0,a.$t("Alert")),a.isLoading=!1)}))}})}))},resetForm(){this.FormSchema[0].Data.forEach(t=>{"TreeSelectField"==t.astype?t.value=null:(t.value="",t.validationRules.required=!0)})}}}),Q=X,tt=Object(f["a"])(Q,K,H,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("Form",{ref:"AddProduct"},[a("dynamic-form",{ref:"AddProductForm",attrs:{buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.$t("MandatoryString")},scopedSlots:t._u([{key:"tgslot-unit_price",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text",attrs:{id:"spnOutOF"}},[t._v(t._s(t.Currency))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control no-spinner",attrs:{type:"number",name:"unitprice",min:"0",maxlength:5,step:"any",pattern:"\\d+\\.?\\d?(?!\\d)"},domProps:{value:i.fieldInfo.value},on:{input:[function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)},t.limitLength],keyup:function(e){return t.GetAssetCost(e,i.fieldInfo.value)}}})])]}},{key:"tgslot-asset_cost",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text",attrs:{id:"spnOutOF"}},[t._v(t._s(t.Currency))])]),a("input",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control no-spinner",attrs:{type:"number",min:0},domProps:{value:i.fieldInfo.value},on:{keyup:function(e){return t.GetUnitPrice(i.fieldInfo.value)},input:function(e){e.target.composing||t.$set(i.fieldInfo,"value",e.target.value)}}})])]}},{key:"tgslot-location_id",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group custlocation"},[a("tree-view",{class:{"form-control":!0},attrs:{options:t.options,placeholder:"Select Location","show-count":!0},model:{value:t.TreeValue,callback:function(e){t.TreeValue=e},expression:"TreeValue"}}),i.fieldInfo.config.showAddIcon?a("div",{staticClass:"ml-2 mt-1"},[a("a",{staticClass:"round-icon-small btn-dark theme-primary",on:{click:t.AddLocation}},[a("i",{staticClass:"fa fa-plus text-white pt-7 font-18",attrs:{alt:"+"}})])]):t._e()],1)]}}])})],1),t.ShowAddLocation?a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("Location"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.CloseLocationPopup()}}},[a("em",{staticClass:"fa fa-times"})])]),a("AddLocationPopup")],1)])])]):t._e(),t.IsTagNamePopup?a("TagNamePopup",{attrs:{FromAddProduct:t.FromAddProduct}}):t._e(),t.ShowAddProductType?a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("ProductType"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.ClosePopupProductType()}}},[a("em",{staticClass:"fa fa-times"})])]),a("AddProductType",{attrs:{FromPage:t.FromPage}})],1)])])]):t._e()],1)},it=[],ot=(a("b7ef"),{props:{tabCount:0,currentTabIndex:0,FromPage:{type:String,required:!1},popupCondition:{type:String,required:!1}},components:{"tree-view":Z.a},data(){return{options:[],TreeValue:null,isLoading:!1,AssetType:[],BarcodeType:[],userLoggedIn2:!1,IsDeployment:!1,IsTagNamePopup:!1,LocationData:[],ShowAddLocation:!1,ShowAddProductType:!1,FromAddProduct:!1,DeploymentType:"",IsEnableAssetManagement:!1,fileUploaded:"",tagData:[],isCheckDeployItem:"",DeployProductValue:!1,StaticObj:[{layoutType:"single",Data:[{astype:"TreeSelectField",label:this.$t("Location"),name:"Location",value:null,placeholder:"Select Location",config:{options:[],showAddIcon:!0,onAddButtonClick:this.AddLocation},validationRules:{required:!0}}]}],FormSchema:[],buttons:[{type:"button",class:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",text:this.$t("Skip"),isVisible:this.tabCount>this.currentTabIndex,onClick:this.Skip},{type:"button",class:"btn btn-warning float-left",text:this.$t("Previous"),isVisible:this.currentTabIndex>1,onClick:this.PreviousButton},{type:"submit",class:"btn btn-secondary",text:"<i class='fa fa-angle-double-left pr-2'></i>Back",onClick:this.BackButton,isVisible:!1},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save And Close",name:"SaveAndClose",isVisible:!(this.tabCount>this.currentTabIndex),onClick:this.onSubmit}],DataLoaded:0,TagsArray:[],tags:[],file:[],CurrentTab:1,step:3,SetupProgress:0,count:0,PageSize:10,PageNumber:1,SortBy:"",SortExp:"",IsClientStoragesCopmleted:!1,UserType:"",fileMulitpleData:[],AllowedFileType:[],currency:"",SaveTags:[],acceptArray:[],ModelTitle:"Add Product"}},watch:{CurrentTab:{handler(t,e){3==t&&this.getForm()}}},async created(){var t=this;""!=t.FromPage&&null!=t.FromPage||(t.FromPage="AddProduct"),await t.GetAllowFileType(),t.AdvancedSetupFields(),await t.EnableAssetManagement(),t.Currency=this.GetUserInfo.Currency,await t.getForm(),await t.AssetCatalogueListing(),await t.GetProgress(),await t.GetLocationByCompanyId(),t.DataLoaded=1},mounted(){$("#modelAddProduct").modal({backdrop:"static",keyboard:!1})},methods:{closeSetupSetting(){this.$emit("CloseSetup")},async GetAllowFileType(){var t=this;await h.GetAllowFileType().then(e=>{if(null!=e.data){const a=e.data.AllowedFileTypes.split(",");a.forEach(e=>{const a=e.trim().replace(/\./g,"");t.acceptArray.push({fileType:a,iconClass:"fa-file-image-o"})})}})},getForm:async function(t){var e=this;e.isLoading=!0;var a="recordId=0&moduleName=Asset&subModuleCode=MANAGE_PRODUCT&usefor=Add";await s["a"].GetDynamicForm(a).then((function(t){if(null!=t&&null!=t.data){if("undefined"!=typeof t.data.configdata&&t.data.configdata.length>0){var a=t.data.configdata;a.forEach((function(t){"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(e.AllowedFileType=t.CONFIG_DATA_VALUE)}))}t.data.data;e.FormSchema=e.$refs.AddProductForm.ConvertCustomFieldIntoDynamicFormObj(t.data.data),e.FormSchema.forEach((t,a)=>{t.Data.forEach((a,i)=>{"deployement_type"!=a.name&&"location_id"!=a.name&&"quantity"!=a.name&&"unit_price"!=a.name&&"asset_cost"!=a.name||(a.visibility=!1,t.visibility=!1),"quantity"==a.name&&(a.is_required=!0,a.validationRules={required:!0,max:7}),"unit_price"==a.name&&(a.astype="SlotField",a.is_required=!1,a.validationRules={required:!1,max:5}),"asset_cost"==a.name&&(a.astype="SlotField"),"location_id"==a.name&&(a.config.showAddIcon=!1,a.config.onAddButtonClick=e.AddLocation,a.astype="SlotField",a.is_required=!1),"deployement_type"==a.name&&(a.value="1"),"type"==a.name&&(a.value=!1),"create_unique_name_list"==a.name&&(a.value=!1,e.ModelTitle=t.group_name),"asset_type_id"==a.name&&"AdvanceSettings"!=e.FromPage&&(a.config.showAddIcon=!1,a.config.onAddButtonClick=e.OpenAddProductTypePopup),"tag_id"==a.name&&(a.mode="tag",a.is_required=!1,a.config.showAddIcon=!1,a.config.onAddButtonClick=e.OpenAddTagPopup),"type"==a.name&&(a.value=!1,a.is_required=!0),"status_id"==a.name&&(a.visibility=!0),"attachment_path"==a.name&&(a.showLabel=!0,e.acceptArray.length>0&&(a.config={maxSize:5,onDeleteSelectedFiles:e.onDeleteSelectedFiles,accept:e.acceptArray,showAddIcon:!1,onAddButtonClick:"",multiple:!1})),a.config.onChange=e.onChangeEventForFields})}),e.isLoading=!1}}))},onChangeEventForFields:function(t,e,a){let i=this;"type"==e.name&&i.FormSchema.forEach((t,a)=>{t.Data.forEach((a,i)=>{e.value?"deployement_type"!=a.name&&"location_id"!=a.name&&"quantity"!=a.name&&"unit_price"!=a.name&&"asset_cost"!=a.name||(a.visibility=!0,t.visibility=!0):"deployement_type"!=a.name&&"location_id"!=a.name&&"quantity"!=a.name&&"unit_price"!=a.name&&"asset_cost"!=a.name||(a.visibility=!1,t.visibility=!1)})}),"attachment_path"==e.name&&i.GetBase64String(e.value);parseFloat(""==i.FormSchema[2].Data[1].value?0:i.FormSchema[2].Data[1].value);var o=parseFloat(""==i.FormSchema[2].Data[2].value?0:i.FormSchema[2].Data[2].value);if("quantity"==e.name)if(parseFloat(e.value)>0&&o>0){var n=parseFloat(e.value)*parseFloat(o);i.FormSchema[2].Data[3].value=n.toFixed(3)}else i.FormSchema[2].Data[3].value="0.000"},GetBase64String:function(t){try{var e=this,a=t[0],i=new FileReader;let o={};i.onload=function(t){return function(t){var i=t.target.result,n=window.btoa(i),s=a.name;e.fileName=s;var r=s.lastIndexOf("."),l=s.substring(r+1,s.length);e.fileExt+="."+l;var c='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',d=a.size;e.fileSize=d,o.attachement_mime=c,o.fileName=s,o.base64String=n,o.fileSize=a.size,o.contentType=a.type,o.ModuleName="Asset",o.SubModuleCode="Manage_Products",e.fileMulitpleData.push(o)}}(),i.readAsBinaryString(a)}catch(o){}},onDeleteSelectedFiles:function(){this.$delete(this.FormSchema[4].Data[0].config,"showSelectedFiles")},OnDeplymentType(t,e){e.value=t.target.getAttribute("data-value"),console.log(t.target.getAttribute("data-value"))},async AssetCatalogueListing(){var t=this;t.isLoading=!0;var e=`pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&${t.searchCondition}`;await h.AssetCatalogueListing(e).then(e=>{e.data.length>0?(t.count=t.count+1,t.SetupProgresText="Completed"):t.SetupProgress=0,t.isLoading=!1})},GetProgress(){var t=this;1==t.count?t.SetupProgress=33.33:2==t.count?t.SetupProgress=66.66:3==t.count&&(t.SetupProgress=100)},BackButton(){var t=this;t.SkipTab(2)},SkipTab:function(t){var e=this;e.step=t,e.CurrentTab=t},Skip:function(){var t=this;t.$parent.NextTab()},AdvancedSetupFields(){var t=this;"setup"==t.popupCondition&&(t.step=1,t.buttons[0].isVisible=!0,t.buttons[1].isVisible=!0,t.buttons[2].isVisible=!1,t.buttons[3].isVisible=!1,t.buttons[4].isVisible=!0)},async GetTagsByModuleI(){var t=this;await h.GetTagsByModuleId("moduleName=Asset").then((function(e){t.TagsArray=JSON.parse(e.data).data,t.TagsArray.forEach((e,a)=>{t.FormSchema[0].Data[5].config.options.push({name:e.TAG_NAME,value:e.TAG_ID})})}))},HideShowDeployProductFields(t){var e=this;1==t?("setup"==e.popupCondition?(e.FormSchema[2].Data[0].visibility=!1,e.FormSchema[3].Data[0].visibility=!0):(e.FormSchema[2].Data[0].visibility=!0,e.FormSchema[3].Data[0].visibility=!1),e.FormSchema[4].Data[0].visibility=!0,e.FormSchema[4].Data[1].visibility=!0,e.FormSchema[4].Data[2].visibility=!0,e.FormSchema[4].Data[3].visibility=!0):(e.popupCondition,e.FormSchema[2].Data[0].visibility=!1,e.FormSchema[3].Data[0].visibility=!1,e.FormSchema[4].Data[0].visibility=!1,e.FormSchema[4].Data[1].visibility=!1,e.FormSchema[4].Data[2].visibility=!1,e.FormSchema[4].Data[3].visibility=!1)},onSubmit:function(t){var e=this;e.$refs.AddProduct.validate().then(a=>{if(a){e.isLoading=!0;var i=e.$refs.AddProductForm.ConvertDynamicFormObjToCustomFieldObj(e.FormSchema);i.forEach((t,a)=>{if("type"==t.field_name&&(1==t.field_value?t.field_value=1:t.field_value=2),"create_unique_name_list"==t.field_name&&(1==t.field_value?t.field_value=1:t.field_value=0),"location_id"==t.field_name&&(t.field_value=null==e.TreeValue?0:e.TreeValue),"unit_price"==t.field_name&&(e.FormSchema[2].Data[2].value>0?t.field_value=e.FormSchema[2].Data[2].value:t.field_value=0),"asset_cost"==t.field_name&&(t.field_value=e.FormSchema[2].Data[3].value),"tag_id"===t.field_name){const e=t.field_value;e.forEach(t=>{t.tagId=t.value});const a=e.map(t=>t.tagId).join(",");t.field_value=a}});var o={data:i,moduleCode:"Asset",subModuleCode:"Manage_Product",attachmentData:e.fileMulitpleData.length>0?e.fileMulitpleData:null};h.IsDuplicateAssetCatalog(JSON.stringify(o)).then((function(a){if(a.data.isSave){let i={field_name:"item_code",field_value:a.data.itemCode};o.data.push(i),s["a"].SaveDynamicForm(JSON.stringify(o)).then((function(a){null!=a&&null!=a.data&&"Success"==a.data[0].Status?(e.ShowAlert(e.$t("Product has been Saved Successfully"),"success",e.$t("Alert")),"setup"==e.popupCondition?(e.isLoading=!1,e.closeSetupSetting()):e.close(),"SaveAndNew"==t.name&&(e.close(),setTimeout(()=>{""==e.popupCondition||void 0==e.popupCondition?e.$parent.OpenModelAddProduct():e.$parent.showadvancesettingpopup(e.popupCondition)},400),e.isLoading=!1)):(e.ShowAlert(e.$t("ErrorWhileSaving",[e.$t("Product")]),"danger",!0,e.$t("Alert")),"setup"==e.popupCondition?e.$parent.ShowAddProduct=!1:e.$parent.FetchData(),e.isLoading=!1)}))}else e.ShowAlert(e.$t("AlreadyExistRec"),"danger",!0,e.$t("Alert")),e.isLoading=!1}))}})},setFile:function(t){var e=this;for(let a=0;a<t.target.files.length;a++){const i=t.target.files[a];e.file.push(i)}},isDeployProduct(){var t=this;t.FormSchema[3].Data[0].isVisible=!0},GetAssetCost(t,e){var a=this,i=parseFloat(""==a.FormSchema[2].Data[1].value?0:a.FormSchema[2].Data[1].value),o=parseFloat(e);if(e.length>5&&(a.FormSchema[2].Data[2].value=e.slice(0,5),a.ShowAlert(a.$t("The Unit Price field may not be greater than 5 characters"),"failure",a.$t("Alert"))),o>0&&i>0){var n=parseFloat(o)*parseFloat(i);a.FormSchema[2].Data[3].value=n.toFixed(3)}else a.FormSchema[2].Data[3].value="0.000"},GetUnitPrice(t){var e=this,a=parseFloat(""==e.FormSchema[2].Data[1].value?0:e.FormSchema[2].Data[1].value),i=parseFloat(""==e.FormSchema[2].Data[2].value?0:e.FormSchema[2].Data[2].value);if(a>0&&i>0){var o=parseFloat(i)*parseFloat(a);e.FormSchema[2].Data[3].value=o.toFixed(3)}else e.FormSchema[2].Data[3].value="0.000"},UploadFile(t){var e=this;e.fileUploaded=t.target.files[0]},removeTag:function(t){var e=this;e.confirmR(e.$t("ConfirmRemoveTag"),!0,e.$t("Delete"),(function(){var a=e.tagData.findIndex(e=>e.TAG_ID===t);a>-1&&e.tagData.splice(a,1)}))},AddLocation(){var t=this;t.IsDeployment=!0,t.ShowAddLocation=!0},GetLocationByCompanyId:async function(){var t=this;t.LocationData=[];var e="reqForm=assetassignment";await h.GetLocationByCompanyIdAsset(e).then(e=>{t.FindalLocationArray=[],t.LocationData=JSON.parse(e.data).data,"undefined"==typeof t.$route.params.reqForm||"pendingRequest"==t.$route.params.reqForm&&""!=t.GetParentDetails&&null!=t.GetParentDetails?t.TreeValue=null:t.TreeValue=e.data.data[0].COMPANY_LOCATION_ID,t.LocationData.forEach(e=>{var a=t.FindalLocationArray.filter((function(t){return t.COMPANY_LOCATION_ID==e.COMPANY_LOCATION_ID}));if(0==a.length&&null==e.PARENT_LOCATION_ID){let a=e.COMPANY_LOCATION_ID,i=t.getChildLocation(a,e,t.LocationData);t.FindalLocationArray.push(i)}}),t.options=t.FindalLocationArray})},getChildLocation:function(t,e,a){let i=this,o={};o={id:e.COMPANY_LOCATION_ID,label:e.LOCATION_NAME};let n=o;var s=a.filter((function(e){return e.PARENT_LOCATION_ID==t}));let r=[];return s.forEach(t=>{let e=t.COMPANY_LOCATION_ID;var n=r.filter((function(e){return e.COMPANY_LOCATION_ID==t.COMPANY_LOCATION_ID}));if(0==n.length){var s=a.filter((function(t){return t.PARENT_LOCATION_ID==e}));if(null!=s&&s.length>0){let o=i.getChildLocation(e,t,a);r.push(o)}else o={id:""+t.COMPANY_LOCATION_ID,label:""+t.LOCATION_NAME},r.push(o)}}),n.children=r,n},OpenAddTagPopup(){var t=this;t.ShowAddProduct=!0,$("#modelAddProduct").modal("show"),setTimeout((function(){$("#modelAddProduct").modal("show"),setTimeout((function(){t.SetBootstraptoolTip()}),200)}),1e3),t.FromAddProduct=!0,t.IsTagNamePopup=!0},close(){var t=this;"AdvanceSettings"!=t.FromPage&&("setup"==t.popupCondition?(t.$parent.showpopup=!1,t.$parent.GetProgresSetupStatusDetail()):($("#modelAddProduct").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),t.$parent.FetchData(),t.$parent.ShowAddProduct=!1))},closeAddProduct(){var t=this;"setup"==t.popupCondition?t.$parent.showpopup=!1:t.$parent.ShowAddProduct=!1},CloseTagPopup(){var t=this;t.getForm(),t.IsTagNamePopup=!1},async CloseLocationPopup(){var t=this;t.LocationData=[],t.FindalLocationArray=[],await t.GetLocationByCompanyId(),setTimeout((function(){t.HideShowDeployProductFields(!0)}),500),t.isLoading=!1,t.ShowAddLocation=!1},async EnableAssetManagement(){let t="moduleName=Asset&configkey=CanSeeAssetManagement";await h.EnableAssetManagement(t).then(t=>{this.IsEnableAssetManagement=t.data})},OpenAddProductTypePopup(){var t=this;t.FromPage="AddProduct",t.ShowAddProductType=!0},ClosePopupProductType(){var t=this;t.ShowAddProductType=!1,t.getForm()},PreviousButton:function(){var t=this;t.$emit("previousTab")}}}),nt=ot,st=(a("e6c5"),Object(f["a"])(nt,at,it,!1,null,null,null)),rt=st.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),t.DataLoaded?a("dynamic-form",{ref:"updateValues",attrs:{buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-GracePeriod",fn:function(e){e.data;return[a("div",{staticClass:"form-group"},[a("Field",{staticClass:"w-100",attrs:{rules:{required:!0},name:"Grace Period"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("div",{staticClass:"d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.GracePeriod,expression:"GracePeriod"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{type:"text",name:"GracePeriod"},domProps:{value:t.GracePeriod},on:{keyup:function(e){return t.handleChange(t.GracePeriod)},input:function(e){e.target.composing||(t.GracePeriod=e.target.value)}}}),a("span",{staticClass:"input-group-append"},[a("span",{staticClass:"input-group-text",attrs:{id:"spnOutOF"}},[t._v("Days")])])]),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"GracePeriod"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]}},{key:"tgslot-ProductTypeCode",fn:function(e){e.data;return[a("div",{staticClass:"form-group"},[a("div",{staticClass:"d-flex"},[a("a",{attrs:{href:"javascript:;","data-toggle":"tooltip","data-trigger":"click",title:"Please enter the product type code. Else four digit product type code will be generated by system."},on:{click:t.toggleTip}},[a("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.ProductTypeCode,expression:"ProductTypeCode"}],staticClass:"form-control",attrs:{type:"text",name:"ProductTypeCode",maxlength:4},domProps:{value:t.ProductTypeCode},on:{input:function(e){e.target.composing||(t.ProductTypeCode=e.target.value)}}})])])]}},{key:"tgslot-tblContainer",fn:function(e){e.data;return[t.IsShowCompartments?a("div",{staticClass:"table-responsive"},[a("Form",{ref:"AddProductType"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 m-0",attrs:{id:"tblContainerList"}},[a("thead",{staticClass:"thead-bg",attrs:{id:"divgrid"}},[a("th",{staticStyle:{"min-width":"142px"}},[a("span",{staticClass:"float-left"},[t._v("Compartments")]),a("span",{staticClass:"text-danger float-left"},[t._v("*")])]),a("th",{staticClass:"text-center",staticStyle:{"min-width":"100px"}},[a("span",[t._v("Action")])])]),a("tbody",t._l(t.tableRows,(function(e,i){return a("tr",{key:i,attrs:{id:"datarow"}},[a("td",[a("Field",{attrs:{name:t.$t("CompartmentName"),rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.InputContainervalue,expression:"item.InputContainervalue"}],class:{"form-control":!0,"is-invalid":n[0]},attrs:{id:"container_name_"+i,type:"text",maxlength:"200",placeholder:"Fill the compartment name"},domProps:{value:e.InputContainervalue},on:{input:[function(a){a.target.composing||t.$set(e,"InputContainervalue",a.target.value)},function(e){return t.startValidationTimer(i)}]}}),n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:t.$t("CompartmentName")}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})],1),a("td",[a("a",{staticClass:"round-icon-small btn-danger-light float-none d-inline-block",attrs:{href:"javascript:;",title:"Delete"}},[a("em",{staticClass:"recyclebin fa fa-trash",on:{click:function(e){return t.RemoveContainerRow(i)}}})]),a("a",{staticClass:"add round-icon-small btn-success-light float-none d-inline-block",attrs:{href:"javascript:;",title:"Add"},on:{click:function(e){return t.AddContainerRow()}}},[a("em",{staticClass:"fa fa-plus"})])])])})),0)])])],1):t._e()]}}],null,!1,982179010)}):t._e(),a("div",{staticClass:"left-content row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-12 text-left"},[a("div",{staticClass:"py-2 mandatory"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])])])],1)},ct=[],dt={props:{popupCondition:{type:Boolean,required:!0},AseetTypeIde:{type:Number,required:!1},FromPage:{type:String,required:!1},tabCount:0,currentTabIndex:0},components:{},data(){return{isLoading:!1,FormSchema:[{layoutType:"triple",groupLayoutType:"single",group_name:"Product Type",group_display_name:this.$t("ItemType"),Data:[{astype:"TextField",label:this.$t("ItemNameType"),name:"ItemNameType",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:"",validationRules:{required:!0},config:{options:[]}},{astype:"SlotField",label:this.$t("ProductTypeCode"),name:"ProductTypeCode",value:"",placeholder:"",validationRules:{max:4}},{astype:"toggleField",label:this.$t("Container"),name:"Container",value:"",placeholder:"",config:{onChange:this.ContainerDeleteConfirm}},{astype:"SlotField",showLabel:!1,label:this.$t("Container"),name:"tblContainer",value:"",placeholder:"",config:{options:[]},visibility:!0}]},{layoutType:"single",groupLayoutType:"single",Data:[{astype:"FileField",showLabel:!0,label:this.$t("AttachItemImage"),name:"AttachItemImage",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[],showSelectedFiles:[{attachmentId:"1",attachmentName:"",attachmentPath:""}],onClickSelectedFiles:this.onClickSelectedFile,onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.setFile1,showAddIcon:!1,onAddButtonClick:this.AddFileMore,multiple:!1}}]},{layoutType:"Single",groupLayoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:""}]},{layoutType:"four",groupLayoutType:"single",group_name:"Product Categories",group_display_name:this.$t("ProductCategories"),Data:[{astype:"toggleField",label:this.$t("Asset_No"),name:"Asset_No",value:"",placeholder:""},{astype:"toggleField",label:this.$t("Consumable"),name:"Consumable",value:"",placeholder:""},{astype:"toggleField",label:this.$t("License"),name:"License",value:"",placeholder:""},{astype:"toggleField",label:this.$t("MaterialSpareParts"),name:"MaterialSpareParts",value:"",placeholder:""}]},{layoutType:"single",groupLayoutType:"single",Data:[{astype:"MultiSelectField",label:this.$t("Tags"),name:"Tags",value:"",mode:"tag",placeholder:this.$t("Select")+" "+this.$t("Tags"),config:{options:[],showAddIcon:!0,onAddButtonClick:this.OpenAddTagPopup}}]},{layoutType:"four",groupLayoutType:"single",group_name:"Hardware Integration Type",group_display_name:this.$t("HardwareIntegrationType"),Data:[{astype:"toggleField",label:this.$t("Time_n_Attendance"),name:"Time_n_Attendance",value:"",placeholder:""},{astype:"toggleField",label:this.$t("Camera"),name:"Camera",value:"",placeholder:""},{astype:"toggleField",label:this.$t("RFID"),name:"RFID",value:"",placeholder:""},{astype:"toggleField",label:this.$t("GPSTracking"),name:"GPSTracking",value:"",placeholder:""}]},{layoutType:"four",groupLayoutType:"single",group_name:"Action Based Properties",group_display_name:this.$t("ActionBasedProperties"),Data:[{astype:"toggleField",label:this.$t("IsTransferable"),name:"IsTransferable",value:"",placeholder:""},{astype:"toggleField",label:this.$t("IsSelfCheckOut"),name:"IsSelfCheckOut",value:"",placeholder:"",config:{onChange:this.OnIsSelfCheckOut}},{astype:"toggleField",label:this.$t("SelfieEnable"),name:"SelfieEnable",value:"",placeholder:"",visibility:!1},{astype:"toggleField",label:this.$t("EmployeeAcceptance"),name:"EmployeeAcceptance",value:"",placeholder:""},{astype:"toggleField",label:this.$t("EnableTerms"),name:"EnableTerms",value:"",placeholder:""},{astype:"toggleField",label:this.$t("GPS_Enable"),name:"GPS_Enable",value:"",placeholder:""},{astype:"toggleField",label:this.$t("Fleet_Management"),name:"Fleet_Management",value:"",placeholder:""},{astype:"toggleField",label:this.$t("PenaltyOnStatus"),name:"PenaltyOnStatus",value:"",placeholder:"",config:{onChange:this.OnPenaltyOnStatus}},{astype:"SelectField",label:this.$t("Status"),name:"AssetReplacementType",value:"",placeholder:"",validationRules:{required:!0},config:{options:[]},visibility:!1},{astype:"toggleField",label:this.$t("PenaltyOnReturnOverdue"),name:"PenaltyOnReturnOverdue",value:"",placeholder:"",config:{onChange:this.OnPenaltyOnReturnOverdue}},{astype:"SlotField",label:this.$t("GracePeriod"),name:"GracePeriod",value:"",placeholder:"",config:{options:[]},visibility:!1,validationRules:{required:!0}}]},{layoutType:"four",groupLayoutType:"single",group_name:"Deployment Properties",group_display_name:this.$t("DeploymentProperties"),Data:[{astype:"ToggleField",label:this.$t("InsurancePolicy"),name:"InsurancePolicy",value:"",placeholder:""},{astype:"ToggleField",label:this.$t("Calibration"),name:"Calibration",value:"",placeholder:""},{astype:"ToggleField",label:this.$t("ItemCost"),name:"ItemCost",value:"",placeholder:""},{astype:"ToggleField",label:this.$t("IsWarranty"),name:"IsWarranty",value:"",placeholder:""},{astype:"ToggleField",label:this.$t("Depreciable"),name:"Depreciable",value:"",placeholder:""}]}],buttons:[{type:"button",class:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",text:this.$t("Skip"),isVisible:!0,onClick:this.Skip},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save And Next",value:"Save",name:"Save"},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save & New",name:"SaveAndNew",isVisible:!1},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save & Next",name:"SaveAndNext",isVisible:!1}],StatusDDL:[{label:"Active",value:1001},{label:"Inactive",value:1002}],AssetReplacementTypeDDL:[],IsTagNamePopup:!1,FromAddProduct:!1,IsShowCompartments:!1,lbl:!1,tableRows:[],currentInputIndex:0,AssetTypeCode:"",userId:null,companyId:null,DataLoaded:0,TagsArray:[],file:[],file1:[],ShowAddProduct:!1,CompartmentListData:[],Count:0,checkFieldsvalue:!1,TypeData:[],TagsSelectedArray:[],ProductTypeCode:"",validationTimer:null,AllContainerDeletePopup:!1,GracePeriod:""}},created:async function(){var t=this;t.userId=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.Name,await t.GetTagsByModuleI(),await t.BindStatus(),t.AseetTypeIde>0?(await t.GetAssetTagsById(),await t.FetchData()):delete t.FormSchema[1].Data[0].config.showSelectedFiles,await t.GetAllowFileType(),t.DataLoaded=1},methods:{async GetAllowFileType(){await h.GetAllowFileType().then(t=>{if(null!=t.data){const e=t.data.AllowedFileTypes.split(","),a=this.FormSchema[1].Data[0].config.accept;e.forEach(t=>{const e=t.trim().replace(/\./g,"");a.push({fileType:e,iconClass:"fa-file-image-o"})})}})},onDeleteSelectedFiles:function(t){this.$delete(this.FormSchema[1].Data[0].config,"showSelectedFiles")},onClickSelectedFile(t){var e=this;e.isLoading=!0;var a=e.TypeData[0].ATTACHMENT_PATH.split("/")[4]+"/"+e.TypeData[0].ATTACHMENT_PATH.split("/")[5]+"/"+e.TypeData[0].ATTACHMENT_PATH.split("/")[6]+"/"+e.TypeData[0].ATTACHMENT_PATH.split("/")[7],i=e.TypeData[0].ATTACHMENT_PATH.split(".")[5],o=e.TypeData[0].ATTACHMENT_NAME,n="filePath="+a;h.DownloadAttachment(n).then(t=>{if(null!=t.data&&200===t.status){const n=t.data,s=`data:${i};base64,${n}`;var a=document.createElement("a");a.href=s,a.setAttribute("download",o),document.body.appendChild(a),a.click(),e.isLoading=!1}else e.isLoading=!1})},toggleTip(){$('[data-toggle="tooltip"]').tooltip({trigger:"click"}).on("shown.bs.tooltip",(function(){var t=$(this);setTimeout((function(){t.tooltip("hide")}),2e3)}))},onChangeContainer(t,e,a){var i=this;i.FormSchema[0].Data[4].value=a.target._value},handleChange(t){var e=this;if(""!==t.trim()){if(t=parseInt(t,10),isNaN(t))return e.ShowAlert(e.$t("EnterValidNumber"),"warning",e.$t("Alert")),void(e.GracePeriod="");t<1?e.GracePeriod=1:t>365&&(e.GracePeriod=365)}},async OnPenaltyOnStatus(t){var e=this;e.FormSchema[6].Data[8].config.options=[],e.FormSchema[6].Data[8].visibility=!0,1==t?await h.GetAssetItemStatusList().then((function(t){e.AssetReplacementTypeDDL=t.data,e.AssetReplacementTypeDDL.forEach(t=>{e.FormSchema[6].Data[8].config.options.push({name:t.STATUS_NAME,value:t.STATUS_ID})}),e.$refs.updateValues.UpdateKeyValue()})):0==t&&(e.FormSchema[6].Data[8].value="",e.FormSchema[6].Data[8].visibility=!1)},OnIsSelfCheckOut(t){var e=this;1==t?e.FormSchema[6].Data[2].visibility=!0:0==t&&(e.FormSchema[6].Data[2].visibility=!1)},OnPenaltyOnReturnOverdue(t){var e=this;1==t?e.FormSchema[6].Data[10].visibility=!0:0==t&&(e.FormSchema[6].Data[10].visibility=!1)},Skip(){var t=this;t.$parent.NextTab()},AdvancedSetupFields(){var t=this;"setup"==t.popupCondition&&(t.buttons[0].isVisible=!0,t.buttons[1].isVisible=!0,t.buttons[2].isVisible=!1,t.buttons[3].isVisible=!0,t.buttons[4].isVisible=!1)},OpenAddTagPopup(){var t=this;t.IsTagNamePopup=!0},setFile1:function(t){var e=this;for(let a=0;a<t.target.files.length;a++){const i=t.target.files[a];e.file1.push(i)}},BindStatus(){var t=this;t.StatusDDL.forEach(e=>{t.FormSchema[0].Data[1].config.options.push({name:e.label,value:""+e.value})}),setTimeout(()=>{t.$refs.updateValues.UpdateKeyValue()},500)},onSubmit:function(t,e){var a=this;if(a.buttons[1].class+=" disabled",a.isLoading=!0,a.Count=0,0==t.Asset_No&&0==t.Consumable&&0==t.License&&0==t.MaterialSpareParts?(a.ShowAlert(a.$t("At least one Product category must be selected!"),"failure",a.$t("Alert")),a.Count=1,a.buttons[1].class="btn btn-success"):1==a.IsShowCompartments&&a.tableRows.forEach((t,e)=>{""==t.InputContainervalue&&(a.checkFieldsvalue,a.Count=1)}),0==a.Count){let s={};a.tableRows.forEach((t,e)=>{s={container_Id:0,asset_type_id:a.AseetTypeIde>0?a.AseetTypeIde:0,container_name:t.InputContainervalue,status_id:1001,modified_by:a.userId},a.CompartmentListData.push(s)});let r={};a.AseetTypeIde>0?r.AssetTypeId=a.AseetTypeIde:r.AssetTypeId=0,r.AssetType=t.ItemNameType,r.status_id=""==t.Status?a.FormSchema[0].Data[1].value:t.Status,r.Description=t.Description,r.created_at=null,r.modified_at=null,r.modified_by=a.userId,r.company_id=a.companyId,r.AssetTypeCategory=1==t.Asset_No?1:0,r.IsContainer=1==t.Container?1:0,r.IsSelfCheckOut=1==t.IsSelfCheckOut?1:0,r.IsTransferable=1==t.IsTransferable?1:0,r.IsEnableTerms=1==t.EnableTerms?1:0,r.InsurancePolicy=1==t.InsurancePolicy?1:0,r.AssetTypeCode=a.ProductTypeCode,r.IsAsset=1==t.Asset_No?1:0,r.IsConsumable=1==t.Consumable?1:0,r.IsLicense=1==t.License?1:0,r.IsSpare=1==t.MaterialSpareParts?1:0,r.IsItemCost=1==t.ItemCost?1:0,r.IsDepreciable=1==t.Depreciable?1:0,r.IsCalibration=1==t.Calibration?1:0,r.IsWarranty=1==t.IsWarranty?1:0,r.IsEmployeeAcceptance=1==t.EmployeeAcceptance?1:0,r.IsPenalty=1==t.PenaltyOnStatus?1:0;var i=1==t.PenaltyOnStatus?1:0;r.penalty_type=0==i?null:t.AssetReplacementType,r.IsPenaltyOnReturnOverdue=1==t.PenaltyOnReturnOverdue?1:0;var o=1==t.PenaltyOnReturnOverdue?1:0;r.GracePeriod=0==o?null:a.GracePeriod,r.IsGPSTracking=1==t.GPSTracking?1:0,r.IsFleetManagement=1==t.Fleet_Management?1:0,r.IsTimeAttendance=1==t.Time_n_Attendance?1:0,r.IsCamera=1==t.Camera?1:0,r.IsRFID=1==t.RFID?1:0,r.IsGPS=1==t.GPS_Enable?1:0,r.IsSelfieEnable=1,r.IsSampleData=0,r.container_name="",r.BatchId="",r.AssetTagIds=Array.prototype.map.call(t.Tags,(function(t){return t.value})).join(","),r.CompartmentList=a.CompartmentListData;var n=new FormData;if(1==i&&(null==t.AssetReplacementType||""==t.AssetReplacementType&&null==a.FormSchema[6].Data[8].value||""==a.FormSchema[6].Data[8].value))return a.buttons[1].class="btn btn-success",$('[name="AssetReplacementType"]').focus(),$(".btn-success").focus(),a.isLoading=!1,!1;n.append("postString",JSON.stringify(r)),n.append("Files",a.file1[0]),h.AddProductType(n).then((function(t){"setup"==a.popupCondition&&a.$parent.GetProgresSetupStatusDetail(),"SaveAndNew"==e&&("size_exceed"==t.data.msg||"FileSizeExceeded"==t.data.msg||"ExceedAllowedSize"==t.data.msg?a.ShowAlert(a.$t("FileSizeExceedMsg"),"warning",!0,a.$t("Alert")):"1"==t.data.status?(a.ShowAlert(a.$t("AddProductType"),"success",a.$t("Alert")),a.$emit("RefresComp"),a.isLoading=!1):"3"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"success",a.$t("Alert")),a.$parent.ClosePopupProductType(),a.$parent.FetchData()):"AlreadyExists"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"warning",a.$t("Alert")),a.CancelButton()):"ValidFileUploadMsg"==t.data.msg?(a.ShowAlert(a.$t("NotAllowedFile"),"warning",a.$t("Alert")),a.CancelButton()):(a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert")),a.CancelButton()),a.isLoading=!1,a.buttons[1].class="btn btn-success"),"SaveAndNext"==e&&("size_exceed"==t.data.msg||"FileSizeExceeded"==t.data.msg||"ExceedAllowedSize"==t.data.msg?a.ShowAlert(a.$t("FileSizeExceedMsg"),"warning",!0,a.$t("Alert")):"1"==t.data.status?(a.ShowAlert(a.$t("AddProductType"),"success",a.$t("Alert")),a.$parent.SkipTab(3)):"3"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"success",a.$t("Alert")),a.$parent.ClosePopupProductType(),a.$parent.FetchData()):"AlreadyExists"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"warning",a.$t("Alert")),a.CancelButton()):"ValidFileUploadMsg"==t.data.msg?(a.ShowAlert(a.$t("NotAllowedFile"),"warning",a.$t("Alert")),a.CancelButton()):(a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert")),a.CancelButton()),a.buttons[1].class="btn btn-success",a.isLoading=!1),"Save"==e&&("size_exceed"==t.data.msg||"FileSizeExceeded"==t.data.msg||"ExceedAllowedSize"==t.data.msg?a.ShowAlert(a.$t("FileSizeExceedMsg"),"warning",!0,a.$t("Alert")):"1"==t.data.status?(a.ShowAlert(a.$t("AddProductType"),"success",a.$t("Alert")),a.tabCount>1&&(a.$emit("nextTab"),a.$emit("updateProgress",currentTabIndex,!0)),a.CancelButton(),"EditProduct"==a.FromPage&&a.$parent.FetchData()):"2"==t.data.status?(a.ShowAlert(a.$t("UpdatedProductType"),"success",a.$t("Alert")),a.$parent.ClosePopupProductType(),a.$parent.FetchData()):"3"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"success",a.$t("Alert")),a.$parent.ClosePopupProductType(),a.$parent.FetchData()):"AlreadyExists"==t.data.status?(a.ShowAlert(a.$t("ProductTypeExist"),"warning",a.$t("Alert")),a.CancelButton()):"ValidFileUploadMsg"==t.data.msg?(a.ShowAlert(a.$t("NotAllowedFile"),"warning",a.$t("Alert")),a.CancelButton()):(a.ShowAlert(a.$t("UnknownError"),"failure",a.$t("Alert")),a.CancelButton()),a.buttons[1].class="btn btn-success",a.isLoading=!1)}))}else a.buttons[1].class="btn btn-success",a.isLoading=!1},startValidationTimer(t){clearTimeout(this.validationTimer),this.validationTimer=setTimeout(()=>{this.validateDuplicate(t)},1e3)},validateDuplicate(t){const e=this.tableRows[t].InputContainervalue.trim().toLowerCase(),a=this.tableRows.some((a,i)=>i!==t&&a.InputContainervalue.trim().toLowerCase()===e);a&&(this.ShowAlert("Duplicate "+this.$t("CompartmentName")+" is not allowed","failure",this.$t("Alert")),this.tableRows[t].InputContainervalue="")},AddContainerRow(){var t=this;this.tableRows.length>=10?t.ShowAlert("Maximum number of "+this.$t("Compartments")+" reached. You cannot add more "+this.$t("Compartments")+".","failure",this.$t("Alert")):t.$refs.AddProductType.validate().then(t=>{t&&this.tableRows.push({InputContainervalue:""})})},RemoveContainerRow(t){var e=this;e.confirmR(e.$t("Are you sure you want to delete these record(s)?"),!0,!1,(function(a){1==e.tableRows.length?(e.lbl=!0,e.ShowCompartments(),e.FormSchema[0].Data[3].value=!1,e.tableRows=[]):e.tableRows.splice(t,1)}))},ContainerDeleteConfirm(t){let e=this;0==t&&e.tableRows.length>0?(e.confirmR(e.$t("Are you sure you want to Clear All Compartment record(s)?"),!0,!1,(function(t){e.tableRows=[],e.FormSchema[0].Data[3].value=!1,e.IsShowCompartments=!1})),e.FormSchema[0].Data[3].value=!0):e.ShowCompartments()},ShowCompartments(){var t=this;this.tableRows.length>0?t.lbl=!0:t.lbl=!1,0==t.lbl?(t.IsShowCompartments=!0,this.tableRows.push({InputContainervalue:""}),t.lbl=!0):1==t.lbl&&(t.IsShowCompartments=!1,t.tableRows=[],t.lbl=!1)},CancelButton(){var t=this;("EditProduct"==t.FromPage||"AddProduct"==t.FromPage)&&t.$parent.ClosePopupProductType()},divDialogAddTags(){var t=this;t.FromAddProduct=!1,t.IsTagNamePopup=!0},CloseTagPopup(){var t=this;t.IsTagNamePopup=!1},async GetTagsByModuleI(){var t=this;t.TagsArray=[],t.FormSchema[4].Data[0].config.options=[],await h.GetTagsByModuleId("moduleName=Asset").then((function(e){t.TagsArray=JSON.parse(e.data).data,t.TagsArray.forEach((e,a)=>{t.FormSchema[4].Data[0].config.options.push({name:e.TAG_NAME,value:e.TAG_ID})})}))},async GetAssetTagsById(){var t=this,e=`id=${t.AseetTypeIde}&is_for=ASSET_TYPE`;await h.GetAssetTagsById(e).then(e=>{t.tagsData=JSON.parse(e.data),t.tagsData.forEach((e,a)=>{t.TagsSelectedArray.push({label:e.TAG_NAME,value:e.TAG_ID})}),t.FormSchema[4].Data[0].value=t.TagsSelectedArray})},FetchData(){var t=this;t.isLoading=!0;var e="Id="+t.AseetTypeIde;h.AssetGetById(e).then(e=>{if(null!=e.data)if(e.data.length>0){t.TypeData=e.data,t.FormSchema[0].Data[0].value=t.TypeData[0].ASSET_TYPE,t.FormSchema[0].Data[1].value=t.TypeData[0].STATUS_ID,t.ProductTypeCode=t.TypeData[0].TYPE_CODE,t.FormSchema[0].Data[3].value=1==t.TypeData[0].IS_CONTAINER,1==t.TypeData[0].IS_CONTAINER&&(t.IsShowCompartments=!0,t.TypeData.forEach((e,a)=>{t.tableRows.push({InputContainervalue:e.CONTAINER_NAME})})),null!=t.TypeData[0].ATTACHMENT_PATH&&""!=t.TypeData[0].ATTACHMENT_PATH?(t.FormSchema[1].Data[0].config.showSelectedFiles[0].attachmentPath=t.TypeData[0].ATTACHMENT_PATH,t.FormSchema[1].Data[0].config.showSelectedFiles[0].attachmentName=t.TypeData[0].ATTACHMENT_PATH.split("/")[7]):delete t.FormSchema[1].Data[0].config.showSelectedFiles,t.FormSchema[2].Data[0].value=t.TypeData[0].DESCRIPTION,t.FormSchema[3].Data[0].value=1==t.TypeData[0].IS_ASSET,t.FormSchema[3].Data[1].value=1==t.TypeData[0].IS_CONSUMABLE,t.FormSchema[3].Data[2].value=1==t.TypeData[0].IS_LICENSE,t.FormSchema[3].Data[3].value=1==t.TypeData[0].IS_SPARE,t.FormSchema[5].Data[0].value=1==t.TypeData[0].IS_TIME_N_ATTENDANCE,t.FormSchema[5].Data[1].value=1==t.TypeData[0].IS_CAMERA,t.FormSchema[5].Data[2].value=1==t.TypeData[0].IS_RFID,t.FormSchema[5].Data[3].value=1==t.TypeData[0].IS_GPS_TRACKING,t.FormSchema[6].Data[0].value=1==t.TypeData[0].IS_TRANSFERABLE,t.FormSchema[6].Data[1].value=1==t.TypeData[0].IS_SELF_CHECKOUT;var a=1==t.TypeData[0].IS_SELF_CHECKOUT;1==a?(t.FormSchema[6].Data[2].visibility=!0,t.FormSchema[6].Data[2].value=t.TypeData[0].is_selfie_enable):t.FormSchema[6].Data[2].visibility=!1,t.FormSchema[6].Data[3].value=1==t.TypeData[0].IS_EMPLOYEE_ACCEPTANCE,t.FormSchema[6].Data[4].value=1==t.TypeData[0].IS_ENABLE_TERMS,t.FormSchema[6].Data[5].value=1==t.TypeData[0].IS_GPS,t.FormSchema[6].Data[6].value=1==t.TypeData[0].IS_FLEET_MANAGEMENT,t.FormSchema[6].Data[7].value=1==t.TypeData[0].IS_PENALTY;var i=1==t.TypeData[0].IS_PENALTY;if(1==i){t.FormSchema[6].Data[8].visibility=!0,t.OnPenaltyOnStatus(!0);const e=""!==t.TypeData[0].PENALTY_TYPE&&null!==t.TypeData[0].PENALTY_TYPE?t.TypeData[0].PENALTY_TYPE.includes(",")?t.TypeData[0].PENALTY_TYPE.split(","):t.TypeData[0].PENALTY_TYPE:[],a=e.length>1?e:null;t.FormSchema[6].Data[8].value=a}else t.FormSchema[6].Data[8].visibility=!1;t.FormSchema[6].Data[9].value=1==t.TypeData[0].IS_PENALTY_ON_OVERDUE;var o=1==t.TypeData[0].IS_PENALTY_ON_OVERDUE;1==o?(t.FormSchema[6].Data[10].visibility=!0,t.GracePeriod=t.TypeData[0].GRACE_PERIOD):t.FormSchema[6].Data[10].visibility=!1,t.FormSchema[7].Data[0].value=1==t.TypeData[0].IS_INSURANCE_POLICY,t.FormSchema[7].Data[1].value=1==t.TypeData[0].IS_CALIBRATION,t.FormSchema[7].Data[2].value=1==t.TypeData[0].IS_ITEM_COST,t.FormSchema[7].Data[3].value=1==t.TypeData[0].IS_WARRANTY,t.FormSchema[7].Data[4].value=1==t.TypeData[0].IS_DEPRECIABLE,t.isLoading=!1}else t.TypeData=[],t.isLoading=!1;else t.isLoading=!1})}}},ut=dt,pt=(a("3faf"),Object(f["a"])(ut,lt,ct,!1,null,null,null)),mt=pt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("dynamic-form",{ref:"validatechain",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))])],1)},ht=[],St={props:{tabCount:0,currentTabIndex:0},data(){return{isLoading:!1,DataLoaded:0,ApprovalChainId:0,groupList:[],TagsSelectedArray:[],FormSchema:[{layoutType:"Single",Data:[{astype:"TextField",label:this.$t("ApprovalChainName"),name:"ApprovalChainName",value:"",placeholder:"",config:{onChange:this.checkName},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:1001,placeholder:"",validationRules:{required:!0},config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"Inactive"}]}},{astype:"MultiSelectField",label:this.$t("SelectApprovalGroup"),name:"ApprovalGroup",value:"",mode:"tag",placeholder:this.$t("Select"),validationRules:{required:!0},config:{options:[]}}]},{layoutType:"Single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!1}}]}],buttons:[{type:"button",class:"btn skip-btn-clr",text:"Skip",onClick:this.Skip},{type:"submit",class:"btn btn-success btnSave",text:"<i class='fa fa-save pr-2'></i>Save & Next"}]}},created:async function(){await this.GetApprovalGroups(),null!=this.$route.params.id&&(this.ApprovalChainId=this.$route.params.id,await this.ManageChain()),this.DataLoaded=1},methods:{onSubmit:function(t){var e=this,a={ApprovalChainId:e.ApprovalChainId,ApprovalChainName:t.ApprovalChainName,StatusId:t.Status,Groups:Array.prototype.map.call(t.ApprovalGroup,(function(t){return t.value})).join(","),Description:t.Description},i=JSON.stringify(a);h.AddApprovalChain(i).then(t=>{"-1"==t.data||"-2"==t.data?(e.ShowAlert(e.$t("AlreadyExists"),"warning",!0,e.$t("Alert")),e.onCancel()):"-3"==t.data?(e.ShowAlert(e.$t("SomethingwentWrong"),"failure",!0,e.$t("Alert")),e.onCancel()):(e.ShowAlert(e.$t("ApprovalChainSuccessfullyAdded"),"success",!0,e.$t("Alert")),e.tabCount>1?(e.$emit("nextTab"),e.$emit("updateProgress",currentTabIndex,!0)):e.clearFields())})},GetApprovalGroups:async function(){var t=this;h.GetApprovalGroupByCompanyId().then(e=>{var a=e.data;null!=a&&a.forEach((function(e,a){t.FormSchema[0].Data[2].config.options.push({name:e.APPROVAL_GROUP_NAME,value:""+e.APPROVAL_GROUP_ID})}))})},ManageChain:async function(){var t=this;t.isLoading=!0;var e="id="+this.$route.params.id;await h.GetByChainId(e).then(e=>{var a=JSON.parse(e.data);if(a.length>0){this.FormSchema[0].Data[0].value=a[0].approval_chain_name,this.FormSchema[0].Data[1].value=a[0].status_id,t.groupList=a[0].GROUPS.split(",");var i=[];for(let e=0;e<t.groupList.length-1;e++)i.push(t.groupList[e]);i.forEach(e=>{var a=t.FormSchema[0].Data[2].config.options.find(t=>t.value==e);void 0!=a&&t.TagsSelectedArray.push({label:a.name,value:a.value})}),this.FormSchema[0].Data[2].value=t.TagsSelectedArray,this.FormSchema[1].Data[0].value=a[0].description}}),t.isLoading=!1},onCancel:function(){this.$parent.$parent.$parent.IsshowConfiguration=!1},checkName(t,e){var a=this,i=e.value,o="ApprovalChainName="+i;h.CheckDuplicate(o).then(t=>{1==t.data&&a.FormSchema[0].Data[0].value&&(a.FormSchema[0].Data[0].value="",a.ShowAlert(a.$t("ChainExist"),"warning",!0,a.$t("Alert")),a.FormSchema[0].Data[0].validationRules.required=!0)})},clearFields:function(){var t=this;t.FormSchema[0].Data[0].value="",t.FormSchema[0].Data[1].value="",t.FormSchema[0].Data[2].value="",t.FormSchema[0].Data[3].value="",t.$refs.validatechain.validateForm.reset()},Skip:function(){var t=this;t.$parent.NextTab(3)}}},gt=St,ft=Object(f["a"])(gt,vt,ht,!1,null,null,null),Ct=ft.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("dynamic-form",{ref:"validateGroup",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))])],1)},yt=[],bt={props:{tabCount:0,currentTabIndex:0},data(){return{isLoading:!1,DataLoaded:0,ApprovalGroupId:0,UserList:[],TagsSelectedArray:[],FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("ApprovalGroupName"),name:"ApprovalGroupName",value:"",placeholder:"",config:{onChange:this.checkName},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:1001,placeholder:"",validationRules:{required:!0},config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"Inactive"}]}},{astype:"MultiSelectField",label:this.$t("Users"),name:"Users",value:"",mode:"tag",placeholder:this.$t("Select"),validationRules:{required:!0},config:{options:[]}}]},{layoutType:"Single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:""}]}],buttons:[{type:"button",class:"btn skip-btn-clr",text:"Skip",onClick:this.Skip},{type:"submit",class:"btn btn-success btnSave",text:"<i class='fa fa-save pr-2'></i>Save & Next"}]}},created:async function(){await this.GetNotficationUsers(),null!=this.$route.params.id&&(this.ApprovalGroupId=this.$route.params.id,await this.ManageItemsGroup()),this.DataLoaded=1},methods:{onSubmit:function(t){var e=this,a={ApprovalGroupId:e.ApprovalGroupId,ApprovalGroupName:t.ApprovalGroupName,Description:t.Description,Users:Array.prototype.map.call(t.Users,(function(t){return t.value})).join(","),StatusId:t.Status},i=JSON.stringify(a);h.AddGroup(i).then(t=>{"-1"==t.data||"-2"==t.data?e.ShowAlert(e.$t("AlreadyMapped"),"warning",!0,e.$t("Alert")):"-3"==t.data?e.ShowAlert(e.$t("Something went Wrong"),"failure",!0,e.$t("Alert")):(e.ShowAlert(e.$t("ApprovalGroupSuccessfullyAdded"),"success",!0,e.$t("Alert")),e.tabCount>1?(e.$emit("nextTab"),e.$emit("updateProgress",currentTabIndex,!0)):e.clearFields())})},GetNotficationUsers:async function(){var t=this,e="isIncludeLoginUserId=1&approvalGroupIds=&approvalChainIds=&moduleName=APPROVALRULE&DepartmentIds";await h.LoadUsersByCompanyId(e).then(e=>{var a=e.data;null!=a&&a.forEach((function(e,a){t.FormSchema[0].Data[2].config.options.push({name:""+e.USERNAME,value:""+e.USER_ID})}))}),t.FormSchema[0].Data[2].config.options},ManageItemsGroup:async function(){var t=this;t.isLoading=!0;var e="id="+this.$route.params.id;await h.GetById(e).then(e=>{var a=JSON.parse(e.data);if(a.length>0){this.FormSchema[0].Data[0].value=a[0].approval_group_name,this.FormSchema[0].Data[1].value=a[0].status_id,t.UserList=a[0].USERS.split(",");var i=[];for(let e=0;e<t.UserList.length-1;e++)i.push(t.UserList[e]);i.forEach(e=>{var a=t.FormSchema[0].Data[2].config.options.find(t=>t.value==e);void 0!=a&&t.TagsSelectedArray.push({label:a.name,value:a.value})}),this.FormSchema[0].Data[2].value=t.TagsSelectedArray,this.FormSchema[1].Data[0].value=a[0].description}}),t.isLoading=!1},checkName(t,e){var a=this,i=e.value,o="ApprovalGroupName="+i;h.CheckDuplicateGroup(o).then(t=>{1==t.data&&a.FormSchema[0].Data[0].value&&(a.FormSchema[0].Data[0].value="",a.ShowAlert(a.$t("NameExist"),"warning",!0,a.$t("Alert")),a.FormSchema[0].Data[0].validationRules.required=!0)})},clearFields:function(){var t=this;t.FormSchema[0].Data[0].value="",t.FormSchema[0].Data[1].value="",t.FormSchema[0].Data[2].value="",t.FormSchema[0].Data[3].value="",t.$refs.validateGroup.validateForm.reset()},Skip:function(){var t=this;t.$parent.NextTab(2)}}},Dt=bt,Tt=Object(f["a"])(Dt,At,yt,!1,null,null,null),_t=Tt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Approval",fn:function(e){var i=e.data;return[a("div",{staticClass:"input-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:i.fieldInfo.value,expression:"data.fieldInfo.value"}],staticClass:"form-control",class:""!=i.error?"form-control is-invalid":"form-control",attrs:{maxlength:5,step:"any"},domProps:{value:t.inputValue},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(i.fieldInfo,"value",e.target.multiple?a:a[0])}}},[a("option",{attrs:{disabled:""}},[t._v("Select Approval Chain")]),t._l(t.ApprovalChainList,(function(e){return a("option",{key:e.APPROVAL_CHAIN_ID,domProps:{value:e.APPROVAL_CHAIN_ID}},[t._v(t._s(e.APPROVAL_CHAIN_NAME))])}))],2),""!=i.error?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Location"}},[t._v(t._s(i.error))]):t._e()])]}},{key:"tgslot-LimitedDuration1",fn:function(e){var i=e.data;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left mb-2"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"timedate  input-group",attrs:{popover:t.popover,name:t.fromDateValue,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.inputValue,n=e.togglePopover;return[a("input",{class:""!=i.error?"form-control is-invalid":"form-control",attrs:{id:"txtFromDate_"+t.pgaction,placeholder:"M/D/YYYY"},domProps:{value:o},on:{click:function(t){return n()}}})]}}],null,!0),model:{value:t.fromDateValue,callback:function(e){t.fromDateValue=e},expression:"fromDateValue"}})],1),""!=i.error?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Location"}},[t._v(t._s(i.error))]):t._e()]),a("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[a("div",{staticClass:"input-group"},[a("v-date-picker",{staticClass:"timedate  input-group",attrs:{popover:t.popover,name:t.toDateValue,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.inputValue,n=e.togglePopover;return[a("input",{class:""!=i.error?"form-control is-invalid":"form-control",attrs:{id:"txtFromDate_"+t.pgaction,placeholder:"M/D/YYYY"},domProps:{value:o},on:{click:function(t){return n()}}})]}}],null,!0),model:{value:t.toDateValue,callback:function(e){t.toDateValue=e},expression:"toDateValue"}})],1),""!=i.error?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Location"}},[t._v(t._s(i.error))]):t._e()])])]}}])}),a("small",{staticClass:"text-danger"},[t._v(t._s(t.$t("MandatoryString")))]),t.IsShowGroup?a("ApprovalGroup",{attrs:{ApprovalchainId:t.ApprovalchainId,ApprovalchainName:t.ApprovalchainName}}):t._e()],1)},xt=[],wt=a("240d"),Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered",staticStyle:{"max-width":"900px !important"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ApprovalChain"))+": "+t._s(this.ChainName)+" ")]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.ClosePopup}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"listing OuterMainDiv"},[a("div",{staticClass:"row",staticStyle:{"max-height":"500px","overflow-y":"auto"}},[a("tg-list",{attrs:{IsShowAction:!1,listType:["List"],ModuleName:"Approval",SubModuleCode:"ApprovalRule",IdentityColumn:"APPROVALCHAINGROUPMAPID",ListData:t.GroupData,HeaderData:t.Headers,callbackfunction:t.FetchData,TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.FetchData,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["GROUPNAME"==i.column.COLUMN_NAME?[t._v(" "+t._s(i.row.GROUPNAME)+" ")]:t._e(),"USERS"==i.column.COLUMN_NAME?[t._v(" "+t._s(i.row.USERS)+" ")]:t._e(),"APPROVERORDER"==i.column.COLUMN_NAME?[t._v(" "+t._s(i.row.APPROVERORDER)+" ")]:t._e(),"Action"==i.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action"},[a("div",{staticClass:"cstm-drop-btn"},[a("span",[a("a",{on:{click:function(e){return t.DeleteApprovalGroup(i.row)}}},[a("em",{staticClass:"text-primary",attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fa fa-trash text-danger action-icon"})])])])])])]:t._e(),"RankUp"==i.column.COLUMN_NAME&&t.GroupData.length>1?[i.row.APPROVERORDER>1?[a("span",[a("a",{on:{click:function(e){return t.RankUpDown(i.row.APPROVALCHAINGROUPMAPID,"RankUp")}}},[a("em",{staticClass:"text-primary",attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fa fa-arrow-up text-primary action-icon down"})])])])]:t._e()]:t._e(),"RankDown"==i.column.COLUMN_NAME&&t.GroupData.length>1?[i.row.APPROVERORDER<t.GroupData.length?[a("span",[a("a",{on:{click:function(e){return t.RankUpDown(i.row.APPROVALCHAINGROUPMAPID,"RankDown")}}},[a("em",{staticClass:"text-primary",attrs:{"aria-hidden":"true"}},[a("i",{staticClass:"fa fa-arrow-down text-primary action-icon down"})])])])]:t._e()]:t._e()]}}])})],1)])])])])])])])])},Lt=[],Et={props:{ApprovalchainId:{type:String},ApprovalchainName:{type:String}},data(){return{ChainName:"",leftSearchFields:[],TotalRecords:0,listheaderbuttons:[],GroupData:[],IsShowGroup:!1,Headers:[{COLUMN_NAME:"GROUPNAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("ApprovalGroupName"),DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"USERS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Users"),DISPLAY_ORDER:2,settings:{isInSlot:!0}},{COLUMN_NAME:"RankUp",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("RankUp"),DISPLAY_ORDER:3,settings:{isInSlot:!0}},{COLUMN_NAME:"RankDown",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("RankDown"),DISPLAY_ORDER:4,settings:{isInSlot:!0}},{COLUMN_NAME:"APPROVERORDER",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Order",DISPLAY_ORDER:5,settings:{isInSlot:!0}},{COLUMN_NAME:"Action",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:this.$t("Action"),DISPLAY_ORDER:6,settings:{isInSlot:!0}}]}},created:function(){var t=this;t.ChainName=t.ApprovalchainName;t.ApprovalchainId;t.FetchData()},methods:{async FetchData(){var t=this,e="approvalChainId="+t.ApprovalchainId;h.ApprovalGroupListByApprovalCHainId(e).then(e=>{null!=e.data?e.data.length>0?(t.GroupData=e.data,t.noRecord=!1):(t.GroupData=[],t.noRecord=!0,t.TotalRecords=0):(t.noRecord=!0,t.GroupData=[],t.TotalRecords=0),setTimeout((function(){t.CheckBoxBootstrap()}),100)}),t.isLoading=!1},ClosePopup(){var t=this;t.$parent.CloseGroupPopup()},DeleteApprovalGroup(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  ",(function(){e.isLoading=!0;var a="id="+t.APPROVALCHAINGROUPMAPID;h.DeleteApprovalGroup(a).then(t=>{"0"==t.data?e.ShowAlert(e.$t("DeletedSuccessfully"),"success",!0,e.$t("Alert")):"-1"==t.data&&e.ShowAlert(e.$t("Unable to delete,approval chain requires at least one group"),"warning",!0,e.$t("Alert")),e.isLoading=!1,e.FetchData()})}))},RankUpDown(t,e){var a=this;a.isLoading=!0;var i=a.ApprovalchainId,o=a.GroupData.findIndex(e=>e.APPROVALCHAINGROUPMAPID===t);if("RankUp"==e)var n=a.GroupData[o-1].APPROVALCHAINGROUPMAPID;else n=a.GroupData[o+1].APPROVALCHAINGROUPMAPID;a.confirmR(a.$t("VerifysequenceofApprovalGroup"),!0,!1,(function(e){var o=`approvalChainId=${i}&approvalChainApprovalGroupMapId1=${t}&approvalChainApprovalGroupMapId2=${n}`;h.SwapApproverOrder(o).then(t=>{var e=[];e=JSON.parse(t.data),0==e[0].Status&&(a.ShowAlert(a.$t("ApprovalChainSuccess"),"success",!0,a.$t("Alert")),a.FetchData()),a.isLoading=!1})})),a.isLoading=!1},commonHeaderButtonClick(t){switch(t.callbackfunction){case"DeleteRule":this.DeleteRule();break;case"AddNewGroup":this.AddNewGroup();break}},actionButtonClick(t,e){},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},renderActions(t){}}},Ft=Et,Ot=Object(f["a"])(Ft,Nt,Lt,!1,null,null,null),Rt=Ot.exports,Pt={props:{tabCount:0,currentTabIndex:0},components:{ApprovalGroup:Rt,TreeSelectField:wt["TreeSelectField"]},data(){return{Usersdata:[],ApprovalchainName:"",ApprovalChainList:[],FormSchema:[{layoutType:"double",Data:[{astype:"TreeSelectField",label:this.$t("Location"),name:"Location",value:null,placeholder:"Select Location",disabled:!0,visibility:!1,config:{options:[]},validationRules:{required:!0}},{astype:"TextField",label:this.$t("AuditRuleName"),name:"AuditRule",value:"",placeholder:"",config:{onChange:this.checkRuleName},validationRules:{required:!0,max:250}},{astype:"SelectField",label:this.$t("Module"),name:"Module",value:2,placeholder:"",config:{options:[{value:2,name:"Expense"},{value:3,name:"Leave"},{value:4,name:"Timesheet"},{value:5,name:"Attendance"},{value:6,name:"Product"}],onChange:this.OnDeploymentType}},{astype:"SelectField",label:this.$t("Project"),name:"project_name",value:null,placeholder:"",visibility:!0,config:{options:[],onChange:this.GetUserbyProject},validationRules:{required:!0}},{astype:"MultiSelectField",label:"Users",name:"User",value:null,mode:"tag",placeholder:this.$t("Select"),config:{options:[]},validationRules:{required:!0}},{astype:"RadioField",label:this.$t("LimitedDuration"),name:"Limited_Duration",value:0,placeholder:"",visibility:!0,validationRules:{required:!1},config:{options:[{value:1,name:"Yes"},{value:0,name:"No"}],onChange:this.ManageLimtedDuration}},{astype:"SlotField",label:this.$t("LimitedDuration"),name:"LimitedDuration1",value:"",placeholder:"",visibility:!1,validationRules:{required:!0}},{astype:"RadioField",label:this.$t("ApprovalType"),name:"Approvaltype",value:1,placeholder:"",config:{options:[{value:1,name:"Approval Chain"},{value:2,name:"Client "},{value:3,name:"Both"}],onChange:this.OnApprovalType},validationRules:{required:!1}},{astype:"SlotField",label:this.$t("SelectApproval"),name:"Approval",value:"",placeholder:"",validationRules:{required:!0},visibility:!0,config:{onKeyUp:this.GetAssetCost}},{astype:"MultiSelectField",label:this.$t("SelectClient"),name:"Client",value:null,mode:"tag",visibility:!1,placeholder:this.$t("Select"),config:{options:[]},validationRules:{required:!0}},{astype:"SelectField",label:"Status",name:"Status_value",value:1001,config:{options:[{value:1001,name:"Active"},{value:1002,name:"Inactive"}]},validationRules:{required:!0}},{astype:"RadioField",label:this.$t("UseSequence"),name:"Sequence",value:0,placeholder:"",config:{options:[{value:1,name:"Yes"},{value:0,name:"No"}]},validationRules:{required:!1}}]},{layoutType:"One",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:null,placeholder:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}],myObj:[],LocationData:[],StatusData:[{name:"Active",value:1001},{name:"Inactive",value:1002}],projectdata:[],StateData:[],TagData:[],UserList:[],TagsSelectedArray:[],DataLoaded:0,UserId:"",IsShowGroup:!1,ApprovalchainId:null,ApprovalChainList:[],ApprovalID:0,ApprovalRuleId:0,isLoading:!1,ApprovaltypesId:0,ClientData:[],ClientSelectedArray:[],fromDateValue:null,toDateValue:null,Limiteduration:0}},async created(){var t=this;await t.GetLocation(),await t.GetProjectList(),await t.GetApprovalChain(),null!=t.$route.params.id&&(t.ApprovalRuleId=this.$route.params.id,await this.ManageRule(),await this.ManageLimtedDuration(t.Limiteduration),await this.OnDeploymentType(t.ApprovalID),null!=this.ApprovaltypesId&&await this.OnApprovalType(t.ApprovaltypesId))},methods:{onSubmit:function(t){var e=this;if(e.isLoading=!0,1==t.Approvaltype)var a="ApprovalChain";else if(2==t.Approvaltype)a="Client";else a="Both";var i={ApprovalRuleId:0!=e.ApprovalRuleId?e.ApprovalRuleId:0,RuleName:t.AuditRule,RuleDescription:t.Description,ApprovalTypeId:t.Module,IsLimitedDuration:t.Limited_Duration,dStart:0==t.Limited_Duration?null:e.$options.filters.formatDate(e.fromDateValue),dEnd:0==t.Limited_Duration?null:e.$options.filters.formatDate(e.toDateValue),ProjectId:null==t.project_name?null:t.project_name,Users:null==t.User?null:t.User,Tasks:null,Clients:null==t.Client||void 0==t.Client.value?null:t.Client.value,ClientApprovalType:null==t.Approvaltype?null:a,LocationId:null==t.Location?null:t.Location,ApprovalChainId:t.Approval,UseSequence:t.Sequence,StatusId:t.Status_value,Users:null==t.User?null:Array.prototype.map.call(t.User,(function(t){return t.value})).join(",")},o=JSON.stringify(i);h.AddRule(o).then(t=>{"0"==t.data&&(e.ShowAlert(e.$t("SomethingwentWrong"),"failure",!0,e.$t("Alert")),e.onCancel()),"2"==t.data?(e.ShowAlert(e.$t("AlreadyExists"),"warning",!0,e.$t("Alert")),e.onCancel()):(e.ShowAlert(e.$t("RuleSuccess"),"success",!0,e.$t("Alert")),e.$emit("updateProgress",currentTabIndex,!0),e.onCancel())}),e.isLoading=!1},ManageRule:async function(){var t=this;t.isLoading=!0;var e="id="+this.$route.params.id;await h.GetRuleById(e).then(async e=>{var a=JSON.parse(e.data);if(t.ApprovalID=a[0].APPROVAL_TYPE_ID,t.Limiteduration=a[0].IS_LIMITED_DURATION,t.ApprovaltypesId="ApprovalChain"==a[0].APPROVAL_TYPE?1:"Client"==a[0].APPROVAL_TYPE?2:"Both"==a[0].APPROVAL_TYPE?3:null,t.Approvaltype,a.length>0){if(this.FormSchema[0].Data[0].value=a[0].LOCATION_ID,this.FormSchema[0].Data[1].value=a[0].RULE_NAME,this.FormSchema[0].Data[2].value=a[0].APPROVAL_TYPE_ID,this.FormSchema[0].Data[3].value=a[0].PROJECT_ID,null!=a[0].PROJECT_ID&&0!=a[0].PROJECT_ID?await t.GetUserbyProject(a[0].PROJECT_ID):await t.GetUsers(),t.UserList=null!=a[0].USERS?a[0].USERS.split(","):a[0].USERS,null!=t.UserList){var i=[];for(let e=0;e<t.UserList.length-1;e++)i.push(t.UserList[e]);i.forEach(e=>{var a=t.projectdata.length>0?t.projectdata.find(t=>t.USER_ID==e):t.Usersdata.find(t=>t.USER_ID==e);void 0!=a&&(void 0!=a.USER_NAME?t.TagsSelectedArray.push({label:a.USER_NAME,value:a.USER_ID.toString()}):t.TagsSelectedArray.push({label:a.USERNAME,value:a.USER_ID.toString()}))}),this.FormSchema[0].Data[4].value=t.TagsSelectedArray}if(this.FormSchema[0].Data[5].value=a[0].IS_LIMITED_DURATION,this.fromDateValue=a[0].DURATION_START,this.toDateValue=a[0].DURATION_END,this.FormSchema[0].Data[7].value="ApprovalChain"==a[0].APPROVAL_TYPE?1:"Client"==a[0].APPROVAL_TYPE?2:"Both"==a[0].APPROVAL_TYPE?3:null,this.FormSchema[0].Data[8].value=a[0].APPROVAL_CHAIN_ID,null!=a[0].PROJECT_ID&&await t.GetClientbyProject(a[0].PROJECT_ID),this.FormSchema[0].Data[9].value=(a[0].CLIENTS,a[0].CLIENTS),t.ClienList=null!=a[0].CLIENTS?a[0].USERS.split(","):a[0].CLIENTS,null!=t.ClienList){var o=[];for(let e=0;e<t.ClientData.length;e++)o.push(t.ClientData[e]);o.forEach(e=>{var a=t.ClientData.find(t=>t.USER_ID==e.USER_ID);t.ClientSelectedArray.push({label:a.USERNAME,value:a.USER_ID})}),this.FormSchema[0].Data[9].value=t.ClientSelectedArray}this.FormSchema[0].Data[10].value=a[0].STATUS_ID,this.FormSchema[0].Data[11].value=a[0].USE_SEQUENCE,this.FormSchema[1].Data[0].value=a[0].RULE_DESCRIPTION}t.isLoading=!1})},GetProjectList:async function(){var t=this,e="userType=CA&IsEncrptedId='no'";h.GetProjectListing(e).then(e=>{var a=e.data;null!=a&&a.forEach((function(e,a){t.FormSchema[0].Data[3].config.options.push({name:""+e.ProjectName,value:""+e.ProjectId})}))})},GetUserbyProject:async function(t,e){var a=this;if(a.FormSchema[0].Data[4].config.options=[],void 0==e)var i=`ProjectId=${t}&ModuleName=APPROVALRULE`;else i=`ProjectId=${e.value}&ModuleName=APPROVALRULE`;await h.GetUsersByProjectId(i).then(i=>{a.projectdata=i.data,null!=a.projectdata&&(a.projectdata.forEach((function(t,e){a.FormSchema[0].Data[4].config.options.push({name:""+t.USER_NAME,value:""+t.USER_ID})})),a.FormSchema[0].Data[4].value="",a.FormSchema[0].Data[4].validationRules.required=!1),void 0!=e&&this.GetClientbyProject(t,e)})},GetClientbyProject:async function(t,e){var a=this,i=void 0!=e?"ProjectId="+e.value:"ProjectId="+t;await h.LoadClientByProjectId(i).then(t=>{a.ClientData=t.data,null!=a.ClientData&&a.ClientData.forEach((function(t,e){a.FormSchema[0].Data[9].config.options.push({name:""+t.USERNAME,value:""+t.USER_ID})}))})},GetUsers:async function(){var t=this;t.FormSchema[0].Data[4].config.options=[];var e="isIncludeLoginUserId=1&approvalGroupIds=&approvalChainIds=&moduleName=APPROVALRULE&DepartmentIds";await h.LoadUsersByCompanyId(e).then(e=>{t.Usersdata=e.data,null!=t.Usersdata&&t.Usersdata.forEach((function(e,a){t.FormSchema[0].Data[4].config.options.push({name:""+e.USERNAME,value:""+e.USER_ID})}))})},GetApprovalChain:async function(){var t=this;h.GetApprovalChainsByCompanyId().then(e=>{t.ApprovalChainList=e.data})},onCancel:function(){this.$parent.$parent.$emit("close")},ShowGroupPopup(t){const e=this.ApprovalChainList.find(e=>e.APPROVAL_CHAIN_ID===t);this.ApprovalchainId=e.APPROVAL_CHAIN_ID,this.ApprovalchainName=e.APPROVAL_CHAIN_NAME,this.IsShowGroup=!0},CloseGroupPopup(){var t=this;t.IsShowGroup=!1},async GetLocation(){var t=this,e="reqForm=";await h.GetLocationByCompanyId(e).then(e=>{t.LocationData=e.data,t.FindalLocationArray=[],t.LocationData.forEach(a=>{var i=t.FindalLocationArray.filter((function(t){return t.COMPANY_LOCATION_ID==a.COMPANY_LOCATION_ID}));if(0==i.length&&null==a.PARENT_LOCATION_ID){let i=a.COMPANY_LOCATION_ID,o=t.getChildLocation(i,a,e.data);t.FindalLocationArray.push(o)}}),t.FormSchema[0].Data[0].config.options=t.FindalLocationArray})},getChildLocation:function(t,e,a){let i=this,o={};o={id:e.COMPANY_LOCATION_ID,label:e.LOCATION_NAME};let n=o;var s=a.filter((function(e){return e.PARENT_LOCATION_ID==t}));let r=[];return s.forEach(t=>{let e=t.COMPANY_LOCATION_ID;var n=r.filter((function(e){return e.COMPANY_LOCATION_ID==t.COMPANY_LOCATION_ID}));if(0==n.length){var s=a.filter((function(t){return t.PARENT_LOCATION_ID==e}));if(null!=s&&s.length>0){let o=i.getChildLocation(e,t,a);r.push(o)}else o={id:""+t.COMPANY_LOCATION_ID,label:""+t.LOCATION_NAME},r.push(o)}}),n.children=r,n},async OnDeploymentType(t,e){var a=this;(void 0!=e?2==e.value:2==t)&&(a.FormSchema[0].Data[4].visibility=!0,a.FormSchema[0].Data[3].visibility=!0,a.FormSchema[0].Data[7].visibility=!0,a.FormSchema[0].Data[0].visibility=!1,a.FormSchema[0].Data[5].visibility=!0,null==this.$route.params.id&&(a.FormSchema[0].Data[4].config.options=[],a.FormSchema[0].Data[3].value="",a.FormSchema[0].Data[3].validationRules.required=!1,a.FormSchema[0].Data[4].value="",a.FormSchema[0].Data[4].validationRules.required=!1)),(void 0!=e?3==e.value:3==t)&&(a.FormSchema[0].Data[4].visibility=!0,a.FormSchema[0].Data[0].visibility=!1,a.FormSchema[0].Data[5].visibility=!0,a.FormSchema[0].Data[9].value="",a.FormSchema[0].Data[3].visibility=!1,a.FormSchema[0].Data[0].value="",null==this.$route.params.id&&(a.FormSchema[0].Data[4].value="",a.FormSchema[0].Data[4].validationRules.required=!1),a.FormSchema[0].Data[7].visibility=!1,await a.GetUsers()),(void 0!=e?4==e.value:4==t)&&(a.FormSchema[0].Data[4].visibility=!0,a.FormSchema[0].Data[3].visibility=!0,a.FormSchema[0].Data[7].visibility=!0,a.FormSchema[0].Data[0].visibility=!1,a.FormSchema[0].Data[5].visibility=!0,null==this.$route.params.id&&(a.FormSchema[0].Data[4].config.options=[],a.FormSchema[0].Data[3].value="",a.FormSchema[0].Data[3].validationRules.required=!1,a.FormSchema[0].Data[4].value="",a.FormSchema[0].Data[4].validationRules.required=!1)),(void 0!=e?5==e.value:5==t)&&(a.FormSchema[0].Data[3].visibility=!1,a.FormSchema[0].Data[7].visibility=!1,a.FormSchema[0].Data[0].visibility=!1,a.FormSchema[0].Data[5].visibility=!0,a.FormSchema[0].Data[9].config.options=[],null==this.$route.params.id&&(a.FormSchema[0].Data[4].value="",a.FormSchema[0].Data[4].validationRules.required=!1),await a.GetUsers()),(void 0!=e?6==e.value:6==t)&&(a.FormSchema[0].Data[3].visibility=!1,a.FormSchema[0].Data[4].visibility=!1,a.FormSchema[0].Data[7].visibility=!0,a.FormSchema[0].Data[5].visibility=!1,a.FormSchema[0].Data[0].visibility=!0,a.FormSchema[0].Data[9].config.options=[]),a.FormSchema[0].Data[9].config.options=[]},OnApprovalType(t,e){var a=this;(void 0!=e?1==e.value:1==t)&&(a.FormSchema[0].Data[8].visibility=!0,a.FormSchema[0].Data[9].visibility=!1),(void 0!=e?2==e.value:2==t)&&(a.FormSchema[0].Data[8].visibility=!1,a.FormSchema[0].Data[9].visibility=!0),(void 0!=e?3==e.value:3==t)&&(this.FormSchema[0].Data[8].visibility=!0,this.FormSchema[0].Data[9].visibility=!0)},ManageLimtedDuration(t,e){(void 0!=e?1==e.value:1==t)&&(this.FormSchema[0].Data[6].visibility=!0),(void 0!=e?0==e.value:0==t)&&(this.FormSchema[0].Data[6].visibility=!1)},checkRuleName(t,e){var a=this,i=e.value,o="RuleName="+i;h.CheckDuplicateRule(o).then(t=>{1==t.data&&a.FormSchema[0].Data[1].value&&(a.FormSchema[0].Data[1].value="",a.ShowAlert(a.$t("RuleExist"),"warning",!0,a.$t("Alert")),a.FormSchema[0].Data[1].validationRules.required=!0)})}}},$t=Pt,kt=Object(f["a"])($t,It,xt,!1,null,null,null),Mt=kt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("Form",{ref:"StorageSourceForm",staticClass:"col-12",scopedSlots:t._u([{key:"default",fn:function(e){e.valid,e.errors;return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("AccountType"))+":"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.StorageSource,expression:"StorageSource"}],class:{"form-control":!0},attrs:{placeholder:"Select"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.StorageSource=e.target.multiple?a:a[0]},t.GetRegionList]}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select")]),t._l(t.StorageSourceList,(function(e,i){return a("option",{key:i,domProps:{value:e.Id}},[t._v(" "+t._s(e.Name)+" ")])}))],2)])]),"Azure"==t.StorageSourceName?a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("StorageAccount"))+":"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("Field",{attrs:{rules:{required:!0},name:"Storage Account"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.StorageAccount,expression:"StorageAccount"}],staticClass:"form-control",attrs:{type:"text",id:"StorageAccount"},domProps:{value:t.StorageAccount},on:{keyup:t.SaveBtnDisabled,input:function(e){e.target.composing||(t.StorageAccount=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"StorageAccount",id:"StorageAccount"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e()]),a("div",{staticClass:"row"},[1!==t.StorageSource?a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6 "},[a("div",{staticClass:"form-group"},["AWS"==t.StorageSourceName?a("label",[t._v("Access Key:"),a("span",{staticClass:"mandatory"},[t._v("*")])]):a("label",[t._v("Storage Key:"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("Field",{attrs:{rules:{required:!0},name:"Storage Key"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.StorageKey,expression:"StorageKey"}],staticClass:"form-control",attrs:{type:"text",id:"StorageKey"},domProps:{value:t.StorageKey},on:{keyup:t.SaveBtnDisabled,input:function(e){e.target.composing||(t.StorageKey=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"StorageKey",id:"StorageKey"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e(),1!==t.StorageSource?a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6 "},[a("div",{staticClass:"form-group"},["AWS"==t.StorageSourceName?a("label",[t._v("Bucket Name:")]):a("label",[t._v("Blob Link:")]),a("Field",{attrs:{rules:{required:!0},name:"Blob Link"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.BlobLink,expression:"BlobLink"}],staticClass:"form-control",attrs:{type:"text",id:"BlobLink"},domProps:{value:t.BlobLink},on:{keyup:t.SaveBtnDisabled,input:function(e){e.target.composing||(t.BlobLink=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"BlobLink",id:"BlobLink"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e()]),a("div",{staticClass:"row"},[1!==t.StorageSource?a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6 "},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("StorageRegion"))+":")]),a("Field",{attrs:{rules:{required:!1},name:"Storage Region"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:t.StorageRegion,expression:"StorageRegion"}],class:{"form-control":!0},attrs:{placeholder:"Select"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.StorageRegion=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select")]),t._l(t.StorageRegionList,(function(e,i){return a("option",{key:i,domProps:{value:e.display_name}},[t._v(" "+t._s(e.display_name)+" ")])}))],2),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"StorageRegion",id:"StorageRegion"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e(),1!==t.StorageSource?a("div",{staticClass:"col-sm-12 col-md-12 float-left col-lg-6 col-xl-6"},[a("div",{staticClass:"form-group"},["AWS"==t.StorageSourceName?a("label",[t._v(t._s(t.$t("SecretKey"))+":"),a("span",{staticClass:"mandatory"},[t._v("*")])]):a("label",[t._v("Storage Secondary Key:"),a("span",{staticClass:"mandatory"},[t._v("*")])]),a("Field",{attrs:{rules:{required:!0},name:"Storage Secondary Key"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.StorageSecondaryKey,expression:"StorageSecondaryKey"}],staticClass:"form-control",attrs:{type:"text",id:"StorageSecondaryKey"},domProps:{value:t.StorageSecondaryKey},on:{keyup:t.SaveBtnDisabled,input:function(e){e.target.composing||(t.StorageSecondaryKey=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"StorageSecondaryKey",id:"StorageSecondaryKey"}},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})],1)]):t._e()])]}}])}),a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-12 text-right"},[2==t.StorageSource?a("button",{staticClass:"popupgreenbtn btn btn-warning formbtn widthhalf pr-2",attrs:{title:"Save"},on:{click:function(e){return t.TestCredential()}}},[a("em",{staticClass:"fa fa-key pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("TestCredential")))]):t._e(),t._v("   "),a("button",{staticClass:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",attrs:{title:"Skip"},on:{click:function(e){return t.SkipButton()}}},[t._v("Skip")]),t._v("   "),1==t.StorageSource?a("button",{staticClass:"popupgreenbtn btn btn-success formbtn widthhalf pr-2",attrs:{title:"Save"},on:{click:function(e){return t.saveStorageSourceconfig()}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveAndNext")))]):t._e(),1!==t.StorageSource?a("button",{staticClass:"popupgreenbtn btn btn-success formbtn widthhalf pr-2",class:{disabled:void 0==t.StorageKey},attrs:{title:"Save",id:"btnSave"},on:{click:function(e){return t.saveStorageSourceconfig()}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveAndNext")))]):t._e()])])])],1)},Ut=[],Bt={data(){return{SizeDocStorage:null,RetentionValue:null,FileTypeVaule:"",SizeConfigDataId:null,RetentionConfigDataId:null,FileCongfigDataId:null,StorageAccount:null,BlobLink:null,StorageKey:null,StorageRegion:null,StorageRegionList:[],StorageSecondaryKey:null,StorageSourceList:[],StorageSource:null,StorageSourceName:"",SelectedValue:[],FileTypeValues:"",Options:[],FileTypeData:[{label:"jpg",value:"image/jpg"},{label:"jpeg",value:"image/jpeg"},{label:"png",value:"image/png"},{label:"pdf",value:"application/pdf"},{label:"text",value:"text/plain"},{label:"xls",value:"application/vnd.ms-excel"},{label:"xlsx",value:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},{label:"doc",value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"},{label:"docx",value:"application/docx"},{label:"msword",value:"application/msword"}],SetupProgress:0,IsStorageManagementsCopmleted:!1,IsUserStoragesCopmleted:!1,IsClientStoragesCopmleted:!1,IsStorageSoucesCopmleted:!1,IsClientAutoActivated:null,StorageAllocatedPerUser:null,StorageAllocatedPerClient:null,containerName:null,tempStorageKey:null,tempStorageSecondaryKey:null,tempStorageSecondaryAccount:null}},created:function(){this.getfileTypes(),this.GetSourceList(),this.BindFileTypeDDL(),this.GetStorageSetupStatusDetail(),this.getClientConfigValue(),this.containerName=this.GetUserInfo.ContainerName},watch:{StorageSource:function(t,e){var a=this;a.StorageSourceName=a.StorageSourceList.filter(e=>e.Id==t)[0].Name,null!==e&&(a.StorageSecondaryKey=null,a.BlobLink=null,a.StorageKey=null,a.StorageRegion=null,a.StorageAccount=null)}},methods:{getClientConfigValue:function(){var t=this,e="moduleName=Client&keyValue=SendNotificationsToClient";h.GetConfigDataValue(e).then(e=>{t.IsClientAutoActivated=JSON.parse(e.data.ConfigValue)[0].CONFIG_DATA_VALUE})},BindFileTypeDDL:function(){var t=this;t.Options=[],t.FileTypeData.forEach((e,a)=>{t.Options.push({value:e.value,label:e.label})})},SkipButton:function(){var t=this;t.$emit("nextTab")},saveStorageSourceconfig:function(){var t=this;t.$refs.StorageSourceForm.validate().then(e=>{if(e){let e={ACCOUNT_TYPE:t.StorageSource,STORAGE_ACCOUNT:t.StorageAccount,STORAGE_KEY:encodeURIComponent(t.StorageKey),BLOB_LINK:t.BlobLink,STORAGE_REGION:t.StorageRegion,STORAGE_SOURCE_ID:t.StorageSource,STORAGE_SECONDARY_KEY:encodeURIComponent(t.StorageSecondaryKey),STORAGE_ALLOCATED_PER_USER:t.StorageAllocatedPerUser,STORAGE_ALLOCATED_PER_CLIENT:t.StorageAllocatedPerClient};var a=JSON.stringify(e),i="jsonData="+a;h.SaveDocStorageSourceConfigData(i).then(e=>{1==e.data?(this.ShowAlert(this.$t("StorageConfigurationDataUpdatedSuccessfully")),t.GetStorageSetupStatusDetail(),this.$emit("nextTab")):t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))})}else t.ShowAlert(t.$t("FillRequiredField"),"failure",!0,t.$t("Alert"))})},SaveBtnDisabled:function(){this.tempStorageKey==this.StorageKey&&this.tempStorageAccount==this.StorageAccount&&this.tempStorageSecondaryKey==this.StorageSecondaryKey?$("#btnSave").removeClass("disabled"):$("#btnSave").addClass("disabled")},TestCredential:function(){var t=this;t.$refs.StorageSourceForm.validate().then(e=>{if(e){var a=`AzureStorageAccount=${t.StorageAccount}&AzureStoragePrimaryKey=${encodeURIComponent(t.StorageKey)}&AzureBlobLink=${t.BlobLink}&container=${t.containerName}`;h.TestCredential(a).then(e=>{"Success"==e.data?(this.ShowAlert(this.$t("CredentialValidateSuccesfully")),$("#btnSave").removeClass("disabled")):t.ShowAlert(t.$t("WrongCredential"),"failure",!0,t.$t("Alert"))})}else t.ShowAlert(t.$t("FillRequiredField"),"failure",!0,t.$t("Alert"))})},getfileTypes:function(){var t=this,e="moduleName=DocStorage&keyValue=SizePerDoc,RetentionDays,DocStorageAllowedFileTypes";h.GetConfigDataValue(e).then(e=>{t.isLoading=!0,t.SizeDocStorage=JSON.parse(e.data.ConfigValue)[0].CONFIG_DATA_VALUE,t.SizeConfigDataId=JSON.parse(e.data.ConfigValue)[0].core_config_id,t.RetentionValue=JSON.parse(e.data.ConfigValue)[1].CONFIG_DATA_VALUE,t.RetentionConfigDataId=JSON.parse(e.data.ConfigValue)[1].core_config_id,t.FileTypeVaule=JSON.parse(e.data.ConfigValue)[2].CONFIG_DATA_VALUE,t.FileCongfigDataId=JSON.parse(e.data.ConfigValue)[2].core_config_id,t.SelectedValue=t.FileTypeVaule.replace(/\'/g,"").split(","),t.isLoading=!1})},GetSourceList:function(){var t=this;h.GetStorageSourceList().then((function(e){if(null!=e.data){var a=JSON.parse(e.data);t.StorageSourceList=a.data,t.GetSourceConfig()}}))},GetRegionList:function(){var t=this,e="sourceType="+t.StorageSource;h.GetStorageRegionList(e).then((function(e){if(null!=e.data){var a=JSON.parse(e.data);null!=a.DATA&&(t.StorageRegionList=a.DATA)}}))},GetSourceConfig:function(){var t=this;h.GetCompanyStorageSourceConfig().then((function(e){if(null!=e.data){var a=JSON.parse(e.data);t.StorageSourceName=a.data[0].AccountType,t.StorageSource=a.data[0].STORAGE_SOURCE_ID,t.GetRegionList(),t.StorageAccount=a.data[0].STORAGE_ACCOUNT,t.tempStorageAccount=a.data[0].STORAGE_ACCOUNT,t.StorageKey=a.data[0].STORAGE_KEY,void 0==t.StorageKey&&$("#btnSave").addClass("disabled"),t.tempStorageKey=a.data[0].STORAGE_KEY,t.BlobLink=a.data[0].BLOB_LINK,t.StorageRegion=a.data[0].STORAGE_REGION,t.StorageSecondaryKey=a.data[0].STORAGE_SECONDARY_KEY,t.tempStorageSecondaryKey=a.data[0].STORAGE_SECONDARY_KEY,t.StorageAllocatedPerUser=a.data[0].STORAGE_ALLOCATED_PER_USER,t.StorageAllocatedPerClient=a.data[0].STORAGE_ALLOCATED_PER_CLIENT}}))},GetStorageSetupStatusDetail:function(){var t=this;h.GetStorageSetupStatusDetail().then((function(e){if(null!=e.data){var a=JSON.parse(e.data);t.SetupProgress=parseInt(a.data[0].TOTAL_PROGRESS),t.$parent.SetupProgress=parseInt(a.data[0].TOTAL_PROGRESS),t.IsStorageManagementsCopmleted=100==parseInt(a.data[0].STORAGE_MANAGEMENT),t.IsUserStoragesCopmleted=100==parseInt(a.data[0].USER_STORAGE),t.IsClientStoragesCopmleted=100==parseInt(a.data[0].CLIENT_STORAGE),t.IsStorageSoucesCopmleted=100==parseInt(a.data[0].STORAGE_SOURCE)}}))}}},zt=Bt,Vt=Object(f["a"])(zt,Gt,Ut,!1,null,null,null),jt=Vt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 managestorage p-0"},[a("StorageBar",{attrs:{type:"All"}}),a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("ScreenshotAllocationSpace"))+":")])])])]),t._v("  "),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 my-4 jslider"},[a("div",{staticClass:"form-group SliderSingle-screens green"},[a("div",{staticClass:"jslider-label jslider-label-to"},[a("span",[t._v(t._s(t.formatBytes(t.docStorageMaxLimit)))])]),a("VueSlider",{attrs:{min:t.minScreenSize,id:"txtStorage",max:t.maxScreenSize,"tooltip-formatter":function(e){return t.formatBytes(e)}},on:{change:function(e){return t.OnSlide("storage")}},model:{value:t.storage,callback:function(e){t.storage=e},expression:"storage"}})],1)]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("FilesAllocationSpace"))+":")])])])]),t._v("  "),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 my-4 jslider"},[a("div",{staticClass:"form-group SliderSingle-files yellow"},[a("div",{staticClass:"jslider-label jslider-label-to"},[a("span",[t._v(t._s(t.formatBytes(t.docStorageMaxLimit)))])]),a("VueSlider",{attrs:{min:t.minFileSize,id:"txtFilesAllocation",max:t.maxFileSize,"tooltip-formatter":function(e){return t.formatBytes(e)}},on:{change:function(e){return t.OnSlide("files")}},model:{value:t.filesAllocation,callback:function(e){t.filesAllocation=e},expression:"filesAllocation"}})],1)]),a("div",{staticClass:"col-lg-12 mt-4 mb-2"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("DocStorageAllocationSpace"))+":")])])])]),t._v("  "),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 my-4 jslider"},[a("div",{staticClass:"form-group SliderSingle-docstorage red"},[a("div",{staticClass:"jslider-label jslider-label-to"},[a("span",[t._v(t._s(t.formatBytes(t.docStorageMaxLimit)))])]),a("VueSlider",{attrs:{min:t.minDocStorage,id:"txtdocStorageAllocation",max:t.maxDocStorage,"tooltip-formatter":function(e){return t.formatBytes(e)}},on:{change:function(e){return t.OnSlide("docstorage")}},model:{value:t.docStorageAllocation,callback:function(e){t.docStorageAllocation=e},expression:"docStorageAllocation"}})],1)]),a("div",{staticClass:"col-lg-12 mt-4 mb-2"},[a("div",{staticClass:"heading-border"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("TransactionSizeAllocationSpace"))+":")])])])]),t._v("  "),a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 my-4 jslider"},[a("div",{staticClass:"form-group SliderSingle-transactionSize blue"},[a("div",{staticClass:"jslider-label jslider-label-to"},[a("span",[t._v(t._s(t.formatBytes(t.docStorageMaxLimit)))])]),a("VueSlider",{attrs:{min:t.minTransactionSize,id:"txtTransactionSize",max:t.maxTransactionSize,"tooltip-formatter":function(e){return t.formatBytes(e)}},on:{change:function(e){return t.OnSlide("transactionSize")}},model:{value:t.transactionSize,callback:function(e){t.transactionSize=e},expression:"transactionSize"}})],1)])]),a("div",{staticClass:"row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-12 text-right"},[a("button",{staticClass:"btn btn-warning float-left",attrs:{title:"Previous"},on:{click:function(e){return t.PreviousButton()}}},[t._v("Previous")]),a("button",{staticClass:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",attrs:{title:"Skip"},on:{click:function(e){return t.SkipButton()}}},[t._v("Skip")]),a("button",{staticClass:"btn btn-success ml-3",attrs:{id:"update-details",href:"javascript:;",title:"Save"},on:{click:function(e){return t.SaveStorageManagement()}}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v("Save And Next")])])])],1)},Jt=[],qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[a("div",[a("b-progress",{attrs:{height:"1.5rem",value:"All"==t.type?t.consumed:t.AllowedStorage,max:"All"==t.type?t.total:t.allocated}})],1),a("div",{staticClass:"level_info my-2 d-block float-left w-100",staticStyle:{height:"auto"}},[a("div",{staticClass:"d-flex bd-highlight"},["Doc"==t.type?a("div",{staticClass:"p-2 bd-highlight font-12"},[a("b",{attrs:{id:"divClientStorage pr-1"}},[a("span"),t._v(" "),a("span",{staticClass:"clr-1"},[t._v(" "+t._s(t.AllowedClientStoragePercentage)+"% ("+t._s(t.formatBytes(t.AllowedClientStorage))+")")])]),t._v(" "),a("span",[t._v(t._s(t.$t("AllocatedToClient")))])]):t._e(),"Doc"==t.type?a("div",{staticClass:"p-2 bd-highlight font-12"},[a("b",{attrs:{id:"divConsumendStorage pr-1"}},[a("span"),t._v(" "),a("span",{staticClass:"clr-2"},[t._v(" "+t._s(t.AllowedUserStoragePercentage)+"% ("+t._s(t.formatBytes(t.AllowedUserStorage))+")")])]),t._v(" "),a("span",[t._v(t._s(t.$t("AllocatedToUser")))])]):t._e(),"All"==t.type?a("div",{staticClass:"p-2 bd-highlight font-12"},[t._m(0),a("span",{staticClass:"clr-1 pr-1"},[t._v(t._s(t.ConsumedPercentage)+"% ("+t._s(t.formatBytes(t.consumed))+") ")]),a("span",[t._v(t._s(t.$t("ContainerActualSize")))])]):t._e(),a("div",{staticClass:"p-2 bd-highlight font-12"},[t._m(1),a("span",{staticClass:"clr-3 pr-1"},[t._v(t._s(t.AvailablePercentage)+"% ("+t._s(t.formatBytes(t.AvailableSpace))+") ")]),a("span",[t._v(t._s(t.$t("Available_Storage")))])]),a("div",{staticClass:"ml-auto p-2 bd-highlight font-12"},[t._m(2),a("span",{staticClass:"font-weight-bold pr-1"},[t._v(t._s(t.formatBytes("All"==t.type?t.total:t.allocated))+" ")]),t._v(" "),a("span",[t._v(t._s(t.$t("ContainerMaxLimit")))])])])])])},Kt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b",{attrs:{id:"divFreeStorage"}},[a("span")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b",{attrs:{id:"divFreeStorage"}},[a("span")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b",{attrs:{id:"divFreeStorage"}},[a("span")])}],Ht={props:{type:{type:String,required:!0}},data(){return{total:null,consumed:null,allocated:null,AllowedClientStorage:null,AllowedUserStorage:null}},created:function(){var t=this;t.GetStoragedata()},computed:{ConsumedPercentage:{get:function(){return parseFloat(100*this.consumed/this.total).toFixed(0)},set:function(t){}},AllocatedPercentage(){return parseFloat(100*this.allocated/this.total).toFixed(0)},AvailableSpace(){return"All"==this.type?this.total>=this.consumed?this.total-this.consumed:0:this.AllowedClientStorage+this.AllowedUserStorage<this.allocated?this.allocated-this.AllowedClientStorage-this.AllowedUserStorage:0},AvailablePercentage(){if("All"==this.type){var t=this.total>=this.consumed?this.total-this.consumed:0;return parseFloat(100*t/this.total).toFixed(0)}t=this.AllowedClientStorage+this.AllowedUserStorage<this.allocated?this.allocated-this.AllowedClientStorage-this.AllowedUserStorage:0;return parseFloat(100*t/this.allocated).toFixed(0)},AllowedStorage(){var t=this.AllowedClientStorage+this.AllowedUserStorage;return t},AllowedStoragePercentage(){var t=parseFloat(100*(this.AllowedClientStorage+this.AllowedUserStorage)/this.allocated).toFixed(0);return t},AllowedClientStoragePercentage(){var t=parseFloat(100*this.AllowedClientStorage/this.allocated).toFixed(0);return t},AllowedUserStoragePercentage(){var t=parseFloat(100*this.AllowedUserStorage/this.allocated).toFixed(0);return t}},watch:{consumed:function(t){this.ConsumedPercentage=parseFloat(100*this.consumed/this.total).toFixed(0)}},methods:{GetStoragedata:function(){var t=this;if(h.GetStorageReport().then((function(e){t.total=null==e.data[0].CONTAINER_LIMIT||null==e.data[0].CONTAINER_LIMIT?0:e.data[0].CONTAINER_LIMIT,t.consumed=null==e.data[0].CONTAINER_SIZE||void 0==e.data[0].CONTAINER_SIZE?0:e.data[0].CONTAINER_SIZE,t.allocated=null==e.data[0].DOC_STORAGE_MAXLIMIT||void 0==e.data[0].DOC_STORAGE_MAXLIMIT?o:e.data[0].DOC_STORAGE_MAXLIMIT})),"Doc"==t.type){var e="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=4";h.GetUserStorageDetail(e).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedClientStorage=0,a.forEach(e=>{null==e.ALLOWED_STORAGE||void 0==e.ALLOWED_STORAGE?(e.ALLOWED_STORAGE=0,t.AllowedClientStorage+=e.ALLOWED_STORAGE):t.AllowedClientStorage+=e.ALLOWED_STORAGE})}));var a="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=1,2,3";h.GetUserStorageDetail(a).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedUserStorage=0,a.forEach(e=>{"1002"!=e.STATUS_ID&&(null==e.ALLOWED_STORAGE||void 0==e.ALLOWED_STORAGE?(e.ALLOWED_STORAGE=0,t.AllowedUserStorage+=e.ALLOWED_STORAGE):t.AllowedUserStorage+=e.ALLOWED_STORAGE)})}))}t.total=isNaN(t.total)?0:t.total,t.consumed=isNaN(t.consumed)?0:t.consumed,t.allocated=isNaN(t.allocated)?0:t.allocated,t.AllowedClientStorage=isNaN(t.AllowedClientStorage)?0:t.AllowedClientStorage,t.AllowedUserStorage=isNaN(t.AllowedUserStorage)?0:t.AllowedUserStorage},formatBytes:function(t,e=!1,a=2){if(!+t)return"0 Bytes";const i=1024,o=a<0?0:a,n=["MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(i));return e?parseFloat((t/Math.pow(i,s)).toFixed(o)):`${parseFloat((t/Math.pow(i,s)).toFixed(o))} ${n[s]}`}}},Wt=Ht,Zt=Object(f["a"])(Wt,qt,Kt,!1,null,null,null),Xt=Zt.exports,Qt={components:{StorageBar:Xt},data(){return{isLoading:!1,storage:null,filesAllocation:null,filesMaxLimit:null,docStorageAllocation:null,transactionSize:null,docStorageMaxLimit:null,screenshotSize:null,screenshotCount:null,fileSize:null,fileCount:null,docStorageAssigned:null,docStorageUsed:null,transactionTotalSize:null,containerSize:null,screenCount:null,progressBarMinValue:20,progressBarMaxValue:100,ContainerPercentage:null,storageData:null,filesAllocationData:null,docStorageAllocationData:null,transactionSizeData:null,availableSpace:null,containerdata:[],minScreenSize:0,minFileSize:0,minDocStorage:0,minTransactionSize:0,CurrentScreenSize:0,CurrentFileSize:0,CurrentDocStorageSize:0,CurrentTransactionSize:0,maxScreenSize:0,maxFileSize:0,maxDocStorage:0,maxTransactionSize:0}},created:function(){var t=this;t.GetCompanyContainerDetails()},watch:{containerSize:function(t){this.ContainerPercentage=parseFloat(100*t/this.docStorageMaxLimit).toFixed(0)},docStorageMaxLimit:function(t){var e=this;e.maxScreenSize=t-e.minFileSize-e.minDocStorage-e.minTransactionSize,e.maxFileSize=t-e.minScreenSize-e.minDocStorage-e.minTransactionSize,e.maxDocStorage=t-e.minFileSize-e.minScreenSize-e.minTransactionSize,e.maxTransactionSize=t-e.minFileSize-e.minDocStorage-e.minScreenSize}},methods:{GetCompanyContainerDetails:function(){var t=this;t.isLoading=!0,h.GetCompanyContainerDetails().then((function(e){null!=e.data.data&&(t.containerdata=e.data.data[0],t.minScreenSize=Math.round(parseFloat(t.containerdata.SCREENSHOT_SIZE)),t.minFileSize=Math.round(parseFloat(t.containerdata.FILE_SIZE)),t.minDocStorage=Math.round(parseFloat(t.containerdata.DOC_STORAGE_ASSIGED)),t.minTransactionSize=Math.round(parseFloat(t.containerdata.TRANSACTION_TOTAL_SIZE)),t.GetStoragedata(),t.isLoading=!1)}))},AllocateSpaceSlider:function(t){var e=this;e.minScreenSize=Math.round(parseFloat(e.containerdata.SCREENSHOT_SIZE)),e.minFileSize=Math.round(parseFloat(e.containerdata.FILE_SIZE)),e.minDocStorage=Math.round(parseFloat(e.containerdata.DOC_STORAGE_ASSIGED)),e.minTransactionSize=Math.round(parseFloat(e.containerdata.TRANSACTION_TOTAL_SIZE)),e.CurrentScreenSize=Math.round(parseFloat(e.containerdata.SCREEN_MAXLIMIT)),e.CurrentFileSize=Math.round(parseFloat(e.containerdata.FILE_MAXLIMIT)),e.CurrentDocStorageSize=Math.round(parseFloat(e.containerdata.DOC_STORAGE_MAXLIMIT)),e.CurrentTransactionSize=Math.round(parseFloat(e.containerdata.TRANSACTION_SIZE_LIMIT));var a=$("#txtStorage")[0].innerText,i=$("#txtFilesAllocation")[0].innerText,o=$("#txtdocStorageAllocation")[0].innerText,n=$("#txtTransactionSize")[0].innerText;if("storage"==t){e.availableSpace=e.docStorageMaxLimit-a,e.availableSpace<parseInt(e.minFileSize)+parseInt(e.minDocStorage)+parseInt(e.minTransactionSize)&&(e.availableSpace=parseInt(e.minFileSize)+parseInt(e.minDocStorage)+parseInt(e.minTransactionSize),a=Math.abs(e.docStorageMaxLimit-e.availableSpace));var s=e.CurrentScreenSize;if(s<e.StorageValues)for(var r=1;r<=e.StorageValues-s;r++)i>e.minFileSize&&i>=0?i-=1:o>e.minDocStorage&&o>0?o-=1:n-=1;else{var l=e.availableSpace-(parseInt(i)+parseInt(o)+parseInt(n)),c=Math.round(l/100*30);i=parseInt(i)+parseInt(c),o=parseInt(o)+parseInt(c),n=parseInt(n)+(l-2*parseInt(c))}e.filesAllocation=i,e.docStorageAllocation=o,e.transactionSize=n}else if("files"==t){e.availableSpace=e.docStorageMaxLimit-i,e.availableSpace<parseInt(e.minScreenSize)+parseInt(e.minDocStorage)+parseInt(e.minTransactionSize)&&(e.availableSpace=parseInt(e.minScreenSize)+parseInt(e.minDocStorage)+parseInt(e.minTransactionSize),e.docStorageMaxLimit=Math.abs(e.docStorageMaxLimit-e.availableSpace));var d=e.CurrentFileSize;if(d<i)for(r=1;r<=i-d;r++)o>e.minDocStorage&&o>=0?o-=1:n>e.minTransactionSize&&n>0?n-=1:a-=1;else{var u=e.availableSpace-(parseInt(a)+parseInt(o)+parseInt(n));c=Math.round(u/100*30);a=parseInt(a)+parseInt(c),o=parseInt(o)+parseInt(c),n=parseInt(n)+(u-2*parseInt(c))}e.storage=a,e.docStorageAllocation=o,e.transactionSize=n}else if("docstorage"==t){e.availableSpace=e.docStorageMaxLimit-o,e.availableSpace<parseInt(e.minScreenSize)+parseInt(e.minFileSize)+parseInt(e.minTransactionSize)&&(e.availableSpace=parseInt(e.minScreenSize)+parseInt(e.minFileSize)+parseInt(e.minTransactionSize),e.docStorageMaxLimit=Math.abs(e.docStorageMaxLimit-e.availableSpace));var p=e.CurrentDocStorageSize;if(p<o)for(r=1;r<=o-p;r++)n>e.minTransactionSize&&n>=0?n-=1:a>e.minScreenSize&&a>0?a-=1:i-=1;else{var m=e.availableSpace-(parseInt(a)+parseInt(i)+parseInt(n));c=Math.round(m/100*30);a=parseInt(a)+parseInt(c),i=parseInt(i)+parseInt(c),n=parseInt(n)+(m-2*parseInt(c))}e.storage=a,e.filesAllocation=i,e.transactionSize=n}else if("transactionSize"==t){e.availableSpace=e.docStorageMaxLimit-n,e.availableSpace<parseInt(e.minScreenSize)+parseInt(e.minFileSize)+parseInt(e.minDocStorage)&&(e.availableSpace=parseInt(e.minScreenSize)+parseInt(e.minFileSize)+parseInt(e.minDocStorage),e.docStorageMaxLimit=Math.abs(e.docStorageMaxLimit-e.availableSpace));var v=e.CurrentTransactionSize;if(v<n)for(r=1;r<=n-v;r++)a>e.minScreenSize&&a>=0?a-=1:i>e.minFileSize&&i>0?i-=1:o-=1;else{var h=e.availableSpace-(parseInt(a)+parseInt(i)+parseInt(o));c=Math.round(h/100*30);a=parseInt(a)+parseInt(c),i=parseInt(i)+parseInt(c),o=parseInt(o)+(h-2*parseInt(c))}e.storage=a,e.filesAllocation=i,e.docStorageAllocation=o}},OnSlide:function(t){var e=this;e.minScreenSize=Math.round(parseFloat(e.containerdata.SCREENSHOT_SIZE)),e.minFileSize=Math.round(parseFloat(e.containerdata.FILE_SIZE)),e.minDocStorage=Math.round(parseFloat(e.containerdata.DOC_STORAGE_ASSIGED)),e.minTransactionSize=Math.round(parseFloat(e.containerdata.TRANSACTION_TOTAL_SIZE)),e.CurrentScreenSize=Math.round(parseFloat(e.storage)),e.CurrentFileSize=Math.round(parseFloat(e.filesAllocation)),e.CurrentDocStorageSize=Math.round(parseFloat(e.docStorageAllocation)),e.CurrentTransactionSize=Math.round(parseFloat(e.transactionSize));var a=e.CurrentScreenSize-e.minScreenSize,i=e.CurrentFileSize-e.minFileSize,o=e.CurrentDocStorageSize-e.minDocStorage,n=e.CurrentTransactionSize-e.minTransactionSize,s=0;"storage"==t?(e.CurrentScreenSize>e.docStorageMaxLimit-e.minFileSize-e.minDocStorage-e.minTransactionSize&&(e.storage=e.docStorageMaxLimit-e.minFileSize-e.minDocStorage-e.minTransactionSize,e.CurrentScreenSize=Math.round(parseFloat(e.storage))),e.docStorageMaxLimit-e.storage-e.filesAllocation-e.docStorageAllocation-e.transactionSize<0&&(s=e.storage+e.filesAllocation+e.docStorageAllocation+e.transactionSize-e.docStorageMaxLimit),s>i?(s-=i,e.filesAllocation=e.filesAllocation-i):(e.filesAllocation=e.filesAllocation-s,s=0),s>0&&(s>o?(s-=o,e.docStorageAllocation=e.docStorageAllocation-o):(e.docStorageAllocation=e.docStorageAllocation-s,s=0),s>0&&(s>n?(s-=n,e.vm.transactionSize=e.transactionSize-n):(e.transactionSize=e.transactionSize-s,s=0))),e.storage=e.docStorageMaxLimit-e.filesAllocation-e.docStorageAllocation-e.transactionSize-s):"files"==t?(e.CurrentFileSize>e.docStorageMaxLimit-e.minScreenSize-e.minDocStorage-e.minTransactionSize&&(e.filesAllocation=e.docStorageMaxLimit-e.minScreenSize-e.minDocStorage-e.minTransactionSize,e.CurrentFileSize=Math.round(parseFloat(e.filesAllocation))),e.docStorageMaxLimit-e.storage-e.filesAllocation-e.docStorageAllocation-e.transactionSize<0&&(s=e.storage+e.filesAllocation+e.docStorageAllocation+e.transactionSize-e.docStorageMaxLimit),s>a?(s-=a,e.storage=e.storage-a):(e.storage=e.storage-s,s=0),s>0&&(s>o?(s-=o,e.docStorageAllocation=e.docStorageAllocation-o):(e.docStorageAllocation=e.docStorageAllocation-s,s=0),s>0&&(s>n?(s-=n,e.transactionSize=e.transactionSize-n):(e.transactionSize=e.transactionSize-s,s=0))),e.filesAllocation=e.docStorageMaxLimit-e.storage-e.docStorageAllocation-e.transactionSize-s):"docstorage"==t?(e.CurrentDocStorageSize>e.docStorageMaxLimit-e.minScreenSize-e.minFileSize-e.minTransactionSize&&(e.docStorageAllocation=e.docStorageMaxLimit-e.minScreenSize-e.minFileSize-e.minTransactionSize,e.CurrentDocStorageSize=Math.round(parseFloat(e.docStorageAllocation))),e.docStorageMaxLimit-e.storage-e.filesAllocation-e.docStorageAllocation-e.transactionSize<0&&(s=e.storage+e.filesAllocation+e.docStorageAllocation+e.transactionSize-e.docStorageMaxLimit),s>a?(s-=a,e.storage=e.storage-a):(e.storage=e.storage-s,s=0),s>0&&(s>i?(s-=i,e.filesAllocation=e.filesAllocation-i):(e.filesAllocation=e.filesAllocation-s,s=0),s>0&&(s>n?(s-=n,e.vm.transactionSize=e.transactionSize-n):(e.transactionSize=e.transactionSize-s,s=0))),e.docStorageAllocation=e.docStorageMaxLimit-e.storage-e.filesAllocation-e.transactionSize-s):"transactionSize"==t&&(e.CurrentTransactionSize>e.docStorageMaxLimit-e.minScreenSize-e.minDocStorage-e.minFileSize&&(e.transactionSize=e.docStorageMaxLimit-e.minScreenSize-e.minFileSize-e.minDocStorage,e.CurrentTransactionSize=Math.round(parseFloat(e.transactionSize))),e.docStorageMaxLimit-e.storage-e.filesAllocation-e.docStorageAllocation-e.transactionSize<0&&(s=e.storage+e.filesAllocation+e.docStorageAllocation+e.transactionSize-e.docStorageMaxLimit),s>a?(s-=a,e.storage=e.storage-a):(e.storage=e.storage-s,s=0),s>0&&(s>i?(s-=i,e.filesAllocation=e.filesAllocation-i):(e.filesAllocation=e.filesAllocation-s,s=0),s>0&&(s>o?(s-=o,e.docStorageAllocation=e.docStorageAllocation-o):(e.docStorageAllocation=e.docStorageAllocation-s,s=0))),e.transactionSize=e.docStorageMaxLimit-e.storage-e.filesAllocation-e.docStorageAllocation-s)},GetStoragedata:function(){var t=this;h.GetStorageReport().then((function(e){t.isLoading=!0,t.storage=e.data[0].SCREEN_MAXLIMIT,t.filesAllocation=e.data[0].FILE_MAXLIMIT,t.GetScreenCount(t.filesAllocation),t.docStorageAllocation=e.data[0].DOC_STORAGE_MAXLIMIT,t.transactionSize=e.data[0].TRANSACTION_SIZE_LIMIT,t.docStorageMaxLimit=e.data[0].CONTAINER_LIMIT,t.screenshotSize=e.data[0].SCREENSHOT_SIZE,t.screenshotCount=e.data[0].SCREENSHOT_COUNT,t.fileSize=e.data[0].FILE_SIZE,t.fileCount=e.data[0].FILE_COUNT,t.docStorageAssigned=e.data[0].DOC_STORAGE_ASSIGED,t.docStorageUsed=e.data[0].DOC_STORAGE_USED,t.transactionTotalSize=e.data[0].TRANSACTION_TOTAL_SIZE,t.containerSize=e.data[0].CONTAINER_SIZE,t.UsedScreenshotSpace=e.data[0].SCREENSHOT_COUNT,t.UsedFileSpace=e.data[0].FILE_SIZE,t.UsedDocStorageSpace=e.data[0].DOC_STORAGE_USED,t.UsedTransactionSpace=e.data[0].TRANSACTION_TOTAL_SIZE,t.minScreenSize=Math.round(parseFloat(t.containerdata.SCREENSHOT_SIZE)),t.minFileSize=Math.round(parseFloat(t.containerdata.FILE_SIZE)),t.minDocStorage=Math.round(parseFloat(t.containerdata.DOC_STORAGE_ASSIGED)),t.minTransactionSize=Math.round(parseFloat(t.containerdata.TRANSACTION_TOTAL_SIZE)),t.isLoading=!1}))},GetScreenCount:function(t){var e=this,a=parseFloat(70.5,10)+parseFloat(5.8,10);e.screenCount=Math.round(1024*t/a)},SkipButton:function(){var t=this;t.$emit("nextTab")},PreviousButton:function(){var t=this;t.$emit("previousTab")},SaveStorageManagement:function(){var t=this,e=`maxFileSize=${t.filesAllocation}&maxScreenSize=${t.storage}&maxDocSize=${t.docStorageAllocation}&maxTransactionSize=${t.transactionSize}`;t.isLoading=!0,h.SaveContainerDetails(e).then((function(e){0==e.data&&(t.ShowAlert("Storage has been saved succesfully","Success"),t.GetStoragedata(),t.$emit("nextTab"),t.isLoading=!1)}))},formatBytes:function(t,e=!1,a=2){if(!+t)return"0 Bytes";const i=1024,o=a<0?0:a,n=["MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(t)/Math.log(i));return e?parseFloat((t/Math.pow(i,s)).toFixed(o)):`${parseFloat((t/Math.pow(i,s)).toFixed(o))} ${n[s]}`}}},te=Qt,ee=(a("30c0"),Object(f["a"])(te,Yt,Jt,!1,null,null,null)),ae=ee.exports,ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("StorageBar",{attrs:{type:"Doc"}}),a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header",attrs:{id:"div_forListView"}},[a("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"tblFileList"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"50px !important"}},[a("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"},on:{change:function(e){return t.onChange()}}})]),a("th",[a("span",[t._v(t._s(t.$t("ClientName")))])]),a("th",[a("span",[t._v(t._s(t.$t("Email")))])]),a("th",[a("span",[t._v(t._s(t.$t("Status")))])]),a("th",[a("span",[t._v(t._s(t.$t("ConsumedStoarage"))+" (MB)")])]),a("th",[a("span",[t._v(t._s(t.$t("AllocatedStorage"))+" (MB)")])]),a("th",{staticClass:"text-center nonresize",attrs:{"data-width":"5%"}},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",[t._l(t.UserData,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"text-center"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{staticClass:"chkItems custom-control-input",attrs:{id:e.USER_ID,type:"checkbox"},domProps:{value:e.USER_ID},on:{change:function(e){return t.onChange(e)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:e.USER_ID,type:"checkbox"}})])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[t._v(" "+t._s(e.USER_NAME)+" ")])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[t._v(" "+t._s(e.EMAIL_ID)+" ")])]),a("td",[a("a",{staticClass:"inactive-disabled"},["1001"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block  text-center text-truncate btn-success w-80",attrs:{title:"Active"}},[t._v(" Active")]):t._e(),"1084"==e.STATUS_ID?a("span",{staticClass:"sent bg-secondary btn d-inline-block text-center text-truncate text-white w-80",attrs:{title:"Approved"}},[t._v(" Approved")]):t._e(),"Rejected"==e.STATUS_ID?a("span",{staticClass:"stop btn d-inline-block  text-center text-truncate btn-danger w-80",attrs:{title:"Rejected"}},[t._v(" Rejected")]):t._e(),"1003"==e.STATUS_ID?a("span",{staticClass:"stop px-2 bg-primary btn d-inline-block  text-center text-truncate w-80",attrs:{title:"Deleted"}},[t._v(" Deleted")]):t._e(),"1002"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block  text-center text-truncate btn-danger w-80",attrs:{title:"Inactive"}},[t._v("Inactive")]):t._e(),"1005"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block  text-center text-truncate btn-secondary w-80",attrs:{title:"Pending"}},[t._v(" Pending")]):t._e(),"ActivationAwaited"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block  text-center text-truncate btn-warning w-80",attrs:{title:"ActivationAwaited"}},[t._v(" ActivationAwaited")]):t._e()])]),a("td",[a("span",{staticClass:"text-right text-overflow-dynamic-container"},[t._v(" "+t._s(e.CONSUMED_STROAGE)+" ")])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ALLOWED_STORAGE,expression:"item.ALLOWED_STORAGE"}],staticClass:"maxAllowedStorage  form-control text-right",attrs:{type:"text","asp-for":"item.MaxStorage",id:"idMaxStorage"+e.USER_ID,step:"0.01",maxlength:"13",disabled:"disabled"},domProps:{value:e.ALLOWED_STORAGE},on:{input:function(a){a.target.composing||t.$set(e,"ALLOWED_STORAGE",a.target.value)}}})])]),a("td",{staticClass:"text-center single-action"},[t.hideEditIcon?a("a",{staticClass:"aEdit font-18",attrs:{title:"Edit",id:"idEdit"+e.USER_ID},on:{click:function(a){return t.editAllowedStorage(e.USER_ID)}}},[a("i",{staticClass:"fa fa-pencil text-success action-icon "})]):t._e(),a("div",{staticStyle:{display:"none"},attrs:{id:"divAction"+e.USER_ID}},[a("a",{staticClass:"aCancel mr-2 font-18",attrs:{id:"idCancel_"+e.USER_ID,value:e.USER_ID,title:"Cancel",href:"javascript:;"},on:{click:function(a){return t.CancelAction(e.USER_ID,e.ALLOWED_STORAGE)}}},[a("i",{staticClass:"fa fa-times-circle text-danger action-icon"})]),a("a",{staticClass:"aSave font-18",attrs:{title:"Save",value:e.USER_ID,id:"idSave_"+e.USER_ID,href:"javascript:;"},on:{click:function(a){return t.SaveData(e.USER_ID,e.ALLOWED_STORAGE,e.CONSUMED_STROAGE)}}},[a("i",{staticClass:"fa fa-save text-primary action-icon"})])])])])})),0==t.NoRecordLength?a("tr",[a("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"7"}},[t._v("No Record Found")])]):t._e(),t.NoRecordLength>0?a("tr",[a("td",{staticClass:"text-right fr font-weight-bold",attrs:{colspan:"2"}},[t._v("Total")]),a("td",{staticClass:"text-right fr font-weight-bold",attrs:{colspan:"4"}},[t._v(t._s(t.totalConsumedStorage)+" MB ")]),a("td",{staticClass:" text-right fr font-weight-bold"},[t._v(t._s(t.totalAllowedStorage)+" MB")])]):t._e()],2)])])]),a("div",{staticClass:"col-lg-12 text-right px-0 mt-3 float-right"},[a("button",{staticClass:"btn btn-warning float-left",attrs:{title:"Previous"},on:{click:function(e){return t.PreviousButton()}}},[t._v("Previous")]),a("button",{staticClass:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",attrs:{title:"Skip"},on:{click:function(e){return t.SkipButton()}}},[t._v("Skip")]),a("button",{staticClass:"btn btn-success ml-3",attrs:{id:"update-details",href:"javascript:;",title:"Save"},on:{click:function(e){return t.SaveandNext()}}},[t._v("Save And Next "),a("i",{staticClass:"fa fa-angle-double-right pl-1",attrs:{"aria-hidden":"true"}})])])],1)},oe=[],ne={components:{StorageBar:Xt},data(){return{isLoading:!1,UserData:[],DepartmentData:[],designationData:[],userStorageDetailSummary:[],pageNo:1,searchCondition:null,sortExp:null,sortBy:null,pageSize:10,totalRecords:"",dropDivShow:!1,showByNameDiv:!1,showByConsumedDiv:!1,divDesignationShow:!1,hideEditIcon:!0,isAllocatedSpaceOpen:!1,UserStorageValue:null,UserId:null,saveStorage:null,StorageValue:null,jsonobj:[],JSONSearchData:[],departmentList:null,designationList:null,txtSearchUserName:"",txtConsumedStorage:"",userFilterData:[],CheckIfExist:[],jsonFilteredData:[],label:!1,totalConsumedStorage:0,totalAllowedStorage:0,NoRecordLength:0,containerSize:null,docStorageMaxLimit:null,AllowedClientStorage:null,AllowedUserStorage:null,total:null,consumed:null,allocated:null,jsonObjData:[]}},created(){this.FetchData(),this.GetDDLDesignationData(),this.GetDDLDepartmentData(),this.GetStoragedata()},computed:{AvailableSpace(){return"All"==this.type?this.total>=this.consumed?this.total-this.consumed:0:this.AllowedClientStorage+this.AllowedUserStorage<this.allocated?this.allocated-this.AllowedClientStorage-this.AllowedUserStorage:0},AllowedStorage(){var t=this.AllowedClientStorage+this.AllowedUserStorage;return t},CalculateTotalAllowedStorage(){}},methods:{GetStoragedata:function(){var t=this;h.GetStorageReport().then((function(e){t.total=e.data[0].CONTAINER_LIMIT,t.consumed=e.data[0].CONTAINER_SIZE,t.allocated=e.data[0].DOC_STORAGE_MAXLIMIT}));var e="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=4";h.GetUserStorageDetail(e).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedClientStorage=0,a.forEach(e=>{t.AllowedClientStorage+=e.ALLOWED_STORAGE})}));var a="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=1,2,3";h.GetUserStorageDetail(a).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedUserStorage=0,a.forEach(e=>{t.AllowedUserStorage+=e.ALLOWED_STORAGE})}))},validate:function(){var t=this,e=t.AllowedClientStorage,a=(t.AllowedUserStorage,t.AvailableSpace),i=t.totalAllowedStorage,o=e+a;return!(o<i)},SkipButton:function(){var t=this;t.$emit("nextTab")},SaveandNext:function(){var t=this;t.jsonObjData=[];new FormData;if(0!=$("#tblFileList tr").length){var e=`pageNo=${t.pageNo}&pageSize=${t.pageSize}&sortBy=&sortExp=&userTypeIds=4`;h.GetUserStorageDetail(e).then((function(e){t.UserData=JSON.parse(e.data).USERSTORAGEDETAILLIST;var a=!1;null!=t.UserData&&t.UserData.forEach((e,i)=>{isNaN(e.ALLOWED_STORAGE)&&(a=!0);let o={DataId:e.USER_ID,DataValue:e.ALLOWED_STORAGE};t.jsonObjData.push(o)});let i=[{refCode:"UserSetting",moduleName:"DocStorage"}];var o="configData",n="conditionData",s="[{"+JSON.stringify(o)+":"+JSON.stringify(t.jsonObjData)+", "+JSON.stringify(n)+":"+JSON.stringify(i)+"}]";if(1==t.validate()){if(a)return t.ShowAlert(t.$t("AllocateStorageMustNumeric"),"failure",!0,t.$t("Alert")),!1;h.ManageDocUserStorageSettingData(JSON.stringify(s)).then(e=>{0==e.data?this.$emit("nextTab"):t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))})}else t.ShowAlert(t.$t("YouCannotAssignSpaceMoreThanAvailableSpace"),"failure",!0,t.$t("Alert"))}))}else t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))},PreviousButton:function(){var t=this;t.$emit("previousTab")},SearchUserStorage:function(){var t=this;$(".chkItems:checked").each((function(){var e=$(this).val();t.CheckIfExist=t.UserData.filter(t=>t.DEPARTMENT_ID==e),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)})),$(".chkItems:checked").each((function(){0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData);var e=$(this).val();t.CheckIfExist=t.UserData.filter(t=>t.DESIGNATION_ID==e),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)})),""!=t.txtSearchUserName&&(0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData),t.CheckIfExist=t.UserData.filter(e=>e.USER_NAME.toLowerCase().includes(t.txtSearchUserName)),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)),""!=t.txtConsumedStorage&&(0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData),t.CheckIfExist=t.jsonFilteredData.filter((function(e){return e.CONSUMED_STROAGE==t.txtConsumedStorage})),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)),t.UserData=t.userFilterData,t.getTotalStorageData()},ResetButton:function(){var t=this;t.FetchData(),t.GetDDLDesignationData(),t.GetDDLDepartmentData(),t.dropDivShow=!1,t.divDesignationShow=!1,t.showByNameDiv=!1,t.showByConsumedDiv=!1,$(".chkItems").prop("checked",!1),t.txtSearchUserName="",t.txtConsumedStorage="",t.toggleExpandCollapseButton(t.label=!0)},downArrowButton:function(){alert("arrow")},toggleExpandCollapseButton:function(){var t=this;0==t.label?(t.dropDivShow=!0,t.divDesignationShow=!0,t.showByNameDiv=!0,t.showByConsumedDiv=!0,t.label=!0):(t.dropDivShow=!1,t.divDesignationShow=!1,t.showByNameDiv=!1,t.showByConsumedDiv=!1,t.label=!1),t.txtSearchUserName="",t.txtConsumedStorage=""},getTotalStorageData:function(){var t=this;t.totalAllowedStorage=0,t.totalConsumedStorage=0,t.UserData.forEach(e=>{t.totalAllowedStorage+=e.ALLOWED_STORAGE,t.totalConsumedStorage+=e.CONSUMED_STROAGE})},AllocatedSpacePopup:function(){var t=this,e="",a="";$("#tblFileList .chkItems:checked").not("[id^='chkAll']").each((function(){e=$(this).val(),a=$(this).closest("tr").find(".maxAllowedStorage").val();let i={Id:e,value:a};t.jsonobj.push(i)})),t.isAllocatedSpaceOpen=!0},closeAllocatedSpace:function(){var t=this;t.isAllocatedSpaceOpen=!1},SaveData:function(t,e,a){var i=this;i.isLoading=!0,i.jsonObjData=[],i.UserId=t,i.UserStorageValue=e;let o={DataId:i.UserId,DataValue:i.UserStorageValue};i.jsonObjData.push(o);let n=[{refCode:"UserSetting",moduleName:"DocStorage"}];var s="configData",r="conditionData",l="[{"+JSON.stringify(s)+":"+JSON.stringify(i.jsonObjData)+", "+JSON.stringify(r)+":"+JSON.stringify(n)+"}]";if(e>i.total)return i.ShowAlert(i.$t("AllocateStorageCannotMoreThanTotalStorage"),"failure",!0,i.$t("Alert")),i.isLoading=!1,!1;e<a?i.ShowAlert(i.$t("AllocateStorageCannotLessThanConsumedStorage"),"failure",!0,i.$t("Alert")):isNaN(e)?i.ShowAlert(i.$t("AllocateStorageMustNumeric"),"failure",!0,i.$t("Alert")):h.ManageDocUserStorageSettingData(JSON.stringify(l)).then(e=>{0==e.data?(this.ShowAlert(i.$t("StorageConfigurationDataUpdatedSuccessfully"),"success"),$("#idMaxStorage"+t).attr("disabled","disabled"),$("#divAction"+t).hide(),$("#idEdit"+t).show(),i.FetchData(),i.GetDDLDesignationData(),i.GetDDLDepartmentData(),i.$parent.GetStorageSetupStatusDetail()):i.ShowAlert(i.$t("UnknownErrorOccur"),"failure",!0,i.$t("Alert"))}),i.isLoading=!1},CancelAction:function(t){var e=this;$("#idMaxStorage"+t).attr("disabled","disabled"),$("#idEdit"+t).show(),$("#divAction"+t).hide(),e.FetchData(),e.GetDDLDesignationData(),e.GetDDLDepartmentData()},editAllowedStorage:function(t){$("#idMaxStorage"+t).removeAttr("disabled"),$("#idEdit"+t).hide(),$("#divAction"+t).show()},onChange:function(){var t=$(".chkItems:checked").not("[id^='chkAll']").length;t>0?$("#btnStorageSpace").removeClass("disabled"):$("#btnStorageSpace").addClass("disabled")},GetDDLDepartmentData:function(){var t=this;var e="moduleName=DocStorage&type=DEPARTMENT";h.GetDDLDatas(e).then(e=>{t.DepartmentData=e.data.DATA})},GetDDLDesignationData:function(){var t=this;var e="moduleName=DocStorage&type=HR_DESIG";h.GetDDLDatas(e).then(e=>{t.designationData=e.data.DATA})},FetchData:function(){var t=this;t.isLoading=!0;var e=`pageNo=${t.pageNo}&pageSize=${t.pageSize}&sortBy=&sortExp=&userTypeIds=4`;h.GetUserStorageDetail(e).then((function(e){t.UserData=JSON.parse(e.data).USERSTORAGEDETAILLIST,t.UserData.length>0&&(t.totalRecords=t.UserData[0].totalRecords,t.userStorageDetailSummary=JSON.parse(e.data).USERSTORAGEDETAILSUMMARY),t.getTotalStorageData(),t.isLoading=!1,null==t.UserData?t.NoRecordLength=0:t.NoRecordLength=t.UserData.length})),setTimeout((function(){t.ResponsiveDataTable("tblFileList")}),500),$("#btnStorageSpace").addClass("disabled")}}},se=ne,re=Object(f["a"])(se,ie,oe,!1,null,null,null),le=re.exports,ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("StorageBar",{attrs:{type:"Doc"}}),a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header",attrs:{id:"div_forListView"}},[a("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"tblFileList"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"text-center",staticStyle:{width:"50px !important"}},[a("input",{staticClass:"chkitems",attrs:{id:"chkAll",value:"",type:"checkbox"},on:{change:function(e){return t.onChange()}}})]),a("th",[a("span",[t._v(t._s(t.$t("UserName")))])]),a("th",[a("span",[t._v(t._s(t.$t("Designation")))])]),a("th",[a("span",[t._v(t._s(t.$t("Department")))])]),a("th",[a("span",[t._v(t._s(t.$t("Status")))])]),a("th",[a("span",[t._v(t._s(t.$t("ConsumedStoarage"))+" (MB)")])]),a("th",[a("span",[t._v(t._s(t.$t("AllocatedStorage"))+" (MB)")])]),a("th",{staticClass:"text-center nonresize",attrs:{"data-width":"5%"}},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",[t._l(t.UserData,(function(e,i){return a("tr",{key:i},[a("td",{staticClass:"text-center"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{staticClass:"chkItems custom-control-input",attrs:{id:e.USER_ID,type:"checkbox"},domProps:{value:e.USER_ID},on:{change:function(e){return t.onChange(e)}}}),a("label",{staticClass:"custom-control-label",attrs:{for:e.USER_ID,type:"checkbox"}})])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[t._v(" "+t._s(e.USER_NAME)+" ")])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[t._v(" "+t._s(e.DESIGNATION_NAME)+" ")])]),a("td",[a("span",{staticClass:"text-overflow-dynamic-container"},[t._v(" "+t._s(e.DEPARTMENT_NAME)+" ")])]),a("td",[a("a",{staticClass:"inactive-disabled"},["1001"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block w-80 text-center text-truncate btn-success",attrs:{title:"Active"}},[t._v(" Active")]):t._e(),"1084"==e.STATUS_ID?a("span",{staticClass:"sent bg-secondary btn d-inline-block w-80 text-center text-truncate text-white",attrs:{title:"Approved"}},[t._v(" Approved")]):t._e(),"Rejected"==e.STATUS_ID?a("span",{staticClass:"stop btn d-inline-block w-80 text-center text-truncate btn-danger",attrs:{title:"Rejected"}},[t._v(" Rejected")]):t._e(),"1003"==e.STATUS_ID?a("span",{staticClass:"stop px-2 bg-primary btn d-inline-block w-80 text-center text-truncate",attrs:{title:"Deleted"}},[t._v(" Deleted")]):t._e(),"1002"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block w-80 text-center text-truncate btn-danger",attrs:{title:"Inactive"}},[t._v("Inactive")]):t._e(),"1005"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block w-80 text-center text-truncate btn-secondary",attrs:{title:"Pending"}},[t._v(" Pending")]):t._e(),"ActivationAwaited"==e.STATUS_ID?a("span",{staticClass:"fullPaid btn d-inline-block w-80 text-center text-truncate btn-warning",attrs:{title:"ActivationAwaited"}},[t._v(" ActivationAwaited")]):t._e()])]),a("td",[a("span",{staticClass:"text-right text-overflow-dynamic-container"},[t._v(" "+t._s(e.USED_STORAGE)+" ")])]),a("td",["1002"!=e.STATUS_ID?a("span",{staticClass:"text-overflow-dynamic-container"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ALLOWED_STORAGE,expression:"item.ALLOWED_STORAGE"}],staticClass:"maxAllowedStorage  form-control text-right ",attrs:{type:"text",id:"idMaxStorage"+e.USER_ID,step:"0.01",maxlength:"13",disabled:"disabled"},domProps:{value:e.ALLOWED_STORAGE},on:{keypress:function(e){return t.isNumber(e)},input:function(a){a.target.composing||t.$set(e,"ALLOWED_STORAGE",a.target.value)}}})]):t._e(),"1002"==e.STATUS_ID?a("span",{staticClass:"text-overflow-dynamic-container"},[a("input",{staticClass:"maxAllowedStorage  form-control text-right disabled",attrs:{type:"text","asp-for":"item.MaxStorage",id:"idMaxStorage"+e.USER_ID,step:"0.01",maxlength:"13",value:"0"}})]):t._e()]),a("td",{staticClass:"text-center single-action"},[t.hideEditIcon?a("a",{staticClass:"aEdit",attrs:{title:"Edit",id:"idEdit"+e.USER_ID},on:{click:function(a){return t.editAllowedStorage(e.USER_ID)}}},[a("i",{staticClass:"fa fa-pencil text-success action-icon "})]):t._e(),a("div",{staticStyle:{display:"none"},attrs:{id:"divAction"+e.USER_ID}},[a("a",{staticClass:"aCancel mr-2",attrs:{id:"idCancel_"+e.USER_ID,value:e.USER_ID,title:"Cancel",href:"javascript:;"},on:{click:function(a){return t.CancelAction(e.USER_ID,e.ALLOWED_STORAGE)}}},[a("i",{staticClass:"fa fa-times-circle text-danger action-icon"})]),a("a",{staticClass:"aSave",attrs:{title:"Save",value:e.USER_ID,id:"idSave_"+e.USER_ID,href:"javascript:;"},on:{click:function(a){return t.SaveData(e.USER_ID,e.ALLOWED_STORAGE,e.CONSUMED_STROAGE)}}},[a("i",{staticClass:"fa fa-save text-primary action-icon"})])])])])})),0==t.NoRecordLength?a("tr",[a("td",{staticClass:"text-danger text-center no-record",attrs:{colspan:"7"}},[t._v("No Record Found")])]):t._e(),t.NoRecordLength>0?a("tr",[a("td",{staticClass:"text-right fr font-weight-bold",attrs:{colspan:"2"}},[t._v("Total")]),a("td",{staticClass:"text-right fr font-weight-bold",attrs:{colspan:"4"}},[t._v(t._s(t.totalConsumedStorage)+" MB ")]),a("td",{staticClass:" text-right fr font-weight-bold"},[t._v(t._s(t.totalAllowedStorage)+" MB")])]):t._e()],2)])])]),a("div",{staticClass:"col-lg-12 text-right mt-3 float-right p-0"},[a("button",{staticClass:"btn btn-warning float-left",attrs:{title:"Previous"},on:{click:function(e){return t.PreviousButton()}}},[t._v("Previous")]),a("button",{staticClass:"btn btn-success",attrs:{title:"Save"},on:{click:function(e){return t.SaveButton()}}},[a("em",{staticClass:"fa fa-save pr-2",attrs:{"aria-hidden":"true"}}),t._v(" Save")])])],1)},de=[],ue={components:{StorageBar:Xt},data(){return{isLoading:!1,UserData:[],DepartmentData:[],designationData:[],userStorageDetailSummary:[],pageNo:1,searchCondition:null,sortExp:null,sortBy:null,pageSize:10,totalRecords:"",dropDivShow:!1,showByNameDiv:!1,showByConsumedDiv:!1,divDesignationShow:!1,hideEditIcon:!0,isAllocatedSpaceOpen:!1,UserStorageValue:null,UserId:null,saveStorage:null,StorageValue:null,jsonobj:[],JSONSearchData:[],departmentList:null,designationList:null,txtSearchUserName:"",txtConsumedStorage:"",userFilterData:[],CheckIfExistDepartment:[],jsonFilteredData:[],label:!1,totalConsumedStorage:0,totalAllowedStorage:0,NoRecordLength:0,isDeptSearchOn:!1,isDesgSearchOn:!1,arrayDepartmentChecks:[],departmentSelectedArray:[],designationSelectedArray:[],arrayDesignationChecks:[],CheckIfExistDesignation:[],CheckIfExist:[],txtDepartmentName:[],tempArray:[],txtSearchDeptValue:"",containerSize:null,docStorageMaxLimit:null,AllowedClientStorage:null,AllowedUserStorage:null,total:null,consumed:null,allocated:null,jsonObjData:[]}},created(){var t=this;t.FetchData(),t.GetDDLDesignationData(),t.GetDDLDepartmentData(),t.GetStoragedata()},computed:{AvailableSpace(){return"All"==this.type?this.total>=this.consumed?this.total-this.consumed:0:this.AllowedClientStorage+this.AllowedUserStorage<this.allocated?this.allocated-this.AllowedClientStorage-this.AllowedUserStorage:0},AllowedStorage(){var t=this.AllowedClientStorage+this.AllowedUserStorage;return t}},methods:{validate:function(){var t=this,e=(t.AllowedClientStorage,t.AllowedUserStorage),a=t.AvailableSpace,i=t.totalAllowedStorage,o=e+a;return!(o<i)||(t.ShowAlert(t.$t("YouCannotAssignSpaceMoreThanAvailableSpace"),"failure",!0,t.$t("Alert")),!1)},PreviousButton:function(){var t=this;t.$emit("previousTab")},searchDept:function(){var t=this;""!=t.txtSearchDeptValue&&(t.DepartmentData=t.DepartmentData.filter(e=>e.name.toLowerCase().includes(t.txtSearchDeptValue)))},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},ClearFilter:function(t,e,a){},enableDepartmentSearch:function(){var t=this;$(".DepartmentchkItems:checked").length>0?(t.isDeptSearchOn=!0,t.departmentSelectedArray=[],$(".DepartmentchkItems:checked").each((function(){var e=$(this).val();t.arrayDepartmentChecks=t.DepartmentData.filter(t=>t.value==e),t.departmentSelectedArray=t.departmentSelectedArray.concat(t.arrayDepartmentChecks)}))):t.isDeptSearchOn=!1},enableDesignationSearch:function(){var t=this;$(".DesignationchkItems:checked").length>0?(t.isDesgSearchOn=!0,t.designationSelectedArray=[],$(".DesignationchkItems:checked").each((function(){var e=$(this).val();t.arrayDesignationChecks=t.designationData.filter(t=>t.value==e),t.designationSelectedArray=t.designationSelectedArray.concat(t.arrayDesignationChecks)}))):t.isDesgSearchOn=!1},SkipButton:function(){var t=this;t.$parent.ShowNextTab(5)},SaveButton:function(){var t=this;t.jsonObjData=[];new FormData;if(0!=$("#tblFileList tr").length){var e=`pageNo=${t.pageNo}&pageSize=${t.pageSize}&sortBy=&sortExp=&userTypeIds=1,2,3`;h.GetUserStorageDetail(e).then((function(e){t.UserData=JSON.parse(e.data).USERSTORAGEDETAILLIST,null!=t.UserData&&t.UserData.forEach((e,a)=>{let i={DataId:e.USER_ID,DataValue:e.ALLOWED_STORAGE};t.jsonObjData.push(i)});let a=[{refCode:"UserSetting",moduleName:"DocStorage"}];var i="configData",o="conditionData",n="[{"+JSON.stringify(i)+":"+JSON.stringify(t.jsonObjData)+", "+JSON.stringify(o)+":"+JSON.stringify(a)+"}]";1==t.validate()?h.ManageDocUserStorageSettingData(JSON.stringify(n)).then(e=>{0==e.data?t.$parent.ShowNextTab(5):t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))}):t.ShowAlert(t.$t("YouCannotAssignSpaceMoreThanAvailableSpace"),"failure",!0,t.$t("Alert"))}))}else t.ShowAlert(t.$t("UnknownErrorOccur"),"failure",!0,t.$t("Alert"))},disableDepartmentButton:function(){var t=this;t.isDeptSearchOn=!1},disableDisgnationButton:function(){var t=this;t.isDesgSearchOn=!1},SearchUserStorage:function(){var t=this;t.userFilterData=[],$(".DepartmentchkItems:checked").each((function(){var e=$(this).val();t.CheckIfExistDepartment=t.UserData.filter(t=>t.DEPARTMENT_ID==e),t.JSONSearchData=Array.from(t.CheckIfExistDepartment),t.userFilterData=t.userFilterData.concat(t.JSONSearchData),t.departmentSelectedArray.length>0?t.dropDivShow=!0:t.dropDivShow=!1})),$(".DesignationchkItems:checked").each((function(){0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData);var e=$(this).val();t.CheckIfExistDesignation=t.UserData.filter(t=>t.DESIGNATION_ID==e),t.JSONSearchData=Array.from(t.CheckIfExistDesignation),t.userFilterData=t.userFilterData.concat(t.JSONSearchData),t.designationSelectedArray.length>0?t.divDesignationShow=!0:t.divDesignationShow=!1})),""!=t.txtSearchUserName&&(0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData),t.CheckIfExist=t.UserData.filter(e=>e.USER_NAME.toLowerCase().includes(t.txtSearchUserName)),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)),""!=t.txtConsumedStorage&&(0==t.userFilterData.length&&(t.jsonFilteredData=t.UserData),t.CheckIfExist=t.jsonFilteredData.filter((function(e){return e.CONSUMED_STROAGE==t.txtConsumedStorage})),t.JSONSearchData=Array.from(t.CheckIfExist),t.userFilterData=t.userFilterData.concat(t.JSONSearchData)),t.UserData=t.userFilterData,t.getTotalStorageData()},ResetButton:function(){var t=this;t.FetchData(),t.GetDDLDesignationData(),t.GetDDLDepartmentData(),t.dropDivShow=!1,t.divDesignationShow=!1,t.showByNameDiv=!1,t.showByConsumedDiv=!1,$(".DepartmentchkItems").prop("checked",!1),$(".DesignationchkItems").prop("checked",!1),t.txtSearchUserName="",t.txtConsumedStorage="",t.toggleExpandCollapseButton(t.label=!0),t.userFilterData=[],t.designationSelectedArray=[],t.departmentSelectedArray=[]},toggleExpandCollapseButton:function(){var t=this;0==t.label?(t.dropDivShow=!0,t.divDesignationShow=!0,t.showByNameDiv=!0,t.showByConsumedDiv=!0,t.label=!0):(t.dropDivShow=!1,t.divDesignationShow=!1,t.showByNameDiv=!1,t.showByConsumedDiv=!1,t.label=!1,t.isDeptSearchOn=!1,t.isDesgSearchOn=!1),t.txtSearchUserName="",t.txtConsumedStorage=""},getTotalStorageData:function(){var t=this;t.totalAllowedStorage=0,t.totalConsumedStorage=0,t.UserData.forEach(e=>{"1002"!=e.STATUS_ID&&(t.totalAllowedStorage+=e.ALLOWED_STORAGE,t.totalConsumedStorage+=e.CONSUMED_STROAGE)})},AllocatedSpacePopup:function(){var t=this,e="",a="";$("#tblFileList .chkItems:checked").not("[id^='chkAll']").each((function(){a=$(this).closest("tr").find(".maxAllowedStorage").val(),e=$(this).val();let i={Id:e,value:a};t.jsonobj.push(i)})),t.isAllocatedSpaceOpen=!0},closeAllocatedSpace:function(){var t=this;t.isAllocatedSpaceOpen=!1},GetStoragedata:function(){var t=this;t=this;h.GetStorageReport().then((function(e){t.total=e.data[0].CONTAINER_LIMIT,t.consumed=e.data[0].CONTAINER_SIZE,t.allocated=e.data[0].DOC_STORAGE_MAXLIMIT}));var e="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=4";h.GetUserStorageDetail(e).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedClientStorage=0,a.forEach(e=>{t.AllowedClientStorage+=e.ALLOWED_STORAGE})}));var a="pageNo=1&pageSize=10&sortBy=&sortExp=&userTypeIds=1,2,3";h.GetUserStorageDetail(a).then((function(e){var a=JSON.parse(e.data).USERSTORAGEDETAILLIST;t.AllowedUserStorage=0,a.forEach(e=>{t.AllowedUserStorage+=e.ALLOWED_STORAGE})}))},SaveData:function(t,e,a){var i=this;i.isLoading=!0,i.jsonObjData=[],i.UserId=t,i.UserStorageValue=e;let o={DataId:i.UserId,DataValue:i.UserStorageValue};i.jsonObjData.push(o);let n=[{refCode:"UserSetting",moduleName:"DocStorage"}];var s="configData",r="conditionData",l="[{"+JSON.stringify(s)+":"+JSON.stringify(i.jsonObjData)+", "+JSON.stringify(r)+":"+JSON.stringify(n)+"}]";if(e>i.total)return i.ShowAlert(i.$t("AllocateStorageCannotMoreThanTotalStorage"),"failure",!0,i.$t("Alert")),i.isLoading=!1,!1;e<a?i.ShowAlert(i.$t("AllocateStorageCannotLessThanConsumedStorage"),"failure",!0,i.$t("Alert")):isNaN(e)?i.ShowAlert(i.$t("AllocateStorageMustNumeric"),"failure",!0,i.$t("Alert")):h.ManageDocUserStorageSettingData(JSON.stringify(l)).then(e=>{0==e.data?(this.ShowAlert(i.$t("StorageConfigurationDataUpdatedSuccessfully")),$("#idMaxStorage"+t).attr("disabled","disabled"),$("#divAction"+t).hide(),$("#idEdit"+t).show(),i.FetchData(),i.GetDDLDesignationData(),i.GetDDLDepartmentData(),i.$parent.GetStorageSetupStatusDetail()):i.ShowAlert(i.$t("UnknownErrorOccur"),"failure",!0,i.$t("Alert"))}),i.isLoading=!1},CancelAction:function(t){var e=this;$("#idMaxStorage"+t).attr("disabled","disabled"),$("#idEdit"+t).show(),$("#divAction"+t).hide(),e.FetchData(),e.GetDDLDesignationData(),e.GetDDLDepartmentData()},editAllowedStorage:function(t){$("#idMaxStorage"+t).removeAttr("disabled"),$("#idEdit"+t).hide(),$("#divAction"+t).show()},onChange:function(){var t=$(".chkItems:checked").not("[id^='chkAll']").length;t>0?$("#btnStorageSpace").removeClass("disabled"):$("#btnStorageSpace").addClass("disabled")},GetDDLDepartmentData:function(){var t=this;var e="moduleName=DocStorage&type=DEPARTMENT";h.GetDDLDatas(e).then(e=>{t.DepartmentData=e.data.DATA})},GetDDLDesignationData:function(){var t=this;var e="moduleName=DocStorage&type=HR_DESIG";h.GetDDLDatas(e).then(e=>{t.designationData=e.data.DATA})},FetchData:function(){var t=this;t.isLoading=!0;var e=`pageNo=${t.pageNo}&pageSize=${t.pageSize}&sortBy=&sortExp=&userTypeIds=1,2,3`;h.GetUserStorageDetail(e).then((function(e){t.UserData=JSON.parse(e.data).USERSTORAGEDETAILLIST,t.totalRecords=t.UserData[0].totalRecords,t.userStorageDetailSummary=JSON.parse(e.data).USERSTORAGEDETAILSUMMARY,t.getTotalStorageData(),t.isLoading=!1,null==t.UserData?t.NoRecordLength=0:t.NoRecordLength=t.UserData.length})),setTimeout((function(){t.ResponsiveDataTable("tblFileList")}),500),setTimeout((function(){t.inittable()}),1500),$("#btnStorageSpace").addClass("disabled")}}},pe=ue,me=(a("d23c"),Object(f["a"])(pe,ce,de,!1,null,"5b90790b",null)),ve=me.exports,he=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{attrs:{id:"addGroupRecord"}},[a("Form",{ref:"AddGroup"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dynamic-form",{ref:"AddGroup1",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1),a("div",{staticClass:"col-lg-12 mb-3",attrs:{id:"divtickettupelist"}},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header",staticStyle:{"max-height":"220px"},attrs:{id:"divUserList"}},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 w-100",attrs:{id:"example"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("CAusername")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Department")))]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(t._s(t.$t("Action")))])])]),a("tbody",{attrs:{id:"UserListDiv"}},[t._l(t.UserList,(function(e){return a("tr",{key:e},[a("td",[t._v(t._s(e.userName))]),a("td",[t._v(t._s(e.departmentName))]),a("td",{staticClass:"text-center single-action"},[a("a",{staticClass:"ancAddUsers round-icon-small btn-success-light d-block float-none m-auto",attrs:{href:"javascript:;","data-id":e.userId,"data-name":e.UserName,"data-department":e.departmentName},on:{click:function(a){return t.AssignedUser(e.userId,e.userName,e.departmentName)}}},[a("i",{staticClass:"fa fa-plus",attrs:{alt:"Click to Add",title:"Add"}})])])])})),0==t.UserList.length?a("tr",{staticClass:"norecords",attrs:{id:"trNoRecordFond"}},[a("td",{staticClass:"text-danger text-center",attrs:{colspan:"5"}},[t._v(t._s(t.$t("NoRecordfound"))+" ")])]):t._e()],2)])])]),0==t.UserList.length?a("span",{staticClass:"text-danger",attrs:{id:"error_User"}},[t._v(t._s(t.$t("CheckAtleastOneUser")))]):t._e()]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-fix-header"},[a("table",{staticClass:"table table-bordered",attrs:{id:"DefaultUserTable"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("CAusername")))]),a("th",{attrs:{scope:"col"}},[t._v(t._s(t.$t("Department")))]),a("th",{attrs:{scope:"col",width:"200"}},[t._v(t._s(t.$t("MaxTicketAssign")))]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(t._s(t.$t("MarkAsDefault")))]),a("th",{staticClass:"text-center",attrs:{scope:"col"}},[t._v(t._s(t.$t("Action")))])])]),a("tbody",[t._l(t.AssignUserList,(function(e,i){return a("tr",{key:e},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.departmentName))]),a("td",{staticClass:"text-center"},[a("input",{class:{"form-control":!0,"is-invalid":!t.isMaxTicketValid&&(!e.Id||e.Id!=t.defaultUser&&!t.MaxTicketAssign.trim())&&e.disabled},attrs:{type:"text",name:"maxticketassign-"+e.Id,disabled:e.Id!=t.defaultUser,maxlength:"4",tabindex:"6",oninput:"this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4);"},domProps:{value:e.UserId==e.DefaultUser?t.MaxTicketAssign:""}})]),a("td",{staticClass:"text-center"},[a("div",{staticClass:"d-inline-block"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.defaultUser,expression:"defaultUser"}],attrs:{type:"radio",id:e.Id,name:"default",tabindex:"7"},domProps:{value:e.Id,checked:e.UserId!=e.DefaultUser,checked:t._q(t.defaultUser,e.Id)},on:{click:function(a){return t.SetValue(e.Id)},change:function(a){t.defaultUser=e.Id}}})])]),a("td",{staticClass:"text-center"},[a("a",{staticClass:"aRemoveUser round-icon-small btn-danger-light d-block float-none m-auto",attrs:{href:"javascript:;"},on:{click:function(a){return t.DeleteUser(e.Id)}}},[a("i",{staticClass:" fa fa-trash",attrs:{title:"Add"}})])])])})),0==t.AssignUserList.length?a("tr",{staticClass:"norecords"},[a("td",{staticClass:"text-danger text-center",attrs:{colspan:"5"}},[t._v(t._s(t.$t("NoRecordfound"))+" ")])]):t._e()],2)])])]),t.CheckAssignedUser&&0==t.AssignUserList.length||t.checkOneUserSelected?a("span",{staticClass:"text-danger",attrs:{id:"error_DefaultUser"}},[t._v("Check Atleast One Defualt User")]):t._e()]),a("div",{staticClass:"col-lg-12 mt-3"},[a("Field",{attrs:{name:"Description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[a("label",[t._v("Description :"),a("span",{staticClass:"text-danger"},[t._v("*")])]),a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.Description,expression:"Description"}],class:{"form-control":!0,"is-invalid":i[0]},attrs:{tabindex:"8",maxlength:"500"},domProps:{value:t.Description},on:{input:function(e){e.target.composing||(t.Description=e.target.value)}}}),i[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(i[0]))]):t._e()])]}}])})],1),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-12 text-right"},[a("button",{staticClass:"btn btn-warning float-left",attrs:{title:"Previous"},on:{click:function(e){return t.PreviousButton()}}},[t._v("Previous")]),a("button",{staticClass:"popupgreenbtn btn skip-btn-clr formbtn widthhalf px-4",attrs:{title:"Skip"},on:{click:function(e){return t.Skip()}}},[t._v("Skip")]),a("button",{staticClass:"popupgreenbtn btn btn-success formbtn widthhalf pr-2",staticStyle:{"margin-left":"5px"},attrs:{type:"button",id:"aGroupTicketSave",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:function(e){return t.SubmitData(t.values)}}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("SaveAndNext")))])])])])])])],1)])},Se=[],ge={props:{tabCount:0,currentTabIndex:0},created:async function(){var t=this;await t.GetPrivilegeData(),t.GetDepartment(),t.GetResolveTicketUserList(),t.GetGroupTicketData(0)},data(){return{UserList:[],AssignUserList:[],Description:"",defaultUser:"",GroupType:"",MaxTicketAssign:"",isMaxTicketValid:!0,CheckAssignedUser:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Ticket Group Name",name:"TicketGroupName",value:"",placeholder:"",validationRules:{required:!0,max:250}},{astype:"SelectField",label:this.$t("Skill"),name:"SkillId",value:"",placeholder:"",visibility:!0,config:{options:[],showAddIcon:!1,onChange:this.GetResolveTicketUserList},validationRules:""}]},{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Department"),name:"DepartmentId",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.GetResolveTicketUserListIs},validationRules:""},{astype:"RadioField",label:this.$t("GroupType"),name:"GroupType",value:"Call",placeholder:"",config:{options:[{name:"Call",value:"Call"},{name:"Routing",value:"Escalate"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-warning",text:"<i class='fa fa-save pr-2'></i>Save Of Draft",isVisible:!1}]}},methods:{Skip:function(){var t=this;t.$emit("nextTab")},PreviousButton:function(){var t=this;t.$emit("previousTab")},GetPrivilegeData:async function(){var t=this,e="controller=Review&action=Index";await h.CheckPrivilege(e).then((function(e){e.data?(t.FormSchema[0].Data[1].visibility=!0,t.GetSkill()):t.FormSchema[0].Data[1].visibility=!1}))},GetSkill:function(){var t=this;h.GetSkill().then(e=>{e.data.forEach((t,e)=>{this.FormSchema[0].Data[1].config.options.push({value:t.skill_id,name:t.title})}),t.$refs.AddGroup1.UpdateKeyValue()})},GetDepartment:function(){h.GetDepartment().then(t=>{t.data.forEach((t,e)=>{this.FormSchema[1].Data[0].config.options.push({value:t.department_id,name:t.department_name})}),this.$refs.AddGroup1.UpdateKeyValue()})},GetResolveTicketUserList:function(t,e){var a=this;if(void 0!=e)var i="departmentId=&skillId="+e.value;else i="departmentId=&skillId=";h.GetResolveTicketUserListbydept(i).then(t=>{a.UserList=t.data})},GetResolveTicketUserListIs:function(t,e){var a=this,i=`departmentId=${e.value}&skillId=`;h.GetResolveTicketUserListbydept(i).then(t=>{a.UserList=t.data})},AssignedUser:function(t,e,a){var i=this;i.AssignUserList.some(e=>e.Id===t)?i.ShowAlert(e+" "+i.$t("AlreadyExist"),"warning"):i.AssignUserList.push({Id:t,name:e,departmentName:a,UserId:t})},DeleteUser:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Group"),(function(){e.AssignUserList=jQuery.grep(e.AssignUserList,(function(e){return e.Id!=t}))}))},GetGroupTicketData:function(t){var e=this,a="ticketGroupId="+t;h.GetGroupTicketData(a).then(t=>{if(t.data){var a=t.data;null!=a&&t.data.Data.length>0&&(e.FormSchema[0].Data[0].value=t.data.Data[0].ticket_group_name,e.Description=t.data.Data[0].description,e.FormSchema[1].Data[0].value=t.data.Data[0].department_id,e.FormSchema[1].Data[1].value=t.data.Data[0].Group_type,e.MaxTicketAssign=t.data.Data[0].max_ticket_assign,e.defaultUser=t.data.Data[0].default_user_id,t.data.Data.forEach((t,a)=>{e.AssignUserList.push({Id:t.user_id,name:t.username,departmentName:t.department_name,UserId:t.user_id,DefaultUser:t.default_user_id})}))}})},SubmitData:function(){var t=this,e="";t.AssignUserList.forEach((t,a)=>{e+=""==e?t.Id:","+t.Id}),t.AssignUserList.forEach(e=>{const a=document.querySelector(`input[name="maxticketassign-${e.Id}"]`);if(a&&!a.disabled){const e=a.value.trim();if(!e)return t.isMaxTicketValid=!1,t.MaxTicketAssign="",a.classList.add("is-invalid"),!1;t.isMaxTicketValid=!0,t.MaxTicketAssign=e,a.classList.remove("is-invalid")}}),t.$refs.AddGroup.validate().then(a=>{if(0==t.AssignUserList.length||t.isBlank(t.defaultUser))return t.CheckAssignedUser=!0,t.ShowAlert(t.$t("CorrectHighlightedErrors"),"warning"),t.checkOneUserSelected=!0,!1;if(a){var i=`groupTicketId=0&groupName=${t.FormSchema[0].Data[0].value}&description=${t.Description}&departmentId=${""==t.FormSchema[1].Data[0].value?0:t.FormSchema[1].Data[0].value}&groupType=${t.FormSchema[1].Data[1].value}&maxTiacketAssign=${t.MaxTicketAssign}&userIds=${e}&defaultUser=${t.defaultUser}`;h.AddTicketGroup(i).then(e=>{1==e.data?(t.ShowAlert(t.$t("GroupHasAdded"),"success"),t.tabCount>1&&(t.$emit("nextTab"),t.$emit("updateProgress",currentTabIndex,!0))):t.ShowAlert(t.$t("AddedError"),"failure")})}})},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},SetValue:function(t,e){var a=this;a.MaxTicketAssign="",a.defaultUser=t},onChangeRadio:function(t,e){var a=this;a.FormSchema[1].Data[1].value=t.target.dataset.value}}},fe=ge,Ce=(a("2af0"),Object(f["a"])(fe,he,Se,!1,null,"78e96ba3",null)),Ae=Ce.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{attrs:{id:"addChainRecord"}},[a("Form",{ref:"AddChain"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"listing mt-3 px-3"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{id:"tbContainer"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[a("span",[t._v(t._s(t.$t("Level"))+":"),a("sup",{staticClass:"text-danger"},[t._v("*")])])]),a("th",[a("span",[t._v(t._s(t.$t("Group"))+":"),a("sup",{staticClass:"text-danger"},[t._v("*")])])]),a("th",{staticClass:"text-center single-action"},[a("a",{staticClass:"round-icon-small btn-success-light d-block float-none m-auto",staticStyle:{"line-height":"33px"},attrs:{href:"javascript:;",id:"btnAdd",title:"Add"},on:{click:t.AddRow}},[a("i",{staticClass:"fa fa-plus"})])])])]),a("tbody",t._l(t.Mainleveldiv,(function(e,i){return a("tr",{key:i,staticClass:"mainleveldiv"},[a("td",[a("Field",{attrs:{name:"Level",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control level",class:{"form-control":!0,"is-invalid":n[0]},attrs:{name:e.name},on:{change:[function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?i:i[0])},function(a){return t.AlreadyExist(a,i,e,"level")}]}},[a("option",{attrs:{value:""}},[t._v("Select Level")]),t._l(t.Level,(function(e){return a("option",{key:e,domProps:{value:e.value}},[t._v(" "+t._s(e.name))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Level"+i}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})],1),a("td",[a("Field",{attrs:{name:"Group",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(o){var n=o.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.Group,expression:"item.Group"}],class:{"form-control":!0,"is-invalid":n[0]},on:{change:[function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"Group",a.target.multiple?i:i[0])},function(a){return t.AlreadyExist(a,i,e,"group")}]}},[a("option",{attrs:{value:""}},[t._v("Select Ticket Group")]),t._l(t.GroupData,(function(e){return a("option",{key:e,domProps:{value:e.value}},[t._v(t._s(e.name))])}))],2),n[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Group"}},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})],1),0!=i?a("td",{staticClass:"text-center single-action"},[a("a",{staticClass:"round-icon-small btn-danger-light d-block float-none m-auto",attrs:{href:"javascript:;",id:"btnRemove",title:"Remove"},on:{click:function(e){return t.DeleteUser(i)}}},[a("i",{staticClass:"fa fa-trash"})])]):t._e()])})),0)])])])]),a("div",{staticClass:"col-mt-3"},[a("div",{staticClass:"row flex-row-reverse mt-3"},[a("div",{staticClass:"col-lg-12 text-right"},[a("button",{staticClass:"btn btn-warning float-left",attrs:{title:"Previous"},on:{click:function(e){return t.PreviousButton()}}},[t._v("Previous")]),a("button",{staticClass:"popupgreenbtn btn btn-success formbtn widthhalf pr-2",attrs:{type:"button",id:"aChainTicketSave",title:"Save"},on:{click:t.SaveData}},[a("i",{staticClass:"fa fa-floppy-o pr-2"}),a("span",[t._v(t._s(t.$t("SaveAndClose")))])])])])])])],1)])},be=[],De={props:{tabCount:0,currentTabIndex:0},created:function(){var t=this;t.GetTicketGroupsForDropdownList()},data(){return{Mainleveldiv:[{value:"",Group:""}],GroupData:[],FormSchema:[{layoutType:"two",Data:[{astype:"TextField",label:"Ticket Service Board Name",name:"TicketChainName",value:"",placeholder:"",validationRules:{required:!0,max:250}},{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:{required:!0,max:1e3}}]}],Level:[{name:"Level 1",value:1},{name:"Level 2",value:2},{name:"Level 3",value:3},{name:"Level 4",value:4},{name:"Level 5",value:5},{name:"Level 6",value:6},{name:"Level 7",value:7},{name:"Level 8",value:8},{name:"Level 9",value:9},{name:"Level 10",value:10}],buttons:[{type:"submit",class:"btn btn-warning",text:"<i class='fa fa-save pr-2'></i>Save Of Draft",isVisible:!1}]}},methods:{AddRow:function(t){var e=this;e.Mainleveldiv.push({value:"",Group:""}),e.$nextTick(()=>{e.$refs.AddChain.validate()})},PreviousButton:function(){var t=this;t.$emit("previousTab")},GetTicketGroupsForDropdownList:function(){var t=this;h.GetTicketGroupsForDropdownList().then((function(e){e.data.forEach(e=>{t.GroupData.push({name:e.ticket_group_name,value:e.ticket_group_id})})}))},AlreadyExist:function(t,e,a,i){var o=this;o.Mainleveldiv.some(e=>e.value===t.target.value)?(o.Mainleveldiv[e].value="",o.ShowAlert("Already Selected","warning")):o.Mainleveldiv.some(e=>e.Group===t.target.value)?(o.Mainleveldiv[e].Group="",o.ShowAlert("Already Selected","warning")):"level"==i?o.Mainleveldiv[e].value=t.target.value:"group"==i&&(o.Mainleveldiv[e].Group=t.target.value)},DeleteUser:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Group"),(function(){e.Mainleveldiv.splice(t,1)}))},SaveData:function(){var t=this;t.$refs.AddChain.validate().then(e=>{if(e){var a=t.Mainleveldiv.some(t=>""===t.value||""===t.Group);if(a)t.ShowAlert("Please select both level and group for all rows","error");else{var i=`serviceBoardId=0&serviceBoardName=${t.FormSchema[0].Data[0].value}&description=${t.FormSchema[0].Data[1].value}&LevelIdsOrGroupIds=${JSON.stringify(t.Mainleveldiv)}`;h.AddTicketServiceBoard(i).then(e=>{"3"==e.data?t.ShowAlert(t.$t("TicketServiceBoardAlreadyExists"),"failure"):"1"==e.data||"2"==e.data?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("TicketServiceBoard")]),"success",!0,t.$t("Alert")),t.$emit("close")):t.ShowAlert(t.$t("AddedError",[t.$t("TicketServiceBoard")]),"failure",!0,t.$t("Alert"))})}}})}}},Te=De,_e=Object(f["a"])(Te,ye,be,!1,null,null,null),Ie=_e.exports,xe={components:{priority:R,Lead:B,ConfigurationTab:q,Location:et,AddDeployProduct:rt,ProductType:mt,AddApprovalChain:Ct,AddApprovalGroup:_t,AddApprovalRule:Mt,ChooseStorage:jt,StorageManagement:ae,ClientStorageListing:le,UserStorageListing:ve,AddGroup:Ae,AddServiceBoard:Ie},props:{moduleCode:"",component:"",tabCount:0,currentTabIndex:0},methods:{NextTab:function(){this.$emit("NextTab")},UpdateProgress:function(t,e){this.$emit("UpdateProgress",t,e)},PreviousTab:function(){this.$emit("PreviousTab")},Close:function(){this.$emit("Close")}}},we=xe,Ne=Object(f["a"])(we,x,w,!1,null,null,null),Le=Ne.exports,Ee={props:{moduleCode:"",setupTabs:[]},watch:{setupTabs:function(t){this.TabList=t,t.length>0&&(this.currentSelectedTab=t[0])}},components:{moduleSetupBridge:Le},data:function(){return{TabList:[],currentSelectedTab:null,setupProgress:0,setupProgresText:"Inprogress",progressBarColor:""}},created:function(){this.TabList=this.setupTabs,this.setupTabs.length>0&&(this.currentSelectedTab=this.setupTabs[0]),this.GetProgresSetupStatusDetail()},computed:{currentTabIndex:function(){return this.TabList.indexOf(this.currentSelectedTab)+1}},methods:{GetProgresSetupStatusDetail:function(){var t=this,e=(100/t.setupTabs.length).toFixed(2);t.setupTabs.forEach((function(a){1==a.isCompleted&&(t.setupProgress+e<100?t.setupProgress+=e:t.setupProgress=100,100==t.setupProgress&&(t.setupProgresText="Completed",t.progressBarColor="bg-success"))}))},setCurrectTab:function(t,e){var a=this;"undefined"!=typeof t&&(a.currentSelectedTab=t)},NextTab:function(){var t=this,e=this.TabList.indexOf(t.currentSelectedTab);e>-1&&this.TabList.length>e+1&&(t.currentSelectedTab=this.TabList[e+1]),this.GetProgresSetupStatusDetail()},UpdateProgress:function(t,e){this.TabList[t-1].isCompleted=!0,this.$emit("UpdateProgress",t,completeStatus),this.GetProgresSetupStatusDetail()},PreviousTab:function(){var t=this,e=this.TabList.indexOf(t.currentSelectedTab);e>-1&&this.TabList.length>=e+1&&(t.currentSelectedTab=this.TabList[e-1])},Close:function(){this.$emit("close")}}},Fe=Ee,Oe=(a("2dfc"),Object(f["a"])(Fe,_,I,!1,null,null,null)),Re=Oe.exports;const Pe="http://qatest.talygen.com",$e=[{moduleName:"Ticketing",name:"Canned",diaplayName:"Canned Reply",icon:"fa-envelope",redirectTo:"/ReplyTemplate/Index",visibleTo:["normal","nonlocating","locating"]},{moduleName:"Ticketing",name:"FormBuilder",diaplayName:"FormBuilder",icon:"fa-folder-open",redirectTo:"/FormBuilder/Index",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"IncidentType",diaplayName:"IncidentType",icon:"fa-chain-broken",redirectTo:"/Ticketing/IncidentTypeListing",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"MapExtent",diaplayName:"Map Extent",icon:"fa-globe",redirectTo:"/Ticketing/MapExtend",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"MapConfiguration",diaplayName:"Map Configuration",icon:"fa-map",redirectTo:"/Ticketing/MapConfig",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"MapStatus",diaplayName:"Map Status",icon:"fa-ticket",redirectTo:"/Ticketing/MapStatus",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"ResourceType",diaplayName:"Resource Type",icon:"fa-list",redirectTo:"/Ticketing/ResourceType",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"RuleEngine",diaplayName:"RuleEngine",icon:"fa-cog",redirectTo:"/RuleEngine/Index",visibleTo:["normal","nonlocating","locating"]},{moduleName:"Ticketing",name:"ServiceCrew",diaplayName:"ServiceCrew",icon:"fa-tags",redirectTo:"/Ticketing/crew",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"TicketGroup",diaplayName:"Ticket Group",icon:"fa-map-marker",redirectTo:"/Ticketing/Group",visibleTo:["normal","nonlocating","locating"]},{moduleName:"Ticketing",name:"Layout",diaplayName:"Ticket Layout Settings",icon:"fa-ticket",redirectTo:"/Ticketing/ManageLayout",visibleTo:["normal","nonlocating","locating"]},{moduleName:"Ticketing",name:"Chain",diaplayName:"Chain",icon:"fa-chain",redirectTo:"/Ticketing/Chain",visibleTo:["normal","nonlocating","locating"]},{moduleName:"Ticketing",name:"WorkType",diaplayName:"WorkType",icon:"fa-info-circle",redirectTo:"/Ticketing/WorkTypeListing",visibleTo:["nonlocating","locating"]},{moduleName:"Ticketing",name:"Zone",diaplayName:"Zone",icon:"fa-map-marker",redirectTo:"/Ticketing/Zone",visibleTo:["nonlocating","locating"]},{moduleName:"Asset",name:"EmailTemplate",diaplayName:"EmailTemplate",icon:"fa fa-envelope",redirectTo:"/emailtemplate/Index",visibleTo:[]},{moduleName:"Asset",name:"Location",diaplayName:"Location",icon:"fa-map-marker",redirectTo:"/Location/Index",visibleTo:[]},{moduleName:"Asset",name:"ManageTags",diaplayName:"ManageTags",icon:"fa-tags",redirectTo:Pe+"/Tag/Index",visibleTo:[]},{moduleName:"Asset",name:"ProductContainerList",diaplayName:"ProductContainerList",icon:"fa fa-cog ",redirectTo:"/Asset/AssetGrouping",visibleTo:[]},{moduleName:"Asset",name:"ProductType",diaplayName:"ProductType",icon:"fa fa-th-list",redirectTo:"/Asset/Index",visibleTo:[]},{moduleName:"Asset",name:"Status",diaplayName:"Status",icon:"fa-bar-chart",redirectTo:"/Status/Index",visibleTo:[]},{moduleName:"CRM",name:"Category",diaplayName:"Category",icon:"fa fa-usb",redirectTo:"/Category/Index",visibleTo:[]},{moduleName:"CRM",name:"Channel",diaplayName:"Channel",icon:"fa fa-tags",redirectTo:"/Channel/Index",visibleTo:[]},{moduleName:"CRM",name:"Clients",diaplayName:"Clients",icon:"fa fa-group",redirectTo:"/Clients/Index",visibleTo:[]},{moduleName:"CRM",name:"ContactType",diaplayName:"ContactType",icon:"fa-file-text-o",redirectTo:"/ContactType/Index",visibleTo:[]},{moduleName:"CRM",name:"CRMRoleType",diaplayName:"CRMRoleType",icon:"fa fa-user-o",redirectTo:"/Roles/Index",visibleTo:[]},{moduleName:"CRM",name:"CurrencyManagement",diaplayName:"CurrencyManagement",icon:"fa fa-dollar",redirectTo:"/CurrencyManagement/Index",visibleTo:[]},{moduleName:"CRM",name:"CustomFields",diaplayName:"CustomFields",icon:"fa fa-sliders",redirectTo:"/Custom/fields",visibleTo:[]},{moduleName:"CRM",name:"EmailTemplate",diaplayName:"EmailTemplate",icon:"fa fa-envelope",redirectTo:"/EmailTemplate/Index",visibleTo:[]},{moduleName:"CRM",name:"Feedback",diaplayName:"Feedback",icon:"fa fa-comments-o",redirectTo:"/Feedback/Index",visibleTo:[]},{moduleName:"CRM",name:"IndustryType",diaplayName:"IndustryType",icon:"fa fa-industry",redirectTo:"/IndustryType/Index",visibleTo:[]},{moduleName:"CRM",name:"ManageLayout",diaplayName:"ManageLayout",icon:"fa fa-sliders",redirectTo:"/Custom/Layouts",visibleTo:[]},{moduleName:"CRM",name:"ManageTax",diaplayName:"ManageTax",icon:"fa fa-dollar",redirectTo:"/Tax/Index",visibleTo:[]},{moduleName:"CRM",name:"ProductType",diaplayName:"ProductType",icon:"fa fa-cube",redirectTo:"/CRM/ItemTypeListing",visibleTo:[]},{moduleName:"CRM",name:"Status",diaplayName:"Status",icon:"fa fa-star-half-o",redirectTo:"/Status/Index",visibleTo:[]},{moduleName:"Timer",name:"ApprovalChain",diaplayName:"ApprovalChain",icon:"fa hs-appchain_colored",redirectTo:"/ApprovalChain/Index",visibleTo:[]},{moduleName:"Timer",name:"ApprovalGroup",diaplayName:"ApprovalGroup",icon:"fa fa-users",redirectTo:"/ApprovalGroup/Index",visibleTo:[]},{moduleName:"Timer",name:"ApprovalRule",diaplayName:"ApprovalRule",icon:"fa hs-apprule_colored",redirectTo:"/ApprovalRule/Index",visibleTo:[]},{moduleName:"Timer",name:"AuditRule",diaplayName:"AuditRule",icon:"fa hs-auditrule_colored",redirectTo:Pe+"/Audit/Index",visibleTo:[]},{moduleName:"Timer",name:"Break",diaplayName:"Break",icon:"fa fa-coffee",redirectTo:"/Break/Index",visibleTo:[]},{moduleName:"Timer",name:"CompanyHolidays",diaplayName:"companyholidays",icon:"fa hs-compholi_colored",redirectTo:"/CompanyHoliday/Index",visibleTo:[]},{moduleName:"Timer",name:"ManageTags",diaplayName:"ManageTags",icon:"fa fa-tags",redirectTo:Pe+"/Tag/Index",visibleTo:[]},{moduleName:"Timer",name:"WorkingDay",diaplayName:"WorkingDay",icon:"fa fa-calendar-o",redirectTo:Pe+"/WorkDay/Manage",visibleTo:[]},{moduleName:"Timer",name:"WorkingWeek",diaplayName:"WorkingWeek",icon:"fa fa-calendar-o",redirectTo:Pe+"/Week/manage",visibleTo:[]},{moduleName:"DocStorage",name:"ClientStorage",diaplayName:"ManageClientStorage",icon:"fa fa-server",redirectTo:"/UserStorage/ManageClient",visibleTo:[]},{moduleName:"DocStorage",name:"UserStorage",diaplayName:"ManageUserStorage",icon:"fa fa-user",redirectTo:"/UserStorage/Manage",visibleTo:[]},{moduleName:"DocStorage",name:"Tags",diaplayName:"ManageTags",icon:"fa fa-tags",redirectTo:"/Tag/Index",visibleTo:[]}],ke=[{groupName:"UserManagement",links:[{name:"Department",diaplayName:"Department",icon:"fa fa-users",redirectTo:"/Department/Index",app:"Current"},{name:"Designation",diaplayName:"Designation",icon:"fa fa-address-card",redirectTo:"/Designation/Index",app:"Current"},{name:"Location",diaplayName:"Location",icon:"fa fa-map-marker",redirectTo:"/Location/Index",app:"Current"},{name:"LoginAuthorization",diaplayName:"LoginAuthorization",icon:"fa fa-lock",redirectTo:"/LoginAuthorization/Index",app:"Current"},{name:"PassportInformation",diaplayName:"PassportInformation",icon:"fa fa-cog",redirectTo:"/Immigration/Index",app:"Default"},{name:"Role",diaplayName:"Role",icon:"fa fa fa-file",redirectTo:"/Role/Index",app:"Current"},{name:"User",diaplayName:"User",icon:"fa fa-user",redirectTo:"/User/Index",app:"Current"}]},{groupName:"CompanyManagement",links:[{name:"Announcement",diaplayName:"Announcement",icon:"fa fa-bullhorn",redirectTo:"/AnnouncementMessage/Index",app:"Current"},{name:"CompanyDirectory",diaplayName:"CompanyDirectory",icon:"fa-files-o",redirectTo:"/User/DirectoryListing",app:"Current"},{name:"ContextMenu",diaplayName:"ContextMenu",icon:"fa fa-sliders",redirectTo:"/CompanyAdmin/ViewContextMenu",app:"Default"},{name:"CompanyNotifications",diaplayName:"CompanyNotifications",icon:"fa fa-bell ",redirectTo:"/Notification/index",app:"Default"},{name:"Greeting",diaplayName:"Greeting",icon:"fa fa-thumbs-o-up",redirectTo:'/Greeting/Index"',app:"Current"},{name:"ManageSubscription",diaplayName:"ManageSubscription",icon:"fa fa-usb",redirectTo:"/Billing/Index",app:"Default"},{name:"OrganizationChart",diaplayName:"OrganizationChart",icon:"fa fa-bar-chart",redirectTo:"/OrganizationChart/OrgChart",app:"Current"},{name:"PasswordPolicy",diaplayName:"PasswordPolicy",icon:"fa fa-cog",redirectTo:"/Immigration/Index",app:"Default",app:"Current"},{name:"ProvisionalRight",diaplayName:"ProvisionalRight",icon:"fa-file-text-o",redirectTo:"/ProvisionalRight/Index",app:"Current"},{name:"Status",diaplayName:"Status",icon:"fa fa fa-star-half-o",redirectTo:"/Status/Index",app:"Current"},{name:"Storage",diaplayName:"Storage",icon:"fa fa-user-o",redirectTo:'/Storage/Index,app: "Current"'}]}],Me=async function(t){var e=[];return"ticketing"==t.toLowerCase()?await h.IsExtraMapFeature().then((function(a){e=$e.filter((function(e){return e.moduleName.toLowerCase()==t.toLowerCase()&&"undefined"!=typeof e.visibleTo&&1==e.visibleTo.includes(a.data)}))})):e=$e.filter((function(e){return e.moduleName.toLowerCase()==t.toLowerCase()})),e};var Ge={components:{configuration:T,moduleSetupPopup:Re},data:function(){return{isLoading:!0,userTypeId:3,moduleList:[],currentTab:"Appointment".toLowerCase(),moduleDisplayName:"Appointment",moreSettings:[],setupProgress:0,isOpenConfiguration:!1,isOpenSetupModule:!1,progressColor:"progress-bar progress-bar-striped bg-default",setupTabs:[],generalSettingList:ke}},created:function(){this.userTypeId="CA"==this.GetUserInfo.UserType?1:"PM"==this.GetUserInfo.UserType?2:"NU"==this.GetUserInfo.UserType?3:4,this.GetModuleList()},computed:{SetupProgresText(){return 0==this.setupProgress?"Not Started":100==this.setupProgress?"Completed":"In Progress"}},methods:{GetProgresSetupStatusDetail:function(){var t=this;t.setupProgress=0;var e="moduleName="+t.currentTab;t.setupTabs=[],s["a"].GetProgresSetupStatusDetail(e).then((function(e){if(e&&null!=e.data&&"Success"==e.data.status){var a=e.data.result,i=(100/a.length).toFixed(2);a.forEach((function(e){t.setupTabs.push({tabCode:e.COMPONENT_NAME,componentName:e.COMPONENT_NAME,displayName:e.DISPLAY_NAME,icon:e.ICON,isCompleted:e.IS_COMPLETED}),1==e.IS_COMPLETED&&(t.setupProgress+i<100?t.setupProgress+=i:t.setupProgress=100)}))}}))},CloseOpenSetupModule:function(){this.isOpenSetupModule=!this.isOpenSetupModule},CloseOpenConfigPopup:function(){this.isOpenConfiguration=!this.isOpenConfiguration},GetMoreSettings:function(){var t=this;Me(t.currentTab).then((function(e){t.moreSettings=e}))},SetCurrentTab:function(t,e){this.currentTab=t.toLowerCase(),this.moduleDisplayName=e,this.GetMoreSettings(),history.pushState(null,"","/AdvanceSetup/"+t),this.GetProgresSetupStatusDetail()},GetModuleList:function(){var t=this;s["a"].GetModuleList("?userTypeId="+t.userTypeId+"&isForAdvanceSetup=true").then((function(e){if(e&&null!=e&&null!=e.data&&(t.moduleList=e.data.Data),t.isBlank(t.$route.params.moduleCode)||"index"==t.$route.params.moduleCode.toLowerCase())t.currentTab=t.moduleList[0].module_name.toLowerCase(),t.moduleDisplayName=t.moduleList[0].module_name;else{var a=t.moduleList.filter(e=>e.module_name.toLowerCase()==t.$route.params.moduleCode.toLowerCase());t.currentTab=t.$route.params.moduleCode.toLowerCase(),t.moduleDisplayName=a[0].module_name}t.GetMoreSettings(),t.GetProgresSetupStatusDetail(),t.isLoading=!1}))},UpdateProgress:function(t,e){this.setupTabs[t-1].isCompleted=!0},RedirectTo:function(t){if("Current"==t.app){var e=""+t.redirectTo;this.$router.push({path:""+e})}else window.location.href="http://qatest.talygen.com"+t.redirectTo}}},Ue=Ge,Be=(a("dad2"),Object(f["a"])(Ue,i,n,!1,null,null,null));e["default"]=Be.exports},"2af0":function(t,e,a){"use strict";a("9ee6")},"2dfc":function(t,e,a){"use strict";a("57fe")},"30c0":function(t,e,a){"use strict";a("39f5")},"398d":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".vue-slider-dot-tooltip{position:absolute;visibility:visible}.vue-slider-dot-tooltip-inner{background-color:#505557;height:20px}.jslider .jslider-label{font-size:14px;line-height:12px;color:#000;opacity:.5;white-space:nowrap;padding:0 2px;position:absolute;top:-12px;left:91%}.vue-slider{height:5px!important;padding:30px 0}.vue-slider-dot-handle{width:18px!important;height:18px!important;top:-2px;left:-2px}.vue-slider-dot-tooltip-inner{font-size:12px}.vue-slider-dot-tooltip-text{font-weight:300}",""]),t.exports=e},"39f5":function(t,e,a){var i=a("398d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("cc890088",i,!0,{sourceMap:!1,shadowMode:!1})},"3faf":function(t,e,a){"use strict";a("8118")},"49f8":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".is-invalid[data-v-78e96ba3]{border-color:red}",""]),t.exports=e},"57fe":function(t,e,a){var i=a("1d22");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("7b831f91",i,!0,{sourceMap:!1,shadowMode:!1})},"72d6":function(t,e,a){var i=a("ea03");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("16366025",i,!0,{sourceMap:!1,shadowMode:!1})},8118:function(t,e,a){var i=a("e7f0");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("d3344e24",i,!0,{sourceMap:!1,shadowMode:!1})},"9ee6":function(t,e,a){var i=a("49f8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("4f88035a",i,!0,{sourceMap:!1,shadowMode:!1})},b95d:function(t,e,a){var i=a("1e1f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("703d55ba",i,!0,{sourceMap:!1,shadowMode:!1})},c5dd:function(t,e,a){var i=a("f6f2");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("a7845026",i,!0,{sourceMap:!1,shadowMode:!1})},d23c:function(t,e,a){"use strict";a("c5dd")},dad2:function(t,e,a){"use strict";a("e0e9")},e0e9:function(t,e,a){var i=a("0747");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("499e").default;o("31163f01",i,!0,{sourceMap:!1,shadowMode:!1})},e6c5:function(t,e,a){"use strict";a("b95d")},e7f0:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"#ProductTypeCode .form-group a{position:absolute;top:-24px;left:144px}.popup-overlay{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:9999;background-color:rgba(0,0,0,.5);width:100%;height:100%;display:flex;justify-content:center;align-items:center}.my-popups .modal{z-index:99999}",""]),t.exports=e},ea03:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".custom-control-label{text-transform:capitalize}",""]),t.exports=e},f6f2:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".table th[data-v-5b90790b]{position:relative}.resizer[data-v-5b90790b]{position:absolute;top:0;right:0;width:5px;cursor:col-resize;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}",""]),t.exports=e}}]);
//# sourceMappingURL=chunk-1ae18f49.js.map