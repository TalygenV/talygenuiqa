(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d229a07"],{ddf7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"CANNED_REPLY",RenderRowActionMethod:e.renderActions,IdentityColumn:"TICKET_ARTICLE_ID",HeaderText:e.$t("ManageArticles"),ListData:e.SAData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.FetchData,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["CREATED_AT"==a.column.COLUMN_NAME?[t("td",{staticClass:"text-center single-action tourguide_a"},[e._v(" "+e._s(e.$options.filters.formatDate(a.row.CREATED_AT))+" ")])]:e._e(),"STATUS_NAME"==a.column.COLUMN_NAME?[t("span",{class:e.getStatusClassList(a.row.STATUS_NAME,"STATUS_NAME")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")])]:e._e()]}}])}),e.IsMoveCopy?t("MovePopUp",{attrs:{performAction:e.performAction,articleIds:e.articleIds}}):e._e(),e.IsTransfer?t("TransferPopUp",{attrs:{performAction:e.performAction,articleIds:e.articleIds}}):e._e()],1)},s=[],r=(a("14d9"),a("9769"));let o=[{title:"Add",iconClass:"fa fa-plus",callbackfunction:"callAdd",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"AddPolicy"},{id:"Clone",title:"Clone",iconClass:"fa fa-copy",callbackfunction:"callClone",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0},{id:"Move",title:"Move",iconClass:"fa fa-arrows",callbackfunction:"callMove",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],l=[{fieldName:"Article",fieldType:"text",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:[""],paramName:"Title",isSearch:!1,value:"",listOptions:[]},{fieldName:"Category",fieldType:"radio",fieldIcon:"fa fa-tasks",fieldSearchConditionName:[""],paramName:"Category",isSearch:!1,value:"",listOptions:[]},{fieldName:"User",fieldType:"radio",fieldIcon:"fa fa-user",fieldSearchConditionName:[""],paramName:"userId",isSearch:!1,value:"",listOptions:[]},{fieldName:"Short Description",fieldType:"text",fieldIcon:"fa fa-file",fieldSearchConditionName:[""],paramName:"KeyWords",isSearch:!1,value:"",listOptions:[]},{fieldName:"Date From",fieldType:"date",fieldIcon:"fa fa-calendar",paramName:"CreatedDateFrom",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]},{fieldName:"Date To",fieldType:"date",fieldIcon:"fa fa-calendar",paramName:"CreatedDateTo",fieldSearchConditionName:[""],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]},{fieldName:"Status",fieldType:"radio",fieldIcon:"fa fa-circle-o-notch",fieldSearchConditionName:[""],paramName:"StatusId",isSearch:!1,value:"",listOptions:[]}],n=[{title:"View",href:"javascript:void(0)",callbackfunction:"ClickOnView",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Edit",href:"javascript:void(0)",icon:"fa fa-pencil action-icon",callbackfunction:"EditArticle",additionalSpan:""},{title:"Transfer",href:"javascript:void(0)",icon:"fa fa-exchange text-secondary action-icon",callbackfunction:"TransferArticle",additionalSpan:""}];async function c(e,t,a){var i=this;if("Status"==a){var s="type=KnowledgeBase";r["a"].GetDDLData(s).then(e=>{if(e.data.DATA.length>0){i.leftsearchSchema[6].listOptions=[];var t=e.data.DATA;t.forEach(e=>{var t={name:e.name,value:e.value};i.leftsearchSchema[6].listOptions.push(t)})}})}if("Category"==a&&r["a"].GetCategoryDDL().then(e=>{if(e.data.result.length>0){var t=e.data.result;i.leftsearchSchema[1].listOptions=[],t.forEach(e=>{if(null==e.TICKET_ARTICLE_CATEGORY_PARENT){let t={name:e.TICKET_ARTICLE_CATEGORY_NAME,value:e.TICKET_ARTICLE_CATEGORY_ID};i.leftsearchSchema[1].listOptions.push(t)}})}}),"Users"==a){s="moduleName=KnowledgeBase";r["a"].GetUsersByCompanyId(s).then(e=>{if(JSON.parse(e.data.result).length>0){i.leftsearchSchema[2].listOptions=[];var t=JSON.parse(e.data.result);t.forEach(e=>{var t={name:e.USERNAME,value:e.USER_ID};i.leftsearchSchema[2].listOptions.push(t)})}})}}var d={buttons:o,leftsearchSchema:l,listActions:n,bindleftCommonSearchdropdown:c},h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.performAction))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{ref:"AddMove",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},u=[],f={props:{performAction:{type:String,required:!0},articleIds:{type:String,required:!0}},data(){return{FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("Category"),name:"Category",value:"",config:{options:[]},placeholder:this.$t("Category"),validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:function(){this.GetCategory()},methods:{GetCategory:function(){var e=this;r["a"].GetCategoryDDL().then(t=>{if(t.data.result.length>0){var a=t.data.result;e.FormSchema[0].Data[0].config.options=[];a.find(e=>null==e.TICKET_ARTICLE_CATEGORY_PARENT);a.forEach(t=>{if(null==t.TICKET_ARTICLE_CATEGORY_PARENT){let a={name:t.TICKET_ARTICLE_CATEGORY_NAME,value:t.TICKET_ARTICLE_CATEGORY_ID};e.FormSchema[0].Data[0].config.options.push(a)}})}this.$refs.AddMove.UpdateKeyValue()})},Close:function(){this.$parent.IsMoveCopy=!1},onSubmit(e,t){var a=this;e.Category,a.articleIds,a.performAction;if(""!=e.Category){var i=`categoryId=${e.Category}&articleIds=${a.articleIds}&performAction=${a.performAction}`;r["a"].CopyandMoveArticles(i).then(e=>{"1"==e.data.result&&("Move"==a.performAction?a.ShowAlert(a.$t("ArticleMoved",[a.$t("Article")]),"Success",!0,a.$t("Alert")):a.ShowAlert(a.$t("Articlecopied",[a.$t("Article")]),"Success",!0,a.$t("Alert")),a.$parent.FetchData(),a.Close())})}else a.ShowAlert(a.$t("SelectCategoryFirst"),"warning",!0,a.$t("Alert"))}}},A=f,m=a("2877"),p=Object(m["a"])(A,h,u,!1,null,null,null),C=p.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.performAction))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{ref:"AddTransfer",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},T=[],E={props:{performAction:{type:String,required:!0},articleIds:{type:String,required:!0}},data(){return{FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("User"),name:"User",value:"",config:{options:[]},placeholder:this.$t("User"),validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:function(){this.GetUsersByCompanyId()},methods:{GetUsersByCompanyId:function(){var e="moduleName=KnowledgeBase";r["a"].GetUsersByCompanyId(e).then(e=>{if(JSON.parse(e.data.result).length>0){var t=JSON.parse(e.data.result);t.forEach(e=>{var t={name:e.USERNAME,value:e.USER_ID};this.FormSchema[0].Data[0].config.options.push(t)})}this.$refs.AddTransfer.UpdateKeyValue()})},Close:function(){this.$parent.IsTransfer=!1},onSubmit(e,t){var a=this;if(""!=e.Category){var i=`categoryId=${e.User}&articleIds=${a.articleIds}&performAction=${a.performAction}`;r["a"].CopyandMoveArticles(i).then(e=>{"1"==e.data.result&&("TRANSFAR"==a.performAction&&a.ShowAlert(a.$t("TransferSuccess",[a.$t("Article")]),"Success",!0,a.$t("Alert")),a.$parent.FetchData(),a.Close())})}else a.ShowAlert(a.$t("SelectCategoryFirst"),"warning",!0,a.$t("Alert"))}}},g=E,b=Object(m["a"])(g,S,T,!1,null,null,null),I=b.exports,v={components:{MovePopUp:C,TransferPopUp:I},data(){return{isLoading:!1,listheaderbuttons:d.buttons,leftSearchFields:d.leftsearchSchema,listActions:d.listActions,Headers:[{COLUMN_NAME:"TICKET_ARTICLE_TITLE",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Article Title",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKET_ARTICLE_CATEGORY_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Category",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKET_ARTICLE_KEYWORDS",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Short Description",DISPLAY_ORDER:1},{COLUMN_NAME:"USER_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Assign To",DISPLAY_ORDER:2},{COLUMN_NAME:"STATUS_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2,settings:{isInSlot:!0}},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created At",DISPLAY_ORDER:2,settings:{isInSlot:!0}}],SAData:[],SortBy:"",SortExp:"",TotalRecords:0,PageNumber:1,PageSize:10,searchCondition:"",IsMoveCopy:!1,performAction:"",articleIds:null,IsTransfer:!1,usertype:null}},created:async function(){this.FetchData(),await d.bindleftCommonSearchdropdown(this,"Ticketing","Status"),await d.bindleftCommonSearchdropdown(this,"Ticketing","Category"),await d.bindleftCommonSearchdropdown(this,"Ticketing","Users"),this.usertype=this.GetUserInfo.UserType,this.ManageLeftSearchFields()},methods:{ManageLeftSearchFields:function(){if("NU"==this.usertype){var e=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"User"==e.fieldName));e>-1&&this.leftSearchFields.splice(e,1)}},FetchData:function(){var e=this;e.isLoading=!0;var t=`SortBy=${e.SortBy}&SortExp=${e.SortExp}&PageSize=${e.PageSize}&PageNumber=${e.PageNumber}&${e.searchCondition}`;r["a"].GetArticleListing(t).then(t=>{"Success"==t.data.status&&(e.isLoading=!1,t.data.result.length>0?(e.SAData=t.data.result,e.TotalRecords=t.data.result[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.listheaderbuttons[1].isdisabled=!0,e.listheaderbuttons[2].isdisabled=!0,e.listheaderbuttons[3].isdisabled=!0):e.SAData=[])})},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"callClone":this.ActionOnArticle("Copy");break;case"commonDeleteData":this.DeleteMultiple();break;case"callMove":this.ActionOnArticle("Move");break;case"callAdd":this.CreateArticle();break}},ActionOnArticle:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&(t.performAction=e,t.IsMoveCopy=!0,t.articleIds=a)},CreateArticle:function(){this.$router.push({name:"CreateArticle",params:{id:0}})},EditManageArticle:function(e){this.$router.push({name:"CreateArticle",params:{id:e}})},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;case"View":t.isVisible=!0;break;case"Transfer":t.isVisible=!0;break;default:t.isVisible=!0}a.push(t)}),a},DeleteMultiple:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Article"),(function(){var e={ids:a,companyId:t.companyId,userId:t.user_id,moduleName:"KnowledgeBase",refCode:"TALYGEN_ticket_article"},i=JSON.stringify(e);r["a"].deleteActivityData(i).then(e=>{var a="";"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteMultiple']").removeClass("enable").addClass("disabled"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.FetchData(),a=t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Article")]),"Success",!0,t.$t("Alert"))):a=t.ShowAlert(t.$t("DeletedError",[t.$t("Article")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)})})):alert(t.$t("Selectanyrecordtodelete"))},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchConditionJson?this.searchCondition=e.searchConditionJson:this.searchCondition="",this.FetchData()},actionButtonClick:function(e,t,a,i){switch(e){case"TransferArticle":this.TransferArticle(t);break;case"EditArticle":this.EditManageArticle(t.TICKET_ARTICLE_ID);break;case"ClickOnView":this.ClickOnView(t.TICKET_ARTICLE_ID);break}},getStatusClassList:function(e){var t="";switch(e){case"UnPublish":t="px-2 text-center bg-danger text-white d-block";break;case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Published":t="px-2 bg-primary text-center text-white d-block";break;case"Draft":t="px-2 text-center bg-warning text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;default:t=""}return t},ClickOnView:function(e){this.$router.push({name:"ArticleDetails",params:{id:e}})},TransferArticle:function(e){var t=this;t.performAction="TRANSFER",t.IsTransfer=!0,t.articleIds=e.TICKET_ARTICLE_ID},sortdata:function(e){this.SortBy=e;var t="ASC";"ASC"==this.SortExp&&(t="DESC"),this.SortExp=t,this.SortBy=e,this.SortExp=t,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchData()}}},_=v,y=Object(m["a"])(_,i,s,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d229a07.js.map