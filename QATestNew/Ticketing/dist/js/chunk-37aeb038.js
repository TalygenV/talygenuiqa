(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37aeb038"],{"0c69":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoteList.length>0?[e("div",{staticClass:"row card-view no-bg custom-box-width"},t._l(t.NoteList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[e("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?e("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:t.$t("Image")}}):e("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),e("div",{staticClass:"card-detail-main1 dynamiclistol"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.CREATED_BY_NAME))])]),e("hr",{staticClass:"my-2"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"150px","overflow-y":"auto"}},[e("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:t._s(a.NOTE)}})])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.CREATED_AT?t.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),e("div",{staticClass:"card-action"},[a.TICKET_ATTACHMENT_ID>0?e("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})]):t._e(),1!=t.ListNoteData?e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:t.$t("EditNotes"),alt:t.$t("EditNotes"),href:"javascript:;"},on:{click:function(e){return t.EditNote(a)}}},[e("em",{staticClass:"fa fa-edit"})]):t._e()])])])])})),0)]:t._e(),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center d-block no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)},s=[],o=a("9769"),r={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(t){var e=this;e.NoteList=t,e.NoteList.length>0?e.NoRecords=!1:(e.NoteList=[],e.NoRecords=!0)}},created(){setTimeout(()=>{var t=this;t.UserId=t.GetUserInfo.ID,t.ListNoteData=this.ListNoteData,t.isBlank(t.NoteData)?(t.NoRecords=!0,t.NoteList=[]):(t.NoteList=t.NoteData,t.NoRecords=!1)},500)},methods:{EditNote:function(t){var e=this;e.$parent.noteId=t.NOTE_ID,e.$parent.ticketId=t.TICKET_ID,e.$parent.note=t.NOTE,e.$parent.privacy=t.PRIVACY,e.$parent.ATTACHMENT_NAME=t.ATTACHMENT_NAME,e.$parent.ATTACHMENT_PATH=t.ATTACHMENT_PATH,e.$parent.isShowAddNote=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.ATTACHMENT_PATH}&fileName=${t.ATTACHMENT_NAME}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.ATTACHMENT_DESC).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.ATTACHMENT_NAME),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},n=r,l=a("2877"),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},1890:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageIncident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddEditIncidentType"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},s=[],o=a("9769"),r={props:{IncidentTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){},methods:{FetchData:function(){var t=this,e="Id="+t.IncidentTypeId;o["a"].FetchDataByIncidentId(e).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&(t.FormSchema[0].Data[0].value=e.data.result.DATA[0].TYPE_NAME,t.FormSchema[0].Data[1].value=e.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$emit("close","SRSM"),this.$parent.showReportIncidentModal=!1},onSubmit(t,e){var a=this,i={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:t.IncidentType,ParentIncidentId:"",ModuleName:"FSM",StatusId:1001,Description:t.DESCRIPTION},s=JSON.stringify(i);o["a"].SaveIncidentType(s).then(t=>{"Success"==t.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.GetDDLData()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},n=r,l=a("2877"),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"3e91":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachment")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddAttachment"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SaveAttachment}})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),r={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(t){try{var e=this;e.AttachmentfileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.AttachmentfileName=o;var r=o.lastIndexOf("."),n=o.substring(r+1,o.length);e.AttachmentfileExt+="."+n;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',d=a.size;e.AttachmentfileSize=d;var c={attachement_mime:l,fileName:o,id:0==e.id||null==e.id?e.TicketAttachmentId:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:s,fileSize:d};e.AttachmentfileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?(this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE,this.FormSchemaData[0].Data[1].config.maxSize=this.allowedPerFileSizeInMb):"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var t=this;t.buttons[0].class+=" disabled";var e=t.disallowFileTypes.split(",");e.includes(t.AttachmentfileExt)?(t.checkFileValidExt=!1,t.ShowAlert(t.$t("InvalidFileUploadMsg",t.fileName,t.disallowFileTypes),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidExt=!0;var a=this.SizeToMb(t.AttachmentfileSize);if(a>parseInt(t.allowedPerFileSizeInMb,10)?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidSize=!0,a<0?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidSize=!0,1==t.checkFileValidExt&&1==t.checkFileValidSize){var i=JSON.stringify(t.AttachmentfileData);o["a"].UploadFile(i).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.Status?(t.ShowAlert(t.$t("Attachment successfully added"),"success",!0,t.$t("Alert")),t.DisplayName="",t.FileSrc="",$("input[type=text]").val(""),t.$emit("FetchAttachmentData"),t.$parent.noRecord=!1,t.Close(),t.callbackfunction()):(t.FileSrc="",t.buttons[0].class="btn btn-success",$("input[type=text]").val(""))},(function(t){}))}},Close:function(){var t=this;t.FormSchemaData[0].Data[0].value=null,t.AttachmentfileName="",t.Attachmentfile=null,t.AttachmentfileData=null,t.FormSchemaData[0].Data[1].config.onChange=t.GetBase64String,t.$parent.showAttachmentModal=!1,"Attachments"==t.viewMode?document.getElementById("tab-attachment").click():t.$parent.FetchAttachmentData(),t.$parent.noRecord=!1}}},n=r,l=a("2877"),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"42e5":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal d-block my-popups dialog"},[e("div",{staticClass:"modal-dialog mw-1000"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("div",{attrs:{name:"headerForModal"}},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Form")))])]),e("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body setheight"},[t._l(t.GroupsOfFields,(function(a,i){return[e("div",{staticClass:"col-lg-12 mb-3 px-0"},[a.header_name?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5",class:{"text-left":"left"==a.headerPositionType,"text-center":"center"==a.headerPositionType,"text-right":"right"==a.headerPositionType}},[e("span",[t._v(t._s(a.header_name))])])]):t._e()]),t._l(a.SectionData,(function(a,i){return e("div",{staticClass:"row pl-3 pr-0"},[e("div",{staticClass:"col-lg-12 mb-3"},[t.GetLocalizedValue(a.group_name,a.group_display_name)?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v(t._s(t.GetLocalizedValue(a.group_name,a.group_display_name)))])])]):t._e()]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 d-flex flex-wrap"},t._l(a.FormFieldData,(function(s,o){return e("div",{key:o,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==s.form_field_visibility,"col-lg-12 col-xl-12":"single"==s.layout_type,"col-lg-6 col-xl-6":"double"==s.layout_type,"col-lg-4 col-xl-4":"triple"==s.layout_type,"col-lg-3 col-xl-3":"four"==s.layout_type},attrs:{id:s.name}},["NO"==s.form_field_visibility?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],attrs:{type:"hidden",id:s.name},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}):t._e(),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.GetLocalizedValue(s.label,s.display_name))+":"),1==s.is_required?e("span",{class:{"text-danger":1==s.is_required}},[t._v("*")]):t._e()]),t.isBlank(s.user_guide)?t._e():e("a",{attrs:{href:"javascript:;",tabindex:-1,"data-toggle":"popoveruserguide","data-content":t.GetLocalizedValue(s.user_guide)}},[e("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 float-left"},["img"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],ref:"file",refInFor:!0,class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{type:"file",id:"file",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){return t.handleFileUpload(e,s)}}})]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"img"==s.dt_code?e("div",{staticClass:"mt-2",attrs:{id:"divimagedisplayImageId"}},[s.value.bass64?e("div",[e("img",{staticClass:"img-fluid mb-2",staticStyle:{"max-height":"99px",width:"auto"},attrs:{src:s.value.bass64,alt:"Logo",width:"200",height:"150"}})]):t._e()]):t._e(),"date"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("DatePicker",{class:{"input-group w-100":!0,"is-invalid":i[0]},staticStyle:{"flex-wrap":"nowrap"},attrs:{is24hr:t.is24hr,mode:t.mode,disabled:s.disabled,masks:t.masks,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function({inputValue:o,inputEvents:r,togglePopover:n}){return[e("input",t._g({ref:"inputDatePicker",refInFor:!0,class:{"form-control w-100":!0,"is-invalid":i[0]},attrs:{autocomplete:"off",disabled:s.disabled,name:s.name,placeholder:s.label},domProps:{value:o},on:{blur:function(e){return t.onBlur(e,a)}}},r)),e("div",{staticClass:"input-group-append"},[e("span",t._g({staticClass:"input-group-text"},s.disabled?null:r),[e("i",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i[0],expression:"errors[0]"}],ref:"errrorMessage",refInFor:!0,staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))])]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"date"!=s.dt_code&&"radio"!=s.dt_code&&"select"!=s.dt_code&&"textarea"!=s.dt_code&&"checkbox"!=s.dt_code&&"phone"!=s.dt_code&&"img"!=s.dt_code&&"signature"!=s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{readonly:t.isforshow,type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"textarea"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("textarea",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model.trim",value:s.value,expression:"item.value",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":"textarea"==s.dt_code&&i.length>0},attrs:{type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"phone"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"col-md-12 col-sm-12 col-lg-12 p-0"},[e("vue-phone-number-input",{attrs:{name:s.name,"no-use-browser-locale":!0},on:{update:function(e){return t.GetPhoneNumber(s,e,"spanPhone"+o)}},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{staticClass:"invalid-feedback",staticStyle:{display:"none"},attrs:{id:"spanPhone"+o}},[t._v("Enter valid number.")])],1)]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&2==t.MakeArray(s.picklist_options,s.dt_code).length?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled,tabindex:"5"},domProps:{value:s.value,checked:t.makeCheckBoxSelected(t.MakeArray(s.picklist_options,s.dt_code),s.value,"toggle")},on:{change:function(e){t.AssignToggleValues(e,s,t.MakeArray(s.picklist_options,s.dt_code),i,o)}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[0].name))]),e("span",{staticClass:"slider-no"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[1].name))])])])]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&!s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"HorizantalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"form-check form-check-inline"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.name+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])])})),0),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"VerticalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"form-group"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.custom_field_id+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+s.custom_field_id+"_"+a.value}},[t._v(" "+t._s(a.name)+" ")])])})),0)]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:1==s.dependent_show_type?t.GetValidation(s):"",expression:"item.dependent_show_type == 1 ? GetValidation(item) : ''"}],class:{"custom-vselect":1==t.vSelectValidate,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type&&i.length>0},attrs:{label:"name",filterable:!1,name:s.name,placeholder:t.GetFieldPlaceHolder(s.label,s.display_name,s.dt_code),value:s.value,options:s.select_options,checkvalue:s.value,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{search:function(e){return t.onSearch(e,s)},"@input":function(e){return t.setSelectedValue(s,e)}},scopedSlots:t._u([{key:"option",fn:function(a){return[e("div",{staticClass:"d-center"},[t._v(" "+t._s(a.name)+" ")])]}},{key:"selected-option",fn:function(a){return[e("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.name)+" ")])]}}],null,!0),model:{value:s.select_value,callback:function(e){t.$set(s,"select_value",e)},expression:"item.select_value"}},[e("template",{slot:"no-options"},[t._v(" "+t._s(t.$t("TypeTosearch"))+" "+t._s(t.GetLocalizedValue(s.label,s.display_name))+" ")])],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:i,errors:o}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type&&o.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),"mousedown.native":"onKeyDown1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])},function(e){t.FillDropdown(s,null),t.onchangechannel(s,a.LeadData)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(s.select_options),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"select"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&"select"==s.dt_code&&i.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"CA"==t.UserType?e("div",{staticClass:"ml-2 mt-1"},[1==s.isPlusIcon?e("a",{staticClass:"round-icon-small btn-dark theme-primary"},["industry_type_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddIndustrypopup(s)}}}):t._e(),"channel_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddLeadSourcepopup(s)}}}):t._e(),"role_title_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddRoleTitlepopup(s)}}}):t._e()]):t._e()]):t._e()],2)])])])})),0)])}))]})),0==t.isforshow?e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-success formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SubmitData()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),e("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])]):t._e()],2)])])])])],1)},s=[],o=(a("14d9"),a("d91b"),a("9769")),r=a("d5da"),n={components:{DatePicker:r["DatePicker"]},props:{isforshow:{type:Boolean,required:!0},formIdForShow:{type:String,required:!0},moduleName:{type:String,required:!0},subModuleCode:{type:String,required:!0},workOrderId:{type:String,required:!0},subStatusId:{type:String,required:!0},listForSubmittedForm:{type:Array,required:!0},propFormId:{required:!0},callbackfunction:{type:Function}},data(){return{WorkOrderId:0,FormId:null,FormFieldData:[],isLoading:!1,GroupsOfFields:[],ApiURL:null,UserType:"",containername:""}},created(){var t=this;t.UserType=t.GetUserInfo.UserType,t.containername=t.GetUserInfo.ContainerName,t.FormId=t.formIdForShow,t.FetchData()},methods:{makeCheckBoxSelected:function(t,e,a){return"string"==typeof t&&(t=t.split(",")),"toggle"==a?t[1].value==e:!!t.includes(e)},onChangeCheckBox:function(t,e,a){"string"==typeof t.value&&(t.value=t.value.split(",")),1==a.target.checked?t.value.push(e):t.value.splice(t.value.indexOf(e),1)},Close:function(){var t=this;t.$parent.ShowWorkOrderStatusForm=!1,t.$emit("Close")},FetchData:function(){var t=this;t.isLoading=!0;var e=`id=${t.FormId}&moduleName=${t.moduleName}&subModuleCode=${t.subModuleCode}&otherData=${t.workOrderId}&subStatusId=${t.subStatusId}&isForLog=`+t.isforshow;o["a"].GetFormById(e).then((function(e){if(t.listForSubmittedForm.length>0){var a=t.listForSubmittedForm.filter(e=>e.formId==t.FormId&&null!=e.formSubnittedId&&1==e.hasOwnProperty("SaveFormJSON"));a.length>0?t.FormFieldData=a[0].SaveFormJSON:0==t.formIdForShow||"0"==t.formIdForShow?(t.FormFieldData,t.listForSubmittedForm.forEach((e,a)=>{t.FormFieldData.push(e.obj)})):t.FormFieldData=e.data.data}else t.FormFieldData=e.data.data;null!=t.FormFieldData&&t.FormFieldData.length>0&&$.each(t.FormFieldData,$.proxy((function(e,a){if("img"==a.dt_code){var i={fieldType:"FileUpload",fileName:"",length:"",fileType:"",containerName:t.containername,id:t.FormId,bass64:a.value};a.value=i}"checkbox"==a.dt_code&&(a.select_value=[]);var s=a.headerId,o=$.grep(t.GroupsOfFields,(function(t,e){return t.headerId==s}));if(0==o.length){var r={headerId:a.headerId,header_name:a.HeaderName,header_DisplayOrder:a.header_DisplayOrder,headerPositionType:a.headerPositionType,SectionData:[]},n=$.grep(t.FormFieldData,(function(t,e){return t.headerId==s}));$.each(n,$.proxy((function(e,a){var i=a.group_id,s=$.grep(r.SectionData,(function(t,e){return t.group_id==i}));if(0==s.length){var o=$.grep(n,(function(t,e){return t.group_id==i})),l={group_id:i,group_name:a.group_name,LayoutType:a.layout_type,group_display_name:t.GetLocalizedValue(a.group_name,a.group_display_name),group_is_system_generated:a.group_is_system_generated,FormFieldData:o};r.SectionData.push(l)}}),this)),t.GroupsOfFields.push(r),console.log("vm.GroupsOfFields",t.GroupsOfFields)}}),this)),setTimeout((function(){t.RadioButtonBootstrap()}),100),setTimeout((function(){t.isLoading=!1}),500)}))},SubmitData:function(t){var e=this;e.submited=!0,e.isLoading=!0;var a=e.FormFieldData,i=[],s=0;if($.each(a,(function(t,a){var o=a.value;if("date"==a.dt_code&&(o=a.value),"contact_number"==a.name||"home_phone"==a.name||"business_phone"==a.name){var r=e.phoneList.filter(t=>t.field_id==a.custom_field_id);r.length>0&&(a.value=$.trim(r[0].value),o=$.trim(r[0].value),0==r[0].isValid&&$.trim(a.value).length>0&&s++)}if("checkbox"==a.dt_code&&(o=String(a.value)),"select"==a.dt_code)try{o="object"===typeof o&&null!==o?o.value:o}catch(l){}var n={field_name:a.name,field_value:o,custom_field_id:a.custom_field_id,dt_code:a.dt_code};console.log("dataObject1",n),i.push(n)})),s>0)return e.isLoading=!1,e.submited=!1,!1;var r={data:i,formId:e.FormId,refId:e.workOrderId,subModuleCode:e.subModuleCode},n=JSON.stringify(r);o["a"].SaveUserFormData(n).then((function(t){e.ShowAlert(t.data.msg,"success",!0,e.$t("Alert")),$.each(e.listForSubmittedForm,(function(i,s){s.formId==e.FormId&&(s.formSubnittedId=t.data.returnId,s.SaveFormJSON=a)})),e.submited=!1,e.Close(),e.callbackfunction(),setTimeout((function(){e.isLoading=!1}),500)}))},AssignToggleValues:function(t,e,a,i,s){var o=this,r="";if(t.target.checked){r=a[1].value;var n=$.grep(a,(function(t,e){return"yes"==String(t.value).toLowerCase()||"1"==String(t.value).toLowerCase()||"true"==String(t.value).toLowerCase()||"public"==String(t.value).toLowerCase()}));null!=n&&n.length>0&&(r=n[0].value)}else{r=a[0].value;n=$.grep(a,(function(t,e){return"no"==String(t.value).toLowerCase()||"0"==String(t.value).toLowerCase()||"false"==String(t.value).toLowerCase()||"private"==String(t.value).toLowerCase()}));null!=n&&n.length>0&&(r=n[0].value)}"0"==r||"no"==r.toLowerCase()?r=!1:"1"!=r&&"yes"!=r.toLowerCase()||(r=!0),e.value=r,o.showDependentItem(e,r,i,s)},handleFileUpload:function(t,e){var a=this;this.selectedFile=t.target.files[0];var i={fieldType:"FileUpload",fileName:t.target.files[0].name,length:t.target.files[0].size,fileType:t.target.files[0].type,containerName:a.containername,id:a.FormId},s=new FileReader;s.readAsDataURL(this.selectedFile),s.onload=()=>{i.bass64=s.result,e.value=i},console.log("selectedFile1",i)}}},l=n,d=a("2877"),c=Object(d["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"5a15":function(t,e,a){var i=a("a348");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("15676fe0",i,!0,{sourceMap:!1,shadowMode:!1})},"5c42":function(t,e,a){var i=a("f5f8");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("f91bac12",i,!0,{sourceMap:!1,shadowMode:!1})},6481:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Notes")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" "+t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddNotes"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithNote},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{class:{"is-invalid":""!=a.error},attrs:{editor:t.editor},model:{value:t.noteDescription,callback:function(e){t.noteDescription=e},expression:"noteDescription"}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a.error))])]}}])})],1)])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),r={props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"",ticketType:"",noteDescription:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:5e3}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],showSelectedFiles:[],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;if(this.configData(),t.$parent.noteId>0){t.TicketNoteId=t.$parent.noteId,t.ticketId=t.$parent.ticketId,t.noteDescription=t.$parent.note,t.FormSchema[1].Data[0].value="Private"==t.$parent.privacy?1:2;var e={attachmentName:t.$parent.ATTACHMENT_NAME,attachmentPath:t.$parent.ATTACHMENT_PATH};null!=e.attachmentName&&null!=e.attachmentPath&&t.FormSchema[2].Data[0].config.showSelectedFiles.push(e)}},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onDeleteSelectedFiles:function(t){this.$delete(this.FormSchema[2].Data[0].config,"showSelectedFiles")},onChangeRadio:function(t,e){var a=this;a.ticketType=t.target.dataset.value},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),n=o.substring(r+1,o.length);e.fileExt+="."+n;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',d=a.size;e.fileSize=d;var c={attachement_mime:l,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(t,e){var a=this;if(a.buttons[0].class+=" disabled",""==a.noteDescription||null==a.noteDescription)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",[a.fileName,a.disallowFileTypes]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a.noteDescription,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var r=JSON.stringify(a.ticketModel);o["a"].AddNote(r).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.$emit("LoadNoteForQuickView"),a.Close(),a.callbackfunction()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success",a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){var t=this;t.noteDescription=null,t.FileName=null,t.file=null,t.FormSchema[2].Data[0].config.onChange=t.GetBase64String,this.$emit("Close"),t.$parent.isShowAddNote=!1,t.$parent.noteId=0,"Notes"==t.viewMode?document.getElementById("tab-notes").click():t.$parent.LoadNotesForQuickView(),t.$parent.noRecord=!1}}},n=r,l=(a("e558"),a("2877")),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"78f9":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TimeTrack")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{ref:"WorkOrderTimerModal",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithTime},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},s=[],o=(a("14d9"),a("9769")),r=(a("d91b"),{props:{id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,Disabled:0,FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("WorkOrder"),name:"WorkOrder",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){this.GetDDLData("FSM_TRACK_HISTORY")},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetDDLData:async function(t){var e=this,a=`id=${e.id}&moduleName='TICKETING'&type=`+t;e.isLoading=!0,await o["a"].GetDDLDataFSM(a).then((function(t){"Success"==t.data.status&&(t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}),e.$refs.WorkOrderTimerModal.UpdateKeyValue(),e.isLoading=!1)}))},urlChange:function(){const t=Object.assign({},this.$route.query);t.reload="reload",this.$router.push({query:t})},UploadFileWithTime:function(t,e){var a=this,i={TicketId:a.id,WorkOrderId:a.FormSchema[0].Data[0].value,TrackDescription:a.FormSchema[1].Data[0].value,IsBillable:!0,TrackId:0,RequestFor:"FSM",RequestForType:"START",IPAddress:"",WorkOrderSubject:a.FormSchema[0].Data[0].name},s=JSON.stringify(i);a.confirmR(a.$t("ConfirmTimerMsg"),!0,a.$t("StartTimer"),(function(t){a.Disabled=1,o["a"].SaveTrackHistory(s).then(t=>{try{"Success"==t.data.status?(a.$parent.ShowTimer=!0,a.$parent.AddEditText="Edit",a.Disabled=0,a.urlChange(),a.ShowAlert(a.$t("AddedSuccess",[a.$t("TimeTrack")]),"success",!0,a.$t("Alert")),a.Close(),"Timer"==a.viewMode&&document.getElementById("tab-ticketdetails").click()):(a.ShowAlert(a.$t("AddedError",[a.$t("TimeTrack")]),"failure",!0,a.$t("Alert")),a.Disabled=0,a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.$emit("Close"),t.FormSchema[0].Data[0].value=null,t.FormSchema[1].Data[0].value=null,t.$parent.isShowWOTimer=!1}}}),n=r,l=a("2877"),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"7b9c":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageSubIncident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddEditSubIncidentType"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},s=[],o=a("9769"),r={props:{IncidentTypeId:{type:Number,required:!0},ticketId:{required:!1}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("ParentIncidentType"),name:"ParentIncidentType",value:"",placeholder:"",config:{options:[]},validationRules:{required:!0}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.ticketId>0?t.GetDDLData("FSM_INCIDENT",t.ticketId):t.GetDDLData("FSM_INCIDENT",0),t.IncidentTypeId>0&&this.FetchData()},methods:{GetDDLData:async function(t,e){var a=this;if(e>0)var i=e;else i=void 0==a.IncidentTypeId?0:a.IncidentTypeId;var s=`id=${i}&moduleName=FSM&type=${t}`;o["a"].GetDDLDataFSM(s).then(t=>{this.FormSchema[0].Data[1].config.options=t.data.result.DATA})},FetchData:function(){var t=this,e="Id="+t.IncidentTypeId;o["a"].FetchDataByIncidentId(e).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&(t.FormSchema[0].Data[0].value=e.data.result.DATA[0].TYPE_NAME,t.FormSchema[0].Data[1].value=e.data.result.DATA[0].PARENT_ID,t.FormSchema[0].Data[2].value=e.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$emit("close","SRSM"),this.$parent.showSubIncidentModal=!1},onSubmit(t,e){var a=this,i={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:t.IncidentType,ParentIncidentId:t.ParentIncidentType,ModuleName:"FSM",StatusId:1001,Description:t.DESCRIPTION},s=JSON.stringify(i);o["a"].SaveIncidentType(s).then(t=>{"Success"==t.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.GetDDLData(),a.$parent.FetchRecords()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},n=r,l=a("2877"),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},a348:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"div#video_player_box{width:46%;background:#000;margin:11px;float:left;height:499px;margin-bottom:63px}div#video_controls_bar{background:#333;padding:10px;color:#ccc;position:absolute;bottom:0;width:100%}div#appTitle{position:absolute;top:0;left:0;right:0;width:100%;box-shadow:0 0 5px 1px #000;background-color:rgba(40,40,40,.85);font-weight:700;line-height:45px;border-bottom:1px solid #111;color:#fff}div#appTitle span#appName{padding-left:10px}div#appTitle span.sample{font-weight:400;font-size:smaller;font-style:italic}.axisLine line,.axisLine path{fill:none;stroke:#fff;shape-rendering:crispEdges}.axis{font:10px sans-serif;-webkit-user-select:none;-moz-user-select:none;user-select:none}.axis .domain{fill:none;stroke:#000;stroke-width:10px;stroke-linecap:round}.axis .halo{fill:none;stroke:#ddd;stroke-width:7.5px;stroke-linecap:round}.slider .handle{stroke:#111;stroke-opacity:.5;stroke-width:1.25px;pointer-events:none}.dIntroText{text-anchor:middle;fill:#282828;cursor:pointer}a.dIntroText{font-family:sans-serif;font-size:24px;text-decoration:inherit;color:#000}div#intro div *{font-family:sans-serif;font-size:13px;font-style:italic}.dDataDropZone{height:500px;float:right;margin:10px;border:3px solid #666;width:50%;opacity:1}.dDataDropZone svg{width:100%}.dDataDropZone.dropping{opacity:.3;box-shadow:inset 0 -15px 50px 50px #282828}div#chartGroup{position:absolute;width:720px;margin:0 auto;bottom:0;left:50%}svg.dataChart path.chartLine{fill:none;shape-rendering:auto;stroke:#000;stroke-width:1px}svg.dataChart circle.chartCircle{fill:#de2d26;stroke-width:1;stroke:#000}svg.dataChart text.chartCircleText{font:8pt sans-serif;fill:#de2d26;text-shadow:1px 1px 0 #000,0 1px 0 #000}svg.dataChart g.chartAxis text{font:8pt sans-serif;fill:#555}svg.dataChart g.chartAxis path{display:none}svg.dataChart g.chartAxis line{fill:none;stroke:#555;opacity:.4;shape-rendering:crispEdges}.slidecontainer{width:100%}.slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:11px;background:#d3d3d3;outline:none;width:80%;display:block;position:unset;margin-top:6px;margin-left:10px;margin-right:10px;float:left}.slider:hover{opacity:1}.slider:before{display:none!important}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.slider::-moz-range-thumb{width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.dDataDropZone{margin:inherit!important;width:65%!important}div#video_player_box{margin:inherit!important;margin-bottom:55px!important;width:35%!important}.map-botton{padding:10px 14px;border-radius:24px;position:absolute;right:0;margin:15px 16px 0 0;bottom:6px;z-index:999}",""]),t.exports=e},b586:function(t,e,a){"use strict";a("5a15")},bfab:function(t,e,a){a("14d9"),d3.geo.tile=function(){var t=[960,500],e=256,a=[t[0]/2,t[1]/2],i=0;function s(){var s=Math.max(Math.log(e)/Math.LN2-8,0),o=Math.round(s+i),r=Math.pow(2,s-o+8),n=[(a[0]-e/2)/r,(a[1]-e/2)/r],l=[],d=d3.range(Math.max(0,Math.floor(-n[0])),Math.max(0,Math.ceil(t[0]/r-n[0]))),c=d3.range(Math.max(0,Math.floor(-n[1])),Math.max(0,Math.ceil(t[1]/r-n[1])));return c.forEach((function(t){d.forEach((function(e){l.push([e,t,o])}))})),l.translate=n,l.scale=r,l}return s.size=function(e){return arguments.length?(t=e,s):t},s.scale=function(t){return arguments.length?(e=t,s):e},s.translate=function(t){return arguments.length?(a=t,s):a},s.zoomDelta=function(t){return arguments.length?(i=+t,s):i},s}},d5df:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{},[e("div",[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"}),e("span",{staticClass:"p-actions float-md-right float-left mb-wid-100"},[e("a",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{href:"javascript:;"},on:{click:t.ShowHideMap}},[e("em",{staticClass:"fa fa-angle-double-up",attrs:{id:"icnToggleMap"}}),e("br"),t._v(" "+t._s(t.mapHeaderText))]),e("RouterLink",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{to:"/Ticketing/WorkOrderListing",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left"}),e("br"),t._v("Back to list ")])],1)])])]),1==t.isShowMap?e("MapComponentVue",{staticClass:"row",attrs:{mapContainer:"WorkOrderDetail",mapType:"MapBox",Data:t.mapObj,config:t.config}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"container-fluid padding-t_10"},[e("div",{staticClass:"left-menu-tab"},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white textelipsis"},[e("a",{attrs:{title:"WorktypeName","data-toggle-tooltip":"tooltip"}},[e("span"),t._v(t._s(t.WorkOrderNumber))])])])]),e("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab fsmtabcontrol lefttabiconfix",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active left-menu",attrs:{"data-toggle":"tab",href:"#Details",id:"tab-details",role:"tab","aria-controls":"DetailsText","aria-selected":"true",title:"Details"},on:{click:t.Details}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Details")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-resapproval",href:"#ServiceAppointment",role:"tab","aria-controls":"ServiceAppointment","aria-selected":"false",title:"@Resources.ServiceAppointment"},on:{click:t.ServiceAppointment}},[e("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v("Service Appointment")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-timetrackhistory",href:"#TimeTrackHistory",role:"tab","aria-controls":"TimeTrackHistory","aria-selected":"false",title:"@Resources.Time @Resources.Track @Resources.History"},on:{click:t.TimeTrackHistory}},[e("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t._v("Time Track History")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-viewstatushistory",href:"#ViewStatusHistory",role:"tab","aria-controls":"ViewStatusHistory","aria-selected":"false",title:"@Resources.View @Resources.Status @Resources.History"},on:{click:t.GetWorkOrderStatusHistory}},[e("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t._v("View Status History")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-reportincident",href:"#ReportIncident",role:"tab","aria-controls":"ReportIncident","aria-selected":"false",title:"@Resources.Report @Resources.Incident"},on:{click:t.GetReportIncidentListing}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v("Report Incident")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-attachments",href:"#Attachments",role:"tab","aria-controls":"Attachments","aria-selected":"false",title:"@Resources.Attachments"},on:{click:t.FetchAttachmentDatas}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v("Attachments")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-notes",role:"tab","aria-controls":"Notes","aria-selected":"false",title:"@Resources.Notes"},on:{click:t.LoadNoteForQuickView}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Notes")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-requiredproduct",id:"tab-requiredproduct",role:"tab","aria-controls":"RequiredProducts","aria-selected":"false",title:"@Resources.RequiredProducts"},on:{click:t.RequiredProduct}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Required Products")])])])]),e("div",{staticClass:"right-content"},[e("div",{staticClass:"col-md-12 p-0 mb-2"},[e("div",{class:{"p-actions-collapse":t.isDisabledCollapse,"theme-primary partition p-actions-expand":!0}},[e("span",{staticClass:"p-name text-white"},[e("a",{attrs:{"data-toggle-tooltip":"tooltip"}},[t._v(t._s(t.headerText))])]),e("span",{staticClass:"p-actions float-right"},[e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"AddNew Notes"},on:{click:function(e){return t.AddNote(null)}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add New Notes")]),e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"Add Attachment"},on:{click:function(e){return t.openAttachmentPopup()}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add Attachment")]),e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"Add Incident"},on:{click:function(e){return t.openReportIncidentPopUp()}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add Incident")]),"Edit"!=t.AddEditText?e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"StartTimer",id:"StartTimer"},on:{click:t.StartTimer}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Start Timer")]):t._e(),"Edit"===t.AddEditText?e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"StopTimer",id:"StopTimer"},on:{click:t.openStopPopUp}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Stop Timer")]):t._e(),e("RouterLink",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{to:"/FSM/workorderlisting",title:"Back","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Back to list")]),e("a",{staticClass:"p-action-btn text-white disabled btnDelete d-none",attrs:{href:"javascript:;",id:"DeleteMultiple"},on:{click:function(e){return t.DeleteIncidentList()}}},[e("i",{staticClass:"fa fa-trash pr-2"}),e("br"),t._v("Delete")]),"Completed"!=t.Status_Id&&"Failed"!=t.Status_Id&&"Canceled"!=t.Status_Id&&null!=t.SA_Id?e("a",{staticClass:"p-action-btn text-white",attrs:{title:"Schedule",href:"javascript:;"}},[e("i",{staticClass:"fa fa-clock-o action-icon",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Schedule ")]):t._e()],1),e("span",{staticClass:"collapse-head-btns",on:{click:function(e){return t.toggleCollapse()}}},[t._m(0)])])]),t.WorkOrderDetailTab?e("WorkOrderDetailTab",{attrs:{workOrderDetailData:t.workOrderDetailData,WO_Status_Id:t.WO_Status_Id,isLocateorNonLocate:t.isLocateorNonLocate,workOrderId:t.workOrderId,ticketId:t.ticketId,callbackfunction:t.FetchRecords}}):t._e(),t.isShowAddNote?e("AddEditNote",{attrs:{configdata:t.configData,id:t.ticketId},on:{Close:t.Close,LoadNoteForQuickView:t.LoadNoteForQuickView}}):t._e(),t.showAttachmentModal?e("ShowAttachmentDataVue",{attrs:{ListViewAttachment:"1",id:t.ticketId,configdata:t.configData},on:{FetchAttachmentData:t.FetchAttachmentDatas}}):t._e(),t.showIncidentPopup?e("AddIncidentVue",{attrs:{ticketId:t.ticketId,workOrderId:t.workOrderId},on:{Close:t.Close}}):t._e(),t.showServiceAppointment?e("ServiceAppointmentByIdVue",{attrs:{workOrderId:t.workOrderId,totalRecord:t.totalRecord}}):t._e(),t.showTimeTrackHistory?e("TimeTrackHistoryVue",{key:t.refreshTimeTrack,attrs:{workOrderId:t.workOrderId,ticketId:t.ticketId,totalRecord:t.totalRecord,TimeTrackHistoryData:t.TimeTrackHistoryData},on:{TimeTrackHistory:t.TimeTrackHistory}}):t._e(),t.showTicketAttachment?e("TicketAttachmentVue",{key:t.componentKey,attrs:{ListViewAttachment:"1",AttachmentData:t.AttachmentData,viewMode:"AttachmentInWorkOrderDetail"},on:{"open-image":t.openSpecificImage,GetAttachmentData:t.GetAttachmentData}}):t._e(),t.showNotes?e("TicketNotesVue",{attrs:{NoteData:t.NoteList}}):t._e(),t.showReportListing?e("ReportIncidentListingVue",{key:t.refreshKey,attrs:{totalRecord:t.totalRecord,workOrderId:t.workOrderId,ticketId:t.ticketId,ReportIncidentListingData:t.ReportIncidentListingData}}):t._e(),t.showWorkOrderStatusHistory?e("WorkOrderStatusHistory",{attrs:{workOrderId:t.workOrderId,ticketId:t.ticketId,totalRecord:t.totalRecord,WorkOrderStatusHistory:t.WorkOrderStatusHistory}}):t._e(),t.ShowTimerMoadal?e("WorkOrderTimerModalVue",{attrs:{id:t.ticketId},on:{Close:t.Close}}):t._e(),t.visible?e("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:t.galleryImages,customClasses:t.lightboxClasses},on:{close:function(e){t.visible=!1}}}):t._e(),t.showRequiredProduct?e("RequiredProductListVue",{attrs:{workOrderId:t.workOrderId}}):t._e()],1)])])],1)},s=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[e("em",{staticClass:"fa fa-angle-up text-white"})])}],o=(a("14d9"),a("33e4")),r=a("9769"),n=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"col-md-12 border",staticStyle:{display:"block"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"clearfix"}),e("div",{staticClass:"col-lg-12 mb-3"},[t._m(0),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:t}){return[e("textarea",{staticClass:"form-control form-control:disabled",attrs:{readonly:"",disabled:"disabled"},domProps:{value:t.fieldInfo.value}})]}}])})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6 mb-3"},[t._m(1),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.ScheduledSchema}})],1),e("div",{staticClass:"col-lg-6 mb-3"},[t._m(2),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.PreferredSchema}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"clearfix"}),e("div",{staticClass:"col-lg-12 mb-3"},[t._m(3),t.isLocateorNonLocate?e("dynamic-form",{ref:"LocateStatus",attrs:{lang:"en",schema:t.locateFormSchema}}):t._e(),t.isLocateorNonLocate?t._e():e("dynamic-form",{ref:"NonLocateStatus",attrs:{lang:"en",schema:t.nonLocateFormSchema}}),t.formListForSubmit.length>0?e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header mb-2"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tbl_formList"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"sorting"},[e("span",[t._v(t._s(t.$t("FormName")))])]),e("th",{staticClass:"text-center"},[e("span",[t._v(t._s(t.$t("FormSubmitted")))])]),e("th",{staticClass:"text-center sorting"},[e("span",[t._v(t._s(t.$t("Action")))])])])]),e("tbody",t._l(t.formListForSubmit,(function(a,i){return e("tr",[e("td",[t._v(" "+t._s(a.name)+" "),"1"==a.second_value?e("span",{staticClass:"text-danger font-weight-bold"},[t._v("*")]):t._e()]),e("td",{staticClass:"text-center"},["Yes"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-success text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e(),"No"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-danger text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e()]),0==t.EditEnabled?e("td",{staticClass:"text-center"},[t._m(4,!0)]):t._e(),t.EditEnabled?e("td",{staticClass:"text-center"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.GetCustomFieldFormForEdit(a)}}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success"})])]):t._e()])})),0)])])]):t._e(),e("div",{staticClass:"row flex-row-reverse mt-2"},[e("div",{staticClass:"col-lg-6 text-right"},[t.isLocateorNonLocate||0!=t.formListForSubmit.length?t._e():e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;",title:t.$t("UpdateStatus"),id:"btnSave"},on:{click:function(e){return t.WorkOrderUpdateStatus()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("UpdateStatus")))]),!t.isLocateorNonLocate&&t.formListForSubmit.length>0?e("a",{staticClass:"btn btn-primary save-btn SubmitUpdate",attrs:{href:"javascript:;",title:t.$t("SaveWorkOrder")},on:{click:function(e){return t.SubmitUpdateStatus()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveWorkOrder")))]):t._e(),t.isLocateorNonLocate?e("a",{staticClass:"btn btn-primary save-btn WorkOrderStatus mr-2",attrs:{href:"javascript:;",id:"WOStatus",title:t.$t("UpdateStatus")},on:{click:function(e){return t.WorkOrderStatus()}}},[e("i",{staticClass:"fa fa-cog pr-2",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(t.$t("UpdateStatus")))])]):t._e(),t.isLocateorNonLocate?e("a",{staticClass:"btn btn-primary save-btn SubmitUpdate",attrs:{href:"javascript:;",title:t.$t("SaveWorkOrder")},on:{click:function(e){return t.SubmitUpdateStatus()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveWorkOrder")))]):t._e()])])],1)])]),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.workOrderModalStatus?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("WorkOrder")+" "+t.$t("Status")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:e}){return[t._v(" "+t._s(e.fieldInfo)+" ")]}}],null,!1,1171166564)})],1),e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{tabindex:"13",title:t.$t("Save"),id:"btnSave"},on:{click:t.SubmitWOrkOrderUpdateStatus}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{tabindex:"14",title:t.$t("Cancel"),id:"btnCancel"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])])])])]):t._e()])]),t.ShowWorkOrderStatusForm?e("EditViewFSMForm",{attrs:{isforshow:!1,formIdForShow:t.formIdForShow,listForSubmittedForm:t.listForSubmittedForm,moduleName:t.moduleName,subModuleCode:t.subModuleCode,workOrderId:t.workOrderId,subStatusId:t.subStatusId,callbackfunction:t.GetDetailTabData}}):t._e()],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Work Order Detail")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Scheduled Time")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Preferred Time")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Status Detail")])])])},function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success disabled"})])}],d=a("42e5"),c={components:{EditViewFSMForm:d["a"]},props:{workOrderDetailData:{type:Array,required:!1},workOrderId:{ype:Number,required:!1},isLocateorNonLocate:{type:String,required:!0},ticketId:{type:Number,required:!1},WO_Status_Id:{type:Number,required:!1},callbackfunction:{type:Function}},data(){return{FormSchema:[{layoutType:"four",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:1e3}},{astype:"TextField",label:this.$t("WO Number"),name:"workorder_number",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Estimation Duration"),name:"estimate_duration",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Ticket Number"),name:"ticket_number",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Created Date"),name:"created_at",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Created BY"),name:"created_by",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Work Type"),name:"work_type_id",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Client"),name:"client",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Address"),name:"address",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Subject"),disabled:!0,name:"subject",value:"",placeholder:"",validationRules:{required:!1,max:200}}]}],ScheduledSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Scheduled Start Date Time"),name:"SA_Scheduled_StartTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Scheduled End Date Time"),name:"SA_Scheduled_EndTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}}]}],PreferredSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Preferred Start Date Time:"),name:"StartDateTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Preferred End Date Time"),name:"EndDateTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}}]}],locateFormSchema:[{layoutType:"double",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.SetParentSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("SubStatus"),name:"SubStatus",value:"",config:{options:[],onChange:this.GetFormsOnBehalfOfSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.onChangeStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],isLoading:!1,moduleName:"TICKETING",subModuleCode:"TICKETING",listForSubmittedForm:[],Description:null,StatusData:[],SubStatusData:[],refId:0,subStatusId:0,fsmType:null,formIdForShow:0,formListForSubmit:[],EditEnabled:!1,workOrderTicketId:0,IsAction:!1,workOrderId:0,WorkOrderStatusId:"",workOrderModalStatus:!1,ShowWorkOrderStatusForm:!1}},created:function(){var t=this;setTimeout(()=>{t.GetDetail()},3e3),setTimeout(()=>{t.workOrderTicketId=t.ticketId,t.workOrderId=t.workOrderId,""!=t.WO_Status_Id&&(t.WorkOrderStatusId=t.WO_Status_Id),t.GetDropDownData("WORK_ORDER_FINAL_STATUS"),1==t.isLocateorNonLocate&&t.GetFSMDDLData("FSM_WORK_ORDER",t.workOrderTicketId,t.workOrderId),t.GetDetailTabData()},4e3)},methods:{GetDetailTabData:async function(){var t=this;t.GetUpdateStatusDataForEdit(t.workOrderId,t.workOrderTicketId)},SubmitWOrkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t.nonLocateFormSchema[0].Data[0].value},a=JSON.stringify(e);await r["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},Close:function(){this.workOrderModalStatus=!1},WorkOrderStatus:function(){var t=this;t.workOrderModalStatus=!t.workOrderModalStatus},GetUpdateStatusDataForEdit:async function(t,e){var a=this,i=`TicketId=${e}&WOId=${t}`;await r["a"].GetSingleWorkOrder(i).then((function(e){if("Success"==e.data.status){var i=e.data.result;null!=i&&(1==a.isLocateorNonLocate?(a.ParentSubStatusId=null==i.PARENT_SUB_STATUS_ID?"":i.PARENT_SUB_STATUS_ID,a.ChildSubStatusId=null==i.SUB_STATUS_ID?"":i.SUB_STATUS_ID,a.WorkOrderStatusId=null==i.STATUS_ID?"":i.STATUS_ID,a.ParentSubStatusName=i.PARENT_SUB_STATUS_NAME,a.ChildSubStatusName=i.CHILD_SUB_STATUS_NAME,a.Description=i.COMMENT,a.SetParentSubStatus(t),a.MinutesWorked=i.MINUTES_WORKED>0?i.MINUTES_WORKED:"",a.FeetLocated=i.FEET_LOCATED>0?i.FEET_LOCATED:"",a.ChildSubStatusId>0&&a.GetFormsOnBehalfOfSubStatus()):(a.nonLocateFormSchema[0].Data[0].value=a.WorkOrderStatusId,a.$refs.NonLocateStatus.UpdateKeyValue(),a.GetFormsWithoutSubStatus()))}}))},WorkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t.WorkOrderStatusId},a=JSON.stringify(e);await r["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},SetParentSubStatus:function(){var t=this;t.GetFSMDDLData("FSM_WORK_ORDER_CHILD_SUB_STATUS",t.workOrderTicketId,t.workOrderId),t.GetFormsOnBehalfOfSubStatus(t.locateFormSchema[0].Data[0].value)},GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await r["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&(t.data.DATA.forEach((t,a)=>{e.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}),e.$refs.NonLocateStatus.UpdateKeyValue());let i=a.find(t=>t.value==e.WorkOrderStatusId);e.nonLocateFormSchema[0].Data[0].value=i.value,"Cancelled"==i.name||"Completed"==i.name?(e.EditEnabled=!1,e.IsAction=!0):e.EditEnabled=!0}}))},onChangeStatus:function(t){var e=this;e.WorkOrderStatusId=t.target.value;let a=e.workorderStatusDataList.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"!=a.name&&"Completed"!=a.name||1!=e.IsAction?e.EditEnabled=!0:e.EditEnabled=!1},GetDetail:function(){var t=this;t.workOrderDetailData.length>0&&t.workOrderDetailData.forEach((function(e){"Description"==e.display_name?t.isBlank(e.value)||(t.FormSchema[0].Data[0].value=e.value.replace(/<\/?[^>]+(>|$)/g,"")):"WO Number"==e.display_name?t.FormSchema[0].Data[1].value=e.value:"Estimation Duration"==e.display_name?t.FormSchema[0].Data[2].value=e.value:"Ticket number"==e.display_name?t.FormSchema[0].Data[3].value=e.value:"Created Date"==e.display_name?t.FormSchema[0].Data[4].value=t.$options.filters.formatDateTime(e.value):"Created by"==e.display_name?t.FormSchema[0].Data[5].value=t.FilterDDLandNormalValue(e.value):"Work Type"==e.display_name?t.FormSchema[0].Data[6].value=t.FilterDDLandNormalValue(e.value):"Client"==e.display_name?null!=e.value&&(t.FormSchema[0].Data[7].value=t.FilterDDLandNormalValue(e.value)):"Address"==e.display_name?t.FormSchema[0].Data[8].value=e.value:"Subject"==e.display_name?t.FormSchema[0].Data[9].value=e.value:"Preferred Start Date Time"==e.display_name?t.PreferredSchema[0].Data[0].value=t.$options.filters.formatDateTime(e.value):"Preferred End Date Time"==e.display_name?t.PreferredSchema[0].Data[1].value=t.$options.filters.formatDateTime(e.value):"Scheduled Start Date Time"==e.display_name?t.ScheduledSchema[0].Data[0].value=t.$options.filters.formatDateTime(e.value):"Scheduled End Date Time"==e.display_name&&(t.ScheduledSchema[0].Data[1].value=t.$options.filters.formatDateTime(e.value))}))},checkFormSubmitted:function(t){var e=this,a="No";return $.each(e.listForSubmittedForm,(function(e,i){i.formId==t&&i.formSubnittedId>0&&(a="Yes")})),a},GetCustomFieldFormForEdit:function(t){var e=this;e.formIdForShow=t.value,e.subStatusId=e.locateFormSchema[0].Data[1].value,e.ShowWorkOrderStatusForm=!e.ShowWorkOrderStatusForm},GetFormsOnBehalfOfSubStatus:async function(t){var e=this;let a=e.locateFormSchema[0].Data[1].value;e.formListForSubmit=[],e.listForSubmittedForm=[];var i=`id=${e.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_BY_STATUS&search=&refId=`+a;await r["a"].GetDDLData(i).then((function(t){!e.isBlank(t.data)&&t.data.DATA.length>0&&(e.formListForSubmit=t.data.DATA,$.each(t.data.DATA,(function(t,a){var i={formId:a.value,formSubnittedId:a.first_value,isAllFormMandatory:a.second_value};e.listForSubmittedForm.push(i)})))}))},GetFormsWithoutSubStatus:async function(){var t=this;t.formListForSubmit=[];var e=`id=${t.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_WITHOUT_STATUS_FOR_NON_LOCATE&search=&refId=`;await r["a"].GetDDLData(e).then((function(e){!t.isBlank(e.data)&&e.data.DATA.length>0&&(t.formListForSubmit=e.data.DATA,$.each(e.data.DATA,(function(e,a){var i={formId:a.value,formSubnittedId:a.first_value,isAllFormMandatory:a.second_value};t.listForSubmittedForm.push(i)})))}))},GetFSMDDLData:async function(t,e,a){var i=this,s="",o="";"FSM_WORK_ORDER"==t&&(o=""),o=i.locateFormSchema[0].Data[0].value,i.locateFormSchema[0].Data[1].config.options=[];var n="id="+e+"&moduleName=&type="+t+"&refId="+o+"&workOrderId="+a;await r["a"].GetFSMDDLData(n).then((function(e){i.isBlank(e.data)||"Success"!=e.data.status||(s=e.data.result.DATA,null!=s?"FSM_WORK_ORDER"==t?(s.forEach((t,e)=>{i.locateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}),i.$refs.LocateStatus.UpdateKeyValue()):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(s.forEach((t,e)=>{i.locateFormSchema[0].Data[1].config.options.push({value:t.value,name:t.name})}),i.$refs.LocateStatus.UpdateKeyValue()):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(i.locateFormSchema[0].Data[1].value="",i.$refs.LocateStatus.UpdateKeyValue()))}))},SubmitUpdateStatus(t,e){var a=this;let i=a.workorderStatusDataList.find(t=>t.value==a.WorkOrderStatusId);var s=!0;if("Cancelled"!=i.name&&($.each(a.listForSubmittedForm,(function(t,e){null!=e.formSubnittedId&&0!=e.formSubnittedId||"1"!=e.isAllFormMandatory||(s=!1)})),$.each(a.listForSubmittedForm,(function(t,e){1==e.hasOwnProperty("SaveFormJSON")&&delete e.SaveFormJSON}))),s){a.isLoading=!0;var o={WorkOrderId:a.workOrderId,TicketId:a.workOrderTicketId,ParentSubStatusId:a.locateFormSchema[0].Data[0].value,ChildSubStatusId:a.locateFormSchema[0].Data[1].value,Description:"",IsCornerLot:0,IsGasfacility:0,IsCastIron:0,IsPrivateLocateOpportunity:0,IsGasPrintIssue:0,NumberofCIMains:"",MainSizeAndDistance:"",FormSaveId:0,formBaseString:a.listForSubmittedForm,MinutesWorked:0,FeetLocated:0,ReqFrom:"WEB",WorkOrderStatusId:a.WorkOrderStatusId},n=JSON.stringify(o);r["a"].UpdateSubStatus(n).then(t=>{"SUCCESS"==t.data.result.MSG?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.callbackfunction(),setTimeout((function(){a.isLoading=!1}),500)):a.ShowAlert(vm.$t("ErrorWhileSavingRecords",[a.$t("Status")]),"failure",!0,a.$t("Alert"))})}else a.ShowAlert(vm.$t("AllFormsAreMandatory",[a.$t("Status")]),"failure",!0,a.$t("Alert"))}}},u=c,p=a("2877"),m=Object(p["a"])(u,n,l,!1,null,null,null),h=m.exports,f=a("6481"),v=a("3e91"),S=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Add Incident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{ref:"AddIncidentForm",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SubmitReportIncident}})],1)])])])],1),t.showIncidentPopUp?e("showReportIncidentModalVue",{on:{close:t.close}}):t._e(),t.showSubIncidentPopUp?e("showReportSubIncidentModalVue",{attrs:{ticketId:t.ticketId},on:{close:t.close}}):t._e()],1)},g=[],b=(a("b7ef"),a("1890")),_=a("7b9c"),y={components:{showReportIncidentModalVue:b["a"],showReportSubIncidentModalVue:_["a"]},props:{ticketId:{required:!1},workOrderId:{required:!1},EditIncidentData:{required:!1}},created:function(){var t=this;t.GetDDLData(),setTimeout((function(){void 0!=t.EditIncidentData&&t.EditIncidentData.length>0&&t.EditData()}),500)},data(){return{FormSchemaData:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Incident Type"),name:"ParentIncidentId",value:"",config:{showAddIcon:!0,onChange:this.OnChange,onAddButtonClick:this.openIncidentType,options:[]},placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Incident Sub Type"),name:"ChildSubIncidentId",placeholder:"",validationRules:{required:!0},FieldIndex:0,config:{showAddIcon:!0,onChange:this.SubOnChange,onAddButtonClick:this.openSubIncidentType,options:[]}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Description",placeholder:"",validationRules:"",value:"",FieldIndex:0},{astype:"FileField",label:this.$t("Attachment"),name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Report Incident"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.close}],IncidentData:[],showIncidentPopUp:!1,showSubIncidentPopUp:!1,ParentIncidentId:0,IncidentTypeList:[],IncidentSubTypeList:[],fileData:[],fileName:"",fileSize:"",IncidentId:0,AttachmentList:[],ChildSubIncidentId:0,IncidentListData:[]}},methods:{EditData:function(){var t=this;t.IncidentId=t.EditIncidentData[0].ID,t.FormSchemaData[0].Data[0].value=t.EditIncidentData[0].incident_type_id,t.FormSchemaData[0].Data[1].value=t.EditIncidentData[0].incident_subtype_id,t.FormSchemaData[1].Data[0].value=t.EditIncidentData[0].DESCRIPTION,t.SetParentIncident(t.EditIncidentData[0].incident_type_id)},SubOnChange:function(t){var e=this;e.ChildSubIncidentId=t.target.value},openSubIncidentType:function(){var t=this;t.showSubIncidentPopUp=!0},openIncidentType:function(){var t=this;t.showIncidentPopUp=!0},close:function(t){var e=this;"SRSM"!=t&&this.$emit("Close"),e.showIncidentPopUp=!1,e.showSubIncidentPopUp=!1},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),n=o.substring(r+1,o.length);e.fileExt+="."+n;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',d=a.size;e.fileSize=d;var c={attachement_mime:l,fileName:o,id:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:s,fileSize:d};e.fileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},GetDDLData:function(){var t=this,e="FSM_REPORT_INCIDENT",a=`id=${t.ticketId}&moduleName=Ticketing&type=${e}`;r["a"].GetDDLDataFSM(a).then((function(e){var a=e.data.result.DATA;if(t.IncidentListData=a,null!=a){t.FormSchemaData[0].Data[0].config.options=[];var i=$.grep(a,(function(t,e){return null==t.first_value}));i.forEach((function(e){t.IncidentTypeList.push({name:e.name,value:e.value}),t.FormSchemaData[0].Data[0].config.options.push({name:e.name,value:e.value})}))}t.$refs.AddIncidentForm.UpdateKeyValue()}))},SubmitReportIncident:function(){var t=this;t.buttons[0].class+=" disabled";var e=0;t.FormSchemaData;var a=[],i=null;if("undefined"!=typeof t.fileData)if(t.fileData.length>0){for(var s=0;s<t.fileData.length;s++){var o="."+t.fileData[s].extensionName,n=$.inArray(o,t.DisallowedTypes);-1==n||(e+=1),a.push({formBaseString:""+t.fileData[s].base64String,attachementMime:""+t.fileData[s].attachement_mime,containerName:""+t.fileData[s].containerName,extensionName:""+t.fileData[s].extensionName,fileSize:""+t.fileData[s].fileSize})}0==e&&(i=JSON.stringify(a))}else i=null;else i=null;if(0==e){var l="";if(t.AttachmentList.length>0){a=[];for(s=0;s<t.AttachmentList.length;s++)a.push({AttachmentId:""+t.AttachmentList[s].TICKET_ATTACHMENT_ID});l=JSON.stringify(a)}else l=null;var d={IncidentId:t.IncidentId,TicketId:t.ticketId,WorkOrderId:t.workOrderId,ParentIncidentId:t.FormSchemaData[0].Data[0].value,ChildSubIncidentId:t.FormSchemaData[0].Data[1].value,IncidentAttachment:t.FileSrc,Description:void 0==t.FormSchemaData[1].Data[0].value?"":t.FormSchemaData[1].Data[0].value,StatusId:1001,file:i,prevfiles:l,ModuleName:"Ticketing",Submodulecode:"FSM_WORKORDER"},c=JSON.stringify(d);r["a"].AddReportIncident(c).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status?t.IncidentId>0?(t.ShowAlert("Incident Succesfully Updated"),t.$parent.GetReportIncidentListing(),t.$emit("Close")):(t.ShowAlert("Incident Succesfully Added"),t.$parent.GetReportIncidentListing(),t.$emit("Close")):t.ShowAlert(t.$t("ErrorWhileSavingRecords",[t.$t("failure")]),"failure",!0,t.$t("Alert"))}))}else{t.buttons[0].class="btn btn-success";var u="";for(s=0;s<t.DisallowedTypes.length;s++)u=u+" "+t.DisallowedTypes[s];var p="";p="File Types "+u+" are not allowed",ShowAlert(p,"failure",!0,Globalize.localize("Alert"))}},OnChange:function(t){var e=this;e.ParentIncidentId=t.target.value,e.SetParentIncident(e.ParentIncidentId)},SetParentIncident:function(t){var e=this;e.FormSchemaData[0].Data[1].config.options=[];var a=$.grep(e.IncidentListData,(function(e,a){return e.first_value==t}));e.IncidentSubTypeList="",e.IncidentSubTypeList=a,e.FormSchemaData[0].Data[1].config.options=e.IncidentSubTypeList}}},C=y,T=Object(p["a"])(C,S,g,!1,null,null,null),k=T.exports,I=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.SAData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["SA_NUMBER"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{to:"/ServiceAppointment/ViewSADetails/"+a.row.SA_ID,dataid:a.row.SA_ID,title:a.row[a.column.COLUMN_NAME],"data-toggle-tooltip":"tooltip","data-original-title":"Click here to view SA Details"}},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])]:t._e(),"STATUS"==a.column.COLUMN_NAME?[e("a",[e("span",{class:t.getSAStatusClassList(a.row.STATUS,"STATUS")},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e()]}}])})],1)},A=[],D={props:{workOrderId:{required:!0}},data(){return{Headers:[{COLUMN_NAME:"SA_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"SA Number",DISPLAY_ORDER:1},{COLUMN_NAME:"WORKORDER_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Order",DISPLAY_ORDER:2},{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Ticket Number",DISPLAY_ORDER:2},{COLUMN_NAME:"SA_SUBJECT",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Subject","DISPLAY_ORDER ":3},{COLUMN_NAME:"STATUS",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status","DISPLAY_ORDER ":3},{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Client Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"SA_STREET",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Address","DISPLAY_ORDER ":3},{COLUMN_NAME:"ASSIGNED_NAME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Assigned Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"DATE",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date","DISPLAY_ORDER ":3},{COLUMN_NAME:"TIME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Time","DISPLAY_ORDER ":3}],TotalRecords:0,SortBy:"",SortExp:"",SAData:[],searchCondition:null,PageSize:10,PageNumber:1}},created:function(){var t=this;t.fetchRecords()},methods:{async fetchRecords(){var t=this,e=`id=${t.workOrderId}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&search=${t.searchCondition}`;await r["a"].GetServiceAppointmentByWorkOrderId(e).then(e=>{t.Headers.forEach(t=>{t.settings=null,"SA_NUMBER"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"STATUS"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),t.SAData=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTALRECORDS}),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)},renderActions:function(t){},commonHeaderButtonClick:function(){},actionButtonClick(t,e,a,i){},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.fetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.fetchRecords()}}},w=D,x=Object(p["a"])(w,I,A,!1,null,null,null),E=x.exports,F=function(){var t=this,e=t._self._c;return e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:"",widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.TimeTrackHistoryData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.TimeTrackHistory,showCheckBox:!1,SortExp:t.sortExp,SortBy:t.sortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["TRACK_START_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDate(a.row.TRACK_START_TIME))+" ")])]:t._e(),"TRACK_END_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDate(a.row.TRACK_END_TIME))+" ")])]:t._e(),"TRACK_DESCRIPTION"==a.column.COLUMN_NAME?[e("span",[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.row.TRACK_DESCRIPTION)}})])])]:t._e()]}}])})},N=[],L={props:{ticketId:{required:!1},workOrderId:{required:!1}},data(){return{Headers:[{COLUMN_NAME:"TRACK_DESCRIPTION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:1},{COLUMN_NAME:"TRACK_START_TIME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Start Time",DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_END_TIME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"End Time",DISPLAY_ORDER:2},{COLUMN_NAME:"DURATION",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Duration (HH:MM:SS)","DISPLAY_ORDER ":3}],pageNumber:1,pageSize:10,sortBy:"",sortExp:"",TimeTrackHistoryData:[],totalRecord:0}},created:function(){var t=this;t.TimeTrackHistory()},methods:{pagerMethod:function(t){var e=this;e.pageSize=t.PageSize,e.pageNumber=t.PageNumber,e.TimeTrackHistory()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.TimeTrackHistory(),$("#"+t+"  span:first-child").attr("class",e)},TimeTrackHistory:function(){var t=this,e=`ticketingId=${t.ticketId}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&workCodeId=${t.workOrderId}`;r["a"].TrackHistoryList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"TRACK_START_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_END_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_DESCRIPTION"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),t.TimeTrackHistoryData=e.data.result.DATA,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS})),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}}},O=L,R=Object(p["a"])(O,F,N,!1,null,null,null),M=R.exports,P=a("fc96"),B=a("0c69"),G=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.ReportIncidentListingData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),t.showIncident?e("EditIncidentVue",{attrs:{EditIncidentData:t.EditIncidentData,ticketId:t.ticketId,workOrderId:t.workOrderId},on:{Close:t.Close}}):t._e()],1)},V=[],U={components:{EditIncidentVue:k},data(){return{sortBy:"",sortExp:"",pageSize:10,pageNumber:1,showIncident:!1,EditIncidentData:[],showEditIncident:!0,ReportIncidentListingData:[],Headers:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Incident Type",DISPLAY_ORDER:1},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2}],listActions:[{title:"Edit",href:"javascript:void(0)",callbackfunction:"EditIncident",icon:"fa action-icon fa fa-pencil",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"commonDeleteData",additionalSpan:""}]}},created:function(){var t=this;t.GetReportIncidentListing()},props:{workOrderId:{required:!1},ticketId:{required:!1}},methods:{openPopupForAddEditIncident:async function(t){var e=this,a="Id="+t;await r["a"].IncidentTypeDetails(a).then(t=>{e.EditIncidentData=t.data.result.DATA,e.showIncident=!0})},pagerMethod:function(t){this.pageSize=t.PageSize,this.pageNumber=t.PageNumber,this.GetReportIncidentListing()},GetReportIncidentListing:function(){var t=this,e=`id=${t.workOrderId}&ticketId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;r["a"].FetchReportIncidentRecords(e).then((function(e){t.ReportIncidentListingData=e.data.result.data,t.totalRecord=e.data.result.data[0].TOTALRECORDS}))},Close:function(){var t=this;t.showIncident=!1},actionButtonClick(t,e,a,i){switch(t){case"EditIncident":this.openPopupForAddEditIncident(e.ID);break;case"commonDeleteData":this.DeleteById(e.ID);break}},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)}),a},DeleteById:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a={ids:t};r["a"].DeleteReportIncident(JSON.stringify(a)).then((function(t){null!=t.data&&""!=t.data?"Success"==t.data.status?(e.GetReportIncidentListing(),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Incident")]),"success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("DeletedError",[e.$t("Incident")]),"failure",!0,e.$t("Alert")):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))}}},H=U,z=Object(p["a"])(H,G,V,!1,null,null,null),W=z.exports,q=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:"",widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.WorkOrderStatusHistory,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}})],1)},Y=[],j={props:{ticketId:{required:!1},workOrderId:{required:!1}},created:function(){var t=this;t.GetWorkOrderStatusHistory()},data(){return{Headers:[{COLUMN_NAME:"NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"PARENT_SUB_STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"SUB_STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Sub Status",DISPLAY_ORDER:2},{COLUMN_NAME:"COMMENT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:2},{COLUMN_NAME:"UPDATED_ON",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Updated At",DISPLAY_ORDER:2},{COLUMN_NAME:"SUPERVISOR_COMMENT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SUPERVISOR COMMENT",DISPLAY_ORDER:2},{COLUMN_NAME:"FORMDATA",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Form",DISPLAY_ORDER:2}],pageNumber:1,pageSize:10,sortBy:"",sortExp:"",WorkOrderStatusHistory:[],totalRecord:0}},methods:{pagerMethod:function(t){this.pageSize=t.PageSize,this.pageNumber=t.PageNumber,this.GetWorkOrderStatusHistory()},GetWorkOrderStatusHistory:function(){var t=this,e=`workOrderId=${t.workOrderId}&ticketingId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;r["a"].FetchViewStatusHistoryRecords(e).then((function(e){t.WorkOrderStatusHistory=e.data.result.DATA,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS})),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}}},K=j,J=Object(p["a"])(K,q,Y,!1,null,null,null),X=J.exports,Q=a("78f9"),Z=a("e8b2"),tt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tblProductCheckoutList"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[t.NoRecords?t._e():e("th",{staticClass:"text-center"},[e("input",{staticClass:"chkItems chkAll",attrs:{type:"checkbox",id:"chkAll",name:"checkbox"}})]),t._m(0),t._m(1),t._m(2),t._m(3)])]),e("tbody",[t._l(t.ProductCheckoutList,(function(a,i){return e("tr",{key:i},[1==a.ASSIGNED_STATUS?e("td",{staticClass:"text-center"},[e("input",{staticClass:"chkItems",attrs:{type:"checkbox","data-uniqueid":a.asset_catalogue_id,name:"DeleteInputs"},domProps:{value:a.asset_catalogue_id},on:{click:function(e){return t.showCheckoutButton(e)}}})]):t._e(),0==a.ASSIGNED_STATUS?e("td",{staticClass:"text-center"},[e("input",{staticClass:"chkItems",attrs:{type:"checkbox","data-uniqueid":a.asset_catalogue_id,name:"DeleteInputs"},domProps:{value:a.asset_catalogue_id},on:{click:function(e){return t.showCheckoutButton(e)}}})]):t._e(),e("td",[t._v(t._s(a.ASSET_TYPE))]),e("td",[t._v(t._s(a.REQUIRED_QUANTITY))]),e("td",[t._v(t._s(a.AVAILABLE_ITEMS))]),e("td",{staticClass:"text-center single-action"},[1==a.ASSIGNED_STATUS?e("a",{attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Assigned",href:"javascript:;"}},[e("i",{staticClass:"fa fa-check-circle text-success"})]):t._e(),0==a.ASSIGNED_STATUS?e("a",{attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Checkout",href:"javascript:;"}},[e("i",{staticClass:"fa fa-share-square-o"})]):t._e()])])})),t.NoRecords?e("tr",[e("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e()],2)])])]),e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right mt-2"},[e("a",{directives:[{name:"show",rawName:"v-show",value:t.isCheckoutButton,expression:"isCheckoutButton"}],staticClass:"btn btn-primary save-btn btnProductCheckout",attrs:{href:"javascript:;",title:t.$t("ProceedToCheckout")},on:{click:function(e){return t.CheckoutProductRequest()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("ProceedToCheckout")))])])])])},et=[function(){var t=this,e=t._self._c;return e("th",[e("span",[t._v(" Product Name")])])},function(){var t=this,e=t._self._c;return e("th",[e("span",[t._v(" Required Quantity")])])},function(){var t=this,e=t._self._c;return e("th",[e("span",[t._v(" Available Quantity")])])},function(){var t=this,e=t._self._c;return e("th",{staticClass:"text-center"},[e("span",[t._v(" Status")])])}],at={props:{workOrderId:{type:Number,required:!1}},data(){return{ProductCheckoutList:[],NoRecords:!1,isCheckoutButton:!1,assetCatalogue:"",SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1"}},created(){var t=this;t.FetchRecords()},methods:{CheckoutProductRequest:function(){var t=this,e="";$("#tblProductCheckoutList tbody input:checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),t.assetCatalogue=btoa(e),window.location.href="/AssetAssignment/CheckOut?id="+t.assetCatalogue},showCheckoutButton:function(t){var e=this;t.target.checked?e.isCheckoutButton=!0:e.isCheckoutButton=!1},FetchRecords:async function(){var t=this;t.ProductCheckoutList=[];var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&workorderId=`+t.workOrderId;await r["a"].GetProductcheckoutList(e).then((function(e){""!=e.data&&null!=e.data&&e.data.result.data.length>0?(t.ProductCheckoutList=e.data.result.data,t.NoRecords=!1):(t.ProductCheckoutList=[],t.NoRecords=!0),setTimeout((function(){t.ResponsiveDataTable("tblProductCheckoutList")}),500)}))}}},it=at,st=Object(p["a"])(it,tt,et,!1,null,null,null),ot=st.exports,rt={data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!1,isShowEtaPipeLines:!1,isShowGetDirection:!0},WorkOrderNumber:"WO-",refreshKey:0,showWorkOrderStatusHistory:!1,mapObj:[],showTicketAttachment:!1,isShowMap:!1,workOrderId:0,ticketId:0,refreshTimeTrack:0,workOrderDetailData:[],mapHeaderText:"Collapse map",isShowAddNote:!1,showAttachmentModal:!1,showIncidentPopup:!1,showServiceAppointment:!1,showRequiredProduct:!1,WorkOrderDetailTab:!1,headerText:"Detail",totalRecord:0,pageNumber:1,pageSize:10,sortBy:"",sortExp:"",TimeTrackHistoryData:[],showTimeTrackHistory:!1,AttachmentData:[],galleryImages:[],NoteList:[],showNotes:!1,showReportListing:!1,pageNumber:1,pageSize:10,sortBy:"",sortExp:"",ReportIncidentListingData:[],WorkOrderStatusHistory:[],ShowTimerMoadal:!1,componentKey:0,visible:!1,isLocateorNonLocate:"",WO_Status_Id:0,configData:[]}},components:{MapComponentVue:o["a"],WorkOrderDetailTab:h,AddEditNote:f["a"],ShowAttachmentDataVue:v["a"],AddIncidentVue:k,ServiceAppointmentByIdVue:E,TimeTrackHistoryVue:M,TicketAttachmentVue:P["a"],TicketNotesVue:B["a"],ReportIncidentListingVue:W,WorkOrderStatusHistory:X,WorkOrderTimerModalVue:Q["a"],VueEasyLightbox:Z["a"],RequiredProductListVue:ot},created:function(){var t=this;t.workOrderId=t.$route.params.id,t.ticketId=t.$route.params.ticket_id,t.FetchRecords()},methods:{handleHide:function(){this.visible=!1},openSpecificImage(t,e){var a=this,i={path:t,caption:e.split(".")[0]};a.galleryImages.push(i)},StartTimer:function(){var t=this;t.ShowTimerMoadal=!0},Details:function(){var t=this;t.headerText="Detail",t.showServiceAppointment=!1,t.WorkOrderDetailTab=!0,t.showTimeTrackHistory=!1,t.showWorkOrderStatusHistory=!1,t.showRequiredProduct=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1},ServiceAppointment:function(){var t=this;t.headerText="Service Appointment",t.showServiceAppointment=!0,t.showWorkOrderStatusHistory=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showRequiredProduct=!1,t.showReportListing=!1},urlChange:function(){const t=Object.assign({},this.$route.query);t.reload="reload",this.$router.push({query:t})},openStopPopUp:function(){var t=this,e={TicketId:t.ticketId,TrackId:0,RequestFor:"FSM",RequestForType:"STOP",IPAddress:""},a=JSON.stringify(e);t.confirmR(t.$t("AreYouSureToStopTimer"),!0,t.$t("StopTimer"),(function(e){t.Disabled=1,r["a"].StopTrackHistory(a).then(e=>{try{"Success"==e.data.status?(t.$parent.ShowTimer=!1,t.AddEditText="Add",t.Disabled=0,t.urlChange(),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("TimeTrack")]),"success",!0,t.$t("Alert")),t.refreshTimeTrack+=1,document.getElementById("tab-trackhistory").click()):(t.ShowAlert(t.$t("AddedError",[t.$t("TimeTrack")]),"failure",!0,t.$t("Alert")),t.Disabled=0,t.Close())}catch(a){return HandleErrorOccured(a,"failure")}})}))},openReportIncidentPopUp:function(){var t=this;t.showIncidentPopup=!0},openAttachmentPopup:function(){var t=this;t.showAttachmentModal=!0},AddNote:function(){var t=this;t.isShowAddNote=!0},Close:function(){var t=this;t.ShowTimerMoadal=!1,t.isShowAddNote=!1,t.showIncidentPopup=!1},GetWorkOrderStatusHistory:function(){var t=this;t.headerText="View Status History",t.showWorkOrderStatusHistory=!0,t.showServiceAppointment=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showRequiredProduct=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1},FetchAttachmentDatas:function(){var t=this;t.headerText="Attachments",t.showWorkOrderStatusHistory=!1,t.showTicketAttachment=!0,t.showTimeTrackHistory=!1,t.showReportListing=!1,t.showServiceAppointment=!1,t.showRequiredProduct=!1,t.WorkOrderDetailTab=!1,t.showNotes=!1,t.AttachmentData=[];var e="ticketId="+t.ticketId;r["a"].GetTicketFiles(e).then((function(e){t.isLoading=!1,t.AttachmentData=e.data.result.DATA,t.componentKey+=1}))},LoadNoteForQuickView:async function(t){var e=this;e.headerText="Notes",e.showWorkOrderStatusHistory=!1,e.showTicketAttachment=!1,e.showTimeTrackHistory=!1,e.showServiceAppointment=!1,e.showRequiredProduct=!1,e.showReportListing=!1,e.WorkOrderDetailTab=!1,e.showNotes=!0;var a=`ticketId=${e.ticketId}&isSuptTckt=false&moduleName=Ticketing&isView=1`;await r["a"].GetWorkOrderNoteList(a).then((function(t){e.isLoading=!1,null!=t.data&&t.data.length>0?e.NoteList=t.data:e.noRecord=!0}))},GetReportIncidentListing:function(){var t=this;t.headerText="Report Incident",t.showWorkOrderStatusHistory=!1,t.showReportListing=!0,t.showTicketAttachment=!1,t.showRequiredProduct=!1,t.showTimeTrackHistory=!1,t.showServiceAppointment=!1,t.WorkOrderDetailTab=!1,t.showNotes=!1;var e=`id=${t.workOrderId}&ticketId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;r["a"].FetchReportIncidentRecords(e).then((function(e){t.ReportIncidentListingData=e.data.result.data,t.totalRecord=e.data.result.data[0].TOTALRECORDS,t.refreshKey+=1}))},ShowHideMap:function(){var t=$("#icnToggleMap");0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map",t.hasClass("fa-angle-double-down")&&(t.removeClass("fa-angle-double-down"),t.addClass("fa-angle-double-up"))):(this.isShowMap=!1,this.mapHeaderText="Expand map",t.hasClass("fa-angle-double-up")&&(t.removeClass("fa-angle-double-up"),t.addClass("fa-angle-double-down")))},RequiredProduct:function(){var t=this;t.headerText="Required Product",t.showServiceAppointment=!1,t.showWorkOrderStatusHistory=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1,t.showRequiredProduct=!0},TimeTrackHistory:function(){var t=this;t.headerText="Time Track History",t.showTimeTrackHistory=!0,t.showReportListing=!1,t.showTicketAttachment=!1,t.showWorkOrderStatusHistory=!1,t.showServiceAppointment=!1,t.WorkOrderDetailTab=!1,t.showRequiredProduct=!1},FetchRecords:async function(){var t=this;t.mapObj=[];var e="moduleName=TICKETING&subModuleCode=FSM_WORKORDER&id="+t.workOrderId;await r["a"].ViewPageDetails(e).then((function(e){var a,i=e.data.result.LEFTDATA;t.configData=e.data.result.CONFIG_DATA,i.forEach((function(e){"LOCATION_NW"==e.name?a=e.value:"workorder_number"==e.name&&(t.WorkOrderNumber=e.value)})),"1"==e.data.result.IN_COMPLETE_ENTRY&&(t.AddEditText="Edit"),t.workOrderDetailData=e.data.result.LEFTDATA,t.WorkOrderDetailTab=!0,t.workOrderDetailData.forEach((function(e){"status_id"==e.name&&(t.WO_Status_Id=t.FilterDDLValueForID(e.value))})),t.isLocateorNonLocate=e.data.result.IS_FSM_LOCATING;var s={latlong:a,refValue:"62887053677063",popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:a,longitude:a},polygons:[{name:"",latLong:[{latitude:a,longitude:a}]}],address:"",priority:"",color_code:""};t.mapObj.push(s),t.isShowMap=!0}))}}},nt=rt,lt=Object(p["a"])(nt,i,s,!1,null,null,null);e["default"]=lt.exports},e558:function(t,e,a){"use strict";a("5c42")},f5f8:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".my-popups .modal-body .user-guide{position:absolute;right:23px!important;top:15px!important;background-color:transparent!important}",""]),t.exports=e},fc96:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[t._l(t.AttachmentList,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),e("div",{staticClass:"box border positionrelative float-left w-100"},[e("div",{staticClass:"default-tags"},[e("div",{staticClass:"defaultpic_control"},["FSM"==t.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?e("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:t.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-placement":"left"},on:{click:function(e){return t.openVideoPlayer(a.C[0].ATTACHMENTFULLPATH,a.ATTACHMENT_NAME,"",a.GEOFILE_PATH)}}},[e("em",{staticClass:"fa fa-globe"})]):t._e(),1==t.ListViewAttachment&&1==t.CheckExtension(a.attachment_desc,a.GEOFILE_PATH)?e("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:t.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(e){return t.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[e("em",{staticClass:"fa fa-eye"}),e("br")]):t._e(),e("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:t.$t("DownloadFile"),"data-placement":"left"},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"}),e("br")]),a.CREATED_BY==t.UserId?e("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:t.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash text-danger"}),e("br")]):t._e()])]),e("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t.setImageIcon(a)?"word-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-text-o"}):t._e():e("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:t.setImageIcon(a),alt:""}}):e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),e("hr",{staticClass:"my-1"}),e("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[e("div",{staticClass:"col-12 textelipsis px-2"},[t._v(t._s(a.attachment_name))]),e("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[e("small",{staticClass:"float-left textelipsis col-6 p-0"},[e("span",[t._v(t._s(a.PostedBy))])]),e("small",{staticClass:"float-right col-6 text-right p-0"},[t._v(t._s(t.$options.filters.formatDateTime(a.CREATED_AT)))])])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2),t.ShowGPXFile?e("ShowGPXFile",{attrs:{GpxFileXmlData:t.GpxFileXmlData,videoFilePath:t.videoFilePath,gpxFilePath:t.gpxFilePath}}):t._e()],1)},s=[],o=a("9769"),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("ViewOnMap")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{attrs:{id:"video_player_box"}},[e("div",{staticStyle:{position:"absolute",top:"249px",left:"16%",color:"#FFF","font-size":"36px !important",display:"none"},attrs:{id:"div_videoLoad"}},[t._v("Loading...")]),e("input",{attrs:{type:"hidden",id:"hiddn_XmlFile"},domProps:{value:t.GpxFile}}),e("input",{attrs:{type:"hidden",id:"hiddn_GpxXmlData"},domProps:{value:t.GpxFileXmlData}}),e("video",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"my_video",preload:"none"}},[e("source",{attrs:{src:t.videoFilePath}})])]),e("div",{staticClass:"dDataDropZone",attrs:{id:"gpxCtr"}},[e("div",{attrs:{id:"intro"}},[e("div",{staticClass:"map_canvas map_ipadcontrol",staticStyle:{"min-height":"496px","min-width":"600px"},attrs:{id:t.mapContainer}})])]),e("a",{staticClass:"bg-primary text-white map-botton change-map-icon",attrs:{href:"javascript:;",title:t.MapTitle},on:{click:t.changeMapViewForGpx}},[e("i",{class:t.MapClass})]),t._m(0),t._m(1)])])])])])])},n=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"video_controls_bar"}},[e("div",[e("button",{staticClass:"btn btn-info",staticStyle:{width:"90px",float:"left"},attrs:{id:"playpausebtn"}},[t._v("Pause")]),e("input",{staticClass:"slider",staticStyle:{width:"80%"},attrs:{id:"seekslider",type:"range",min:"0",max:"100",value:"0",step:"1"}}),e("span",{attrs:{id:"curtimetext"}},[t._v("00:00")]),t._v(" / "),e("span",{attrs:{id:"durtimetext"}},[t._v("00:00")])])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"none"},attrs:{id:"appTitle"}},[e("span",{attrs:{id:"appName"}},[t._v("d3.gpx")]),t._v(" "),e("span",{staticClass:"sample"})])}],l=(a("14d9"),a("e11e")),d=a.n(l),c=(a("6cc5"),a("bfab"),{props:{GpxFileXmlData:{type:String,required:!0},videoFilePath:{type:String,required:!0},gpxFilePath:{type:String,required:!0}},data(){return{isLoading:!1,map:null,mapContainer:"Gpx",mapTypeForGpx:"streets-v11",GpxFile:"",vid:"",playbtn:"",seekslider:"",curtimetext:"",durtimetext:"",d3gpx:"",MapClass:"fa fa-map-o",MapTitle:"Street View"}},created:function(){var t=this;let e=document.createElement("script");e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"),document.head.appendChild(e),setTimeout(()=>{this.initMap(),t.intializePlayer()},2e3)},methods:{initMap:function(){var t=this;t.map=d.a.map(t.mapContainer).setView([51.505,-.09],13),d.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t.map);var e=t.gpxFilePath;new d.a.GPX(e,{async:!0})},changeMapViewForGpx:function(){var t=this;"fa fa-map-o"==t.MapClass?(t.mapTypeForGpx="streets-v11",t.MapClass="fa fa-map",t.MapTitle="Satellite View"):(t.mapTypeForGpx="satellite-v9",t.MapClass="fa fa-map-o",t.MapTitle="Street View"),t.getGPXFile(),$(".map-botton.change-map-icon").tooltip("dispose"),setTimeout((function(){$(".map-botton.change-map-icon").tooltip()}),100)},getGPXFile:function(){var t=this;document.getElementById("hiddn_XmlFile").value;var e=(new DOMParser).parseFromString(document.getElementById("hiddn_GpxXmlData").value,"text/xml"),a={d:e,t:t.mapTypeForGpx},i=i||function(){var t,e,a,i,s,o,r,n,l,d,c,u,p,m,h,f,v,S,g,b,_,y,C,T,k=-1,I=!1,A=[],D=[],w=[],x=[],E=[],F=[],N=[],L=[],O=d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]]),R={top:10,right:10,bottom:10,left:10},M=650-R.left-R.right,$=50-R.bottom-R.top,P=0,B=0,G=!1,V=.2,U=0,H=[.1,.001,625e-7,625e-8],z=0,W=[],q=!0,Y=6,j=function(t){if(d3.event&&d3.event.sourceEvent){B=S.invert(d3.mouse(this)[0]);var s=Math.abs(window.innerHeight-z)*(2/3),o=Math.min(Math.abs(d3.event.sourceEvent.y-z),s),r=o/s,n=Y;return U=0,r>=0&&r<.25?(U=0,n=Y):r>=.25&&r<.5?(U=1,n=4.242640687119285):r>=.5&&r<.75?(U=2,n=3):r>=.75&&r<=1&&(U=3,n=2.1213203435596424),_.transition().duration(200).attr("r",n),X(),void J()}t&&b.call(g.extent([e[0],e[0]])).call(g.event),P=g.extent()[0],_.attr("cx",S(P));var l=d3.time.format("%d %b %Y %I:%M:%S %p"),d=Math.round(P),c=l(new Date(d));d3.select("div#console").text(c),d3.select("svg#testArea circle.track").attr("transform",(function(t){return"translate("+h([a(new Date(d)),i(new Date(d))])+")"})),ot(new Date(d))},K=function(){B=P},J=function(t){if(G)return!1;G=!0,d3.select("button#playpausebtn").attr("disabled","true"),d3.timer((function(){var t=H[U];(t>V||t<0)&&(t=V),console.log("first Current Value: - "+P),P=Math.abs(P-B)<.001?B:B*t+P*(1-t),console.log("Current Value: - "+B),b.call(g.extent([P,P])).call(g.event);var e=Math.round(P/1e3)!==Math.round(B/1e3);return e||d3.select("button#playpausebtn").attr("disabled",null),!(G=e)}),200)},X=function(){clearTimeout(k),k=-1,I=!1,G=!1,d3.select("button#playpausebtn").text("Play")},Q=function(t){k=setTimeout((function(){if(G)return!1;G=!0,I=!0,d3.select("button#playpausebtn").text("Pause"),B=e[1];var t=new Date(g.extent()[0]),a=new Date;d3.timer((function(){var e=new Date-a;P=t.getTime()+e,b.call(g.extent([P,P])).call(g.event),console.log(P);var i=Math.round(P/1e3)<Math.round(B/1e3),s=!G||!(G=i)||!I||-1==k;return s&&(d3.select("button#playpausebtn").text("Play"),X()),s}))}),t?0:3e3)},Z=function(t,e){return t<<e<0?Z(t,--e):t<<e},tt=function(){var t=at(C),e=t[0],a=t[1],i=f.bounds(m),s=Z(.95/Math.max((i[1][0]-i[0][0])/e,(i[1][1]-i[0][1])/a),8);s=Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),s=Math.min(s,v.scaleExtent()[1]),s=Math.max(s,v.scaleExtent()[0]);var o=h.scale(s/2/Math.PI)(d3.geo.centroid(m)),r=h([0,0]),n=[e/2-(o[0]-r[0]),a/2-(o[1]-r[1])];v.scale(s).translate(n)},et=function(){var e=!0;d3.event&&(r==d3.event.scale?(e=!1,q=!1):(e=!0,q=!0),q&&(W=d3.event.translate,q=!1),r=d3.event.scale);var s=d3.geo.tile().size(at(C)).scale(v.scale()).translate(v.translate())();if(h.scale(v.scale()/2/Math.PI).translate(v.translate()),e||!d3.event)C.select("path.trackpath").attr("d",f).attr("transform",null);else{var o=d3.event.translate[0]-W[0],n=d3.event.translate[1]-W[1];C.select("path.trackpath").attr("transform");C.select("path.trackpath").attr("transform","translate("+[o,n]+")")}var l=Math.round(g.extent()[0]);C.select("circle.track").attr("transform",(function(t){return"translate("+h([a(new Date(l)),i(new Date(l))])+")"}));var d=T.attr("transform","scale("+s.scale+")translate("+s.translate+")").selectAll("image").data(s,(function(t){return t}));d.exit().remove(),d.enter().append("image").attr("xlink:href",(function(e){return"https://api.mapbox.com/styles/v1/mapbox/"+t+"/tiles/"+e[2]+"/"+e[0]+"/"+e[1]+"?access_token=pk.eyJ1Ijoic2VxdWVsZ3JvdXAiLCJhIjoiY2pmMHUyaDhjMDM2djJxbG5iMDJ5aTB5dyJ9.V1L6SU58S2GIyFS2BP20SA"})).attr("width",1).attr("height",1).attr("x",(function(t){return t[0]})).attr("y",(function(t){return t[1]}))},at=function(t){return[parseInt(t.style("width"),10),parseInt(t.style("height"),10)]},it=function(t,e,a){if(e.length==a.length){var i=d3.extent(e),s=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=s[0]&&void 0!=s[1]){for(var r=[],d=0;d<e.length;d++)r.push({date:e[d],speed:a[d]});n=300,l=100,u=d3.time.scale().range([0,n]).domain(i).clamp(!0),p=d3.scale.linear().range([l,0]).domain(s).clamp(!0),o=d3.time.scale().domain(e).range(a).clamp(!0);var c=d3.svg.line().x((function(t){return u(t.date)})).y((function(t){return p(t.speed)}));t.style("float","left").style("width",n+3*R.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var m=t.append("svg").attr("id","speedChart").attr("class","dataChart").attr("width",n+"px").attr("height",l+"px").style("padding-left",4*R.left+"px").style("padding-right",3*R.left+"px").style("padding-top",2*R.left+"px").style("padding-bottom",2*R.left+"px").append("g"),h=d3.svg.axis().scale(u).orient("bottom").tickFormat(O).ticks(5).outerTickSize(0),f=d3.svg.axis().scale(p).orient("left").tickFormat((function(t){return d3.format("s")(3.6*t)})).ticks(5).outerTickSize(0).innerTickSize(-n);m.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(l+3)+")").call(h),m.append("g").attr("class","y chartAxis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Speed (kph)"),m.append("path").datum(r).attr("class","chartLine").attr("d",c)}}},st=function(t,e,a){if(e.length==a.length){var i=d3.extent(e),o=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=o[0]&&void 0!=o[1]){for(var r=[],u=0;u<e.length;u++)r.push({date:e[u],ele:a[u]});n=300,l=100,d=d3.time.scale().range([0,n]).domain(i).clamp(!0),c=d3.scale.linear().range([l,0]).domain(o).clamp(!0),s=d3.time.scale().domain(e).range(a).clamp(!0);var p=d3.svg.line().x((function(t){return d(t.date)})).y((function(t){return c(t.ele)}));t.style("float","left").style("width",n+3*R.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var m=t.append("svg").attr("id","elevationChart").attr("class","dataChart").attr("width",n+"px").attr("height",l+"px").style("padding-left",3*R.left+"px").style("padding-right",3*R.left+"px").style("padding-top",2*R.left+"px").style("padding-bottom",2*R.left+"px").append("g"),h=d3.svg.axis().scale(d).orient("bottom").tickFormat(O).ticks(5).outerTickSize(0),f=d3.svg.axis().scale(c).orient("left").tickFormat(d3.format("s")).ticks(5).outerTickSize(0).innerTickSize(-n);m.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(l+3)+")").call(h),m.append("g").attr("class","y chartAxis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Elevation (m)"),m.append("path").datum(r).attr("class","chartLine").attr("d",p)}}},ot=function(t){var e="elevationFocus",a="speedFocus",i=d3.select("svg#elevationChart g"),r=d3.select("svg#speedChart g"),n=i.select("g#"+e),l=r.select("g#"+a);if(!i.empty()&&n.empty()&&(n=i.append("g").attr("id",e),n.append("circle").attr("id",e+"Circle").attr("class","chartCircle").attr("r",2.5),n.append("text").attr("id",e+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!r.empty()&&l.empty()&&(l=r.append("g").attr("id",a),l.append("circle").attr("id",a+"Circle").attr("class","chartCircle").attr("r",2.5),l.append("text").attr("id",a+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!i.empty()){var m=s(t);n.attr("transform","translate("+d(t)+","+c(m)+")"),n.select("text#"+e+"Text").text(d3.format(",.2f")(m)+" m")}if(!r.empty()){var h=o(t);l.attr("transform","translate("+u(t)+","+p(h)+")"),l.select("text#"+a+"Text").text(d3.format(",.2f")(3.6*h)+" kph")}};return{play:function(){Q(!0)},pause:function(){X()},scroll:function(){J()},stopScroll:function(){K()},setPointerPosition:function(t){var a=Math.round(A.length*(t/100)-1);a>0?b.call(g.extent([A[a],A[a]])).call(g.event):b.call(g.extent([e[0],e[0]])).call(g.event)},loadGPXViewer:function(s){var o=s.d;t=s.t,A=[],D=[],w=[],x=[],E=[],F=[],N=[],L=[],X(),K();d3.select(o).selectAll("trk").selectAll("trkseg").selectAll("trkpt").each((function(){var t=parseFloat(d3.select(this).attr("lat")),e=parseFloat(d3.select(this).attr("lon"));w.push(t),D.push(e),L.push([e,t]),A.push(d3.select(this).select("time").node()?new Date(d3.select(this).select("time").text()):null),x.push(d3.select(this).select("ele").node()?parseFloat(d3.select(this).select("ele").text()):null),E.push(d3.select(this).select("course").node()?parseFloat(d3.select(this).select("course").text()):null),F.push(d3.select(this).select("speed").node()?parseFloat(d3.select(this).select("speed").text()):null),N.push(d3.select(this).select("pdop").node()?parseFloat(d3.select(this).select("pdop").text()):null)}));if(L.length<=1)return alert("GPX file should contain at least a track, made of at least one segment containing waypoints."),!1;d3.select("body").selectAll("div#gpxCtr *, div#appTitle div#playbackControl").remove(),e=d3.extent(A),a=d3.time.scale().domain(A).range(D).clamp(!0),i=d3.time.scale().domain(A).range(w).clamp(!0),m={type:"LineString",coordinates:L},h=d3.geo.mercator().scale(1024/Math.PI),f=d3.geo.path().projection(h),v=d3.behavior.zoom().scaleExtent([1,"Infinity"]).scale(2*h.scale()*Math.PI).translate([window.innerWidth/2,window.innerHeight/2]).on("zoom",et),S=d3.time.scale().domain(e).range([0,M]).clamp(!0),g=d3.svg.brush().x(S).extent([0,0]).on("brush",j).on("brushstart",(function(){d3.event&&d3.event.sourceEvent&&(z=d3.event.sourceEvent.y)})).on("brushend",(function(){d3.event&&d3.event.sourceEvent&&(0!=U&&K(),_.transition().duration(200).attr("r",Y))}));var r=d3.select("div#appTitle").append("div").attr("id","playbackControl"),n=d3.select("body div#gpxCtr"),l=(r.append("div").attr("id","console").style("font-size","smaller").style("font-weight","normal").style("position","absolute").style("line-height","45px").style("right","10px").style("top","0px").style("padding-right","10px"),r.append("button").attr("id","playpausebtn").style("right",M+R.left+R.right+10+170+10+"px").text("Play").on("click",(function(t){I||-1!=k?X():Q(!0)})),r.append("svg").attr("id","timeslider").attr("width",M+R.left+R.right+10).attr("height",$+R.top).style("position","absolute").style("right","170px").style("top","0px").append("g").attr("transform","translate("+R.left+",0)")),d=l.append("g").attr("class","axisLine").attr("transform","translate(0,"+($/2+3)+")").style("font-size","0 pt").call(d3.svg.axis().scale(S).tickFormat(O).tickValues(null));d.selectAll("text").remove(),d.selectAll("path").remove(),l.append("g").attr("class","x axis").attr("transform","translate(0,"+$/2+")").style("font-size","6 pt").style("fill","#fff").call(d3.svg.axis().scale(S).tickFormat(O).tickPadding(12).tickSize(0)).select(".domain").style("stroke","#111").select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("class","halo").style("stroke-opacity",1).style("stroke","#fff"),b=l.append("g").attr("class","slider").call(g),b.selectAll(".extent,.resize").remove(),b.select(".background").attr("height",$).attr("fill","#111").style("cursor","ew-resize"),_=b.append("circle").attr("class","handle").attr("transform","translate(0,"+$/2+")").attr("r",Y).style("fill","#fff"),y=n.append("div").style("width","100%").style("height","100%"),C=y.append("svg").attr("id","testArea").style("height","100%").style("width","100%").call(v),T=C.append("g"),C.append("path").datum(m).attr("class","trackpath").attr("d",f).attr("fill","none").attr("stroke","rgb(222,45,38)").attr("stroke-width",1),C.append("circle").attr("class","track").attr("id","testTrack").attr("r",4).style("fill","rgb(222,45,38)").style("stroke-width",1).style("stroke","rgb(0,0,0)");var c=n.append("div").attr("id","chartGroup");return st(c.append("div"),A,x),it(c.append("div"),A,F),tt(),et(),setTimeout((function(){j(!0)}),200),!0}}}();t.d3gpx=i,i.loadGPXViewer(a)},playPause:function(){var t=this;t.vid.paused?(100==t.seekslider.value&&(t.seekslider.value=0,t.d3gpx.setPointerPosition(t.seekslider.value)),t.vid.play(),t.d3gpx.play(),t.playbtn.innerHTML="Pause"):(t.vid.pause(),t.d3gpx.pause(),t.playbtn.innerHTML="Play")},vidSeek:function(){var t=this;t.vid.pause(),t.d3gpx.pause(),t.playbtn.innerHTML="Play";t.vid.duration,t.seekslider.value;t.d3gpx.setPointerPosition(t.seekslider.value)},seektimeupdate:function(){var t=this,e=t.vid.currentTime*(100/t.vid.duration);t.seekslider.value=e;var a=Math.floor(t.vid.currentTime/60),i=Math.floor(t.vid.currentTime-60*a),s=Math.floor(t.vid.duration/60),o=Math.floor(t.vid.duration-60*s);i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),t.curtimetext.innerHTML=a+":"+i,t.durtimetext.innerHTML=s+":"+o},intializePlayer:function(){var t=this;$(".map-botton.change-map-icon").tooltip(),t.vid=document.getElementById("my_video"),t.playbtn=document.getElementById("playpausebtn"),t.seekslider=document.getElementById("seekslider"),t.curtimetext=document.getElementById("curtimetext"),t.durtimetext=document.getElementById("durtimetext"),t.playbtn.addEventListener("click",t.playPause,!1),t.seekslider.addEventListener("change",t.vidSeek,!1),t.seekslider.addEventListener("input",t.vidSeek,!1),t.vid.addEventListener("timeupdate",t.seektimeupdate,!1),t.vid.onwaiting=function(){t.d3gpx.pause()},t.vid.onplaying=function(){t.d3gpx.play()},t.seekslider.value=0,t.getGPXFile(),t.seektimeupdate()},Close:function(){this.$parent.ShowGPXFile=!1}}}),u=c,p=(a("b586"),a("2877")),m=Object(p["a"])(u,r,n,!1,null,null,null),h=m.exports,f={components:{ShowGPXFile:h},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:"FSM",UserId:null,isLoading:!1,index:0,GpxFileXmlData:"",ShowGPXFile:!1,videoFilePath:"",gpxFilePath:""}},watch:{AttachmentData:function(t){var e=this;e.AttachmentList=t,e.AttachmentList.length>0?e.NoRecords=!1:(e.AttachmentList=[],e.NoRecords=!0)}},created(){var t=this;t.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{t.UserId=t.GetUserInfo.ID,t.GalleryImages=t.galleryImages,"undefined"!=typeof t.AttachmentData&&t.AttachmentData.length>0?(t.RequestFrom=t.AttachmentData.RequestFrom,t.AttachmentList=t.AttachmentData,t.NoRecords=!1):(t.AttachmentList=[],t.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(t,e){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",t,e),a.$parent.visible=!0},CheckExtension(t,e){var a=0;if(null==e||""==e)return"jpg"!=JSON.parse(t).Extension&&"jpeg"!=JSON.parse(t).Extension&&"png"!=JSON.parse(t).Extension&&"gif"!=JSON.parse(t).Extension||(a=1),a},setImageIcon(t){var e=this,a="/Content/Responsive/images/",i=e.getExtension(t.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(t){let e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":e.slice(a+1)},openVideoPlayer:function(t,e,a,i){var s=this;s.videoFilePath=t,s.gpxFilePath=i;var r=`videoFilePath=${t}&videoFileName=''&videoFileType=${a}&gpxFilePath=${i}`;o["a"].ShowGpxPlayer(r).then((function(t){s.GpxFileXmlData=t.data,s.ShowGPXFile=!0}))},deleteAttachment:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a="attachmentid="+t.ticket_attachment_id;o["a"].DeleteIncidentAttachment(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&"SUCCESS"==t.data.result.MSG?("AttachmentInDetail"==e.viewMode?document.getElementById("tab-attachment").click():"AttachmentInWorkOrderDetail"==e.viewMode?document.getElementById("tab-attachments").click():e.$parent.FetchAttachmentData(),e.ticket_attachment_id>0?e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")):(e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")),e.$emit("close"))):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachment_path}&fileName=${t.attachment_name}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachment_desc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.attachment_name),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},v=f,S=Object(p["a"])(v,i,s,!1,null,null,null);e["a"]=S.exports}}]);
//# sourceMappingURL=chunk-37aeb038.js.map