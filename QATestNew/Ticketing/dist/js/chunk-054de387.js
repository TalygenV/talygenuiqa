(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-054de387"],{"18ad":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,'.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:23px;top:3px}.mapboxgl-popup{width:340px;max-width:340px!important}.leaflet-popup-content .popupcontent{background:#fff}.leaflet-left .leaflet-control-zoom{display:none}.leaflet-marker-icon{border-radius:100%!important}.leaflet-popup-content p{margin:auto!important}.leaflet-popup-content-wrapper{padding:0!important}.leaflet-popup-content{margin:auto!important;line-height:1.4!important;width:340px!important}.leaflet-container a.leaflet-popup-close-button{color:#5c5c5c!important;padding:6px 5px 0 0!important}.gm-style-iw.gm-style-iw-c{background-color:#fff!important;padding-right:0!important;padding-bottom:0!important;max-width:648px!important;min-height:150px!important;padding:0!important;width:340px!important;border-radius:0}.gm-style-iw.gm-style-iw-c button.gm-ui-hover-effect{background:0 0!important;display:block!important;font-size:18px!important;border:0!important;margin:0!important;padding:0!important;position:absolute!important;cursor:pointer!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;top:-6px!important;right:-6px!important;width:36px!important;height:40px!important}.gm-style-iw.gm-style-iw-c .gm-style-iw-d{overflow:hidden!important;width:100%!important}.gm-style-iw.gm-style-iw-c #content{padding:0!important;transition:all .3s;width:100%}.gm-style-iw.gm-style-iw-c .map-pop-header{color:#fff}.gm-style-iw.gm-style-iw-c .map-pop-header.Medium{background:#4cb4fb}.gm-style-iw.gm-style-iw-c .map-pop-header.Low{background:#4db567}.gm-style-iw.gm-style-iw-c .map-pop-header.High{background:#fbc648}.gm-style-iw.gm-style-iw-c .map-pop-header.Critical{background:#ef8934}.gm-style-iw.gm-style-iw-c .map-pop-header.highprofile{background:#de0303}.gm-style-iw.gm-style-iw-c .firstHeading{font-size:16px;display:flex;align-items:center;padding:5px 10px}.gm-style-iw.gm-style-iw-c .status{font-size:12px;background:#5c5c5c;font-weight:400;color:#fff;padding:4px 6px;margin-left:5px}.gm-style-iw.gm-style-iw-c p.details{display:flex;width:100%;font-weight:bolder;font-size:14px;padding:5px 10px;margin-bottom:4px}.gm-style-iw.gm-style-iw-c p.details span{font-size:12px;font-weight:400;text-transform:capitalize}.gm-style-iw.gm-style-iw-c .view-details{display:flex;width:100%;font-weight:bolder;font-size:14px;margin-bottom:0;border-top:2px solid #bfbfbf;flex-direction:row}.gm-style-iw.gm-style-iw-c .view-details a{padding:0 5px;margin-right:5px;color:#525e65}.mapboxgl-popup-content{padding:0!important}.mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.mail-box-pop .modal-dialog{max-width:570px!important;min-height:500px!important}.mail-box-pop.eta .modal-dialog{max-width:1200px!important;min-height:500px!important}.mail-box-pop.eta .modal-body{max-height:800px!important;height:800px!important}.motabod{border-right:10px solid #e5e5e5}.movedivider{background-repeat:no-repeat;background-position:0 0;width:37px;height:57px;position:absolute;z-index:999;right:-24px;top:160px;display:none}tr.bg-danger{background-color:#f7ccd0!important}.ui-resizable-handle{z-index:9999}.custom-tab-content ul.responsive-tabs.fsmtabcontrol li a{padding:10px}.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input-remove:after,.tags-input-remove:before{background:#fff!important}div[aria-describedby=divticketquickview] .modal-dialog{max-width:85%!important}ul.tags_fsm{float:left;margin:0;padding:0}ul.tags_fsm li{float:left;margin:0 5px 5px 0;padding:0 8px;display:inline-block;color:#fff;border-radius:5px!important;font-size:12px}.tags-input span{margin-bottom:.3em}.circle-leaflet{width:55px!important;height:55px!important;line-height:55px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m2.png)!important;text-align:center!important;font-weight:700!important;position:absolute!important;top:-22px!important;left:-19px!important}.table-heading-wb .table-head-btn{padding:.5rem}.gmnoprint{right:0!important;left:auto!important}.bg-gray-faint{position:relative;background-color:#fff!important;font-family:Open Sans,sans-serif;padding:8px 16px!important;margin-top:55px!important;border:1px solid #2196f3;margin-left:12px!important}.bg-gray-faint:after{color:#2196f3;content:"\\f0d8";position:absolute;font:normal normal normal 14px/1 FontAwesome;top:-19px;left:10%;font-size:27px}.checkbox-container>input,.radio-container>input,.switch-container>input,.toggle-container>input{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.txt-m{font-size:15px;line-height:24px;margin-top:0;margin-bottom:0}.toggle-group{display:inline-flex;text-align:center;border-radius:18px}.toggle-container{display:block;max-width:100%}input:checked+.toggle{background:#448ee4;color:#fff}.toggle{flex-shrink:0;cursor:pointer;color:#999;font-weight:700;font-size:12px;padding:6px 18px;border-radius:18px!important;background-color:transparent;transition:color .125s,background-color .125s}.switch{position:relative;display:inline-block;width:60px}.sliderchk{cursor:pointer;top:0;left:3px;right:0;bottom:0;background-color:#ccc}.sliderchk,.sliderchk:before{position:absolute;transition:.4s}.sliderchk:before{content:"";height:24px;width:24px;left:6px;bottom:4px;background-color:#fff}input:checked+.sliderchk{background-color:#2196f3}input:focus+.sliderchk{box-shadow:0 0 1px #2196f3}input:checked+.sliderchk:before{transform:translateX(26px)}.sliderchk.round{border-radius:34px!important}.sliderchk.round:before{border-radius:50%;top:0}.textname{top:29px;position:absolute;left:4px;font-size:13px;color:#999;font-weight:700}.timelegend{height:10px;padding:0 15px;display:inline-block}.timelegend.min10{background-color:#96d52d}.timelegend.min20{background-color:#f0c141}.timelegend.min30{background-color:#f18d76}.showduration{float:left;color:#565656!important;position:absolute;left:4px;top:0;cursor:pointer;font-size:18px;background-color:#fff;padding:7px 18px;margin:10px;margin-left:8px;font-family:Roboto,Arial,sans-serif;z-index:999}#divdataviewdata .card-box .custom-checkbox{padding-left:1rem!important}.tags-input-root .typeahead-badges{padding-top:.25rem!important}#divmapdata .map-result img{width:auto!important}.filterscrollForCardView{scrollbar-width:thin;scrollbar-color:#848484}.filterscrollForCardView::-webkit-scrollbar{width:8px;height:8px}.filterscrollForCardView::-webkit-scrollbar-track{background-clip:content-box;border:2px solid transparent}.filterscrollForCardView::-webkit-scrollbar-thumb{background-color:#848484}.filterscrollForCardView::-webkit-scrollbar-corner,.scrollbar-1::-webkit-scrollbar-track{background-color:#848484}.typeahead-badges>span{max-width:195px}[data-color_code]:after{background-color:attr(data-color_code)}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#f5f1ef!important}.pinscreenMap{background:#17a2b8;border-left:0!important}.pinscreenMap,.unpinscreenMap{padding:15px 0!important;width:50px;cursor:pointer}.unpinscreenMap{background:#525f65}.unpinscreenMap i{transform:rotate(-45deg)}.map-actions span.esri_prof:hover{transform:none!important}.map-actions span.esri_prof a{color:#212529}.mCustomScrollBox,.mCustomScrollBox .mCS-light{max-height:inherit!important}#scrollbarreplyuserguide{max-height:350px}a[href="/Ticketing/Index"]{background:none!important}.theme-primary.partition{overflow:visible}',""]),t.exports=e},"33e4":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"container-fluid mt-2"},[e("div",[e("div",{staticClass:"row mt-0.5",attrs:{id:"checkForZone"}},["Google"==t.mapType&&1==t.config.isShowSearchBox?e("div",{staticClass:"col-lg-5 col-sm-12"},[e("div",{staticClass:"form-group d-flex"},[e("div",{staticClass:"input-group customsearchbox divcityshown"},[1==t.config.isShowSearchBox?e("input",{staticClass:"form-control",attrs:{type:"text",id:"pac-input",maxlength:"50",placeholder:"Enter Your Location or Zip Code"}}):t._e()])])]):t._e(),e("div",{staticClass:"col-lg-3 col-sm-12"},[void 0!=t.config&&1==t.config.isShowCurrentLocation?e("div",{staticClass:"form-group"},[e("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:t.CurrentLocation}},[t._v("Use my location")]),t._v("    OR "),e("a",{staticClass:"btn btn-warning float-right",attrs:{href:"javascript:;"},on:{click:t.ImportFilePopup}},[e("i",{staticClass:"fa fa-upload mr-2"}),t._v("Click To import Geo JSON File.")])]):t._e()])]),e("div",{staticClass:"search"},[e("div",{staticClass:"map-result"},[e("div",{staticClass:"map-actions"},[void 0!=t.config&&1==t.config.isShowGetDirection?e("span",{staticClass:"save legends_low"},[1==t.config.isShowGetDirection?e("a",{class:{"mp-active":0==t.showSetting,"mg-success":1==t.showSetting},attrs:{href:"javascript:;",title:"GetDirection"},on:{click:t.GetDirection}},[e("em",{staticClass:"fa fa-map-marker"})]):t._e()]):t._e(),t._v("  "),void 0!=t.config&&1==t.config.isShowLocator?e("span",{staticClass:"save legends_low"},[1==t.config.isShowLocator?e("a",{class:{"mp-active":0==t.showSetting,"mg-success":1==t.showSetting},attrs:{href:"javascript:;",title:"View Locator on map"},on:{click:t.ViewLocatorOnMap}},[e("em",{staticClass:"fa fa-map-marker"})]):t._e()]):t._e(),t._v("  "),void 0!=t.config&&1==t.config.isShowEtaMap?e("span",{staticClass:"edit legends_profile"},[1==t.config.isShowEtaMap?e("a",{attrs:{href:"javascript:;",title:"ETA Map"},on:{click:function(e){return t.LoadLocatorDataonMap("locator")}}},[e("em",{staticClass:"fa fa-map"})]):t._e()]):t._e(),void 0!=t.config&&1==t.config.isShowEtaPipeLines?e("span",{staticClass:"edit legends_high esri_prof"},[t._m(0),e("div",{staticClass:"dropdown"},[t._m(1),e("div",{staticClass:"dropdown-menu esri_prof_data",staticStyle:{display:"block"}},[t._m(2),e("div",{staticClass:"w-100 mb-2"},t._l(t.UtilityMapData,(function(a,o){return e("a",{key:o,staticClass:"dropdown-item p-0",attrs:{href:"javascript:;"}},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[e("input",{staticClass:"custom-control-input dynamic customcheckboxUtilityMap",attrs:{type:"checkbox"}}),e("label",{staticClass:"custom-control-label pt-1",attrs:{type:"checkbox"}},[e("label",{staticClass:"font-weight-bold"},[t._v(t._s(a.LAYER_NAME))])])])])})),0),e("div",[e("a",{staticClass:"btn btn-primary d-block text-white py-2",attrs:{href:"javascript:;",title:"Go"},on:{click:t.ShowUtilityMap}},[t._v("Go"),e("i",{staticClass:"fa fa-angle-double-right pl-2"})])])])])]):t._e()]),t.showSaveZone?e("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"0px","z-index":"9999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:t.OpenSaveZone}},[t._m(3)]):t._e(),t.showDeleteFeature?e("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"1670px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:t.DeleteFeature}},[t._m(4)]):t._e(),e("div",{staticClass:"map"},[e("div",{staticClass:"map_canvas map_ipadcontrol",style:{"min-height":void 0==t.mapHeight?"500px":t.mapHeight,"min-width":void 0==t.mapWidth?"100%":t.mapWidth},attrs:{id:t.mapContainer}}),e("div",{staticClass:"w-100 float-left",staticStyle:{position:"absolute",top:"0px"}},[0==t.showSetting?e("a",{staticClass:"showduration anchideduration",attrs:{title:"Hide"},on:{click:t.ShowTravelMode}},[t._v("Hide")]):t._e(),1==t.showSetting?e("a",{staticClass:"showduration ancshowduration",attrs:{title:"Show Setting"},on:{click:t.ShowTravelMode}},[t._v("Show Setting")]):t._e(),e("div",{staticClass:"position-absolute float-left my24 mx24 bg-gray-faint round settingPopup d-none",staticStyle:{"z-index":"999999"}},[e("div",{attrs:{id:"params"}},[t._m(5),t._v(" "),e("h4",{staticClass:"txt-m font-weight-bold"},[t._v("Choose Travel Mode:")]),t._m(6),e("h4",{staticClass:"txt-m font-weight-bold"},[t._v("Choose Maximum Duration:")]),e("div",{staticClass:"w-100 float-left",staticStyle:{"margin-bottom":"15px"}},[e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:t.time},on:{onChange:function(e){return t.TravelMode(t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes10")])]),e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:2*t.time},on:{onChange:function(e){return t.TravelMode(2*t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes20")])]),e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:3*t.time},on:{onChange:function(e){return t.TravelMode(3*t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes30")])])])])])])])])])])]),e("div",{staticClass:"float-right mt-2"},[void 0!=t.config&&1==t.config.isShowSaveExtentButton?e("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{title:"",name:"btnSaveCity",tabindex:"6","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:t.SaveMapExtent}},[e("i",{staticClass:"fa fa-floppy-o pr-1"}),t._v("Save")]):t._e()]),t.showAddZone?e("AddZone",{attrs:{zoneEditData:t.zoneEditData,polygonData:t.polygonData,polygonNewShapeId:t.polygonNewShapeId},on:{DeleteFeature:t.DeleteFeature,GetZoneManagementData:t.GetZoneManagementData,Close:t.Close}}):t._e(),t.showSaveZonePopUp?e("SaveZone",{attrs:{zoneEditData:t.zoneEditData},on:{SaveZoneData:t.SaveZoneData,OpenSaveZone:t.OpenSaveZone,Close:t.Close}}):t._e(),t.showImportFilePopup?e("ImportGeoJsonFileVue",{on:{gpxData:t.gpxData,Close:t.Close}}):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[e("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[e("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-100 bg-grey"},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[e("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}}),e("label",{staticClass:"custom-control-label pt-1",attrs:{for:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}},[t._v("SelectAll")])])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"background-color":"rgb(40, 167, 69)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Save Zone"}},[e("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v("Save Zone")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{left:"-121px","background-color":"rgb(240, 4, 4)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-right":"122px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Delete Save Zone"}},[e("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[e("i",{staticClass:"fa fa-trash pr-2"}),t._v("Delete Selected Shape")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row float-left"},[e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min10"}),t._v(" Minutes10 ")]),e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min20"}),t._v(" Minutes20 ")]),e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min30"}),t._v(" Minutes30 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mr12 toggle-group text-center"},[e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"foot-walking"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Walking")])]),e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"cycling-regular"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Cycling")])]),e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"driving-car",checked:"checked"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Driving")])])])}],n=(a("14d9"),a("13d5"),a("e192")),r=a.n(n),l=(a("ac6d"),a("e11e")),s=a.n(l),p=(a("6cc5"),a("cae8")),c=a.n(p),d=(a("bdd0"),a("885b")),m=a.n(d),g=(a("c307"),a("2573"),a("20d6"),a("5fbf"),a("ac00")),u=(a("1615"),a("9769")),h=a("3975"),f=a("e222"),v=(a("5bfd"),a("125d"),a("afaa")),y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Upload File")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[t._m(0),e("div",{staticClass:"custom-file"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"d-none",attrs:{type:"file",name:"FileSrc",id:"flFiles",accept:".gpx"},on:{change:t.handleFileChange}}),e("div",{staticClass:"bootstrap-filestyle input-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.fileName,expression:"fileName"}],staticClass:"form-control disabled",attrs:{type:"text",disabled:"",autocomplete:"off"},domProps:{value:t.fileName},on:{input:function(e){e.target.composing||(t.fileName=e.target.value)}}}),t._m(1)])])])])]),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)]),e("div",{staticClass:"modal-footer col-md-12"},[e("a",{staticClass:"btn btn-success formbtn",class:{disabled:!0===t.isSending},attrs:{title:"Import",name:"btnSave",disabled:t.isSending,tabindex:"6"},on:{click:function(e){return t.SaveGeoJsonFile()}}},[e("i",{staticClass:"fa fa-upload pr-2"}),t._v("Import")]),e("a",{staticClass:"btn btn-danger formbtn btnCancel",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v("Cancel")])])])])])],1)},b=[function(){var t=this,e=t._self._c;return e("label",{attrs:{for:"Name"}},[t._v("GeoJSONFile:"),e("span",{staticClass:"text-danger"},[t._v("*")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group-append",staticStyle:{cursor:"pointer"}},[e("span",{staticClass:"group-span-filestyle input-group-btn input-group-text bg-white",attrs:{tabindex:"0"}},[e("label",{staticClass:"mb-0 font-weight-normal",attrs:{title:"Click here to select a file.",for:"flFiles"}},[t._v("Choose File")])]),e("span",{staticClass:"input-group-text border-0 bg-transparent p-0 pl-2"},[e("a",{staticClass:"round-icon-small btn-danger-light clsattclear",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"}},[e("i",{staticClass:"fa fa-undo"})]),e("a",{staticClass:"round-icon-small btn-danger-light clsattremove d-none",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Remove"}},[e("i",{staticClass:"fa fa-times"})])])])}],L={data(){return{trackPoints:[],latlng:[],polygonObj:{},fileName:"",FormSchema:[{layoutType:"double",Data:[{astype:"RadioField",label:"ZoneType",name:"TypeFor",value:"Locator",placeholder:"",config:{options:[{name:"Locator Area",value:"Locator"},{name:"High Profile",value:"High_Profile"},{name:"Locator After Hours",value:"LocatorAfterHours"},{name:"Yard",value:"Yard"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!0}},{astype:"TextField",name:"Email Id",value:"",visibility:!1,placeholder:"Email Id",chktxtIndex:0,config:{showAddIcon:!0,onAddButtonClick:this.AddEmailFeild},validationRules:{required:!1,max:100}}]}]}},methods:{AddEmailFeild:function(){var t=this;t.FormSchema[0].Data.push({astype:"TextField",name:"txtZoneName",value:"",placeholder:"Email Id",chktxtIndex:this.FormSchema[0].Data.length,config:{showAddIcon:!0,onaddIconBackground:"bg-danger",onAddButtonClick:this.RemoveFile,addIcon:"fa fa-trash"},validationRules:{required:!1,max:100}})},RemoveFile:function(t,e){var a=this,o=a.FormSchema[0].Data.findIndex(t=>t.chktxtIndex===e.chktxtIndex),i=o;o>-1&&a.FormSchema[0].Data.splice(o,1),i>-1&&a.FormSchema[0].Data.splice(i,1)},onChangeRadio:function(t){"Yard"==this.FormSchema[0].Data[0].value?(this.FormSchema[0].Data[1].visibility=!0,this.FormSchema[0].Data[1].isVisible=!0):(this.FormSchema[0].Data[1].visibility=!1,this.FormSchema[0].Data[1].isVisible=!1,this.zoneEditData.YARD_EMAILS.split(",").length>1&&this.zoneEditData.YARD_EMAILS.split(",").forEach((t,e)=>{0!=e&&(this.FormSchema[1].Data[e].visibility=!1)}))},async handleFileChange(t){var e=this;const a=t.target.files[0];if(e.fileName=t.target.files[0].name,!a)return;const o=await this.readGpxFile(a);e.latlng.push({latLong:o}),e.polygonObj={latlong:"",refValue:e.zoneId,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:"",longitude:""},polygons:e.latlng,address:"",priority:"",color_code:""}},Close(){var t=this;t.$emit("Close")},SaveGeoJsonFile:function(){var t=this,e="";if(""==t.fileName)return t.ShowAlert("Please Select File","warning"),!1;var a=t.FormSchema[0].Data[0].value;"Yard"==t.FormSchema[0].Data[0].value&&t.FormSchema[0].Data.forEach((t,a)=>{0!=a&&(e+=t.value+",")}),t.$emit("gpxData",t.polygonObj,e,a),t.$emit("Close")},async readGpxFile(t){return new Promise((e,a)=>{const o=new FileReader;o.onload=t=>{const a=t.target.result,o=this.parseGpx(a);e(o)},o.onerror=t=>{a(t)},o.readAsText(t)})},parseGpx(t){var e=this;const a=new DOMParser,o=a.parseFromString(t,"text/xml");e.trackPoints=[];const i=o.querySelectorAll("trkpt");return i.forEach(t=>{const a=parseFloat(t.getAttribute("lat")),o=parseFloat(t.getAttribute("lon")),i=t.querySelector("time").textContent;e.trackPoints.push({latitude:a,longitude:o,time:i})}),e.trackPoints}}},w=L,C=a("2877"),k=Object(C["a"])(w,y,b,!1,null,null,null),x=k.exports,_={components:{AddZone:h["a"],SaveZone:f["a"],ImportGeoJsonFileVue:x},props:{mapType:{required:!0},Data:{required:!0},isShowDrawButton:{required:!0,type:String},config:{required:!1},mapWidth:{required:!1},mapHeight:{required:!1},latLng:{required:!1},mapContainer:{required:!0},selectedUser:{required:!0},UtilityMapData:{required:!0},editZone:{required:!0},zoneId:{required:!0}},data:function(){return{isLoading:!1,zoneEditData:[],showDeleteFeature:!1,showSaveZonePopUp:!1,showSaveZone:!1,showAddZone:!1,time:600,colors:"",showSetting:null,address:[],UserName:null,UserEmailId:null,imageMarker:[],mapLayer:[],map:null,locations:[],locationPriority:[],locationname:[],ticketNumberList:[],LocationwithPriority:null,markers:[],mapZoom:!1,mapMarker:[],markerCluster:null,startingPoint:null,showSettingPopup:!1,lngLatData:[],fullAddress:[],leafLetReferenceNumber:[],polygonData:[],polygonNewShapeId:null,zoneData:[],drawingManager:null,currentSelectedShape:null,myPolygon:null,editableLayers:null,showHideEtaMap:!1,showImportFilePopup:!1,emailString:"",ZoneType:""}},watch:{Data:{handler:function(){setTimeout(()=>{this.ShowLocationOnGoogleMap(),"LeafLet"==this.mapType&&this.initLeafletMap(this.Data)},500)},deep:!0},config:{handler:function(){this.ShowDrawingManager()},deep:!0},selectedUser:{handler:function(){this.ViewLocatorOnMap(this.selectedUser)},deep:!0},latLng:{handler:function(){this.ViewOnMap()}}},mounted:function(){"Google"==this.mapType?setTimeout(()=>{},2e3):"MapBox"==this.mapType?setTimeout(()=>{this.initMapBox(this.Data,"pk.eyJ1IjoiaGFycmlzbHVtZW4iLCJhIjoiY2s2dWtrMzJ3MDk2NTNncXMxMjlxa29mcCJ9.riRtpclzr9XfExHhclre8A")},2e3):"Esri"==this.mapType?setTimeout(()=>{this.initLeafletMap(this.Data)},2e3):"LeafLet"!=this.mapType&&"Esri"!=this.mapType||setTimeout(()=>{this.initLeafletMap(this.Data)},2e3)},created:function(){this.UserName=this.GetUserInfo.Name,this.UserEmailId=this.GetUserInfo.Email,void 0!=this.myPolygon&&null!=this.myPolygon&&this.myPolygon.setMap(null);let t=document.createElement("script");t.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAJdx4gmhGKWjPTBBVk5riFgpbE0lGS-xM&callback=initAutocompletes&libraries=geometry,drawing,places&v=weekly"),document.head.appendChild(t);let e=document.createElement("script");e.setAttribute("src","https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"),document.head.appendChild(e);let a=document.createElement("script");a.setAttribute("src","~/Scripts/FsmMaps/fontawesome-markers.min.js"),document.head.appendChild(a),setTimeout(()=>{this.ShowLocationOnGoogleMap()},2e3),setTimeout(()=>{this.MapExtendLocation()},3e3),"Google"==this.mapType&&setTimeout(()=>{this.initAutocompletes()},2e3)},methods:{MapExtendLocation:function(){var t=this;if("Google"==t.mapType){let n=[];t.Data[0].mapExtendLatLong.forEach((function(t){n.push(new google.maps.LatLng(t[1],t[0]))}));for(var e=new google.maps.LatLngBounds,a=n,o=0,i=a.length;o<i;o++)e.extend(a[o]);t.map.fitBounds(e)}else if("MapBox"==t.mapType){let e=[];t.Data[0].mapExtendLatLong.forEach((function(t){e.push(t)})),t.map.fitBounds(e)}else{let e=[];t.Data[0].mapExtendLatLong.forEach((function(t){e.push([t[1],t[0]])}));var n=s.a.polygon(e);t.map.fitBounds(n.getBounds())}},ImportFilePopup:function(){var t=this;t.showImportFilePopup=!0},initAutocompletes:function(){var t=this;const e=document.getElementById("pac-input"),a=new google.maps.places.SearchBox(e);t.map.addListener("bounds_changed",()=>{a.setBounds(t.map.getBounds())}),google.maps.event.addListener(a,"places_changed",(function(){var e,o,i=a.getPlaces(),n=new google.maps.LatLngBounds;for(e=0;o=i[e];e++)(function(t){n.extend(t.geometry.location)})(o);t.map.fitBounds(n),a.set("map",t.map),t.map.setZoom(Math.min(t.map.getZoom(),12))}))},CurrentLocation:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(t.GetCurrentLocation,t.geoError):alert("Geolocation is not supported by this browser.")},GetCurrentLocation:function(t){var e=this;if(t){var a=t.coords.latitude,o=t.coords.longitude,i=new google.maps.LatLng(a,o);e.map.setCenter(i),e.map.setZoom(18)}},SaveMapExtent:function(){var t=this;t.$emit("SaveMapExtent",t.fullAddress,t.mapType)},ShowUtilityMap:function(){var t=this,e=JSON.parse(localStorage.getItem("coordinates"));null==e&&(e={x:"43.133971",x1:"43.132812",y:"-76.088009",y1:"-76.087183"}),Object(v["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/layers/GraphicsLayer"]).then(([a,o,i,n,r])=>{var l=new a({basemap:"hybrid"});new o({container:"utilitymap",map:t.map,extent:{xmin:-13856051.7748509,ymin:2821931.08215458,xmax:-7488766.97004404,ymax:6364777.09974285,spatialReference:102100}});""!=layerUrl&&null!=layerUrl&&(Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00"},Colors.random=function(){var t,e=0;for(var a in this.names)Math.random()<1/++e&&(t=a);return{name:t,rgb:this.names[t]}},String(layerUrl).split(",").forEach((function(t){var e=String(t).split("^")[1];""!=e&&null!=e&&"null"!=e&&"undefined"!=typeof e||(e=String(Colors.random().rgb).toUpperCase());const a={type:"simple",symbol:{color:e,type:"simple-line",style:"solid"},visualVariables:[{type:"size",field:"ELEV_GAIN",minDataValue:0,maxDataValue:2300,minSize:"3px",maxSize:"7px"}]};var o=String(t).split("^")[0];l.add(new i({url:o,renderer:a}))})));new o({container:"utilitymap",map:l,basemap:"hybrid",center:[e.y,e.x],zoom:17});var s=new r;l.add(s);var p=null;void 0!=e&&null!=e&&(p=[[e.y1,e.x1],[e.y1,e.x],[e.y,e.x],[e.y,e.x1]]);p={type:"polygon",rings:p};var c={type:"simple-fill",color:[255,0,0,.35],outline:{color:[255,0,0],width:1}},d=new n({geometry:p,symbol:c});s.add(d)}).catch(t=>{console.error(t)})},GetDirection:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(t.showRoutePosition,t.geoError):alert("Geolocation is not supported by this browser.")},geoError:function(){},showRoutePosition:function(t){var e=this;if(t){var a=t.coords.latitude,o=t.coords.longitude,i=new google.maps.LatLng(a,o),n=new google.maps.LatLng(e.Data[0].pinLatLong.latitude.split(",")[0],e.Data[0].pinLatLong.latitude.split(",")[1]),l=localStorage.getItem("UserImage");String(l).indexOf("blob")<=0&&(l="https://app.talygen.com/Content/images/Black/user.png");var p={lat:a,lng:o};if("Google"==e.mapType){var c={url:l,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},d=new google.maps.Marker({position:p,icon:c,map:e.map}),m=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+l+"' class='marker' /> <div style='display:block;width: 270px;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"});d.addListener("click",(function(){m.open(e.map,this)})),e.imageMarker.push(d);var g={path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},u={strokeColor:"#ff0000",strokeOpacity:0,fillOpacity:0,icons:[{icon:g,offset:"0",repeat:"4px"}]},h={map:e.map,suppressMarkers:!1,polylineOptions:u},f=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer(h),y=new google.maps.LatLng(a,o);function b(t,e){var a="DRIVING";t.route({origin:i,destination:n,travelMode:google.maps.TravelMode[a]},(function(t,a){if("OK"==a){e.setDirections(t);var o='<span style="font-weight:bold;">Distance: </span>'+t["routes"][0].legs[0].distance.text+'<br /><span style="font-weight:bold;">Time: </span>'+t["routes"][0].legs[0].duration.text,i=new google.maps.InfoWindow({content:o});google.maps.event.addListener(u,"click",(function(t){i.setPosition(t.latLng),i.open(map)})),google.maps.event.addListener(map,"click",(function(){i.close()}))}else window.alert("Directions request failed due to "+a+". Route exceeds maximum distance limitation.")}))}v.setMap(e.map),b(f,v)}else if("MapBox"==e.mapType){var L={lon:parseFloat(p.lng,10),lat:parseFloat(p.lat,10)},w='<img src="'+l+'" style="width:100px;height:100px;" />',C=new r.a.Popup({offset:25}).setHTML(w),k=document.createElement("div");k.className="marker",k.style.backgroundImage="url("+l+")",k.style.backgroundSize="cover",k.style.width="40px",k.style.height="40px";d=new r.a.Marker(k).setPopup(C).setLngLat(L).addTo(e.map);e.imageMarker.push(d);var x="https://api.mapbox.com/directions/v5/mapbox/driving/"+o+","+a+";"+e.Data[0].pinLatLong.latitude.split(",")[1]+","+e.Data[0].pinLatLong.latitude.split(",")[0]+"?steps=true&geometries=geojson&access_token="+r.a.accessToken;e.map.getLayer("point")||e.map.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:y}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}});var _=new XMLHttpRequest;_.open("GET",x,!0),_.onload=function(){var t=JSON.parse(_.response);if(""!=typeof t.code&&"InvalidInput"!=t.code){var a=t.routes[0],o=a.geometry.coordinates,i={type:"Feature",properties:{distance:a.distance,duration:a.duration},geometry:{type:"LineString",coordinates:o}};e.map.getSource("route")?e.map.getSource("route").setData(i):(e.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),e.map.on("click","route",(function(t){e.map.queryRenderedFeatures(t.point,{layers:["route"]});var a=t.features[0].properties,o=a.distance;o=parseFloat(.000621371192*o,10).toFixed(2);var i='<span style="font-weight:bold;">Distance: </span>'+o+' mi<br /><span style="font-weight:bold;">Time: </span>'+timeConvert(a.duration);(new r.a.Popup).setLngLat(t.lngLat).setHTML(i).addTo(e.map)})))}else try{ShowMsgWithMsg("Route exceeds maximum distance limitation.","failure")}catch(n){alert("Route exceeds maximum distance limitation.")}},_.send()}else{var S=s.a.icon({iconUrl:l,iconSize:[40,40]});C=s.a.popup().setContent("<img src="+l+" />");s.a.marker([a,o],{icon:S}).bindPopup(C).openPopup().addTo(e.map);var A=s.a.Routing.control({waypoints:[s.a.latLng(a,o),s.a.latLng(e.Data[0].pinLatLong.latitude.split(",")[0],e.Data[0].pinLatLong.latitude.split(",")[1])],routeWhileDragging:!1,createMarker:function(){return null}}).addTo(e.map);A.on("routesfound",(function(t){var e=t.routes;e[0].summary}))}}},DeleteFeature:function(){var t=this;null!=t.currentSelectedShape&&"undefined"!=typeof t.currentSelectedShape&&(t.currentSelectedShape.setMap(null),t.currentSelectedShape=null,t.showAddZone=!1,t.showDeleteFeature=!1)},ShowDrawingManager:function(){var t=this;null==t.drawingManager&&void 0!=t.config&&1==t.config.isShowDrawButton&&(t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["polygon"],setEditable:!0},polylineOptions:{editable:!0}}),t.drawingManager.setMap(t.map),google.maps.event.addListener(t.drawingManager,"overlaycomplete",t.GetGoogleAddressToDraw))},ViewLocatorOnMap:function(t){var e,a=this;a.isLoading=!0,e=void 0!=a.selectedUser?`selectedUser=${t}&reqFrom=`:"reqFrom=ETAMAP",u["a"].TrackByUserId(e).then((function(t){if(null!=t.data.data&&t.data.data.length>0){var e=t.data.data;a.ShowUserOnMap(e,a.map),a.isLoading=!1}else a.ShowAlert(a.$t("CurrentLocationNotFound"),"warning",!0,a.$t("Alert")),a.isLoading=!1}))},ShowUserOnMap:function(t,e){var a=this,o=[];$.each(t,(function(t,e){var i=e.IMAGE_PATH,n={lat:parseFloat(e.LATITUDE,10),lng:parseFloat(e.LONGITUDE,10)};o.push([n.lat,n.lng]);new google.maps.LatLng(n.lat,n.lng);String(i).indexOf("blob")<=0&&(i="/Content/images/user_avtar.png");var l='<div class="w-100 float-left popupcontent" style="padding:0px 6px 0px 0px;">';if(l+='<img src="'+i+'" class="float-left" style="width:50px;height:50px; border-radius: 100%;border: 3px solid #f2f2f2;" />',l+='<div style="padding-left:8px; padding-top:5px;width:80%;" class="float-left">',l+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Name: </b>"+e.NAME+" </p>",l+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Department: </b>"+e.DEPARTMENT_NAME+" </p></div>",e.TRACK_ID>0&&(l+="<p style='margin-bottom:2px;' class='px-2 float-left'><b style='font-weight:bold;'>"+e.NAME+" </b> is going to ticket number: "+e.TICKET_NUMBER+" </p>"),l+="</div>","Google"==a.mapType){var p={url:i,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},c=new google.maps.Marker({position:n,icon:p,map:a.map});a.imageMarker.push(c);var d=new google.maps.InfoWindow({content:l});try{c.addListener("click",(function(){d.open(a.map,this)}))}catch(f){console.log(f)}}else if("MapBox"==a.mapType){var m={lon:parseFloat(n.lng,10),lat:parseFloat(n.lat,10)},g=new r.a.Popup({offset:25}).setHTML(l),u=document.createElement("div");u.className="marker",u.style.backgroundImage="url("+i+")",u.style.backgroundSize="cover",u.style.width="50px",u.style.height="50px";c=new r.a.Marker(u).setPopup(g).setLngLat(m).addTo(a.map);a.map.flyTo({center:[m.lon,m.lat],essential:!0}),a.imageMarker.push(c)}else{var h=s.a.icon({iconUrl:i,iconSize:[40,40]});g=s.a.popup().setContent(l),c=s.a.marker([n.lat,n.lng],{icon:h}).bindPopup(g).openPopup().addTo(a.map);a.imageMarker.push(c),a.map.fitBounds(o)}}))},ViewOnMap:function(){var t=this,e=new google.maps.LatLng(void 0!=t.latLng.location_nw?t.latLng.location_nw.split(",")[0]:t.latLng.split(",")[0],void 0!=t.latLng.location_nw?t.latLng.location_nw.split(",")[1]:t.latLng.split(",")[1]);"Google"==t.mapType?(t.markers.forEach((function(e,a){if(e.title==(t.latLng.TicketNumber||t.latLng.ticket_number)){let o=new google.maps.InfoWindow;o.setContent(e.address),o.open(t.map,t.markers[a])}})),t.map.panTo(e),t.map.setZoom(18)):"MapBox"==t.mapType?"AddTicket"!=t.mapContainer?t.markers[0].features.forEach((function(e,a){t.map.flyTo({center:[t.latLng.location_nw.split(",")[1],t.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),e.properties.ticketNumber==(t.latLng.TicketNumber||t.latLng.ticket_number)&&new r.a.Popup({closeOnClick:!0}).setLngLat([t.latLng.location_nw.split(",")[1],t.latLng.location_nw.split(",")[0]]).setHTML(e.properties.address).addTo(t.map)})):setTimeout(()=>{t.map.flyTo({center:[t.latLng.location_nw.split(",")[1],t.latLng.location_nw.split(",")[0]],zoom:16,essential:!0});var e={lon:t.latLng.location_nw.split(",")[1],lat:t.latLng.location_nw.split(",")[0]},a="",o="https://unpkg.com/leaflet@1.3.4/dist/images/marker-icon.png",i=document.createElement("div");i.className="marker",i.style.backgroundImage="url("+o+")",i.style.backgroundPosition="top center",i.style.backgroundSize="cover",i.style.width="40px",i.style.height="40px",new r.a.Marker(i).setLngLat(e).setPopup(a).addTo(t.map)},1e3):(t.leafLetReferenceNumber.forEach((function(e,a){e.TicketNumber==(t.latLng.TicketNumber||t.latLng.ticket_number)&&s.a.popup().setLatLng([t.latLng.location_nw.split(",")[0],t.latLng.location_nw.split(",")[1]]).setContent(e.Address).openOn(t.map)})),t.map.flyTo([t.latLng.location_nw.split(",")[0],t.latLng.location_nw.split(",")[1]],16,{animate:!0,duration:2}))},gpxData:function(t,e,a){var o=this;o.Data=[],o.mapType="Google",o.emailString=e,o.ZoneType=a,o.Data.push(t),o.ShowLocationOnGoogleMap()},ShowLocationOnGoogleMap:function(){if("Google"==this.mapType){var t,e=this,a=null;const l=[];var o,i=null,n=new google.maps.InfoWindow;e.map=null,e.showLoader=!0,e.map=new google.maps.Map(document.getElementById(e.mapContainer),{zoom:7,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(30.7333,76.7794),mapTypeId:google.maps.MapTypeId.ROADMAP}),void 0!=e.config&&1==e.config.isShowDrawButton&&(e.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["polygon"]},polylineOptions:{editable:!0}}),e.drawingManager.setMap(e.map),google.maps.event.addListener(e.drawingManager,"overlaycomplete",(function(t,a,o){var i=t.overlay;e.currentSelectedShape=i,e.GetGoogleAddressToDraw(t)}))),(this.mapType="Google")&&$.each(e.Data,(function(r,s){null!=s.pinLatLong.latitude&&(a=s.pinLatLong.latitude.split(",")[0],i=s.pinLatLong.latitude.split(",")[1]),o="Critical"==s.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png":"High"==s.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png":"Medium"==s.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png":"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png";let p='<div id="content"><div class="map-pop-header '+s.priority+'" style="background-color:'+s.color_code+'"><div id="siteNotice"></div>'+s.popupHeaderHtml+'</div><div id="bodyContent">'+s.popupBodyHtml+'<p class="view-details">'+s.popupFooterHtml+"</p></div></div>";t=new google.maps.Marker({position:new google.maps.LatLng(a,i),icon:o,title:s.refValue,map:e.map,address:p}),l.push(t),e.markers.push(t);let c=[];if(void 0!=e.Data[r]&&e.Data[r].polygons.forEach((function(t){t.latLong.forEach((function(t){c.push(new google.maps.LatLng(t.longitude,t.latitude))})),e.myPolygon=new google.maps.Polygon({paths:c,draggable:!1,editable:1==e.config.isEditable,strokeColor:"undefined"!=typeof t.strokeColor?t.strokeColor:"#FF0000",strokeOpacity:"undefined"!=typeof t.strokeOpacity?t.strokeOpacity:"#FF0000",strokeWeight:"undefined"!=typeof t.strokeWeight?t.strokeWeight:"#FF0000",fillColor:"undefined"!=typeof t.fillColor?t.fillColor:"#FF0000",fillOpacity:"undefined"!=typeof t.opacity?t.opacity:.35,Id:e.Data[r].refValue,FormName:t.FormName,Description:t.Description,ZoneType:t.ZoneType,locatorids:t.locatorids}),e.zoneEditData.push({FormName:t.FormName,Description:t.Description,Refrence:"View",ZoneType:t.ZoneType,YardEmails:t.YardEmails,locatorids:t.locatorids}),e.myPolygon.setMap(e.map),google.maps.event.addListener(e.myPolygon,"click",(function(t,a){e.currentSelectedShape=this,e.currentSelectedShape.setOptions({editable:!0,ShapeId:e.polygonNewShapeId}),e.showDeleteFeature=!0,"zoneMapDiv"==e.mapContainer&&(e.showAddZone=!0)}))})),"zoneMapDiv"==e.mapContainer||"mapExtend"==e.mapContainer){for(var d=new google.maps.LatLngBounds,m=c,g=0,u=m.length;g<u;g++)d.extend(m[g]);e.map.fitBounds(d)}google.maps.event.addListener(e.myPolygon.getPath(),"set_at",(function(t,a){let o={FullAddress:""};if(e.lngLatData=[],"zoneMapDiv"==e.mapContainer){e.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),e.myPolygon.setOptions({ShapeId:e.polygonNewShapeId}),e.showAddZone=!0,r=e.myPolygon.getPath().getArray(),r.forEach((function(t,a){e.lngLatData.push({latitude:t.lat(),longitude:t.lng()})})),o={FullAddress:""};var i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(t,e){o.FullAddress=t[0].formatted_address})),e.polygonData.push({Id:e.polygonNewShapeId,latLong:e.lngLatData,CompleteAddress:o,strokeOpacity:e.myPolygon.strokeOpacity,strokeWeight:e.myPolygon.strokeWeight,strokeColor:e.myPolygon.strokeColor,fillColor:e.myPolygon.fillColor,locatorids:""}),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o})}else{var r;e.lngLatData=[],r=e.myPolygon.getPath().getArray(),r.forEach((function(t,a){e.lngLatData.push({Lat:t.lat(),Lng:t.lng()})})),o={FullAddress:""};i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(t,e){o.FullAddress=t[0].formatted_address})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o})}})),google.maps.event.addListener(t,"click",function(t,a){return function(){n.setContent(p),n.open(e.map,t),"WorkOrderDetail"!=e.mapContainer&&"detailMapDiv"!=e.mapContainer||n.close()}}(t));var h=new google.maps.LatLng(e.Data[0].latlong.split(",")[0],e.Data[0].latlong.split(",")[1]);e.map.panTo(h),e.map.setZoom(4)}));var r={gridSize:40,maxZoom:15,styles:[{width:30,height:30,url:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m1.png",textColor:"white",textSize:12}]};e.markerCluster=new MarkerClusterer(e.map,l,r)}},LoadLocatorDataonMap:function(){var t=this,e=null,a=null;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e=t.coords.latitude,a=t.coords.longitude})):console.log("Geolocation is not supported by this browser."),t.showSetting=!0,"Google"==t.mapType?setTimeout(()=>{t.LoadGoogleHeatMap(e,a)},2e3):"MapBox"==t.mapType?setTimeout(()=>{t.LoadMapboxHeatMap(e,a)},4e3):setTimeout(()=>{t.ShowEtaMap(e,a)},4e3)},initMapBox:function(t,e,a,o){var i=this,n="";let l=3;if(t){var s=$.grep(t,(function(t,e){return""!=t.location_nw&&null!=t.location_nw&&void 0!=typeof t.location_nw&&","!=t.location_nw}));s=s[0],s&&(n=[parseFloat(String(s.location_nw).split(",")[1],10),parseFloat(String(s.location_nw).split(",")[0],10)])}if(i.startingPoint=n,r.a.accessToken=e,i.map=new r.a.Map({container:i.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:l,zoomControl:!0,scrollZoom:!0,boxZoom:!0}),void 0!=i.config&&1==i.config.isShowSearchBox){var p=new m.a({accessToken:e,mapboxgl:r.a,marker:!1,placeholder:"Search for places in Barbados"});i.map.addControl(p)}if(void 0!=i.config&&1==i.config.isShowDrawButton){var d=new c.a({displayControlsDefault:!1,controls:{line_string:!1,polygon:!0,point:!0,trash:!0}});i.map.addControl(d),i.map.on("draw.create",i.GetMapBoxAddressToDraw);var g=new r.a.NavigationControl;i.map.addControl(g,"top-left")}g=new r.a.NavigationControl;if(i.map.addControl(g,"bottom-right"),null!=t&&t.length>0){if($.each(t,(function(e,a){e++,i.map.flyTo({center:[i.Data[0].latlong.split(",")[1],i.Data[0].latlong.split(",")[0]],zoom:4,essential:!0});if("[]"!=a.attachmentCountWithExt&&""!=a.attachmentCountWithExt&&null!=a.attachmentCountWithExt){var o=JSON.parse(a.attachmentCountWithExt);$.each(o,(function(t,e){"Video"==e.TYPE?e.COUNT:"Image"==e.TYPE?e.COUNT:parseInt(e.COUNT)}))}if(void 0!=a.polygons[e]){a.polygons[e].latLong[e].latitude.split(",")[1],a.polygons[e].latLong[e].latitude.split(",")[0];i.map.addSource("maine",{type:"geojson",data:v}),i.map.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#FF0000","fill-opacity":.35}})}let n='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+a.priority+'" style="background-color:'+a.color_code+'"><div id="siteNotice"></div>'+a.popupHeaderHtml+'</div><div id="bodyContent">'+a.popupBodyHtml+'<p class="view-details">'+a.popupFooterHtml+"</p></div></div></div></div></div>";y(e,a.pinLatLong.latitude,t,a.priority,n,a.is_high_profile,a)})),null!=t.mapdetail&&t.mapdetail.length>0)if("MapBox"==t.mapdetail[0].MAP_TYPE){if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var u=JSON.parse(t.mapdetail[0].LAT_LNG),h=u.reduce((function(t,e){return t.extend(e)}),new r.a.LngLatBounds(u[0],u[0]));map.fitBounds(h)}}else if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var f=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(e,a){var o=[];"LeafLet"==t.mapdetail[0].MAP_TYPE||"Esri"==t.mapdetail[0].MAP_TYPE?o.push(a[1],a[0]):o.push(a.lng,a.lat),f.push(o)}));u=f,h=u.reduce((function(t,e){return t.extend(e)}),new r.a.LngLatBounds(u[0],u[0]));map.fitBounds(h)}var v;function y(t,e,a,o,n,l,s){if(""!=e&&null!=e&&"undefined"!=typeof e&&","!=typeof e){var p=parseFloat(String(e.split(",")[0]),10),c=parseFloat(String(e.split(",")[1]),10),d="https://app.talygen.com",m=s.color_code;if(""!=m&&null!=m&&"undefined"!=typeof m&&" "!=typeof m||(m="#4db567"),d+="https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",1==t||"undefined"==typeof v)v={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+d,color:m,address:n,ticketNumber:s.refValue},geometry:{type:"Point",coordinates:[]}}]},v.features[0].geometry.coordinates.push(c),v.features[0].geometry.coordinates.push(p),i.markers.push(v);else{var g={type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+d,color:m,address:n,ticketNumber:s.refValue},geometry:{type:"Point",coordinates:[]}};g.geometry.coordinates.push(c),g.geometry.coordinates.push(p),v.features.push(g),i.markers.push(g)}}t==a.length&&(i.map.loadImage("https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",(t,e)=>{if(t)throw t;i.map.addImage("ticket-icon",e,{sdf:!0})}),i.map.on("load",(function(){i.map.addSource("ticketsourcedata",{type:"geojson",data:v,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),i.map.addLayer({id:"clusters",type:"circle",source:"ticketsourcedata",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),i.map.addLayer({id:"cluster-count",type:"symbol",source:"ticketsourcedata",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),i.map.addLayer({id:"unclustered_point",type:"circle",source:"ticketsourcedata",filter:["!",["has","point_count"]],paint:{"circle-color":["get","color"],"circle-radius":20,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),i.map.on("click","clusters",(function(t){var e=i.map.queryRenderedFeatures(t.point,{layers:["clusters"]}),a=e[0].properties.cluster_id;i.map.getSource("ticketsourcedata").getClusterExpansionZoom(a,(function(t,a){t||i.map.easeTo({center:e[0].geometry.coordinates,zoom:a})}))})),i.map.on("click","unclustered_point",(function(t){if(""!=a[0].popupBodyHtml&&1!=t.features[0].properties.cluster){var e=t.features[0].geometry.coordinates.slice(),o=t.features[0].properties.address;new r.a.Popup({closeOnClick:!0}).setLngLat(e).setHTML(o).addTo(i.map)}})),i.map.on("mouseenter","clusters",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","clusters",(function(){i.map.getCanvas().style.cursor=""})),i.map.on("mouseenter","unclustered_point",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","unclustered_point",(function(){i.map.getCanvas().style.cursor=""})),i.map&&i.map.on("wheel",t=>{t.originalEvent.ctrlKey?(t.originalEvent.preventDefault(),i.map.scrollZoom._enabled||i.map.scrollZoom.enable()):i.map.scrollZoom._enabled&&i.map.scrollZoom.disable()})})))}$(".mapboxgl-ctrl-compass").hide()}},initLeafletMap:function(t,e,a){var o,i=this;if(void 0!=t){if(i.map){i.map.off();try{i.map.remove()}catch{}}let e="",a="";if(null!=t&&t.length>0){var n=$.grep(t,(function(t,e){return""!=t.location_nw&&null!=t.location_nw&&"undefined"!=typeof t.location_nw&&","!=t.location_nw}));if(null!=n&&n.length>0){var r=n[0].location_nw;a=r.split(",")[1],e=r.split(",")[0]}}var l=s.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy '+(new Date).getFullYear()+" LINZ"}),p=(s.a.tileLayer("https://{s}.tiles.mapbox.com/v3/spatial.b625e395/{z}/{x}/{y}.png",{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}),s.a.latLng(e,a));i.startingPoint=[e,a];var c=10;if(""==e&&""==a&&(c=2),i.map=s.a.map(i.mapContainer,{zoom:c,center:p,layers:[l],zoomControl:!1}),s.a.control.zoom({position:"topright"}).addTo(i.map),void 0!=i.config&&1==i.config.isShowDrawButton&&i.GetLeafLetAddressToDraw(),void 0!=i.config&&1==i.config.isShowSearchBox){const t=new g["b"],e=new g["a"]({provider:t});i.map.addControl(e)}i.markers=s.a.markerClusterGroup({iconCreateFunction:function(t){return s.a.divIcon({html:'<div class="circle-leaflet">'+t.getChildCount()+"</div>"})}});var d=s.a.Icon.extend({options:{shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}});1==i.Data.length&&void 0!=i.Data[0].latlong&&i.map.flyTo([i.Data[0].latlong.split(",")[0],i.Data[0].latlong.split(",")[1]],16,{animate:!0,duration:2});new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png"}),new d({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_fill.png"});function m(t){var n="",r="";if($.each(t,(function(t,l){if(""!=l.pinLatLong.latitude&&null!=l.pinLatLong.latitude&&void 0!=typeof l.pinLatLong.latitude||l.polygons.length>0){n=l.pinLatLong.latitude;let f=[];r=l.priority;if("[]"!=l.attachmentCountWithExt&&""!=l.attachmentCountWithExt&&null!=l.attachmentCountWithExt){var p=JSON.parse(l.attachmentCountWithExt);$.each(p,(function(t,e){"Video"==e.TYPE?e.COUNT:"Image"==e.TYPE?e.COUNT:parseInt(e.COUNT)}))}if(i.Data[t].polygons.forEach((function(t){t.latLong.forEach((function(t){f.push([t.longitude,t.latitude])}))})),void 0!=l.polygons[t]){if(i.Data[0].polygons[0].latLong.length>1){var c=s.a.polygon(f,{fill:!0}).addTo(i.editableLayers);i.map.fitBounds(c.getBounds())}}let v='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+l.priority+'" style="background-color:'+l.color_code+'"><div id="siteNotice"></div>'+l.popupHeaderHtml+'</div><div id="bodyContent">'+l.popupBodyHtml+'<p class="view-details">'+l.popupFooterHtml+"</p></div></div></div></div></div>";a=n.split(",")[1],e=n.split(",")[0],a=parseFloat(a,10),e=parseFloat(e,10);var d=l.ticket_number,m=".leafleticoncustom_"+r+"{background-color:"+l.color_code+" }",g=document.createElement("style");g.innerHTML=m,document.head.appendChild(g);var u=s.a.icon({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png",iconSize:[30,30],color:l.color_code,"icon-color":l.color_code,"background-color":l.color_code,className:"leafleticoncustom_"+r});""!=n&&(o=s.a.marker(s.a.latLng(e,a),{icon:u}),o.bindPopup(v),i.markers.addLayer(o),i.leafLetReferenceNumber.push({TicketNumber:l.refValue,Address:v}),i.mapMarker.push(i.markers));try{o.on("click",(function(t){var e=$("a.ticketnumber[data-ticketnumber='"+d+"']");if("WorkOrderDetail"!=i.mapContainer&&"detailMapDiv"!=i.mapContainer||o.getPopup().getElement().classList.add("d-none"),e.length>0&&"true"==localStorage.getItem("isMapView")){var a=e.closest(".lists");a.addClass("alert-info"),setTimeout((function(){a.removeClass("alert-info")}),5e3)}e=$("a.ticketnumberlist[data-ticketnumber='"+d+"']"),e.length>0&&"false"==localStorage.getItem("isMapView")&&(e=e.closest("tr"),e.addClass("alert-info"),setTimeout((function(){e.removeClass("alert-info")}),5e3))}))}catch(h){console.log("err")}}})),null!=t.mapdetail&&t.mapdetail.length>0)if("MapBox"==t.mapdetail[0].MAP_TYPE){if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var l=JSON.parse(t.mapdetail[0].LAT_LNG),p=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(t,e){var a=[];a.push(e[1],e[0]),p.push(a)})),map.fitBounds(p)}}else if("Google"==t.mapdetail[0].MAP_TYPE&&""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var c=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(t,e){var a=[];a.push(e.lat,e.lng),c.push(a)}));l=c;var d=[];d.push(l),map.fitBounds(l)}i.map.addLayer(i.markers)}null!=t&&t.length>0&&m(t)}else i.map=s.a.map(i.mapContainer,{layers:[s.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'})],center:[0,0],zoom:5});void 0!=i.latLng&&i.ViewOnMap()},ShowEtaMap:function(t,e){var a=this,o=null,i=null,n="driving-car",r=600;if(a.showHideEtaMap)return $.each(a.mapLayer,(function(t,e){a.map.removeLayer(e)})),a.showHideEtaMap=!1,!1;function l(){navigator.geolocation?navigator.geolocation.getCurrentPosition(c,p,{timeout:1e4}):alert("Geolocation is not supported by this browser")}function p(t){t.code;var e=t.message;alert(e)}l();function c(t){t=$.post("geocoordinates.php",{lat:t.coords.latitude,lng:t.coords.longitude})}function d(t,e){if(a.map){$.each(a.mapLayer,(function(t,e){a.map.removeLayer(e)})),a.showHideEtaMap=!0;var o=new s.a.latLng(t,e);a.map.panTo(o),a.map.setZoom(11)}var i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var n=s.a.icon({iconUrl:i,iconSize:[40,40]}),r=s.a.popup().setContent("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"),l=s.a.marker([t,e],{icon:n},{layers:""}).bindPopup(r).openPopup().addTo(a.map);a.imageMarker.push(l),m(!0)}function m(t){var e=[];$("input[name=duration]:checked").each((function(){e.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+n,data:JSON.stringify({location_type:"start",range_type:"time",range:e,interval:r,locations:[[o,i],[o,i]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(t){s.a.geoJson(t,{onEachFeature:function(t,e){e.bindPopup("Isochrone: "+t.properties.value),a.mapLayer.push(e)},style:function(t){var e=t.properties.value;return a.SetColor(e),{fillColor:a.colors,color:a.colors,weight:1,fillOpacity:.35}}}).addTo(a.map)}})}o=parseFloat(e,10)+.02,i=parseFloat(t,10)+.004,d(i,o),document.getElementById("params").addEventListener("change",(function(t){if("profile"===t.target.name)n=t.target.value,d(i,o);else if("duration"===t.target.name){var e="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){e.length>0&&(e+=",");var t=$(this).val();e+=t}));var a=String(e).split(",");r=a[0],a[a.length-1]}else r="600","1800";d(i,o)}}))},SetColor:function(t){var e=this;if(t=parseInt(t,10),"MapBox"!=e.mapType?t/=60:e.time=10,"MapBox"==e.mapType)switch(t){case 10:e.colors="3CEA19";break;case 20:e.colors="EFF60B";break;case 30:e.colors="F6320B";break;default:e.colors="F6320B"}else switch(t){case 10:e.colors="green";break;case 20:e.colors="yellow";break;case 30:e.colors="red";break;default:e.colors="red"}},LoadGoogleHeatMap:function(t,e){var a=this,o="driving-car",i=600;if(a.showHideEtaMap)return a.map.data.forEach((function(t){a.map.data.remove(t)})),a.showHideEtaMap=!1,!1;function n(n,r){if(a.map){$.each(a.map,(function(t,e){try{a.map.removeLayer(e)}catch(o){}})),a.showHideEtaMap=!0;var l=new s.a.latLng(n,r);a.map.panTo(l),a.map.setZoom(11)}var p={lat:t,lng:e},c=(l=new google.maps.LatLng(t,e),localStorage.getItem("UserImage"));String(c).indexOf("blob")<=0&&(c="https://app.talygen.com/Content/images/Black/user.png");var d={url:c,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},m=new google.maps.Marker({position:p,icon:d,map:a.map}),g=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+c+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"});m.addListener("click",(function(){g.open(a.map,this)})),a.imageMarker.push(m);var u=[];$("input[name=duration]:checked").each((function(){u.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+o,data:JSON.stringify({location_type:"start",range_type:"time",range:u,interval:i,locations:[[r,n],[r,n]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(t){a.map.data.addGeoJson(t)}}),a.map.data.setStyle((function(t){var e=t.getProperty("value");return a.SetColor(e),{fillColor:a.colors,opacity:.35,strokeWeight:1}}))}n(t,e),document.getElementById("params").addEventListener("change",(function(a){if("profile"===a.target.name)o=a.target.value,n(t,e);else if("duration"===a.target.name){var r="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){r.length>0&&(r+=",");var t=$(this).val();r+=t}));var l=String(r).split(",");i=l[0],l[l.length-1]}else i="600","1800";n(t,e)}}))},Close:function(){var t=this;t.showAddZone=!1,t.showSaveZonePopUp=!1,t.showImportFilePopup=!1},GetZoneManagementData:function(t){var e=this;e.currentSelectedShape.setOptions({strokeOpacity:t.strokeOpacity,strokeColor:t.strokeColor,fillOpacity:.35,strokeWeight:t.strokeWeight,fillColor:t.fillColor}),e.polygonData.forEach((function(a,o){a.Id==t.Id&&(e.polygonData[o].strokeOpacity=t.strokeOpacity,e.polygonData[o].strokeWeight=t.strokeWeight,e.polygonData[o].fillColor=t.fillColor,e.polygonData[o].locatorids=t.locatorids,e.polygonData[o].strokeColor=t.strokeColor,e.polygonData[o].locatorids=t.locatorids,e.showAddZone=!1,e.showSaveZone=!0)}))},OpenSaveZone:function(){var t=this;t.showSaveZonePopUp=!0},SaveZoneData:function(t){var e=this;let a={ZoneId:0==e.zoneId?t.ZoneId:e.zoneId,ResolverUserId:null,JsonData:{type:"FeatureCollection",features:[]},ZoneName:t.Name,description:t.Description,ZoneType:null==t.ZoneType?e.ZoneType:t.ZoneType,YardEmails:null==t.YardEmails?e.emailString:t.YardEmails};e.polygonData.forEach((function(t,e){a.JsonData.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{stroke:t.strokeWeight,"stroke-opacity":t.strokeOpacity,"stroke-width":t.strokeWeight,fillColor:t.fillColor,"fill-opacity":t.fillOpacity,locatorname:null,locatorids:t.locatorids,userids:null}}),t.latLong.forEach((function(t,o){void 0!=a.JsonData.features[e]&&a.JsonData.features[e].geometry.coordinates[0].push([t.longitude,t.latitude])})),void 0!=a.JsonData.features[e]&&a.JsonData.features[e].geometry.coordinates[0].push([a.JsonData.features[e].geometry.coordinates[0][0][0],a.JsonData.features[e].geometry.coordinates[0][0][1]])})),e.zoneData.push(a);var o=JSON.stringify(e.zoneData);u["a"].UploadGeoJSON(o).then((function(t){0==e.zoneId?e.ShowAlert("Zone Succesfully Added.","success"):e.ShowAlert("Zone Succesfully Updated.","success"),e.showSaveZonePopUp=!1,e.currentSelectedShape=null,e.$emit("FetchData")}))},GetLeafLetAddressToDraw:function(){var t=this;let e={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};s.a.featureGroup().addTo(t.map);t.editableLayers=(new s.a.FeatureGroup).addTo(t.map);new s.a.Control.Draw({edit:{featureGroup:t.editableLayers,poly:{allowIntersection:!0}},draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#bada55"}},polyline:!1,circle:!1,marker:!1,circlemarker:!1}}).addTo(t.map);t.map.addLayer(t.editableLayers),t.map.on("draw:editvertex",(function(a){var o=a.poly;o.getLatLngs(),o.getLatLngs()[0].forEach((function(a,o){t.lngLatData.push({Lat:a.lat,Lng:a.lng});var i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(t,a){e.FullAddress=t[0].formatted_address})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e})}))})),t.map.on("draw:created",(function(a){var o=a.layerType,i=a.layer;if("polygon"===o){i.on("mouseover",(function(){console.log(i.getLatLngs())})),t.editableLayers.addLayer(i),i.getLatLngs()[0].forEach((function(e,a){t.lngLatData.push({Lat:e.lat,Lng:e.lng})}));var n=new google.maps.LatLng(i.getLatLngs()[0][0].lat,i.getLatLngs()[0][0].lng),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(a,o){e.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(e.Country.Name=a.short_name,e.Country.LongName=a.long_name):"postal_code"==a.types[0]?e.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(e.AdministrativeAreaLevel1.LongName=a.long_name,e.AdministrativeAreaLevel1.Name=a.short_name,e.State.LongName=a.long_name,e.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(e.AdministrativeAreaLevel2.LongName=a.long_name,e.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(t.address.push({AdministrativeArea3:a.long_name}),e.AdministrativeAreaLevel3.LongName=a.long_name,e.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(t.address.push({City:a.long_name}),e.City.LongName=a.long_name,e.City.Name=a.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e}),t.$emit("GetAddress",t.fullAddress)}))}else{t.lngLatData.push({Lat:a.layer._latlng.lat,Lng:a.layer._latlng.lng});n=new google.maps.LatLng(a.layer._latlng.lat,a.layer._latlng.lng),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(a,o){e.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(e.Country.Name=a.short_name,e.Country.LongName=a.long_name):"postal_code"==a.types[0]?e.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(e.AdministrativeAreaLevel1.LongName=a.long_name,e.AdministrativeAreaLevel1.Name=a.short_name,e.State.LongName=a.long_name,e.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(e.AdministrativeAreaLevel2.LongName=a.long_name,e.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(t.address.push({AdministrativeArea3:a.long_name}),e.AdministrativeAreaLevel3.LongName=a.long_name,e.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(t.address.push({City:a.long_name}),e.City.LongName=a.long_name,e.City.Name=a.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e}),t.$emit("GetAddress",t.fullAddress)}))}}))},GetGoogleAddressToDraw:function(t){var e=this,a=t.overlay;e.currentSelectedShape=a;let o={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};if("polygon"==t.type){var i=t.overlay;i.type=t.type,e.lngLatData=[],"zoneMapDiv"==e.mapContainer&&(e.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),e.showAddZone=!0),t.overlay.getPath().getArray().map(t=>{e.lngLatData.push({latitude:t.lat(),longitude:t.lng()})}),i["ShapeId"]=e.polygonNewShapeId,google.maps.event.addListener(i,"click",(function(t,a,o){"zoneMapDiv"==e.mapContainer&&(e.polygonNewShapeId=this.ShapeId,e.showAddZone=!0,e.currentSelectedShape=this)}));var n=new google.maps.LatLng(e.lngLatData[0].latitude,e.lngLatData[0].longitude),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(t,a){o.FullAddress=t[0].formatted_address,a==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,a){"country"==t.types[0]?(o.Country.Name=t.short_name,o.Country.LongName=t.long_name):"postal_code"==t.types[0]?o.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(o.AdministrativeAreaLevel1.LongName=t.long_name,o.AdministrativeAreaLevel1.Name=t.short_name,o.State.LongName=t.long_name,o.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(o.AdministrativeAreaLevel2.LongName=t.long_name,o.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),o.AdministrativeAreaLevel3.LongName=t.long_name,o.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),o.City.LongName=t.long_name,o.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o}),e.$emit("GetAddress",e.fullAddress),e.polygonData.push({Id:e.polygonNewShapeId,latLong:e.lngLatData,CompleteAddress:o,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}))}))}else if("marker"==t.type){e.lngLatData.push({name:"",latLong:[{latitude:t.overlay.getPosition().lat(),longitude:t.overlay.getPosition().lng()}]});n=new google.maps.LatLng(t.overlay.getPosition().lat(),t.overlay.getPosition().lng()),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(t,a){a==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,a){"country"==t.types[0]?(o.Country.Name=t.short_name,o.Country.LongName=t.long_name):"postal_code"==t.types[0]?o.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(o.AdministrativeAreaLevel1.LongName=t.long_name,o.AdministrativeAreaLevel1.Name=t.short_name,o.State.LongName=t.long_name,o.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(o.AdministrativeAreaLevel2.LongName=t.long_name,o.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),o.AdministrativeAreaLevel3.LongName=t.long_name,o.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),o.City.LongName=t.long_name,o.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o}),e.$emit("GetAddress",e.fullAddress))}))}},LoadMapboxHeatMap:function(t,e){var a=this;if("undefined"!=typeof a.map.getLayer("isoLayer")&&a.map.removeLayer("isoLayer"),"undefined"!=typeof a.map.getSource("iso"))return a.map.removeSource("iso"),!1;var o=document.getElementById("params"),i="https://api.mapbox.com/isochrone/v1/mapbox/",n=null,l=null,s=(i="https://api.mapbox.com/isochrone/v1/mapbox/",parseFloat(l,10),parseFloat(n,10),"driving"),p="10,20,30";function d(){var o=i+s+"/"+e+","+t+"?contours_minutes="+p+"&contours_colors="+a.colors+"&polygons=true&access_token="+r.a.accessToken;$.ajax({method:"GET",url:o}).done((function(t){a.map.getSource("iso").setData(t)}))}a.colors="3CEA19,EFF60B,F6320B",g(),a.map.flyTo({center:[e,t],zoom:10,essential:!0});var m=new c.a;function g(){a.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),a.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":["get","fillColor"],"fill-opacity":.5}},"poi-label");var o={lon:e,lat:t},i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var n=new r.a.Popup({offset:25}).setHTML("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"),l=document.createElement("div");l.className="marker",l.style.backgroundImage="url("+i+")",l.style.backgroundPosition="top center",l.style.backgroundSize="cover",l.style.width="40px",l.style.height="40px";var s=new r.a.Marker(l).setLngLat(o).setPopup(n).addTo(a.map);a.imageMarker.push(s),d()}a.map.addControl(m,"bottom-left"),o.addEventListener("change",(function(t){if("profile"===t.target.name)s=t.target.value,"foot-walking"==s?s="walking":"cycling-regular"==s?s="cycling":"driving-car"==s&&(s="driving"),d();else if("duration"===t.target.name){var e="",i="";$(o).find("input:checkbox:checked").length>0?($(o).find("input:checkbox:checked").each((function(){e.length>0&&(e+=","),i.length>0&&(i+=",");var t=$(this).val();e+=t,a.SetColor(t),i+=a.colors})),p=e,a.colors=i,d()):(p="10,20,30",a.colors="3CEA19,EFF60B,F6320B",d())}})),a.map.on("load",(function(){g()}))},TravelMode:function(t){var e=this;e.time=e.time-t,"LeafLet"==e.mapType?e.ShowEtaMap():"Google"==e.mapType?e.LoadGoogleHeatMap():"MapBox"==e.mapType&&e.LoadMapboxHeatMap()},ShowTravelMode:function(){var t=this;0==t.showSettingPopup?($(".settingPopup").removeClass("d-none"),t.showSetting=!1,t.showSettingPopup=!0):($(".settingPopup").addClass("d-none"),t.showSetting=!0,t.showSettingPopup=!1)},GetMapBoxAddressToDraw:function(t){var e=this;let a={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},PinCode:"",State:{Name:"",LongName:""},FullAddress:""};if("Polygon"==t.features[0].geometry.type){t.features[0].geometry.coordinates[0].forEach((function(t,a){e.lngLatData.push({Lat:t[1],Lng:t[0]})}));var o=new google.maps.LatLng(t.features[0].geometry.coordinates[0][0][1],t.features[0].geometry.coordinates[0][0][0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(t,o){a.FullAddress=t[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,o){"country"==t.types[0]?(a.Country.Name=t.short_name,a.Country.LongName=t.long_name):"postal_code"==t.types[0]?a.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(a.AdministrativeAreaLevel1.LongName=t.long_name,a.AdministrativeAreaLevel1.Name=t.short_name,a.State.LongName=t.long_name,a.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(a.AdministrativeAreaLevel2.LongName=t.long_name,a.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),a.AdministrativeAreaLevel3.LongName=t.long_name,a.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),a.City.LongName=t.long_name,a.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:a}),e.$emit("GetAddress",e.fullAddress))}))}else{e.lngLatData.push({Lat:t.features[0].geometry.coordinates[1],Lng:t.features[0].geometry.coordinates[0]});o=new google.maps.LatLng(t.features[0].geometry.coordinates[1],t.features[0].geometry.coordinates[0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(t,o){a.FullAddress=t[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,o){"country"==t.types[0]?(a.Country.Name=t.short_name,a.Country.LongName=t.long_name):"postal_code"==t.types[0]?a.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(a.AdministrativeAreaLevel1.LongName=t.long_name,a.AdministrativeAreaLevel1.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(a.AdministrativeAreaLevel2.LongName=t.long_name,a.AdministrativeAreaLevel2.Name=t.short_name,a.State.LongName=t.long_name,a.State.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),a.AdministrativeAreaLevel3.LongName=t.long_name,a.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),a.City.LongName=t.long_name,a.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:a}),e.$emit("GetAddress",e.fullAddress))}))}}}},S=_,A=(a("5448"),Object(C["a"])(S,o,i,!1,null,null,null));e["a"]=A.exports},3975:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Polygon Details")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Stroke Width")]),t._v(":"+t._s(t.StrokeWidthValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalStrokeWidth)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.StrokeWidthValue,expression:"StrokeWidthValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"1",max:"10",step:"1",id:"txtstrokeWidth"},domProps:{value:t.StrokeWidthValue},on:{__r:function(e){t.StrokeWidthValue=e.target.value}}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("StrokeOpacity")]),t._v(":"+t._s(t.StrokeOpacityValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalStrokeOpacity)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.StrokeOpacityValue,expression:"StrokeOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtStrokeOpacity"},domProps:{value:t.StrokeOpacityValue},on:{__r:function(e){t.StrokeOpacityValue=e.target.value}}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("FillOpacity")]),t._v(":"+t._s(t.FillOpacityValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalFillOpacity)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.FillOpacityValue,expression:"FillOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtFillOpacity"},domProps:{value:t.FillOpacityValue},on:{__r:function(e){t.FillOpacityValue=e.target.value}}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Stroke Color")]),t._v(": "),e("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtstrokeColor",title:"Stroke Color"},domProps:{value:t.txtstrokeColor}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Fill")]),t._v(": "),e("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtFillColor",title:"Fill Color"},domProps:{value:t.fillColor}})])])]),e("div",{staticClass:"col-12 pt-2 activity-tab p-0 float-left",attrs:{id:"accordion"}},[e("div",{staticClass:"card mb-3"},[e("div",{staticClass:"card-header DefaultTab"},[e("a",{staticClass:"card-link",attrs:{id:"ancreplyExpandAllCollapseAll","data-toggle":"collapse",href:"#collapseone","aria-expanded":"true"},on:{click:function(e){return t.ancreplyExpandAllCollapseAll()}}},[t._m(0)])]),e("div",{staticClass:"collapse show",attrs:{id:"collapseone","data-parent":"#accordion"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"row mt-0"},[e("div",{staticClass:"col-md-6 col-sm-12 float-left mb-2"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Locator,expression:"Locator"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by name"},domProps:{value:t.Locator},on:{input:function(e){e.target.composing||(t.Locator=e.target.value)}}})])]),e("div",{staticClass:"col-md-6 col-sm-12 float-left"},[e("div",{staticClass:"background-0 text-left form-check-inline search-btm-btn"},[e("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"},on:{click:t.GetUserSkillList}},[e("i",{staticClass:"fa fa-search"})]),e("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear all "},on:{click:t.RefreshList}},[e("i",{staticClass:"fa fa-refresh"})])])])]),e("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"",IdentityColumn:"user_id",HeaderText:t.$t("Zone Management"),LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:[],listType:["List"],ListData:t.LocatorData,HeaderData:t.Headers,HeaderButtons:"",TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}})],1)])])]),e("div",{staticClass:"row flex-row-reverse pt-3"},[e("div",{staticClass:"col-lg-12 text-right"},[e("a",{staticClass:"btn btn-success formbtn",attrs:{title:"",name:"btnSave",tabindex:"6"},on:{click:t.SaveStyleShape}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v("Save Polygon")]),t._v("  "),e("a",{staticClass:"btn btn-danger formbtn",attrs:{title:"",name:"btnDelete",tabindex:"6"},on:{click:t.DeleteFeature}},[e("i",{staticClass:"fa fa-trash pr-2"}),t._v("Delete Polygon")])])])])])])])],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"conversation-date heading-border"},[e("span",[e("i",{staticClass:"fa fa-angle-down rotate-icon pr-1",attrs:{"aria-hidden":"true"}}),t._v("Locator")])])}],n=a("9769"),r={created:function(){var t=this;t.GetUserSkillList(),t.polygonData.forEach((function(e,a){e.Id==t.polygonNewShapeId&&(t.FillOpacityValue=t.polygonData[a].strokeOpacity,t.StrokeOpacityValue=t.polygonData[a].strokeOpacity,t.totalStrokeWidth=t.polygonData[a].strokeWeight,t.txtstrokeColor=t.polygonData[a].strokeColor,t.fillColor=t.polygonData[a].fillColor)}));$(".chkItems:checkbox").not("[id^='chkAll']").each((function(){t.val=0,t.val=$(this).val(),t.zoneEditData[0].locatorids.split(",").forEach((function(e){e==t.val&&$(this).attr("checked",!0)}))}))},props:{polygonNewShapeId:{type:String},polygonData:{type:String},zoneEditData:{type:String}},data(){return{val:0,Locator:"",Headers:[{COLUMN_NAME:"first_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"resourceTypeName",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ResourceType",DISPLAY_ORDER:2},{COLUMN_NAME:"skills",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Skill",DISPLAY_ORDER:3},{COLUMN_NAME:"department",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Department",DISPLAY_ORDER:3}],LocatorData:[],tempLocatorData:[],StrokeWidthValue:"2",StrokeOpacityValue:"0.0",FillOpacityValue:"0.5",Showtab:0}},methods:{GetUserSkillList:function(){var t=this,e="search="+t.Locator;n["a"].GetUserSkillList(e).then(e=>{t.LocatorData=e.data.result.data,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)})},ancreplyExpandAllCollapseAll:async function(){var t=this;0==t.Showtab?(t.Showtab=1,$("#tab-ticket-content").find("#accordion").find(".collapse").addClass("show")):(t.Showtab=0,$("#tab-ticket-content").find("#accordion").find(".collapse").removeClass("show"))},actionButtonClick(t,e,a,o){},renderActions:function(t){},leftCommonSearch:function(t){},commonHeaderButtonClick:function(t){},sortdata:function(t){},RefreshList:function(){var t=this;t.Locator="",t.GetUserSkillList()},DeleteFeature:function(){var t=this;t.$emit("DeleteFeature")},SaveStyleShape:function(){var t=this,e="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.length>0&&(e+=","),e+=$(this).val()}));let a={Id:t.polygonNewShapeId,strokeOpacity:t.StrokeOpacityValue,strokeWeight:t.StrokeWidthValue,strokeColor:document.getElementById("txtstrokeColor").value,fillOpacity:document.getElementById("txtFillOpacity").value,fillColor:document.getElementById("txtFillColor").value,locatorids:e};t.$emit("GetZoneManagementData",a)}}},l=r,s=(a("b1a1"),a("2877")),p=Object(s["a"])(l,o,i,!1,null,null,null);e["a"]=p.exports},5448:function(t,e,a){"use strict";a("98bc")},"98bc":function(t,e,a){var o=a("18ad");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("6b84dfd6",o,!0,{sourceMap:!1,shadowMode:!1})},b1a1:function(t,e,a){"use strict";a("c8ac")},c8ac:function(t,e,a){var o=a("cd5d");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("6dc11b77",o,!0,{sourceMap:!1,shadowMode:!1})},cd5d:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.gm-style .gm-style-iw{padding:10px!important}.gm-style .gm-style-iw button{display:none!important}.cssSlider{-webkit-appearance:none;width:23%;height:17px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s;position:relative!important}.cssSlider:hover{opacity:1}.cssSlider::-webkit-slider-thumb{-webkit-appearance:none;width:25px;height:25px;background:#04aa6d;cursor:pointer}",""]),t.exports=e},e222:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v("Add Zone")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])])])},i=[],n=(a("14d9"),a("9769"),{props:{zoneEditData:{required:!1}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Zone Name",name:"txtZoneName",value:"",placeholder:"Enter Name",validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"RadioField",label:"ZoneType",name:"TypeFor",value:"Locator",placeholder:"",config:{options:[{name:"Locator Area",value:"Locator"},{name:"High Profile",value:"High_Profile"},{name:"Locator After Hours",value:"LocatorAfterHours"},{name:"Yard",value:"Yard"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!0}},{astype:"TextField",name:"Email Id",value:"",visibility:!1,placeholder:"Email Id",chktxtIndex:0,config:{showAddIcon:!0,onAddButtonClick:this.AddEmailFeild},validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!0,max:500}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.Save},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],ListData:[]}},created:function(){var t=this;"View"!=t.zoneEditData[0].Refrence?(t.FormSchema[0].Data[0].value=t.zoneEditData[0].ZONENAME,t.FormSchema[1].Data[0].value=t.zoneEditData[0].ZONETYPE,t.FormSchema[2].Data[0].value=t.zoneEditData[0].ZONEDESCRIPTION,t.zoneEditData[0].YARDEMAILS.split(",").forEach((e,a)=>{""!=e&&t.FormSchema[1].Data.push({astype:"TextField",name:"txtZoneName",value:e,placeholder:"Email Id",chktxtIndex:a+1,config:{showAddIcon:!0,onaddIconBackground:"bg-danger",onAddButtonClick:t.RemoveFile,addIcon:"fa fa-trash"},validationRules:{required:!1,max:100}})})):(t.FormSchema[0].Data[0].value=t.zoneEditData[0].FormName,t.FormSchema[1].Data[0].value=t.zoneEditData[0].ZoneType,t.FormSchema[2].Data[0].value=t.zoneEditData[0].Description,t.zoneEditData[0].YardEmails.split(",").forEach((e,a)=>{""!=e&&t.FormSchema[1].Data.push({astype:"TextField",name:"txtZoneName",value:e,placeholder:"Email Id",chktxtIndex:a+1,config:{showAddIcon:!0,onaddIconBackground:"bg-danger",onAddButtonClick:t.RemoveFile,addIcon:"fa fa-trash"},validationRules:{required:!1,max:100}})}))},methods:{onChangeRadio:function(t){"Yard"==this.FormSchema[1].Data[0].value?(this.FormSchema[1].Data[1].visibility=!0,this.FormSchema[1].Data[1].isVisible=!0):(this.FormSchema[1].Data[1].visibility=!1,this.FormSchema[1].Data[1].isVisible=!1,this.zoneEditData.YARD_EMAILS.split(",").length>1&&this.zoneEditData.YARD_EMAILS.split(",").forEach((t,e)=>{0!=e&&(this.FormSchema[1].Data[e].visibility=!1)}))},Close:function(){var t=this;t.$emit("Close")},RemoveFile:function(t,e){var a=this,o=a.FormSchema[1].Data.findIndex(t=>t.chktxtIndex===e.chktxtIndex),i=o;o>-1&&a.FormSchema[1].Data.splice(o,1),i>-1&&a.FormSchema[1].Data.splice(i,1)},AddEmailFeild:function(){var t=this;t.FormSchema[1].Data.push({astype:"TextField",name:"txtZoneName",value:"",placeholder:"Email Id",chktxtIndex:t.FormSchema[1].Data.length,config:{showAddIcon:!0,onaddIconBackground:"bg-danger",onAddButtonClick:t.RemoveFile,addIcon:"fa fa-trash"},validationRules:{required:!1,max:100}})},Save:function(){var t=this,e="";"Yard"==t.FormSchema[1].Data[0].value&&t.FormSchema[1].Data.forEach((t,a)=>{0!=a&&(e+=t.value+",")});let a={ZoneId:void 0==t.zoneEditData?0:t.zoneEditData.ZONE_ID,Name:t.FormSchema[0].Data[0].value,ZoneType:t.FormSchema[1].Data[0].value,Description:t.FormSchema[2].Data[0].value,YardEmails:e};t.$emit("SaveZoneData",a)}}}),r=n,l=a("2877"),s=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=s.exports}}]);
//# sourceMappingURL=chunk-054de387.js.map