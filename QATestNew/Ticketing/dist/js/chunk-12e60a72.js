(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12e60a72"],{"3bd7":function(e,t,a){var l=a("24fb");t=l(!1),t.push([e.i,".custom-btn{border-color:#25a5ff;color:#25a5ff;background-color:#fff}.custom-btn:hover{background-color:#25a5ff;color:#fff}.border-danger{border-color:red!important}",""]),e.exports=t},"52cd":function(e,t,a){"use strict";a("ac42")},ac42:function(e,t,a){var l=a("3bd7");l.__esModule&&(l=l.default),"string"===typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);var s=a("499e").default;s("e65386ba",l,!0,{sourceMap:!1,shadowMode:!1})},adaf:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e._self._c;return t("div",[t("loader",{attrs:{"is-visible":e.isLoading}}),e.chkImpServiceMapping?t("section",{staticClass:"main-content",attrs:{id:"main-content"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 padding-t_8"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("ImportServices")))]),t("span",{staticClass:"p-actions float-right"},[t("RouterLink",{staticClass:"p-action-btn text-white float-right",attrs:{to:"/Ticketing/ServiceListing",title:e.$t("BacktoList")}},[t("em",{staticClass:"fa fa-angle-double-left pr-2"}),t("br"),e._v(e._s(e.$t("BacktoList")))])],1)])])]),t("div",{staticClass:"border p-3",attrs:{id:"divMainLeadData"}},[t("div",{attrs:{id:"CrmImportMain"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"form-group"},[t("label",[e._v(e._s(e.$t("Download"))+" "+e._s(e.$t("SampleFile"))+":")]),t("div",{staticClass:"d-flex align-items-center"},[t("p",[t("a",{staticClass:"text-dark",attrs:{href:"/Content/files/LeadImportSampleFile.xlsx",checkprivilege:"no",download:""}},[t("img",{staticClass:"mr-2",attrs:{src:"/Content/images/excel-icon.png",alt:""}}),e._v(e._s(e.$t("Service"))+" "),t("em",{staticClass:"fa fa-download ml-2 text-dark"})])])])])]),t("div",{staticClass:"col-xl-4 col-lg-4 col-md-6"},[t("div",{staticClass:"form-group"},[t("label",[e._v(e._s(e.$t("UploadFile"))+":"),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("div",{staticClass:"custom-file"},[t("input",{staticClass:"downloadexcel",attrs:{type:"file",id:"flUserFile",size:"19",name:"flUserFile",tabindex:"1"},on:{change:e.setFile}})])])]),t("div",{staticClass:"col-12 mt-3"},[t("div",{staticClass:"row flex-row-reverse"},[t("div",{staticClass:"col-lg-6 text-right"},[t("a",{staticClass:"btn btn-info my-2 mr-2",attrs:{href:"javascript:void(0);",id:"uploadfile",title:e.$t("ImportFromExcelFile")},on:{click:e.UploadServiceFile}},[t("em",{staticClass:"fa fa-file-excel-o mr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("ImportFromExcelFile")))]),t("a",{staticClass:"btn btn-danger mr-2",attrs:{href:"javascript:void(0);",title:e.$t("Reset")},on:{click:e.resetFile}},[t("em",{staticClass:"fa fa-refresh mr-2"}),e._v(e._s(e.$t("Reset"))+" ")]),t("RouterLink",{staticClass:"btn btn-secondary my-2",attrs:{to:"/Ticketing/ServiceListing",title:e.$t("BacktoList")}},[t("em",{staticClass:"fa fa-angle-double-left pr-2"}),e._v(" "+e._s(e.$t("BacktoList"))+" ")])],1),t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("span",{staticClass:"text-danger"},[t("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])])])])])])]),t("div",{staticClass:"col-lg-12 p-0 float-left"},[t("div",{staticClass:"listing mt-2"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap m-0",staticStyle:{width:"100%"},attrs:{id:"tblbulkservice","aria-describedby":"importlead"}},[e._m(0),t("tbody",[t("tr",[t("td",{staticClass:"text-center text-danger norecord no-record",attrs:{colspan:"2"}},[e._v(e._s(e.$t("NoRecordfound"))+" ")])]),t("tr",{staticClass:"d-none",attrs:{id:"trdata",crtrwid:"1001"}},[t("td",[t("select",{staticClass:"form-control d-none",attrs:{name:"TableColumns"}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select"))+" "+e._s(e.$t("Column")))])]),t("select",{staticClass:"form-control",attrs:{id:"ddlTableColumn",name:"TableColumn"}})]),t("td",[t("select",{staticClass:"form-control",attrs:{name:"ExcelColumns"}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select"))+" "+e._s(e.$t("Column")))])]),t("select",{staticClass:"form-control",attrs:{id:"ddlExcelColumn",name:"ExcelColumn"}})])])])])]),t("div",{staticClass:"col-lg-12 text-right mt-3 p-0"},[t("input",{attrs:{type:"hidden",id:"hdnBatchId",value:"Batch_id"}}),e.showSaveButton?t("a",{staticClass:"btn btn-success formbtn widthhalf",attrs:{href:"javascript:void(0);",id:"savebtn",title:e.$t("Next")},on:{click:e.SaveServiceFile}},[t("em",{staticClass:"fa fa-save pr-2"}),t("span",[e._v(e._s(e.$t("Next")))])]):e._e()])])])]):e._e(),e.chkImpWorkTypeMapping?t("ImpWorkTypeMapping",{attrs:{ImpServiceTableMapping:e.ImpServiceTableMapping,batchId:e.batchId}}):e._e()],1)},s=[function(){var e=this,t=e._self._c;return t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Table Column")]),t("th",{attrs:{scope:"col"}},[e._v("Excel Column")])])])}],i=(a("14d9"),a("9769")),r=function(){var e=this,t=e._self._c;return t("div",[t("section",{staticClass:"main-content",attrs:{id:"main-content"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 padding-t_8"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("ImportServices")))])])])]),t("div",{staticClass:"container-fluid mt-2"},[e._m(0),t("div",{staticClass:"col-lg-12 p-0 float-left"},[t("div",{staticClass:"listing mt-2"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap m-0",staticStyle:{width:"100%"},attrs:{id:"tblbulkleadoption","aria-describedby":"importlead"}},[e._m(1),t("tbody",e._l(e.WorkTypeData,(function(a,l){return t("tr",{key:l},[t("td",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"workType.value"}],staticClass:"form-control",class:{"border-danger":a.saveAttempted&&!e.workTypeMatchesExisting(a.value)},attrs:{type:"text",disabled:"disabled",id:"txtExcelWorkType"+l,name:"txtExcelWorkType"+l},domProps:{value:a.value},on:{input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}}),a.saveAttempted&&!e.workTypeMatchesExisting(a.value)?t("span",{staticClass:"text-danger"},[e._v("This Work Type is not mapped")]):e._e()]),t("td",[e.workTypeMatchesExisting(a.value)?[t("input",{staticClass:"form-control",attrs:{type:"text",disabled:"disabled",id:"txtExistingWorkType"+l,name:"txtExistingWorkType"+l},domProps:{value:a.value}}),t("span",{staticClass:"hidden"},[e._v(e._s(e.getExistingWorkTypeName(a.value)))])]:[t("button",{staticClass:"btn btn-primary custom-btn",staticStyle:{width:"100%"},on:{click:function(t){return e.OpenWorkTypePopup(l)}}},[t("i",{staticClass:"fa fa-plus"}),e._v(" Create New ")])]],2)])})),0)])]),t("div",{staticClass:"col-12 mt-3"},[t("div",{staticClass:"row flex-row-reverse"},[t("div",{staticClass:"col-lg-6 text-right"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",title:"Save"},on:{click:e.SaveData}},[t("i",{staticClass:"fa fa-floppy-o pr-2"}),t("span",[e._v(e._s(e.$t("Save")))])]),e._v("Â  "),t("RouterLink",{staticClass:"btn btn-danger",attrs:{to:"/Ticketing/ServiceListing",title:"Cancel"}},[t("i",{staticClass:"fa fa-times pr-2"}),t("span",[e._v(e._s(e.$t("Cancel")))])])],1)])])])])]),e.AddWorkTypePopup?t("AddWorkTypePopup"):e._e()],1)])},o=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12 mb-3"},[t("div",{staticClass:"heading-border mt-2"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Work Type mapping")])])])])])},function(){var e=this,t=e._self._c;return t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Excel Work Type")]),t("th",{attrs:{scope:"col"}},[e._v("Existing Work Type")])])])}],n=a("b502"),d={components:{AddWorkTypePopup:n["a"]},props:{ImpServiceTableMapping:{type:String},batchId:{type:String}},data(){return{file:null,filepath:null,AddWorkTypePopup:!1,excelFileName:null,allrequiredcol:"",requiredcol:"",showSaveButton:!1,WorkTypeData:[],ddlExistingWorkTypeOptions:[]}},created(){this.FetchRecords()},methods:{FetchRecords(){var e="id=&moduleName=TICKETING&type=FSM_WORKTYPE&search=&refId=";i["a"].GetDDLData(e).then(e=>{200==e.status&&(this.ddlExistingWorkTypeOptions=e.data.DATA)}).then(()=>{this.loadExcelWorkTypeHeaderValue()})},loadExcelWorkTypeHeaderValue(){var e="batchId="+this.batchId;i["a"].GetWorkTypeTableValue(e).then(e=>{var t=e.data;void 0!=t.length&&t.length>0&&(this.WorkTypeData=t.map(e=>({value:e.value,saveAttempted:!1})),this.createMultiRows(t.length))})},getExistingWorkTypeName(e){const t=this.ddlExistingWorkTypeOptions.find(t=>t.name===e);return t?t.value:""},workTypeMatchesExisting(e){return this.ddlExistingWorkTypeOptions.some(t=>t.name===e)},createMultiRows(e){try{$(".norecord").addClass("d-none");for(var t=0;t<e;t++)0}catch(a){console.error("Error in createMultiRows: ",a)}},OpenWorkTypePopup:function(e){var t=this;t.AddWorkTypePopup=!t.AddWorkTypePopup,1==t.chkImpWorkTypeMapping?t.chkImpWorkTypeMapping=!0:t.chkImpServiceMapping=!1},SaveData(){var e=this;const t=e.WorkTypeData.filter(t=>!e.workTypeMatchesExisting(t.value));if(t.length>0)return void e.WorkTypeData.forEach(e=>{e.saveAttempted=!0});let a="<workTypes>";this.WorkTypeData.forEach((t,l)=>{a+=`<worktype><excelWorkType>${t.value}</excelWorkType>`;const s=e.getExistingWorkTypeName(t.value);a+=`<existingWorkTypeValue>${s}</existingWorkTypeValue></worktype>`}),a+="</workTypes>";var l={xmlServiceTableMapping:e.ImpServiceTableMapping,xmlWorkTypeMapping:a},s=JSON.stringify(l);i["a"].SaveWorkTypeMapping(s).then(t=>{"Success"==t.data.status&&(1==t.data.result?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Mapping")]),"Success",!0,e.$t("Alert")),e.$router.push({path:"/Ticketing/ServiceListing"})):e.ShowAlert(e.$t("ErrorWhileSaving",[e.$t("Mapping")]),"danger",!0,e.$t("Alert"))),e.isLoading=!1})}}},c=d,u=(a("52cd"),a("2877")),p=Object(u["a"])(c,r,o,!1,null,null,null),v=p.exports,m={components:{ImpWorkTypeMapping:v},data(){return{isLoading:!1,file:null,filepath:null,excelFileName:null,allrequiredcol:"",requiredcol:"",showSaveButton:!1,ImpServiceTableMapping:"",batchId:"",chkImpWorkTypeMapping:!1,chkImpServiceMapping:!0}},created:function(){var e=this;0==e.chkImpWorkTypeMapping?e.chkImpServiceMapping=!0:e.chkImpServiceMapping=!1},methods:{BackToList:function(){this.$router.push({name:"ServiceListing"})},setFile:function(e){this.file=e.target.files[0],this.excelFileName=this.file?this.file.name:""},UploadServiceFile:function(){var e=this;e.isLoading=!0;const t=new FormData;t.append("file",e.file),void 0!=e.file&&null!=e.file?i["a"].ImportServicePost(t).then((function(t){var a=t.data;0==a.Status?(e.filepath=a.Msg,setTimeout((function(){e.loadTableHeader()}),1e3),setTimeout((function(){e.loadExcelHeader(a.Msg),e.isLoading=!1}),2e3)):1==a.Status?e.ShowAlert(e.$t("IsNotValidFileUpload"),"warning",!0,e.$t("Alert")):(e.isLoading=!1,e.ShowAlert(a.Msg,"warning",!0,e.$t("Alert")))})):(e.isLoading=!1,e.ShowAlert(e.$t("Please upload valid excel file."),"warning",!0,e.$t("Alert")))},loadExcelHeader:function(e){var t=this,a=`filepath=${e}&excelFileName=${t.excelFileName}`;i["a"].GetServiceExcelColumn(a).then((function(e){var a=e.data;if(void 0!=a.length){var l=$("#ddlExcelColumn");l.empty(),a=a.filter(e=>"work type"!==e.column_Name.trim().toLowerCase()),$.each(a,(function(e,t){$("#hdnBatchId").val(t.batch_id),$("#ddlExcelColumn").append("<option value='"+t.column_Name+"'Column_length='"+t.column_Length+"'Data_Type='"+t.data_Type+"' >"+t.column_Name+"</option>")})),t.createMultiRows(a.length),$("table#tblbulkservice tr.visible td select[name^='ExcelColumns']").change((function(){t.CheckDuplicateExcelRecord($(this).val())})),$("table#tblbulkservice tr.visible td select[name^='TableColumns']").change((function(){t.CheckDuplicateTableRecord($(this).val())}))}}))},resetFile:function(){var e=this;e.file=null,e.excelFileName=null,document.getElementById("flUserFile").value="",$("#uploadfile").removeClass("disabled"),$("table#tblbulkservice select").removeClass("border border-danger"),$("#savebtn").removeClass("disabled")},loadTableHeader:function(){i["a"].GetServiceTableColumn().then((function(e){var t=e.data;if(void 0!=t.length){var a=$("#ddlTableColumn");a.empty(),$.each(t,(function(e,t){$("#ddlTableColumn").append("<option value='"+t.column_Name+"'Column_length='"+t.column_Length+"'Data_Type='"+t.data_Type+"' >"+t.column_Name+"</option>")}))}}))},createMultiRows(e){try{var t=this;$("#uploadfile").addClass("disabled"),this.showSaveButton=!0;var a=1002;t.isLoading=!0;var l=$("table#tblbulkservice tr#trdata"),s="",i="";$(".norecord").addClass("d-none");for(var r=0;r<e;r++){if($(l).clone().attr({crtrwid:a}).removeClass("d-none").addClass("visible").find("input,a,select,div").each((function(){$(this).attr({id:function(e,t){return t+""+a},name:function(e,t){return t+""+a},value:function(e,t){return t}}),$(this).removeClass("d-none")})).end().appendTo("table#tblbulkservice"),s=$("#ddlExcelColumn").children("option").clone(),i=$("#ddlTableColumn").children("option").clone(),$("table#tblbulkservice tr.visible td select[id='ddlTableColumn"+a+"']").remove(),$("table#tblbulkservice tr.visible td select[name='TableColumns"+a+"']").attr("id","ddlTableColumn"+a),$("table#tblbulkservice tr.visible td select[name='TableColumns"+a+"']").append(i),$("table#tblbulkservice tr.visible td select[id='ddlExcelColumn"+a+"']").remove(),$("table#tblbulkservice tr.visible td select[name='ExcelColumns"+a+"']").attr("id","ddlExcelColumn"+a),$("table#tblbulkservice tr.visible td select[name='ExcelColumns"+a+"']").append(s),s.length>r){var o=$("#ddlTableColumn"+a+" option[value='"+s[r].value+"']").attr("data_type"),n=$("#ddlExcelColumn"+a+" option[value='"+s[r].value+"']").attr("data_type"),d=$("#ddlTableColumn"+a+" option[value='"+s[r].value+"']").attr("value"),c=$("#ddlExcelColumn"+a+" option[value='"+s[r].value+"']").attr("value");void 0!=o&&void 0!=n&&d.toLowerCase()==c.toLowerCase()&&($("#ddlTableColumn"+a+" option[value='"+s[r].value+"']").attr("selected","selected"),$("#ddlExcelColumn"+a+" option[value='"+s[r].value+"']").attr("selected","selected"))}a++}$("table#tblbulkservice tr.visible[crtrwid ='1001']").removeClass("visible").addClass("d-none"),t.isLoading=!1}catch(u){}},CheckDuplicateTableRecord:function(e){var t,a,l,s=[],i=!0;$("table#tblbulkservice tr#trdata").each((function(){var e=$(this).find("td").eq(0).find("select option:selected").text();s.push(e)}));var r,o,n=1002;for(i=!1,r=1;r<s.length;r++){for(t="#ddlTableColumn"+n,o=r+1;o<s.length;o++)if(s[r]==s[o]&&"Select Column"!=s[r]){i=!0,l=t,a="#ddlTableColumn"+(o-1+1002);break}if(i)break;$(t).removeClass("border border-danger"),$(savebtn).removeClass("disabled"),n++}i&&($(l).addClass("border border-danger"),$(a).addClass("border border-danger"),$(savebtn).addClass("disabled")),i=!1,$("table#tblbulkservice tr#trdata").each((function(){$(this).find("td").eq(1).find("select").hasClass("border-danger")&&$(savebtn).addClass("disabled")}))},CheckDuplicateExcelRecord(e){var t,a,l,s=[],i=!0;$("table#tblbulkservice tr#trdata").each((function(){var e=$(this).find("td").eq(1).find("select option:selected").text();s.push(e)}));var r,o,n=1002;i=!1;for(r=1;r<s.length;r++){for(t="#ddlExcelColumn"+n,o=r+1;o<s.length;o++)if(s[r]==s[o]&&"Select Column"!=s[r]){i=!0,l=t,a="#ddlExcelColumn"+(o-1+1002);break}if(i)break;$(t).removeClass("border border-danger"),$(savebtn).removeClass("disabled"),n++}i&&($(l).addClass("border border-danger"),$(a).addClass("border border-danger"),$(savebtn).addClass("disabled")),i=!1,$("table#tblbulkservice tr#trdata").each((function(){$(this).find("td").eq(0).find("select").hasClass("border-danger")&&$(savebtn).addClass("disabled")}))},SaveServiceFile:function(){this.isLoading=!0;var e=this,t="<serviceentries>\n",a=!1,l=!1;function s(){var t=e.allrequiredcol.split(",");return t.forEach(t=>{$("table#tblbulkservice tr.visible").each((function(){$(this).hasClass("alert-success")||t!=$(this).find("#ddlTableColumn"+$(this).attr("crtrwid")).val()||(e.requiredcol=e.requiredcol.replace(new RegExp(t+",?"),""))}))}),e.requiredcol.length>0}if(s())return $(document).scrollTop(0),void(this.isLoading=!1);if($("table#tblbulkservice tr.visible").each((function(){var s=$(this),i=s.attr("crtrwid"),r=s.find("#ddlTableColumn"+i),o=s.find("#ddlExcelColumn"+i);if(""!==r.val()&&(l=!0,!s.hasClass("alert-success")))if(""===o.val()){var n=CheckRequiredR("ddlExcelColumn"+i,e.$t("PleaseSelectAnyRecordsForFurther"),"invalid-feedback");if(""!==n)return $(document).scrollTop(0),e.isLoading=!1,!1}else{a=!0;var d=r.val(),c=r.find(":selected").attr("data_type").toLowerCase();const e=/^\s*([^()]+)/,l=o.val().trim().toLowerCase().match(e);let s=l?l[1].trim():"";s=s.replace(/[^a-zA-Z0-9\s]+/g,"").replace(/ /g,"_").replace(/_+$/g,"");var u=s,p=u,v=o.find(":selected").attr("data_type").toLowerCase();t+=`\n<Service>\n                    \n\t<batch_id>${$("#hdnBatchId").val()}</batch_id>\n                    \n\t<row_id>${i}</row_id>\n                    \n\t<original_column_name>${d}</original_column_name>\n                    \n\t<column_name>${d}</column_name>\n                    \n\t<data_type>${c}</data_type>\n                    \n\t<excel_column_name>${p}</excel_column_name>\n                    \n\t<excel_data_type>${v}</excel_data_type>\n                    \n</Service>\n`}})),$("table#tblbulkservice tr.visible").toggleClass("border border-danger",!l),t+="\n</serviceentries>\n",a){var i={xmltrackentries:t};e.ImpServiceTableMapping=JSON.stringify(i),e.batchId=$("#hdnBatchId").val(),e.chkImpWorkTypeMapping=!0,e.chkImpServiceMapping=!1}this.isLoading=!1}}},h=m,b=Object(u["a"])(h,l,s,!1,null,null,null);t["default"]=b.exports},b502:function(e,t,a){"use strict";var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ManageWorkType")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddEditWorkType"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-AutoCreateService",fn:function({data:a}){return[t("div",{staticClass:"form-group mb-0"},[t("label",{staticClass:"switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.fieldInfo.value,expression:"data.fieldInfo.value"},{name:"disabled",rawName:"v-disabled",value:e.disabled,expression:"disabled"}],staticClass:"form-check-input custom-control-input dynamic",attrs:{type:"checkbox",name:"IsLogin"},domProps:{checked:Array.isArray(a.fieldInfo.value)?e._i(a.fieldInfo.value,null)>-1:a.fieldInfo.value},on:{change:[function(t){var l=a.fieldInfo.value,s=t.target,i=!!s.checked;if(Array.isArray(l)){var r=null,o=e._i(l,r);s.checked?o<0&&e.$set(a.fieldInfo,"value",l.concat([r])):o>-1&&e.$set(a.fieldInfo,"value",l.slice(0,o).concat(l.slice(o+1)))}else e.$set(a.fieldInfo,"value",i)},function(t){return e.checkForAutoCreateEnable(a.fieldInfo.value)}]}}),t("span",{staticClass:"slider round",staticStyle:{cursor:"default"}},[t("span",{staticClass:"slider-yes"},[e._v(e._s(e.$t("Yes")))]),t("span",{staticClass:"slider-no"},[e._v(e._s(e.$t("No")))])])])]),e.AutoServiceDisabled?t("span",{staticClass:"text-danger",staticStyle:{"font-size":"12px"}},[e._v(e._s(e.$t("AutoServiceDisabled")))]):e._e()]}}])})],1)])])])],1)},s=[],i=(a("b7ef"),a("14d9"),a("9769")),r={props:{WorkTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,fileData:[],AutoServiceDisabled:!0,FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("WorkTypeName"),name:"WorkTypeName",value:"",placeholder:this.$t("EnterWorkTypeName"),validationRules:{required:!0,max:100}},{astype:"TextAreaField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:this.$t("EnterDescription"),validationRules:""},{astype:"SlotField",label:this.$t("AutoCreateService"),name:"AutoCreateService",value:"",placeholder:"",config:{options:[]},visibility:!0,validationRules:"",settings:{isInSlot:!0}},{astype:"NumericField",label:this.$t("MinimumCrewSize"),name:"MinimumCrewSize",value:"",placeholder:this.$t("EnterMinimumCrewSize"),validationRules:""},{astype:"NumericField",label:this.$t("RecommendedCrewSize"),name:"RecommendedCrewSize",value:"",placeholder:this.$t("EnterRecommendedCrewSize"),validationRules:""},{astype:"SelectField",label:this.$t("DurationType"),name:"DurationType",value:"",placeholder:this.$t("SelectDuration"),validationRules:{required:!0,max:100},config:{options:[{value:"HH",name:"Hours"},{value:"MM",name:"Minutes"}]}},{astype:"NumericField",label:this.$t("EstimateDuration"),name:"EstimateDuration",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"NumericField",label:this.$t("MaxDuration"),name:"MaxDuration",value:"",placeholder:"",validationRules:""},{astype:"ColorField",label:this.$t("ColorField"),name:"ColorField",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"FileField",showLabel:!1,name:"Attachment",label:this.$t("MaxDuration"),placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){this.FetchData()},methods:{FetchData:function(){var e=this,t="WtId="+e.WorkTypeId;i["a"].FetchDataByWorktypeId(t).then((function(t){null!=t.data&&""!=t.data&&("Success"==t.data.status&&(e.FormSchema[0].Data[0].value=t.data.result.data[0].worktype_name,e.FormSchema[0].Data[1].value=t.data.result.data[0].description,e.FormSchema[0].Data[2].value=t.data.result.data[0].auto_create_sa,e.FormSchema[0].Data[3].value=t.data.result.data[0].min_crew_size,e.FormSchema[0].Data[4].value=t.data.result.data[0].rec_crew_size,e.FormSchema[0].Data[5].value=t.data.result.data[0].duration_type,e.FormSchema[0].Data[6].value=t.data.result.data[0].estimate_duration,e.FormSchema[0].Data[7].value=t.data.result.data[0].maximum_duration,e.FormSchema[0].Data[9].value=t.data.result.data[0].color),1==t.data.result.data[0].auto_create_sa&&(e.AutoServiceDisabled=!1))}))},Close:function(){this.$parent.AddWorkTypePopup=!1},checkForAutoCreateEnable:function(e){var t=this;t.AutoServiceDisabled=1!=e},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],l=new FileReader;l.onload=function(e){return function(e){var l=e.target.result,s=window.btoa(l),i=a.name;t.fileName=i;var r=i.lastIndexOf("."),o=i.substring(r+1,i.length);t.fileExt+="."+o;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+o+'"}',d=a.size;t.fileSize=d;var c={attachement_mime:n,fileName:i,fileSize:a.size,contentType:a.type,base64String:s};t.fileData.push(c)}}(),l.readAsBinaryString(a)}catch(s){}},onSubmit(e,t){var a=this,l={WorkTypeID:null==a.WorkTypeId?0:a.WorkTypeId,WorktypeName:e.WorkTypeName,Desc:e.DESCRIPTION,Auto:e.AutoCreateService,MinimumCrew:e.MinimumCrewSize,Crew:e.RecommendedCrewSize,DurationType:e.DurationType,Duration:e.EstimateDuration,MaxDuration:e.MaxDuration,color:e.ColorField,due_date_offset:"",Exect:"",CommissionType:a.CommissionType,CommissionValue:a.CommissionValue,FileData:a.fileData,status_id:1001},s=JSON.stringify(l);i["a"].SaveWorkType(s).then(e=>{if("Success"==e.data.status){var t=JSON.parse(e.data.result);"ALREADY EXISTS"==t.MSG?a.ShowAlert(a.$t("AlreadyExists",[a.$t("WorkType")]),"failure",!0,a.$t("Alert")):(a.WorkTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("WorkType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("WorkType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.FetchRecords())}else a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close()})}}},o=r,n=a("2877"),d=Object(n["a"])(o,l,s,!1,null,null,null);t["a"]=d.exports}}]);
//# sourceMappingURL=chunk-12e60a72.js.map