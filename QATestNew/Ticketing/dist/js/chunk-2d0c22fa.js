(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c22fa"],{"48dd":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{directives:[{name:"show",rawName:"v-show",value:t.IsTicketTypeView,expression:"IsTicketTypeView"}],attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"TicketMapping",LegendArray:[],widgets:[],IdentityColumn:"TYPE_ID",HeaderText:t.$t("TicketMapping"),listType:["List"],ListData:t.TicketSourceList,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchRecords,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,RenderRowActionMethod:()=>{},NorecordfoundText:t.$t("NoRecordfound")},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["STATUS_NAME"==a.column.COLUMN_NAME?[e("td",{staticClass:"text-center single-action tourguide_a"},[e("span",{class:t.getStatusClass(a.row.STATUS_NAME)},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e(),"Edit"==a.column.COLUMN_NAME?[e("td",{staticClass:"text-center single-action tourguide_aa"},[e("a",{attrs:{typetitle:t.$t("Edit"),typefor:"Edit",dataid:a.row.asset_type_id,title:t.$t("Edit")},on:{click:function(e){return t.UpdateWorkTypeListing(a.row)}}},[e("em",{staticClass:"fa fa-pencil text-success action-icon"})])])]:t._e()]}}])}),1==t.ShowTicketType?e("BillingTicketType",{on:{Close:t.Close}}):t._e(),1==t.ShowTicketMapping?e("AddTicketMapping",{attrs:{EditData:t.EditData},on:{Close:t.Close}}):t._e()],1)},s=[];a("88a7"),a("271a"),a("5494");let c=[{title:"Add Billing Ticket Type",iconClass:"fa fa-plus",callbackfunction:"openaddWorkType",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Add  Ticket Mapping",iconClass:"fa fa-plus",callbackfunction:"openAddTicketMapping",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Export to Excel",iconClass:"fa fa-file-excel-o",callbackfunction:"DownloadExcelData",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Active",iconClass:"fa fa-check",callbackfunction:"UpdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"Active"},{title:" Inactive",iconClass:"fa fa-close",callbackfunction:"UpdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"Inactive"},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1}],l=[{fieldName:"Ticekt Type",fieldType:"text",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["TYPENAME"],paramName:"TYPENAME",isSearch:!1,value:"",listOptions:[]}];var o={buttons:c,leftsearchSchema:l},n=a("9769"),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Ticket Type")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("tg-list",{attrs:{IsShowAction:!1,SearchPosition:"none",ModuleName:"Ticketing",SubModuleCode:"TicketMapping",LegendArray:[],widgets:[],IdentityColumn:"TYPE_ID",HeaderText:t.$t("TicketMapping"),ListData:t.BillingTicketType,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchRecords,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,RenderRowActionMethod:()=>{},NorecordfoundText:t.$t("NoRecordfound")},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["STATUS_NAME"==a.column.COLUMN_NAME?[e("td",{staticClass:"text-center single-action tourguide_a"},[e("span",{class:t.getStatusClass(a.row.STATUS_NAME)},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e(),"Edit"==a.column.COLUMN_NAME?[e("td",{staticClass:"text-center single-action tourguide_aa"},[e("a",{attrs:{typetitle:t.$t("Edit"),typefor:"Edit",dataid:a.row.asset_type_id,title:t.$t("Edit")},on:{click:function(e){return t.UpdateAddBillingRule(a.row)}}},[e("em",{staticClass:"fa fa-pencil text-success action-icon"})])])]:t._e()]}}])})],1)])])])],1),t.ShowBillingTicketType?e("AddBillingTicketType",{attrs:{EditAddTicketTypeData:t.EditAddTicketTypeData}}):t._e()],1)},d=[],u=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Ticket Type")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},p=[],T=(a("14d9"),{props:{EditAddTicketTypeData:{type:Array,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Billing Ticket Type",name:"BillingTicketType",value:"",placeholder:"Enter Billing Ticket Type",validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("Priority"),name:"Priority",value:"",config:{options:[]},placeholder:"Select Priority",validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],ListData:[]}},created:async function(){var t=this;await t.GetPriorityType(),t.EditData()},updated:function(){var t=this;t.EditData()},methods:{props:{EditAddTicketTypeData:{type:Array,required:!0}},GetPriorityType:async function(){var t=this;await n["a"].GetPriorityData().then(e=>{e.data.result.DATA.forEach((e,a)=>{t.FormSchema[1].Data[0].config.options.push({value:e.PRIORITY_ID,name:e.PRIORITY_NAME})})})},EditData:function(){var t=this;EditAddTicketTypeData.length>0&&(t.FormSchema[0].Data[0].value=t.EditAddTicketTypeData.TYPE_NAME,t.FormSchema[1].Data[0].value=t.EditAddTicketTypeData.PRIORITY_ID)},onSubmit(t,e){var a=this,i={TicketTypeId:0,BillingTicketType:t.BillingTicketType,PriorityId:t.Priority},s=JSON.stringify(i);n["a"].SubmitTicketType(s).then(t=>{if("Success"==t.data.status){var e=JSON.parse(t.data.result);"ALREADY EXISTS"==e.MSG?(a.ShowAlert(a.$t("AlreadyExists",[a.$t("Crew")]),"failure",!0,a.$t("Alert")),a.Close()):(a.CrewId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Crew")]),"success",!0,a.$t("Alert")),a.Close()):a.ShowAlert(a.$t("AddedSuccess",[a.$t("BillingTicketType")]),"success",!0,a.$t("Alert")),a.Close(),a.$parent.FetchRecords())}else a.ShowAlert(a.$t("AddedError",[a.$t("Crew")]),"failure",!0,a.$t("Alert")),a.Close()})},Close:function(){var t=this;t.$parent.Close()}}}),h=T,S=a("2877"),A=Object(S["a"])(h,u,p,!1,null,null,null),k=A.exports,g={components:{AddBillingTicketType:k},data(){return{isLoading:!1,EditAddTicketTypeData:[],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",ShowBillingTicketType:!1,BillingTicketType:[],Headers:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Billing Type Name",DISPLAY_ORDER:1},{COLUMN_NAME:"PRIORITY_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Priority",DISPLAY_ORDER:2},{COLUMN_NAME:"NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created By","DISPLAY_ORDER ":3},{COLUMN_NAME:"STATUS_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:4},{COLUMN_NAME:"Edit",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Edit",DISPLAY_ORDER:5}],listheaderbuttons:[{title:"Add Ticket Type",iconClass:"fa fa-plus",callbackfunction:"openaddBillingType",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Active",iconClass:"fa fa-check",callbackfunction:"UpdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,id:"Active"},{title:"Inactive",iconClass:"fa fa-close",callbackfunction:"UpdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,id:"Inactive"},{title:"Delete",iconClass:"fa fa-trash",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!0,id:"Delete"}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],ListData:[]}},created:async function(){var t=this;await t.FetchRecords()},methods:{FetchRecords:async function(){var t=this,e=`TicketId=&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}`;await n["a"].GetTicketTypeList(e).then(e=>{t.BillingTicketType=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTAL_RECORDS,t.Headers.forEach(t=>{t.settings=null,"Edit"!=t.COLUMN_NAME&&"STATUS_NAME"!=t.COLUMN_NAME||(t.settings={isInSlot:!0})}),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),1e3)})},UpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&e.confirmR(e.$t("Confirm"),!0,e.$t("update")+"  "+e.$t("status"),(function(){var i={TicketId:a,StatusId:t,Type:2},s=JSON.stringify(i);n["a"].UpdateMappedTicketStatus(s).then(t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.FetchRecords())})}))},changeStatusForMappedTicket:function(t,e){var a="";$(".chkItems:checkbox:checked").each((function(){$(".chkItems:checkbox:checked").length,a.length>0&&(a+=","),a+=$(this).val()}));var i=this,s={TicketId:a,StatusId:"1003",Type:2},c=JSON.stringify(s);n["a"].UpdateMappedTicketStatus(c).then((function(t){"Success"==t.data.status&&i.ShowAlert(i.$t("RecordUpdatedSuccessfully"),"success",!0,i.$t("Alert")),"Delete"==t.data.status&&i.ShowAlert(i.$t("RecordsDeleteSuccessfully"),"Success",!0,i.$t("Alert")),i.FetchRecords()}))},UpdateAddBillingRule:function(t){var e=this;e.ShowBillingTicketType=!0,e.EditAddTicketTypeData=t},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},getStatusClass:function(t){var e="";switch(t){case"Active":e="px-2 bg-success text-center text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;default:e=""}return e},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchRecords(),$("#"+t+"  span:first-child").attr("class",e)},leftCommonSearch:function(t){const e=new URLSearchParams(t.searchConditionJson),a=e.entries(),i=this.paramsToObject(a);i.hasOwnProperty("TYPENAME")?this.searchCondition=i["TYPENAME"]:this.searchCondition="",this.PageNumber=t.PageNumber,this.isPaged=1,this.FetchRecords()},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"commonDeleteData":this.changeStatusForMappedTicket();break;case"openaddBillingType":this.openaddBillingType();break;case"DownloadExcelData":this.DownloadExcelData();break;case"UpdateStatus":this.UpdateStatus(t.id);break}},openaddBillingType:function(){var t=this;t.EditAddTicketTypeData=[],t.ShowBillingTicketType=!0},Close:function(){var t=this;t.ShowBillingTicketType=!1}}},f=g,C=Object(S["a"])(f,r,d,!1,null,null,null),v=C.exports,E=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageTicketMapping")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("Form",{ref:"AddTicketMapping",scopedSlots:t._u([{key:"default",fn:function({values:a,errors:i}){return[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("label",{attrs:{for:"BillingTicketType"}},[t._v("Billing Ticket Type:"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"BillingTicketType",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:a}){return[e("select",t._b({directives:[{name:"model",rawName:"v-model",value:t.BillingTicketTypeId,expression:"BillingTicketTypeId"}],class:{"form-control":!0,"is-invalid":a[0]},attrs:{id:"ddlBillingTicketType","aria-required":"true","aria-invalid":"true"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.BillingTicketTypeId=e.target.multiple?a:a[0]}}},"select",t.BillingTicketType,!1),[e("option",{attrs:{value:"",selected:"selected"}},[t._v("Select Billing Ticket Type")]),t._l(t.TicketTypeList,(function(a){return e("option",{key:a,domProps:{value:a.TYPE_ID}},[t._v(t._s(a.TYPE_NAME))])}))],2),a[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"BillingTicketType"}},[t._v(t._s(a[0]))]):t._e()]}}],null,!0)})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group",staticStyle:{width:"230px"}},[e("label",{attrs:{for:"BillingTicketType"}},[t._v(t._s(t.$t("AvailableOneCallTicketType"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])])])]),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group",staticStyle:{width:"225px"}},[e("label",{attrs:{for:"BillingTicketType"}},[t._v(t._s(t.$t("AssignOneCallTicketType"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])])])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group",staticStyle:{overflow:"scroll",height:"180px","border-style":"solid"},attrs:{id:"DivAvailabeTypes"}},[e("table",{staticClass:"table table-sm table-bordered",attrs:{id:"tblAvailabeTypes",rowspace:"4"}},t._l(t.AvailableOneCallTicketList,(function(a){return e("tr",{key:a,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.AssignTicketType(a.ID,a.TICKETTYPE)}}},[e("td",[t._v(t._s(a.TICKETTYPE))])])})),0)])]),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-group",staticStyle:{overflow:"scroll",height:"180px","border-style":"solid"},attrs:{id:"DivAssignTypes"}},[e("table",{staticClass:"table table-sm table-bordered",attrs:{id:"tblAssignTypes",rowspace:"4"}},t._l(t.AssignedTicketList,(function(a){return e("tr",{key:a,staticStyle:{cursor:"pointer"},on:{click:function(e){return t.RemoveAssignedTickets(a.objId,a.objValue)}}},[e("td",{attrs:{value:a.objValue}},[t._v(t._s(a.objValue))])])})),0)])])])]),e("div",{staticClass:"col-lg-12 float-left p-0 mb-2"},[e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-4 text-right fullwidthcontrol"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;",title:"Save",id:"btnSave"},on:{click:function(e){return t.SubmitTicketTypeMapping(a,i)}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v("Save")]),e("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:"Cancel",id:"btnCancel"},on:{click:function(e){return t.$emit("Close")}}},[e("i",{staticClass:"fa fa-times"}),t._v(" Cancel")])]),e("div",{staticClass:"col-lg-8 fullwidthcontrol"},[e("div",{staticClass:"py-2"},[e("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])]}}])})],1)])])])],1)])},y=[],m={props:{EditData:{type:String,required:!1}},data(){return{isLoading:!1,ShowBillingTicketType:!1,AvailableOneCallTicketList:[],BillingTicketType:[],TicketTypeList:[],ListData:[],BillingTicketTypeId:"",AssignedTicketList:[]}},created:async function(){var t=this;t.BindDDLTicketTypeList(),t.GetEditData(),t.GetAvailableTicketTypes()},methods:{GetAvailableTicketTypes:function(){var t=this;n["a"].GetAvailableTicketTypes().then(e=>{t.AvailableOneCallTicketList=e.data.result.DATA})},BindDDLTicketTypeList:function(){var t=this,e="TicketId=";n["a"].BindDDLTicketTypeList(e).then(e=>{t.TicketTypeList=e.data.result.DATA})},GetEditData:function(){var t=this,e="TicketId="+t.EditData;""!=t.EditData&&void 0!=t.EditData&&(t.BillingTicketTypeId=t.EditData,n["a"].GetAssignedTicketTypeList(e).then(e=>{e.data.result.DATA.forEach(e=>{t.AssignTicketType(e.ID,e.TYPE_DESC)})}))},AssignTicketType:function(t,e){var a=this,i=t,s=e,c={};c={objId:i,objValue:s},a.AssignedTicketList.push(c);var l=a.AvailableOneCallTicketList.indexOf(a.AvailableOneCallTicketList.filter(t=>t.ID==i)[0]);a.AvailableOneCallTicketList.splice(l,1)},RemoveAssignedTickets:function(t,e){var a=this,i=t,s=e,c={};c={ID:i,TICKETTYPE:s},a.AvailableOneCallTicketList.push(c);c=a.AssignedTicketList.indexOf(a.AssignedTicketList.filter(t=>t.objId==i)[0]);a.AssignedTicketList.splice(c,1)},SubmitTicketTypeMapping:function(t,e){var a=this;a.$refs.AddTicketMapping.validate().then(t=>{if(t){a.AssignedTicketArray=[];var e="";$.each(a.AssignedTicketList,$.proxy((function(t,a){a.objValue.length>0&&(e.length>0?e+=","+a.objValue:e=a.objValue)}),this));var i={BillingTicketTypeId:a.BillingTicketTypeId,AssignedTicketType:e},s=JSON.stringify(i);n["a"].SubmitTicketTypeMapping(s).then(t=>{"Success"==t.data.status&&("Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("View")]),"success",!0,a.$t("Alert")),a.$parent.FetchRecords(),a.$emit("Close")):"TICKET UPDATED"==t.data.status?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("TicketTypeMapping")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("ErrorWhileProcessingRequest"),"failure"),a.$emit("close"),a.FetchRecords())})}})}}},b=m,D=Object(S["a"])(b,E,y,!1,null,null,null),_=D.exports,M={components:{BillingTicketType:v,AddTicketMapping:_},data(){return{AddTicketTypePopup:!1,noRecords:!1,BtId:0,TicketId:0,TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",CurrentPage:1,TotalPages:0,SearchCondition:"",TicketSourceList:[],GroupStart:1,noRecords:!1,BillingTicketType:"",OneCallTicketType:"",CreatedBy:"",ticketSourceId:0,EditData:"",showTickectSource:!1,ShowTicketMapping:!1,showBillingTicketList:!1,showExpanded:"",StatusMappingList:[],index:0,MappedTicketId:"",StatusId:"",manageTicketSourceId:0,IsTicketTypeView:!0,ShowTicketType:!1,listheaderbuttons:o.buttons,leftSearchFields:o.leftsearchSchema,Headers:[{COLUMN_NAME:"TYPENAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Billing Type Name",DISPLAY_ORDER:1},{COLUMN_NAME:"TYPE_DESC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"One Call Ticket Type",DISPLAY_ORDER:2},{COLUMN_NAME:"NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Resource Created By","DISPLAY_ORDER ":3},{COLUMN_NAME:"STATUS_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:4},{COLUMN_NAME:"Edit",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Edit",DISPLAY_ORDER:5}]}},created:async function(){await this.FetchRecords()},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchRecords(),$("#"+t+"  span:first-child").attr("class",e)},leftCommonSearch:function(t){const e=new URLSearchParams(t.searchConditionJson),a=e.entries(),i=this.paramsToObject(a);i.hasOwnProperty("TYPENAME")?this.searchCondition=i["TYPENAME"]:this.searchCondition="",this.PageNumber=t.PageNumber,this.isPaged=1,this.FetchRecords()},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"commonDeleteData":this.changeStatusForMappedTicket();break;case"openAddTicketMapping":this.openAddTicketMapping();break;case"openaddWorkType":this.openaddWorkType();break;case"DownloadExcelData":this.DownloadExcelData();break;case"UpdateStatus":this.UpdateStatus(t.id);break;case"openTicketTypeLisiting":this.OpenTicketTypePopUp(null);break}},isBlank:function(t){return!t||/^\s*$/.test(t)},OpenTicketTypePopUp:function(t){var e=this;e.WtId=t,e.AddTicketTypePopup=!e.AddTicketTypePopup},formatDateTime:function(t){if(t)return moment(t).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(Globalize.culture().calendar.patterns.t).replace("t","A").replace("t",""))},Searchdata:function(){var t=this;t.SearchCondition=t.SearchCondition,t.FetchRecords()},refreshList:function(){this.SearchCondition="",this.FetchRecords()},getStatusClass:function(t){var e="";switch(t){case"Active":e="px-2 text-center bg-success text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;default:e=""}return e},checkuncheck:function(){var t=$("input[name='chkMappedTickets']:checked").length;t>0?($("#btnActive").removeClass("disabled").addClass("enabled"),$("#btnInActive").removeClass("disabled").addClass("enabled"),$("#DeleteMultiple").removeClass("disabled").addClass("enabled")):($("#btnActive").removeClass("enabled").addClass("disabled"),$("#btnInActive").removeClass("enabled").addClass("disabled"),$("#DeleteMultiple").removeClass("enabled").addClass("disabled"))},DownloadExcelData:function(){var t=this;t.isBlank(t.SearchCondition)||(t.PageNumber=1);var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.TotalRecords}&pageNumber=${t.PageNumber}`;t.isBlank(t.SearchCondition)||(e=e+"&search="+t.SearchCondition),n["a"].GetTicketTypeMappingList(e).then((function(e){"Success"==e.data.status&&(null==e.data.result?t.ShowAlertShowAlert($t("NoRecordfound"),"warning",!0,$t("Alert")):t.JSONToCSVConvertor(e.data.result,"Ticket-Detail",!0))}))},FetchRecords:function(){var t=this;t.isBlank(t.SearchCondition)||(t.PageNumber=1);var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}`,a="";this.isBlank(this.searchCondition)||(a+=this.searchCondition),""!=a&&(e=e+"&search="+a),n["a"].GetTicketTypeMappingList(e).then((function(e){t.TicketSourceList=[],t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.TotalRecords=0,null!=e.data&&""!=e.data&&("Success"==e.data.status?(t.Headers.forEach(t=>{t.settings=null,"Edit"!=t.COLUMN_NAME&&"STATUS_NAME"!=t.COLUMN_NAME||(t.settings={isInSlot:!0})}),t.TicketSourceList=e.data.result.DATA,t.TicketSourceList.length>0?(t.TotalRecords=e.data.result.DATA[0].TOTAL_RECORDS,t.BillingTicketType=e.data.result.DATA[0].TYPENAME,t.OneCallTicketType=e.data.result.DATA[0].TYPE_DESC,t.CreatedBy=e.data.result.DATA[0].NAME,t.NoRecord=!1,t.index=e.data.result.DATA[0].R_NUM,t.MappedTicketId=e.data.result.DATA[0].TYPE_ID,t.StatusId=e.data.result.DATA[0].STATUS_ID,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber):t.NoRecord=!0):t.NoRecord=!0,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500))}))},openPopupForSetupTickectSource:function(t){void 0==t&&(t=0),this.ticketSourceId=t,this.showBillingTicketList=!this.showBillingTicketList},managePopupForTicketMapping:function(t){var e=this;void 0==t&&(t=0),e.manageTicketSourceId=t,e.showTickectSource=!this.showTickectSource},changeStatusForMappedTicket:function(t,e){var a="";$(".chkItems:checkbox:checked").each((function(){$(".chkItems:checkbox:checked").length,a.length>0&&(a+=","),a+=$(this).val()}));var i=this,s={TicketId:a,StatusId:"1003",Type:1},c=JSON.stringify(s);i.confirmR(i.$t("ConfirmDelete"),!0,i.$t("update")+"  "+i.$t("status"),(function(){n["a"].UpdateMappedTicketStatus(c).then((function(t){"Success"==t.data.status&&i.ShowAlert(i.$t("RecordUpdatedSuccessfully"),"success",!0,i.$t("Alert")),"Delete"==t.data.status&&i.ShowAlert(i.$t("RecordsDeleteSuccessfully"),"Success",!0,i.$t("Alert")),i.FetchRecords()}))}))},JSONToCSVConvertor:function(t,e,a){var i="object"!=typeof t?JSON.parse(t):t,s='<table border="1" cellpadding="10" cellspacing="10"><tr>';if(a){var c="";for(var l in i.schema=[{COLUMN_NAME:"TYPENAME",DISPLAY_NAME:"Billing Ticket type",VISIBLE:!0},{COLUMN_NAME:"TYPE_DESC",DISPLAY_NAME:"One call Ticket type",VISIBLE:!0},{COLUMN_NAME:"NAME",DISPLAY_NAME:"Resource Created by",VISIBLE:!0},{COLUMN_NAME:"STATUS_NAME",DISPLAY_NAME:"status",VISIBLE:!0}],i.schema)if(1==i.schema[l].VISIBLE){var o=i.schema[l].DISPLAY_NAME,n=i.schema[l].COLUMN_NAME;if(o||/^\s*$/.test(o)){r=String(o).toUpperCase();r||1==/^\s*$/.test(r)?o=r:(r=String(o),(r||1==/^\s*$/.test(r))&&(o=r))}else{var r=String(n).toUpperCase();r||1==/^\s*$/.test(r)?o=r:(r=String(n),o=r||1==/^\s*$/.test(r)?r:n)}if(c+="<th>"+o+"</th>","planned_start_date"==n&&"project"==$("#ControllerName").val()){o="PlanEndDate";r=String(o).toUpperCase();r||1==/^\s*$/.test(r)?o=r:(r=String(o),(r||1==/^\s*$/.test(r))&&(o=r)),c+="<th>"+o+"</th>"}}"Lead-Detail"==e&&(c=c+"<th>"+String("LastNote")+"</th>"),s+=c+"</tr>"}for(var d=0;d<i.DATA.length;d++){c="<tr>";var u=0;for(u=0;u<i.schema.length;u++)if(1==i.schema[u].VISIBLE){var p="";p="date"==i.schema[u].DATA_TYPE?null==i.DATA[d][i.schema[u].COLUMN_NAME]?"":moment(String(i.data[d][i.schema[u].COLUMN_NAME]),"YYYY-MM-DD").format("DD/MM/YYYY"):null==i.DATA[d][i.schema[u].COLUMN_NAME]?"":i.DATA[d][i.schema[u].COLUMN_NAME],c+='<td type="'+i.schema[u].DATA_TYPE+'">'+p+"</td>","date"==i.schema[u].DATA_TYPE&&"planned_start_date"==i.schema[u].COLUMN_NAME&&"project"==$("#ControllerName").val()&&(p=null==i.DATA[d]["planned_end_date"]?"":moment(String(i.DATA[d]["planned_end_date"]),"YYYY-MM-DD").format("DD/MM/YYYY"),c+='<td type="'+i.schema[u].DATA_TYPE+'">'+p+"</td>")}c.slice(0,c.length-1),s+=c+"</tr>"}if(s+="</table>",""!=s){e=e;var T="data:application/xls;charset=utf-8,"+escape(s),h=document.createElement("a");h.href=T,h.style="visibility:hidden",h.download=e+".xls",document.body.appendChild(h),h.click(),document.body.removeChild(h)}else growl.error("Invalid data")},UpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&e.confirmR(e.$t("Confirm"),!0,e.$t("update")+"  "+e.$t("status"),(function(){var i={TicketId:a,StatusId:t,Type:1},s=JSON.stringify(i);n["a"].UpdateMappedTicketStatus(s).then(t=>{200==t.status&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.FetchRecords())})}))},openaddWorkType:function(){var t=this;t.ShowTicketType=!0},openAddTicketMapping:function(){var t=this;t.EditData=[],t.ShowTicketMapping=!0},UpdateWorkTypeListing:function(t){var e=this;e.EditData=t.TYPE_ID,e.ShowTicketMapping=!0},Close:function(){var t=this;t.ShowTicketMapping=!1,t.ShowTicketType=!1}}},N=M,L=Object(S["a"])(N,i,s,!1,null,null,null);e["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d0c22fa.js.map