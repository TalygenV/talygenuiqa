(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d215c19"],{c00f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("div",{attrs:{id:"addChainRecord"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12 padding-t_8"},[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("Add")))]),t("a",{staticClass:"p-action-btn text-white btnpin iconenable enable",staticStyle:{float:"right",display:"none"},attrs:{href:"javascript:;",title:"Pin"},on:{click:function(t){return e.setTourGuideSteps(0)}}},[t("em",{staticClass:"fa fa-road",staticStyle:{cursor:"pointer"},attrs:{"aria-hidden":"true"}}),e._v(" "),t("br"),e._v(e._s(e.$t("PageTour"))+" ")])])])]),t("div",{staticClass:"border p-3"},[t("Form",{ref:"AddChain"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)]),t("div",{staticClass:"row"},[t("div",{staticClass:"listing mt-3 px-3"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{id:"tbContainer"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",[t("span",[e._v(e._s(e.$t("Level"))+":"),t("sup",{staticClass:"text-danger"},[e._v("*")])])]),t("th",[t("span",[e._v(e._s(e.$t("Group"))+":"),t("sup",{staticClass:"text-danger"},[e._v("*")])])]),t("th",{staticClass:"text-center single-action"},[t("a",{staticClass:"round-icon-small btn-success-light d-block float-none m-auto",staticStyle:{"line-height":"33px"},attrs:{href:"javascript:;",id:"btnAdd",title:"Add"},on:{click:e.AddRow}},[t("i",{staticClass:"fa fa-plus"})])])])]),t("tbody",e._l(e.Mainleveldiv,(function(a,i){return t("tr",{key:i,staticClass:"mainleveldiv"},[t("td",[t("Field",{attrs:{name:"Level",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],staticClass:"form-control level",class:{"form-control":!0,"is-invalid":s[0]},attrs:{name:a.name},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"value",t.target.multiple?i:i[0])},function(t){return e.AlreadyExist(t,i,a,"level")}]}},[t("option",{attrs:{value:""}},[e._v("Select Level")]),e._l(e.Level,(function(a){return t("option",{key:a,domProps:{value:a.value}},[e._v(" "+e._s(a.name))])}))],2),s[0]?t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Level"+i}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"Group",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.Group,expression:"item.Group"}],class:{"form-control":!0,"is-invalid":s[0]},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"Group",t.target.multiple?i:i[0])},function(t){return e.AlreadyExist(t,i,a,"group")}]}},[t("option",{attrs:{value:""}},[e._v("Select Ticket Group")]),e._l(e.GroupData,(function(a){return t("option",{key:a,domProps:{value:a.value}},[e._v(e._s(a.name))])}))],2),s[0]?t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Group"}},[e._v(e._s(s[0]))]):e._e()]}}],null,!0)})],1),0!=i?t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"round-icon-small btn-danger-light d-block float-none m-auto",attrs:{href:"javascript:;",id:"btnRemove",title:"Remove"},on:{click:function(t){return e.DeleteUser(i)}}},[t("i",{staticClass:"fa fa-trash"})])]):e._e()])})),0)])])])]),t("div",{staticClass:"col-12 mt-3"},[t("div",{staticClass:"row flex-row-reverse"},[t("div",{staticClass:"col-lg-6 text-right"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",id:"aChainTicketSave",title:"Save"},on:{click:e.SaveData}},[t("i",{staticClass:"fa fa-floppy-o pr-2"}),t("span",[e._v(e._s(e.$t("Save")))])]),e._v("Â  "),t("RouterLink",{staticClass:"btn btn-danger",attrs:{to:"/Ticketing/Chain",title:"Cancel",id:"gobacktolistscreen"}},[t("i",{staticClass:"fa fa-times pr-2"}),t("span",[e._v(e._s(e.$t("Cancel")))])])],1),t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("span",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])])])])])],1)])])},s=[],l=(a("14d9"),a("9769")),r={created:function(){var e=this;e.GetTicketGroupsForDropdownList(),0!=e.$route.params.id&&e.GetChainData(e.$route.params.id)},data(){return{Mainleveldiv:[{value:"",Group:""}],GroupData:[],FormSchema:[{layoutType:"two",Data:[{astype:"TextField",label:"Ticket Service Board Name",name:"TicketChainName",value:"",placeholder:"",validationRules:{required:!0,max:250}},{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:{required:!0,max:1e3}}]}],Level:[{name:"Level 1",value:1},{name:"Level 2",value:2},{name:"Level 3",value:3},{name:"Level 4",value:4},{name:"Level 5",value:5},{name:"Level 6",value:6},{name:"Level 7",value:7},{name:"Level 8",value:8},{name:"Level 9",value:9},{name:"Level 10",value:10}],buttons:[{type:"submit",class:"btn btn-warning",text:"<i class='fa fa-save pr-2'></i>Save Of Draft",isVisible:!1}]}},methods:{AddRow:function(e){var t=this;t.Mainleveldiv.push({value:"",Group:""}),t.$nextTick(()=>{t.$refs.AddChain.validate()})},GetTicketGroupsForDropdownList:function(){var e=this;l["a"].GetTicketGroupsForDropdownList().then((function(t){t.data.forEach(t=>{e.GroupData.push({name:t.ticket_group_name,value:t.ticket_group_id})})}))},AlreadyExist:function(e,t,a,i){var s=this;s.Mainleveldiv.some(t=>t.value===e.target.value)?(s.Mainleveldiv[t].value="",s.ShowAlert("Already Selected","warning")):s.Mainleveldiv.some(t=>t.Group===e.target.value)?(s.Mainleveldiv[t].Group="",s.ShowAlert("Already Selected","warning")):"level"==i?s.Mainleveldiv[t].value=e.target.value:"group"==i&&(s.Mainleveldiv[t].Group=e.target.value)},GetChainData:function(e){var t=this,a="ticketChainId="+e;l["a"].GetChainData(a).then(e=>{t.FormSchema[0].Data[0].value=e.data.DATA[0].ticket_chain_name,t.FormSchema[0].Data[1].value=e.data.DATA[0].description,t.Mainleveldiv=[],e.data.DATA.forEach((e,a)=>{t.Mainleveldiv.push({value:e.ticket_group_level,Group:e.group_id})})})},DeleteUser:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Group"),(function(){t.Mainleveldiv.splice(e,1)}))},SaveData:function(){var e=this;e.$refs.AddChain.validate().then(t=>{if(t){var a=e.Mainleveldiv.some(e=>""===e.value||""===e.Group);if(a)e.ShowAlert("Please select both level and group for all rows","error");else{var i=`serviceBoardId=${e.$route.params.id}&serviceBoardName=${e.FormSchema[0].Data[0].value}&description=${e.FormSchema[0].Data[1].value}&LevelIdsOrGroupIds=${JSON.stringify(e.Mainleveldiv)}`;l["a"].AddTicketServiceBoard(i).then(t=>{"3"==t.data?e.ShowAlert("Ticket Service Board Name already exists","failure"):"1"==t.data||"2"==t.data?(e.ShowAlert("Ticket ServiceBoard has been succesfully added","success"),this.$router.push({path:"/Ticketing/Chain"})):e.ShowAlert(e.$t("GroupHasAdded"),"success")})}}})}}},n=r,o=a("2877"),c=Object(o["a"])(n,i,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d215c19.js.map