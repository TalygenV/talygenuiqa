(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cfde138"],{"0c51":function(e,t,a){"use strict";a("6c64")},"23ca":function(e,t,a){var o=a("5126");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("5db21ed0",o,!0,{sourceMap:!1,shadowMode:!1})},"33e4":function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"container-fluid mt-2"},[t("div",[t("div",{staticClass:"row mt-0.5",attrs:{id:"checkForZone"}},["Google"==e.mapType&&1==e.config.isShowSearchBox?t("div",{staticClass:"col-lg-5 col-sm-12"},[t("div",{staticClass:"form-group d-flex"},[t("div",{staticClass:"input-group customsearchbox divcityshown"},[1==e.config.isShowSearchBox?t("input",{staticClass:"form-control",attrs:{type:"text",id:"pac-input",maxlength:"50",placeholder:"Enter Your Location or Zip Code"}}):e._e()])])]):e._e(),t("div",{staticClass:"col-lg-3 col-sm-12"},[void 0!=e.config&&1==e.config.isShowCurrentLocation?t("div",{staticClass:"form-group"},[t("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:e.CurrentLocation}},[e._v("Use my location")])]):e._e()])]),t("div",{staticClass:"search"},[t("div",{staticClass:"map-result"},[t("div",{staticClass:"map-actions"},[void 0!=e.config&&1==e.config.isShowGetDirection?t("span",{staticClass:"save legends_low"},[1==e.config.isShowGetDirection?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"GetDirection"},on:{click:e.GetDirection}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v("  "),void 0!=e.config&&1==e.config.isShowLocator?t("span",{staticClass:"save legends_low"},[1==e.config.isShowLocator?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"View Locator on map"},on:{click:e.ViewLocatorOnMap}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v("  "),void 0!=e.config&&1==e.config.isShowEtaMap?t("span",{staticClass:"edit legends_profile"},[1==e.config.isShowEtaMap?t("a",{attrs:{href:"javascript:;",title:"ETA Map"},on:{click:function(t){return e.LoadLocatorDataonMap("locator")}}},[t("em",{staticClass:"fa fa-map"})]):e._e()]):e._e(),void 0!=e.config&&1==e.config.isShowEtaPipeLines?t("span",{staticClass:"edit legends_high esri_prof"},[e._m(0),t("div",{staticClass:"dropdown"},[e._m(1),t("div",{staticClass:"dropdown-menu esri_prof_data",staticStyle:{display:"block"}},[e._m(2),t("div",{staticClass:"w-100 mb-2"},e._l(e.UtilityMapData,(function(a,o){return t("a",{key:o,staticClass:"dropdown-item p-0",attrs:{href:"javascript:;"}},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxUtilityMap",attrs:{type:"checkbox"}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{type:"checkbox"}},[t("label",{staticClass:"font-weight-bold"},[e._v(e._s(a.LAYER_NAME))])])])])})),0),t("div",[t("a",{staticClass:"btn btn-primary d-block text-white py-2",attrs:{href:"javascript:;",title:"Go"},on:{click:e.ShowUtilityMap}},[e._v("Go"),t("i",{staticClass:"fa fa-angle-double-right pl-2"})])])])])]):e._e()]),e.showSaveZone?t("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"0px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.OpenSaveZone}},[e._m(3)]):e._e(),e.showDeleteFeature?t("div",{staticStyle:{position:"absolute",right:"1670px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.DeleteFeature}},[e._m(4)]):e._e(),t("div",{staticClass:"map"},[t("div",{staticClass:"map_canvas map_ipadcontrol",style:{"min-height":void 0==e.mapHeight?"500px":e.mapHeight,"min-width":void 0==e.mapWidth?"100%":e.mapWidth},attrs:{id:e.mapContainer}}),t("div",{staticClass:"w-100 float-left",staticStyle:{position:"absolute",top:"0px"}},[0==e.showSetting?t("a",{staticClass:"showduration anchideduration",attrs:{title:"Hide"},on:{click:e.ShowTravelMode}},[e._v("Hide")]):e._e(),1==e.showSetting?t("a",{staticClass:"showduration ancshowduration",attrs:{title:"Show Setting"},on:{click:e.ShowTravelMode}},[e._v("Show Setting")]):e._e(),t("div",{staticClass:"position-absolute float-left my24 mx24 bg-gray-faint round settingPopup d-none",staticStyle:{"z-index":"999999"}},[t("div",{attrs:{id:"params"}},[e._m(5),e._v(" "),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Travel Mode:")]),e._m(6),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Maximum Duration:")]),t("div",{staticClass:"w-100 float-left",staticStyle:{"margin-bottom":"15px"}},[t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:e.time},on:{onChange:function(t){return e.TravelMode(e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes10")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:2*e.time},on:{onChange:function(t){return e.TravelMode(2*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes20")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:3*e.time},on:{onChange:function(t){return e.TravelMode(3*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes30")])])])])])])])])])])]),t("div",{staticClass:"float-right mt-2"},[void 0!=e.config&&1==e.config.isShowSaveExtentButton?t("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{title:"",name:"btnSaveCity",tabindex:"6","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:e.SaveMapExtent}},[t("i",{staticClass:"fa fa-floppy-o pr-1"}),e._v("Save")]):e._e()]),e.showAddZone?t("AddZone",{attrs:{polygonData:e.polygonData,polygonNewShapeId:e.polygonNewShapeId},on:{DeleteFeature:e.DeleteFeature,GetZoneManagementData:e.GetZoneManagementData,Close:e.Close}}):e._e(),e.showSaveZonePopUp?t("SaveZone",{on:{SaveZoneData:e.SaveZoneData,OpenSaveZone:e.OpenSaveZone,Close:e.Close}}):e._e()],1)},i=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 bg-grey"},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{for:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}},[e._v("SelectAll")])])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"background-color":"rgb(40, 167, 69)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save Zone")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"background-color":"rgb(240, 4, 4)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Delete Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v("Delete Selected Shape")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row float-left"},[t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min10"}),e._v(" Minutes10 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min20"}),e._v(" Minutes20 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min30"}),e._v(" Minutes30 ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"mr12 toggle-group text-center"},[t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"foot-walking"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Walking")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"cycling-regular"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Cycling")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"driving-car",checked:"checked"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Driving")])])])}],n=(a("14d9"),a("13d5"),a("e192")),r=a.n(n),s=(a("ac6d"),a("e11e")),l=a.n(s),p=(a("6cc5"),a("cae8")),c=a.n(p),d=(a("bdd0"),a("885b")),m=a.n(d),g=(a("c307"),a("2573"),a("20d6"),a("5fbf"),a("ac00")),u=(a("1615"),a("9769")),f=a("3975"),h=a("e222"),v=(a("5bfd"),a("125d"),a("afaa")),y={components:{AddZone:f["a"],SaveZone:h["a"]},props:{mapType:{required:!0},Data:{required:!0},isShowDrawButton:{required:!0,type:String},config:{required:!1},mapWidth:{required:!1},mapHeight:{required:!1},latLng:{required:!1},mapContainer:{required:!0},selectedUser:{required:!0},UtilityMapData:{required:!0},editZone:{required:!0},zoneId:{required:!0}},data:function(){return{isLoading:!1,showDeleteFeature:!1,showSaveZonePopUp:!1,showSaveZone:!1,showAddZone:!1,time:600,colors:"",showSetting:null,address:[],UserName:null,UserEmailId:null,imageMarker:[],mapLayer:[],map:null,locations:[],locationPriority:[],locationname:[],ticketNumberList:[],LocationwithPriority:null,markers:[],mapZoom:!1,mapMarker:[],markerCluster:null,startingPoint:null,showSettingPopup:!1,lngLatData:[],fullAddress:[],leafLetReferenceNumber:[],polygonData:[],polygonNewShapeId:null,zoneData:[],drawingManager:null,currentSelectedShape:null,myPolygon:null,editableLayers:null,showHideEtaMap:!1}},watch:{Data:{handler:function(){setTimeout(()=>{this.ShowLocationOnGoogleMap()},500)},deep:!0},config:{handler:function(){this.ShowDrawingManager()},deep:!0},selectedUser:{handler:function(){this.ViewLocatorOnMap(this.selectedUser)},deep:!0},latLng:{handler:function(){this.ViewOnMap()}}},mounted:function(){"Google"==this.mapType?setTimeout(()=>{},2e3):"MapBox"==this.mapType?setTimeout(()=>{this.initMapBox(this.Data,"pk.eyJ1IjoiaGFycmlzbHVtZW4iLCJhIjoiY2s2dWtrMzJ3MDk2NTNncXMxMjlxa29mcCJ9.riRtpclzr9XfExHhclre8A")},2e3):"Esri"==this.mapType?setTimeout(()=>{this.initLeafletMap(this.Data)},2e3):"LeafLet"!=this.mapType&&"Esri"!=this.mapType||setTimeout(()=>{this.initLeafletMap(this.Data)},2e3)},created:function(){this.UserName=this.GetUserInfo.Name,this.UserEmailId=this.GetUserInfo.Email,void 0!=this.myPolygon&&null!=this.myPolygon&&this.myPolygon.setMap(null);let e=document.createElement("script");e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAJdx4gmhGKWjPTBBVk5riFgpbE0lGS-xM&callback=initAutocompletes&libraries=geometry,drawing,places&v=weekly"),document.head.appendChild(e);let t=document.createElement("script");t.setAttribute("src","https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"),document.head.appendChild(t);let a=document.createElement("script");a.setAttribute("src","~/Scripts/FsmMaps/fontawesome-markers.min.js"),document.head.appendChild(a),setTimeout(()=>{this.ShowLocationOnGoogleMap()},2e3),"Google"==this.mapType&&setTimeout(()=>{this.initAutocompletes()},2e3)},methods:{initAutocompletes:function(){var e=this;const t=document.getElementById("pac-input"),a=new google.maps.places.SearchBox(t);e.map.addListener("bounds_changed",()=>{a.setBounds(e.map.getBounds())}),a.addListener("places_changed",()=>{var t,o,i=a.getPlaces(),n=new google.maps.LatLngBounds;for(t=0;o=i[t];t++)n.extend(o.geometry.location);e.map.fitBounds(n),e.map.setZoom(4)})},CurrentLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.GetCurrentLocation,e.geoError):alert("Geolocation is not supported by this browser.")},GetCurrentLocation:function(e){var t=this;if(e){var a=e.coords.latitude,o=e.coords.longitude,i=new google.maps.LatLng(a,o);t.map.setCenter(i),t.map.setZoom(18)}},SaveMapExtent:function(){var e=this;e.$emit("SaveMapExtent",e.fullAddress,e.mapType)},ShowUtilityMap:function(){var e=this,t=JSON.parse(localStorage.getItem("coordinates"));null==t&&(t={x:"43.133971",x1:"43.132812",y:"-76.088009",y1:"-76.087183"}),Object(v["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/layers/GraphicsLayer"]).then(([a,o,i,n,r])=>{var s=new a({basemap:"hybrid"});new o({container:"utilitymap",map:e.map,extent:{xmin:-13856051.7748509,ymin:2821931.08215458,xmax:-7488766.97004404,ymax:6364777.09974285,spatialReference:102100}});""!=layerUrl&&null!=layerUrl&&(Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00"},Colors.random=function(){var e,t=0;for(var a in this.names)Math.random()<1/++t&&(e=a);return{name:e,rgb:this.names[e]}},String(layerUrl).split(",").forEach((function(e){var t=String(e).split("^")[1];""!=t&&null!=t&&"null"!=t&&"undefined"!=typeof t||(t=String(Colors.random().rgb).toUpperCase());const a={type:"simple",symbol:{color:t,type:"simple-line",style:"solid"},visualVariables:[{type:"size",field:"ELEV_GAIN",minDataValue:0,maxDataValue:2300,minSize:"3px",maxSize:"7px"}]};var o=String(e).split("^")[0];s.add(new i({url:o,renderer:a}))})));new o({container:"utilitymap",map:s,basemap:"hybrid",center:[t.y,t.x],zoom:17});var l=new r;s.add(l);var p=null;void 0!=t&&null!=t&&(p=[[t.y1,t.x1],[t.y1,t.x],[t.y,t.x],[t.y,t.x1]]);p={type:"polygon",rings:p};var c={type:"simple-fill",color:[255,0,0,.35],outline:{color:[255,0,0],width:1}},d=new n({geometry:p,symbol:c});l.add(d)}).catch(e=>{console.error(e)})},GetDirection:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.showRoutePosition,e.geoError):alert("Geolocation is not supported by this browser.")},geoError:function(){},showRoutePosition:function(e){var t=this;if(e){var a=e.coords.latitude,o=e.coords.longitude,i=new google.maps.LatLng(a,o),n=new google.maps.LatLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1]),s=localStorage.getItem("UserImage");String(s).indexOf("blob")<=0&&(s="https://app.talygen.com/Content/images/Black/user.png");var p={lat:a,lng:o};if("Google"==t.mapType){var c={url:s,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},d=new google.maps.Marker({position:p,icon:c,map:t.map}),m=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+s+"' class='marker' /> <div style='display:block;width: 270px;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"});d.addListener("click",(function(){m.open(t.map,this)})),t.imageMarker.push(d);var g={path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},u={strokeColor:"#ff0000",strokeOpacity:0,fillOpacity:0,icons:[{icon:g,offset:"0",repeat:"4px"}]},f={map:t.map,suppressMarkers:!1,polylineOptions:u},h=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer(f),y=new google.maps.LatLng(a,o);function L(e,t){var a="DRIVING";e.route({origin:i,destination:n,travelMode:google.maps.TravelMode[a]},(function(e,a){if("OK"==a){t.setDirections(e);var o='<span style="font-weight:bold;">Distance: </span>'+e["routes"][0].legs[0].distance.text+'<br /><span style="font-weight:bold;">Time: </span>'+e["routes"][0].legs[0].duration.text,i=new google.maps.InfoWindow({content:o});google.maps.event.addListener(u,"click",(function(e){i.setPosition(e.latLng),i.open(map)})),google.maps.event.addListener(map,"click",(function(){i.close()}))}else window.alert("Directions request failed due to "+a+". Route exceeds maximum distance limitation.")}))}v.setMap(t.map),L(h,v)}else if("MapBox"==t.mapType){var b={lon:parseFloat(p.lng,10),lat:parseFloat(p.lat,10)},w='<img src="'+s+'" style="width:100px;height:100px;" />',k=new r.a.Popup({offset:25}).setHTML(w),C=document.createElement("div");C.className="marker",C.style.backgroundImage="url("+s+")",C.style.backgroundSize="cover",C.style.width="40px",C.style.height="40px";d=new r.a.Marker(C).setPopup(k).setLngLat(b).addTo(t.map);t.imageMarker.push(d);var _="https://api.mapbox.com/directions/v5/mapbox/driving/"+o+","+a+";"+t.Data[0].pinLatLong.latitude.split(",")[1]+","+t.Data[0].pinLatLong.latitude.split(",")[0]+"?steps=true&geometries=geojson&access_token="+r.a.accessToken;t.map.getLayer("point")||t.map.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:y}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}});var x=new XMLHttpRequest;x.open("GET",_,!0),x.onload=function(){var e=JSON.parse(x.response);if(""!=typeof e.code&&"InvalidInput"!=e.code){var a=e.routes[0],o=a.geometry.coordinates,i={type:"Feature",properties:{distance:a.distance,duration:a.duration},geometry:{type:"LineString",coordinates:o}};t.map.getSource("route")?t.map.getSource("route").setData(i):(t.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),t.map.on("click","route",(function(e){t.map.queryRenderedFeatures(e.point,{layers:["route"]});var a=e.features[0].properties,o=a.distance;o=parseFloat(.000621371192*o,10).toFixed(2);var i='<span style="font-weight:bold;">Distance: </span>'+o+' mi<br /><span style="font-weight:bold;">Time: </span>'+timeConvert(a.duration);(new r.a.Popup).setLngLat(e.lngLat).setHTML(i).addTo(t.map)})))}else try{ShowMsgWithMsg("Route exceeds maximum distance limitation.","failure")}catch(n){alert("Route exceeds maximum distance limitation.")}},x.send()}else{var S=l.a.icon({iconUrl:s,iconSize:[40,40]});k=l.a.popup().setContent("<img src="+s+" />");l.a.marker([a,o],{icon:S}).bindPopup(k).openPopup().addTo(t.map);var A=l.a.Routing.control({waypoints:[l.a.latLng(a,o),l.a.latLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1])],routeWhileDragging:!1,createMarker:function(){return null}}).addTo(t.map);A.on("routesfound",(function(e){var t=e.routes;t[0].summary}))}}},DeleteFeature:function(){var e=this;null!=e.currentSelectedShape&&"undefined"!=typeof e.currentSelectedShape&&(e.currentSelectedShape.setMap(null),e.currentSelectedShape=null,e.showAddZone=!1,e.showDeleteFeature=!1)},ShowDrawingManager:function(){var e=this;null==e.drawingManager&&void 0!=e.config&&1==e.config.isShowDrawButton&&(e.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"],setEditable:!0},polylineOptions:{editable:!0}}),e.drawingManager.setMap(e.map),google.maps.event.addListener(e.drawingManager,"overlaycomplete",e.GetGoogleAddressToDraw))},ViewLocatorOnMap:function(e){var t,a=this;a.isLoading=!0,t=void 0!=a.selectedUser?`selectedUser=${e}&reqFrom=`:"reqFrom=ETAMAP",u["a"].TrackByUserId(t).then((function(e){if(null!=e.data.data&&e.data.data.length>0){var t=e.data.data;a.ShowUserOnMap(t,a.map),a.isLoading=!1}else a.ShowAlert(a.$t("CurrentLocationNotFound"),"warning",!0,a.$t("Alert")),a.isLoading=!1}))},ShowUserOnMap:function(e,t){var a=this,o=[];$.each(e,(function(e,t){var i=t.IMAGE_PATH,n={lat:parseFloat(t.LATITUDE,10),lng:parseFloat(t.LONGITUDE,10)};o.push([n.lat,n.lng]);new google.maps.LatLng(n.lat,n.lng);String(i).indexOf("blob")<=0&&(i="/Content/images/user_avtar.png");var s='<div class="w-100 float-left popupcontent" style="padding:0px 6px 0px 0px;">';if(s+='<img src="'+i+'" class="float-left" style="width:50px;height:50px; border-radius: 100%;border: 3px solid #f2f2f2;" />',s+='<div style="padding-left:8px; padding-top:5px;width:80%;" class="float-left">',s+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Name: </b>"+t.NAME+" </p>",s+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Department: </b>"+t.DEPARTMENT_NAME+" </p></div>",t.TRACK_ID>0&&(s+="<p style='margin-bottom:2px;' class='px-2 float-left'><b style='font-weight:bold;'>"+t.NAME+" </b> is going to ticket number: "+t.TICKET_NUMBER+" </p>"),s+="</div>","Google"==a.mapType){var p={url:i,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},c=new google.maps.Marker({position:n,icon:p,map:a.map});a.imageMarker.push(c);var d=new google.maps.InfoWindow({content:s});try{c.addListener("click",(function(){d.open(a.map,this)}))}catch(h){console.log(h)}}else if("MapBox"==a.mapType){var m={lon:parseFloat(n.lng,10),lat:parseFloat(n.lat,10)},g=new r.a.Popup({offset:25}).setHTML(s),u=document.createElement("div");u.className="marker",u.style.backgroundImage="url("+i+")",u.style.backgroundSize="cover",u.style.width="50px",u.style.height="50px";c=new r.a.Marker(u).setPopup(g).setLngLat(m).addTo(a.map);a.map.flyTo({center:[m.lon,m.lat],essential:!0}),a.imageMarker.push(c)}else{var f=l.a.icon({iconUrl:i,iconSize:[40,40]});g=l.a.popup().setContent(s),c=l.a.marker([n.lat,n.lng],{icon:f}).bindPopup(g).openPopup().addTo(a.map);a.imageMarker.push(c),a.map.fitBounds(o)}}))},ViewOnMap:function(){var e=this,t=new google.maps.LatLng(e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]);"Google"==e.mapType?(e.markers.forEach((function(t,a){if(t.title==(e.latLng.TicketNumber||e.latLng.ticket_number)){let o=new google.maps.InfoWindow;o.setContent(t.address),o.open(e.map,e.markers[a])}})),e.map.panTo(t),e.map.setZoom(18)):"MapBox"==e.mapType?e.markers[0].features.forEach((function(t,a){e.map.flyTo({center:[e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),t.properties.ticketNumber==(e.latLng.TicketNumber||e.latLng.ticket_number)&&new r.a.Popup({closeOnClick:!0}).setLngLat([e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]]).setHTML(t.properties.address).addTo(e.map)})):(e.leafLetReferenceNumber.forEach((function(t,a){t.TicketNumber==(e.latLng.TicketNumber||e.latLng.ticket_number)&&l.a.popup().setLatLng([e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]]).setContent(t.Address).openOn(e.map)})),e.map.flyTo([e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]],16,{animate:!0,duration:2}))},ShowLocationOnGoogleMap:function(){if("Google"==this.mapType){var e,t=this,a=null;const s=[];var o,i=null,n=new google.maps.InfoWindow;t.map=null,t.showLoader=!0,t.map=new google.maps.Map(document.getElementById(t.mapContainer),{zoom:7,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(30.7333,76.7794),mapTypeId:google.maps.MapTypeId.ROADMAP}),void 0!=t.config&&1==t.config.isShowDrawButton&&(t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"]},polylineOptions:{editable:!0}}),t.drawingManager.setMap(t.map),google.maps.event.addListener(t.drawingManager,"overlaycomplete",(function(e,a,o){var i=e.overlay;t.currentSelectedShape=i,t.GetGoogleAddressToDraw(e)}))),(this.mapType="Google")&&$.each(t.Data,(function(r,l){null!=l.pinLatLong.latitude&&(a=l.pinLatLong.latitude.split(",")[0],i=l.pinLatLong.latitude.split(",")[1]),o="Critical"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png":"High"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png":"Medium"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png":"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png";let p='<div id="content"><div class="map-pop-header '+l.priority+'" style="background-color:'+l.color_code+'"><div id="siteNotice"></div>'+l.popupHeaderHtml+'</div><div id="bodyContent">'+l.popupBodyHtml+'<p class="view-details">'+l.popupFooterHtml+"</p></div></div>";e=new google.maps.Marker({position:new google.maps.LatLng(a,i),icon:o,title:l.refValue,map:t.map,address:p}),s.push(e),t.markers.push(e);let c=[];if(void 0!=t.Data[r]&&t.Data[r].polygons.forEach((function(e){e.latLong.forEach((function(e){c.push(new google.maps.LatLng(e.longitude,e.latitude))})),t.myPolygon=new google.maps.Polygon({paths:c,draggable:!1,editable:1==t.config.isEditable,strokeColor:"undefined"!=typeof e.strokeColor?e.strokeColor:"#FF0000",strokeOpacity:"undefined"!=typeof e.strokeOpacity?e.strokeOpacity:"#FF0000",strokeWeight:"undefined"!=typeof e.strokeWeight?e.strokeWeight:"#FF0000",fillColor:"undefined"!=typeof e.fillColor?e.fillColor:"#FF0000",fillOpacity:"undefined"!=typeof e.opacity?e.opacity:.35,Id:t.Data[r].refValue}),t.myPolygon.setMap(t.map),google.maps.event.addListener(t.myPolygon,"click",(function(e,a){t.currentSelectedShape=this,t.currentSelectedShape.setOptions({editable:!0,ShapeId:t.polygonNewShapeId}),t.showDeleteFeature=!0}))})),"zoneMapDiv"==t.mapContainer||"mapExtend"==t.mapContainer){for(var d=new google.maps.LatLngBounds,m=c,g=0,u=m.length;g<u;g++)d.extend(m[g]);t.map.fitBounds(d)}google.maps.event.addListener(t.myPolygon.getPath(),"set_at",(function(e,a){let o={FullAddress:""};if(t.lngLatData=[],"zoneMapDiv"==t.mapContainer){t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.myPolygon.setOptions({ShapeId:t.polygonNewShapeId}),t.showAddZone=!0,r=t.myPolygon.getPath().getArray(),r.forEach((function(e,a){t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})})),o={FullAddress:""};var i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(e,t){o.FullAddress=e[0].formatted_address})),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:o,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:o})}else{var r;t.lngLatData=[],r=t.myPolygon.getPath().getArray(),r.forEach((function(e,a){t.lngLatData.push({Lat:e.lat(),Lng:e.lng()})})),o={FullAddress:""};i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(e,t){o.FullAddress=e[0].formatted_address})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:o})}})),google.maps.event.addListener(e,"click",function(e,a){return function(){n.setContent(p),n.open(t.map,e)}}(e));var f=new google.maps.LatLng(t.Data[0].latlong.split(",")[0],t.Data[0].latlong.split(",")[1]);t.map.panTo(f),t.map.setZoom(4)}));var r={gridSize:40,maxZoom:15,styles:[{width:30,height:30,url:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m1.png",textColor:"white",textSize:12}]};t.markerCluster=new MarkerClusterer(t.map,s,r)}},LoadLocatorDataonMap:function(){var e=this,t=null,a=null;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,a=e.coords.longitude})):console.log("Geolocation is not supported by this browser."),e.showSetting=!0,"Google"==e.mapType?setTimeout(()=>{e.LoadGoogleHeatMap(t,a)},2e3):"MapBox"==e.mapType?setTimeout(()=>{e.LoadMapboxHeatMap(t,a)},4e3):setTimeout(()=>{e.ShowEtaMap(t,a)},4e3)},initMapBox:function(e,t,a,o){var i=this,n="";let s=3;if(e){var l=$.grep(e,(function(e,t){return""!=e.location_nw&&null!=e.location_nw&&void 0!=typeof e.location_nw&&","!=e.location_nw}));l=l[0],l&&(n=[parseFloat(String(l.location_nw).split(",")[1],10),parseFloat(String(l.location_nw).split(",")[0],10)])}if(i.startingPoint=n,r.a.accessToken=t,i.map=new r.a.Map({container:i.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:s,zoomControl:!0,scrollZoom:!0,boxZoom:!0}),void 0!=i.config&&1==i.config.isShowSearchBox){var p=new m.a({accessToken:t,mapboxgl:r.a,marker:!1,placeholder:"Search for places in Barbados"});i.map.addControl(p)}if(void 0!=i.config&&1==i.config.isShowDrawButton){var d=new c.a({displayControlsDefault:!1,controls:{line_string:!1,polygon:!0,point:!0,trash:!0}});i.map.addControl(d),i.map.on("draw.create",i.GetMapBoxAddressToDraw);var g=new r.a.NavigationControl;i.map.addControl(g,"top-left")}g=new r.a.NavigationControl;if(i.map.addControl(g,"bottom-right"),null!=e&&e.length>0){if($.each(e,(function(t,a){t++,i.map.flyTo({center:[i.Data[0].latlong.split(",")[1],i.Data[0].latlong.split(",")[0]],zoom:4,essential:!0});if("[]"!=a.attachmentCountWithExt&&""!=a.attachmentCountWithExt&&null!=a.attachmentCountWithExt){var o=JSON.parse(a.attachmentCountWithExt);$.each(o,(function(e,t){"Video"==t.TYPE?t.COUNT:"Image"==t.TYPE?t.COUNT:parseInt(t.COUNT)}))}if(void 0!=a.polygons[t]){a.polygons[t].latLong[t].latitude.split(",")[1],a.polygons[t].latLong[t].latitude.split(",")[0];i.map.addSource("maine",{type:"geojson",data:v}),i.map.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#FF0000","fill-opacity":.35}})}let n='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+a.priority+'" style="background-color:'+a.color_code+'"><div id="siteNotice"></div>'+a.popupHeaderHtml+'</div><div id="bodyContent">'+a.popupBodyHtml+'<p class="view-details">'+a.popupFooterHtml+"</p></div></div></div></div></div>";y(t,a.pinLatLong.latitude,e,a.priority,n,a.is_high_profile,a)})),null!=e.mapdetail&&e.mapdetail.length>0)if("MapBox"==e.mapdetail[0].MAP_TYPE){if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var u=JSON.parse(e.mapdetail[0].LAT_LNG),f=u.reduce((function(e,t){return e.extend(t)}),new r.a.LngLatBounds(u[0],u[0]));map.fitBounds(f)}}else if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var h=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(t,a){var o=[];"LeafLet"==e.mapdetail[0].MAP_TYPE||"Esri"==e.mapdetail[0].MAP_TYPE?o.push(a[1],a[0]):o.push(a.lng,a.lat),h.push(o)}));u=h,f=u.reduce((function(e,t){return e.extend(t)}),new r.a.LngLatBounds(u[0],u[0]));map.fitBounds(f)}var v;function y(e,t,a,o,n,s,l){if(""!=t&&null!=t&&"undefined"!=typeof t&&","!=typeof t){var p=parseFloat(String(t.split(",")[0]),10),c=parseFloat(String(t.split(",")[1]),10),d="https://app.talygen.com",m=l.color_code;if(""!=m&&null!=m&&"undefined"!=typeof m&&" "!=typeof m||(m="#4db567"),d+="https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",1==e||"undefined"==typeof v)v={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+d,color:m,address:n,ticketNumber:l.refValue},geometry:{type:"Point",coordinates:[]}}]},v.features[0].geometry.coordinates.push(c),v.features[0].geometry.coordinates.push(p),i.markers.push(v);else{var g={type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+d,color:m,address:n,ticketNumber:l.refValue},geometry:{type:"Point",coordinates:[]}};g.geometry.coordinates.push(c),g.geometry.coordinates.push(p),v.features.push(g),i.markers.push(g)}}e==a.length&&(i.map.loadImage("https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",(e,t)=>{if(e)throw e;i.map.addImage("ticket-icon",t,{sdf:!0})}),i.map.on("load",(function(){i.map.addSource("ticketsourcedata",{type:"geojson",data:v,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),i.map.addLayer({id:"clusters",type:"circle",source:"ticketsourcedata",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),i.map.addLayer({id:"cluster-count",type:"symbol",source:"ticketsourcedata",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),i.map.addLayer({id:"unclustered_point",type:"circle",source:"ticketsourcedata",filter:["!",["has","point_count"]],paint:{"circle-color":["get","color"],"circle-radius":20,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),i.map.on("click","clusters",(function(e){var t=i.map.queryRenderedFeatures(e.point,{layers:["clusters"]}),a=t[0].properties.cluster_id;i.map.getSource("ticketsourcedata").getClusterExpansionZoom(a,(function(e,a){e||i.map.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),i.map.on("click","unclustered_point",(function(e){if(""!=a[0].popupBodyHtml&&1!=e.features[0].properties.cluster){var t=e.features[0].geometry.coordinates.slice(),o=e.features[0].properties.address;new r.a.Popup({closeOnClick:!0}).setLngLat(t).setHTML(o).addTo(i.map)}})),i.map.on("mouseenter","clusters",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","clusters",(function(){i.map.getCanvas().style.cursor=""})),i.map.on("mouseenter","unclustered_point",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","unclustered_point",(function(){i.map.getCanvas().style.cursor=""})),i.map&&i.map.on("wheel",e=>{e.originalEvent.ctrlKey?(e.originalEvent.preventDefault(),i.map.scrollZoom._enabled||i.map.scrollZoom.enable()):i.map.scrollZoom._enabled&&i.map.scrollZoom.disable()})})))}$(".mapboxgl-ctrl-compass").hide()}},initLeafletMap:function(e,t,a){var o,i=this;if(void 0!=e){if(i.map){i.map.off();try{i.map.remove()}catch{}}let t="",a="";if(null!=e&&e.length>0){var n=$.grep(e,(function(e,t){return""!=e.location_nw&&null!=e.location_nw&&"undefined"!=typeof e.location_nw&&","!=e.location_nw}));if(null!=n&&n.length>0){var r=n[0].location_nw;a=r.split(",")[1],t=r.split(",")[0]}}var s=l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy '+(new Date).getFullYear()+" LINZ"}),p=(l.a.tileLayer("https://{s}.tiles.mapbox.com/v3/spatial.b625e395/{z}/{x}/{y}.png",{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}),l.a.latLng(t,a));i.startingPoint=[t,a];var c=10;if(""==t&&""==a&&(c=2),i.map=l.a.map(i.mapContainer,{zoom:c,center:p,layers:[s],zoomControl:!1}),l.a.control.zoom({position:"topright"}).addTo(i.map),void 0!=i.config&&1==i.config.isShowDrawButton&&i.GetLeafLetAddressToDraw(),void 0!=i.config&&1==i.config.isShowSearchBox){const e=new g["b"],t=new g["a"]({provider:e});i.map.addControl(t)}i.markers=l.a.markerClusterGroup({iconCreateFunction:function(e){return l.a.divIcon({html:'<div class="circle-leaflet">'+e.getChildCount()+"</div>"})}});var d=l.a.Icon.extend({options:{shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}});1==i.Data.length&&i.map.flyTo([i.Data[0].latlong.split(",")[0],i.Data[0].latlong.split(",")[1]],16,{animate:!0,duration:2});new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png"}),new d({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png"}),new d({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_fill.png"});function m(e){var n="",r="";if($.each(e,(function(e,s){if(""!=s.pinLatLong.latitude&&null!=s.pinLatLong.latitude&&void 0!=typeof s.pinLatLong.latitude||s.polygons.length>0){n=s.pinLatLong.latitude;let f=[];r=s.priority;if("[]"!=s.attachmentCountWithExt&&""!=s.attachmentCountWithExt&&null!=s.attachmentCountWithExt){var p=JSON.parse(s.attachmentCountWithExt);$.each(p,(function(e,t){"Video"==t.TYPE?t.COUNT:"Image"==t.TYPE?t.COUNT:parseInt(t.COUNT)}))}if(i.Data[e].polygons.forEach((function(e){e.latLong.forEach((function(e){f.push([e.latitude,e.longitude])}))})),void 0!=s.polygons[e]){if(i.Data[0].polygons[0].latLong.length>1){var c=l.a.polygon(f,{fill:!0}).addTo(i.editableLayers);i.map.fitBounds(c.getBounds())}}let h='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+s.priority+'" style="background-color:'+s.color_code+'"><div id="siteNotice"></div>'+s.popupHeaderHtml+'</div><div id="bodyContent">'+s.popupBodyHtml+'<p class="view-details">'+s.popupFooterHtml+"</p></div></div></div></div></div>";a=n.split(",")[1],t=n.split(",")[0],a=parseFloat(a,10),t=parseFloat(t,10);var d=s.ticket_number,m=".leafleticoncustom_"+r+"{background-color:"+s.color_code+" }",g=document.createElement("style");g.innerHTML=m,document.head.appendChild(g);var u=l.a.icon({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_leaffill.png",iconSize:[30,30],color:s.color_code,"icon-color":s.color_code,"background-color":s.color_code,className:"leafleticoncustom_"+r});o=l.a.marker(l.a.latLng(t,a),{icon:u}),o.bindPopup(h),i.markers.addLayer(o),i.leafLetReferenceNumber.push({TicketNumber:s.refValue,Address:h}),i.mapMarker.push(i.markers),o.on("click",(function(e){var t=$("a.ticketnumber[data-ticketnumber='"+d+"']");if(t.length>0&&"true"==localStorage.getItem("isMapView")){var a=t.closest(".lists");a.addClass("alert-info"),setTimeout((function(){a.removeClass("alert-info")}),5e3)}t=$("a.ticketnumberlist[data-ticketnumber='"+d+"']"),t.length>0&&"false"==localStorage.getItem("isMapView")&&(t=t.closest("tr"),t.addClass("alert-info"),setTimeout((function(){t.removeClass("alert-info")}),5e3))}))}})),null!=e.mapdetail&&e.mapdetail.length>0)if("MapBox"==e.mapdetail[0].MAP_TYPE){if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var s=JSON.parse(e.mapdetail[0].LAT_LNG),p=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t[1],t[0]),p.push(a)})),map.fitBounds(p)}}else if("Google"==e.mapdetail[0].MAP_TYPE&&""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var c=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t.lat,t.lng),c.push(a)}));s=c;var d=[];d.push(s),map.fitBounds(s)}i.map.addLayer(i.markers)}null!=e&&e.length>0&&m(e)}else i.map=l.a.map(i.mapContainer,{layers:[l.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'})],center:[0,0],zoom:5})},ShowEtaMap:function(e,t){var a=this,o=null,i=null,n="driving-car",r=600;if(a.showHideEtaMap)return $.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!1,!1;function s(){navigator.geolocation?navigator.geolocation.getCurrentPosition(c,p,{timeout:1e4}):alert("Geolocation is not supported by this browser")}function p(e){e.code;var t=e.message;alert(t)}s();function c(e){e=$.post("geocoordinates.php",{lat:e.coords.latitude,lng:e.coords.longitude})}function d(e,t){if(a.map){$.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!0;var o=new l.a.latLng(e,t);a.map.panTo(o),a.map.setZoom(11)}var i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var n=l.a.icon({iconUrl:i,iconSize:[40,40]}),r=l.a.popup().setContent("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"),s=l.a.marker([e,t],{icon:n},{layers:""}).bindPopup(r).openPopup().addTo(a.map);a.imageMarker.push(s),m(!0)}function m(e){var t=[];$("input[name=duration]:checked").each((function(){t.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+n,data:JSON.stringify({location_type:"start",range_type:"time",range:t,interval:r,locations:[[o,i],[o,i]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){l.a.geoJson(e,{onEachFeature:function(e,t){t.bindPopup("Isochrone: "+e.properties.value),a.mapLayer.push(t)},style:function(e){var t=e.properties.value;return a.SetColor(t),{fillColor:a.colors,color:a.colors,weight:1,fillOpacity:.35}}}).addTo(a.map)}})}o=parseFloat(t,10)+.02,i=parseFloat(e,10)+.004,d(i,o),document.getElementById("params").addEventListener("change",(function(e){if("profile"===e.target.name)n=e.target.value,d(i,o);else if("duration"===e.target.name){var t="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){t.length>0&&(t+=",");var e=$(this).val();t+=e}));var a=String(t).split(",");r=a[0],a[a.length-1]}else r="600","1800";d(i,o)}}))},SetColor:function(e){var t=this;if(e=parseInt(e,10),"MapBox"!=t.mapType?e/=60:t.time=10,"MapBox"==t.mapType)switch(e){case 10:t.colors="3CEA19";break;case 20:t.colors="EFF60B";break;case 30:t.colors="F6320B";break;default:t.colors="F6320B"}else switch(e){case 10:t.colors="green";break;case 20:t.colors="yellow";break;case 30:t.colors="red";break;default:t.colors="red"}},LoadGoogleHeatMap:function(e,t){var a=this,o="driving-car",i=600;if(a.showHideEtaMap)return a.map.data.forEach((function(e){a.map.data.remove(e)})),a.showHideEtaMap=!1,!1;function n(n,r){if(a.map){$.each(a.map,(function(e,t){try{a.map.removeLayer(t)}catch(o){}})),a.showHideEtaMap=!0;var s=new l.a.latLng(n,r);a.map.panTo(s),a.map.setZoom(11)}var p={lat:e,lng:t},c=(s=new google.maps.LatLng(e,t),localStorage.getItem("UserImage"));String(c).indexOf("blob")<=0&&(c="https://app.talygen.com/Content/images/Black/user.png");var d={url:c,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},m=new google.maps.Marker({position:p,icon:d,map:a.map}),g=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+c+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"});m.addListener("click",(function(){g.open(a.map,this)})),a.imageMarker.push(m);var u=[];$("input[name=duration]:checked").each((function(){u.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+o,data:JSON.stringify({location_type:"start",range_type:"time",range:u,interval:i,locations:[[r,n],[r,n]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){a.map.data.addGeoJson(e)}}),a.map.data.setStyle((function(e){var t=e.getProperty("value");return a.SetColor(t),{fillColor:a.colors,opacity:.35,strokeWeight:1}}))}n(e,t),document.getElementById("params").addEventListener("change",(function(a){if("profile"===a.target.name)o=a.target.value,n(e,t);else if("duration"===a.target.name){var r="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){r.length>0&&(r+=",");var e=$(this).val();r+=e}));var s=String(r).split(",");i=s[0],s[s.length-1]}else i="600","1800";n(e,t)}}))},Close:function(){var e=this;e.showAddZone=!1,e.showSaveZonePopUp=!1},GetZoneManagementData:function(e){var t=this;t.currentSelectedShape.setOptions({strokeOpacity:e.strokeOpacity,strokeColor:e.strokeColor,fillOpacity:.35,strokeWeight:e.strokeWeight,fillColor:e.fillColor}),t.polygonData.forEach((function(a,o){a.Id==e.Id&&(t.polygonData[o].strokeOpacity=e.strokeOpacity,t.polygonData[o].strokeWeight=e.strokeWeight,t.polygonData[o].fillColor=e.fillColor,t.polygonData[o].locatorids=e.locatorids,t.polygonData[o].strokeColor=e.strokeColor,t.showAddZone=!1,t.showSaveZone=!0)}))},OpenSaveZone:function(){var e=this;e.showSaveZonePopUp=!0},SaveZoneData:function(e){var t=this;let a={ZoneId:0==t.zoneId?e.ZoneId:t.zoneId,ResolverUserId:null,JsonData:{type:"FeatureCollection",features:[]},ZoneName:e.Name,description:e.Description,ZoneType:e.ZoneType,YardEmails:null};t.polygonData.forEach((function(e,t){a.JsonData.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{stroke:e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-width":e.strokeWeight,fillColor:e.fillColor,"fill-opacity":e.fillOpacity,locatorname:null,locatorids:e.locatorids,userids:null}}),e.latLong.forEach((function(e,o){void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([e.longitude,e.latitude])})),void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([a.JsonData.features[t].geometry.coordinates[0][0][0],a.JsonData.features[t].geometry.coordinates[0][0][1]])})),t.zoneData.push(a);var o=JSON.stringify(t.zoneData);u["a"].UploadGeoJSON(o).then((function(e){0==t.zoneId?t.ShowAlert("Zone Succesfully Added.","success"):t.ShowAlert("Zone Succesfully Updated.","success"),t.showSaveZonePopUp=!1,t.currentSelectedShape=null,t.$emit("FetchData")}))},GetLeafLetAddressToDraw:function(){var e=this;let t={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};l.a.featureGroup().addTo(e.map);e.editableLayers=(new l.a.FeatureGroup).addTo(e.map);new l.a.Control.Draw({edit:{featureGroup:e.editableLayers,poly:{allowIntersection:!0}},draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#bada55"}},polyline:!1,circle:!1,marker:!1,circlemarker:!1}}).addTo(e.map);e.map.addLayer(e.editableLayers),e.map.on("draw:editvertex",(function(a){var o=a.poly;o.getLatLngs(),o.getLatLngs()[0].forEach((function(a,o){e.lngLatData.push({Lat:a.lat,Lng:a.lng});var i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),n=new google.maps.Geocoder;n.geocode({latLng:i},(function(e,a){t.FullAddress=e[0].formatted_address})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t})}))})),e.map.on("draw:created",(function(a){var o=a.layerType,i=a.layer;if("polygon"===o){i.on("mouseover",(function(){console.log(i.getLatLngs())})),e.editableLayers.addLayer(i),i.getLatLngs()[0].forEach((function(t,a){e.lngLatData.push({Lat:t.lat,Lng:t.lng})}));var n=new google.maps.LatLng(i.getLatLngs()[0][0].lat,i.getLatLngs()[0][0].lng),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(a,o){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}else{e.lngLatData.push({Lat:a.layer._latlng.lat,Lng:a.layer._latlng.lng});n=new google.maps.LatLng(a.layer._latlng.lat,a.layer._latlng.lng),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(a,o){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}}))},GetGoogleAddressToDraw:function(e){var t=this,a=e.overlay;t.currentSelectedShape=a;let o={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};if("polygon"==e.type){var i=e.overlay;i.type=e.type,t.lngLatData=[],"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.showAddZone=!0);e.overlay.bounds;e.overlay.latLngs.g[0].g.forEach((function(e,a){t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})})),i["ShapeId"]=t.polygonNewShapeId,google.maps.event.addListener(i,"click",(function(e,a,o){"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=this.ShapeId,t.showAddZone=!0,t.currentSelectedShape=this)}));var n=new google.maps.LatLng(t.lngLatData[0].latitude,t.lngLatData[0].longitude),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(e,a){o.FullAddress=e[0].formatted_address,a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(o.Country.Name=e.short_name,o.Country.LongName=e.long_name):"postal_code"==e.types[0]?o.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(o.AdministrativeAreaLevel1.LongName=e.long_name,o.AdministrativeAreaLevel1.Name=e.short_name,o.State.LongName=e.long_name,o.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(o.AdministrativeAreaLevel2.LongName=e.long_name,o.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),o.AdministrativeAreaLevel3.LongName=e.long_name,o.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),o.City.LongName=e.long_name,o.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:o}),t.$emit("GetAddress",t.fullAddress),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:o,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}))}))}else if("marker"==e.type){t.lngLatData.push({name:"",latLong:[{latitude:e.overlay.getPosition().lat(),longitude:e.overlay.getPosition().lng()}]});n=new google.maps.LatLng(e.overlay.getPosition().lat(),e.overlay.getPosition().lng()),r=new google.maps.Geocoder;r.geocode({latLng:n},(function(e,a){a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(o.Country.Name=e.short_name,o.Country.LongName=e.long_name):"postal_code"==e.types[0]?o.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(o.AdministrativeAreaLevel1.LongName=e.long_name,o.AdministrativeAreaLevel1.Name=e.short_name,o.State.LongName=e.long_name,o.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(o.AdministrativeAreaLevel2.LongName=e.long_name,o.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),o.AdministrativeAreaLevel3.LongName=e.long_name,o.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),o.City.LongName=e.long_name,o.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:o}),t.$emit("GetAddress",t.fullAddress))}))}},LoadMapboxHeatMap:function(e,t){var a=this;if("undefined"!=typeof a.map.getLayer("isoLayer")&&a.map.removeLayer("isoLayer"),"undefined"!=typeof a.map.getSource("iso"))return a.map.removeSource("iso"),!1;var o=document.getElementById("params"),i="https://api.mapbox.com/isochrone/v1/mapbox/",n=null,s=null,l=(i="https://api.mapbox.com/isochrone/v1/mapbox/",parseFloat(s,10),parseFloat(n,10),"driving"),p="10,20,30";function d(){var o=i+l+"/"+t+","+e+"?contours_minutes="+p+"&contours_colors="+a.colors+"&polygons=true&access_token="+r.a.accessToken;$.ajax({method:"GET",url:o}).done((function(e){a.map.getSource("iso").setData(e)}))}a.colors="3CEA19,EFF60B,F6320B",g(),a.map.flyTo({center:[t,e],zoom:10,essential:!0});var m=new c.a;function g(){a.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),a.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":["get","fillColor"],"fill-opacity":.5}},"poi-label");var o={lon:t,lat:e},i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var n=new r.a.Popup({offset:25}).setHTML("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"),s=document.createElement("div");s.className="marker",s.style.backgroundImage="url("+i+")",s.style.backgroundPosition="top center",s.style.backgroundSize="cover",s.style.width="40px",s.style.height="40px";var l=new r.a.Marker(s).setLngLat(o).setPopup(n).addTo(a.map);a.imageMarker.push(l),d()}a.map.addControl(m,"bottom-left"),o.addEventListener("change",(function(e){if("profile"===e.target.name)l=e.target.value,"foot-walking"==l?l="walking":"cycling-regular"==l?l="cycling":"driving-car"==l&&(l="driving"),d();else if("duration"===e.target.name){var t="",i="";$(o).find("input:checkbox:checked").length>0?($(o).find("input:checkbox:checked").each((function(){t.length>0&&(t+=","),i.length>0&&(i+=",");var e=$(this).val();t+=e,a.SetColor(e),i+=a.colors})),p=t,a.colors=i,d()):(p="10,20,30",a.colors="3CEA19,EFF60B,F6320B",d())}})),a.map.on("load",(function(){g()}))},TravelMode:function(e){var t=this;t.time=t.time-e,"LeafLet"==t.mapType?t.ShowEtaMap():"Google"==t.mapType?t.LoadGoogleHeatMap():"MapBox"==t.mapType&&t.LoadMapboxHeatMap()},ShowTravelMode:function(){var e=this;0==e.showSettingPopup?($(".settingPopup").removeClass("d-none"),e.showSetting=!1,e.showSettingPopup=!0):($(".settingPopup").addClass("d-none"),e.showSetting=!0,e.showSettingPopup=!1)},GetMapBoxAddressToDraw:function(e){var t=this;let a={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},PinCode:"",State:{Name:"",LongName:""},FullAddress:""};if("Polygon"==e.features[0].geometry.type){e.features[0].geometry.coordinates[0].forEach((function(e,a){t.lngLatData.push({Lat:e[1],Lng:e[0]})}));var o=new google.maps.LatLng(e.features[0].geometry.coordinates[0][0][1],e.features[0].geometry.coordinates[0][0][0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(e,o){a.FullAddress=e[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,o){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}else{t.lngLatData.push({Lat:e.features[0].geometry.coordinates[1],Lng:e.features[0].geometry.coordinates[0]});o=new google.maps.LatLng(e.features[0].geometry.coordinates[1],e.features[0].geometry.coordinates[0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(e,o){a.FullAddress=e[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,o){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}}}},L=y,b=(a("0c51"),a("2877")),w=Object(b["a"])(L,o,i,!1,null,null,null);t["a"]=w.exports},3975:function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Manage Polygon Details")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.$emit("Close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Stroke Width")]),e._v(":"+e._s(e.StrokeWidthValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalStrokeWidth)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.StrokeWidthValue,expression:"StrokeWidthValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"1",max:"10",step:"1",id:"txtstrokeWidth"},domProps:{value:e.StrokeWidthValue},on:{__r:function(t){e.StrokeWidthValue=t.target.value}}})])]),t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("StrokeOpacity")]),e._v(":"+e._s(e.StrokeOpacityValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalStrokeOpacity)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.StrokeOpacityValue,expression:"StrokeOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtStrokeOpacity"},domProps:{value:e.StrokeOpacityValue},on:{__r:function(t){e.StrokeOpacityValue=t.target.value}}})])]),t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("FillOpacity")]),e._v(":"+e._s(e.FillOpacityValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalFillOpacity)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.FillOpacityValue,expression:"FillOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtFillOpacity"},domProps:{value:e.FillOpacityValue},on:{__r:function(t){e.FillOpacityValue=t.target.value}}})])]),e._m(0),e._m(1)]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row mt-0"},[t("div",{staticClass:"col-md-6 col-sm-12 float-left mb-2"},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Locator,expression:"Locator"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by name"},domProps:{value:e.Locator},on:{input:function(t){t.target.composing||(e.Locator=t.target.value)}}})])]),t("div",{staticClass:"col-md-6 col-sm-12 float-left"},[t("div",{staticClass:"background-0 text-left form-check-inline search-btm-btn"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"},on:{click:e.GetUserSkillList}},[t("i",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear all "},on:{click:e.RefreshList}},[t("i",{staticClass:"fa fa-refresh"})])])])]),t("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"",IdentityColumn:"user_id",HeaderText:e.$t("Zone Management"),LegendArray:[],RenderRowActionMethod:e.renderActions,widgets:[],listType:["List"],ListData:e.LocatorData,HeaderData:e.Headers,HeaderButtons:"",TotalRecords:e.TotalRecords,ListDataCallBackFunction:e.FetchData,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata}}),t("div",{staticClass:"row flex-row-reverse pt-3"},[t("div",{staticClass:"col-lg-12 text-right"},[t("a",{staticClass:"btn btn-success formbtn",attrs:{title:"",name:"btnSave",tabindex:"6"},on:{click:e.SaveStyleShape}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save Polygon")]),e._v("  "),t("a",{staticClass:"btn btn-danger formbtn",attrs:{title:"",name:"btnDelete",tabindex:"6"},on:{click:e.DeleteFeature}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v("Delete Polygon")])])])],1)])])])],1)])},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Stroke Color")]),e._v(": "),t("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtstrokeColor",value:"#555555",title:"Stroke Color"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Fill")]),e._v(": "),t("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtFillColor",value:"#555555",title:"Fill Color"}})])])}],n=a("9769"),r={created:function(){var e=this;e.GetUserSkillList(),e.polygonData.forEach((function(t,a){t.Id==e.polygonNewShapeId&&(e.FillOpacityValue=e.polygonData[a].strokeOpacity,e.StrokeOpacityValue=e.polygonData[a].strokeOpacity,e.totalStrokeWidth=e.polygonData[a].strokeWeight)}))},props:{polygonNewShapeId:{type:String},polygonData:{type:String}},data(){return{Locator:"",Headers:[{COLUMN_NAME:"first_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"resourceTypeName",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ResourceType",DISPLAY_ORDER:2},{COLUMN_NAME:"skills",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Skill",DISPLAY_ORDER:3},{COLUMN_NAME:"department",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Department",DISPLAY_ORDER:3}],LocatorData:[],tempLocatorData:[],StrokeWidthValue:"2",StrokeOpacityValue:"0.0",FillOpacityValue:"0.5"}},methods:{GetUserSkillList:function(){var e=this,t="search="+e.Locator;n["a"].GetUserSkillList(t).then(t=>{e.LocatorData=t.data.result.data,setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)})},actionButtonClick(e,t,a,o){},renderActions:function(e){},leftCommonSearch:function(e){},commonHeaderButtonClick:function(e){},sortdata:function(e){},RefreshList:function(){var e=this;e.Locator="",e.GetUserSkillList()},DeleteFeature:function(){var e=this;e.$emit("DeleteFeature")},SaveStyleShape:function(){var e=this,t="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()}));let a={Id:e.polygonNewShapeId,strokeOpacity:e.StrokeOpacityValue,strokeWeight:e.StrokeWidthValue,strokeColor:document.getElementById("txtstrokeColor").value,fillOpacity:document.getElementById("txtFillOpacity").value,fillColor:document.getElementById("txtFillColor").value,locatorids:t};e.$emit("GetZoneManagementData",a)}}},s=r,l=(a("f6a3"),a("2877")),p=Object(l["a"])(s,o,i,!1,null,null,null);t["a"]=p.exports},5126:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.gm-style .gm-style-iw{padding:10px!important}.gm-style .gm-style-iw button{display:none!important}.cssSlider{-webkit-appearance:none;width:23%;height:17px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s;position:relative!important}.cssSlider:hover{opacity:1}.cssSlider::-webkit-slider-thumb{-webkit-appearance:none;width:25px;height:25px;background:#04aa6d;cursor:pointer}",""]),e.exports=t},"6c64":function(e,t,a){var o=a("e3be");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("82135b98",o,!0,{sourceMap:!1,shadowMode:!1})},e222:function(e,t,a){"use strict";var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v("Add Zone")]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.$emit("Close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])])])},i=[],n=(a("9769"),{props:{zoneEditData:{required:!1}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Zone Name",name:"txtZoneName",value:"",placeholder:"Enter Name",validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"RadioField",label:"ZoneType",name:"TypeFor",value:"Locator",placeholder:"",config:{options:[{name:"Locator Area",value:"Locator"},{name:"High Profile",value:"High_Profile"},{name:"Locator After Hours",value:"LocatorAfterHours"},{name:"Yard",value:"Yard"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!0,max:500}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.Save},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],ListData:[]}},created:function(){var e=this;e.FormSchema[0].Data[0].value=e.zoneEditData.ZONE_NAME,e.FormSchema[1].Data[0].value=e.zoneEditData.ZONE_TYPE,e.FormSchema[2].Data[0].value=e.zoneEditData.ZONE_DESCRIPTION},methods:{Close:function(){var e=this;e.$emit("Close")},Save:function(){var e=this;let t={ZoneId:void 0==e.zoneEditData?0:e.zoneEditData.ZONE_ID,Name:e.FormSchema[0].Data[0].value,ZoneType:e.FormSchema[1].Data[0].value,Description:e.FormSchema[2].Data[0].value};e.$emit("SaveZoneData",t)}}}),r=n,s=a("2877"),l=Object(s["a"])(r,o,i,!1,null,null,null);t["a"]=l.exports},e3be:function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,'.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:23px;top:3px}.mapboxgl-popup{width:340px;max-width:340px!important}.leaflet-popup-content .popupcontent{background:#fff}.leaflet-left .leaflet-control-zoom{display:none}.leaflet-marker-icon{border-radius:100%!important}.leaflet-popup-content p{margin:auto!important}.leaflet-popup-content-wrapper{padding:0!important}.leaflet-popup-content{margin:auto!important;line-height:1.4!important;width:340px!important}.leaflet-container a.leaflet-popup-close-button{color:#5c5c5c!important;padding:6px 5px 0 0!important}.gm-style-iw.gm-style-iw-c{background-color:#fff!important;padding-right:0!important;padding-bottom:0!important;max-width:648px!important;min-height:150px!important;padding:0!important;width:340px!important;border-radius:0}.gm-style-iw.gm-style-iw-c button.gm-ui-hover-effect{background:0 0!important;display:block!important;font-size:18px!important;border:0!important;margin:0!important;padding:0!important;position:absolute!important;cursor:pointer!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;top:-6px!important;right:-6px!important;width:36px!important;height:40px!important}.gm-style-iw.gm-style-iw-c .gm-style-iw-d{overflow:hidden!important;width:100%!important}.gm-style-iw.gm-style-iw-c #content{padding:0!important;transition:all .3s;width:100%}.gm-style-iw.gm-style-iw-c .map-pop-header{color:#fff}.gm-style-iw.gm-style-iw-c .map-pop-header.Medium{background:#4cb4fb}.gm-style-iw.gm-style-iw-c .map-pop-header.Low{background:#4db567}.gm-style-iw.gm-style-iw-c .map-pop-header.High{background:#fbc648}.gm-style-iw.gm-style-iw-c .map-pop-header.Critical{background:#ef8934}.gm-style-iw.gm-style-iw-c .map-pop-header.highprofile{background:#de0303}.gm-style-iw.gm-style-iw-c .firstHeading{font-size:16px;display:flex;align-items:center;padding:5px 10px}.gm-style-iw.gm-style-iw-c .status{font-size:12px;background:#5c5c5c;font-weight:400;color:#fff;padding:4px 6px;margin-left:5px}.gm-style-iw.gm-style-iw-c p.details{display:flex;width:100%;font-weight:bolder;font-size:14px;padding:5px 10px;margin-bottom:4px}.gm-style-iw.gm-style-iw-c p.details span{font-size:12px;font-weight:400;text-transform:capitalize}.gm-style-iw.gm-style-iw-c .view-details{display:flex;width:100%;font-weight:bolder;font-size:14px;margin-bottom:0;border-top:2px solid #bfbfbf;flex-direction:row}.gm-style-iw.gm-style-iw-c .view-details a{padding:0 5px;margin-right:5px;color:#525e65}.mapboxgl-popup-content{padding:0!important}.mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.mail-box-pop .modal-dialog{max-width:570px!important;min-height:500px!important}.mail-box-pop.eta .modal-dialog{max-width:1200px!important;min-height:500px!important}.mail-box-pop.eta .modal-body{max-height:800px!important;height:800px!important}.motabod{border-right:10px solid #e5e5e5}.movedivider{background-repeat:no-repeat;background-position:0 0;width:37px;height:57px;position:absolute;z-index:999;right:-24px;top:160px;display:none}tr.bg-danger{background-color:#f7ccd0!important}.ui-resizable-handle{z-index:9999}.custom-tab-content ul.responsive-tabs.fsmtabcontrol li a{padding:10px}.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input-remove:after,.tags-input-remove:before{background:#fff!important}div[aria-describedby=divticketquickview] .modal-dialog{max-width:85%!important}ul.tags_fsm{float:left;margin:0;padding:0}ul.tags_fsm li{float:left;margin:0 5px 5px 0;padding:0 8px;display:inline-block;color:#fff;border-radius:5px!important;font-size:12px}.tags-input span{margin-bottom:.3em}.circle-leaflet{width:55px!important;height:55px!important;line-height:55px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m2.png)!important;text-align:center!important;font-weight:700!important;position:absolute!important;top:-22px!important;left:-19px!important}.table-heading-wb .table-head-btn{padding:.5rem}.gmnoprint{right:0!important;left:auto!important}.bg-gray-faint{position:relative;background-color:#fff!important;font-family:Open Sans,sans-serif;padding:8px 16px!important;margin-top:55px!important;border:1px solid #2196f3;margin-left:12px!important}.bg-gray-faint:after{color:#2196f3;content:"\\f0d8";position:absolute;font:normal normal normal 14px/1 FontAwesome;top:-19px;left:10%;font-size:27px}.checkbox-container>input,.radio-container>input,.switch-container>input,.toggle-container>input{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.txt-m{font-size:15px;line-height:24px;margin-top:0;margin-bottom:0}.toggle-group{display:inline-flex;text-align:center;border-radius:18px}.toggle-container{display:block;max-width:100%}input:checked+.toggle{background:#448ee4;color:#fff}.toggle{flex-shrink:0;cursor:pointer;color:#999;font-weight:700;font-size:12px;padding:6px 18px;border-radius:18px!important;background-color:transparent;transition:color .125s,background-color .125s}.switch{position:relative;display:inline-block;width:60px}.switch input{opacity:0;width:0;height:0}.sliderchk{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.sliderchk,.sliderchk:before{position:absolute;transition:.4s}.sliderchk:before{content:"";height:24px;width:24px;left:6px;bottom:4px;background-color:#fff}input:checked+.sliderchk{background-color:#2196f3}input:focus+.sliderchk{box-shadow:0 0 1px #2196f3}input:checked+.sliderchk:before{transform:translateX(26px)}.sliderchk.round{border-radius:34px!important}.sliderchk.round:before{border-radius:50%}.textname{top:29px;position:absolute;left:4px;font-size:13px;color:#999;font-weight:700}.timelegend{height:10px;padding:0 15px;display:inline-block}.timelegend.min10{background-color:#96d52d}.timelegend.min20{background-color:#f0c141}.timelegend.min30{background-color:#f18d76}.showduration{float:left;color:#565656!important;position:absolute;left:4px;top:0;cursor:pointer;font-size:18px;background-color:#fff;padding:7px 18px;margin:10px;margin-left:8px;font-family:Roboto,Arial,sans-serif;z-index:999}#divdataviewdata .card-box .custom-checkbox{padding-left:1rem!important}.tags-input-root .typeahead-badges{padding-top:.25rem!important}#divmapdata .map-result img{width:auto!important}.filterscrollForCardView{scrollbar-width:thin;scrollbar-color:#848484}.filterscrollForCardView::-webkit-scrollbar{width:8px;height:8px}.filterscrollForCardView::-webkit-scrollbar-track{background-clip:content-box;border:2px solid transparent}.filterscrollForCardView::-webkit-scrollbar-thumb{background-color:#848484}.filterscrollForCardView::-webkit-scrollbar-corner,.scrollbar-1::-webkit-scrollbar-track{background-color:#848484}.typeahead-badges>span{max-width:195px}[data-color_code]:after{background-color:attr(data-color_code)}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#f5f1ef!important}.pinscreenMap{background:#17a2b8;border-left:0!important}.pinscreenMap,.unpinscreenMap{padding:15px 0!important;width:50px;cursor:pointer}.unpinscreenMap{background:#525f65}.unpinscreenMap i{transform:rotate(-45deg)}.map-actions span.esri_prof:hover{transform:none!important}.map-actions span.esri_prof a{color:#212529}.mCustomScrollBox,.mCustomScrollBox .mCS-light{max-height:inherit!important}#scrollbarreplyuserguide{max-height:350px}a[href="/Ticketing/Index"]{background:none!important}.theme-primary.partition{overflow:visible}',""]),e.exports=t},f6a3:function(e,t,a){"use strict";a("23ca")}}]);
//# sourceMappingURL=chunk-2cfde138.js.map