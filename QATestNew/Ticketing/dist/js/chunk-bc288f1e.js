(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc288f1e"],{1890:function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ManageIncident")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddEditIncidentType"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},i=[],s=a("9769"),c={props:{IncidentTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){this.FetchData()},methods:{FetchData:function(){var e=this,t="Id="+e.IncidentTypeId;s["a"].FetchDataByIncidentId(t).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.FormSchema[0].Data[0].value=t.data.result.DATA[0].TYPE_NAME,e.FormSchema[0].Data[1].value=t.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$emit("close"),this.$parent.showReportIncidentModal=!1},onSubmit(e,t){var a=this,n={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:e.IncidentType,ParentIncidentId:"",ModuleName:"FSM",StatusId:1001,Description:e.DESCRIPTION},i=JSON.stringify(n);s["a"].SaveIncidentType(i).then(e=>{"Success"==e.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.FetchRecords()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},o=c,d=a("2877"),r=Object(d["a"])(o,n,i,!1,null,null,null);t["a"]=r.exports},"7b9c":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ManageSubIncident")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddEditSubIncidentType"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},i=[],s=a("9769"),c={props:{IncidentTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("ParentIncidentType"),name:"ParentIncidentType",value:"",placeholder:"",config:{options:[]},validationRules:{required:!0}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var e=this;e.GetDDLData("FSM_INCIDENT"),e.IncidentTypeId>0&&this.FetchData()},methods:{GetDDLData:async function(e){var t=`id=${this.IncidentTypeId}&moduleName=FSM&type=${e}`;s["a"].GetDDLData(t).then(e=>{this.FormSchema[0].Data[1].config.options=e.data.DATA})},FetchData:function(){var e=this,t="Id="+e.IncidentTypeId;s["a"].FetchDataByIncidentId(t).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.FormSchema[0].Data[0].value=t.data.result.DATA[0].TYPE_NAME,e.FormSchema[0].Data[1].value=t.data.result.DATA[0].PARENT_ID,e.FormSchema[0].Data[2].value=t.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$parent.showSubIncidentModal=!1},onSubmit(e,t){var a=this,n={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:e.IncidentType,ParentIncidentId:e.ParentIncidentType,ModuleName:"FSM",StatusId:1001,Description:e.DESCRIPTION},i=JSON.stringify(n);s["a"].SaveIncidentType(i).then(e=>{"Success"==e.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.FetchRecords()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},o=c,d=a("2877"),r=Object(d["a"])(o,n,i,!1,null,null,null);t["a"]=r.exports},"85d9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsIncidentView,expression:"IsIncidentView"}],attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"fsm_incident_type",RenderRowActionMethod:e.renderActions,IdentityColumn:"ID",HeaderText:e.$t("IncidentType"),listType:["List"],ListData:e.IncidentListing,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.FetchRecords,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata}}),e.showReportIncidentModal?t("showReportIncidentModal",{attrs:{IncidentTypeId:e.IncidentId}}):e._e(),e.showSubIncidentModal?t("SubIncidentModal",{attrs:{IncidentTypeId:e.IncidentId}}):e._e()],1)},i=[];a("14d9"),a("88a7"),a("271a"),a("5494");let s=[{title:"Add Incident Type",iconClass:"fa fa-plus",callbackfunction:"openaddIncidentType",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Add Sub Incident Type",iconClass:"fa fa-plus",callbackfunction:"openaddSubIncidentType",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"DeleteMultiple",isEnabledOnSelectedRow:!0}],c=[{fieldName:"Incident Type",fieldType:"text",fieldIcon:"fa-info-circle",fieldSearchConditionName:["TYPE_NAME"],paramName:"incidentType",isSearch:!1,value:"",listOptions:[]},{fieldName:"Sub IncidentType",fieldType:"text",fieldIcon:"fa-info-circle",fieldSearchConditionName:["TYPE_NAME"],paramName:"subincidentType",isSearch:!1,value:"",listOptions:[]},{fieldName:"DATE",fieldType:"date",fieldIcon:"fa-info-circle",paramName:"creationDate",fieldSearchConditionName:["CREATED_AT"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:!1,maxDate:!1,widgetPositioning:{horizontal:"right",vertical:"bottom"}}}],o=[{title:"Edit",href:"javascript:void(0)",callbackfunction:"openReportIncidentPopUp",icon:"fa fa-pencil",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"DeleteIncident",additionalSpan:""}];var d={buttons:s,leftsearchSchema:c,listActions:o},r=a("9769"),l=a("1890"),u=a("7b9c"),p={components:{showReportIncidentModal:l["a"],SubIncidentModal:u["a"]},data(){return{isLoading:!1,showReportSubIncidentModal:!1,showReportIncidentModal:!1,viewIncidentModal:!1,IncidentId:"",showExpanded:"",StatusMappingList:[],noRecords:!1,listheaderbuttons:d.buttons,leftSearchFields:d.leftsearchSchema,listActions:d.listActions,Headers:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Incident Type Type",DISPLAY_ORDER:1},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:2},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"DESCRIPTION",DISPLAY_ORDER:3}],SubHeaders:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sub Incident Type Type",DISPLAY_ORDER:1},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:2},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"DESCRIPTION",DISPLAY_ORDER:3}],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",CurrentPage:1,TotalPages:0,IncidentListing:[],SubIncidentListing:[],GroupStart:1,GroupEnd:3,ViewIncident:"",showSubIncidentModal:!1,user_type:null,user_id:null,TypesubtpeDescription:"",IncidentType:"",ParentIncidentTypeName:"",ParentSubIncidentTypeName:"",CreationDate:"",IsIncidentSearch:!1,IsSubIncidentSearch:!1,IsDateSearch:!1,IsSearchTrueOrFalse:!1,SubIncidentShowHide:!1,conditionForInstantSearch:"",SearchCondition:"",IsIncidentView:!0}},created:async function(){this.user_id=this.GetUserInfo.ID,this.user_type=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,await this.FetchRecords()},methods:{renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Edit":t.isVisible=!0;break;case"Delete":t.isVisible=!0;break;default:t.isVisible=!0}a.push(t)}),a},actionButtonClick(e,t,a,n,i){switch(e){case"DeleteIncident":this.DeleteIncidentRow(t.ID);break;case"openReportIncidentPopUp":this.openReportIncidentPopUp(t.ID,i);break}},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchRecords()},leftCommonSearch:function(e){this.searchCondition=e.searchCondition;const t=new URLSearchParams(e.searchConditionJson),a=t.entries(),n=this.paramsToObject(a);n.hasOwnProperty("incidentType")?this.ParentIncidentTypeName=n["incidentType"]:this.ParentIncidentTypeName="",n.hasOwnProperty("subincidentType")?this.ParentSubIncidentTypeName=n["subincidentType"]:this.ParentSubIncidentTypeName="",n.hasOwnProperty("creationDate")?this.CreationDate=n["creationDate"]:this.CreationDate="",this.PageNumber=e.PageNumber,this.isPaged=1,this.FetchRecords()},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"commonDeleteData":this.DeleteIncident();break;case"openaddIncidentType":this.openReportIncidentPopUp(null);break;case"openaddSubIncidentType":this.openSubIncidentPopUp();break}},isBlank:function(e){return!e||/^\s*$/.test(e)},formatDateTime:function(e){if(e)return moment(e).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(Globalize.culture().calendar.patterns.t).replace("t","A").replace("t",""))},sortdata:function(e){this.SortBy=e;var t="ASC";"ASC"==this.SortExp&&(t="DESC"),this.SortExp=t,this.SortBy=e,this.SortExp=t,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()},onEnter:function(e){var t=this;13==e.charCode&&(e.preventDefault(),t.SearchCondition=t.SearchCondition,t.CurrentPage=1,t.PageSize=10,t.PageNumber=1,t.FetchRecords())},Searchdata:function(){var e=this;e.SearchCondition=e.SearchCondition,e.FetchRecords()},refreshList:function(){this.SearchCondition="",this.ParentIncidentTypeName="",this.ParentSubIncidentTypeName="",this.CreationDate="",this.IsSearchTrueOrFalse=!1,this.FetchRecords()},DeleteIncident:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("IncidentType"),(function(){var e={ids:a,companyId:t.companyId,userId:t.user_id,moduleName:"FSM",refCode:"TALYGEN_FSM_INCIDENT_TYPE"},n=JSON.stringify(e);r["a"].deleteActivityData(n).then(e=>{200==e.status?(t.FetchRecords(),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("IncidentType")]),"Success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("DeletedError",[t.$t("IncidentType")]),"failure",!0,t.$t("Alert"))})})):t.ShowAlert(t.$t("Selectanyrecordtodelete",[t.$t("IncidentType")]),"failure",!0,t.$t("Alert"))},openReportIncidentPopUp:function(e,t){var a=this;void 0==e&&(e=0),t?this.openSubIncidentPopUp(e):(a.IncidentId=e,this.showReportIncidentModal=!this.showReportIncidentModal)},openSubIncidentPopUp:function(e){var t=this;void 0==e&&(e=0),t.IncidentId=e,t.showSubIncidentModal=!0},DeleteIncidentRow:function(e){var t=this,a=e;a>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("IncidentType"),(function(){var e={ids:a,companyId:t.companyId,userId:t.user_id,moduleName:"FSM",refCode:"TALYGEN_FSM_INCIDENT_TYPE"},n=JSON.stringify(e);r["a"].deleteActivityData(n).then(e=>{200==e.status?(t.FetchRecords(),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("IncidentType")]),"Success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("DeletedError",[t.$t("IncidentType")]),"failure",!0,t.$t("Alert"))})})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))},searchFunction:function(e){var t=this;t.IsIncidentSearch=!1,t.IsSubIncidentSearch=!1,t.IsSearchTrueOrFalse=!0,t.IsDateSearch=!1,""!=$.trim(t.ParentIncidentTypeName)&&(t.IsIncidentSearch=!0,t.IsSearchTrueOrFalse=!0,t.conditionForInstantSearch="",t.conditionForInstantSearch=t.ParentIncidentTypeName),""!=$.trim(t.ParentSubIncidentTypeName)&&(t.IsSubIncidentSearch=!0,t.IsSearchTrueOrFalse=!0,t.conditionForInstantSearch="",t.conditionForInstantSearch=t.ParentSubIncidentTypeName),""!=$.trim(t.CreationDate)&&(t.IsDateSearch=!0,t.IsSearchTrueOrFalse=!0,t.conditionForInstantSearch=""!=t.conditionForInstantSearch?" AND ":"",t.conditionForInstantSearch=t.CreationDate),t.CurrentPage=1,t.PageSize="",e&&(t.PageNumber=1,t.GroupStart=1,t.GroupEnd=3),t.FetchRecords()},onExpandChild:function(e){var t=this;t.isLoading=!0;var a=`ParentID=${e.ID}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pagesize=${t.PageSize}&pagenumber=${t.PageNumber}&incidentType=${t.ParentIncidentTypeName}&subincidentType=${t.ParentSubIncidentTypeName}&creationDate=${t.CreationDate}`;r["a"].GetFsmIncidentListing(a).then((function(a){""!=a.data&&null!=a.data&&"Success"==a.data.status&&a.data.result.DATA.length>0?(t.Headers=t.SubHeaders,e.child.data=a.data.result.DATA,$.each(e.child.data,(function(e,t){var a="",n=t.selectedForm;$.each(n,(function(e,t){a+=""==a?t.name:", "+t.name})),t.selectedForm=a})),t.TotalRecords=a.data.result.DATA[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.listheaderbuttons[2].isdisabled=!0,t.noRecord=!1,t.isLoading=!1):(t.noRecord=!0,e.child.data=[],t.TotalRecords=0,t.isLoading=!1),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},FetchRecords:async function(){var e=this,t=`ParentID=&sortBy=${e.SortBy}&sortExp=${e.SortExp}&pagesize=${e.PageSize}&pagenumber=${e.PageNumber}&incidentType=${e.ParentIncidentTypeName}&subincidentType=${e.ParentSubIncidentTypeName}&creationDate=${e.CreationDate}`;await r["a"].GetFsmIncidentListing(t).then((function(t){if(""!=t.data&&null!=t.data)if("Success"==t.data.status){var a=t.data.result.DATA;a.forEach(t=>{t.child={onExpandChild:e.onExpandChild,isShowChild:!1,isShowExpandButton:!0,data:[]}}),$.each(a,(function(e,t){var a="",n=t.selectedForm;$.each(n,(function(e,t){a+=""==a?t.name:", "+t.name})),t.selectedForm=a})),e.IncidentListing=a,e.TotalRecords=t.data.result.DATA[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.listheaderbuttons[2].isdisabled=!0,e.noRecord=!1}else e.noRecord=!0,e.IncidentListing=[],e.TotalRecords=0;else e.noRecord=!0,e.IncidentListing=[],e.Headers=[],e.TotalRecords=0;setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))}}},h=p,I=a("2877"),S=Object(I["a"])(h,n,i,!1,null,null,null);t["default"]=S.exports}}]);
//# sourceMappingURL=chunk-bc288f1e.js.map