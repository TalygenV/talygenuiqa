(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b41eccdc"],{"0410":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".lessmorenotes .notesdata{max-height:100px;text-overflow:ellipsis;overflow:hidden}.readmorenotes{height:auto;text-overflow:ellipsis;overflow:visible}",""]),t.exports=e},"0c55":function(t,e,a){"use strict";a("90d2")},"0c69":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoteList.length>0?[e("div",{staticClass:"row card-view no-bg custom-box-width"},t._l(t.NoteList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[e("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?e("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:t.$t("Image")}}):e("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),e("div",{staticClass:"card-detail-main1 dynamiclistol"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.CREATED_BY_NAME))])]),e("hr",{staticClass:"my-2"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"150px","overflow-y":"auto"}},[e("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:t._s(a.NOTE)}})])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.CREATED_AT?t.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),e("div",{staticClass:"card-action"},[a.TICKET_ATTACHMENT_ID>0?e("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})]):t._e(),1!=t.ListNoteData?e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:t.$t("EditNotes"),alt:t.$t("EditNotes"),href:"javascript:;"},on:{click:function(e){return t.EditNote(a)}}},[e("em",{staticClass:"fa fa-edit"})]):t._e()])])])])})),0)]:t._e(),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center d-block no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)},s=[],o=a("9769"),r={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(t){var e=this;e.NoteList=t,e.NoteList.length>0?e.NoRecords=!1:(e.NoteList=[],e.NoRecords=!0)}},created(){setTimeout(()=>{var t=this;t.UserId=t.GetUserInfo.ID,t.ListNoteData=this.ListNoteData,t.isBlank(t.NoteData)?(t.NoRecords=!0,t.NoteList=[]):(t.NoteList=t.NoteData,t.NoRecords=!1)},500)},methods:{EditNote:function(t){var e=this;e.$parent.noteId=t.NOTE_ID,e.$parent.ticketId=t.TICKET_ID,e.$parent.note=t.NOTE,e.$parent.privacy=t.PRIVACY,e.$parent.ATTACHMENT_NAME=t.ATTACHMENT_NAME,e.$parent.ATTACHMENT_PATH=t.ATTACHMENT_PATH,e.$parent.isShowAddNote=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.ATTACHMENT_PATH}&fileName=${t.ATTACHMENT_NAME}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.ATTACHMENT_DESC).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.ATTACHMENT_NAME),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},l=r,n=a("2877"),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"12f6":function(t,e,a){"use strict";a("d961")},1788:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("AddWorkOrder")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddEditWorkOrder"))}})])])])]),e("div",{staticClass:"modal-body"},[e("Form",{ref:"WorkOrder"},[e("dynamic-form",{ref:"WorkOdetForm",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-Mapslot",fn:function({data:a}){return[t.isShowMap?e("ManageMap",{key:t.componentKey,staticClass:"row",attrs:{mapType:"MapBox",config:t.config,mapContainer:"WorkOrder",Data:t.mapObj},on:{GetAddress:t.GetAddress}}):t._e()]}}])})],1)],1)])])])],1)},s=[],o=(a("14d9"),a("9769")),r=a("33e4"),l={components:{ManageMap:r["a"]},props:{WorkOrdrId:{type:Number,required:!0},form:{type:String,required:!0}},data(){return{config:{isShowDrawButton:!0,isShowEtaOrLocator:!0,isShowSearchBox:!0},isLoading:!1,isShowMap:!0,showSetting:!1,clientId:0,componentKey:0,CompanyType:"",WorkOrderNumber:"",selectClientvalue:"",CountryDDl:"",StateDDl:"",selectvalue:"",Latitude:"",Longitude:"",buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.saveForm},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],FormSchema:[]}},created:async function(){var t=this;if(null!=t.$parent.TicketId&&null!=t.$parent.TicketNumber){t.tiketidNumber=t.$parent.TicketId;let e={label:t.$parent.TicketNumber,value:t.$parent.TicketId};t.FormSchema[0].Data[0].value=e,t.FormSchema[0].Data[0].disabled=!0,t.setClientData(null,t.tiketidNumber)}t.getForm(),setTimeout((function(){t.GetCountryDDL()}),2e3)},methods:{getForm:function(){var t=this;t.isLoading=!0;const e=`id=${t.$route.params.id}&moduleName=Ticketing&subModuleCode=FSM_WORKORDER&langCode=en`;o["a"].GetDynamicForm(e).then((function(e){t.isLoading=!1,null!=e&&null!=e.data&&(t.FormSchema=t.$refs.WorkOdetForm.ConvertCustomFieldIntoDynamicFormObj(e.data.data),t.FormSchema.forEach((e,a)=>{e.Data.forEach(async(e,a)=>{"work_type_id"==e.name&&t.GetDdlRecords_WorkType("FSM_WORKTYPE",e),"PRODUCT_ID"==e.name&&(e.config.options=[]),"StartDateTime"==e.name&&(e.config.minDate=new Date),"SA_Scheduled_StartTime"==e.name&&(e.config.minDate=new Date),"Utility_Id"==e.name&&(e.config.options=[]),"client_id"==e.name&&(e.disabled=!0),"ticket_id"==e.name&&(e.config.options=[],e.config.onSearchChange=t.onSearch),e.config.onChange=t.onChangeEventForFields})}),t.FormSchema.push({layoutType:"triple",group_name:"Address",Data:[{astype:"TextField",label:"Address",name:"Address",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:"Country",name:"Country",value:"",disabled:!0,config:{options:[]},placeholder:"Select",validationRules:""},{astype:"SelectField",label:"State",name:"State",value:"",disabled:!0,config:{options:[]},placeholder:"Select",validationRules:""},{astype:"TextField",label:"County",name:"County",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:"City",name:"City",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:"Street",name:"Street",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:"ZipCode",name:"ZipCode",value:"",disabled:!0,placeholder:"",validationRules:""}]}),t.FormSchema.push({layoutType:"single",visibility:!0,Data:[{astype:"SlotField",name:"Mapslot",value:"",visibility:!0,showLabel:!0}]}))}))},GetAddress:function(t){var e=this;e.Latitude="",e.Longitude="";var a=t.length-1;let i=e.CountryDDl.filter(e=>e.name===t[a].CompleteAddress.Country.LongName);e.FormSchema[3].Data[0].value=t[a].CompleteAddress.FullAddress;var s=""==i?"":i[0].value;e.FormSchema[3].Data[1].value=s,e.GetStateDDL(null,s),setTimeout((function(){let i=e.StateDDl.filter(e=>e.name===t[a].CompleteAddress.AdministrativeAreaLevel1.LongName);var s=""==i?"":i[0].value;e.FormSchema[3].Data[2].value=s}),1e3),e.FormSchema[3].Data[3].value=t[a].CompleteAddress.AdministrativeAreaLevel2.LongName,e.FormSchema[3].Data[4].value=t[a].CompleteAddress.City.LongName,e.FormSchema[3].Data[5].value=t[a].CompleteAddress.AdministrativeAreaLevel3.LongName,e.FormSchema[3].Data[6].value=t[a].CompleteAddress.PinCode.LongName;var o="",r="",l="",n="";t[a].LatLng.forEach((t,e)=>{0==e?(o=t.Lat,r=t.Lng):(l=t.Lat,n=t.Lng)}),e.Latitude=l+","+r,e.Longitude=o+","+n},Close:function(){this.$parent.AddWorkOrderModal=!1},GetStartData:function(t,e){var a=this;a.FormSchema[2].Data[1].config.minDate=t},onSearch:async function(t,e,a){this.searchSelectData(a,this,e)},searchSelectData:async function(t,e,a){this.ShowSearchData(t,e,a)},onChangeEventForFields:function(t,e,a){let i=this;var s=this;"ticket_id"==e.name&&i.FormSchema.forEach((e,s)=>{e.Data.forEach((e,s)=>{"client_id"==e.name&&i.setClientData(t,e,a.value),"PRODUCT_ID"==e.name&&i.GetProductRecords(t,e)})}),"Utility_Id"==e.name&&s.GetCDCDdlData(e),"Address"==e.name&&s.fetchAddressByClientId(e,null),"StartDateTime"==e.name&&(s.$refs.WorkOdetForm.updateProperty("EndDateTime","config.minDate",t),s.$refs.WorkOdetForm.UpdateKeyValue()),"SA_Scheduled_StartTime"==e.name&&(s.$refs.WorkOdetForm.updateProperty("SA_Scheduled_EndTime","config.minDate",t),s.$refs.WorkOdetForm.UpdateKeyValue())},setClientData:async function(t,e,a){var i=this,s=null;s=null!=a?a:e.value;var r="id=&&moduleName=Ticketing&type=CLIENTFROMTICKETID&search=&refId="+s;await o["a"].GetDDLDataFSM(r).then((function(t){t.data&&("Success"==t.data.status?(e.value=t.data.result.DATA[0].value,e.disabled=!0,i.GetClientaddress(null,t.data.result.DATA[0].value),i.GetUtilityDDL(null,t.data.result.DATA[0].value)):i.selectClientvalue="")}))},GetDdlRecords_WorkType:async function(t,e,a){var i=this;e.config.options=[];var s="id=&&moduleName=Ticketing&type=FSM_WORKTYPE&search=&refId=";await o["a"].GetDDLDataFSM(s).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.result.DATA.length>0&&(e.config.options=t.data.result.DATA,i.$refs.WorkOdetForm.UpdateKeyValue())}}))},GetUtilityDDL:async function(t,e,a){var i=0;i=null!=a?a:e;var s=this,r="refId=&&moduleName=Ticketing&type=UTILITY_LIST_BY_CLIENT_ID&search=&id="+i;await o["a"].GetDDLDataFSM(r).then((function(t){if(t.data){var e=t.data;null!=e&&t.data.result.DATA.length>0&&s.FormSchema.forEach((e,a)=>{e.Data.forEach((e,a)=>{"Utility_Id"==e.name&&(e.config.options=t.data.result.DATA),s.$refs.WorkOdetForm.UpdateKeyValue()})})}}))},ShowSearchData:async function(t,e,a){var i=`id=&&moduleName=Ticketing&type=FSM_Tickets_List&search=${t}&refId=`;"undefined"==typeof a&&(a=0),a.config.options=[],await o["a"].GetDDLDataFSM(i).then((function(t){if(t.data){var e=t.data;null!=e&&t.data.result.DATA.forEach((t,e)=>{a.config.options.push({value:t.value,name:t.name})})}}))},GetProductRecords:async function(t,e){var a=this;t="PRODUCT";var i=`id=&&moduleName=Ticketing&type=${t}&search=&refId=`;await o["a"].GetDDLDataFSM(i).then((function(t){if(t.data){var i=t.data;null!=i&&(t.data.result.DATA.length>0&&(e.config.options=t.data.result.DATA),a.$refs.WorkOdetForm.UpdateKeyValue())}}))},GetClientaddress:async function(t,e){var a=this,i=0;null==t?i=e:(i=t.target.value.toString(),a.clientId=i);var s="id=&&moduleName=Ticketing&type=CLIENT_ADDRESS_LIST_WO&search=&refId="+i;await o["a"].GetDDLDataFSM(s).then((function(t){if(t.data){var e=t.data;null!=e&&a.FormSchema.forEach((e,i)=>{e.Data.forEach((e,i)=>{"Address"==e.name&&(e.config.options=t.data.result.DATA),a.$refs.WorkOdetForm.UpdateKeyValue()})})}}))},fetchAddressByClientId:async function(t,e){var a=this;a.Latitude="",a.Longitude="";var i=0;i=null==t?e:t.value;var s=`id=${a.clientId}&&moduleName=Ticketing&&addressId=`+i;await o["a"].GetTicketClientAddress(s).then((function(t){if(t.data){var e=t.data.result.data[0].COUNTRY_ID;a.GetStateDDL(null,e),a.FormSchema[3].Data[0].value=t.data.result.data[0].USER_ADDRESS_1,a.FormSchema[3].Data[1].value=t.data.result.data[0].COUNTRY_ID,a.FormSchema[3].Data[2].value=t.data.result.data[0].CT[0].ST[0].STATE_ID,a.FormSchema[3].Data[3].value=t.data.result.data[0].USER_STATE,a.FormSchema[3].Data[4].value=t.data.result.data[0].USER_CITY,a.FormSchema[3].Data[5].value=t.data.result.data[0].USER_ADDRESS_2,a.FormSchema[3].Data[6].value=t.data.result.data[0].USER_ZIPCODE,a.Latitude=t.data.result.data[0].Latitude+","+t.data.result.data[0].Longitude,a.Longitude=t.data.result.data[0].Latitude+","+t.data.result.data[0].Longitude,a.$refs.WorkOdetForm.UpdateKeyValue()}}))},GetCDCDdlData:async function(t){var e=this,a=t.value,i="refId=&&moduleName=Ticketing&type=FSM_CDCCODE_FOR_TICKET&search=&id="+a;await o["a"].GetDDLDataFSM(i).then((function(t){if(t.data){var a=t.data;null!=a&&e.FormSchema.forEach((a,i)=>{a.Data.forEach((a,i)=>{"CDC_Id"==a.name&&(a.config.options=t.data.result.DATA),e.$refs.WorkOdetForm.UpdateKeyValue()})})}}))},GetCountryDDL:async function(){var t=this;t.CountryDDl="";var e="id=&&moduleName=Ticketing&type=COUNTRIES&search=&refId=";await o["a"].GetDDLDataFSM(e).then((function(e){if(e.data){var a=e.data;t.CountryDDl=e.data.result.DATA,null!=a&&t.FormSchema.forEach((a,i)=>{a.Data.forEach((a,i)=>{"Country"==a.name&&(a.config.options=e.data.result.DATA),t.$refs.WorkOdetForm.UpdateKeyValue()})})}}))},GetStateDDL:async function(t,e){var a=this,i=0;i=null==t?e:t.target.value.toString(),a.FormSchema[3].Data[2].config.options=[],a.StateDDl="";var s="id=&&moduleName=FSM&type=STATE&search=&refId="+i;await o["a"].GetDDLDataFSM(s).then((function(t){if(t.data){var e=t.data;a.StateDDl=t.data.result.DATA,null!=e&&a.FormSchema.forEach((e,i)=>{e.Data.forEach((e,i)=>{"State"==e.name&&(e.config.options=t.data.result.DATA),a.$refs.WorkOdetForm.UpdateKeyValue()})})}}))},saveForm:function(){var t=this;t.buttons[0].class+=" disabled",t.$refs.WorkOrder.validate().then(e=>{if(e){t.isLoading=!0;var a=t.$refs.WorkOdetForm.ConvertDynamicFormObjToCustomFieldObj(t.FormSchema);a.forEach(e=>{"LOCATION_NW"==e.field_name&&(e.field_value=t.Latitude),"LOCATION_SE"==e.field_name&&(e.field_value=t.Longitude),"id"==e.field_name&&(e.field_value=null==t.WorkOrdrId?0:t.WorkOrdrId),"workorder_number"==e.field_name&&(e.field_value=t.WorkOrderNumber),"status_id"==e.field_name&&(e.field_value=1001),"ticket_id"==e.field_name&&(e.field_value=e.field_value.value)});var i={data:a,moduleCode:"Ticketing",subModuleCode:"FSM_WORKORDER"};o["a"].SaveDynamicForm(JSON.stringify(i)).then((function(e){null!=e&&null!=e.data&&"Success"==e.data[0].Status?("EXIST"==e.data[0].Value.MSG?t.ShowAlert(t.$t("AlreadyExists",[t.$t("WorkOrder")]),"failure",!0,t.$t("Alert")):t.WorkOrdrId>0?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("WorkOrder")]),"success",!0,t.$t("Alert")),t.Close()):(t.ShowAlert(t.$t("AddedSuccess",[t.$t("WorkOrder")]),"success",!0,t.$t("Alert")),t.Close()),"WorkOrder"==t.form?(t.$parent.fetchRecords(),t.Close()):(t.$parent.IsWorkOrderShow=!0,t.$parent.isShowWorkList=!1,t.$parent.isShowWorkOrder=!1,t.$parent.LoadTab("workorder"),t.Close())):(t.ShowAlert(t.$t("AddedError",[t.$t("WorkOrder")]),"failure",!0,t.$t("Alert")),t.Close())})),t.isLoading=!1}})}}},n=l,c=a("2877"),d=Object(c["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"1af3":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("UpdateStatus")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[t.isLocateorNonLocate?e("dynamic-form",{ref:"LocateStatus",attrs:{lang:"en",schema:t.locateFormSchema},on:{OnSubmit:t.onSubmit}}):t._e(),t.isLocateorNonLocate?t._e():e("dynamic-form",{ref:"NonLocateStatus",attrs:{lang:"en",schema:t.nonLocateFormSchema},on:{OnSubmit:t.onSubmit}})],1),t.formListForSubmit.length>0?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tbl_formList"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"sorting"},[e("span",[t._v(t._s(t.$t("FormName")))])]),e("th",{staticClass:"text-center"},[e("span",[t._v(t._s(t.$t("FormSubmitted")))])]),e("th",{staticClass:"text-center sorting"},[e("span",[t._v(t._s(t.$t("Action")))])])])]),e("tbody",t._l(t.formListForSubmit,(function(a,i){return e("tr",[e("td",[t._v(" "+t._s(a.name)+" "),"1"==a.second_value?e("span",{staticClass:"text-danger font-weight-bold"},[t._v("*")]):t._e()]),e("td",{staticClass:"text-center"},["Yes"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-success text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e(),"No"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-danger text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e()]),0==t.EditEnabled?e("td",{staticClass:"text-center"},[t._m(0,!0)]):t._e(),t.EditEnabled?e("td",{staticClass:"text-center"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.GetCustomFieldFormForEdit(a)}}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success"})])]):t._e()])})),0)])])])]):t._e(),e("div",{staticClass:"modal-footer col-12 px-0"},[t.isLocateorNonLocate?e("dynamic-form",{attrs:{lang:"en",buttons:t.locateButtons},on:{OnSubmit:t.SubmitUpdateStatus}}):t._e(),!t.isLocateorNonLocate&&t.formListForSubmit.length>0?e("dynamic-form",{attrs:{lang:"en",buttons:t.nonLocateButtons},on:{OnSubmit:t.SubmitUpdateStatus}}):t._e(),t.isLocateorNonLocate||0!=t.formListForSubmit.length?t._e():e("dynamic-form",{attrs:{lang:"en",buttons:t.nonLocateWorkOrderStatusButtons},on:{OnSubmit:t.SubmitUpdateStatus}})],1)])])])],1),t.ShowWorkOrderStatusForm?e("EditViewFSMForm",{attrs:{isforshow:!1,formIdForShow:t.formIdForShow,listForSubmittedForm:t.listForSubmittedForm,moduleName:t.moduleName,subModuleCode:t.subModuleCode,workOrderId:t.workOrderId,subStatusId:t.subStatusId,callbackfunction:t.GetFormDetailData}}):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success disabled"})])}],o=(a("14d9"),a("9769")),r=a("42e5"),l={components:{EditViewFSMForm:r["a"]},props:{updateWorkOrderStatus:{type:Array,required:!0},isLocateorNonLocate:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{workOrderTicketId:0,workOrderId:0,isLoading:!1,ShowWorkOrderStatusForm:!1,ChildSubStatusId:"",ParentSubStatusId:"",WorkOrderStatusId:"",ChildSubStatusName:"",moduleName:"TICKETING",subModuleCode:"TICKETING",ParentSubStatusName:"",Description:"",MinutesWorked:"",formListForSubmit:[],listForSubmittedForm:[],workorderStatusDataList:[],formIdForShow:null,subStatusId:0,FeetLocated:"",EditEnabled:!1,IsAction:!1,locateFormSchema:[{layoutType:"double",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.SetParentSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("SubStatus"),name:"SubStatus",value:"",config:{options:[],onChange:this.GetFormsOnBehalfOfSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"NumericField",label:this.$t("MinutesWorked"),name:"Minutes Worked",value:"",validationRules:{required:!1}},{astype:"NumericField",label:this.$t("FeetLocated"),name:"FeetLocated",value:"",validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",validationRules:""}]}],locateButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.onChangeStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],nonLocateButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],nonLocateWorkOrderStatusButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Update Status",onClick:this.WorkOrderUpdateStatus},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.workOrderTicketId=t.updateWorkOrderStatus.ticket_id,t.workOrderId=t.updateWorkOrderStatus.id,""!=t.updateWorkOrderStatus.WO_Status_Id&&(t.WorkOrderStatusId=t.updateWorkOrderStatus.WO_Status_Id),1==t.isLocateorNonLocate&&t.GetFSMDDLData("FSM_WORK_ORDER",t.workOrderTicketId,t.workOrderId),setTimeout(()=>{t.GetDropDownData("WORK_ORDER_FINAL_STATUS")},500),setTimeout(()=>{t.GetFormDetailData()},500)},methods:{GetFormDetailData:async function(){var t=this;t.GetUpdateStatusDataForEdit(t.workOrderId,t.workOrderTicketId)},GetCustomFieldFormForEdit:function(t){var e=this;e.formIdForShow=t.value,e.subStatusId=e.locateFormSchema[0].Data[1].value,e.ShowWorkOrderStatusForm=!e.ShowWorkOrderStatusForm},onChangeStatus:function(t){var e=this;e.WorkOrderStatusId=t.target.value;let a=e.workorderStatusDataList.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"!=a.name&&"Completed"!=a.name||1!=e.IsAction?e.EditEnabled=!0:e.EditEnabled=!1},checkFormSubmitted:function(t){var e=this,a="No";return $.each(e.listForSubmittedForm,(function(e,i){i.formId==t&&i.formSubnittedId>0&&(a="Yes")})),a},GetUpdateStatusDataForEdit:async function(t,e){var a=this,i=`TicketId=${e}&WOId=${t}`;await o["a"].GetSingleWorkOrder(i).then((function(e){if("Success"==e.data.status){var i=e.data.result;null!=i&&(1==a.isLocateorNonLocate?(a.ParentSubStatusId=null==i.PARENT_SUB_STATUS_ID?"":i.PARENT_SUB_STATUS_ID,a.ChildSubStatusId=null==i.SUB_STATUS_ID?"":i.SUB_STATUS_ID,a.WorkOrderStatusId=null==i.STATUS_ID?"":i.STATUS_ID,a.ParentSubStatusName=i.PARENT_SUB_STATUS_NAME,a.ChildSubStatusName=i.CHILD_SUB_STATUS_NAME,a.Description=i.COMMENT,a.SetParentSubStatus(t),a.MinutesWorked=i.MINUTES_WORKED>0?i.MINUTES_WORKED:"",a.FeetLocated=i.FEET_LOCATED>0?i.FEET_LOCATED:"",a.ChildSubStatusId>0&&a.GetFormsOnBehalfOfSubStatus()):(a.nonLocateFormSchema[0].Data[0].value=a.WorkOrderStatusId,a.$refs.NonLocateStatus.UpdateKeyValue(),a.GetFormsWithoutSubStatus()))}}))},SetParentSubStatus:function(){var t=this;t.GetFSMDDLData("FSM_WORK_ORDER_CHILD_SUB_STATUS",t.workOrderTicketId,t.workOrderId),t.GetFormsOnBehalfOfSubStatus(t.locateFormSchema[0].Data[0].value)},GetFSMDDLData:async function(t,e,a){var i=this,s="",r="";"FSM_WORK_ORDER"==t&&(r=""),r=i.locateFormSchema[0].Data[0].value,i.locateFormSchema[0].Data[1].config.options=[];var l="id="+e+"&moduleName=&type="+t+"&refId="+r+"&workOrderId="+a;await o["a"].GetFSMDDLData(l).then((function(e){i.isBlank(e.data)||"Success"!=e.data.status||(s=e.data.result.DATA,null!=s?"FSM_WORK_ORDER"==t?(s.forEach((t,e)=>{i.locateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}),i.$refs.LocateStatus.UpdateKeyValue()):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(s.forEach((t,e)=>{i.locateFormSchema[0].Data[1].config.options.push({value:t.value,name:t.name})}),i.$refs.LocateStatus.UpdateKeyValue()):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(i.locateFormSchema[0].Data[1].value=""))}))},GetFormsWithoutSubStatus:async function(){var t=this;t.formListForSubmit=[];var e=`id=${t.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_WITHOUT_STATUS_FOR_NON_LOCATE&search=&refId=`;await o["a"].GetDDLData(e).then((function(e){!t.isBlank(e.data)&&e.data.DATA.length>0&&(t.formListForSubmit=e.data.DATA,$.each(e.data.DATA,(function(e,a){var i={formId:a.value,formSubnittedId:a.first_value,isAllFormMandatory:a.second_value};t.listForSubmittedForm.push(i)})))}))},WorkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t.WorkOrderStatusId},a=JSON.stringify(e);await o["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},GetFormsOnBehalfOfSubStatus:async function(t){var e=this;let a=e.locateFormSchema[0].Data[1].value;e.formListForSubmit=[],e.listForSubmittedForm=[];var i=`id=${e.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_BY_STATUS&search=&refId=`+a;await o["a"].GetDDLData(i).then((function(t){!e.isBlank(t.data)&&t.data.DATA.length>0&&(e.formListForSubmit=t.data.DATA,$.each(t.data.DATA,(function(t,e){e.value,e.first_value,e.second_value})))}))},GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await o["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})});let i=a.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"==i.name||"Completed"==i.name?(e.EditEnabled=!1,e.IsAction=!0):e.EditEnabled=!0}}))},Close:function(){this.$parent.showWorkOrderStatusModal=!1},SubmitUpdateStatus(t,e){var a=this,i=!0;let s=a.workorderStatusDataList.find(t=>t.value==a.WorkOrderStatusId);if("Cancelled"!=s.name&&$.each(a.listForSubmittedForm,(function(t,e){null==e.formSubnittedId&&"1"==e.isAllFormMandatory&&(i=!1),1==e.hasOwnProperty("SaveFormJSON")&&delete e.SaveFormJSON})),i){var r={WorkOrderId:a.workOrderId,TicketId:a.workOrderTicketId,ParentSubStatusId:a.locateFormSchema[0].Data[0].value,ChildSubStatusId:a.locateFormSchema[0].Data[1].value,Description:a.locateFormSchema[2].Data[0].value,IsCornerLot:0,IsGasfacility:0,IsCastIron:0,IsPrivateLocateOpportunity:0,IsGasPrintIssue:0,NumberofCIMains:"",MainSizeAndDistance:"",FormSaveId:0,formBaseString:a.listForSubmittedForm,MinutesWorked:a.locateFormSchema[1].Data[0].value,FeetLocated:a.locateFormSchema[1].Data[1].value,ReqFrom:"WEB",WorkOrderStatusId:a.WorkOrderStatusId},l=JSON.stringify(r);o["a"].UpdateSubStatus(l).then(t=>{"SUCCESS"==t.data.result.MSG?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.ShowAlert(vm.$t("ErrorWhileSavingRecords",[a.$t("Status")]),"failure",!0,a.$t("Alert")),a.Close())})}else a.ShowAlert(a.$t("AllFormsAreMandatory"),"warning",!0,a.$t("Alert"))}}},n=l,c=a("2877"),d=Object(c["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"3e91":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachment")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddAttachment"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SaveAttachment}})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),r={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],fileTypeList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(t){try{var e=this;e.AttachmentfileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.AttachmentfileName=o;var r=o.lastIndexOf("."),l=o.substring(r+1,o.length);e.AttachmentfileExt+="."+l;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',c=a.size;e.AttachmentfileSize=c;var d={attachement_mime:n,fileName:o,id:0==e.id||null==e.id?e.TicketAttachmentId:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:s,fileSize:c};e.AttachmentfileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,a){"TicketFileSize"==a.CORE_CONFIG_KEY?(this.allowedPerFileSizeInMb=a.CONFIG_DATA_VALUE,this.FormSchemaData[0].Data[1].config.maxSize=this.allowedPerFileSizeInMb):"TicketDisallowedFileTypes"==a.CORE_CONFIG_KEY&&(this.disallowFileTypes=a.CONFIG_DATA_VALUE,this.fileTypeList=this.AttachmentDisallowedFileType(this.disallowFileTypes),e.FormSchemaData[0].Data[1].config.reject=this.fileTypeList)}),this))},SaveAttachment:function(){var t=this;t.buttons[0].class+=" disabled";var e=t.disallowFileTypes.split(",");e.includes(t.AttachmentfileExt)?(t.checkFileValidExt=!1,t.ShowAlert(t.$t("InvalidFileUploadMsg",t.fileName,t.disallowFileTypes),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidExt=!0;var a=this.SizeToMb(t.AttachmentfileSize);if(a>parseInt(t.allowedPerFileSizeInMb,10)?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidSize=!0,a<0?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert")),t.buttons[0].class="btn btn-success"):t.checkFileValidSize=!0,1==t.checkFileValidExt&&1==t.checkFileValidSize){var i=JSON.stringify(t.AttachmentfileData);o["a"].UploadFile(i).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.Status?(t.ShowAlert(t.$t("Attachment successfully added"),"success",!0,t.$t("Alert")),t.DisplayName="",t.FileSrc="",$("input[type=text]").val(""),t.$emit("FetchAttachmentData"),t.$parent.noRecord=!1,t.Close(),t.callbackfunction()):(t.FileSrc="",t.buttons[0].class="btn btn-success",$("input[type=text]").val(""))},(function(t){}))}},Close:function(){var t=this;t.FormSchemaData[0].Data[0].value=null,t.AttachmentfileName="",t.Attachmentfile=null,t.AttachmentfileData=null,t.FormSchemaData[0].Data[1].config.onChange=t.GetBase64String,t.$parent.showAttachmentModal=!1,"Attachments"==t.viewMode?document.getElementById("tab-attachment").click():t.$parent.FetchAttachmentData(),t.$parent.noRecord=!1}}},l=r,n=a("2877"),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"42e5":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal d-block my-popups dialog"},[e("div",{staticClass:"modal-dialog mw-1000"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("div",{attrs:{name:"headerForModal"}},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Form")))])]),e("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body setheight"},[t._l(t.GroupsOfFields,(function(a,i){return[e("div",{staticClass:"col-lg-12 mb-3 px-0"},[a.header_name?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5",class:{"text-left":"left"==a.headerPositionType,"text-center":"center"==a.headerPositionType,"text-right":"right"==a.headerPositionType}},[e("span",[t._v(t._s(a.header_name))])])]):t._e()]),t._l(a.SectionData,(function(a,i){return e("div",{staticClass:"row pl-3 pr-0"},[e("div",{staticClass:"col-lg-12 mb-3"},[t.GetLocalizedValue(a.group_name,a.group_display_name)?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v(t._s(t.GetLocalizedValue(a.group_name,a.group_display_name)))])])]):t._e()]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 d-flex flex-wrap"},t._l(a.FormFieldData,(function(s,o){return e("div",{key:o,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==s.form_field_visibility,"col-lg-12 col-xl-12":"single"==s.layout_type,"col-lg-6 col-xl-6":"double"==s.layout_type,"col-lg-4 col-xl-4":"triple"==s.layout_type,"col-lg-3 col-xl-3":"four"==s.layout_type},attrs:{id:s.name}},["NO"==s.form_field_visibility?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],attrs:{type:"hidden",id:s.name},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}):t._e(),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.GetLocalizedValue(s.label,s.display_name))+":"),1==s.is_required?e("span",{class:{"text-danger":1==s.is_required}},[t._v("*")]):t._e()]),t.isBlank(s.user_guide)?t._e():e("a",{attrs:{href:"javascript:;",tabindex:-1,"data-toggle":"popoveruserguide","data-content":t.GetLocalizedValue(s.user_guide)}},[e("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 float-left"},["img"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],ref:"file",refInFor:!0,class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{type:"file",id:"file",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){return t.handleFileUpload(e,s)}}})]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"img"==s.dt_code?e("div",{staticClass:"mt-2",attrs:{id:"divimagedisplayImageId"}},[s.value.bass64?e("div",[e("img",{staticClass:"img-fluid mb-2",staticStyle:{"max-height":"99px",width:"auto"},attrs:{src:s.value.bass64,alt:"Logo",width:"200",height:"150"}})]):t._e()]):t._e(),"date"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("DatePicker",{class:{"input-group w-100":!0,"is-invalid":i[0]},staticStyle:{"flex-wrap":"nowrap"},attrs:{is24hr:t.is24hr,mode:t.mode,disabled:s.disabled,masks:t.masks,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function({inputValue:o,inputEvents:r,togglePopover:l}){return[e("input",t._g({ref:"inputDatePicker",refInFor:!0,class:{"form-control w-100":!0,"is-invalid":i[0]},attrs:{autocomplete:"off",disabled:s.disabled,name:s.name,placeholder:s.label},domProps:{value:o},on:{blur:function(e){return t.onBlur(e,a)}}},r)),e("div",{staticClass:"input-group-append"},[e("span",t._g({staticClass:"input-group-text"},s.disabled?null:r),[e("i",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i[0],expression:"errors[0]"}],ref:"errrorMessage",refInFor:!0,staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))])]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"date"!=s.dt_code&&"radio"!=s.dt_code&&"select"!=s.dt_code&&"textarea"!=s.dt_code&&"checkbox"!=s.dt_code&&"phone"!=s.dt_code&&"img"!=s.dt_code&&"signature"!=s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{readonly:t.isforshow,type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"textarea"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("textarea",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model.trim",value:s.value,expression:"item.value",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":"textarea"==s.dt_code&&i.length>0},attrs:{type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"phone"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"col-md-12 col-sm-12 col-lg-12 p-0"},[e("vue-phone-number-input",{attrs:{name:s.name,"no-use-browser-locale":!0},on:{update:function(e){return t.GetPhoneNumber(s,e,"spanPhone"+o)}},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{staticClass:"invalid-feedback",staticStyle:{display:"none"},attrs:{id:"spanPhone"+o}},[t._v("Enter valid number.")])],1)]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&2==t.MakeArray(s.picklist_options,s.dt_code).length?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled,tabindex:"5"},domProps:{value:s.value,checked:t.makeCheckBoxSelected(t.MakeArray(s.picklist_options,s.dt_code),s.value,"toggle")},on:{change:function(e){t.AssignToggleValues(e,s,t.MakeArray(s.picklist_options,s.dt_code),i,o)}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[0].name))]),e("span",{staticClass:"slider-no"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[1].name))])])])]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&!s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:r}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),r[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(r[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"HorizantalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"form-check form-check-inline"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.name+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])])})),0),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"VerticalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"form-group"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.custom_field_id+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+s.custom_field_id+"_"+a.value}},[t._v(" "+t._s(a.name)+" ")])])})),0)]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:1==s.dependent_show_type?t.GetValidation(s):"",expression:"item.dependent_show_type == 1 ? GetValidation(item) : ''"}],class:{"custom-vselect":1==t.vSelectValidate,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type&&i.length>0},attrs:{label:"name",filterable:!1,name:s.name,placeholder:t.GetFieldPlaceHolder(s.label,s.display_name,s.dt_code),value:s.value,options:s.select_options,checkvalue:s.value,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{search:function(e){return t.onSearch(e,s)},"@input":function(e){return t.setSelectedValue(s,e)}},scopedSlots:t._u([{key:"option",fn:function(a){return[e("div",{staticClass:"d-center"},[t._v(" "+t._s(a.name)+" ")])]}},{key:"selected-option",fn:function(a){return[e("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.name)+" ")])]}}],null,!0),model:{value:s.select_value,callback:function(e){t.$set(s,"select_value",e)},expression:"item.select_value"}},[e("template",{slot:"no-options"},[t._v(" "+t._s(t.$t("TypeTosearch"))+" "+t._s(t.GetLocalizedValue(s.label,s.display_name))+" ")])],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:i,errors:o}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type&&o.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),"mousedown.native":"onKeyDown1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])},function(e){t.FillDropdown(s,null),t.onchangechannel(s,a.LeadData)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(s.select_options),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"select"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&"select"==s.dt_code&&i.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"CA"==t.UserType?e("div",{staticClass:"ml-2 mt-1"},[1==s.isPlusIcon?e("a",{staticClass:"round-icon-small btn-dark theme-primary"},["industry_type_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddIndustrypopup(s)}}}):t._e(),"channel_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddLeadSourcepopup(s)}}}):t._e(),"role_title_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddRoleTitlepopup(s)}}}):t._e()]):t._e()]):t._e()],2)])])])})),0)])}))]})),0==t.isforshow?e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-success formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SubmitData()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),e("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])]):t._e()],2)])])])])],1)},s=[],o=(a("14d9"),a("d91b"),a("9769")),r=a("d5da"),l={components:{DatePicker:r["DatePicker"]},props:{isforshow:{type:Boolean,required:!0},formIdForShow:{type:String,required:!0},moduleName:{type:String,required:!0},subModuleCode:{type:String,required:!0},workOrderId:{type:String,required:!0},subStatusId:{type:String,required:!0},listForSubmittedForm:{type:Array,required:!0},propFormId:{required:!0},callbackfunction:{type:Function}},data(){return{WorkOrderId:0,FormId:null,FormFieldData:[],isLoading:!1,GroupsOfFields:[],ApiURL:null,UserType:"",containername:""}},created(){var t=this;t.UserType=t.GetUserInfo.UserType,t.containername=t.GetUserInfo.ContainerName,t.FormId=t.formIdForShow,t.FetchData()},methods:{makeCheckBoxSelected:function(t,e,a){return"string"==typeof t&&(t=t.split(",")),"toggle"==a?t[1].value==e:!!t.includes(e)},onChangeCheckBox:function(t,e,a){"string"==typeof t.value&&(t.value=t.value.split(",")),1==a.target.checked?t.value.push(e):t.value.splice(t.value.indexOf(e),1)},Close:function(){var t=this;t.$parent.ShowWorkOrderStatusForm=!1,t.$emit("Close")},FetchData:function(){var t=this;t.isLoading=!0;var e=`id=${t.FormId}&moduleName=${t.moduleName}&subModuleCode=${t.subModuleCode}&otherData=${t.workOrderId}&subStatusId=${t.subStatusId}&isForLog=`+t.isforshow;o["a"].GetFormById(e).then((function(e){if(t.listForSubmittedForm.length>0){var a=t.listForSubmittedForm.filter(e=>e.formId==t.FormId&&null!=e.formSubnittedId&&1==e.hasOwnProperty("SaveFormJSON"));a.length>0?t.FormFieldData=a[0].SaveFormJSON:0==t.formIdForShow||"0"==t.formIdForShow?(t.FormFieldData,t.listForSubmittedForm.forEach((e,a)=>{t.FormFieldData.push(e.obj)})):t.FormFieldData=e.data.data}else t.FormFieldData=e.data.data;null!=t.FormFieldData&&t.FormFieldData.length>0&&$.each(t.FormFieldData,$.proxy((function(e,a){if("img"==a.dt_code){var i={fieldType:"FileUpload",fileName:"",length:"",fileType:"",containerName:t.containername,id:t.FormId,bass64:a.value};a.value=i}"checkbox"==a.dt_code&&(a.select_value=[]);var s=a.headerId,o=$.grep(t.GroupsOfFields,(function(t,e){return t.headerId==s}));if(0==o.length){var r={headerId:a.headerId,header_name:a.HeaderName,header_DisplayOrder:a.header_DisplayOrder,headerPositionType:a.headerPositionType,SectionData:[]},l=$.grep(t.FormFieldData,(function(t,e){return t.headerId==s}));$.each(l,$.proxy((function(e,a){var i=a.group_id,s=$.grep(r.SectionData,(function(t,e){return t.group_id==i}));if(0==s.length){var o=$.grep(l,(function(t,e){return t.group_id==i})),n={group_id:i,group_name:a.group_name,LayoutType:a.layout_type,group_display_name:t.GetLocalizedValue(a.group_name,a.group_display_name),group_is_system_generated:a.group_is_system_generated,FormFieldData:o};r.SectionData.push(n)}}),this)),t.GroupsOfFields.push(r),console.log("vm.GroupsOfFields",t.GroupsOfFields)}}),this)),setTimeout((function(){t.RadioButtonBootstrap()}),100),setTimeout((function(){t.isLoading=!1}),500)}))},SubmitData:function(t){var e=this;e.submited=!0,e.isLoading=!0;var a=e.FormFieldData,i=[],s=0;if($.each(a,(function(t,a){var o=a.value;if("date"==a.dt_code&&(o=a.value),"contact_number"==a.name||"home_phone"==a.name||"business_phone"==a.name){var r=e.phoneList.filter(t=>t.field_id==a.custom_field_id);r.length>0&&(a.value=$.trim(r[0].value),o=$.trim(r[0].value),0==r[0].isValid&&$.trim(a.value).length>0&&s++)}if("checkbox"==a.dt_code&&(o=String(a.value)),"select"==a.dt_code)try{o="object"===typeof o&&null!==o?o.value:o}catch(n){}var l={field_name:a.name,field_value:o,custom_field_id:a.custom_field_id,dt_code:a.dt_code};console.log("dataObject1",l),i.push(l)})),s>0)return e.isLoading=!1,e.submited=!1,!1;var r={data:i,formId:e.FormId,refId:e.workOrderId,subModuleCode:e.subModuleCode},l=JSON.stringify(r);o["a"].SaveUserFormData(l).then((function(t){e.ShowAlert(t.data.msg,"success",!0,e.$t("Alert")),$.each(e.listForSubmittedForm,(function(i,s){s.formId==e.FormId&&(s.formSubnittedId=t.data.returnId,s.SaveFormJSON=a)})),e.submited=!1,e.Close(),e.callbackfunction(),setTimeout((function(){e.isLoading=!1}),500)}))},AssignToggleValues:function(t,e,a,i,s){var o=this,r="";if(t.target.checked){r=a[1].value;var l=$.grep(a,(function(t,e){return"yes"==String(t.value).toLowerCase()||"1"==String(t.value).toLowerCase()||"true"==String(t.value).toLowerCase()||"public"==String(t.value).toLowerCase()}));null!=l&&l.length>0&&(r=l[0].value)}else{r=a[0].value;l=$.grep(a,(function(t,e){return"no"==String(t.value).toLowerCase()||"0"==String(t.value).toLowerCase()||"false"==String(t.value).toLowerCase()||"private"==String(t.value).toLowerCase()}));null!=l&&l.length>0&&(r=l[0].value)}"0"==r||"no"==r.toLowerCase()?r=!1:"1"!=r&&"yes"!=r.toLowerCase()||(r=!0),e.value=r,o.showDependentItem(e,r,i,s)},handleFileUpload:function(t,e){var a=this;this.selectedFile=t.target.files[0];var i={fieldType:"FileUpload",fileName:t.target.files[0].name,length:t.target.files[0].size,fileType:t.target.files[0].type,containerName:a.containername,id:a.FormId},s=new FileReader;s.readAsDataURL(this.selectedFile),s.onload=()=>{i.bass64=s.result,e.value=i},console.log("selectedFile1",i)}}},n=l,c=a("2877"),d=Object(c["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},5437:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Reply")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddTicketReply"))}})])])])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-8"},[e("dynamic-form",{ref:"replyTicket",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{InvalidSubmit:t.checkError},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}},{key:"tgslot-Subject",fn:function({data:a}){return[e("label",[t._v(t._s(a.fieldInfo.value)+" "+t._s(t.ticketSubject))])]}},{key:"tgslot-ReplyTo",fn:function({data:a}){return[e("label",[t._v(t._s(a.fieldInfo.value)+t._s(t.ticketReplyTo)+" ")])]}}])})],1),e("div",{staticClass:"col-xl-4 pl-xl-0 mt-md-2"},[e("div",{staticClass:"border no-padding h-100 bg-light"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("Related Article")))])]),e("div",{staticClass:"info-list infolistheight"},[e("div",{staticClass:"col-sm-12 col-md-12 float-left"},[e("div",{staticClass:"row mt-0",staticStyle:{display:"flex"}},[e("div",{staticClass:"col-12 col-sm-8 float-left pr-1 pl-0"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.articleText,expression:"articleText"}],staticClass:"form-control",attrs:{id:"txtRelatedArticleList",maxlength:"50",type:"text",placeholder:t.$t("Search by KeyWords"),autocomplete:"off"},domProps:{value:t.articleText},on:{keypress:t.SearchRelatedArticle,input:function(e){e.target.composing||(t.articleText=e.target.value)}}})])]),e("div",{staticClass:"col-12 col-sm-4 float-left pl-0"},[e("div",{staticClass:"search-btm-btn background-0 text-left",staticStyle:{display:"flex"}},[e("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:t.$t("Search"),id:"ancRelatedArticleList",href:"javascript:;"},on:{click:function(e){return t.EnterRelatedArticleText()}}},[e("i",{staticClass:"fa fa-search"})]),e("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",id:"ancClearRelatedArticleList",title:t.$t("Clear")},on:{click:function(e){return t.resetRelatedArticleText()}}},[e("i",{staticClass:"fa fa-refresh"})])])])])]),e("div",{staticClass:"clearfix",staticStyle:{clear:"both"}}),e("div",{staticClass:"search-related-articles",staticStyle:{display:"none"}},[e("i",{staticClass:"fa fa-search"}),e("div",{staticClass:"clearfix"}),e("span",[t._v(t._s(t.$t("Lookforticketrelated")))])]),e("div",{staticClass:"listing mb-2",staticStyle:{"max-height":"530px","overflow-y":"auto"},attrs:{id:"divRelatedArticleList"}},t._l(t.ArticleList,(function(a){return e("div",{staticClass:"listing articlesList p-2"},t._l(a.ART,(function(a){return e("div",{staticClass:"listing articlesList p-2"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"blue-time w-100 d-block"},[t._v(t._s(a.TICKET_ARTICLE_TITLE)+" "),e("a",{staticClass:"text-right float-right ancsetartticle single-action",on:{click:function(e){return t.SetArticleOnDesc(a)}}},[e("i",{staticClass:"fa fa-plus-circle"})])]),e("br"),e("span",{staticClass:"txt",domProps:{innerHTML:t._s(a.TICKET_ARTICLE_DESC)}})])])})),0)})),0)])])])])])])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),r={props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,file:null,ReplyTicketList:[],checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",ArticleList:[],TicketThreadId:null,TicketThreadToId:0,IsSupportTicket:!1,StatusCode:"",ticketSubject:"",articleText:"",ticketReplyTo:"",fileTypeList:[],ticketModel:{transferDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",TicketThreadId:"",TicketThreadToId:0,RepliedBy:0,StatusCode:"",fileData:[]},FormSchema:[{layoutType:"double",Data:[{astype:"SlotField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:""},{astype:"SlotField",label:this.$t("Reply To"),name:"ReplyTo",value:"",placeholder:""}]},{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Canned Reply"),name:"CannedReply",value:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeTemplate},placeholder:this.$t("Select Template"),validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"ListAttachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:4e3}}]}],buttons:[{type:"submit",class:"btn btn-warning save",value:"TICKET_REPLY_DRAFT",text:"<i class='fa fa-save pr-2'></i>Save As Draft",onClick:this.UploadFileWithReply},{type:"submit",class:"btn btn-success save",value:"ACT",text:"<i class='fa fa-save pr-2'></i>Submit Reply",onClick:this.UploadFileWithReply}]}},created:async function(){var t=this;this.configData(),t.FetchData()},methods:{SearchRelatedArticle:function(t){var e=t.key,a=this;a.ShowRelatedArticleList(e)},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,a){"TicketFileSize"==a.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=a.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==a.CORE_CONFIG_KEY&&(this.disallowFileTypes=a.CONFIG_DATA_VALUE,this.fileTypeList=this.AttachmentDisallowedFileType(this.disallowFileTypes),e.FormSchema[2].Data[0].config.reject=this.fileTypeList)}),this))},EnterRelatedArticleText:function(){var t=this,e=t.articleText;t.ShowRelatedArticleList(e)},resetRelatedArticleText:function(){var t=this;t.articleText="",t.FormSchema[3].Data[0].value="",t.ArticleList=[]},SetArticleOnDesc:function(t){var e=this;e.FormSchema[3].Data[0].value="",e.FormSchema[3].Data[0].value=t.TICKET_ARTICLE_TITLE+"<br>"+t.TICKET_ARTICLE_DESC},checkError:function(t,e){},onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onChangeTemplate:async function(t,e,a){var i=this,s=[];s=e.config.options,s.forEach(e=>{e.value==t.target.value&&(i.FormSchema[3].Data[0].value=e.value)})},ShowRelatedArticleList:async function(t){var e=this,a="search="+t;await o["a"].RelatedArticleList(a).then((function(t){null!=t.data&&(e.ArticleList=t.data.result.data)}))},FetchData:async function(){var t=this,e="ticketId="+t.id;await o["a"].AssignTransferTicket(e).then((function(e){null!=e.data&&(t.ReplyTicketList=e.data.data,t.TicketThreadToId=0==t.ReplyTicketList.ticketThreadToId?t.ReplyTicketList.createdBy:t.ReplyTicketList.ticketThreadToId,t.StatusCode=t.ReplyTicketList.ticketStatus,t.ticketSubject=t.ReplyTicketList.ticketSubject,t.ticketReplyTo=t.ReplyTicketList.ticketThreadToName,null!=t.ReplyTicketList.replyTemplate&&(t.ReplyTicketList.replyTemplate.forEach((e,a)=>{t.FormSchema[1].Data[0].config.options.push({value:e.value,name:e.name})}),t.$refs.replyTicket.UpdateKeyValue()))}))},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),l=o.substring(r+1,o.length);e.fileExt+="."+l;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithReply:function(t){var e=this;if("btn btn-success save"==t.class&&(e.buttons[1].class="btn btn-success save disabled"),"btn btn-warning save"==t.class&&(e.buttons[0].class="btn btn-warning save disabled"),""==e.FormSchema[3].Data[0].value||null==e.FormSchema[0].Data[0].value)this.showError=!0;else{var a=e.disallowFileTypes.split(",");a.includes(e.fileExt)?(e.checkFileValidExt=!1,e.ShowAlert(e.$t("InvalidFileUploadMsg",e.fileName,e.disallowFileTypes),"warning",!0,e.$t("Alert"))):e.checkFileValidExt=!0;var i=this.SizeToMb(e.fileSize);if(i>parseInt(e.allowedPerFileSizeInMb,10)?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,i<0?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,1==e.checkFileValidExt&&1==e.checkFileValidSize){e.ticketModel.TicketId=0==e.id||null==e.id?e.TicketNoteId:e.id,e.ticketModel.ModuleName=e.modulename,e.ticketModel.SubModuleCode=e.submodulecode,e.ticketModel.fileData=e.fileData,e.ticketModel.RepliedBy=e.TicketThreadToId,e.ticketModel.TicketThreadToId=e.TicketThreadToId,e.ticketModel.transferDescription=e.FormSchema[3].Data[0].value,e.ticketModel.StatusCode="TICKET_REPLY_DRAFT"==t.value?"TICKET_REPLY_DRAFT":"ACT";var s=JSON.stringify(e.ticketModel);o["a"].TicketReply(s).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Reply")]),"success",!0,e.$t("Alert")),$("input[type=text]").val(""),e.Close(),e.callbackfunction()):(e.FileSrc="",e.Close(),$("input[type=text]").val(""))}catch(a){return HandleErrorOccured(a,"saveNote")}})}}},Close:function(){this.$parent.showReplyTicketModal=!1}}},l=r,n=a("2877"),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},5774:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"listing"},[e("div",{staticClass:"w-100",attrs:{id:"accordion"}},[t._l(t.groupByDate,(function(a,i,s){return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("a",{class:{"card-link collapsed":s>1,"card-link":s<=1},attrs:{"data-toggle":"collapse",href:"#collapseOneThread"+s}},[e("div",{staticClass:"conversation-date heading-border"},[e("span",[t._v(t._s(t.$t(i)))])])])]),e("div",[e("div",{class:{collapse:s>1,"collapse show":s<=1},attrs:{id:"collapseOneThread"+s}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"conversation-main"},[t._l(a,(function(a,i){return[e("div",{staticClass:"conversation-time"},[e("span",[t._v(t._s(t.$options.filters.formatTime(a.createdAt)))])]),e("div",{staticClass:"conversation-box-con"},[e("div",{staticClass:"conversation-box"},[t._m(0,!0),e("div",{staticClass:"conversation-header addednote-ticket"},[e("span",[e("span",{staticClass:"sender-name"},[t._v(t._s(a.actionPerformedByName))]),e("span",{staticClass:"sender-department"},[t._v("("+t._s(a.actionPerformedByDeptName)+")")])]),a.ticketAttachmentId>0?e("span",{staticClass:"header-action"},[e("a",{staticClass:"btn-primary downloadAttachement round-icon-split round-icon split",attrs:{id:a.ticketAttachmentId,title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.ticketAttachmentId,"data-isSupportTicket":a.isSupportTicket},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})])]):t._e(),a.referenceId>0&&"TICKET CONCLUSION DRAFT"==a.currentStatus?e("span",{staticClass:"header-action"},[e("a",{staticClass:"round-icon-split round-icon split",attrs:{id:"_aSplit",title:"","data-threadid":a.ticketThreadId,href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Click here to Split ticket"},on:{click:function(e){return t.SplitTicket(a)}}},[e("em",{staticClass:"fa fa-code-fork",staticStyle:{transform:"rotate(90deg)"}})]),e("a",{staticClass:"editTicketThreadConclusion btn-success round-icon",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Click here to edit ticket conclusion","aria-describedby":"tooltip90021"},on:{click:function(e){return t.EditTicketThreadConclusion(a)}}},[e("em",{staticClass:"fa fa-pencil"})])]):t._e(),a.referenceId>0&&"CONCLUSION"==a.currentStatus?e("span",{staticClass:"header-action"},[e("a",{staticClass:"round-icon-split round-icon split",attrs:{id:"_aSplit",title:"","data-threadid":a.ticketThreadId,href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Click here to Split ticket"},on:{click:function(e){return t.SplitTicket(a)}}},[e("em",{staticClass:"fa fa-code-fork",staticStyle:{transform:"rotate(90deg)"}})]),e("a",{staticClass:"anconclusiondetails bg-primary round-icon",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Click here to edit ticket conclusion","aria-describedby":"tooltip90021"},on:{click:function(e){return t.ViewThreadConclusion(a)}}},[e("em",{staticClass:"fa fa-eye text-white"})])]):t._e(),a.referenceId>0&&"CLAIM DRAFT"==a.currentStatus?e("span",{staticClass:"header-action"},[e("a",{staticClass:"btn-success round-icon clseditclick",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Click here to edit ticket claim"},on:{click:function(e){return t.EditClaim(a)}}},[e("em",{staticClass:"fa fa-pencil"})]),e("a",{staticClass:"btn-danger round-icon clsdeleteticketclaim",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Click here to delete Ticket Claim"},on:{click:function(e){return t.DeleteTicketClaim(a)}}},[e("em",{staticClass:"fa fa-trash"})])]):t._e()]),e("div",{staticClass:"conversation-content addednote-ticket"},[e("p",[t._v(t._s(t.SetMessage(a)))]),null!=a.threadDescription&&a.threadDescription.length>0?e("div",{staticClass:"addednote-ticket-content"},[e("div",{staticClass:"col-12 p-0 notesdata"},[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.threadDescription)}})])])]):t._e()]),t.ShowConclusionDetail&&a.referenceId>0&&"CONCLUSION"==a.currentStatus?e("div",{staticClass:"splitticketboxfeedbox",attrs:{id:"feedbacklist"}},[e("div",{staticClass:"splitticketcontainer"},[e("div",{staticClass:"conclusion-ticket col-lg-12 p-0 mt-3"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 p-0"},[e("div",{staticClass:"heading-border"},[e("h5",{staticClass:"h5 mb-2"},[e("span",[t._v("Conclusion Created by")]),t._v(" - "+t._s(a.actionPerformedByName)+" at "+t._s(t.$options.filters.formatDateTime(a.createdAt))+" ")])])]),e("div",{staticClass:"conclusion-ticket-content mb-2 col-12 p-0"},[e("strong",{staticClass:"mr-2"},[t._v("Root Cause:")]),t._v(" "+t._s(a.rootCause)+" ")]),e("div",{staticClass:"conclusion-ticket-content mb-2 col-12 p-0"},[e("strong",{staticClass:"mr-2"},[t._v("Corrective Action:")]),t._v(" "+t._s(a.correctiveAction)+" ")])])])]):t._e()])])]}))],2)])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 text-center col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-circle text-white light-yellow"},[e("em",{staticClass:"fa fa-file",staticStyle:{"font-size":"18px","margin-top":"18px !important"},attrs:{"aria-hidden":"true"}})])}],o=(a("14d9"),a("9769")),r={props:{TicketThreads:{type:Array,required:!0}},data(){return{ThreadsList:[],UserType:null,UserId:null,companyId:null,NoRecords:!1,ShowConclusionDetail:!1}},computed:{groupByDate(){var t=this;let e={};return t.TicketThreads.forEach(t=>{let a=t.createdAt.substring(0,10);e[a]||(e[a]=[]),e[a].push(t)}),e}},created(){var t=this;t.UserId=t.GetUserInfo.ID,t.companyId=this.GetUserInfo.CompanyId,t.UserType=t.GetUserInfo.UserType},methods:{DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.fileSrc}&fileName=${t.fileName}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.fileMime).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.fileName),document.body.appendChild(o),o.click()}))},EditTicketThreadConclusion(t){var e=this;e.$parent.FormConclusionData=[],e.$parent.FetchData(),e.$parent.isShowTicketConclusion=!0,e.$parent.FormConclusionData.push({conclusionid:t.referenceId,thredid:t.currentStatus,TicketId:t.ticketId,rootcause:t.rootCause,correctiveaction:t.correctiveAction}),e.$parent.GetNewData()},SplitTicket(t){var e=this;if("CLOSED"==t.priviousStatus||"CLOSED AND LOCKED"==t.priviousStatus||"CANCELLED"==t.priviousStatus)return e.ShowAlert(e.$t("SorryThetickethavebeenclosed"),"warning",!0,e.$t("Alert")),!1},ViewThreadConclusion(t){var e=this;t.referenceId>0&&"CONCLUSION"==t.currentStatus&&(e.ShowConclusionDetail=!e.ShowConclusionDetail)},EditClaim(t){var e=this;e.$parent.FormClaimData=[],e.$parent.FetchData(),e.$parent.FormClaimData.push({ClaimId:t.referenceId,thredid:t.currentStatus,TicketId:t.ticketId}),e.$parent.GetEditClaimData()},DeleteTicketClaim:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Claim"),(function(){e.isLoading=!0;var a={ids:t.referenceId,companyId:e.companyId,userId:e.UserId,moduleName:"FSM",refCode:"TALYGEN_TICKET_CLAIM"},i=JSON.stringify(a);o["a"].deleteActivityData(i).then(t=>{e.isLoading=!1,"Success"==t.data[0].Status?(document.getElementById("tab-cliam").click(),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Claim")]),"Success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("DeletedError",[e.$t("Claim")]),"failure",!0,e.$t("Alert")),e.$emit("close")})}))},SetMessage:function(t){var e=this,a="";if("TICKET_TRANSFER"==t.statusCode&&t.currentStatus==t.priviousStatus&&"CA"!=e.UserType){var i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED"),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus):e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus):"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+("TICKET_TRANSFER"==i?t.departmentName:t.currentStatus):""==t.currentStatus?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length>0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");var s="";t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus.toUpperCase()==t.priviousStatus.toUpperCase()&&(s=""),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s:"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+i=="TICKET_TRANSFER"?t.actionPerformedByDeptName:t.actionPerformedByName+" "+e.$t("To")+" "+("TICKET_TRANSFER"==i?t.departmentName:t.currentStatus)+" "+s:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length<=0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");s="";if(t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus==t.priviousStatus&&(s=""),t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType)a=t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s;else if("CA"!=e.UserType&&"SA"!=e.UserType){var o=t.currentStatus;""==o&&(o=t.TicketThreadTo),a=t.departmentName.toUpperCase()==o.toUpperCase()?e.$t(i)+" "+e.$t("By")+" "+t.departmentName:e.$t(i)+" "+e.$t("By")+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+("TICKET_TRANSFER"==i?t.departmentName:o+" "+s)}else a=e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s}else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length>0)"CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode?a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"CL"==e.UserType&&t.threadCreatedBy==e.UserId?a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]):"CL"==e.UserType?a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:"CA"!=e.UserType||"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=t.statusCode.toUpperCase()==t.actionPerformedByName.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("To")+" "+t.departmentName+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:t.isSupportTicket?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus;else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length<=0)if("CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("CL"==e.UserType&&t.threadCreatedBy==e.UserId)a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]);else if("CL"==e.UserType)a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]);else{o=t.currentStatus;t.currentStatus!=t.departmentName&&""!=o||(o=t.TicketThreadTo),a=t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):t.actionPerformedByName.toUpperCase()==t.currentStatus.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)}else if("TICKET_SPLIT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.currentStatus==t.priviousStatus)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus);else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.priviousStatus.length>0)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?"--":t.currentStatus)+" "+e.$t("From")+" "+t.priviousStatus;else if("TICKET_CLOSED"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_FEEDBACK"==t.statusCode||"TICKET_NOTES_CREATED"==t.statusCode||"TICKET_NOTES_DELETED"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_ETA_CHANGE"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_ETA_CHANGE_CL",[t.ticketNumber]):""!=t.priviousStatus?e.$t("TICKET_ETA_CHANGE_MESSAGE")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.priviousStatus+" "+e.$t("To")+" "+t.currentStatus:e.$t("TICKET_ETA_UPDATE_MESSAGE")+" "+t.currentStatus+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CONCLUSION"==t.statusCode)a="TICKET CONCLUSION DRAFT"==t.currentStatus?e.$t("Conclusion")+" "+e.$t("Drafted")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t("Conclusion")+" "+e.$t("Created_By")+" "+t.actionPerformedByName;else if("CLAIM_CREATED"==t.statusCode||"CLAIM_APPROVE"==t.statusCode||"CLAIM_REJECT"==t.statusCode)a="CLAIM DRAFT"==t.currentStatus||"TICKET_CLAIM_DRAFT"==t.currentStatus?e.$t("TICKET_CLAIM_DRAFT")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&""==t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&""!=t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("OnBehalf")+" "+e.$t("of")+" "+t.onBehalfUser;else if("TICKET_PRODUCT_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_PRODUCT_CHANGE_CL",[t.ticketNumber]);else{var r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)}else if("TICKET_CATEGORY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)}else if("TICKET_PRIORITY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)}else a="TICKET_MERGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_ESCALATES_NEXT_LEVEL"==t.statusCode?e.$t("TICKET_ESCALATES_NEXT_LEVEL",[e.$t("Level")+" "+t.currentStatus,t.actionPerformedByName]):"TICKET_DELETED"==t.statusCode?"CL"==e.UserType?e.$t("TICKET_DELETED_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"ADD_ATTACHMENT"==t.statusCode||"TICKET_ACCEPT"==t.statusCode||"TICKET_REJECT"==t.statusCode||"TICKET_WO_ADDED"==t.statusCode||"REPORT_INCIDENT"==t.statusCode||"DELETE_REPORT_INCIDENT"==t.statusCode||"EDIT_REPORT_INCIDENT"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_WO_SUB_STATUS_CHANGED"==t.statusCode||"WO_STATUS_CHANGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.previousProduct+" "+e.$t("To")+" "+t.currentProduct:"TICKET_WO_STATUS_CHANGED_HIGH_PROFILE_WHILE_PARSING"==t.statusCode?e.$t(t.statusCode):"HIGH_PROFILE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode,[t.ticketNumber,t.currentProduct]):"TICKET_ASSIGN_SMS"==t.statusCode?e.$t("Ticket_Assign_SMS",[t.ticketNumber,t.currentProduct]):"WORK_ORDER_FORM_NOTIFICATION"==t.statusCode||"CORNER_LOT_EMAIL_NOTIFICATION"==t.statusCode||"GAS_FACILITY_EMAIL_NOTIFICATION"==t.statusCode||"CAST_IRON_EMAIL_NOTIFICATION"==t.statusCode||"GAS_PRINT_ISSUE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode)+" "+t.threadType+" "+e.$t("By")+" "+t.actionPerformedByName:"PL_FORM_NOTIFICATION_HAS_BEEN_SENT"==t.statusCode?t.threadType:"WORK_ORDER_FORMS_ACCEPT"==t.statusCode?"Work Order Forms accepted "+e.$t("By")+" "+t.actionPerformedByName:"WORK_ORDER_FORMS_REJECT"==t.statusCode?"Work Order Forms rejected "+e.$t("By")+" "+t.actionPerformedByName:e.$t("AssignedTo")+" "+t.actionPerformedByName+" "+t.departmentName;return a}}},l=r,n=(a("0c55"),a("2877")),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"5a15":function(t,e,a){var i=a("a348");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("15676fe0",i,!0,{sourceMap:!1,shadowMode:!1})},"5e6e":function(t,e,a){"use strict";a("ec70")},6481:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Notes")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" "+t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddNotes"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithNote},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{class:{"is-invalid":""!=a.error},attrs:{editor:t.editor},model:{value:t.noteDescription,callback:function(e){t.noteDescription=e},expression:"noteDescription"}}),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(a.error))])]}}])})],1)])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),r={props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"",ticketType:"",noteDescription:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:5e3}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,showSelectedFiles:[],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;if(this.configData(),t.$parent.noteId>0){t.TicketNoteId=t.$parent.noteId,t.ticketId=t.$parent.ticketId,t.noteDescription=t.$parent.note,t.FormSchema[1].Data[0].value="Private"==t.$parent.privacy?1:2;var e={attachmentName:t.$parent.ATTACHMENT_NAME,attachmentPath:t.$parent.ATTACHMENT_PATH};null!=e.attachmentName&&null!=e.attachmentPath&&t.FormSchema[2].Data[0].config.showSelectedFiles.push(e)}},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,a){"TicketFileSize"==a.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=a.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==a.CORE_CONFIG_KEY&&(this.disallowFileTypes=a.CONFIG_DATA_VALUE,this.fileTypeList=this.AttachmentDisallowedFileType(this.disallowFileTypes),e.FormSchema[2].Data[0].config.reject=this.fileTypeList)}),this))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onDeleteSelectedFiles:function(t){this.$delete(this.FormSchema[2].Data[0].config,"showSelectedFiles")},onChangeRadio:function(t,e){var a=this;a.ticketType=t.target.dataset.value},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),l=o.substring(r+1,o.length);e.fileExt+="."+l;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(t,e){var a=this;if(a.buttons[0].class+=" disabled",""==a.noteDescription||null==a.noteDescription)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",[a.fileName,a.disallowFileTypes]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a.noteDescription,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var r=JSON.stringify(a.ticketModel);o["a"].AddNote(r).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.$emit("LoadNoteForQuickView"),a.Close(),a.callbackfunction()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success",a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){var t=this;t.noteDescription=null,t.FileName=null,t.file=null,t.FormSchema[2].Data[0].config.onChange=t.GetBase64String,this.$emit("Close"),t.$parent.isShowAddNote=!1,t.$parent.noteId=0,"Notes"==t.viewMode?document.getElementById("tab-notes").click():t.$parent.LoadNotesForQuickView(),t.$parent.noRecord=!1}}},l=r,n=(a("ceb7"),a("2877")),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"6aec":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".my-popups .modal-body .user-guide{position:absolute;right:23px!important;top:15px!important;background-color:transparent!important}",""]),t.exports=e},"73ad":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".text-warning{color:#ff0}.textarea-large{width:100%;height:150px}.field-validation-error{font-size:80%}",""]),t.exports=e},"78f9":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TimeTrack")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{ref:"WorkOrderTimerModal",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithTime},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},s=[],o=(a("14d9"),a("9769")),r=(a("d91b"),{props:{id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,Disabled:0,FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("WorkOrder"),name:"WorkOrder",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){this.GetDDLData("FSM_TRACK_HISTORY")},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetDDLData:async function(t){var e=this,a=`id=${e.id}&moduleName='TICKETING'&type=`+t;e.isLoading=!0,await o["a"].GetDDLDataFSM(a).then((function(t){"Success"==t.data.status&&(t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}),e.$refs.WorkOrderTimerModal.UpdateKeyValue(),e.isLoading=!1)}))},urlChange:function(){const t=Object.assign({},this.$route.query);t.reload="reload",this.$router.push({query:t})},UploadFileWithTime:function(t,e){var a=this,i={TicketId:a.id,WorkOrderId:a.FormSchema[0].Data[0].value,TrackDescription:a.FormSchema[1].Data[0].value,IsBillable:!0,TrackId:0,RequestFor:"FSM",RequestForType:"START",IPAddress:"",WorkOrderSubject:a.FormSchema[0].Data[0].name},s=JSON.stringify(i);a.confirmR(a.$t("ConfirmTimerMsg"),!0,a.$t("StartTimer"),(function(t){a.Disabled=1,o["a"].SaveTrackHistory(s).then(t=>{try{"Success"==t.data.status?(a.$parent.ShowTimer=!0,a.$parent.AddEditText="Edit",a.Disabled=0,a.urlChange(),a.ShowAlert(a.$t("AddedSuccess",[a.$t("TimeTrack")]),"success",!0,a.$t("Alert")),a.Close(),"Timer"==a.viewMode&&document.getElementById("tab-ticketdetails").click()):(a.ShowAlert(a.$t("AddedError",[a.$t("TimeTrack")]),"failure",!0,a.$t("Alert")),a.Disabled=0,a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.$emit("Close"),t.FormSchema[0].Data[0].value=null,t.FormSchema[1].Data[0].value=null,t.$parent.isShowWOTimer=!1}}}),l=r,n=a("2877"),c=Object(n["a"])(l,i,s,!1,null,null,null);e["a"]=c.exports},"7a3c":function(t,e,a){var i=a("6aec");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("15b82376",i,!0,{sourceMap:!1,shadowMode:!1})},"90d2":function(t,e,a){var i=a("0410");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("993efbe2",i,!0,{sourceMap:!1,shadowMode:!1})},a348:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"div#video_player_box{width:46%;background:#000;margin:11px;float:left;height:499px;margin-bottom:63px}div#video_controls_bar{background:#333;padding:10px;color:#ccc;position:absolute;bottom:0;width:100%}div#appTitle{position:absolute;top:0;left:0;right:0;width:100%;box-shadow:0 0 5px 1px #000;background-color:rgba(40,40,40,.85);font-weight:700;line-height:45px;border-bottom:1px solid #111;color:#fff}div#appTitle span#appName{padding-left:10px}div#appTitle span.sample{font-weight:400;font-size:smaller;font-style:italic}.axisLine line,.axisLine path{fill:none;stroke:#fff;shape-rendering:crispEdges}.axis{font:10px sans-serif;-webkit-user-select:none;-moz-user-select:none;user-select:none}.axis .domain{fill:none;stroke:#000;stroke-width:10px;stroke-linecap:round}.axis .halo{fill:none;stroke:#ddd;stroke-width:7.5px;stroke-linecap:round}.slider .handle{stroke:#111;stroke-opacity:.5;stroke-width:1.25px;pointer-events:none}.dIntroText{text-anchor:middle;fill:#282828;cursor:pointer}a.dIntroText{font-family:sans-serif;font-size:24px;text-decoration:inherit;color:#000}div#intro div *{font-family:sans-serif;font-size:13px;font-style:italic}.dDataDropZone{height:500px;float:right;margin:10px;border:3px solid #666;width:50%;opacity:1}.dDataDropZone svg{width:100%}.dDataDropZone.dropping{opacity:.3;box-shadow:inset 0 -15px 50px 50px #282828}div#chartGroup{position:absolute;width:720px;margin:0 auto;bottom:0;left:50%}svg.dataChart path.chartLine{fill:none;shape-rendering:auto;stroke:#000;stroke-width:1px}svg.dataChart circle.chartCircle{fill:#de2d26;stroke-width:1;stroke:#000}svg.dataChart text.chartCircleText{font:8pt sans-serif;fill:#de2d26;text-shadow:1px 1px 0 #000,0 1px 0 #000}svg.dataChart g.chartAxis text{font:8pt sans-serif;fill:#555}svg.dataChart g.chartAxis path{display:none}svg.dataChart g.chartAxis line{fill:none;stroke:#555;opacity:.4;shape-rendering:crispEdges}.slidecontainer{width:100%}.slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:11px;background:#d3d3d3;outline:none;width:80%;display:block;position:unset;margin-top:6px;margin-left:10px;margin-right:10px;float:left}.slider:hover{opacity:1}.slider:before{display:none!important}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.slider::-moz-range-thumb{width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.dDataDropZone{margin:inherit!important;width:65%!important}div#video_player_box{margin:inherit!important;margin-bottom:55px!important;width:35%!important}.map-botton{padding:10px 14px;border-radius:24px;position:absolute;right:0;margin:15px 16px 0 0;bottom:6px;z-index:999}",""]),t.exports=e},b56d:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".unclickable[data-v-d8fb8fc8]{pointer-events:none;cursor:disabled;opacity:.5}",""]),t.exports=e},b586:function(t,e,a){"use strict";a("5a15")},bfab:function(t,e,a){a("14d9"),d3.geo.tile=function(){var t=[960,500],e=256,a=[t[0]/2,t[1]/2],i=0;function s(){var s=Math.max(Math.log(e)/Math.LN2-8,0),o=Math.round(s+i),r=Math.pow(2,s-o+8),l=[(a[0]-e/2)/r,(a[1]-e/2)/r],n=[],c=d3.range(Math.max(0,Math.floor(-l[0])),Math.max(0,Math.ceil(t[0]/r-l[0]))),d=d3.range(Math.max(0,Math.floor(-l[1])),Math.max(0,Math.ceil(t[1]/r-l[1])));return d.forEach((function(t){c.forEach((function(e){n.push([e,t,o])}))})),n.translate=l,n.scale=r,n}return s.size=function(e){return arguments.length?(t=e,s):t},s.scale=function(t){return arguments.length?(e=t,s):e},s.translate=function(t){return arguments.length?(a=t,s):a},s.zoomDelta=function(t){return arguments.length?(i=+t,s):i},s}},c054:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("FollowUp")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closePopup()}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[e("div",{staticClass:"listing"},[t.followupList.length>0?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"folowuplist"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("ScheduleDate"))+" ")])]),e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Created BY")))])]),e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Comments"))+" ")])]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Action"))+" ")])])])]),e("tbody",t._l(t.followupList,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(t.SetScheduleDateTime(a.scheduleDate,a.time)))]),e("td",[t._v(t._s(a.createdBy))]),e("td",[t._v(t._s(a.followUpDescription))]),e("td",{staticClass:"text-center single-action"},[e("a",{class:{unclickable:!t.showEditButton(a)},attrs:{href:"javascript:;",title:t.$t("Edit")},on:{click:function(e){return t.openToAddEditFollowUp(a)}}},[e("em",{staticClass:"fa fa-pencil text-success"})])])])})),0)])]):t._e(),0==t.followupList.length?e("div",{staticClass:"text-center text-danger p-4 border no-record"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])]),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"col-lg-6 text-right p-0"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(e){return t.openToAddEditFollowUp(null)}}},[e("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("FollowUp")))])])])])])]),t.showAddEventModalForAddEdit?e("modaladdfollowup",{ref:"addEditFollowupModal",attrs:{followupListById:t.followupListById,followUpId:t.followUpId,sourceid:t.sourceId,ticketStatus:t.statustype},on:{close:function(e){t.showAddEventModalForAddEdit=!1}}}):t._e()],1)])},s=[],o=a("9769"),r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" Follow Up ")]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgTicketingFollowupAdd"))}})])])])]),"ticket_closed"!=t.ticketStatus&&"ticket_closedlocked"!=t.ticketStatus?e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.SaveFollowup}})],1):t._e()])])])])},l=[],n={props:{ticketStatus:{type:String,required:!0},sourceid:{Type:String,required:!0},followUpId:{Type:String,required:!0},followupListById:{Type:Array,required:!0}},data:function(){return{ScheduleDate:new Date,time:"",Comment:"",FormSchema:[{layoutType:"double",Data:[{astype:"DateField",label:this.$t("Date(M/D/YYYY)"),name:"Date",value:"",placeholder:"",config:{format:"MM/DD/YYYY",minDate:new Date,maxDate:!1},validationRules:{required:!0}},{astype:"DateField",label:this.$t("Time(hh:mm)"),name:"Time",value:"",placeholder:"",validationRules:{required:!0,max:100},config:{mode:"time",format:"hh:mm A"}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:"",validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created(){var t=this;t.edit()},methods:{SaveFollowup:function(){var t=this,e={ScheduleDate:t.$options.filters.formatDate(t.FormSchema[0].Data[0].value),time:t.$options.filters.formatTime(t.FormSchema[0].Data[1].value),FollowUpDescription:t.FormSchema[1].Data[0].value,ticketId:t.sourceid,FollowUpId:t.followUpId},a=JSON.stringify(e);o["a"].AddFollowUp(a).then(e=>{null!=e.data.msg?t.ShowAlert(e.data.msg,"failure",!0,t.$t("Alert")):null!=e.data.newId?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("FollowUp")]),"success",!0,t.$t("Alert")),t.$parent.loadFollowUpData(t.sourceid,t.ticketStatus),t.$emit("close")):t.ShowAlert(t.$t("AddedError",e.data.msg),"failure",!0,t.$t("Alert"))})},edit:function(){var t=this;function e(t){var e=t.split(/[\/\-]/);if(3===e.length){var a=parseInt(e[2],10),i=parseInt(e[1],10)-1,s=parseInt(e[0],10);return new Date(a,i,s)}return null}function a(t){var e=t.split(":");if(2===e.length){var a=parseInt(e[0],10),i=parseInt(e[1],10);return{hours:a,minutes:i}}return null}var i=e(t.followupListById.scheduleDate),s=a(t.followupListById.time);if(s&&"PM"===t.followupListById.time.split(" ")[1]&&s.hours<12&&(s.hours+=12),i&&s){var o=new Date(i.getFullYear(),i.getMonth(),i.getDate(),s.hours,s.minutes);t.FormSchema[1].Data[0].value=t.followupListById.followUpDescription,t.FormSchema[0].Data[0].value=new Date(t.followupListById.scheduleDate),t.FormSchema[0].Data[1].value=o}},Close:function(){this.$parent.showAddEventModalForAddEdit=!1}}},c=n,d=a("2877"),u=Object(d["a"])(c,r,l,!1,null,null,null),m=u.exports,p={components:{modaladdfollowup:m},props:{ticketStatus:{type:String,required:!0},ticketId:{Type:String,required:!0},userName:{type:String,required:!0}},data:function(){return{followupList:[],sourceId:null,listItem:null,statustype:null,result:!1,showAddEventModalForAddEdit:!1,followupListById:[],followUpId:null}},created:function(){this.sourceId=this.ticketId,this.loadFollowUpData(this.ticketId,this.ticketStatus)},methods:{SetScheduleDateTime:function(t,e){var a="",i=e.split(":"),s=parseInt(i[0]),o=parseInt(i[1]),r=s>=12?"PM":"AM";s%=12,s=s||12;var l=s<10?"0"+s:s,n=o<10?"0"+o:o;return a=t+" "+l+":"+n+" "+r,a},showEditButton:function(t){var e,a=this;return e=t.createdBy===a.userName,e},loadFollowUpData:function(t,e){if("undefined"!=typeof t&&null!=t&&""!=t){var a=this;a.statustype=e,a.sourceId=t,a.followupList=[];var i=`ticketId=${a.sourceId}&ticketStatus=${a.statustype}`;o["a"].FollowupList(i).then((function(t){""!=t.data&&null!=t.data&&t.data.length>0?a.followupList=t.data:a.followupList=[]}))}},closePopup:function(){this.$emit("closeFollowup")},openToAddEditFollowUp:function(t){var e=this;null!=t?(e.followUpId=t.followUpId,e.followupListById=t):(e.followUpId=t,e.followupListById=t),e.showAddEventModalForAddEdit=!0}}},h=p,f=(a("12f6"),Object(d["a"])(h,i,s,!1,null,"d8fb8fc8",null));e["a"]=f.exports},ceb7:function(t,e,a){"use strict";a("7a3c")},d961:function(t,e,a){var i=a("b56d");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("3fa94c4f",i,!0,{sourceMap:!1,shadowMode:!1})},df18:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("section",{staticClass:"main-content",attrs:{id:"main-content"}},[1==t.ticketType?e("section",{staticClass:"page-action"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 padding-t_8"},[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.TicketNumber))]),e("span",{staticClass:"p-actions float-md-right float-left mb-wid-100"},[t.ShowSLATime?e("h5",{staticClass:"Response-t px-3"},[t._v(t._s(t.$t("ResponseTime"))+":"),e("br"),e("span",{ref:"responseDisplay"},[t._v(t._s(t.ResponseTime))])]):t._e(),t.ShowSLATime?e("h5",{staticClass:"Resolve-t px-3"},[t._v(t._s(t.$t("ResolveTime"))+":"),e("br"),e("span",{ref:"resolveDisplay"},[t._v(t._s(t.ResolveTime))])]):t._e(),e("a",{staticClass:"e-c-map p-action-btn text-white align-items-center d-flex",attrs:{href:"javascript:;"},on:{click:t.ShowHideMap}},[e("i",{staticClass:"fa fa-angle-double-up pr-2",attrs:{id:"icnToggleMap"}}),e("span",{attrs:{id:"spnToggleMap"}},[t._v(t._s(t.mapHeaderText))])]),t._m(0)])])])])])]):t._e(),e("section",{staticClass:"main-content"},[e("div",{staticClass:"container-fluid padding-t_8"},[1==t.ticketType&&1==t.isShowMap?e("map-component",{staticClass:"row",attrs:{mapType:t.mapType,mapContainer:"detailMapDiv",Data:t.mapObj,config:t.config,UtilityMapData:t.UtilityMapData}}):t._e(),e("loader",{attrs:{"is-visible":t.isLoading}})],1),e("div",{staticClass:"container-fluid padding-t_10"},[e("div",{staticClass:"left-menu-tab",attrs:{id:"divTicketDataDetails"}},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white",staticStyle:{"font-size":"19px"}},[t._v(t._s(t.$t("Ticketing")))])])]),e("div",{staticClass:"w-100 float-left mt-2"},[e("div",{staticClass:"input-group font-weight-bold"},[e("div",{staticClass:"input-group-prepend w-100"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.userstatus,expression:"userstatus"}],staticClass:"form-control d-inline-block float-right",staticStyle:{"max-width":"350px","min-width":"100px"},attrs:{name:"ddlUserCurrentStatus",id:"ddlUserCurrentStatus"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.userstatus=e.target.multiple?a:a[0]},function(e){return t.UserCurrentStatus()}]}},[e("option",{attrs:{value:"Busy"}},[t._v(t._s(t.$t("Busy")))]),e("option",{attrs:{value:"Offline"}},[t._v(t._s(t.$t("offline")))]),e("option",{attrs:{value:"Online"}},[t._v(t._s(t.$t("online")))])])])])]),e("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab w-100 float-left",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active left-menu",attrs:{"data-toggle":"tab",id:"tab-ticketdetails",href:"#tab-ticket-content",role:"tab","aria-controls":"Activities","aria-selected":"false"},on:{click:function(e){return t.LoadTab("activities")}}},[e("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("Activities")))])]),"CL"!=t.UserType?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-notes-content",role:"tab","aria-controls":"Notes","aria-selected":"false",id:"tab-notes"},on:{click:function(e){return t.LoadTab("notes")}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Notes"))+" "),e("span",{attrs:{id:"spntotalticketnotes"}},[t._v(" "+t._s(t.TicketData.noOfNotes>0?"("+t.TicketData.noOfNotes+")":""))])])]):t._e(),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-attachment-content",role:"tab","aria-controls":"Attachments",id:"tab-attachment","aria-selected":"false"},on:{click:function(e){return t.LoadTab("attachments")}}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Attachments"))+" "),e("span",{attrs:{id:"spntotalticketattachment"}},[t._v(t._s(t.TicketData.attachmentsCount>0?"("+t.TicketData.attachmentsCount+")":""))])])]),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-relatedticket",href:"#tab-relatedticket-content",role:"tab","aria-controls":"RelatedTicket","aria-selected":"false"},on:{click:function(e){return t.LoadTab("relatedticket")}}},[e("em",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Related")+" "+t.$t("Ticket")))])]):t._e(),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-cliam",href:"#tab-cliam-content",role:"tab","aria-controls":"Claim","aria-selected":"false"},on:{click:function(e){return t.LoadTab("claims")}}},[e("em",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Claim"))),e("span",{attrs:{id:"spntotalticketclaim"}},[t._v(" "+t._s(t.TicketData.noOfClaims>0?"("+t.TicketData.noOfClaims+")":""))])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-call",href:"#tab-call-content",role:"tab","aria-controls":"TrackHistory","aria-selected":"false"},on:{click:function(e){return t.LoadTab("calls")}}},[e("em",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Call")+" "+t.$t("Details"))+" ")])]),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-trackhistory",href:"#tab-trackhistory-content",role:"tab","aria-controls":"TrackHistory","aria-selected":"false"},on:{click:function(e){return t.LoadTab("trackhistory")}}},[e("em",{staticClass:"fa fa-history",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Track")+" "+t.$t("History")))])]):t._e(),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-workorder",href:"#tab-workorder-content",role:"tab","aria-controls":"WorkOrder","aria-selected":"false"},on:{click:function(e){return t.LoadTab("workorder")}}},[e("em",{staticClass:"fa fa-circle-o-notch",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("WorkOrder")))])]):t._e()])]),e("div",{staticClass:"right-content"},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"col-lg-12 p-0",attrs:{id:"tabscontentTicketDetails"}},[e("div",{class:{"p-actions-collapse":t.isDisabledCollapse,"theme-primary partition p-actions-expand":!0}},[e("span",{staticClass:"float-left p-name text-white"},[t._v(t._s(t.TicketNumber))]),t.TicketData.isFieldServiceTicket?e("span",{staticClass:"badge badge-success",staticStyle:{padding:"7px 15px","margin-top":"8px","font-size":"16px","font-weight":"normal"}},[t._v("FSM")]):t._e(),t.TicketData.isFieldServiceTicket?t._e():e("span",{staticClass:"badge badge-primary",staticStyle:{padding:"7px 15px","margin-top":"8px","font-size":"16px","font-weight":"normal"}},[t._v("NORMAL")]),e("span",{staticClass:"p-actions float-right",attrs:{id:"tabscontent"}},[t.TicketData.isFieldServiceTicket?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white manageFollowup":!0},attrs:{href:"javascript:;",title:t.$t("AddWorkOrder")},on:{click:function(e){return t.AddWorkOrder()}}},[e("em",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("AddWorkOrder")))]):t._e(),"SA"==t.UserType||"CA"==t.UserType||"PM"==t.UserType||"NU"==t.UserType||"CL"==t.UserType?e("a",{class:{"p-action-btn text-white transfer":!0},attrs:{href:"javascript:;",id:"UpdateDetail",title:t.$t("Update")},on:{click:function(e){return t.UpdateTicket()}}},[e("em",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Update")))]):t._e(),"CA"==t.UserType||"SA"==t.UserType||"yes"==t.isTicketResolve||"yes"==t.isTicketHOD?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white transfer":!0},attrs:{href:"javascript:;",title:"Assign / Transfer"},on:{click:function(e){t.isShowTransferTicket=!0}}},[e("em",{staticClass:"fa fa-exchange",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Assign / Transfer")]):t._e(),t.TicketData.isFieldServiceTicket?t._e():e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white merge":!0},attrs:{href:"javascript:;",id:"MergeDetail",title:t.$t("Merge")},on:{click:function(e){t.isShowMergeTicket=!0}}},[e("em",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Merge")))]),e("span",{attrs:{id:"postReplyNote"}},[e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white reply":!0},attrs:{href:"javascript:;",title:t.$t("Reply")},on:{click:function(e){return t.openReplyModel()}}},[e("em",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Reply")))]),"CL"!=t.UserType?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white addnotes":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"Notes","aria-selected":"false",title:t.$t("AddNotes")},on:{click:function(e){t.isShowAddNote=!0}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("AddNotes")))]):t._e()]),"CL"!=t.UserType&&t.TicketData.isFieldServiceTicket?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white addattachment":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"Attachment","aria-selected":"false",title:"Add Attachment"},on:{click:function(e){return t.openAttachmentModel()}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Attachment")))]):t._e(),e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white claim":!0},attrs:{href:"javascript:;",title:t.$t("AddClaim")},on:{click:function(e){t.isShowAddClaim=!0}}},[e("em",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("AddClaim")))]),t.TicketData.chainId>0?e("a",{staticClass:"p-action-btn text-white esclatehs",attrs:{href:"javascript:;",title:t.$t("Esclate")},on:{click:function(e){return t.openEscalatePopUp()}}},[e("em",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Esclate")))]):t._e(),t.TicketData.followUpId&&!t.TicketData.isFieldServiceTicket?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white manageFollowup":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"ManageFollowUp","aria-selected":"false",title:t.$t("ClickHereToEditFollowUp")},on:{click:function(e){t.isshowFolloupList=!0}}},[e("em",{staticClass:"fa fa-flag ml-2 flag-color",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("FollowUp")))]):t._e(),t.TicketData.followUpId||t.TicketData.isFieldServiceTicket?t._e():e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white manageFollowup":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"ManageFollowUp","aria-selected":"false",title:t.$t("ClickHereToEditFollowUp")},on:{click:function(e){t.isshowFolloupList=!0}}},[e("em",{staticClass:"fa fa-flag ml-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("FollowUp")))]),t.TicketData.isFieldServiceTicket?t._e():e("RouterLink",{staticClass:"p-action-btn text-white d-none d-md-inline-block",attrs:{href:"javascript:;",to:"/Ticketing/Index",title:t.$t("BacktoList")}},[e("em",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("BacktoList"))+" ")]),t.TicketData.isFieldServiceTicket&&"Edit"!==t.AddEditText&&"yes"===t.ShowWorkOrderTimer?e("a",{staticClass:"p-action-btn text-white",class:{disabled:t.isDisabledHeaderButton,"d-none":"no"==t.ShowWorkOrderTimer},attrs:{href:"javascript:;",title:t.$t("StartTimer"),id:"StartTimer"},on:{click:function(e){return t.openStartPopUp()}}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("StartTimer")))]):t._e(),t.TicketData.isFieldServiceTicket&&"Edit"===t.AddEditText&&"yes"===t.ShowWorkOrderTimer?e("a",{staticClass:"p-action-btn text-white",class:{disabled:t.isDisabledHeaderButton,"d-none":"no"==t.ShowWorkOrderTimer},attrs:{href:"javascript:;",title:t.$t("StopTimer"),id:"StopTimer"},on:{click:function(e){return t.openStopPopUp()}}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("StopTimer")))]):t._e(),!t.isShowWorkList&&t.isShowWorkOrder?e("a",{staticClass:"p-action-btn text-white",attrs:{title:"List View"},on:{click:function(e){return t.changeWorkOrderView("List")}}},[e("em",{staticClass:"fa fa-th-list",attrs:{"aria-hidden":"true"}}),e("br"),t._v("List View")]):t._e(),t.isShowWorkList&&t.isShowWorkOrder?e("a",{staticClass:"p-action-btn text-white",attrs:{title:"CARD View"},on:{click:function(e){return t.changeWorkOrderView("Card")}}},[e("em",{staticClass:"fa fa-th-large",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Card View")]):t._e(),"Ticketing"==t.SourcePage?e("RouterLink",{staticClass:"p-action-btn text-white d-none d-md-inline-block",attrs:{href:"javascript:;",to:"/Ticketing/Index",title:t.$t("BacktoList")}},[e("em",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("BacktoList"))+" ")]):"PendingAcceptance"==t.SourcePage?e("RouterLink",{staticClass:"p-action-btn text-white d-none d-md-inline-block",attrs:{href:"javascript:;",to:"/Ticketing/PendingAcceptance",title:t.$t("BacktoList")}},[e("em",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("BacktoList"))+" ")]):t._e()],1),e("span",{staticClass:"collapse-head-btns",on:{click:function(e){return t.toggleCollapse()}}},[t._m(1)])]),e("div",{staticClass:"bg-secondary text-white p-2 d-block d-md-none"},[t._v(t._s(t.TicketNumber))]),e("div",{staticClass:"clearfix"})]),e("div",{class:{listing:!0},attrs:{id:"divticketdetaildleftpanel"}},[e("div",{attrs:{id:"divDetails"}},[t.isShowTicketDetail?e("ticketdetails",{attrs:{TicketId:t.TicketId,ListOfCCUsers:t.ListOfCCUsers,TicketDetailDataForPopup:t.TicketDetailDataForPopup,TicketData:t.TicketData}}):t._e()],1),t.isShowTicketConclusion&&t.isShowConclusionForm?e("div",{staticClass:"border p-3 mb-3"},[e("div",{attrs:{id:"frmConclusionAdd"}},[e("PartialTicketConclusion",{key:t.refreshKey,attrs:{TicketId:t.TicketId,IsConclusionSave:t.IsConclusionSave,TicketData:t.TicketData,FormConclusionData:t.FormConclusionData}})],1)]):t._e(),t.isShowTicketFeedback?e("div",{staticClass:"border p-3 mb-3"},[e("div",{attrs:{id:"frmConclusionAdd"}},[e("PartialTicketFeedback",{key:t.refreshKey,attrs:{TicketId:t.ticketIdField,TicketStatus:t.ticketStatusRecord,departmentId:t.ticketDepartmentId}})],1)]):t._e(),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"listing tab-content"},[t.isShowActivities?e("div",{staticClass:"col-12 d-flex border border-bottom-0 bg-f5f5f5",attrs:{id:"divconversationbox"}},[e("div",{staticClass:"col-md-6 pl-0"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(" "+t._s(t.$t("Activities"))+" ")])]),e("div",{staticClass:"col-md-6 text-right pr-0 bottom_filter_button"},[e("a",{staticClass:"position-relative",staticStyle:{"z-index":"999"},attrs:{href:"javascript:;",id:"ancreplyExpandAllCollapseAll",title:t.$t("ExpandAllCollapseAll"),"data-toggle-tooltip":"tooltip"},on:{click:function(e){return t.ancreplyExpandAllCollapseAll()}}},[t._v(t._s(t.$t("ExpandAllCollapseAll")))])])]):t._e(),e("div",{staticClass:"tab-pane fade show activity-tab active pt-3",attrs:{id:"tab-ticket-content",role:"tabpanel","aria-labelledby":"Activities-tab"}},[e("div",{staticClass:"d-md-inline-block w-100"},[e("div",{staticClass:"merged-ticket",staticStyle:{display:"none"}},[e("div",{staticClass:"merged-ticket-header"},[t._v(t._s(t.$t("MergedTickets")))]),e("div",{staticClass:"merged-ticket-content"})]),e("div",{staticClass:"cont_100P",attrs:{id:"divloadticketdata"}}),t.isShowActivities?e("ThreadsList",{attrs:{TicketThreads:t.TicketThreadsData}}):t._e(),e("div",{staticClass:"cont_100P",attrs:{id:"divSplitConversationBox"}})],1)]),"CL"!=t.UserType?e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-notes-content",role:"tabpanel","aria-labelledby":"Notes-tab"}},[e("div",{staticClass:"pb-2",attrs:{id:"div_NotesLabel"}},[e("span",{staticClass:"legend-Progress colorboxsquare"}),t._v(t._s(t.$t("Private"))+" "),e("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),t._v(t._s(t.$t("Public"))+" ")]),t.isShowNotes?e("TicketNotes",{attrs:{NoteData:t.NoteData}}):t._e()],1):t._e(),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-attachment-content",role:"tabpanel","aria-labelledby":"Attachment-tab"}},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxFile"}}),e("div",{staticClass:"listing pt-1"},[e("TicketAttachment",{attrs:{AttachmentData:t.AttachmentData,ListViewAttachment:"1",viewMode:"AttachmentInDetail"},on:{"open-image":t.openSpecificImage}})],1)]),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-cliam-content"}},[t.isShowClaims?e("TicketClaim",{key:t.refreshKey,attrs:{ClaimData:t.ClaimData},on:{GetClaimData:t.GetClaimData}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-call-content"}},[t.isShowCalls?e("TicketCalls",{attrs:{CallData:t.CallData}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-relatedticket-content"}},[t.isShowRelatedticket?e("RelatedTicketList",{attrs:{ticketId:t.TicketId}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-trackhistory-content"}},[t.isShowTrackHistory?e("TrackHistoryList",{attrs:{ticketId:t.TicketId}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-workorder-content"}},[t.isShowWorkList&&t.isShowWorkOrder?e("WorkOrderList",{attrs:{isLocateorNonLocate:t.isLocateorNonLocate,ticketId:t.TicketId,callbackfunction:t.FetchData}}):t._e(),!t.isShowWorkList&&t.isShowWorkOrder?e("WorkOrderCardView",{attrs:{isLocateorNonLocate:t.isLocateorNonLocate,ticketId:t.TicketId,callbackfunction:t.FetchData}}):t._e()],1)])])]),t.visible?e("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:t.galleryImages,customClasses:t.lightboxClasses},on:{close:function(e){t.visible=!1}}}):t._e()],1)])]),t.isshowFolloupList?e("FollowUp",{attrs:{ticketStatus:"",ticketId:t.TicketId,userName:t.userName},on:{closeFollowup:function(e){t.isshowFolloupList=!1}}}):t._e(),t.isShowAddNote?e("AddNoteData",{attrs:{id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Notes",callbackfunction:t.GetNoteData,configdata:t.ConfigData,HeaderName:t.$t("AddNotes")}}):t._e(),t.showReplyTicketModal&&"Draft"!=t.Status_id?e("modalReplyTicketpopup",{attrs:{id:t.TicketId,callbackfunction:t.FetchData,configdata:t.ConfigData,modulename:"Ticketing",submodulecode:"Ticketing"},on:{close:function(e){t.showReplyTicketModal=!1}}}):t._e(),t.isShowEscalate?e("AddEscalatePopUp",{attrs:{ticketId:t.TicketId,ParentCompanyId:t.ParentCompanyId,ParentCompanyName:t.ParentCompanyName},on:{close:function(e){t.isShowEscalate=!1}}}):t._e(),t.showAttachmentModal?e("ShowAttachmentData",{attrs:{id:t.TicketId,viewMode:"Attachments",callbackfunction:t.GetAttachmentData,modulename:"Ticketing",configdata:t.ConfigData,submodulecode:"Ticketing"},on:{close:function(e){t.showAttachmentModal=!1}}},[e("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Attachments")))])]):t._e(),t.isShowAddClaim?e("AddClaimData",{key:t.refreshKey,attrs:{id:t.TicketId,FormClaimData:t.FormClaimData,claimId:t.TicketData.claimId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Claims",callbackfunction:t.GetClaimData,configdata:t.ConfigData,HeaderName:t.$t("AddClaim")},on:{GetClaimData:t.GetClaimData}}):t._e(),t.isShowTicketUpdate&&"Draft"!=t.Status_id?e("ticketupdate",{attrs:{TicketId:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.FetchData},on:{close:function(e){t.isShowTicketUpdate=!1}}}):t._e(),t.isShowTransferTicket&&"Draft"!=t.Status_id?e("transfertickets",{attrs:{TicketId:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",IsSupportTicket:t.TicketData.isSupportTicket,DisallowedFileType:t.TicketData.disallowedFileTypes,callbackfunction:t.FetchData},on:{close:function(e){t.isShowTransferTicket=!1}}}):t._e(),t.isShowMergeTicket?e("MergeTicketData",{attrs:{str_ticket_id:t.str_ticket_id,id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.FetchData}}):t._e(),t.isShowWOTimer?e("WorkOrderTimerPopup",{attrs:{id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Timer",callbackfunction:t.FetchData}}):t._e(),t.AddWorkOrderModal&&"Draft"!=t.Status_id?e("AddWorkOrderModal"):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("a",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{href:"/Ticketing/Index",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left"}),e("br"),t._v("Back to list")])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[e("em",{staticClass:"fa fa-angle-up text-white"})])}],o=(a("14d9"),a("9769")),r=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"col-lg-12 mb-2 mt-2 p-0",attrs:{id:"week-stat"}},[t._m(0),e("div",{staticClass:"border eqcol h-100 pt-0 px-3 pb-3"},[e("div",{staticClass:"updatefull-widg"},[e("div",{staticClass:"row border-bottom bg-f5f5f5 mb-2"},[e("div",{staticClass:"col-md-6"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(" "+t._s(t.$t("Raised")+" "+t.$t("By"))+": "),t.TicketData.createdBy==t.GetUserInfo.ID&&"CL"==t.UserType?[e("span",{staticClass:"blue-time"},[t._v(t._s(t.TicketData.raisedBy))]),t._v(t._s(t.$t("You"))+" ")]:[e("span",{staticClass:"blue-time"},[t._v(t._s(t.TicketData.raisedBy))]),4==t.TicketData.createdUserTypeId?[t._v(" "+t._s(t.$t("Client"))+" ")]:[t._v(" ("+t._s(t.TicketData.departmentName.DEPT_NAME)+") ")]]],2)]),e("div",{staticClass:"col-md-6 text-right"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(t._s(t.$t("AssignedTo"))+": "),e("span",{staticClass:"blue-time"},[t._v(t._s(null==t.TicketData.assignedTo?t.$t("NotAssigned"):t.TicketData.assignedTo)+" ")]),t._v(" ("+t._s(1==t.isBlank(t.TicketData.ticketDepartmentId)?"":t.TicketData.ticketDepartmentId)+") ")])])]),e("div",{staticClass:"row pt-1 px-3"},[e("div",{staticClass:"col-lg-6 p-0"},[e("h2",{staticClass:"time_info"},[t._v(" "+t._s(t.TicketData.ticketSubject)+" "),e("span",{class:t.getStatusClass(t.TicketData.status,"status_name","fsm"),staticStyle:{"font-size":"16px",display:"inline !important"}},[t._v(" "+t._s(t.TicketData.status)+" ")])]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Category"))+":")]),t._v(" "+t._s(""==t.$t(t.TicketData.ticketCategoryName)?"--":t.$t(t.TicketData.ticketCategoryName))+" ")]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Priority"))+": ")]),"Critical"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white critical-color",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"Medium"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-blue",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"High"==t.TicketData.priority||"Highest"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-orange",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"Low"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-green",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):e("span",{staticClass:"Timer d-inline text-white noti-blue",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])])]),e("p",{staticClass:"mb-1 float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("OpenDate"))+": ")]),t._v(t._s(t.$options.filters.formatDateTime(t.TicketData.createdAt)))]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Expected_Resolution"))+": ")]),t._v(" "+t._s(null==t.TicketData.expectedResolutionDate?"--":t.$options.filters.formatDate(t.TicketData.expectedResolutionDate))+" ")])])]),e("div",{staticClass:"mb-1 col-12 p-0"},[""===t.ListOfCCUsers?e("b",[t._v(t._s(t.$t("CCuppercase"))+": --")]):t._e(),""!==t.ListOfCCUsers?e("b",[t._v(t._s(t.$t("CCuppercase"))+": "+t._s(t.ListOfCCUsers))]):t._e()]),e("div",{staticClass:"ticketShortDesciption mb-2 mt-2"},[e("div",{staticClass:"addednote-ticket-content"},[e("div",{staticClass:"col-12 p-0",attrs:{id:"divlessdata"}},[e("div",{staticClass:"readmore textelipsis_inner"},[e("div",[e("b",[t._v(" "+t._s(t.$t("Description"))+": ")]),e("span",{domProps:{innerHTML:t._s(t.TruncateStr(t.TicketData.description,185))}})])])]),e("div",{staticClass:"col-12 p-0",staticStyle:{display:"none","pointer-events":"none"},attrs:{id:"divshowmoredata"}},[e("div",{staticClass:"readmore"},[e("div",[e("b",[t._v(" "+t._s(t.$t("Description"))+": ")]),e("span",{domProps:{innerHTML:t._s(t.TicketData.description)}})])])]),0==t.TicketData.isFieldServiceTicket&&t.isBlank(t.TicketData.external_ticket_number)?e("a",{staticClass:"lessmoredesc ancreadmoredesc",attrs:{href:"javascript:;"},on:{click:t.showTicketDetail}},[t._v(t._s(t.$t("readmore")))]):t._e(),1!=t.TicketData.isFieldServiceTicket||t.isBlank(t.TicketData.external_ticket_number)?1==t.TicketData.isFieldServiceTicket&&t.isBlank(t.TicketData.external_ticket_number)?e("a",{staticClass:"lessmoredesc ancreadmoredesc",attrs:{href:"javascript:;"},on:{click:t.showTicketDetail}},[t._v(t._s(t.$t("readmore")))]):t._e():e("a",{staticClass:"lessmoredesc ancreadmoredesc",attrs:{href:"javascript:;"},on:{click:t.openTicketTextTab}},[t._v(t._s(t.$t("readmore")))]),e("div",{staticClass:"addednote-ticket-content readmoredesc",staticStyle:{display:"none"}},[e("a",{staticClass:"anclessmoredesc",attrs:{href:"javascript:;"}},[t._v(" "+t._s(t.$t("Read")+" "+t.$t("Less"))+" ")])])])])]),e("div",{staticClass:"communication"}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 d-flex"},[e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("Call"))+": "),t._m(1)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("VideoCall"))+": "),t._m(2)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("SMS"))+": "),t._m(3)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("Chat"))+": "),t._m(4)])])])])]),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.isMoreTicketDetail?e("div",{staticClass:"modal d-block dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[t.isTicketDetail?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TicketDetails")))]):t._e(),t.isTicketText?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TicketText")))]):t._e(),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"cardv-body float-left pt-0 border col-12 float-left p-1"},[e("div",{staticClass:"card-text evemgmt_details"},[t.isTicketDetail?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left panel1 mb-0 p-0",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[t._l(t.LeftViewData,(function(a){return["YES"==a.form_field_visibility&&"Attachment"!==a.group_name&&"Recurring"!==a.group_name?e("p",{staticClass:"px-2 w-50 float-left"},[e("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),e("span",{staticClass:"pl-1 font-weight-bold"},[t._v(t._s(t.GetLocalizedValue(a.name,a.display_name))+": ")]),"status_id"!=a.name&&null!=a.value?e("span",{domProps:{innerHTML:t._s(a.value)}}):"cc_users"!=a.name&&null==a.value?e("span",[t._v("--")]):t._e(),"status_id"==a.name?e("span",{class:{"bg-secondary text-center px-2 text-white":!0,"bg-success":"Open"==a.value,"bg-danger":"Closed"==a.value||"Cancelled"==a.value||"Closed and Locked"==a.value,"bg-warning":"Draft"==a.value}},[t._v(t._s(a.value))]):t._e(),"cc_users"==a.name?e("span",[t._v(t._s(t.ListOfCCUsers))]):t._e()]):t._e()]}))],2):t._e(),t.isTicketText?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left panel1 mb-0 p-0",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[t.isBlank(t.TicketTextDetail)?t._e():e("pre",{domProps:{innerHTML:t._s(t.TicketTextDetail)}}),t.isBlank(t.TicketTextDetail)?t._e():e("div",{staticClass:"col-12 text-center text-danger"},[t._v(" "+t._s(t.$t("NoRecordfound")))])]):t._e()])])])])])]):t._e()],1)])],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"expand-list"},[e("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[e("i",{staticClass:"icon-solid arrow-solid-left",staticStyle:{"font-size":"9pt"}})])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"voicecall",attrs:{href:"javascript:;",id:"call",title:"Call"}},[e("i",{staticClass:"fa fa-phone call-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"videocall",attrs:{href:"javascript:;",id:"videocall",title:"Video Call"}},[e("i",{staticClass:"fa fa-video-camera video-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"sendsms",attrs:{href:"javascript:;",id:"sms",title:"Send SMS"}},[e("i",{staticClass:"fa fa-commenting sms-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"chat",attrs:{href:"javascript:;",id:"chat",title:"Chat"}},[e("i",{staticClass:"fa fa-comments chat-color"})])}],n={props:{TicketId:{type:Number,required:!1},TicketData:{type:Object,required:!0},TicketDetailDataForPopup:{type:Array,required:!0},ListOfCCUsers:{type:String,required:!0}},data(){return{UserType:null,isMoreTicketDetail:!1,TicketTextDetail:"",isTicketText:!1,isTicketDetail:!1,LeftViewData:[],isLoading:!1}},created(){var t=this;t.UserType=t.GetUserInfo.UserType},methods:{Close:function(){var t=this;t.isMoreTicketDetail=!1},showTicketDetail:function(){var t=this;t.isMoreTicketDetail=!0,t.isTicketDetail=!0,t.isTicketText=!1,t.LeftViewData=t.TicketDetailDataForPopup},openTicketTextTab:function(){var t=this;t.isMoreTicketDetail=!0,t.isTicketText=!0,t.isTicketDetail=!1;var e=`TicketId=${this.TicketId}&formId=`;o["a"].GetTicketText(e).then((function(e){null!=e.data&&"Success"==e.data.status&&(t.TicketTextDetail=e.data.result.DATA[0].TICKETTEXT)}))}}},c=n,d=a("2877"),u=Object(d["a"])(c,r,l,!1,null,null,null),m=u.exports,p=a("1788"),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Escalate")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-TicketEscalateType",fn:function({data:a}){return[t.ParentCompanyId>0?e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"form-check-input rdoTicketEsclateType",attrs:{type:"radio",id:"TicketEsclateType",name:"TicketEsclateType",value:"0"},domProps:{checked:t._q(t.selectedValue,"0")},on:{change:function(e){t.selectedValue="0"}}}),e("label",{staticClass:"mb-0"},[t._v(" "+t._s(t.$t("With In Company"))+" ")])]):t._e(),t.ParentCompanyId>0?e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"form-check-input rdoTicketEsclateType",attrs:{type:"radio",id:"TicketEsclateType",name:"TicketEsclateType",value:"1"},domProps:{checked:t._q(t.selectedValue,"1")},on:{click:t.showDepartmentDropdown,change:function(e){t.selectedValue="1"}}}),e("label",{staticClass:"mb-0"},[t._v(" "+t._s(t.$t("Parent Company(R.LAW)"))+" ")])]):t._e(),e("div",[e("input",{attrs:{type:"hidden",name:"TicketEsclateType",id:"TicketEsclateType",value:"0"}})])]}}])})],1)])])])],1)},f=[],v={props:{ParentCompanyId:{type:String,required:!0},ticketId:{Type:Number,required:!0},ParentCompanyName:{Type:String,required:!0}},data(){return{isLoading:!1,TicketId:null,FormSchema:[{layoutType:"double",Data:[{astype:"slotField",label:this.$t("Escalate To"),name:"TicketEscalateType",value:"",config:{options:[]},placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Department Name"),name:"Department",value:"",visibility:!1,config:{options:[]},placeholder:this.$t("Select Department"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Reason"),name:"Reason",value:"",placeholder:"",validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.GetDepartmentListbyCompanyForClient()},methods:{showDepartmentDropdown(){var t=this;t.FormSchema[0].Data[1].visibility=!0},Close:function(){this.$parent.isShowEscalate=!1},GetDepartmentListbyCompanyForClient:async function(){var t=this;await o["a"].GetDepartmentListbyCompanyForClient().then(async e=>{e.data.length>0&&(t.DepartmentList=e.data,t.DepartmentList.forEach((e,a)=>{t.FormSchema[0].Data[1].config.options.push({value:e.departmenT_ID,name:e.departmenT_NAME})}))})},onSubmit(t,e){var a=this,i={TicketId:a.ticketId,TicketGroupId:0,TicketEsclateId:0,TicketEsclateReason:a.FormSchema[1].Data[0].value,TicketEsclateType:this.selectedValue,ParentCompanyId:a.ParentCompanyId,TicketEsclateDepartment:a.FormSchema[0].Data[1].value,TicketbBoardStatus:"Escalate"},s=JSON.stringify(i);o["a"].SaveTicketEsclate(s).then(t=>{"Success"==t.data.status?(t.data.result.TICKETESCALATE_ID>0?(a.ShowAlert(a.$t("Ticket is escalated successfully."),"success",!0,a.$t("Alert")),a.Close()):null==t.data.result.TICKETESCALATE_ID||""==t.data.result.TICKETESCALATE_ID?a.ShowAlert(a.$t("Next Higher Level Doesn't Exist."),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("Escalated Can't Saved."),"failure",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},C=v,T=Object(d["a"])(C,h,f,!1,null,null,null),S=T.exports,_=a("5774"),g=a("0c69"),k=a("fc96"),y=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"row card-view no-bg custom-box-width",attrs:{id:"divclaimattch"}},[t._l(t.ClaimList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3",attrs:{id:"trclaimList_"+a.claimId}},[e("div",{staticClass:"card-box blue-bg-light"},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[e("img",{attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.createdByDepartmentName?a.createdByDepartmentName:"--")+" ")]),e("div",{staticClass:"card-detail-main1"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.createdByName))])]),e("p",[t._v(t._s(t.$t("ClaimValue"))+": "),e("span",{domProps:{innerHTML:t._s(a.claimValue)}})]),e("hr",{staticClass:"my-2"}),a.approvedClaimAmount>0?e("span",{staticClass:"ticket-priority greentxt"},[t._v(t._s(t.$t("ApprovedClaimAmount")+" "+a.approvedClaimAmount))]):t._e(),e("div",{staticClass:"commentnoteslist w-100",staticStyle:{"max-height":"150px","overflow-y":"auto"}},[e("div",{staticClass:"custom-scrollbar-js",domProps:{innerHTML:t._s(a.claimNotes)}})]),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("div",[a.claimId>0&&a.attachmentsCount>0?e("div",{class:"ifattachmentviss-cont d-none "+a.claimId},[e("div",{staticClass:"attachments",attrs:{"data-ClaimId":a.claimId}})]):t._e()]):t._e(),1001==a.statusId?e("div",[e("div",{directives:[{name:"i",rawName:"v-i",value:a.claimId>0&&a.attachmentsCount>0,expression:"item.claimId > 0 && item.attachmentsCount > 0"}],class:"ifattachmentviss-cont d-none "+a.claimId},[e("div",{staticClass:"attachments",attrs:{"data-ClaimId":a.claimId}})])]):t._e()]),a.arComments?e("div",[a.approvedClaimAmount>0?e("div",[e("hr",{staticClass:"my-2"}),e("a",{staticClass:"fontlinkblue showCliamARComment approved-reject-cmnt",attrs:{href:"javascript:;","data-claimId":a.claimId,title:t.$t("ApprovedClaimComment")},on:{click:function(e){t.isShowingApprove=!t.isShowingApprove}}},[t._v(" "+t._s(t.$t("ApprovedClaimComment"))+" ")])]):e("div",[e("hr",{staticClass:"my-2"}),e("a",{staticClass:"fontlinkblue showCliamARComment approved-reject-cmnt",attrs:{href:"javascript:;","data-claimId":a.claimId,title:t.$t("RejectClaimComment")},on:{click:function(e){t.isShowingApprove=!t.isShowingApprove}}},[t._v(" "+t._s(t.$t("RejectClaimComment"))+" ")])]),e("div",{staticStyle:{clear:"both"}}),t.isShowingApprove?e("div",{staticClass:"commentlist",staticStyle:{"max-height":"260px","margin-bottom":"50px"}},[e("div",{staticClass:"custom-scrollbar-js",domProps:{innerHTML:t._s(a.arComments)}})]):t._e()]):t._e(),e("div",{staticClass:"bottom-action",staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.createdAt?t.$options.filters.formatDateTime(a.createdAt):"--"))])]),e("div",{staticClass:"card-action"},[a.claimId>0&&a.attachmentsCount>0&&1001==a.statusId?e("a",{staticClass:"anchrAttachmentsclaim round-icon-small btn-info-light",attrs:{href:"javascript:;","data-ClaimId":a.claimId},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-paperclip text-white p-2"})]):t._e(),1!=t.isTicketHod&&!t.IsDefault||1001!=a.statusId?t._e():e("a",{staticClass:"approveClaim round-icon-small btn-success-light",staticStyle:{cursor:"pointer"},attrs:{checkprivilege:"Yes",title:t.$t("Approve"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.ApproveTicketClaim(a,"A")}}},[e("em",{staticClass:"fa fa-thumbs-up text-white"})]),1!=t.isTicketHod&&!t.IsDefault||1001!=a.statusId?t._e():e("a",{staticClass:"rejectClaim round-icon-small btn-danger-light",staticStyle:{cursor:"pointer"},attrs:{checkprivilege:"Yes",title:t.$t("Reject"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.ApproveTicketClaim(a,"R")}}},[e("em",{staticClass:"fa fa-thumbs-down text-white"})]),a.claimId>0&&a.attachmentsCount>0&&a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"anchrAttachmentsclaim round-icon-small btn-info-light",attrs:{href:"javascript:;","data-ClaimId":a.claimId}},[e("em",{staticClass:"fa fa-paperclip text-white p-2"})]):t._e(),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"editTicketClaim round-icon-small btn-success-light",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:;",title:t.$t("Edit"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.EditTicketClaim(a)}}},[e("em",{staticClass:"fa fa-pencil"})]):t._e(),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"clsdeleteticketclaim round-icon-small btn-danger-light",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:;",title:t.$t("Delete"),"data-ClaimId":a.claimId,value:a.ticketId},on:{click:function(e){return t.DeleteTicketClaim(a)}}},[e("em",{staticClass:"fa fa-trash-o"})]):t._e()])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2),t.isShowAddClaim?e("AddClaimData",{attrs:{id:t.ticketId,claimId:t.claimId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.GetClaimData,HeaderName:t.$t("AddClaim")}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.approveTicketClaim?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[t.isApproveTitle?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Approve")+" "+t.$t("Ticket")+" "+t.$t("Claim")))]):t._e(),t.isRejectTitle?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Reject")+" "+t.$t("Ticket")+" "+t.$t("Claim")))]):t._e(),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.approveBtn,schema:t.approveFormSchema},on:{OnSubmit:t.SaveApproveTicketClaim},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}],null,!1,2349768450)})],1)])])]):t._e()],1)])],1)},b=[],D=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Claim")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddTicketClaim"))}})])])])]),e("div",{staticClass:"modal-body"},[e("Form",{ref:"AddClaimModal"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)],1)])])])],1)])},A=[],I=(a("b7ef"),a("d91b"),{props:{id:{type:Number,required:!1},configdata:{type:Array,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},claimId:{type:Number,required:!1},viewMode:{type:String,required:!0},FormClaimData:{type:Number,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",ClaimAmount:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,file:null,ClaimTicketModel:{ClaimNote:"",ClaimValue:"",TicketId:0,ModuleName:"",SubModuleCode:"",fileData:[],IsDraft:"",ClaimId:0},FormSchema:[{layoutType:"single",Data:[{astype:"NumericField",label:this.$t("Claim Amount"),name:"ClaimAmount",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"SlotField",label:this.$t("Claim Note"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:5e3}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-warning save",value:"Y",text:"<i class='fa fa-save pr-2'></i>Save As Draft",onClick:this.UploadFileWithClaim},{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit",onClick:this.UploadFileWithClaim},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;this.configData(),(t.$parent.ticketId>0||t.FormClaimData[0].TicketId>0)&&this.FetchData()},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,a){"TicketFileSize"==a.CORE_CONFIG_KEY?(this.allowedPerFileSizeInMb=a.CONFIG_DATA_VALUE,this.FormSchema[1].Data[0].config.maxSize=this.allowedPerFileSizeInMb):"TicketDisallowedFileTypes"==a.CORE_CONFIG_KEY&&(this.disallowFileTypes=a.CONFIG_DATA_VALUE,this.fileTypeList=this.AttachmentDisallowedFileType(this.disallowFileTypes),e.FormSchema[1].Data[0].config.reject=this.fileTypeList)}),this))},FetchData:async function(){var t=this;t.isLoading=!0;var e=0,a=0;null!=t.$parent.ticketId||void 0!=t.$parent.ticketId?(e=t.$parent.ticketId,a=t.$parent.claimId,t.ClaimId=t.$parent.claimId):(e=t.FormClaimData[0].TicketId,a=t.FormClaimData[0].ClaimId,t.ClaimId=t.FormClaimData[0].ClaimId);var i=`ticketId=${e}&claimId=${a}&isHod=`;await o["a"].TicketClaimList(i).then((function(e){t.isLoading=!1,null!=e.data&&""!=e.data&&(t.FormSchema[0].Data[0].value=e.data.claim[0].claimValue,t.FormSchema[0].Data[1].value=e.data.claim[0].claimNotes)}))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),l=o.substring(r+1,o.length);e.fileExt+="."+l;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithClaim:function(t){var e=this;"Y"==t.value&&(e.ClaimTicketModel.IsDraft="Y"),e.$refs.AddClaimModal.validate().then(t=>{if(t){e.buttons[0].class+=" disabled",e.buttons[1].class+=" disabled",e.ClaimTicketModel.ClaimId=e.ClaimId,e.ClaimTicketModel.ClaimValue=e._data.FormSchema[0].Data[0].value,e.ClaimTicketModel.ClaimNote=e._data.FormSchema[0].Data[1].value,e.ClaimTicketModel.TicketId=0==e.id||null==e.id?e.TicketNoteId:e.id,e.ClaimTicketModel.ModuleName=e.modulename,e.ClaimTicketModel.SubModuleCode=e.submodulecode,e.ClaimTicketModel.fileData=e.fileData;var a=JSON.stringify(e.ClaimTicketModel);o["a"].AddClaim(a).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(e.ClaimId>0?e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Claim")]),"success",!0,e.$t("Alert")):e.ShowAlert(e.$t("AddedSuccess",[e.$t("Claim")]),"success",!0,e.$t("Alert")),$("input[type=text]").val(""),e.$parent.GetClaimData(),e.Close()):(e.FileSrc="",$("input[type=text]").val(""))}catch(a){return HandleErrorOccured(a,"saveClaim")}})}})},Close:function(){var t=this;t.FormSchema[0].Data[0].value=null,t.FormSchema[0].Data[1].value=null,t.FileName=null,t.file=null,t.FormSchema[1].Data[0].config.onChange=this.GetBase64String,t.$parent.isShowAddClaim=!1,"Claims"==t.viewMode&&document.getElementById("tab-cliam").click()}}}),w=I,F=Object(d["a"])(w,D,A,!1,null,null,null),E=F.exports,L={components:{AddClaimData:E},props:{ClaimData:{type:Array,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",UserId:null,ClaimList:[],NoRecords:!1,isLoading:!1,ClaimAmount:"",btnType:"",confirmMsg:"",successMsg:"",Description:null,approveTicketClaim:!1,isShowingApprove:!0,isApproveTitle:!1,isTicketHod:0,IsDefault:!1,isShowAddClaim:!1,ApproveClaimTicketModel:{ClaimNote:"",ClaimValue:"",TicketId:0,ClaimId:0,Type:""},approveFormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Amount (USD)"),name:"ClaimAmount",value:"",placeholder:"",validationRules:{required:!0,max:200},visibility:!1},{astype:"SlotField",label:this.$t("Claim Note"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],approveBtn:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-thumbs-up pr-2'></i>Approve",isVisible:!1},{type:"submit",class:"btn btn-danger save",text:"<i class='fa fa-thumbs-down pr-2'></i>Reject",isVisible:!1}]}},created(){var t=this;t.UserId=t.GetUserInfo.ID,t.IsDefault=t.GetUserInfo.IsDefault,t.companyId=this.GetUserInfo.CompanyId,void 0!=t.ClaimData.isTicketHod&&(t.isTicketHod=t.ClaimData.isTicketHod),t.ClaimData.claim.length>0?(t.ClaimList=t.ClaimData.claim,t.NoRecords=!1):(t.ClaimList=[],t.NoRecords=!0)},methods:{EditTicketClaim:function(t){var e=this;e.ticketId=t.ticketId,e.claimId=t.claimId,e.isShowAddClaim=!0},GetClaimData:function(){var t=this;t.$parent.GetClaimData()},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachmentPath}&fileName=${t.attachmentName}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachmentDesc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.attachmentName),document.body.appendChild(o),o.click()}))},DeleteTicketClaim:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Claim"),(function(){e.isLoading=!0;var a={ids:t.claimId,companyId:e.companyId,userId:e.UserId,moduleName:"FSM",refCode:"TALYGEN_TICKET_CLAIM"},i=JSON.stringify(a);o["a"].deleteActivityData(i).then(t=>{e.isLoading=!1,"Success"==t.data[0].Status?(document.getElementById("tab-cliam").click(),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Claim")]),"Success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("DeletedError",[e.$t("Claim")]),"failure",!0,e.$t("Alert")),e.$emit("close")})}))},ApproveTicketClaim:function(t,e){var a=this;a.btnType=e,a.ticketId=t.ticketId,a.claimId=t.claimId,"A"==e?(a.confirmMsg=a.$t("ClaimAcceptConfirmMessage"),a.successMsg=a.$t("TicketClaimAcceptMessage"),a.approveBtn[0].isVisible=!0,a.approveBtn[1].isVisible=!1,a.approveFormSchema[0].Data[0].visibility=!0,a.isApproveTitle=!0,a.isRejectTitle=!1):(a.confirmMsg=a.$t("ClaimRejectConfirmMessage"),a.successMsg=a.$t("TicketClaimRejectMessage"),a.approveBtn[0].isVisible=!1,a.approveBtn[1].isVisible=!0,a.approveFormSchema[0].Data[0].visibility=!1,a.isApproveTitle=!1,a.isRejectTitle=!0),a.confirmR(a.confirmMsg,!0,a.$t("Confirm"),(function(e){a.approveTicketClaim=!0,t.claimValue>0&&(a.approveFormSchema[0].Data[0].value=t.claimValue)}))},SaveApproveTicketClaim:function(t,e){var a=this;a.ApproveClaimTicketModel.ClaimId=a.claimId,a.ApproveClaimTicketModel.ClaimValue=a._data.approveFormSchema[0].Data[0].value,a.ApproveClaimTicketModel.ClaimNote=a._data.approveFormSchema[0].Data[1].value,a.ApproveClaimTicketModel.TicketId=a.ticketId,a.ApproveClaimTicketModel.Type=a.btnType;var i=JSON.stringify(a.ApproveClaimTicketModel);a.confirmR(a.confirmMsg,!0,a.$t("Confirm"),(function(t){o["a"].ApproveRejectClaim(i).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status&&(a.ShowAlert(a.successMsg,"success",!0,a.$t("Alert")),a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.approveFormSchema[0].Data[0].value=null,t.approveFormSchema[0].Data[1].value=null,t.approveTicketClaim=!1,document.getElementById("tab-cliam").click()}}},N=L,x=Object(d["a"])(N,y,b,!1,null,null,null),R=x.exports,O=function(){var t=this,e=t._self._c;return e("section",[t.NoRecords?t._e():e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0"},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("Type")))])]),e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("From")))])]),e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("To")))])]),e("th",[e("span",[t._v(t._s(t.$t("EventStartTime")))])]),e("th",[e("span",[t._v(t._s(t.$t("EventEndTime")))])]),e("th",[e("span",[t._v(t._s(t.$t("Duration")))])]),e("th",[e("span",[t._v(t._s(t.$t("Comment")))])]),e("th",[e("span",[t._v(t._s(t.$t("Status")))])])])]),e("tbody",t._l(t.CallList,(function(a){return e("tr",[e("td",[e("span",[t._v(t._s(a.CALL_TYPE))])]),e("td",[e("span",[t._v(t._s(a.CALL_FROM))])]),e("td",[e("span",[t._v(t._s(a.CALL_TO))])]),e("td",[e("span",[t._v(t._s(a.START_TIME))])]),e("td",[e("span",[t._v(t._s(a.END_TIME))])]),e("td",[e("span",[t._v(t._s(a.DURATION))])]),e("td",[e("span",[t._v(t._s(a.COMMENT))])]),e("td",[e("span",{staticClass:"px-2 bg-success text-white d-block text-center"},[t._v(t._s(1001==a.STATUS_ID?"Active":""))])])])})),0)])])]),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()])},M=[],P={props:{CallData:{type:Array,required:!0}},data(){return{CallList:[],NoRecords:!1}},created(){var t=this;t.CallData.result.data.length>0?(t.CallList=t.CallData.result.data,t.NoRecords=!1):(t.CallList=[],t.NoRecords=!0)}},U=P,B=Object(d["a"])(U,O,M,!1,null,null,null),G=B.exports,V=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.RelatedTicketListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!0,RenderRowActionMethod:()=>{},ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["CREATED_AT"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.CREATED_AT))+" ")])]:t._e(),"TICKET_NUMBER"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{to:"/Ticketing/Manage/"+a.row.str_ticket_id,title:a.row[a.column.COLUMN_NAME],"data-toggle-tooltip":"tooltip","data-original-title":"Click here to view Ticket Detail"}},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])]:t._e()]}}])})],1)},W=[],H={props:{ticketId:{type:Number,required:!1}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,Headers:[{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Ticket Number",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKET_SUBJECT",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:2},{COLUMN_NAME:"CDC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CDC",DISPLAY_ORDER:3},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created At",DISPLAY_ORDER:4}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,GroupEnd:3,RelatedTicketListing:[]}},created:async function(){var t=this;await t.FetchRecords()},methods:{FetchRecords:async function(){var t=this;t.RelatedTicketListing=[];var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN&parentticketId=`+t.ticketId;await o["a"].GetRelatedTicketList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"CREATED_AT"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TICKET_NUMBER"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.DATA.length>0?(t.RelatedTicketListing=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.RelatedTicketListing=[]),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()}}},K=H,j=Object(d["a"])(K,V,W,!1,null,null,null),z=j.exports,q=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.TrackHistoryListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!1,RenderRowActionMethod:()=>{},ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["WORKORDER_NUMBER"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/WorkOrderDetail/"+a.row.WORKORDER_ID+"/"+a.row.TICKET_ID,"data-toggle-tooltip":"tooltip"}},[e("span",[e("span",[t._v("#")]),t._v(t._s(a.row.WORKORDER_NUMBER)+" ")])])]:t._e(),"TRACK_START_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.TRACK_START_TIME))+" ")])]:t._e(),"TRACK_END_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.TRACK_END_TIME))+" ")])]:t._e(),"TRACK_DESCRIPTION"==a.column.COLUMN_NAME?[e("span",[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.row.TRACK_DESCRIPTION)}})])])]:t._e()]}}])})],1)},Y=[],J={props:{ticketId:{type:Number,required:!1}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,Headers:[{COLUMN_NAME:"WORKORDER_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WO Number",DISPLAY_ORDER:1},{COLUMN_NAME:"TRACK_DESCRIPTION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"DESCRIPTION",DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_START_TIME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"START TIME",DISPLAY_ORDER:3},{COLUMN_NAME:"TRACK_END_TIME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"END TIME",DISPLAY_ORDER:4},{COLUMN_NAME:"DURATION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Duration (HH:MM:SS)",DISPLAY_ORDER:5}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,GroupEnd:3,TrackHistoryListing:[]}},created:async function(){var t=this;await t.FetchRecords()},methods:{FetchRecords:async function(){var t=this,e=`ticketingId=${t.ticketId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN`;await o["a"].GetTrackHistoryList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"WORKORDER_NUMBER"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_START_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_END_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_DESCRIPTION"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.DATA.length>0?(t.TrackHistoryListing=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.TrackHistoryListing=[]),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()}}},X=J,Z=Object(d["a"])(X,q,Y,!1,null,null,null),Q=Z.exports,tt=function(){var t=this,e=t._self._c;return e("div",{},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"row barrw",attrs:{id:"divconclusionheader"}},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[e("div",{staticClass:"heading-border"},[e("h5",{staticClass:"h5 mb-3"},[e("span",[t._v(t._s(t.$t("Conclusion"))+" ")])])])])]),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}),[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[e("div",{staticClass:"row barrw",attrs:{id:"divconclusionheader"}},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[e("div",{staticClass:"heading-border"},[e("h5",{staticClass:"h5 mb-3"},[e("span",[t._v(" "+t._s(t.$t("ConclusionThread")))])])])])]),e("div",{staticClass:"conclusion-ticket",staticStyle:{"max-height":"248px",overflow:"auto"}},[e("div",{staticClass:"conclusion-ticket-content",attrs:{id:"divconclusiondata"}},[e("div",{attrs:{id:"tblconclusionlist"}}),t.ConclusionData==[]||""==t.ConclusionData?e("div",{staticClass:"d-block text-center text-danger border p-2 no-record"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e(),t._l(t.ConclusionData,(function(a,i){return e("div",{attrs:{id:"trconclusionList_@list.ConclusionId"}},[a.CREATED_BY==t.user_id&&"TICKET_CONCLUSION_DRAFT"==a.STATUS_CODE?e("span",{staticClass:"header-action float-right d-none"},[e("a",{staticClass:"editTicketConclusion btn-success",attrs:{title:"Edit","data-ConclusionId":a.CONCLUSION_ID,"data-RootCause":a.CORRECTIVE_ACTION,"data-CorrectiveAction":a.CORRECTIVE_ACTION}},[e("em",{staticClass:"fa fa-pencil"})])]):t._e(),null!=a.ROOT_CAUSE?e("strong",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("RootCause"))+":")]):t._e(),t._v(" "+t._s(a.ROOT_CAUSE)+" "),e("div",{staticClass:"clearfix mt-2"}),null!=a.CORRECTIVE_ACTION?e("strong",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("CorrectiveAction"))+" :")]):t._e(),t._v(" "+t._s(a.CORRECTIVE_ACTION)+" "),e("div",{staticClass:"text-right d-block mt-2"},[e("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left p-0 text-left"},[e("em",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("PostedBy"))+":")]),t._v(" "+t._s(a.CREATEDBYNAME))]),e("div",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left p-0 text-right"},[e("em",{staticClass:"font-weight-bold"},[t._v(t._s(t.$t("CreatedAt"))+":")]),t._v(" "+t._s(t.$options.filters.formatDate(a.CREATED_AT))+" ")])]),e("br"),e("br")])}))],2)])])]],2)},et=[],at={props:{TicketId:{type:Number,required:!0},FormConclusionData:{type:Number,required:!0},IsConclusionSave:{type:String,required:!0}},data(){return{isLoading:!1,ConclusionId:0,user_id:0,IsShowConclusionTab:!0,ConclusionData:[],StatusCode:"N",FormSchema:[{Data:[{astype:"TextAreaField",label:this.$t("RootCause"),name:"RootCause",value:"",validationRules:{required:!0,max:100}},{astype:"TextAreaField",label:this.$t("CorrectiveAction"),name:"CorrectiveAction",value:"",validationRules:{required:!0,max:100}}]}],buttons:[{type:"SaveAsDraft",class:"btn btn-warning",text:"<i class='fa fa-save pr-2'></i>Save As Draft"},{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"}]}},created:async function(){var t=this;t.user_id=this.GetUserInfo.ID,t.TicketId>0&&this.LoadConclusionTab(),t.FetchRecords()},methods:{FetchRecords:async function(){var t=this,e=t.FormConclusionData;e.length>0&&(t.ConclusionId=e[0].conclusionid,t.TicketId=e[0].TicketId,t.ThreadStatus=e[0].thredid,t.FormSchema[0].Data[0].value=e[0].rootcause,t.FormSchema[0].Data[1].value=e[0].correctiveaction)},LoadConclusionTab:async function(){var t=this,e="ticketId="+t.TicketId;await o["a"].LoadConclusionTab(e).then((function(e){"Success"==e.data.status&&(t.ConclusionData=e.data.result)}))},onSubmit(t,e){var a=this,i=e,s=i.match(/<i[^>]*>[^<]*<\/i>(.*)/),r=s?s[1]:null;if(a.StatusCode="Save"==r?"N":"Y",1==a.IsConclusionSave)return a.ShowAlert(a.$t("AlreadyExists",[a.$t("Conclusion ")]),"failure",!0,a.$t("Alert")),!1;var l={ConclusionId:null==a.ConclusionId?0:a.ConclusionId,TicketId:a.TicketId,RootCause:t.RootCause,CorrectiveAction:t.CorrectiveAction,StatusCode:a.StatusCode},n=JSON.stringify(l);o["a"].SaveTicketConclusion(n).then(async t=>{if("Success"==t.data.status){var e=JSON.parse(t.data.result);"ALREADY EXISTS"==e.MSG?a.ShowAlert(a.$t("AlreadyExists",[a.$t("Conclusion ")]),"failure",!0,a.$t("Alert")):(a.ConclusionId>0?"N"==a.StatusCode?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Conclusion ")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("DraftConclusion")]),"success",!0,a.$t("Alert")):"N"==a.StatusCode?a.ShowAlert(a.$t("AddedSuccess",[a.$t("Conclusion ")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("DraftedSuccess",[a.$t("Conclusion ")]),"success",!0,a.$t("Alert")),a.LoadConclusionTab(),await a.$parent.FetchData("Conclusion"),a.$parent.isShowTicketConclusion=!1)}else a.ShowAlert(a.$t("AddedError",[a.$t("Conclusion ")]),"failure",!0,a.$t("Alert"))})}}},it=at,st=Object(d["a"])(it,tt,et,!1,null,null,null),ot=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",{},[e("div",{staticClass:"row barrw",attrs:{id:"divfeedbackheader"}},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12"},[e("div",{staticClass:"heading-border"},[e("h5",{staticClass:"h5 mb-3"},[e("span",[t._v(t._s(t.$t("Feedback"))+" ")])])])])]),t.listAnswers.length>0?[t._l(t.listAnswers,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-12 col-lg-12"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12"},[e("form",{on:{submit:function(e){return e.preventDefault(),t.saveFeedback.apply(null,arguments)}}},[e("div",{staticClass:"row",attrs:{id:"divfeedbackTicketdata"}},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 feedback-conversation-content"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(a.questionText)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:a.questionId,expression:"record.questionId"}],staticClass:"QuestionId",attrs:{type:"hidden"},domProps:{value:a.questionId},on:{input:function(e){e.target.composing||t.$set(a,"questionId",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:a.ticketFeedbackId,expression:"record.ticketFeedbackId"}],staticClass:"TicketFeedbackId",attrs:{type:"hidden"},domProps:{value:a.ticketFeedbackId},on:{input:function(e){e.target.composing||t.$set(a,"ticketFeedbackId",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:a.ticketId,expression:"record.ticketId"}],staticClass:"TicketId",attrs:{type:"hidden"},domProps:{value:a.ticketId},on:{input:function(e){e.target.composing||t.$set(a,"ticketId",e.target.value)}}}),"Comments"===a.answerType?[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.feedbackAnswer,expression:"feedbackAnswer"}],staticClass:"txtFeedbackAnswer textarea-large",attrs:{maxlength:2e3},domProps:{value:t.feedbackAnswer},on:{input:[function(e){e.target.composing||(t.feedbackAnswer=e.target.value)},t.handleInput]}}),t.showError?e("span",{staticClass:"field-validation-valid text-danger field-validation-error",attrs:{name:"Description"}},[t._v(t._s(t.errorMessage))]):t._e()]:"Objective"===a.answerType?[e("div",{staticClass:"objectiveTypeDiv"},[e("div",{staticClass:"form-group"},t._l(a.optionValue.split("_"),(function(a,i){return e("div",{key:i,staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{staticClass:"custom-control-input IsRuleApllicable dynamic",attrs:{type:"radio",id:"customcheckbox"+a+t.objectiveCount,name:"PointScale"+t.objectiveCount},domProps:{value:a},on:{click:function(e){return t.objectiveTypeChange(a)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"customcheckbox"+a+t.objectiveCount}},[t._v(" "+t._s("VeryGood"===a?"Very Good":a))])])})),0),e("input",{attrs:{type:"hidden",id:"hddnObjectiveFeedbackAnswer"+a.questionId},domProps:{value:a.optionValue.split("_")[0]}})])]:[e("div",[e("span",{staticClass:"crating rating",attrs:{id:"ratingType"}},t._l(5,(function(a){return e("i",{key:a,staticClass:"fa fa-star",class:{"text-warning":a<=t.selectedRating},attrs:{value:a},on:{click:function(e){return t.selectRating(a)}}})})),0),e("input",{staticClass:"hdnStarRating",attrs:{type:"hidden"}})])]],2)])])])])])})),e("div",{staticClass:"row flex-row-reverse mt-2"},[e("div",{staticClass:"col-lg-6 text-right"},[e("button",{staticClass:"btn btn-success text-white",attrs:{id:"btnSaveFeedback"},on:{click:t.saveFeedback}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save"))+" ")])])])]:[e("div",{staticClass:"d-block text-center text-danger border p-2 no-record"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]],2)},lt=[],nt={props:{TicketId:{type:Number,required:!0},TicketDepartmentId:{type:Number,required:!0},TicketStatus:{type:String,required:!0}},data(){return{errorMessage:"Answer is required.",selectedObjectiveValue:"",listAnswers:[],objectiveCount:0,feedbackAnswer:"",selectedRating:0,showError:!1,Feedback:null}},created:async function(){var t=this;t.user_id=this.GetUserInfo.ID,t.TicketId>0&&this.FetchTicketAnswers()},methods:{objectiveTypeChange(t){t&&(this.selectedObjectiveValue=t)},saveFeedback:async function(){var t,e,a=this;if("Comments"===a.listAnswers[0].answerType){if(t=document.querySelector(".txtFeedbackAnswer").value,!t.trim())return void(a.showError=!0);a.showError=!1}else t=null!=a.selectedObjectiveValue?a.selectedObjectiveValue:a.selectedRating.toString();a.listAnswers.forEach((function(a){var i=a.ticketId,s=a.ticketFeedbackId,o=a.questionId,r=(a.threadId,t),l={TicketId:i,TicketFeedbackId:s,QuestionId:o,FeedbackAnswer:r};e=JSON.stringify(l)})),await o["a"].SaveUserFeedback(e).then((function(t){0==t.data.status&&t.data.status>=0&&(a.$parent.isShowTicketFeedback=!1,a.ShowAlert(a.$t("Ticket Feedback has been Successfully submitted",!0,a.$t("Alert"))))}))},FetchTicketAnswers:async function(){var t=this,e=`departmentId=${void 0==this.TicketDepartmentId?0:this.TicketDepartmentId}&ticketId=${this.TicketId}&ticketStatus=${this.TicketStatus}`;await o["a"].TicketFeedbackQuestions(e).then((function(e){t.listAnswers=e.data.ListAnswers}))},selectRating(t){this.selectedRating===t?this.selectedRating=0:this.selectedRating=t;const e=document.querySelector(".hdnStarRating");e&&(e.value=this.selectedRating)}}},ct=nt,dt=(a("5e6e"),Object(d["a"])(ct,rt,lt,!1,null,null,null)),ut=dt.exports,mt=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"FSM_WorkOrder",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.GetWorkOrderListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!0,RenderRowActionMethod:t.workOrderRenderActions,ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.workorderActionButtonClick,PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["work_order_date"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDate(a.row.work_order_date))+" ")])]:t._e(),"workorder_number"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/WorkOrderDetail/"+a.row.id+"/"+a.row.ticket_id,"data-toggle-tooltip":"tooltip"}},[e("span",[e("span",[t._v("#")]),t._v(t._s(a.row.workorder_number)+" ")])])]:t._e(),"status_id"==a.column.COLUMN_NAME?[e("span",{class:t.getStatusClass(a.row.status_id,"status_name","fsm")},[t._v(" "+t._s(a.row.status_id)+" ")])]:t._e()]}}])}),t.showWorkOrderStatusModal?e("WorkOrderStatusModal",{attrs:{updateWorkOrderStatus:t.updateWorkOrderStatus,isLocateorNonLocate:t.isLocateorNonLocate,callbackfunction:t.callbackfunction}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.workOrderModalStatus?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("WorkOrder")+" "+t.$t("Status")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:e}){return[t._v(" "+t._s(e.fieldInfo)+" ")]}}],null,!1,1171166564)})],1),e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{tabindex:"13",title:t.$t("Save"),id:"btnSave"},on:{click:t.SubmitWOrkOrderUpdateStatus}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{tabindex:"14",title:t.$t("Cancel"),id:"btnCancel"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])])])])]):t._e()])])],1)},pt=[],ht=a("1af3"),ft={components:{WorkOrderStatusModal:ht["a"]},props:{ticketId:{type:Number,required:!1},isLocateorNonLocate:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{isLoading:!1,noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,listActions:[{title:"Update Status",href:"javascript:void(0)",icon:"fa fa-cog text-info",callbackfunction:"Update",additionalSpan:""},{title:"Details",href:"javascript:void(0)",callbackfunction:"ClickOnDetail",icon:"fa fa-ticket",additionalSpan:""},{title:"Status",href:"javascript:void(0)",icon:"fa fa-tag",callbackfunction:"Status",additionalSpan:""}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],Headers:[{COLUMN_NAME:"workorder_number",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WO Number",DISPLAY_ORDER:1},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"work_order_date",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Order Date",DISPLAY_ORDER:3},{COLUMN_NAME:"worktype_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Type",DISPLAY_ORDER:4},{COLUMN_NAME:"subject",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:5},{COLUMN_NAME:"client_id",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Client",DISPLAY_ORDER:6},{COLUMN_NAME:"is_submited",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"FormSubmitted",DISPLAY_ORDER:7}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,workOrderId:0,GroupEnd:3,GetWorkOrderListing:[],showWorkOrderStatusModal:!1,updateWorkOrderStatus:[],workOrderModalStatus:!1}},created:async function(){var t=this;setTimeout(()=>{t.FetchRecords()},500)},methods:{GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await o["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e._data.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}}))},FetchRecords:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.ticketId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN`;await o["a"].WorkOrderList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"work_order_date"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"workorder_number"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data?(e.data.result.data.length>0?(t.GetWorkOrderListing=e.data.result.data,t.TotalRecords=e.data.result.data[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.GetWorkOrderListing=[]),t.isLoading=!1):(t.noRecord=!0,t.TotalRecords=0,t.GetWorkOrderListing=[]),t.isLoading=!1,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()},workorderActionButtonClick(t,e,a,i){switch(t){case"Update":this.openPopupForUpdateStatus(e);break;case"ClickOnDetail":this.WordOrderDetailLink(e);break;case"Status":this.WorkOrderStatus(e);break}},WordOrderDetailLink:function(t){var e=this;e.$router.push({path:"/Ticketing/WorkOrderDetail/"+t.id+"/"+t.ticket_id})},SubmitWOrkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t._data.nonLocateFormSchema[0].Data[0].value},a=JSON.stringify(e);await o["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.FetchRecords()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},Close:function(){this.workOrderModalStatus=!1},WorkOrderStatus:function(t){var e=this;e.workOrderId=t.id,e.GetDropDownData("WORK_ORDER_FINAL_STATUS"),e.workOrderModalStatus=!e.workOrderModalStatus},openPopupForUpdateStatus:function(t){var e=this;e.updateWorkOrderStatus=t,e.showWorkOrderStatusModal=!e.showWorkOrderStatusModal},workOrderRenderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let i={...t};switch(i.title){case"Update":i.isVisible=!0;break;case"Details":i.isVisible=!0;break;case"Status":i.isVisible=1==e.isLocateorNonLocate;break;default:i.isVisible=!0}a.push(i)}),a}}},vt=ft,Ct=Object(d["a"])(vt,mt,pt,!1,null,null,null),Tt=Ct.exports,St=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"FSM_WorkOrder",IdentityColumn:"TICKET_ID",listType:["Card"],ListData:t.GetWorkOrderListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!0,RenderRowActionMethod:t.workOrderRenderActions,ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.workorderActionButtonClick,PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"customcard",fn:function({data:a}){return[e("div",{class:{"row card-view bg-border custom-box-width":!0}},[e("div",{class:{"col-md-12 mb-3":!0,"dg-danger":"YES"==a.row.is_high_profile||"true"==a.row.is_high_profile}},[e("div",{staticClass:"card-box blue-bg-light"},[e("div",{staticClass:"card-number"},[""!=a.row.sa_status?e("div",{staticClass:"card-number"},[t._v(" #"+t._s(a.row.workorder_number)+" ("+t._s(a.row.status_id)+"-"+t._s(a.row.sa_status)+") ")]):e("div",{staticClass:"card-number"},[t._v(" #"+t._s(a.row.workorder_number)+" ("+t._s(a.row.status_id)+") ")])]),""!=a.row.subject&&null!=a.row.subject?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.row.subject))])]):t._e(),""!=a.row.worktype_name&&null!=a.row.worktype_name?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),e("span",{staticStyle:{width:"auto"},attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Work Type"}},[t._v(t._s(a.row.worktype_name))])]):t._e(),""!=a.row.item_name&&null!=a.row.item_name?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(a.row.item_name))])]):t._e(),""!=a.row.created_by&&null!=a.row.created_by?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.row.created_by))])]):t._e(),e("hr",{staticClass:"my-2"}),e("p",[""!=a.row.child_sub_status_name&&null!=a.row.child_sub_status_name?e("span",{attrs:{title:a.row.child_sub_status_name}},[t._v(t._s(a.row.child_sub_status_name))]):t._e(),""!=a.row.comment&&null!=a.row.comment?e("span",{staticClass:"description mt-2",attrs:{title:a.row.comment}},[e("br"),t._v(" "+t._s(a.row.comment))]):t._e(),""!=a.row.zone_name&&null!=a.row.zone_name?e("span",{staticClass:"description mt-2",attrs:{title:a.row.zone_name}},[e("br"),t._v(" "),e("b",[t._v(t._s(t.$t("HighProfileZoneName"))+":")]),t._v(" "+t._s(a.row.zone_name))]):t._e(),e("span",{staticClass:"description mt-2",attrs:{title:a.row.is_submited}},[e("br"),t._v(t._s(a.row.is_submited))])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(t.$options.filters.formatDateTime(a.row.work_order_date)))])]),e("div",{staticClass:"card-action"},[e("a",{staticClass:"round-icon-small btn-primary-light d-none",attrs:{title:"ReportIncident",href:"javascript:;"},on:{click:function(e){return t.openReportIncidentListingPopUp(a.row)}}},[e("em",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}})]),e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:"Update Status",href:"javascript:;"},on:{click:function(e){return t.openPopupForUpdateStatus(a.row)}}},[e("em",{staticClass:"fa fa-cog"})]),e("a",{staticClass:"round-icon-small btn-info-light d-none",attrs:{title:"View Status History",href:"javascript:;"},on:{click:function(e){return t.openUpdateStatusHistoryPopUp(a.row)}}},[e("em",{staticClass:"fa fa-history"})]),e("a",{staticClass:"round-icon-small btn-primary-light d-none",attrs:{title:"View TrackHistory",href:"javascript:;"},on:{click:function(e){return t.openTrackHistorModal(a.row)}}},[e("em",{staticClass:"fa fa-eye"})]),e("a",{staticClass:"round-icon-small btn-primary-light",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Detail"},on:{click:function(e){return t.WordOrderDetailLink(a.row)}}},[e("em",{staticClass:"fa fa-ticket"}),e("span",{staticClass:"text"},[t._v("Detail")])])])])])])])]}}])}),t.showWorkOrderStatusModal?e("WorkOrderStatusModal",{attrs:{updateWorkOrderStatus:t.updateWorkOrderStatus,isLocateorNonLocate:t.isLocateorNonLocate,callbackfunction:t.callbackfunction}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.workOrderModalStatus?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("WorkOrder")+" "+t.$t("Status")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:e}){return[t._v(" "+t._s(e.fieldInfo)+" ")]}}],null,!1,1171166564)})],1),e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{tabindex:"13",title:t.$t("Save"),id:"btnSave"},on:{click:t.SubmitWOrkOrderUpdateStatus}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{tabindex:"14",title:t.$t("Cancel"),id:"btnCancel"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])])])])]):t._e()])])],1)},_t=[],gt={components:{WorkOrderStatusModal:ht["a"]},props:{ticketId:{type:Number,required:!1},isLocateorNonLocate:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,listActions:[],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],Headers:[{COLUMN_NAME:"workorder_number",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WO Number",DISPLAY_ORDER:1},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"work_order_date",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Order Date",DISPLAY_ORDER:3},{COLUMN_NAME:"worktype_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Type",DISPLAY_ORDER:4},{COLUMN_NAME:"subject",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:5},{COLUMN_NAME:"client_id",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Client",DISPLAY_ORDER:6},{COLUMN_NAME:"is_submited",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"FormSubmitted",DISPLAY_ORDER:7}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,workOrderId:0,GroupEnd:3,GetWorkOrderListing:[],showWorkOrderStatusModal:!1,updateWorkOrderStatus:[],workOrderModalStatus:!1}},created:async function(){var t=this;t.FetchRecords()},methods:{GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await o["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e._data.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}}))},FetchRecords:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.ticketId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN`;await o["a"].WorkOrderList(e).then((function(e){""!=e.data&&null!=e.data?(e.data.result.data.length>0?(t.GetWorkOrderListing=e.data.result.data,t.TotalRecords=e.data.result.data[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.GetWorkOrderListing=[]),t.isLoading=!1):(t.noRecord=!0,t.TotalRecords=0,t.GetWorkOrderListing=[]),t.isLoading=!1,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()},workorderActionButtonClick(t,e,a,i){switch(t){case"Update":this.openPopupForUpdateStatus(e);break;case"ClickOnDetail":this.WordOrderDetailLink(e);break;case"Status":this.WorkOrderStatus(e);break}},WordOrderDetailLink:function(t){var e=this;e.$router.push({path:"/Ticketing/WorkOrderDetail/"+t.id+"/"+t.ticket_id})},SubmitWOrkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t._data.nonLocateFormSchema[0].Data[0].value},a=JSON.stringify(e);await o["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.FetchRecords()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},Close:function(){this.workOrderModalStatus=!1},WorkOrderStatus:function(t){var e=this;e.workOrderId=t.id,e.GetDropDownData("WORK_ORDER_FINAL_STATUS"),e.workOrderModalStatus=!e.workOrderModalStatus},openPopupForUpdateStatus:function(t){var e=this;e.updateWorkOrderStatus=t,e.showWorkOrderStatusModal=!e.showWorkOrderStatusModal},workOrderRenderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let i={...t};switch(i.title){case"Update":i.isVisible=!0;break;case"Details":i.isVisible=!0;break;case"Status":i.isVisible=1==e.isLocateorNonLocate;break;default:i.isVisible=!0}a.push(i)}),a}}},kt=gt,yt=Object(d["a"])(kt,St,_t,!1,null,null,null),bt=yt.exports,Dt=a("c054"),At=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Merge")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddTicketMerged"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithMerge},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},It=[],wt={props:{id:{type:Number,required:!1},str_ticket_id:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{editor:this.CLASSIC_EDITOR,content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,FormSchema:[{layoutType:"double",Data:[{astype:"MultiSelectField",mode:"tag",label:this.$t("CombineTicket"),name:"MergeTicket",value:"",config:{options:[],onSearchChange:this.onTicketType,onChange:this.onChangeCombinedTicket},placeholder:this.$t("SearchTicket"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("PrimaryTicket"),name:"PrimaryTicket",value:"",config:{options:[]},placeholder:this.$t("SelectPrimaryTicket"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Reason"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},onTicketType:async function(t,e,a){var i=this;i.search=a,i.FormSchema[0].Data[0].config.options=[];var s=`ticketId=${i.str_ticket_id}&search=${i.search}`;await o["a"].GetTicketListData(s).then((function(t){if(null!=t.data&&""!=t.data){var e=t.data;null!=e&&(i.FormSchema[0].Data[0].config.options=[],t.data.forEach((t,e)=>{i.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}))}}))},onChangeCombinedTicket:async function(t,e,a){var i=this;i.FormSchema[0].Data[1].config.options.push({value:a.value,name:a.label})},UploadFileWithMerge:async function(t,e){var a=this,i="",s=0;for(s=0;s<a._data.FormSchema[0].Data[0].value.length;s++)i=0==s?a._data.FormSchema[0].Data[0].value[s].value:i+","+a._data.FormSchema[0].Data[0].value[s].value;var r={TicketId:a.id,CombinedTicketIds:i,PrimaryTicketId:a._data.FormSchema[0].Data[1].value,Reason:a._data.FormSchema[1].Data[0].value},l=JSON.stringify(r);await o["a"].SaveMergeTicket(l).then(t=>{if("Success"==t.data.status)if(""!=t.data.url){var e=[a.$t("TICKET_SAVED")]+" "+[a.$t("RedirectToMerge")]+" #"+t.data.PrimaryTicket+".";a.ShowAlert(e,"success",!0,a.$t("Alert")),window.location.href="/Ticketing/Manage/"+t.data.url}else{e=[a.$t("TICKET_SAVED")]+" "+[a.$t("RedirectToMerge")]+" #"+t.data.PrimaryTicket+".";a.ShowAlert(e,"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()}else a.ShowAlert(a.$t("AddedError",[a.$t("TICKET_MERGE")]),"failure",!0,a.$t("Alert")),a.Close()})},Close:function(){var t=this;t._data.FormSchema[0].Data[1].value=null,t._data.FormSchema[1].Data[0].value=null,t._data.FormSchema[0].Data[0].value=null,t.$parent.isShowMergeTicket=!1}}},Ft=wt,Et=Object(d["a"])(Ft,At,It,!1,null,null,null),$t=Et.exports,Lt=a("6481"),Nt=a("3e91"),xt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Update")))]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgTicketingViewUpdate"))}})])])])]),e("div",{staticClass:"modal-body"},[t.DataLoaded?e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}):t._e()],1)])])])],1)])},Rt=[],Ot={props:{TicketId:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{statusList:[],CCUserList:[],CategoryList:[],priorityList:[],productList:[],DataLoaded:0,ccOption:[],popover:{visibility:!1},isLoading:!1,isProductChanged:0,isETAChanged:0,isStatusChanged:0,isCategoryChanged:0,isPriorityChanged:0,Mainleveldiv:[],IsChangeData:1,UserType:null,FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"DateField",label:this.$t("Expected Resolution (M/D/YYYY)"),name:"ExpectedResolution",value:"",placeholder:"",disabled:!1,config:{format:"M/D/YYYY"},popover:{visibility:!0},validationRules:{required:!1}},{astype:"MultiSelectField",mode:"tag",label:this.$t("CC Users"),name:"CCUsers",disabled:!1,value:"",config:{options:[]},placeholder:this.$t("CC Users"),validationRules:{required:!1}},{astype:"SelectField",label:this.$t("Ticket Category"),name:"TicketCategory",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"SelectField",label:this.$t("Product"),name:"Product",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"SelectField",label:this.$t("Priority"),name:"Priority",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Update"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},async created(){var t=this;await t.GetStatusList(),await t.GetCCUserList(),await t.GetCategoryForTicket(),await t.GetPrioritybyCompanyId(),await t.GetProductsList(),t.DataLoaded=1,t.FetchTicketData(),t.UserType=t.GetUserInfo.UserType},methods:{FetchTicketData:async function(){var t=this;t.isLoading=!0;var e="ticketId="+t.TicketId;await o["a"].GetTicketById(e).then((function(e){if(t.isLoading=!1,null!=e.data.ticket){t.Mainleveldiv.push({StatusId:"",ExceptedResolution:"",TicketCategory:"",Product:"",Priority:"",CCUsers:[]}),t.FormSchema[0].Data[0].value=e.data.ticket.statusId,t.Mainleveldiv[0].StatusId=e.data.ticket.statusId,t.FormSchema[0].Data[1].value=e.data.ticket.expectedResolutionDate,t.Mainleveldiv[0].ExceptedResolution=e.data.ticket.expectedResolutionDate,t.isBlank(e.data.ticket.ticketCategoryId)||(t.FormSchema[0].Data[3].value=e.data.ticket.ticketCategoryId,t.Mainleveldiv[0].TicketCategory=e.data.ticket.ticketCategoryId),t.isBlank(e.data.ticket.productId)||(t.FormSchema[0].Data[4].value=e.data.ticket.productId,t.Mainleveldiv[0].Product=e.data.ticket.productId),t.FormSchema[0].Data[5].value=e.data.ticket.priorityId,t.Mainleveldiv[0].Priority=e.data.ticket.priorityId;var a=e.data.ticket.ccUser;if(!t.isBlank(a)){var i=[];t.ccOption=t.CCUserList.filter(t=>a.indexOf(t.value)>-1),t.ccOption.forEach((t,e)=>{i.push({value:t.value,label:t.name})}),t.FormSchema[0].Data[2].value=i,t.Mainleveldiv[0].CCUsers=i}}}))},GetStatusList:async function(){var t=this,e="statusType=Ticketing&&hasglobal=false";await o["a"].GetStatusList(e).then(async e=>{e.data.length>0&&(t.statusList=[],t.statusList=e.data,t.FormSchema[0].Data[0].config.options=[],t.statusList.forEach((e,a)=>{t.FormSchema[0].Data[0].config.options.push({value:e.STATUS_ID,name:e.STATUS})}))})},GetCCUserList:async function(){var t=this,e="id=&moduleName=Ticketing&type=CC_USER_LIST&search=&refId=";await o["a"].GetDDLData(e).then(async e=>{if(e.data.DATA.length>0){var a=e.data.DATA;t.CCUserList=e.data.DATA,null!=a&&e.data.DATA.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({value:e.value,name:e.name})})}})},GetCategoryForTicket:async function(){var t=this,e="categoryTypeId=TICKET_CATEGORY&is_Global=false&showActiveStatus=true";await o["a"].GetDDLCategoryForTicket(e).then(async e=>{e.data.length>0&&(t.CategoryList=[],t.CategoryList=e.data,t.FormSchema[0].Data[3].config.options=[],t.CategoryList.forEach((e,a)=>{t.FormSchema[0].Data[3].config.options.push({value:e.value,name:e.name})}))})},GetProductsList:async function(){var t=this;await o["a"].GetProductsList().then(async e=>{e.data.length>0&&(t.productList=e.data,t.productList.forEach((e,a)=>{t.FormSchema[0].Data[4].config.options.push({value:e.value,name:e.name})}))})},GetPrioritybyCompanyId:async function(){var t=this;await o["a"].GetPrioritybyCompanyId().then(async e=>{e.data.length>0&&(t.priorityList=e.data,t.priorityList.forEach((e,a)=>{t.FormSchema[0].Data[5].config.options.push({value:e.prioritY_ID,name:e.prioritY_NAME})}))})},onChangeDropdown:async function(t){var e=this,a=t.target.name;"Product"==a?e.isProductChanged=1:"Priority"==a?e.isPriorityChanged=1:"TicketCategory"==a?e.isCategoryChanged=1:"Status"==a&&(e.isStatusChanged=1)},onSubmit:async function(t,e){var a=this,i="",s=0;for(s=0;s<a.FormSchema[0].Data[2].value.length;s++)i=0==s?a.FormSchema[0].Data[2].value[s].value:i+","+a.FormSchema[0].Data[2].value[s].value;var r={ticketId:a.TicketId,statusId:a.FormSchema[0].Data[0].value,isSuptTckt:a.user_id,productId:!0!==a.isBlank(a.FormSchema[0].Data[4].value)?a.FormSchema[0].Data[4].value:null,ccOption:!0!==a.isBlank(i)?i:null,ticketCategory:!0!==a.isBlank(a.FormSchema[0].Data[3].value)?a.FormSchema[0].Data[3].value:null,priorityId:!0!==a.isBlank(a.FormSchema[0].Data[5].value)?a.FormSchema[0].Data[5].value:null,expectedResolutionDate:1!=a.isBlank(a.$options.filters.formatDate(a.FormSchema[0].Data[1].value))?a.$options.filters.formatDate(a.FormSchema[0].Data[1].value):null,isProductChanged:!0!==a.isBlank(a.isProductChanged)?a.isProductChanged:0,isETAChanged:!0!==a.isBlank(a.$options.filters.formatDate(a.FormSchema[0].Data[1].value))?1:0,isStatusChanged:!0!==a.isBlank(a.isStatusChanged)?a.isStatusChanged:0,isCategoryChanged:!0!==a.isBlank(a.isCategoryChanged)?a.isCategoryChanged:0,isPriorityChanged:!0!==a.isBlank(a.isPriorityChanged)?a.isPriorityChanged:0,ticketOpenDate:!0!==a.isBlank(a.$options.filters.formatDateTime(a.FormSchema[0].Data[1].value))?a.$options.filters.formatDateTime(a.FormSchema[0].Data[1].value):null},l=null==r.statusId?"":r.statusId,n=null==r.expectedResolutionDate?"":r.expectedResolutionDate,c=null==r.ticketCategory?"":r.ticketCategory,d=null==r.productId?"":r.productId,u=null==r.priorityId?"":r.priorityId,m=null==r.ccOption?"":r.ccOption,p="",h=0,f=0;a.Mainleveldiv[0].CCUsers.forEach((t,e)=>{0==e?p=t.value:p+=","+t.value});var v=p;function C(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}C(m,v)&&(h=1);var T="",S="";if(T=""==a.Mainleveldiv[0].ExceptedResolution?"":new Date(a.Mainleveldiv[0].ExceptedResolution),S=""==n?"":new Date(n),T==S&&(f=1),(a.Mainleveldiv[0].StatusId!=l||1!=h||1!=f||a.Mainleveldiv[0].TicketCategory!=c||a.Mainleveldiv[0].Product!=d||a.Mainleveldiv[0].Priority!=u)&&(a.IsChangeData=0),0==a.IsChangeData){var _=JSON.stringify(r);o["a"].TicketUpdate(_).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Ticket")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.Close()):(a.FileSrc="",a.Close(),$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"Ticket")}})}else a.ShowAlert(a.$t("PleaseChangeAnyRecordsForFurther"),"warning",!0,a.$t("Alert"))},Close:function(){var t=this;t.FormSchema[0].Data[0].value=null,t.FormSchema[0].Data[1].value=null,t.FormSchema[0].Data[2].value=null,t.FormSchema[0].Data[3].value=null,t.FormSchema[0].Data[4].value=null,t.FormSchema[0].Data[5].value=null,t.$parent.isShowTicketUpdate=!1,t.callbackfunction()}}},Mt=Ot,Pt=Object(d["a"])(Mt,xt,Rt,!1,null,null,null),Ut=Pt.exports,Bt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Assign")+" / "+t.$t("Transfer")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddTicketTransfer"))}})])])])]),e("div",{staticClass:"modal-body"},[t.DataLoaded?e("dynamic-form",{ref:"assignTransfer",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}],null,!1,2349768450)}):t._e()],1)])])])])])},Gt=[],Vt={components:{},props:{TicketId:{type:Number,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},IsSupportTicket:{type:String,required:!0},DisallowedFileType:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{DataLoaded:0,editor:this.CLASSIC_EDITOR,TransferTicketData:[],priorityList:[],DepartmentList:[],TicketType:null,Description:null,FileName:null,file:null,isSupportTicket:!1,TicketId:0,ticketModel:{assignedToId:"",replyTemplate:"",departmentId:"",transferDescription:"",priorityId:"",fileData:[],transferType:"",moduleName:"",subModuleCode:""},FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Type"),name:"Type",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeType},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Priority"),name:"Priority",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Department"),name:"Department",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Assigned To"),name:"AssignedTo",value:"",placeholder:"",config:{options:[],showAddIcon:!1}},{astype:"SelectField",label:this.$t("Canned Reply"),name:"CannedReply",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeTemplate},validationRules:""}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"Attachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}},{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:5e3}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},async created(){var t=this;await t.FetchData(),await t.BindTicketType(),await t.GetPrioritybyCompanyId(),await t.BindCannedReply(),t.isSupportTicket?await t.GetDepartmentListForSupport("department"):await t.GetDepartmentListbyCompanyForClient(),t.DataLoaded=1},methods:{FetchData:async function(){var t=this,e="ticketId="+t.TicketId;await o["a"].AssignTransferTicket(e).then((function(e){t.TransferTicketData=e.data.data,t.isSupportTicket=t.TransferTicketData.isSupportTicket;let a=t.AttachmentDisallowedFileType(t.DisallowedFileType);null!=a&&(t.FormSchema[1].Data[0].config.reject=a)}))},BindTicketType:async function(){var t=this;1==t.TransferTicketData.ticketTransferAssignEnabled?(await t.FormSchema[0].Data[0].config.options.push({name:t.$t("Assign"),value:"A"}),t.FormSchema[0].Data[0].value="A"):await t.FormSchema[0].Data[0].config.options.push({name:t.$t("Assign"),value:"A"},{name:t.$t("Transfer"),value:"T"})},GetPrioritybyCompanyId:async function(){var t=this;await o["a"].GetPriorityData().then(async e=>{e.data.result.DATA.length>0&&(t.priorityList=e.data.result.DATA,t.priorityList.forEach((e,a)=>{t.FormSchema[0].Data[1].config.options.push({value:e.PRIORITY_ID,name:e.PRIORITY_NAME})}))})},GetDepartmentListForSupport:function(t){var e=this,a="moduleName=Ticketing&type="+t;o["a"].GetDDLData(a).then(t=>{if(t.data.DATA.length>0){if("A"==e.FormSchema[0].Data[0].value){var a={name:e.TransferTicketData.departmentName,value:e.TransferTicketData.departmentId};e.FormSchema[0].Data[2].config.options.some(t=>t.value===a.value)||e.FormSchema[0].Data[2].config.options.push(a),e.FormSchema[0].Data[2].value=a.value,e.FormSchema[0].Data[2].disabled=!0,e.FormSchema[0].Data[2].validationRules={required:!1},e.FormSchema[0].Data[3].validationRules={required:!0},e.onChangeDropdown()}else e.DepartmentList=t.data.DATA,e.DepartmentList.forEach((t,a)=>{e.FormSchema[0].Data[2].config.options.push({value:t.value,name:t.name})});e.$refs.assignTransfer.UpdateKeyValue()}})},GetDepartmentListbyCompanyForClient:async function(){var t=this;await o["a"].GetDepartmentListbyCompanyForClient().then(async e=>{e.data.length>0&&(t.FormSchema[0].Data[2].config.options=[],t.DepartmentList=e.data,t.DepartmentList.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({value:e.departmenT_ID,name:e.departmenT_NAME})}))})},BindCannedReply:async function(){var t=this,e="id=&moduleName=Ticketing&type=Ticketing_ReplyTemplate&search=&refId";await o["a"].GetDDLData(e).then((function(e){""!=e.data&&e.data.DATA.length>0&&e.data.DATA.forEach(e=>{t.FormSchema[0].Data[4].config.options.push(e)})}))},onChangeType:async function(t){var e=this;e.TicketType=t.target.value,"A"==e.TicketType&&(e.FormSchema[0].Data[3].validationRules.required=!0),"T"==e.TicketType&&(e.FormSchema[0].Data[3].validationRules.required=!1)},onChangeDropdown:async function(t){var e=this,a=t&&t.target?t.target.value:0,i=`departmentId=${a}&reqFrom=${e.TicketType}`;await o["a"].GetUserListByDepId(i).then(async t=>{t.data.length>0?e.FormSchema[0].Data[3].config.options=t.data:e.FormSchema[0].Data[3].config.options=[]}),e.$refs.assignTransfer.UpdateKeyValue()},onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),l=o.substring(r+1,o.length);e.fileExt+="."+l;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+l+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},onChangeTemplate:async function(t,e,a){var i=this,s=[];s=e.config.options,s.forEach(e=>{e.value==t.target.value&&(i.FormSchema[1].Data[1].value=e.first_value)})},onSubmit:async function(t,e){var a=this;a.ticketModel.TicketId=a.TicketId,a.ticketModel.transferType=a.FormSchema[0].Data[0].value,a.ticketModel.priorityId=a.FormSchema[0].Data[1].value,a.ticketModel.departmentId=a.FormSchema[0].Data[2].value,a.ticketModel.assignedToId=""===a.FormSchema[0].Data[3].value?0:a.FormSchema[0].Data[3].value,a.ticketModel.replyTemplate=a.FormSchema[0].Data[4].value,a.ticketModel.transferDescription=a.FormSchema[1].Data[1].value,a.ticketModel.fileData=a.fileData,a.ticketModel.moduleName=a.modulename,a.ticketModel.subModuleCode=a.submodulecode;var i=JSON.stringify(a.ticketModel);o["a"].TransferOrAssignTicket(i).then(t=>{try{null!=t.data&&""!=t.data&&"SUCCESS"==t.data.result.MSG?"A"==a.ticketModel.transferType?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("TICKET_ASSIGNED")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("TICKET_TRANSFER")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveClaim")}})},Close:function(){var t=this;t.FormSchema[0].Data[0].value=null,t.FormSchema[0].Data[1].value=null,t.FormSchema[0].Data[2].value=null,t.FormSchema[0].Data[3].value=null,t.FormSchema[0].Data[4].value=null,t.FormSchema[1].Data[1].value=null,t.FileName=null,t.file=null,t.FormSchema[1].Data[0].config.onChange=this.GetBase64String,t.$parent.isShowTransferTicket=!1}}},Wt=Vt,Ht=Object(d["a"])(Wt,Bt,Gt,!1,null,null,null),Kt=Ht.exports,jt=a("33e4"),zt=a("5437"),qt=a("78f9"),Yt=a("e8b2"),Jt={components:{ticketdetails:m,ThreadsList:_["a"],TicketNotes:g["a"],refreshKey:0,TicketAttachment:k["a"],AddEscalatePopUp:S,TicketClaim:R,TicketCalls:G,FollowUp:Dt["a"],ShowAttachmentData:Nt["a"],PartialTicketFeedback:ut,AddNoteData:Lt["a"],AddClaimData:E,MergeTicketData:$t,ticketupdate:Ut,transfertickets:Kt,MapComponent:jt["a"],modalReplyTicketpopup:zt["a"],WorkOrderTimerPopup:qt["a"],RelatedTicketList:z,TrackHistoryList:Q,WorkOrderList:Tt,VueEasyLightbox:Yt["a"],AddWorkOrderModal:p["a"],WorkOrderCardView:bt,PartialTicketConclusion:ot,FormClaimData:[]},data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!1,isShowEtaPipeLines:!1,isShowGetDirection:!0},isLoading:!1,ResponseTime:"00:00:00",ResolveTime:"00:00:00",TicketId:null,TicketNumber:null,AddWorkOrderModal:!1,TicketData:[],TicketDetailData:[],UserType:null,user_id:0,AssignToId:0,isTicketResolve:null,galleryImages:[],ConfigData:[],ShowWorkOrderTimer:"no",isTicketHOD:null,TicketThreadsData:[],ConclusionTicket:[],AttachmentData:[],NoteData:[],visible:!1,ClaimData:[],CallData:[],userstatus:"",isShowTicketDetail:!1,isShowConclusionForm:!1,isShowActivities:!1,isShowAddClaim:!1,isShowEscalate:!1,isShowNotes:!1,isShowClaims:!1,isShowCalls:!1,isShowRelatedticket:!1,isshowFolloupList:!1,isShowAddNote:!1,isShowMergeTicket:!1,isShowTicketUpdate:!1,isShowTransferTicket:!1,showAttachmentModal:!1,showReplyTicketModal:!1,isShowTrackHistory:!1,isShowWorkOrder:!1,isShowWOTimer:!1,UserStatus:null,mapObj:[],UtilityMapData:[],ticketType:null,isShowMap:!0,mapHeaderText:"Collapse Map",TicketDetailDataForPopup:[],PageNumber:1,PageSize:10,TotalRecords:0,ParentCompanyId:null,ParentCompanyName:null,ShowTimer:!1,AddEditText:"",SortBy:"",SortExp:"",noRecord:!1,index:0,isLocateorNonLocate:"",ListOfCCUsers:"",ticketStatus:"",isDisabledHeaderButton:!1,isShowTicketConclusion:!1,isShowTicketFeedback:!1,IsConclusionSave:!1,mapType:null,SourcePage:null,Showtab:1,isShowWorkList:!1,IsWorkOrderShow:!1,Status_id:null,userName:null,FormConclusionData:[],refreshKey:0,ShowSLATime:!1,SLATimeConfigValue:""}},mounted(){var t=this;const e=this.$route.query.source;t.SourcePage=e},created(){var t=this;t.str_ticket_id=t.$route.params.id,t.UserType=t.GetUserInfo.UserType,t.userName=t.GetUserInfo.Name,t.user_id=this.GetUserInfo.ID,t.Status_id=t.$route.query.status_id,t.FetchData(),t.UserCurrentStatus()},updated:function(){var t=this;setTimeout((function(){t.setHeaderForSelectedTab()}),500)},methods:{handleHide:function(){this.visible=!1},changeWorkOrderView:function(t){this.isShowWorkList="Card"!=t},GetNewData:function(){var t=this;t.refreshKey+=1},GetEditClaimData:function(){var t=this;t.isShowAddClaim=!0,t.refreshKey+=1},ancreplyExpandAllCollapseAll:async function(){var t=this;0==t.Showtab?(t.Showtab=1,$("#tab-ticket-content").find("#accordion").find(".collapse").addClass("show")):(t.Showtab=0,$("#tab-ticket-content").find("#accordion").find(".collapse").removeClass("show"))},openSpecificImage(t,e){var a=this,i={path:t,caption:e.split(".")[0]};a.galleryImages.push(i)},showImg:function(t){this.index=t,this.visible=!0,$("#div_ShowGpxFile").html("")},openStartPopUp:function(){var t=this;t.isShowWOTimer=!0},openEscalatePopUp:function(){var t=this;t.isShowEscalate=!0,t.ParentCompanyId=t.ParentCompanyId,t.ParentCompanyName=t.ParentCompanyName},urlChange:function(){const t=Object.assign({},this.$route.query);t.reload="reload",this.$router.push({query:t})},openStopPopUp:function(){var t=this,e={TicketId:t.TicketId,TrackId:0,RequestFor:"FSM",RequestForType:"STOP",IPAddress:""},a=JSON.stringify(e);t.confirmR(t.$t("AreYouSureToStopTimer"),!0,t.$t("StopTimer"),(function(e){t.Disabled=1,o["a"].StopTrackHistory(a).then(e=>{try{"Success"==e.data.status?(t.$parent.ShowTimer=!1,t.AddEditText="Add",t.Disabled=0,t.urlChange(),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("TimeTrack")]),"success",!0,t.$t("Alert")),document.getElementById("tab-trackhistory").click()):(t.ShowAlert(t.$t("AddedError",[t.$t("TimeTrack")]),"failure",!0,t.$t("Alert")),t.Disabled=0,t.Close())}catch(a){return HandleErrorOccured(a,"failure")}})}))},openReplyModel:function(){var t=this;t.showReplyTicketModal=!0},FetchData:async function(t){var e=this;e.isLoading=!0;var a=`id=${e.str_ticket_id}&moduleName=Ticketing&subModuleCode=Ticketing`;await o["a"].GetTicketDetails(a).then((function(a){e.isLoading=!1;let i={};e.ticketType=a.data.result.IS_FIELD_SERVICE,e.ConfigData=a.data.result.CONFIG_DATA;var s=e.ConfigData;if($.each(s,$.proxy((function(t,a){"ShowSLATime"==a.CORE_CONFIG_KEY&&(e.SLATimeConfigValue=a.CONFIG_DATA_VALUE)}),this)),e.SLATimeConfigValue.length>0){var o=e.SLATimeConfigValue.split("^");o.forEach((t,a)=>{e.UserType==t&&(e.ShowSLATime=!0)})}if(a.data.result.LEFTDATA.length>0){var r=a.data.result.LEFTDATA;e.TicketDetailDataForPopup=a.data.result.LEFTDATA,e.UtilityMapData=a.data.result.FSM_MAP_CONFIG,e.mapType=a.data.result.FSM_MAP_CONFIG[0].TYPE,r.forEach((function(t){"ticket_id"==t.name?i["ticketId"]=t.value:"sla_id"==t.name?i["TicketSlaId"]=t.value:"ticket_number"==t.name?i["ticket_number"]=t.value:"created_by"==t.name?i["createdBy"]=t.value:"assigned_to"==t.name?(i["assignedTo"]=t.value,e.AssignToId=t.value):"external_ticket_number"==t.name?i["external_ticket_number"]=t.value:"ticket_subject"==t.name?i["ticketSubject"]=t.value:"status_id"==t.name?i["status"]=t.value:"ticket_category_id"==t.name?i["ticketCategoryName"]=t.value:"priority_id"==t.name?i["priority"]=t.value:"created_at"==t.name?i["createdAt"]=t.value:"expected_resolution_date"==t.name?i["expectedResolutionDate"]=t.value:"ticket_department_id"==t.name?i["ticketDepartmentId"]=t.value:"location_nw"==t.name?i["location_nw"]=t.value:"location_se"==t.name?i["location_se"]=t.value:"created_by"==t.name?i["createdBy"]=t.value:"is_support_ticket"==t.name?i["isSupportTicket"]=t.value:"chain_id"==t.name?i["chainId"]=t.value:"response_time"==t.name?i["response_time"]=t.value:"resolve_time"==t.name&&(i["resolve_time"]=t.value)})),i["noOfNotes"]=a.data.result.NO_OF_NOTES,i["attachmentsCount"]=a.data.result.ATTACHMENTS_COUNT,i["noOfClaims"]=a.data.result.NO_OF_CLAIM,i["isFieldServiceTicket"]=1==a.data.result.IS_FIELD_SERVICE,i["departmentName"]=a.data.result.DEPARTMENT_NAME,i["followUpId"]=a.data.result.FOLLOW_UP_ID,i["raisedBy"]=a.data.result.RAISED_BY,i["raisedByDepartmentName"]=a.data.result.DEPT_NAME,i["createdUserTypeId"]=a.data.result.TICKET_CREATED_USER_TYPE,i["description"]=a.data.result.TICKET_DESCRIPTION,e.isLocateorNonLocate=a.data.result.IS_FSM_LOCATING,e.ListOfCCUsers=a.data.result.CC_USERS_NON_LOCATE,e.TicketData=i,e.TicketNumber=e.TicketData.ticket_number,e.TicketId=e.TicketData.ticketId,console.log("TicketId",e.TicketId),e.ParentCompanyId=a.data.result.PARENT_COMPANY_ID,e.ParentCompanyName=a.data.result.PARENT_COMPANY_NAME,e.TicketDetailDataForPopup.forEach((function(t){"Description"==t.display_name&&(t.value=i.description)})),"Closed"==e.TicketData.status||"Closed and Locked"==e.TicketData.status||"Cancelled"==e.TicketData.status||"Completed"==e.TicketData.status||"Draft"==e.TicketData.status?e.isDisabledHeaderButton=!0:e.isDisabledHeaderButton=!1,e.isTicketResolve=a.data.result.IS_TICKET_RESOLVE,"yes"==a.data.result.SHOW_Work_Order_Timer.CONFIGURATION_Work_Order_Timer?e.ShowWorkOrderTimer="yes":e.ShowWorkOrderTimer="no","1"==a.data.result.IN_COMPLETE_ENTRY&&(e.AddEditText="Edit"),e.isTicketHOD=a.data.result.IS_TICKET_HOD,e.UserStatus=a.data.result.STATUS_CODE.toLowerCase(),setTimeout((function(){e.LoadTab("activities",t)}),500);var l={latlong:e.TicketData.location_nw,refValue:e.TicketNumber,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:e.TicketData.location_nw,longitude:e.TicketData.location_nw},polygons:[{name:"",latLong:[{latitude:e.TicketData.location_nw,longitude:e.TicketData.location_nw}]}],address:"",priority:"",color_code:""};e.mapObj.push(l)}if(a.data.result.CONFIG_DATA.length>0){var n=a.data.result.CONFIG_DATA;n.forEach((function(t){"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(i["disallowedFileTypes"]=t.CONFIG_DATA_VALUE)}))}if(null!=e.TicketData.response_time&&null!=e.TicketData.resolve_time){var c=new Date(e.TicketData.response_time),d=new Date(e.TicketData.resolve_time),u=0,m=0;if(c){var p=new Date,h=c-p;u=Math.floor(h/6e4)}if(d){p=new Date,h=d-p;m=Math.floor(h/6e4)}setTimeout((function(){e.Timer(u,m)}),1e3),e.ShowSLATime=!0}}))},ShowHideMap:function(){var t=$("#icnToggleMap");0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map",t.hasClass("fa-angle-double-down")&&(t.removeClass("fa-angle-double-down"),t.addClass("fa-angle-double-up"))):(this.isShowMap=!1,this.mapHeaderText="Expand map",t.hasClass("fa-angle-double-up")&&(t.removeClass("fa-angle-double-up"),t.addClass("fa-angle-double-down")))},Timer:function(t,e){var a=this,i=t,s=e,o="1";void 0!=i&&"0"!=i||(o="0");var r="1";void 0!=s&&"0"!=s||(r="0");var l="yes";a.StartTimer(i,s,o,r,l)},StartTimer:function(t,e,a,i,s){var o=this,r=0,l=0;if("1"==a&&(r=t),"1"==i&&(l=e),"1"==a||"1"==i){var n=!1,c=!1,d=r,u=l;setInterval((function(){if("no"==s.toLowerCase())o.ResponseTime="--",o.ResolveTime="--";else{if(void 0!=d&&"0"!=t&&""!=t){var a=parseFloat(d,10),i=Math.floor(a/60),r=Math.floor((a-3600*i)/60),l=Math.floor(a-3600*i-60*r);i=i<10?"0"+i:i,r=r<10?"0"+r:r,l=l<10?"0"+l:l,n?(o.ResponseTime="-"+i+":"+r+":"+l,d+=1/60):(o.ResponseTime=i+":"+r+":"+l,d-=1/60,n=!1,d<0&&(n=!0))}else o.ResponseTime="00:00:00";if(void 0!=u&&"0"!=e&&""!=e){var m=parseFloat(u,10),p=Math.floor(m/60),h=Math.floor((m-3600*p)/60),f=Math.floor(m-3600*p-60*h);p=p<10?"0"+p:p,h=h<10?"0"+h:h,f=f<10?"0"+f:f,c?(o.ResolveTime="-"+p+":"+h+":"+f,u+=1/60):(o.ResolveTime=p+":"+h+":"+f,u-=1/60,c=!1,u<0&&(c=!0))}else o.ResolveTime="00:00:00"}}),1e3)}else o.ResponseTime="--",o.ResolveTime="--"},FetchActivityData:async function(t){var e=this;e.isLoading=!0;var a="ticketId="+e.str_ticket_id;await o["a"].GetThreadsList(a).then((function(a){e.isLoading=!1;var i=a.data.TicketThreads;e.TicketId=a.data.ticket_id;var s=!1;i.forEach((t,e)=>{"TICKET_FEEDBACK"===t.statusCode&&(s=!0)});var r="ticketId="+e.TicketId;o["a"].GetTicketConclusionData(r).then((function(a){if(e.ConclusionTicket=a.data.result,e.ConclusionTicket.length>0){var i=!1;for(let t=0;t<e.ConclusionTicket.length;t++){const a=e.ConclusionTicket[t];if("ACT"==a.STATUS_CODE){i=!0,e.IsConclusionSave=!0;break}}}if("Conclusion"!=t&&("Closed"!=e.TicketData.status&&"Closed and Locked"!=e.TicketData.status||"yes"!=e.isTicketResolve&&"CA"!=e.UserType||0!=e.ConclusionTicket.length&&0!=i||(e.isShowTicketConclusion=!0)),!s&&("Closed"==e.TicketData.status||"Closed and Locked"==e.TicketData.status)){var r="controller=Ticketing&action=TicketFeedbackQuestions";o["a"].CheckPrivilege(r).then((function(t){t.data&&(e.isShowTicketFeedback=!0,e.ticketIdField=e.TicketId,e.ticketStatusRecord=e.TicketData.status,e.departmentId=e.ticketDepartmentId)}))}})),i.length>0&&(e.TicketThreadsData=i)}))},GetNoteData:async function(){var t=this;t.isLoading=!0;var e="ticketId="+t.TicketId;await o["a"].GetWorkOrderNoteList(e).then((function(e){t.isLoading=!1,e.data.length>0?(t.NoteData=e.data,t.TicketData.noOfNotes=e.data.length,t.GetAttachmentData()):t.NoteData=[]}))},GetClaimData:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.TicketId}&claimId=0&isHod=`;await o["a"].TicketClaimList(e).then((function(e){t.isLoading=!1,null!=e.data?(t.ClaimData=e.data,t.TicketData.noOfClaims=e.data.claim.length,t.refreshKey+=1):t.ClaimData=[]}))},GetCallData:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.TicketId}&subModuleCode=Ticketing&reqFrom=`;await o["a"].GetCallList(e).then((function(e){t.isLoading=!1,null!=e.data?t.CallData=e.data:t.CallData=[]}))},openAttachmentModel:function(){var t=this;t.showAttachmentModal=!0,$("#divAttachment").scrollTop(0)},GetAttachmentData:function(){var t=this;t.galleryImages=[],t.AttachmentData=[],t.galleryFilesView=[],t.isLoading=!0;var e="ticketId="+t.TicketId;o["a"].GetTicketFiles(e).then((function(e){t.isLoading=!1,""!=e.data.result&&e.data.result.DATA.length>0?(t.AttachmentData=e.data.result.DATA,t.TicketData.attachmentsCount=e.data.result.DATA.length):(t.TicketData.attachmentsCount=[],t.AttachmentData=[])}))},async LoadTab(t,e){var a=this;"activities"==t?(a.isShowCalls=!1,a.isShowClaims=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1,a.isShowNotes=!1,a.isShowActivities=!0,a.isShowTicketDetail=!0,a.isShowConclusionForm=!0,a.FetchActivityData(e)):"notes"==t?(await a.GetNoteData(),a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowCalls=!1,a.isShowClaims=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1,a.isShowNotes=!0):"attachments"==t?(await a.GetAttachmentData(),a.isShowActivities=!1,a.isShowConclusionForm=!1,a.isShowTicketDetail=!1,a.isShowNotes=!1,a.isShowCalls=!1,a.isShowClaims=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1):"claims"==t?(await a.GetClaimData(),a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowNotes=!1,a.isShowCalls=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1,a.isShowClaims=!0):"calls"==t?(await a.GetCallData(),a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowNotes=!1,a.isShowClaims=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1,a.isShowCalls=!0):"relatedticket"==t?(a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowNotes=!1,a.isShowCalls=!1,a.isShowClaims=!1,a.isShowTrackHistory=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!0):"trackhistory"==t?(a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowNotes=!1,a.isShowCalls=!1,a.isShowClaims=!1,a.isShowWorkOrder=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!0):"workorder"==t&&(a.isShowActivities=!1,a.isShowTicketDetail=!1,a.isShowConclusionForm=!1,a.isShowNotes=!1,a.isShowCalls=!1,a.isShowClaims=!1,a.isShowRelatedticket=!1,a.isShowTrackHistory=!1,a.isShowWorkOrder=!0,a.isShowWorkList=!0,1==a.IsWorkOrderShow&&(a.isShowWorkList=!1,a.isShowWorkOrder=!1,setTimeout((function(){a.isShowWorkList=!0,a.isShowWorkOrder=!0}),1e3)))},UserCurrentStatus:function(){var t=this;if("online"==t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data,t.userstatus=e.status_code}))}));else if("online"!=t.userstatus&&""!=t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}));else if(""==t.userstatus){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}},UpdateTicket:async function(){var t=this;t.isShowTicketUpdate=!0},AddWorkOrder:async function(){var t=this;t.AddWorkOrderModal=!0}}},Xt=Jt,Zt=Object(d["a"])(Xt,i,s,!1,null,null,null);e["default"]=Zt.exports},ec70:function(t,e,a){var i=a("73ad");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("8fba835e",i,!0,{sourceMap:!1,shadowMode:!1})},fc96:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[t._l(t.AttachmentList,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),e("div",{staticClass:"box border positionrelative float-left w-100"},[e("div",{staticClass:"default-tags"},[e("div",{staticClass:"defaultpic_control"},["FSM"==t.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?e("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:t.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-placement":"left"},on:{click:function(e){return t.openVideoPlayer(a.C[0].ATTACHMENTFULLPATH,a.ATTACHMENT_NAME,"",a.GEOFILE_PATH)}}},[e("em",{staticClass:"fa fa-globe"})]):t._e(),1==t.ListViewAttachment&&1==t.CheckExtension(a.attachment_desc,a.GEOFILE_PATH)?e("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:t.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(e){return t.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[e("em",{staticClass:"fa fa-eye"}),e("br")]):t._e(),e("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:t.$t("DownloadFile"),"data-placement":"left"},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"}),e("br")]),a.CREATED_BY==t.UserId?e("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:t.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash text-danger"}),e("br")]):t._e()])]),e("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t.setImageIcon(a)?"word-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-text-o"}):t._e():e("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:t.setImageIcon(a),alt:""}}):e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),e("hr",{staticClass:"my-1"}),e("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[e("div",{staticClass:"col-12 textelipsis px-2"},[t._v(t._s(a.attachment_name))]),e("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[e("small",{staticClass:"float-left textelipsis col-6 p-0"},[e("span",[t._v(t._s(a.PostedBy))])]),e("small",{staticClass:"float-right col-6 text-right p-0"},[t._v(t._s(t.$options.filters.formatDateTime(a.CREATED_AT)))])])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2),t.ShowGPXFile?e("ShowGPXFile",{attrs:{GpxFileXmlData:t.GpxFileXmlData,videoFilePath:t.videoFilePath,gpxFilePath:t.gpxFilePath}}):t._e()],1)},s=[],o=a("9769"),r=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("ViewOnMap")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{attrs:{id:"video_player_box"}},[e("div",{staticStyle:{position:"absolute",top:"249px",left:"16%",color:"#FFF","font-size":"36px !important",display:"none"},attrs:{id:"div_videoLoad"}},[t._v("Loading...")]),e("input",{attrs:{type:"hidden",id:"hiddn_XmlFile"},domProps:{value:t.GpxFile}}),e("input",{attrs:{type:"hidden",id:"hiddn_GpxXmlData"},domProps:{value:t.GpxFileXmlData}}),e("video",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"my_video",preload:"none"}},[e("source",{attrs:{src:t.videoFilePath}})])]),e("div",{staticClass:"dDataDropZone",attrs:{id:"gpxCtr"}},[e("div",{attrs:{id:"intro"}},[e("div",{staticClass:"map_canvas map_ipadcontrol",staticStyle:{"min-height":"496px","min-width":"600px"},attrs:{id:t.mapContainer}})])]),e("a",{staticClass:"bg-primary text-white map-botton change-map-icon",attrs:{href:"javascript:;",title:t.MapTitle},on:{click:t.changeMapViewForGpx}},[e("i",{class:t.MapClass})]),t._m(0),t._m(1)])])])])])])},l=[function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"video_controls_bar"}},[e("div",[e("button",{staticClass:"btn btn-info",staticStyle:{width:"90px",float:"left"},attrs:{id:"playpausebtn"}},[t._v("Pause")]),e("input",{staticClass:"slider",staticStyle:{width:"80%"},attrs:{id:"seekslider",type:"range",min:"0",max:"100",value:"0",step:"1"}}),e("span",{attrs:{id:"curtimetext"}},[t._v("00:00")]),t._v(" / "),e("span",{attrs:{id:"durtimetext"}},[t._v("00:00")])])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"none"},attrs:{id:"appTitle"}},[e("span",{attrs:{id:"appName"}},[t._v("d3.gpx")]),t._v(" "),e("span",{staticClass:"sample"})])}],n=(a("14d9"),a("e11e")),c=a.n(n),d=(a("6cc5"),a("bfab"),{props:{GpxFileXmlData:{type:String,required:!0},videoFilePath:{type:String,required:!0},gpxFilePath:{type:String,required:!0}},data(){return{isLoading:!1,map:null,mapContainer:"Gpx",mapTypeForGpx:"streets-v11",GpxFile:"",vid:"",playbtn:"",seekslider:"",curtimetext:"",durtimetext:"",d3gpx:"",MapClass:"fa fa-map-o",MapTitle:"Street View"}},created:function(){var t=this;let e=document.createElement("script");e.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"),document.head.appendChild(e),setTimeout(()=>{this.initMap(),t.intializePlayer()},2e3)},methods:{initMap:function(){var t=this;t.map=c.a.map(t.mapContainer).setView([51.505,-.09],13),c.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t.map);var e=t.gpxFilePath;new c.a.GPX(e,{async:!0})},changeMapViewForGpx:function(){var t=this;"fa fa-map-o"==t.MapClass?(t.mapTypeForGpx="streets-v11",t.MapClass="fa fa-map",t.MapTitle="Satellite View"):(t.mapTypeForGpx="satellite-v9",t.MapClass="fa fa-map-o",t.MapTitle="Street View"),t.getGPXFile(),$(".map-botton.change-map-icon").tooltip("dispose"),setTimeout((function(){$(".map-botton.change-map-icon").tooltip()}),100)},getGPXFile:function(){var t=this;document.getElementById("hiddn_XmlFile").value;var e=(new DOMParser).parseFromString(document.getElementById("hiddn_GpxXmlData").value,"text/xml"),a={d:e,t:t.mapTypeForGpx},i=i||function(){var t,e,a,i,s,o,r,l,n,c,d,u,m,p,h,f,v,C,T,S,_,g,k,y,b=-1,D=!1,A=[],I=[],w=[],F=[],E=[],$=[],L=[],N=[],x=d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]]),R={top:10,right:10,bottom:10,left:10},O=650-R.left-R.right,M=50-R.bottom-R.top,P=0,U=0,B=!1,G=.2,V=0,W=[.1,.001,625e-7,625e-8],H=0,K=[],j=!0,z=6,q=function(t){if(d3.event&&d3.event.sourceEvent){U=C.invert(d3.mouse(this)[0]);var s=Math.abs(window.innerHeight-H)*(2/3),o=Math.min(Math.abs(d3.event.sourceEvent.y-H),s),r=o/s,l=z;return V=0,r>=0&&r<.25?(V=0,l=z):r>=.25&&r<.5?(V=1,l=4.242640687119285):r>=.5&&r<.75?(V=2,l=3):r>=.75&&r<=1&&(V=3,l=2.1213203435596424),_.transition().duration(200).attr("r",l),X(),void J()}t&&S.call(T.extent([e[0],e[0]])).call(T.event),P=T.extent()[0],_.attr("cx",C(P));var n=d3.time.format("%d %b %Y %I:%M:%S %p"),c=Math.round(P),d=n(new Date(c));d3.select("div#console").text(d),d3.select("svg#testArea circle.track").attr("transform",(function(t){return"translate("+h([a(new Date(c)),i(new Date(c))])+")"})),ot(new Date(c))},Y=function(){U=P},J=function(t){if(B)return!1;B=!0,d3.select("button#playpausebtn").attr("disabled","true"),d3.timer((function(){var t=W[V];(t>G||t<0)&&(t=G),console.log("first Current Value: - "+P),P=Math.abs(P-U)<.001?U:U*t+P*(1-t),console.log("Current Value: - "+U),S.call(T.extent([P,P])).call(T.event);var e=Math.round(P/1e3)!==Math.round(U/1e3);return e||d3.select("button#playpausebtn").attr("disabled",null),!(B=e)}),200)},X=function(){clearTimeout(b),b=-1,D=!1,B=!1,d3.select("button#playpausebtn").text("Play")},Z=function(t){b=setTimeout((function(){if(B)return!1;B=!0,D=!0,d3.select("button#playpausebtn").text("Pause"),U=e[1];var t=new Date(T.extent()[0]),a=new Date;d3.timer((function(){var e=new Date-a;P=t.getTime()+e,S.call(T.extent([P,P])).call(T.event),console.log(P);var i=Math.round(P/1e3)<Math.round(U/1e3),s=!B||!(B=i)||!D||-1==b;return s&&(d3.select("button#playpausebtn").text("Play"),X()),s}))}),t?0:3e3)},Q=function(t,e){return t<<e<0?Q(t,--e):t<<e},tt=function(){var t=at(k),e=t[0],a=t[1],i=f.bounds(p),s=Q(.95/Math.max((i[1][0]-i[0][0])/e,(i[1][1]-i[0][1])/a),8);s=Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),s=Math.min(s,v.scaleExtent()[1]),s=Math.max(s,v.scaleExtent()[0]);var o=h.scale(s/2/Math.PI)(d3.geo.centroid(p)),r=h([0,0]),l=[e/2-(o[0]-r[0]),a/2-(o[1]-r[1])];v.scale(s).translate(l)},et=function(){var e=!0;d3.event&&(r==d3.event.scale?(e=!1,j=!1):(e=!0,j=!0),j&&(K=d3.event.translate,j=!1),r=d3.event.scale);var s=d3.geo.tile().size(at(k)).scale(v.scale()).translate(v.translate())();if(h.scale(v.scale()/2/Math.PI).translate(v.translate()),e||!d3.event)k.select("path.trackpath").attr("d",f).attr("transform",null);else{var o=d3.event.translate[0]-K[0],l=d3.event.translate[1]-K[1];k.select("path.trackpath").attr("transform");k.select("path.trackpath").attr("transform","translate("+[o,l]+")")}var n=Math.round(T.extent()[0]);k.select("circle.track").attr("transform",(function(t){return"translate("+h([a(new Date(n)),i(new Date(n))])+")"}));var c=y.attr("transform","scale("+s.scale+")translate("+s.translate+")").selectAll("image").data(s,(function(t){return t}));c.exit().remove(),c.enter().append("image").attr("xlink:href",(function(e){return"https://api.mapbox.com/styles/v1/mapbox/"+t+"/tiles/"+e[2]+"/"+e[0]+"/"+e[1]+"?access_token=pk.eyJ1Ijoic2VxdWVsZ3JvdXAiLCJhIjoiY2pmMHUyaDhjMDM2djJxbG5iMDJ5aTB5dyJ9.V1L6SU58S2GIyFS2BP20SA"})).attr("width",1).attr("height",1).attr("x",(function(t){return t[0]})).attr("y",(function(t){return t[1]}))},at=function(t){return[parseInt(t.style("width"),10),parseInt(t.style("height"),10)]},it=function(t,e,a){if(e.length==a.length){var i=d3.extent(e),s=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=s[0]&&void 0!=s[1]){for(var r=[],c=0;c<e.length;c++)r.push({date:e[c],speed:a[c]});l=300,n=100,u=d3.time.scale().range([0,l]).domain(i).clamp(!0),m=d3.scale.linear().range([n,0]).domain(s).clamp(!0),o=d3.time.scale().domain(e).range(a).clamp(!0);var d=d3.svg.line().x((function(t){return u(t.date)})).y((function(t){return m(t.speed)}));t.style("float","left").style("width",l+3*R.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var p=t.append("svg").attr("id","speedChart").attr("class","dataChart").attr("width",l+"px").attr("height",n+"px").style("padding-left",4*R.left+"px").style("padding-right",3*R.left+"px").style("padding-top",2*R.left+"px").style("padding-bottom",2*R.left+"px").append("g"),h=d3.svg.axis().scale(u).orient("bottom").tickFormat(x).ticks(5).outerTickSize(0),f=d3.svg.axis().scale(m).orient("left").tickFormat((function(t){return d3.format("s")(3.6*t)})).ticks(5).outerTickSize(0).innerTickSize(-l);p.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(n+3)+")").call(h),p.append("g").attr("class","y chartAxis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Speed (kph)"),p.append("path").datum(r).attr("class","chartLine").attr("d",d)}}},st=function(t,e,a){if(e.length==a.length){var i=d3.extent(e),o=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=o[0]&&void 0!=o[1]){for(var r=[],u=0;u<e.length;u++)r.push({date:e[u],ele:a[u]});l=300,n=100,c=d3.time.scale().range([0,l]).domain(i).clamp(!0),d=d3.scale.linear().range([n,0]).domain(o).clamp(!0),s=d3.time.scale().domain(e).range(a).clamp(!0);var m=d3.svg.line().x((function(t){return c(t.date)})).y((function(t){return d(t.ele)}));t.style("float","left").style("width",l+3*R.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var p=t.append("svg").attr("id","elevationChart").attr("class","dataChart").attr("width",l+"px").attr("height",n+"px").style("padding-left",3*R.left+"px").style("padding-right",3*R.left+"px").style("padding-top",2*R.left+"px").style("padding-bottom",2*R.left+"px").append("g"),h=d3.svg.axis().scale(c).orient("bottom").tickFormat(x).ticks(5).outerTickSize(0),f=d3.svg.axis().scale(d).orient("left").tickFormat(d3.format("s")).ticks(5).outerTickSize(0).innerTickSize(-l);p.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(n+3)+")").call(h),p.append("g").attr("class","y chartAxis").call(f).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Elevation (m)"),p.append("path").datum(r).attr("class","chartLine").attr("d",m)}}},ot=function(t){var e="elevationFocus",a="speedFocus",i=d3.select("svg#elevationChart g"),r=d3.select("svg#speedChart g"),l=i.select("g#"+e),n=r.select("g#"+a);if(!i.empty()&&l.empty()&&(l=i.append("g").attr("id",e),l.append("circle").attr("id",e+"Circle").attr("class","chartCircle").attr("r",2.5),l.append("text").attr("id",e+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!r.empty()&&n.empty()&&(n=r.append("g").attr("id",a),n.append("circle").attr("id",a+"Circle").attr("class","chartCircle").attr("r",2.5),n.append("text").attr("id",a+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!i.empty()){var p=s(t);l.attr("transform","translate("+c(t)+","+d(p)+")"),l.select("text#"+e+"Text").text(d3.format(",.2f")(p)+" m")}if(!r.empty()){var h=o(t);n.attr("transform","translate("+u(t)+","+m(h)+")"),n.select("text#"+a+"Text").text(d3.format(",.2f")(3.6*h)+" kph")}};return{play:function(){Z(!0)},pause:function(){X()},scroll:function(){J()},stopScroll:function(){Y()},setPointerPosition:function(t){var a=Math.round(A.length*(t/100)-1);a>0?S.call(T.extent([A[a],A[a]])).call(T.event):S.call(T.extent([e[0],e[0]])).call(T.event)},loadGPXViewer:function(s){var o=s.d;t=s.t,A=[],I=[],w=[],F=[],E=[],$=[],L=[],N=[],X(),Y();d3.select(o).selectAll("trk").selectAll("trkseg").selectAll("trkpt").each((function(){var t=parseFloat(d3.select(this).attr("lat")),e=parseFloat(d3.select(this).attr("lon"));w.push(t),I.push(e),N.push([e,t]),A.push(d3.select(this).select("time").node()?new Date(d3.select(this).select("time").text()):null),F.push(d3.select(this).select("ele").node()?parseFloat(d3.select(this).select("ele").text()):null),E.push(d3.select(this).select("course").node()?parseFloat(d3.select(this).select("course").text()):null),$.push(d3.select(this).select("speed").node()?parseFloat(d3.select(this).select("speed").text()):null),L.push(d3.select(this).select("pdop").node()?parseFloat(d3.select(this).select("pdop").text()):null)}));if(N.length<=1)return alert("GPX file should contain at least a track, made of at least one segment containing waypoints."),!1;d3.select("body").selectAll("div#gpxCtr *, div#appTitle div#playbackControl").remove(),e=d3.extent(A),a=d3.time.scale().domain(A).range(I).clamp(!0),i=d3.time.scale().domain(A).range(w).clamp(!0),p={type:"LineString",coordinates:N},h=d3.geo.mercator().scale(1024/Math.PI),f=d3.geo.path().projection(h),v=d3.behavior.zoom().scaleExtent([1,"Infinity"]).scale(2*h.scale()*Math.PI).translate([window.innerWidth/2,window.innerHeight/2]).on("zoom",et),C=d3.time.scale().domain(e).range([0,O]).clamp(!0),T=d3.svg.brush().x(C).extent([0,0]).on("brush",q).on("brushstart",(function(){d3.event&&d3.event.sourceEvent&&(H=d3.event.sourceEvent.y)})).on("brushend",(function(){d3.event&&d3.event.sourceEvent&&(0!=V&&Y(),_.transition().duration(200).attr("r",z))}));var r=d3.select("div#appTitle").append("div").attr("id","playbackControl"),l=d3.select("body div#gpxCtr"),n=(r.append("div").attr("id","console").style("font-size","smaller").style("font-weight","normal").style("position","absolute").style("line-height","45px").style("right","10px").style("top","0px").style("padding-right","10px"),r.append("button").attr("id","playpausebtn").style("right",O+R.left+R.right+10+170+10+"px").text("Play").on("click",(function(t){D||-1!=b?X():Z(!0)})),r.append("svg").attr("id","timeslider").attr("width",O+R.left+R.right+10).attr("height",M+R.top).style("position","absolute").style("right","170px").style("top","0px").append("g").attr("transform","translate("+R.left+",0)")),c=n.append("g").attr("class","axisLine").attr("transform","translate(0,"+(M/2+3)+")").style("font-size","0 pt").call(d3.svg.axis().scale(C).tickFormat(x).tickValues(null));c.selectAll("text").remove(),c.selectAll("path").remove(),n.append("g").attr("class","x axis").attr("transform","translate(0,"+M/2+")").style("font-size","6 pt").style("fill","#fff").call(d3.svg.axis().scale(C).tickFormat(x).tickPadding(12).tickSize(0)).select(".domain").style("stroke","#111").select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("class","halo").style("stroke-opacity",1).style("stroke","#fff"),S=n.append("g").attr("class","slider").call(T),S.selectAll(".extent,.resize").remove(),S.select(".background").attr("height",M).attr("fill","#111").style("cursor","ew-resize"),_=S.append("circle").attr("class","handle").attr("transform","translate(0,"+M/2+")").attr("r",z).style("fill","#fff"),g=l.append("div").style("width","100%").style("height","100%"),k=g.append("svg").attr("id","testArea").style("height","100%").style("width","100%").call(v),y=k.append("g"),k.append("path").datum(p).attr("class","trackpath").attr("d",f).attr("fill","none").attr("stroke","rgb(222,45,38)").attr("stroke-width",1),k.append("circle").attr("class","track").attr("id","testTrack").attr("r",4).style("fill","rgb(222,45,38)").style("stroke-width",1).style("stroke","rgb(0,0,0)");var d=l.append("div").attr("id","chartGroup");return st(d.append("div"),A,F),it(d.append("div"),A,$),tt(),et(),setTimeout((function(){q(!0)}),200),!0}}}();t.d3gpx=i,i.loadGPXViewer(a)},playPause:function(){var t=this;t.vid.paused?(100==t.seekslider.value&&(t.seekslider.value=0,t.d3gpx.setPointerPosition(t.seekslider.value)),t.vid.play(),t.d3gpx.play(),t.playbtn.innerHTML="Pause"):(t.vid.pause(),t.d3gpx.pause(),t.playbtn.innerHTML="Play")},vidSeek:function(){var t=this;t.vid.pause(),t.d3gpx.pause(),t.playbtn.innerHTML="Play";t.vid.duration,t.seekslider.value;t.d3gpx.setPointerPosition(t.seekslider.value)},seektimeupdate:function(){var t=this,e=t.vid.currentTime*(100/t.vid.duration);t.seekslider.value=e;var a=Math.floor(t.vid.currentTime/60),i=Math.floor(t.vid.currentTime-60*a),s=Math.floor(t.vid.duration/60),o=Math.floor(t.vid.duration-60*s);i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),s<10&&(s="0"+s),t.curtimetext.innerHTML=a+":"+i,t.durtimetext.innerHTML=s+":"+o},intializePlayer:function(){var t=this;$(".map-botton.change-map-icon").tooltip(),t.vid=document.getElementById("my_video"),t.playbtn=document.getElementById("playpausebtn"),t.seekslider=document.getElementById("seekslider"),t.curtimetext=document.getElementById("curtimetext"),t.durtimetext=document.getElementById("durtimetext"),t.playbtn.addEventListener("click",t.playPause,!1),t.seekslider.addEventListener("change",t.vidSeek,!1),t.seekslider.addEventListener("input",t.vidSeek,!1),t.vid.addEventListener("timeupdate",t.seektimeupdate,!1),t.vid.onwaiting=function(){t.d3gpx.pause()},t.vid.onplaying=function(){t.d3gpx.play()},t.seekslider.value=0,t.getGPXFile(),t.seektimeupdate()},Close:function(){this.$parent.ShowGPXFile=!1}}}),u=d,m=(a("b586"),a("2877")),p=Object(m["a"])(u,r,l,!1,null,null,null),h=p.exports,f={components:{ShowGPXFile:h},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:"FSM",UserId:null,isLoading:!1,index:0,GpxFileXmlData:"",ShowGPXFile:!1,videoFilePath:"",gpxFilePath:""}},watch:{AttachmentData:function(t){var e=this;e.AttachmentList=t,e.AttachmentList.length>0?e.NoRecords=!1:(e.AttachmentList=[],e.NoRecords=!0)}},created(){var t=this;t.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{t.UserId=t.GetUserInfo.ID,t.GalleryImages=t.galleryImages,"undefined"!=typeof t.AttachmentData&&t.AttachmentData.length>0?(t.RequestFrom=t.AttachmentData.RequestFrom,t.AttachmentList=t.AttachmentData,t.NoRecords=!1):(t.AttachmentList=[],t.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(t,e){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",t,e),a.$parent.visible=!0},CheckExtension(t,e){var a=0;if(null==e||""==e)return"jpg"!=JSON.parse(t).Extension&&"jpeg"!=JSON.parse(t).Extension&&"png"!=JSON.parse(t).Extension&&"gif"!=JSON.parse(t).Extension||(a=1),a},setImageIcon(t){var e=this,a="/Content/Responsive/images/",i=e.getExtension(t.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(t){let e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":e.slice(a+1)},openVideoPlayer:function(t,e,a,i){var s=this;s.videoFilePath=t,s.gpxFilePath=i;var r=`videoFilePath=${t}&videoFileName=''&videoFileType=${a}&gpxFilePath=${i}`;o["a"].ShowGpxPlayer(r).then((function(t){s.GpxFileXmlData=t.data,s.ShowGPXFile=!0}))},deleteAttachment:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a="attachmentid="+t.ticket_attachment_id;o["a"].DeleteIncidentAttachment(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&"SUCCESS"==t.data.result.MSG?("AttachmentInDetail"==e.viewMode?document.getElementById("tab-attachment").click():"AttachmentInWorkOrderDetail"==e.viewMode?document.getElementById("tab-attachments").click():e.$parent.FetchAttachmentData(),e.ticket_attachment_id>0?e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")):(e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")),e.$emit("close"))):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachment_path}&fileName=${t.attachment_name}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachment_desc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.attachment_name),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},v=f,C=Object(m["a"])(v,i,s,!1,null,null,null);e["a"]=C.exports}}]);
//# sourceMappingURL=chunk-b41eccdc.js.map