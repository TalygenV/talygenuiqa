(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c444b066","chunk-6b4a4de2"],{"036f":function(t,e,a){"use strict";a("6f27")},"0c69":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoteList.length>0?[e("div",{staticClass:"row card-view no-bg custom-box-width"},t._l(t.NoteList,(function(a,o){return e("div",{key:o,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[e("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?e("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:t.$t("Image")}}):e("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),e("div",{staticClass:"card-detail-main1 dynamiclistol"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.CREATED_BY_NAME))])]),e("hr",{staticClass:"my-2"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"260px"}},[e("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:t._s(a.NOTE)}})])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.CREATED_AT?t.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),e("div",{staticClass:"card-action"},[e("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})]),1!=t.ListNoteData?e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:t.$t("EditNotes"),alt:t.$t("EditNotes"),href:"javascript:;"},on:{click:function(e){return t.EditNote(a)}}},[e("em",{staticClass:"fa fa-edit"})]):t._e()])])])])})),0)]:t._e(),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center d-block no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)},i=[],s=a("9769"),n={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(t){var e=this;e.NoteList=t,e.NoteList.length>0?e.NoRecords=!1:(e.NoteList=[],e.NoRecords=!0)}},created(){setTimeout(()=>{var t=this;t.UserId=t.GetUserInfo.ID,t.ListNoteData=this.ListNoteData,null!=t.NoteData?(t.NoteList=t.NoteData,t.NoRecords=!1):(t.NoRecords=!0,t.NoteList=[])},2e3)},methods:{EditNote:function(t){var e=this;e.$parent.noteId=t.NOTE_ID,e.$parent.ticketId=t.TICKET_ID,e.$parent.note=t.NOTE,e.$parent.isShowAddNote=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.ATTACHMENT_PATH}&fileName=${t.ATTACHMENT_NAME}`;s["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const o=a.data,i=`data:${JSON.parse(t.ATTACHMENT_DESC).ContentType};base64,${o}`;var s=document.createElement("a");s.href=i,s.setAttribute("download",t.ATTACHMENT_NAME),document.body.appendChild(s),s.click()})),e.isLoading=!1}}},r=n,l=a("2877"),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports},1890:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageIncident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddEditIncidentType"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},i=[],s=a("9769"),n={props:{IncidentTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){this.FetchData()},methods:{FetchData:function(){var t=this,e="Id="+t.IncidentTypeId;s["a"].FetchDataByIncidentId(e).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&(t.FormSchema[0].Data[0].value=e.data.result.DATA[0].TYPE_NAME,t.FormSchema[0].Data[1].value=e.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$emit("close"),this.$parent.showReportIncidentModal=!1},onSubmit(t,e){var a=this,o={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:t.IncidentType,ParentIncidentId:"",ModuleName:"FSM",StatusId:1001,Description:t.DESCRIPTION},i=JSON.stringify(o);s["a"].SaveIncidentType(i).then(t=>{"Success"==t.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.FetchRecords()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},r=n,l=a("2877"),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports},"33e4":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"container-fluid mt-2"},[e("div",[e("div",{staticClass:"row mt-0.5",attrs:{id:"checkForZone"}},["Google"==t.mapType&&1==t.config.isShowSearchBox?e("div",{staticClass:"col-lg-5 col-sm-12"},[e("div",{staticClass:"form-group d-flex"},[e("div",{staticClass:"input-group customsearchbox divcityshown"},[1==t.config.isShowSearchBox?e("input",{staticClass:"form-control",attrs:{type:"text",id:"pac-input",maxlength:"50",placeholder:"Enter Your Location or Zip Code"}}):t._e()])])]):t._e(),e("div",{staticClass:"col-lg-3 col-sm-12"},[void 0!=t.config&&1==t.config.isShowCurrentLocation?e("div",{staticClass:"form-group"},[e("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:t.CurrentLocation}},[t._v("Use my location")])]):t._e()])]),e("div",{staticClass:"search"},[e("div",{staticClass:"map-result"},[e("div",{staticClass:"map-actions"},[void 0!=t.config&&1==t.config.isShowGetDirection?e("span",{staticClass:"save legends_low"},[1==t.config.isShowGetDirection?e("a",{class:{"mp-active":0==t.showSetting,"mg-success":1==t.showSetting},attrs:{href:"javascript:;",title:"GetDirection"},on:{click:t.GetDirection}},[e("em",{staticClass:"fa fa-map-marker"})]):t._e()]):t._e(),t._v("  "),void 0!=t.config&&1==t.config.isShowLocator?e("span",{staticClass:"save legends_low"},[1==t.config.isShowLocator?e("a",{class:{"mp-active":0==t.showSetting,"mg-success":1==t.showSetting},attrs:{href:"javascript:;",title:"View Locator on map"},on:{click:t.ViewLocatorOnMap}},[e("em",{staticClass:"fa fa-map-marker"})]):t._e()]):t._e(),t._v("  "),void 0!=t.config&&1==t.config.isShowEtaMap?e("span",{staticClass:"edit legends_profile"},[1==t.config.isShowEtaMap?e("a",{attrs:{href:"javascript:;",title:"ETA Map"},on:{click:function(e){return t.LoadLocatorDataonMap("locator")}}},[e("em",{staticClass:"fa fa-map"})]):t._e()]):t._e(),void 0!=t.config&&1==t.config.isShowEtaPipeLines?e("span",{staticClass:"edit legends_high esri_prof"},[t._m(0),e("div",{staticClass:"dropdown"},[t._m(1),e("div",{staticClass:"dropdown-menu esri_prof_data",staticStyle:{display:"block"}},[t._m(2),e("div",{staticClass:"w-100 mb-2"},t._l(t.UtilityMapData,(function(a,o){return e("a",{key:o,staticClass:"dropdown-item p-0",attrs:{href:"javascript:;"}},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[e("input",{staticClass:"custom-control-input dynamic customcheckboxUtilityMap",attrs:{type:"checkbox"}}),e("label",{staticClass:"custom-control-label pt-1",attrs:{type:"checkbox"}},[e("label",{staticClass:"font-weight-bold"},[t._v(t._s(a.LAYER_NAME))])])])])})),0),e("div",[e("a",{staticClass:"btn btn-primary d-block text-white py-2",attrs:{href:"javascript:;",title:"Go"},on:{click:t.ShowUtilityMap}},[t._v("Go"),e("i",{staticClass:"fa fa-angle-double-right pl-2"})])])])])]):t._e()]),t.showSaveZone?e("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"0px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:t.OpenSaveZone}},[t._m(3)]):t._e(),t.showDeleteFeature?e("div",{staticStyle:{position:"absolute",right:"1670px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:t.DeleteFeature}},[t._m(4)]):t._e(),e("div",{staticClass:"map"},[e("div",{staticClass:"map_canvas map_ipadcontrol",style:{"min-height":void 0==t.mapHeight?"500px":t.mapHeight,"min-width":void 0==t.mapWidth?"100%":t.mapWidth},attrs:{id:t.mapContainer}}),e("div",{staticClass:"w-100 float-left",staticStyle:{position:"absolute",top:"0px"}},[0==t.showSetting?e("a",{staticClass:"showduration anchideduration",attrs:{title:"Hide"},on:{click:t.ShowTravelMode}},[t._v("Hide")]):t._e(),1==t.showSetting?e("a",{staticClass:"showduration ancshowduration",attrs:{title:"Show Setting"},on:{click:t.ShowTravelMode}},[t._v("Show Setting")]):t._e(),e("div",{staticClass:"position-absolute float-left my24 mx24 bg-gray-faint round settingPopup d-none",staticStyle:{"z-index":"999999"}},[e("div",{attrs:{id:"params"}},[t._m(5),t._v(" "),e("h4",{staticClass:"txt-m font-weight-bold"},[t._v("Choose Travel Mode:")]),t._m(6),e("h4",{staticClass:"txt-m font-weight-bold"},[t._v("Choose Maximum Duration:")]),e("div",{staticClass:"w-100 float-left",staticStyle:{"margin-bottom":"15px"}},[e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:t.time},on:{onChange:function(e){return t.TravelMode(t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes10")])]),e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:2*t.time},on:{onChange:function(e){return t.TravelMode(2*t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes20")])]),e("div",{staticClass:"w-30 float-left"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:3*t.time},on:{onChange:function(e){return t.TravelMode(3*t.time)}}}),e("span",{staticClass:"sliderchk round"})]),e("div",{staticClass:"fs_textname"},[t._v("Minutes30")])])])])])])])])])])]),e("div",{staticClass:"float-right mt-2"},[void 0!=t.config&&1==t.config.isShowSaveExtentButton?e("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{title:"",name:"btnSaveCity",tabindex:"6","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:t.SaveMapExtent}},[e("i",{staticClass:"fa fa-floppy-o pr-1"}),t._v("Save")]):t._e()]),t.showAddZone?e("AddZone",{attrs:{polygonData:t.polygonData,polygonNewShapeId:t.polygonNewShapeId},on:{DeleteFeature:t.DeleteFeature,GetZoneManagementData:t.GetZoneManagementData,Close:t.Close}}):t._e(),t.showSaveZonePopUp?e("SaveZone",{on:{SaveZoneData:t.SaveZoneData,OpenSaveZone:t.OpenSaveZone,Close:t.Close}}):t._e()],1)},i=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[e("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[e("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-100 bg-grey"},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[e("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}}),e("label",{staticClass:"custom-control-label pt-1",attrs:{for:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}},[t._v("SelectAll")])])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"background-color":"rgb(40, 167, 69)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Save Zone"}},[e("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v("Save Zone")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"background-color":"rgb(240, 4, 4)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Delete Save Zone"}},[e("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[e("i",{staticClass:"fa fa-trash pr-2"}),t._v("Delete Selected Shape")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"row float-left"},[e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min10"}),t._v(" Minutes10 ")]),e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min20"}),t._v(" Minutes20 ")]),e("div",{staticClass:"col float-left text-dark px-2"},[e("span",{staticClass:"timelegend min30"}),t._v(" Minutes30 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mr12 toggle-group text-center"},[e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"foot-walking"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Walking")])]),e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"cycling-regular"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Cycling")])]),e("label",{staticClass:"toggle-container"},[e("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"driving-car",checked:"checked"}}),e("div",{staticClass:"toggle toggle--active-null toggle--null"},[t._v("Driving")])])])}],s=(a("14d9"),a("13d5"),a("e192")),n=a.n(s),r=(a("ac6d"),a("e11e")),l=a.n(r),d=(a("6cc5"),a("cae8")),c=a.n(d),u=(a("bdd0"),a("885b")),p=a.n(u),m=(a("c307"),a("2573"),a("20d6"),a("5fbf"),a("ac00")),h=(a("1615"),a("9769")),g=a("3975"),f=a("e222"),v=(a("5bfd"),a("125d"),a("afaa")),y={components:{AddZone:g["a"],SaveZone:f["a"]},props:{mapType:{required:!0},Data:{required:!0},isShowDrawButton:{required:!0,type:String},config:{required:!1},mapWidth:{required:!1},mapHeight:{required:!1},latLng:{required:!1},mapContainer:{required:!0},selectedUser:{required:!0},UtilityMapData:{required:!0},editZone:{required:!0},zoneId:{required:!0}},data:function(){return{isLoading:!1,showDeleteFeature:!1,showSaveZonePopUp:!1,showSaveZone:!1,showAddZone:!1,time:600,colors:"",showSetting:null,address:[],UserName:null,UserEmailId:null,imageMarker:[],mapLayer:[],map:null,locations:[],locationPriority:[],locationname:[],ticketNumberList:[],LocationwithPriority:null,markers:[],mapZoom:!1,mapMarker:[],markerCluster:null,startingPoint:null,showSettingPopup:!1,lngLatData:[],fullAddress:[],leafLetReferenceNumber:[],polygonData:[],polygonNewShapeId:null,zoneData:[],drawingManager:null,currentSelectedShape:null,myPolygon:null,editableLayers:null,showHideEtaMap:!1}},watch:{Data:{handler:function(){setTimeout(()=>{this.ShowLocationOnGoogleMap()},500)},deep:!0},config:{handler:function(){this.ShowDrawingManager()},deep:!0},selectedUser:{handler:function(){this.ViewLocatorOnMap(this.selectedUser)},deep:!0},latLng:{handler:function(){this.ViewOnMap()}}},mounted:function(){"Google"==this.mapType?setTimeout(()=>{},2e3):"MapBox"==this.mapType?setTimeout(()=>{this.initMapBox(this.Data,"pk.eyJ1IjoiaGFycmlzbHVtZW4iLCJhIjoiY2s2dWtrMzJ3MDk2NTNncXMxMjlxa29mcCJ9.riRtpclzr9XfExHhclre8A")},2e3):"Esri"==this.mapType?setTimeout(()=>{this.initLeafletMap(this.Data)},2e3):"LeafLet"!=this.mapType&&"Esri"!=this.mapType||setTimeout(()=>{this.initLeafletMap(this.Data)},2e3)},created:function(){this.UserName=this.GetUserInfo.Name,this.UserEmailId=this.GetUserInfo.Email,void 0!=this.myPolygon&&null!=this.myPolygon&&this.myPolygon.setMap(null);let t=document.createElement("script");t.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAJdx4gmhGKWjPTBBVk5riFgpbE0lGS-xM&callback=initAutocompletes&libraries=geometry,drawing,places&v=weekly"),document.head.appendChild(t);let e=document.createElement("script");e.setAttribute("src","https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"),document.head.appendChild(e);let a=document.createElement("script");a.setAttribute("src","~/Scripts/FsmMaps/fontawesome-markers.min.js"),document.head.appendChild(a),setTimeout(()=>{this.ShowLocationOnGoogleMap()},2e3),"Google"==this.mapType&&setTimeout(()=>{this.initAutocompletes()},2e3)},methods:{initAutocompletes:function(){var t=this;const e=document.getElementById("pac-input"),a=new google.maps.places.SearchBox(e);t.map.addListener("bounds_changed",()=>{a.setBounds(t.map.getBounds())}),a.addListener("places_changed",()=>{var e,o,i=a.getPlaces(),s=new google.maps.LatLngBounds;for(e=0;o=i[e];e++)s.extend(o.geometry.location);t.map.fitBounds(s),t.map.setZoom(4)})},CurrentLocation:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(t.GetCurrentLocation,t.geoError):alert("Geolocation is not supported by this browser.")},GetCurrentLocation:function(t){var e=this;if(t){var a=t.coords.latitude,o=t.coords.longitude,i=new google.maps.LatLng(a,o);e.map.setCenter(i),e.map.setZoom(18)}},SaveMapExtent:function(){var t=this;t.$emit("SaveMapExtent",t.fullAddress,t.mapType)},ShowUtilityMap:function(){var t=this,e=JSON.parse(localStorage.getItem("coordinates"));null==e&&(e={x:"43.133971",x1:"43.132812",y:"-76.088009",y1:"-76.087183"}),Object(v["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/layers/GraphicsLayer"]).then(([a,o,i,s,n])=>{var r=new a({basemap:"hybrid"});new o({container:"utilitymap",map:t.map,extent:{xmin:-13856051.7748509,ymin:2821931.08215458,xmax:-7488766.97004404,ymax:6364777.09974285,spatialReference:102100}});""!=layerUrl&&null!=layerUrl&&(Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00"},Colors.random=function(){var t,e=0;for(var a in this.names)Math.random()<1/++e&&(t=a);return{name:t,rgb:this.names[t]}},String(layerUrl).split(",").forEach((function(t){var e=String(t).split("^")[1];""!=e&&null!=e&&"null"!=e&&"undefined"!=typeof e||(e=String(Colors.random().rgb).toUpperCase());const a={type:"simple",symbol:{color:e,type:"simple-line",style:"solid"},visualVariables:[{type:"size",field:"ELEV_GAIN",minDataValue:0,maxDataValue:2300,minSize:"3px",maxSize:"7px"}]};var o=String(t).split("^")[0];r.add(new i({url:o,renderer:a}))})));new o({container:"utilitymap",map:r,basemap:"hybrid",center:[e.y,e.x],zoom:17});var l=new n;r.add(l);var d=null;void 0!=e&&null!=e&&(d=[[e.y1,e.x1],[e.y1,e.x],[e.y,e.x],[e.y,e.x1]]);d={type:"polygon",rings:d};var c={type:"simple-fill",color:[255,0,0,.35],outline:{color:[255,0,0],width:1}},u=new s({geometry:d,symbol:c});l.add(u)}).catch(t=>{console.error(t)})},GetDirection:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(t.showRoutePosition,t.geoError):alert("Geolocation is not supported by this browser.")},geoError:function(){},showRoutePosition:function(t){var e=this;if(t){var a=t.coords.latitude,o=t.coords.longitude,i=new google.maps.LatLng(a,o),s=new google.maps.LatLng(e.Data[0].pinLatLong.latitude.split(",")[0],e.Data[0].pinLatLong.latitude.split(",")[1]),r=localStorage.getItem("UserImage");String(r).indexOf("blob")<=0&&(r="https://app.talygen.com/Content/images/Black/user.png");var d={lat:a,lng:o};if("Google"==e.mapType){var c={url:r,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},u=new google.maps.Marker({position:d,icon:c,map:e.map}),p=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+r+"' class='marker' /> <div style='display:block;width: 270px;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"});u.addListener("click",(function(){p.open(e.map,this)})),e.imageMarker.push(u);var m={path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},h={strokeColor:"#ff0000",strokeOpacity:0,fillOpacity:0,icons:[{icon:m,offset:"0",repeat:"4px"}]},g={map:e.map,suppressMarkers:!1,polylineOptions:h},f=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer(g),y=new google.maps.LatLng(a,o);function S(t,e){var a="DRIVING";t.route({origin:i,destination:s,travelMode:google.maps.TravelMode[a]},(function(t,a){if("OK"==a){e.setDirections(t);var o='<span style="font-weight:bold;">Distance: </span>'+t["routes"][0].legs[0].distance.text+'<br /><span style="font-weight:bold;">Time: </span>'+t["routes"][0].legs[0].duration.text,i=new google.maps.InfoWindow({content:o});google.maps.event.addListener(h,"click",(function(t){i.setPosition(t.latLng),i.open(map)})),google.maps.event.addListener(map,"click",(function(){i.close()}))}else window.alert("Directions request failed due to "+a+". Route exceeds maximum distance limitation.")}))}v.setMap(e.map),S(f,v)}else if("MapBox"==e.mapType){var b={lon:parseFloat(d.lng,10),lat:parseFloat(d.lat,10)},_='<img src="'+r+'" style="width:100px;height:100px;" />',C=new n.a.Popup({offset:25}).setHTML(_),k=document.createElement("div");k.className="marker",k.style.backgroundImage="url("+r+")",k.style.backgroundSize="cover",k.style.width="40px",k.style.height="40px";u=new n.a.Marker(k).setPopup(C).setLngLat(b).addTo(e.map);e.imageMarker.push(u);var w="https://api.mapbox.com/directions/v5/mapbox/driving/"+o+","+a+";"+e.Data[0].pinLatLong.latitude.split(",")[1]+","+e.Data[0].pinLatLong.latitude.split(",")[0]+"?steps=true&geometries=geojson&access_token="+n.a.accessToken;e.map.getLayer("point")||e.map.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:y}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}});var A=new XMLHttpRequest;A.open("GET",w,!0),A.onload=function(){var t=JSON.parse(A.response);if(""!=typeof t.code&&"InvalidInput"!=t.code){var a=t.routes[0],o=a.geometry.coordinates,i={type:"Feature",properties:{distance:a.distance,duration:a.duration},geometry:{type:"LineString",coordinates:o}};e.map.getSource("route")?e.map.getSource("route").setData(i):(e.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),e.map.on("click","route",(function(t){e.map.queryRenderedFeatures(t.point,{layers:["route"]});var a=t.features[0].properties,o=a.distance;o=parseFloat(.000621371192*o,10).toFixed(2);var i='<span style="font-weight:bold;">Distance: </span>'+o+' mi<br /><span style="font-weight:bold;">Time: </span>'+timeConvert(a.duration);(new n.a.Popup).setLngLat(t.lngLat).setHTML(i).addTo(e.map)})))}else try{ShowMsgWithMsg("Route exceeds maximum distance limitation.","failure")}catch(s){alert("Route exceeds maximum distance limitation.")}},A.send()}else{var L=l.a.icon({iconUrl:r,iconSize:[40,40]});C=l.a.popup().setContent("<img src="+r+" />");l.a.marker([a,o],{icon:L}).bindPopup(C).openPopup().addTo(e.map);var T=l.a.Routing.control({waypoints:[l.a.latLng(a,o),l.a.latLng(e.Data[0].pinLatLong.latitude.split(",")[0],e.Data[0].pinLatLong.latitude.split(",")[1])],routeWhileDragging:!1,createMarker:function(){return null}}).addTo(e.map);T.on("routesfound",(function(t){var e=t.routes;e[0].summary}))}}},DeleteFeature:function(){var t=this;null!=t.currentSelectedShape&&"undefined"!=typeof t.currentSelectedShape&&(t.currentSelectedShape.setMap(null),t.currentSelectedShape=null,t.showAddZone=!1,t.showDeleteFeature=!1)},ShowDrawingManager:function(){var t=this;null==t.drawingManager&&void 0!=t.config&&1==t.config.isShowDrawButton&&(t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"],setEditable:!0},polylineOptions:{editable:!0}}),t.drawingManager.setMap(t.map),google.maps.event.addListener(t.drawingManager,"overlaycomplete",t.GetGoogleAddressToDraw))},ViewLocatorOnMap:function(t){var e,a=this;a.isLoading=!0,e=void 0!=a.selectedUser?`selectedUser=${t}&reqFrom=`:"reqFrom=ETAMAP",h["a"].TrackByUserId(e).then((function(t){if(null!=t.data.data&&t.data.data.length>0){var e=t.data.data;a.ShowUserOnMap(e,a.map),a.isLoading=!1}else a.ShowAlert(a.$t("CurrentLocationNotFound"),"warning",!0,a.$t("Alert")),a.isLoading=!1}))},ShowUserOnMap:function(t,e){var a=this,o=[];$.each(t,(function(t,e){var i=e.IMAGE_PATH,s={lat:parseFloat(e.LATITUDE,10),lng:parseFloat(e.LONGITUDE,10)};o.push([s.lat,s.lng]);new google.maps.LatLng(s.lat,s.lng);String(i).indexOf("blob")<=0&&(i="/Content/images/user_avtar.png");var r='<div class="w-100 float-left popupcontent" style="padding:0px 6px 0px 0px;">';if(r+='<img src="'+i+'" class="float-left" style="width:50px;height:50px; border-radius: 100%;border: 3px solid #f2f2f2;" />',r+='<div style="padding-left:8px; padding-top:5px;width:80%;" class="float-left">',r+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Name: </b>"+e.NAME+" </p>",r+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Department: </b>"+e.DEPARTMENT_NAME+" </p></div>",e.TRACK_ID>0&&(r+="<p style='margin-bottom:2px;' class='px-2 float-left'><b style='font-weight:bold;'>"+e.NAME+" </b> is going to ticket number: "+e.TICKET_NUMBER+" </p>"),r+="</div>","Google"==a.mapType){var d={url:i,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},c=new google.maps.Marker({position:s,icon:d,map:a.map});a.imageMarker.push(c);var u=new google.maps.InfoWindow({content:r});try{c.addListener("click",(function(){u.open(a.map,this)}))}catch(f){console.log(f)}}else if("MapBox"==a.mapType){var p={lon:parseFloat(s.lng,10),lat:parseFloat(s.lat,10)},m=new n.a.Popup({offset:25}).setHTML(r),h=document.createElement("div");h.className="marker",h.style.backgroundImage="url("+i+")",h.style.backgroundSize="cover",h.style.width="50px",h.style.height="50px";c=new n.a.Marker(h).setPopup(m).setLngLat(p).addTo(a.map);a.map.flyTo({center:[p.lon,p.lat],essential:!0}),a.imageMarker.push(c)}else{var g=l.a.icon({iconUrl:i,iconSize:[40,40]});m=l.a.popup().setContent(r),c=l.a.marker([s.lat,s.lng],{icon:g}).bindPopup(m).openPopup().addTo(a.map);a.imageMarker.push(c),a.map.fitBounds(o)}}))},ViewOnMap:function(){var t=this,e=new google.maps.LatLng(t.latLng.location_nw.split(",")[0],t.latLng.location_nw.split(",")[1]);"Google"==t.mapType?(t.markers.forEach((function(e,a){if(e.title==(t.latLng.TicketNumber||t.latLng.ticket_number)){let o=new google.maps.InfoWindow;o.setContent(e.address),o.open(t.map,t.markers[a])}})),t.map.panTo(e),t.map.setZoom(18)):"MapBox"==t.mapType?t.markers[0].features.forEach((function(e,a){t.map.flyTo({center:[t.latLng.location_nw.split(",")[1],t.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),e.properties.ticketNumber==(t.latLng.TicketNumber||t.latLng.ticket_number)&&new n.a.Popup({closeOnClick:!0}).setLngLat([t.latLng.location_nw.split(",")[1],t.latLng.location_nw.split(",")[0]]).setHTML(e.properties.address).addTo(t.map)})):(t.leafLetReferenceNumber.forEach((function(e,a){e.TicketNumber==(t.latLng.TicketNumber||t.latLng.ticket_number)&&l.a.popup().setLatLng([t.latLng.location_nw.split(",")[0],t.latLng.location_nw.split(",")[1]]).setContent(e.Address).openOn(t.map)})),t.map.flyTo([t.latLng.location_nw.split(",")[0],t.latLng.location_nw.split(",")[1]],16,{animate:!0,duration:2}))},ShowLocationOnGoogleMap:function(){if("Google"==this.mapType){var t,e=this,a=null;const r=[];var o,i=null,s=new google.maps.InfoWindow;e.map=null,e.showLoader=!0,e.map=new google.maps.Map(document.getElementById(e.mapContainer),{zoom:7,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(30.7333,76.7794),mapTypeId:google.maps.MapTypeId.ROADMAP}),void 0!=e.config&&1==e.config.isShowDrawButton&&(e.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"]},polylineOptions:{editable:!0}}),e.drawingManager.setMap(e.map),google.maps.event.addListener(e.drawingManager,"overlaycomplete",(function(t,a,o){var i=t.overlay;e.currentSelectedShape=i,e.GetGoogleAddressToDraw(t)}))),(this.mapType="Google")&&$.each(e.Data,(function(n,l){null!=l.pinLatLong.latitude&&(a=l.pinLatLong.latitude.split(",")[0],i=l.pinLatLong.latitude.split(",")[1]),o="Critical"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png":"High"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png":"Medium"==l.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png":"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png";let d='<div id="content"><div class="map-pop-header '+l.priority+'" style="background-color:'+l.color_code+'"><div id="siteNotice"></div>'+l.popupHeaderHtml+'</div><div id="bodyContent">'+l.popupBodyHtml+'<p class="view-details">'+l.popupFooterHtml+"</p></div></div>";t=new google.maps.Marker({position:new google.maps.LatLng(a,i),icon:o,title:l.refValue,map:e.map,address:d}),r.push(t),e.markers.push(t);let c=[];if(void 0!=e.Data[n]&&e.Data[n].polygons.forEach((function(t){t.latLong.forEach((function(t){c.push(new google.maps.LatLng(t.longitude,t.latitude))})),e.myPolygon=new google.maps.Polygon({paths:c,draggable:!1,editable:1==e.config.isEditable,strokeColor:"undefined"!=typeof t.strokeColor?t.strokeColor:"#FF0000",strokeOpacity:"undefined"!=typeof t.strokeOpacity?t.strokeOpacity:"#FF0000",strokeWeight:"undefined"!=typeof t.strokeWeight?t.strokeWeight:"#FF0000",fillColor:"undefined"!=typeof t.fillColor?t.fillColor:"#FF0000",fillOpacity:"undefined"!=typeof t.opacity?t.opacity:.35,Id:e.Data[n].refValue}),e.myPolygon.setMap(e.map),google.maps.event.addListener(e.myPolygon,"click",(function(t,a){e.currentSelectedShape=this,e.currentSelectedShape.setOptions({editable:!0,ShapeId:e.polygonNewShapeId}),e.showDeleteFeature=!0}))})),"zoneMapDiv"==e.mapContainer||"mapExtend"==e.mapContainer){for(var u=new google.maps.LatLngBounds,p=c,m=0,h=p.length;m<h;m++)u.extend(p[m]);e.map.fitBounds(u)}google.maps.event.addListener(e.myPolygon.getPath(),"set_at",(function(t,a){let o={FullAddress:""};if(e.lngLatData=[],"zoneMapDiv"==e.mapContainer){e.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),e.myPolygon.setOptions({ShapeId:e.polygonNewShapeId}),e.showAddZone=!0,n=e.myPolygon.getPath().getArray(),n.forEach((function(t,a){e.lngLatData.push({latitude:t.lat(),longitude:t.lng()})})),o={FullAddress:""};var i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),s=new google.maps.Geocoder;s.geocode({latLng:i},(function(t,e){o.FullAddress=t[0].formatted_address})),e.polygonData.push({Id:e.polygonNewShapeId,latLong:e.lngLatData,CompleteAddress:o,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o})}else{var n;e.lngLatData=[],n=e.myPolygon.getPath().getArray(),n.forEach((function(t,a){e.lngLatData.push({Lat:t.lat(),Lng:t.lng()})})),o={FullAddress:""};i=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),s=new google.maps.Geocoder;s.geocode({latLng:i},(function(t,e){o.FullAddress=t[0].formatted_address})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o})}})),google.maps.event.addListener(t,"click",function(t,a){return function(){s.setContent(d),s.open(e.map,t)}}(t));var g=new google.maps.LatLng(e.Data[0].latlong.split(",")[0],e.Data[0].latlong.split(",")[1]);e.map.panTo(g),e.map.setZoom(4)}));var n={gridSize:40,maxZoom:15,styles:[{width:30,height:30,url:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m1.png",textColor:"white",textSize:12}]};e.markerCluster=new MarkerClusterer(e.map,r,n)}},LoadLocatorDataonMap:function(){var t=this,e=null,a=null;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e=t.coords.latitude,a=t.coords.longitude})):console.log("Geolocation is not supported by this browser."),t.showSetting=!0,"Google"==t.mapType?setTimeout(()=>{t.LoadGoogleHeatMap(e,a)},2e3):"MapBox"==t.mapType?setTimeout(()=>{t.LoadMapboxHeatMap(e,a)},4e3):setTimeout(()=>{t.ShowEtaMap(e,a)},4e3)},initMapBox:function(t,e,a,o){var i=this,s="";let r=3;if(t){var l=$.grep(t,(function(t,e){return""!=t.location_nw&&null!=t.location_nw&&void 0!=typeof t.location_nw&&","!=t.location_nw}));l=l[0],l&&(s=[parseFloat(String(l.location_nw).split(",")[1],10),parseFloat(String(l.location_nw).split(",")[0],10)])}if(i.startingPoint=s,n.a.accessToken=e,i.map=new n.a.Map({container:i.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:r,zoomControl:!0,scrollZoom:!0,boxZoom:!0}),void 0!=i.config&&1==i.config.isShowSearchBox){var d=new p.a({accessToken:e,mapboxgl:n.a,marker:!1,placeholder:"Search for places in Barbados"});i.map.addControl(d)}if(void 0!=i.config&&1==i.config.isShowDrawButton){var u=new c.a({displayControlsDefault:!1,controls:{line_string:!1,polygon:!0,point:!0,trash:!0}});i.map.addControl(u),i.map.on("draw.create",i.GetMapBoxAddressToDraw);var m=new n.a.NavigationControl;i.map.addControl(m,"top-left")}m=new n.a.NavigationControl;if(i.map.addControl(m,"bottom-right"),null!=t&&t.length>0){if($.each(t,(function(e,a){e++,i.map.flyTo({center:[i.Data[0].latlong.split(",")[1],i.Data[0].latlong.split(",")[0]],zoom:4,essential:!0});if("[]"!=a.attachmentCountWithExt&&""!=a.attachmentCountWithExt&&null!=a.attachmentCountWithExt){var o=JSON.parse(a.attachmentCountWithExt);$.each(o,(function(t,e){"Video"==e.TYPE?e.COUNT:"Image"==e.TYPE?e.COUNT:parseInt(e.COUNT)}))}if(void 0!=a.polygons[e]){a.polygons[e].latLong[e].latitude.split(",")[1],a.polygons[e].latLong[e].latitude.split(",")[0];i.map.addSource("maine",{type:"geojson",data:v}),i.map.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#FF0000","fill-opacity":.35}})}let s='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+a.priority+'" style="background-color:'+a.color_code+'"><div id="siteNotice"></div>'+a.popupHeaderHtml+'</div><div id="bodyContent">'+a.popupBodyHtml+'<p class="view-details">'+a.popupFooterHtml+"</p></div></div></div></div></div>";y(e,a.pinLatLong.latitude,t,a.priority,s,a.is_high_profile,a)})),null!=t.mapdetail&&t.mapdetail.length>0)if("MapBox"==t.mapdetail[0].MAP_TYPE){if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var h=JSON.parse(t.mapdetail[0].LAT_LNG),g=h.reduce((function(t,e){return t.extend(e)}),new n.a.LngLatBounds(h[0],h[0]));map.fitBounds(g)}}else if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var f=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(e,a){var o=[];"LeafLet"==t.mapdetail[0].MAP_TYPE||"Esri"==t.mapdetail[0].MAP_TYPE?o.push(a[1],a[0]):o.push(a.lng,a.lat),f.push(o)}));h=f,g=h.reduce((function(t,e){return t.extend(e)}),new n.a.LngLatBounds(h[0],h[0]));map.fitBounds(g)}var v;function y(t,e,a,o,s,r,l){if(""!=e&&null!=e&&"undefined"!=typeof e&&","!=typeof e){var d=parseFloat(String(e.split(",")[0]),10),c=parseFloat(String(e.split(",")[1]),10),u="https://app.talygen.com",p=l.color_code;if(""!=p&&null!=p&&"undefined"!=typeof p&&" "!=typeof p||(p="#4db567"),u+="https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",1==t||"undefined"==typeof v)v={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+u,color:p,address:s,ticketNumber:l.refValue},geometry:{type:"Point",coordinates:[]}}]},v.features[0].geometry.coordinates.push(c),v.features[0].geometry.coordinates.push(d),i.markers.push(v);else{var m={type:"Feature",properties:{title:"Ticket Priority: "+o,icon:""+u,color:p,address:s,ticketNumber:l.refValue},geometry:{type:"Point",coordinates:[]}};m.geometry.coordinates.push(c),m.geometry.coordinates.push(d),v.features.push(m),i.markers.push(m)}}t==a.length&&(i.map.loadImage("https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",(t,e)=>{if(t)throw t;i.map.addImage("ticket-icon",e,{sdf:!0})}),i.map.on("load",(function(){i.map.addSource("ticketsourcedata",{type:"geojson",data:v,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),i.map.addLayer({id:"clusters",type:"circle",source:"ticketsourcedata",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),i.map.addLayer({id:"cluster-count",type:"symbol",source:"ticketsourcedata",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),i.map.addLayer({id:"unclustered_point",type:"circle",source:"ticketsourcedata",filter:["!",["has","point_count"]],paint:{"circle-color":["get","color"],"circle-radius":20,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),i.map.on("click","clusters",(function(t){var e=i.map.queryRenderedFeatures(t.point,{layers:["clusters"]}),a=e[0].properties.cluster_id;i.map.getSource("ticketsourcedata").getClusterExpansionZoom(a,(function(t,a){t||i.map.easeTo({center:e[0].geometry.coordinates,zoom:a})}))})),i.map.on("click","unclustered_point",(function(t){if(""!=a[0].popupBodyHtml&&1!=t.features[0].properties.cluster){var e=t.features[0].geometry.coordinates.slice(),o=t.features[0].properties.address;new n.a.Popup({closeOnClick:!0}).setLngLat(e).setHTML(o).addTo(i.map)}})),i.map.on("mouseenter","clusters",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","clusters",(function(){i.map.getCanvas().style.cursor=""})),i.map.on("mouseenter","unclustered_point",(function(){i.map.getCanvas().style.cursor="pointer"})),i.map.on("mouseleave","unclustered_point",(function(){i.map.getCanvas().style.cursor=""})),i.map&&i.map.on("wheel",t=>{t.originalEvent.ctrlKey?(t.originalEvent.preventDefault(),i.map.scrollZoom._enabled||i.map.scrollZoom.enable()):i.map.scrollZoom._enabled&&i.map.scrollZoom.disable()})})))}$(".mapboxgl-ctrl-compass").hide()}},initLeafletMap:function(t,e,a){var o,i=this;if(void 0!=t){if(i.map){i.map.off();try{i.map.remove()}catch{}}let e="",a="";if(null!=t&&t.length>0){var s=$.grep(t,(function(t,e){return""!=t.location_nw&&null!=t.location_nw&&"undefined"!=typeof t.location_nw&&","!=t.location_nw}));if(null!=s&&s.length>0){var n=s[0].location_nw;a=n.split(",")[1],e=n.split(",")[0]}}var r=l.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy '+(new Date).getFullYear()+" LINZ"}),d=(l.a.tileLayer("https://{s}.tiles.mapbox.com/v3/spatial.b625e395/{z}/{x}/{y}.png",{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}),l.a.latLng(e,a));i.startingPoint=[e,a];var c=10;if(""==e&&""==a&&(c=2),i.map=l.a.map(i.mapContainer,{zoom:c,center:d,layers:[r],zoomControl:!1}),l.a.control.zoom({position:"topright"}).addTo(i.map),void 0!=i.config&&1==i.config.isShowDrawButton&&i.GetLeafLetAddressToDraw(),void 0!=i.config&&1==i.config.isShowSearchBox){const t=new m["b"],e=new m["a"]({provider:t});i.map.addControl(e)}i.markers=l.a.markerClusterGroup({iconCreateFunction:function(t){return l.a.divIcon({html:'<div class="circle-leaflet">'+t.getChildCount()+"</div>"})}});var u=l.a.Icon.extend({options:{shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}});1==i.Data.length&&i.map.flyTo([i.Data[0].latlong.split(",")[0],i.Data[0].latlong.split(",")[1]],16,{animate:!0,duration:2});new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png"}),new u({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_fill.png"});function p(t){var s="",n="";if($.each(t,(function(t,r){if(""!=r.pinLatLong.latitude&&null!=r.pinLatLong.latitude&&void 0!=typeof r.pinLatLong.latitude||r.polygons.length>0){s=r.pinLatLong.latitude;let g=[];n=r.priority;if("[]"!=r.attachmentCountWithExt&&""!=r.attachmentCountWithExt&&null!=r.attachmentCountWithExt){var d=JSON.parse(r.attachmentCountWithExt);$.each(d,(function(t,e){"Video"==e.TYPE?e.COUNT:"Image"==e.TYPE?e.COUNT:parseInt(e.COUNT)}))}if(i.Data[t].polygons.forEach((function(t){t.latLong.forEach((function(t){g.push([t.latitude,t.longitude])}))})),void 0!=r.polygons[t]){if(i.Data[0].polygons[0].latLong.length>1){var c=l.a.polygon(g,{fill:!0}).addTo(i.editableLayers);i.map.fitBounds(c.getBounds())}}let f='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+r.priority+'" style="background-color:'+r.color_code+'"><div id="siteNotice"></div>'+r.popupHeaderHtml+'</div><div id="bodyContent">'+r.popupBodyHtml+'<p class="view-details">'+r.popupFooterHtml+"</p></div></div></div></div></div>";""==a&&""==e||(a=s.split(",")[1],e=s.split(",")[0],a=parseFloat(a,10),e=parseFloat(e,10));var u=r.ticket_number,p=".leafleticoncustom_"+n+"{background-color:"+r.color_code+" }",m=document.createElement("style");m.innerHTML=p,document.head.appendChild(m);var h=l.a.icon({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_leaffill.png",iconSize:[30,30],color:r.color_code,"icon-color":r.color_code,"background-color":r.color_code,className:"leafleticoncustom_"+n});o=l.a.marker(l.a.latLng(e,a),{icon:h}),o.bindPopup(f),i.markers.addLayer(o),i.leafLetReferenceNumber.push({TicketNumber:r.refValue,Address:f}),i.mapMarker.push(i.markers),o.on("click",(function(t){var e=$("a.ticketnumber[data-ticketnumber='"+u+"']");if(e.length>0&&"true"==localStorage.getItem("isMapView")){var a=e.closest(".lists");a.addClass("alert-info"),setTimeout((function(){a.removeClass("alert-info")}),5e3)}e=$("a.ticketnumberlist[data-ticketnumber='"+u+"']"),e.length>0&&"false"==localStorage.getItem("isMapView")&&(e=e.closest("tr"),e.addClass("alert-info"),setTimeout((function(){e.removeClass("alert-info")}),5e3))}))}})),null!=t.mapdetail&&t.mapdetail.length>0)if("MapBox"==t.mapdetail[0].MAP_TYPE){if(""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var r=JSON.parse(t.mapdetail[0].LAT_LNG),d=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(t,e){var a=[];a.push(e[1],e[0]),d.push(a)})),map.fitBounds(d)}}else if("Google"==t.mapdetail[0].MAP_TYPE&&""!=t.mapdetail[0].LONGITUDE&&""!=t.mapdetail[0].LATITUDE&&""!=t.mapdetail[0].LAT_LNG){var c=[];$.each(JSON.parse(t.mapdetail[0].LAT_LNG),(function(t,e){var a=[];a.push(e.lat,e.lng),c.push(a)}));r=c;var u=[];u.push(r),map.fitBounds(r)}i.map.addLayer(i.markers)}null!=t&&t.length>0&&p(t)}else i.map=l.a.map(i.mapContainer,{layers:[l.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'})],center:[0,0],zoom:5})},ShowEtaMap:function(t,e){var a=this,o=null,i=null,s="driving-car",n=600;if(a.showHideEtaMap)return $.each(a.mapLayer,(function(t,e){a.map.removeLayer(e)})),a.showHideEtaMap=!1,!1;function r(){navigator.geolocation?navigator.geolocation.getCurrentPosition(c,d,{timeout:1e4}):alert("Geolocation is not supported by this browser")}function d(t){t.code;var e=t.message;alert(e)}r();function c(t){t=$.post("geocoordinates.php",{lat:t.coords.latitude,lng:t.coords.longitude})}function u(t,e){if(a.map){$.each(a.mapLayer,(function(t,e){a.map.removeLayer(e)})),a.showHideEtaMap=!0;var o=new l.a.latLng(t,e);a.map.panTo(o),a.map.setZoom(11)}var i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var s=l.a.icon({iconUrl:i,iconSize:[40,40]}),n=l.a.popup().setContent("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"),r=l.a.marker([t,e],{icon:s},{layers:""}).bindPopup(n).openPopup().addTo(a.map);a.imageMarker.push(r),p(!0)}function p(t){var e=[];$("input[name=duration]:checked").each((function(){e.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+s,data:JSON.stringify({location_type:"start",range_type:"time",range:e,interval:n,locations:[[o,i],[o,i]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(t){l.a.geoJson(t,{onEachFeature:function(t,e){e.bindPopup("Isochrone: "+t.properties.value),a.mapLayer.push(e)},style:function(t){var e=t.properties.value;return a.SetColor(e),{fillColor:a.colors,color:a.colors,weight:1,fillOpacity:.35}}}).addTo(a.map)}})}o=parseFloat(e,10)+.02,i=parseFloat(t,10)+.004,u(i,o),document.getElementById("params").addEventListener("change",(function(t){if("profile"===t.target.name)s=t.target.value,u(i,o);else if("duration"===t.target.name){var e="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){e.length>0&&(e+=",");var t=$(this).val();e+=t}));var a=String(e).split(",");n=a[0],a[a.length-1]}else n="600","1800";u(i,o)}}))},SetColor:function(t){var e=this;if(t=parseInt(t,10),"MapBox"!=e.mapType?t/=60:e.time=10,"MapBox"==e.mapType)switch(t){case 10:e.colors="3CEA19";break;case 20:e.colors="EFF60B";break;case 30:e.colors="F6320B";break;default:e.colors="F6320B"}else switch(t){case 10:e.colors="green";break;case 20:e.colors="yellow";break;case 30:e.colors="red";break;default:e.colors="red"}},LoadGoogleHeatMap:function(t,e){var a=this,o="driving-car",i=600;if(a.showHideEtaMap)return a.map.data.forEach((function(t){a.map.data.remove(t)})),a.showHideEtaMap=!1,!1;function s(s,n){if(a.map){$.each(a.map,(function(t,e){try{a.map.removeLayer(e)}catch(o){}})),a.showHideEtaMap=!0;var r=new l.a.latLng(s,n);a.map.panTo(r),a.map.setZoom(11)}var d={lat:t,lng:e},c=(r=new google.maps.LatLng(t,e),localStorage.getItem("UserImage"));String(c).indexOf("blob")<=0&&(c="https://app.talygen.com/Content/images/Black/user.png");var u={url:c,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},p=new google.maps.Marker({position:d,icon:u,map:a.map}),m=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+c+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"});p.addListener("click",(function(){m.open(a.map,this)})),a.imageMarker.push(p);var h=[];$("input[name=duration]:checked").each((function(){h.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+o,data:JSON.stringify({location_type:"start",range_type:"time",range:h,interval:i,locations:[[n,s],[n,s]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(t){a.map.data.addGeoJson(t)}}),a.map.data.setStyle((function(t){var e=t.getProperty("value");return a.SetColor(e),{fillColor:a.colors,opacity:.35,strokeWeight:1}}))}s(t,e),document.getElementById("params").addEventListener("change",(function(a){if("profile"===a.target.name)o=a.target.value,s(t,e);else if("duration"===a.target.name){var n="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){n.length>0&&(n+=",");var t=$(this).val();n+=t}));var r=String(n).split(",");i=r[0],r[r.length-1]}else i="600","1800";s(t,e)}}))},Close:function(){var t=this;t.showAddZone=!1,t.showSaveZonePopUp=!1},GetZoneManagementData:function(t){var e=this;e.currentSelectedShape.setOptions({strokeOpacity:t.strokeOpacity,strokeColor:t.strokeColor,fillOpacity:.35,strokeWeight:t.strokeWeight,fillColor:t.fillColor}),e.polygonData.forEach((function(a,o){a.Id==t.Id&&(e.polygonData[o].strokeOpacity=t.strokeOpacity,e.polygonData[o].strokeWeight=t.strokeWeight,e.polygonData[o].fillColor=t.fillColor,e.polygonData[o].locatorids=t.locatorids,e.polygonData[o].strokeColor=t.strokeColor,e.showAddZone=!1,e.showSaveZone=!0)}))},OpenSaveZone:function(){var t=this;t.showSaveZonePopUp=!0},SaveZoneData:function(t){var e=this;let a={ZoneId:0==e.zoneId?t.ZoneId:e.zoneId,ResolverUserId:null,JsonData:{type:"FeatureCollection",features:[]},ZoneName:t.Name,description:t.Description,ZoneType:t.ZoneType,YardEmails:null};e.polygonData.forEach((function(t,e){a.JsonData.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{stroke:t.strokeWeight,"stroke-opacity":t.strokeOpacity,"stroke-width":t.strokeWeight,fillColor:t.fillColor,"fill-opacity":t.fillOpacity,locatorname:null,locatorids:t.locatorids,userids:null}}),t.latLong.forEach((function(t,o){void 0!=a.JsonData.features[e]&&a.JsonData.features[e].geometry.coordinates[0].push([t.longitude,t.latitude])})),void 0!=a.JsonData.features[e]&&a.JsonData.features[e].geometry.coordinates[0].push([a.JsonData.features[e].geometry.coordinates[0][0][0],a.JsonData.features[e].geometry.coordinates[0][0][1]])})),e.zoneData.push(a);var o=JSON.stringify(e.zoneData);h["a"].UploadGeoJSON(o).then((function(t){0==e.zoneId?e.ShowAlert("Zone Succesfully Added.","success"):e.ShowAlert("Zone Succesfully Updated.","success"),e.showSaveZonePopUp=!1,e.currentSelectedShape=null,e.$emit("FetchData")}))},GetLeafLetAddressToDraw:function(){var t=this;let e={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};l.a.featureGroup().addTo(t.map);t.editableLayers=(new l.a.FeatureGroup).addTo(t.map);new l.a.Control.Draw({edit:{featureGroup:t.editableLayers,poly:{allowIntersection:!0}},draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#bada55"}},polyline:!1,circle:!1,marker:!1,circlemarker:!1}}).addTo(t.map);t.map.addLayer(t.editableLayers),t.map.on("draw:editvertex",(function(a){var o=a.poly;o.getLatLngs(),o.getLatLngs()[0].forEach((function(a,o){t.lngLatData.push({Lat:a.lat,Lng:a.lng});var i=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),s=new google.maps.Geocoder;s.geocode({latLng:i},(function(t,a){e.FullAddress=t[0].formatted_address})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e})}))})),t.map.on("draw:created",(function(a){var o=a.layerType,i=a.layer;if("polygon"===o){i.on("mouseover",(function(){console.log(i.getLatLngs())})),t.editableLayers.addLayer(i),i.getLatLngs()[0].forEach((function(e,a){t.lngLatData.push({Lat:e.lat,Lng:e.lng})}));var s=new google.maps.LatLng(i.getLatLngs()[0][0].lat,i.getLatLngs()[0][0].lng),n=new google.maps.Geocoder;n.geocode({latLng:s},(function(a,o){e.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(e.Country.Name=a.short_name,e.Country.LongName=a.long_name):"postal_code"==a.types[0]?e.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(e.AdministrativeAreaLevel1.LongName=a.long_name,e.AdministrativeAreaLevel1.Name=a.short_name,e.State.LongName=a.long_name,e.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(e.AdministrativeAreaLevel2.LongName=a.long_name,e.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(t.address.push({AdministrativeArea3:a.long_name}),e.AdministrativeAreaLevel3.LongName=a.long_name,e.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(t.address.push({City:a.long_name}),e.City.LongName=a.long_name,e.City.Name=a.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e}),t.$emit("GetAddress",t.fullAddress)}))}else{t.lngLatData.push({Lat:a.layer._latlng.lat,Lng:a.layer._latlng.lng});s=new google.maps.LatLng(a.layer._latlng.lat,a.layer._latlng.lng),n=new google.maps.Geocoder;n.geocode({latLng:s},(function(a,o){e.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,o){"country"==a.types[0]?(e.Country.Name=a.short_name,e.Country.LongName=a.long_name):"postal_code"==a.types[0]?e.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(e.AdministrativeAreaLevel1.LongName=a.long_name,e.AdministrativeAreaLevel1.Name=a.short_name,e.State.LongName=a.long_name,e.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(e.AdministrativeAreaLevel2.LongName=a.long_name,e.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(t.address.push({AdministrativeArea3:a.long_name}),e.AdministrativeAreaLevel3.LongName=a.long_name,e.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(t.address.push({City:a.long_name}),e.City.LongName=a.long_name,e.City.Name=a.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:e}),t.$emit("GetAddress",t.fullAddress)}))}}))},GetGoogleAddressToDraw:function(t){var e=this,a=t.overlay;e.currentSelectedShape=a;let o={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};if("polygon"==t.type){var i=t.overlay;i.type=t.type,e.lngLatData=[],"zoneMapDiv"==e.mapContainer&&(e.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),e.showAddZone=!0);t.overlay.bounds;t.overlay.latLngs.g[0].g.forEach((function(t,a){e.lngLatData.push({latitude:t.lat(),longitude:t.lng()})})),i["ShapeId"]=e.polygonNewShapeId,google.maps.event.addListener(i,"click",(function(t,a,o){"zoneMapDiv"==e.mapContainer&&(e.polygonNewShapeId=this.ShapeId,e.showAddZone=!0,e.currentSelectedShape=this)}));var s=new google.maps.LatLng(e.lngLatData[0].latitude,e.lngLatData[0].longitude),n=new google.maps.Geocoder;n.geocode({latLng:s},(function(t,a){o.FullAddress=t[0].formatted_address,a==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,a){"country"==t.types[0]?(o.Country.Name=t.short_name,o.Country.LongName=t.long_name):"postal_code"==t.types[0]?o.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(o.AdministrativeAreaLevel1.LongName=t.long_name,o.AdministrativeAreaLevel1.Name=t.short_name,o.State.LongName=t.long_name,o.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(o.AdministrativeAreaLevel2.LongName=t.long_name,o.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),o.AdministrativeAreaLevel3.LongName=t.long_name,o.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),o.City.LongName=t.long_name,o.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o}),e.$emit("GetAddress",e.fullAddress),e.polygonData.push({Id:e.polygonNewShapeId,latLong:e.lngLatData,CompleteAddress:o,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}))}))}else if("marker"==t.type){e.lngLatData.push({name:"",latLong:[{latitude:t.overlay.getPosition().lat(),longitude:t.overlay.getPosition().lng()}]});s=new google.maps.LatLng(t.overlay.getPosition().lat(),t.overlay.getPosition().lng()),n=new google.maps.Geocoder;n.geocode({latLng:s},(function(t,a){a==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,a){"country"==t.types[0]?(o.Country.Name=t.short_name,o.Country.LongName=t.long_name):"postal_code"==t.types[0]?o.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(o.AdministrativeAreaLevel1.LongName=t.long_name,o.AdministrativeAreaLevel1.Name=t.short_name,o.State.LongName=t.long_name,o.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(o.AdministrativeAreaLevel2.LongName=t.long_name,o.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),o.AdministrativeAreaLevel3.LongName=t.long_name,o.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),o.City.LongName=t.long_name,o.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:o}),e.$emit("GetAddress",e.fullAddress))}))}},LoadMapboxHeatMap:function(t,e){var a=this;if("undefined"!=typeof a.map.getLayer("isoLayer")&&a.map.removeLayer("isoLayer"),"undefined"!=typeof a.map.getSource("iso"))return a.map.removeSource("iso"),!1;var o=document.getElementById("params"),i="https://api.mapbox.com/isochrone/v1/mapbox/",s=null,r=null,l=(i="https://api.mapbox.com/isochrone/v1/mapbox/",parseFloat(r,10),parseFloat(s,10),"driving"),d="10,20,30";function u(){var o=i+l+"/"+e+","+t+"?contours_minutes="+d+"&contours_colors="+a.colors+"&polygons=true&access_token="+n.a.accessToken;$.ajax({method:"GET",url:o}).done((function(t){a.map.getSource("iso").setData(t)}))}a.colors="3CEA19,EFF60B,F6320B",m(),a.map.flyTo({center:[e,t],zoom:10,essential:!0});var p=new c.a;function m(){a.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),a.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":["get","fillColor"],"fill-opacity":.5}},"poi-label");var o={lon:e,lat:t},i=localStorage.getItem("UserImage");String(i).indexOf("blob")<=0&&(i="https://app.talygen.com/Content/images/Black/user.png");var s=new n.a.Popup({offset:25}).setHTML("<div style='padding:8px;'><img style='float:left;' src='"+i+"' class='marker' /> <div style='display:block;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"),r=document.createElement("div");r.className="marker",r.style.backgroundImage="url("+i+")",r.style.backgroundPosition="top center",r.style.backgroundSize="cover",r.style.width="40px",r.style.height="40px";var l=new n.a.Marker(r).setLngLat(o).setPopup(s).addTo(a.map);a.imageMarker.push(l),u()}a.map.addControl(p,"bottom-left"),o.addEventListener("change",(function(t){if("profile"===t.target.name)l=t.target.value,"foot-walking"==l?l="walking":"cycling-regular"==l?l="cycling":"driving-car"==l&&(l="driving"),u();else if("duration"===t.target.name){var e="",i="";$(o).find("input:checkbox:checked").length>0?($(o).find("input:checkbox:checked").each((function(){e.length>0&&(e+=","),i.length>0&&(i+=",");var t=$(this).val();e+=t,a.SetColor(t),i+=a.colors})),d=e,a.colors=i,u()):(d="10,20,30",a.colors="3CEA19,EFF60B,F6320B",u())}})),a.map.on("load",(function(){m()}))},TravelMode:function(t){var e=this;e.time=e.time-t,"LeafLet"==e.mapType?e.ShowEtaMap():"Google"==e.mapType?e.LoadGoogleHeatMap():"MapBox"==e.mapType&&e.LoadMapboxHeatMap()},ShowTravelMode:function(){var t=this;0==t.showSettingPopup?($(".settingPopup").removeClass("d-none"),t.showSetting=!1,t.showSettingPopup=!0):($(".settingPopup").addClass("d-none"),t.showSetting=!0,t.showSettingPopup=!1)},GetMapBoxAddressToDraw:function(t){var e=this;let a={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},PinCode:"",State:{Name:"",LongName:""},FullAddress:""};if("Polygon"==t.features[0].geometry.type){t.features[0].geometry.coordinates[0].forEach((function(t,a){e.lngLatData.push({Lat:t[1],Lng:t[0]})}));var o=new google.maps.LatLng(t.features[0].geometry.coordinates[0][0][1],t.features[0].geometry.coordinates[0][0][0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(t,o){a.FullAddress=t[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,o){"country"==t.types[0]?(a.Country.Name=t.short_name,a.Country.LongName=t.long_name):"postal_code"==t.types[0]?a.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(a.AdministrativeAreaLevel1.LongName=t.long_name,a.AdministrativeAreaLevel1.Name=t.short_name,a.State.LongName=t.long_name,a.State.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(a.AdministrativeAreaLevel2.LongName=t.long_name,a.AdministrativeAreaLevel2.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),a.AdministrativeAreaLevel3.LongName=t.long_name,a.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),a.City.LongName=t.long_name,a.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:a}),e.$emit("GetAddress",e.fullAddress))}))}else{e.lngLatData.push({Lat:t.features[0].geometry.coordinates[1],Lng:t.features[0].geometry.coordinates[0]});o=new google.maps.LatLng(t.features[0].geometry.coordinates[1],t.features[0].geometry.coordinates[0]),i=new google.maps.Geocoder;i.geocode({latLng:o},(function(t,o){a.FullAddress=t[0].formatted_address,o==google.maps.GeocoderStatus.OK&&(t[0].address_components.forEach((function(t,o){"country"==t.types[0]?(a.Country.Name=t.short_name,a.Country.LongName=t.long_name):"postal_code"==t.types[0]?a.PinCode=t.long_name:"administrative_area_level_1"==t.types[0]?(a.AdministrativeAreaLevel1.LongName=t.long_name,a.AdministrativeAreaLevel1.Name=t.short_name):"administrative_area_level_2"==t.types[0]?(a.AdministrativeAreaLevel2.LongName=t.long_name,a.AdministrativeAreaLevel2.Name=t.short_name,a.State.LongName=t.long_name,a.State.Name=t.short_name):"administrative_area_level_3"==t.types[0]?(e.address.push({AdministrativeArea3:t.long_name}),a.AdministrativeAreaLevel3.LongName=t.long_name,a.AdministrativeAreaLevel3.Name=t.short_name):"locality"==t.types[0]&&(e.address.push({City:t.long_name}),a.City.LongName=t.long_name,a.City.Name=t.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:a}),e.$emit("GetAddress",e.fullAddress))}))}}}},S=y,b=(a("d6ba"),a("2877")),_=Object(b["a"])(S,o,i,!1,null,null,null);e["a"]=_.exports},3975:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Polygon Details")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Stroke Width")]),t._v(":"+t._s(t.StrokeWidthValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalStrokeWidth)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.StrokeWidthValue,expression:"StrokeWidthValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"1",max:"10",step:"1",id:"txtstrokeWidth"},domProps:{value:t.StrokeWidthValue},on:{__r:function(e){t.StrokeWidthValue=e.target.value}}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("StrokeOpacity")]),t._v(":"+t._s(t.StrokeOpacityValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalStrokeOpacity)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.StrokeOpacityValue,expression:"StrokeOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtStrokeOpacity"},domProps:{value:t.StrokeOpacityValue},on:{__r:function(e){t.StrokeOpacityValue=e.target.value}}})])]),e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("FillOpacity")]),t._v(":"+t._s(t.FillOpacityValue)),e("span",{staticClass:"slidervalve",domProps:{textContent:t._s(t.totalFillOpacity)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.FillOpacityValue,expression:"FillOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtFillOpacity"},domProps:{value:t.FillOpacityValue},on:{__r:function(e){t.FillOpacityValue=e.target.value}}})])]),t._m(0),t._m(1)]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row mt-0"},[e("div",{staticClass:"col-md-6 col-sm-12 float-left mb-2"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Locator,expression:"Locator"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by name"},domProps:{value:t.Locator},on:{input:function(e){e.target.composing||(t.Locator=e.target.value)}}})])]),e("div",{staticClass:"col-md-6 col-sm-12 float-left"},[e("div",{staticClass:"background-0 text-left form-check-inline search-btm-btn"},[e("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"},on:{click:t.GetUserSkillList}},[e("i",{staticClass:"fa fa-search"})]),e("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear all "},on:{click:t.RefreshList}},[e("i",{staticClass:"fa fa-refresh"})])])])]),e("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"",IdentityColumn:"user_id",HeaderText:t.$t("Zone Management"),LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:[],listType:["List"],ListData:t.LocatorData,HeaderData:t.Headers,HeaderButtons:"",TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),e("div",{staticClass:"row flex-row-reverse pt-3"},[e("div",{staticClass:"col-lg-12 text-right"},[e("a",{staticClass:"btn btn-success formbtn",attrs:{title:"",name:"btnSave",tabindex:"6"},on:{click:t.SaveStyleShape}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v("Save Polygon")]),t._v("  "),e("a",{staticClass:"btn btn-danger formbtn",attrs:{title:"",name:"btnDelete",tabindex:"6"},on:{click:t.DeleteFeature}},[e("i",{staticClass:"fa fa-trash pr-2"}),t._v("Delete Polygon")])])])],1)])])])],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Stroke Color")]),t._v(": "),e("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtstrokeColor",value:"#555555",title:"Stroke Color"}})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-lg-4"},[e("div",{staticClass:"form-group"},[e("label",{},[t._v("Fill")]),t._v(": "),e("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtFillColor",value:"#555555",title:"Fill Color"}})])])}],s=a("9769"),n={created:function(){var t=this;t.GetUserSkillList(),t.polygonData.forEach((function(e,a){e.Id==t.polygonNewShapeId&&(t.FillOpacityValue=t.polygonData[a].strokeOpacity,t.StrokeOpacityValue=t.polygonData[a].strokeOpacity,t.totalStrokeWidth=t.polygonData[a].strokeWeight)}))},props:{polygonNewShapeId:{type:String},polygonData:{type:String}},data(){return{Locator:"",Headers:[{COLUMN_NAME:"first_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"resourceTypeName",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ResourceType",DISPLAY_ORDER:2},{COLUMN_NAME:"skills",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Skill",DISPLAY_ORDER:3},{COLUMN_NAME:"department",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Department",DISPLAY_ORDER:3}],LocatorData:[],tempLocatorData:[],StrokeWidthValue:"2",StrokeOpacityValue:"0.0",FillOpacityValue:"0.5"}},methods:{GetUserSkillList:function(){var t=this,e="search="+t.Locator;s["a"].GetUserSkillList(e).then(e=>{t.LocatorData=e.data.result.data,setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)})},actionButtonClick(t,e,a,o){},renderActions:function(t){},leftCommonSearch:function(t){},commonHeaderButtonClick:function(t){},sortdata:function(t){},RefreshList:function(){var t=this;t.Locator="",t.GetUserSkillList()},DeleteFeature:function(){var t=this;t.$emit("DeleteFeature")},SaveStyleShape:function(){var t=this,e="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.length>0&&(e+=","),e+=$(this).val()}));let a={Id:t.polygonNewShapeId,strokeOpacity:t.StrokeOpacityValue,strokeWeight:t.StrokeWidthValue,strokeColor:document.getElementById("txtstrokeColor").value,fillOpacity:document.getElementById("txtFillOpacity").value,fillColor:document.getElementById("txtFillColor").value,locatorids:e};t.$emit("GetZoneManagementData",a)}}},r=n,l=(a("036f"),a("2877")),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports},"3e91":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachment")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SaveAttachment}})],1)])])])],1)},i=[],s=(a("b7ef"),a("14d9"),a("9769")),n={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(t){try{var e=this;e.AttachmentfileData=[];var a=t.target.files[0],o=new FileReader;o.onload=function(t){return function(t){var o=t.target.result,i=window.btoa(o),s=a.name;e.AttachmentfileName=s;var n=s.lastIndexOf("."),r=s.substring(n+1,s.length);e.AttachmentfileExt+="."+r;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;e.AttachmentfileSize=d;var c={attachement_mime:l,fileName:s,id:0==e.id||null==e.id?e.TicketAttachmentId:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:i,fileSize:d};e.AttachmentfileData.push(c)}}(),o.readAsBinaryString(a)}catch(i){}},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var o=t/1024/1024;return o},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var t=this,e=t.disallowFileTypes.split(",");e.includes(t.AttachmentfileExt)?(t.checkFileValidExt=!1,t.ShowAlert(t.$t("InvalidFileUploadMsg",t.fileName,t.disallowFileTypes),"warning",!0,t.$t("Alert"))):t.checkFileValidExt=!0;var a=this.SizeToMb(t.AttachmentfileSize);if(a>parseInt(t.allowedPerFileSizeInMb,10)?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,a<0?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,1==t.checkFileValidExt&&1==t.checkFileValidSize){var o=JSON.stringify(t.AttachmentfileData);s["a"].UploadFile(o).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.Status?(t.ShowAlert(t.$t("Attachment successfully added"),"success",!0,t.$t("Alert")),t.DisplayName="",t.FileSrc="",$("input[type=text]").val(""),t.Close(),t.$emit("FetchAttachmentData"),t.$parent.noRecord=!1,t.callbackfunction()):(t.FileSrc="",$("input[type=text]").val(""))},(function(t){}))}},Close:function(){var t=this;t.FormSchemaData[0].Data[0].value=null,t.AttachmentfileName="",t.Attachmentfile=null,t.AttachmentfileData=null,t.FormSchemaData[0].Data[1].config.onChange=t.GetBase64String,t.$parent.showAttachmentModal=!1,"Attachments"==t.viewMode?document.getElementById("tab-attachment").click():t.$parent.FetchAttachmentData(),t.$parent.noRecord=!1}}},r=n,l=a("2877"),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports},"42e5":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal d-block my-popups dialog"},[e("div",{staticClass:"modal-dialog mw-1000"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("div",{attrs:{name:"headerForModal"}},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Form")))])]),e("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body setheight"},[t._l(t.GroupsOfFields,(function(a,o){return[e("div",{staticClass:"col-lg-12 mb-3 px-0"},[a.header_name?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5",class:{"text-left":"left"==a.headerPositionType,"text-center":"center"==a.headerPositionType,"text-right":"right"==a.headerPositionType}},[e("span",[t._v(t._s(a.header_name))])])]):t._e()]),t._l(a.SectionData,(function(a,o){return e("div",{staticClass:"row pl-3 pr-0"},[e("div",{staticClass:"col-lg-12 mb-3"},[t.GetLocalizedValue(a.group_name,a.group_display_name)?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v(t._s(t.GetLocalizedValue(a.group_name,a.group_display_name)))])])]):t._e()]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 d-flex flex-wrap"},t._l(a.FormFieldData,(function(i,s){return e("div",{key:s,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==i.form_field_visibility,"col-lg-12 col-xl-12":"single"==i.layout_type,"col-lg-6 col-xl-6":"double"==i.layout_type,"col-lg-4 col-xl-4":"triple"==i.layout_type,"col-lg-3 col-xl-3":"four"==i.layout_type},attrs:{id:i.name}},["NO"==i.form_field_visibility?e("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"item.value"}],attrs:{type:"hidden",id:i.name},domProps:{value:i.value},on:{input:function(e){e.target.composing||t.$set(i,"value",e.target.value)}}}):t._e(),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.GetLocalizedValue(i.label,i.display_name))+":"),1==i.is_required?e("span",{class:{"text-danger":1==i.is_required}},[t._v("*")]):t._e()]),t.isBlank(i.user_guide)?t._e():e("a",{attrs:{href:"javascript:;",tabindex:-1,"data-toggle":"popoveruserguide","data-content":t.GetLocalizedValue(i.user_guide)}},[e("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 float-left"},["img"==i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"}],ref:"file",refInFor:!0,class:{"form-control":!0,"is-invalid":"Lookup"!=i.picklist_options&&o.length>0,disabled:"commission_type"==i.name||"agreement_type"==i.name},attrs:{type:"file",id:"file",placeholder:t.GetFieldPlaceHolder(i.label,i.display_name),id:i.name,name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},on:{change:function(e){return t.handleFileUpload(e,i)}}})]),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"img"==i.dt_code?e("div",{staticClass:"mt-2",attrs:{id:"divimagedisplayImageId"}},[i.value.bass64?e("div",[e("img",{staticClass:"img-fluid mb-2",staticStyle:{"max-height":"99px",width:"auto"},attrs:{src:i.value.bass64,alt:"Logo",width:"200",height:"150"}})]):t._e()]):t._e(),"date"==i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("DatePicker",{class:{"input-group w-100":!0,"is-invalid":o[0]},staticStyle:{"flex-wrap":"nowrap"},attrs:{is24hr:t.is24hr,mode:t.mode,disabled:i.disabled,masks:t.masks,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function({inputValue:s,inputEvents:n,togglePopover:r}){return[e("input",t._g({ref:"inputDatePicker",refInFor:!0,class:{"form-control w-100":!0,"is-invalid":o[0]},attrs:{autocomplete:"off",disabled:i.disabled,name:i.name,placeholder:i.label},domProps:{value:s},on:{blur:function(e){return t.onBlur(e,a)}}},n)),e("div",{staticClass:"input-group-append"},[e("span",t._g({staticClass:"input-group-text"},i.disabled?null:n),[e("i",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("span",{directives:[{name:"show",rawName:"v-show",value:o[0],expression:"errors[0]"}],ref:"errrorMessage",refInFor:!0,staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))])]}}],null,!0)})]:t._e(),"Lookup"!=i.picklist_options&&"date"!=i.dt_code&&"radio"!=i.dt_code&&"select"!=i.dt_code&&"textarea"!=i.dt_code&&"checkbox"!=i.dt_code&&"phone"!=i.dt_code&&"img"!=i.dt_code&&"signature"!=i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:i.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=i.picklist_options&&o.length>0,disabled:"commission_type"==i.name||"agreement_type"==i.name},attrs:{readonly:t.isforshow,type:"text",placeholder:t.GetFieldPlaceHolder(i.label,i.display_name),id:i.name,name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},domProps:{value:i.value},on:{input:function(e){e.target.composing||t.$set(i,"value",e.target.value)}}}),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"textarea"==i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("textarea",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"},{name:"model",rawName:"v-model.trim",value:i.value,expression:"item.value",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":"textarea"==i.dt_code&&o.length>0},attrs:{type:"text",placeholder:t.GetFieldPlaceHolder(i.label,i.display_name),id:i.name,name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},domProps:{value:i.value},on:{input:function(e){e.target.composing||t.$set(i,"value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"phone"==i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("div",{staticClass:"col-md-12 col-sm-12 col-lg-12 p-0"},[e("vue-phone-number-input",{attrs:{name:i.name,"no-use-browser-locale":!0},on:{update:function(e){return t.GetPhoneNumber(i,e,"spanPhone"+s)}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("span",{staticClass:"invalid-feedback",staticStyle:{display:"none"},attrs:{id:"spanPhone"+s}},[t._v("Enter valid number.")])],1)]}}],null,!0)})]:t._e(),"radio"==i.dt_code&&2==t.MakeArray(i.picklist_options,i.dt_code).length?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:n}){return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name),disabled:i.is_Disabled,tabindex:"5"},domProps:{value:i.value,checked:t.makeCheckBoxSelected(t.MakeArray(i.picklist_options,i.dt_code),i.value,"toggle")},on:{change:function(e){t.AssignToggleValues(e,i,t.MakeArray(i.picklist_options,i.dt_code),o,s)}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v(t._s(t.MakeArray(i.picklist_options,i.dt_code)[0].name))]),e("span",{staticClass:"slider-no"},[t._v(t._s(t.MakeArray(i.picklist_options,i.dt_code)[1].name))])])])]),n[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==i.dt_code&&t.MakeArray(i.picklist_options,i.dt_code).length>2&&i.optionsType?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:n}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(i.picklist_options,i.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+i.name+"_"+a.value,name:i.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(i.name,i.display_name),disabled:i.is_Disabled},domProps:{value:a.value,checked:a.value==i.value,checked:t._q(i.value,a.value)},on:{change:[function(e){return t.$set(i,"value",a.value)},function(e){return t.showDependentItem(i,a.value,o,s)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+i.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),n[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==i.dt_code&&t.MakeArray(i.picklist_options,i.dt_code).length>2&&!i.optionsType?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:n}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(i.picklist_options,i.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+i.name+"_"+a.value,name:i.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(i.name,i.display_name),disabled:i.is_Disabled},domProps:{value:a.value,checked:a.value==i.value,checked:t._q(i.value,a.value)},on:{change:[function(e){return t.$set(i,"value",a.value)},function(e){return t.showDependentItem(i,a.value,o,s)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+i.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),n[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(n[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==i.dt_code&&"HorizantalCheckBox"==i.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},t._l(t.MakeArray(i.picklist_options,i.dt_code),(function(a){return e("div",{staticClass:"form-check form-check-inline"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+i.name+"_"+a.value,name:i.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(i.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(i,a.value,e)}}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+i.name+"_"+a.value}},[t._v(t._s(a.name))])])])})),0),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==i.dt_code&&"VerticalCheckBox"==i.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"form-group"},t._l(t.MakeArray(i.picklist_options,i.dt_code),(function(a){return e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+i.custom_field_id+"_"+a.value,name:i.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(i.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(i,a.value,e)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+i.custom_field_id+"_"+a.value}},[t._v(" "+t._s(a.name)+" ")])])})),0)]),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==i.picklist_options&&"select"==i.dt_code&&"custom"==i.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:1==i.dependent_show_type?t.GetValidation(i):"",expression:"item.dependent_show_type == 1 ? GetValidation(item) : ''"}],class:{"custom-vselect":1==t.vSelectValidate,"is-invalid":"Lookup"==i.picklist_options&&"select"==i.dt_code&&"custom"==i.dropdown_type&&o.length>0},attrs:{label:"name",filterable:!1,name:i.name,placeholder:t.GetFieldPlaceHolder(i.label,i.display_name,i.dt_code),value:i.value,options:i.select_options,checkvalue:i.value,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},on:{search:function(e){return t.onSearch(e,i)},"@input":function(e){return t.setSelectedValue(i,e)}},scopedSlots:t._u([{key:"option",fn:function(a){return[e("div",{staticClass:"d-center"},[t._v(" "+t._s(a.name)+" ")])]}},{key:"selected-option",fn:function(a){return[e("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.name)+" ")])]}}],null,!0),model:{value:i.select_value,callback:function(e){t.$set(i,"select_value",e)},expression:"item.select_value"}},[e("template",{slot:"no-options"},[t._v(" "+t._s(t.$t("TypeTosearch"))+" "+t._s(t.GetLocalizedValue(i.label,i.display_name))+" ")])],2),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==i.picklist_options&&"select"==i.dt_code&&"normal"==i.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:o,errors:s}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:i.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"==i.picklist_options&&"select"==i.dt_code&&"normal"==i.dropdown_type&&s.length>0},attrs:{name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name),"mousedown.native":"onKeyDown1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(i,"value",e.target.multiple?a:a[0])},function(e){t.FillDropdown(i,null),t.onchangechannel(i,a.LeadData)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(i.select_options),(function(a){return e("option",{domProps:{selected:i.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),s[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"!=i.picklist_options&&"select"==i.dt_code?[e("Field",{attrs:{rules:t.GetValidation(i)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:o}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(i),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:i.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=i.picklist_options&&"select"==i.dt_code&&o.length>0},attrs:{name:i.name,"data-vv-as":t.GetLocalizedValue(i.name,i.display_name)},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(i,"value",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeArray(i.picklist_options,i.dt_code),(function(a){return e("option",{domProps:{selected:i.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"CA"==t.UserType?e("div",{staticClass:"ml-2 mt-1"},[1==i.isPlusIcon?e("a",{staticClass:"round-icon-small btn-dark theme-primary"},["industry_type_id"==i.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddIndustrypopup(i)}}}):t._e(),"channel_id"==i.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddLeadSourcepopup(i)}}}):t._e(),"role_title_id"==i.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddRoleTitlepopup(i)}}}):t._e()]):t._e()]):t._e()],2)])])])})),0)])}))]})),0==t.isforshow?e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-success formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SubmitData()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),e("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])]):t._e()],2)])])])])],1)},i=[],s=(a("14d9"),a("d91b"),a("9769")),n=a("d5da"),r={components:{DatePicker:n["DatePicker"]},props:{isforshow:{type:Boolean,required:!0},formIdForShow:{type:String,required:!0},moduleName:{type:String,required:!0},subModuleCode:{type:String,required:!0},workOrderId:{type:String,required:!0},subStatusId:{type:String,required:!0},listForSubmittedForm:{type:Array,required:!0},propFormId:{required:!0},callbackfunction:{type:Function}},data(){return{WorkOrderId:0,FormId:null,FormFieldData:null,isLoading:!1,GroupsOfFields:[],ApiURL:null,UserType:"",containername:""}},created(){var t=this;t.UserType=t.GetUserInfo.UserType,t.containername=t.GetUserInfo.ContainerName,t.FormId=t.formIdForShow,t.FetchData()},methods:{makeCheckBoxSelected:function(t,e,a){return"string"==typeof t&&(t=t.split(",")),"toggle"==a?t[1].value==e:!!t.includes(e)},onChangeCheckBox:function(t,e,a){"string"==typeof t.value&&(t.value=t.value.split(",")),1==a.target.checked?t.value.push(e):t.value.splice(t.value.indexOf(e),1)},Close:function(){var t=this;t.$parent.ShowWorkOrderStatusForm=!1,t.$emit("Close")},FetchData:function(){var t=this;t.isLoading=!0;var e=`id=${t.FormId}&moduleName=${t.moduleName}&subModuleCode=${t.subModuleCode}&otherData=${t.workOrderId}&subStatusId=${t.subStatusId}&isForLog=`+t.isforshow;s["a"].GetFormById(e).then((function(e){if(t.listForSubmittedForm.length>0){var a=t.listForSubmittedForm.filter(e=>e.formId==t.FormId&&null!=e.formSubnittedId&&1==e.hasOwnProperty("SaveFormJSON"));a.length>0?t.FormFieldData=a[0].SaveFormJSON:0==t.formIdForShow||"0"==t.formIdForShow?t.FormFieldData=t.listForSubmittedForm:t.FormFieldData=e.data.data}else t.FormFieldData=e.data.data;null!=t.FormFieldData&&t.FormFieldData.length>0&&$.each(t.FormFieldData,$.proxy((function(e,a){if("img"==a.dt_code){var o={fieldType:"FileUpload",fileName:"",length:"",fileType:"",containerName:t.containername,id:t.FormId,bass64:a.value};a.value=o}"checkbox"==a.dt_code&&(a.select_value=[]);var i=a.headerId,s=$.grep(t.GroupsOfFields,(function(t,e){return t.headerId==i}));if(0==s.length){var n={headerId:a.headerId,header_name:a.HeaderName,header_DisplayOrder:a.header_DisplayOrder,headerPositionType:a.headerPositionType,SectionData:[]},r=$.grep(t.FormFieldData,(function(t,e){return t.headerId==i}));$.each(r,$.proxy((function(e,a){var o=a.group_id,i=$.grep(n.SectionData,(function(t,e){return t.group_id==o}));if(0==i.length){var s=$.grep(r,(function(t,e){return t.group_id==o})),l={group_id:o,group_name:a.group_name,LayoutType:a.layout_type,group_display_name:t.GetLocalizedValue(a.group_name,a.group_display_name),group_is_system_generated:a.group_is_system_generated,FormFieldData:s};n.SectionData.push(l)}}),this)),t.GroupsOfFields.push(n),console.log("vm.GroupsOfFields",t.GroupsOfFields)}}),this)),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.RadioButtonBootstrap()}),100),setTimeout((function(){t.isLoading=!1}),500)}))},SubmitData:function(t){var e=this;e.submited=!0,e.isLoading=!0;var a=e.FormFieldData,o=[],i=0;if($.each(a,(function(t,a){var s=a.value;if("date"==a.dt_code&&(s=a.value),"contact_number"==a.name||"home_phone"==a.name||"business_phone"==a.name){var n=e.phoneList.filter(t=>t.field_id==a.custom_field_id);n.length>0&&(a.value=$.trim(n[0].value),s=$.trim(n[0].value),0==n[0].isValid&&$.trim(a.value).length>0&&i++)}if("checkbox"==a.dt_code&&(s=String(a.value)),"select"==a.dt_code)try{s="object"===typeof s&&null!==s?s.value:s}catch(l){}var r={field_name:a.name,field_value:s,custom_field_id:a.custom_field_id,dt_code:a.dt_code};console.log("dataObject1",r),o.push(r)})),i>0)return e.isLoading=!1,e.submited=!1,!1;var n={data:o,formId:e.FormId,refId:e.workOrderId,subModuleCode:e.subModuleCode},r=JSON.stringify(n);s["a"].SaveUserFormData(r).then((function(t){e.ShowAlert(t.data.msg,"success",!0,e.$t("Alert")),$.each(e.listForSubmittedForm,(function(o,i){i.formId==e.FormId&&(i.formSubnittedId=t.data.returnId,i.SaveFormJSON=a)})),e.submited=!1,e.Close(),e.callbackfunction(),setTimeout((function(){e.isLoading=!1}),500)}))},AssignToggleValues:function(t,e,a,o,i){var s=this,n="";if(t.target.checked){n=a[1].value;var r=$.grep(a,(function(t,e){return"yes"==String(t.value).toLowerCase()||"1"==String(t.value).toLowerCase()||"true"==String(t.value).toLowerCase()||"public"==String(t.value).toLowerCase()}));null!=r&&r.length>0&&(n=r[0].value)}else{n=a[0].value;r=$.grep(a,(function(t,e){return"no"==String(t.value).toLowerCase()||"0"==String(t.value).toLowerCase()||"false"==String(t.value).toLowerCase()||"private"==String(t.value).toLowerCase()}));null!=r&&r.length>0&&(n=r[0].value)}"0"==n||"no"==n.toLowerCase()?n=!1:"1"!=n&&"yes"!=n.toLowerCase()||(n=!0),e.value=n,s.showDependentItem(e,n,o,i)},handleFileUpload:function(t,e){var a=this;this.selectedFile=t.target.files[0];var o={fieldType:"FileUpload",fileName:t.target.files[0].name,length:t.target.files[0].size,fileType:t.target.files[0].type,containerName:a.containername,id:a.FormId},i=new FileReader;i.readAsDataURL(this.selectedFile),i.onload=()=>{o.bass64=i.result,e.value=o},console.log("selectedFile1",o)}}},l=r,d=a("2877"),c=Object(d["a"])(l,o,i,!1,null,null,null);e["a"]=c.exports},"5e2a":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,'.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:23px;top:3px}.mapboxgl-popup{width:340px;max-width:340px!important}.leaflet-popup-content .popupcontent{background:#fff}.leaflet-left .leaflet-control-zoom{display:none}.leaflet-marker-icon{border-radius:100%!important}.leaflet-popup-content p{margin:auto!important}.leaflet-popup-content-wrapper{padding:0!important}.leaflet-popup-content{margin:auto!important;line-height:1.4!important;width:340px!important}.leaflet-container a.leaflet-popup-close-button{color:#5c5c5c!important;padding:6px 5px 0 0!important}.gm-style-iw.gm-style-iw-c{background-color:#fff!important;padding-right:0!important;padding-bottom:0!important;max-width:648px!important;min-height:150px!important;padding:0!important;width:340px!important;border-radius:0}.gm-style-iw.gm-style-iw-c button.gm-ui-hover-effect{background:0 0!important;display:block!important;font-size:18px!important;border:0!important;margin:0!important;padding:0!important;position:absolute!important;cursor:pointer!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;top:-6px!important;right:-6px!important;width:36px!important;height:40px!important}.gm-style-iw.gm-style-iw-c .gm-style-iw-d{overflow:hidden!important;width:100%!important}.gm-style-iw.gm-style-iw-c #content{padding:0!important;transition:all .3s;width:100%}.gm-style-iw.gm-style-iw-c .map-pop-header{color:#fff}.gm-style-iw.gm-style-iw-c .map-pop-header.Medium{background:#4cb4fb}.gm-style-iw.gm-style-iw-c .map-pop-header.Low{background:#4db567}.gm-style-iw.gm-style-iw-c .map-pop-header.High{background:#fbc648}.gm-style-iw.gm-style-iw-c .map-pop-header.Critical{background:#ef8934}.gm-style-iw.gm-style-iw-c .map-pop-header.highprofile{background:#de0303}.gm-style-iw.gm-style-iw-c .firstHeading{font-size:16px;display:flex;align-items:center;padding:5px 10px}.gm-style-iw.gm-style-iw-c .status{font-size:12px;background:#5c5c5c;font-weight:400;color:#fff;padding:4px 6px;margin-left:5px}.gm-style-iw.gm-style-iw-c p.details{display:flex;width:100%;font-weight:bolder;font-size:14px;padding:5px 10px;margin-bottom:4px}.gm-style-iw.gm-style-iw-c p.details span{font-size:12px;font-weight:400;text-transform:capitalize}.gm-style-iw.gm-style-iw-c .view-details{display:flex;width:100%;font-weight:bolder;font-size:14px;margin-bottom:0;border-top:2px solid #bfbfbf;flex-direction:row}.gm-style-iw.gm-style-iw-c .view-details a{padding:0 5px;margin-right:5px;color:#525e65}.mapboxgl-popup-content{padding:0!important}.mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.mail-box-pop .modal-dialog{max-width:570px!important;min-height:500px!important}.mail-box-pop.eta .modal-dialog{max-width:1200px!important;min-height:500px!important}.mail-box-pop.eta .modal-body{max-height:800px!important;height:800px!important}.motabod{border-right:10px solid #e5e5e5}.movedivider{background-repeat:no-repeat;background-position:0 0;width:37px;height:57px;position:absolute;z-index:999;right:-24px;top:160px;display:none}tr.bg-danger{background-color:#f7ccd0!important}.ui-resizable-handle{z-index:9999}.custom-tab-content ul.responsive-tabs.fsmtabcontrol li a{padding:10px}.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input-remove:after,.tags-input-remove:before{background:#fff!important}div[aria-describedby=divticketquickview] .modal-dialog{max-width:85%!important}ul.tags_fsm{float:left;margin:0;padding:0}ul.tags_fsm li{float:left;margin:0 5px 5px 0;padding:0 8px;display:inline-block;color:#fff;border-radius:5px!important;font-size:12px}.tags-input span{margin-bottom:.3em}.circle-leaflet{width:55px!important;height:55px!important;line-height:55px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m2.png)!important;text-align:center!important;font-weight:700!important;position:absolute!important;top:-22px!important;left:-19px!important}.table-heading-wb .table-head-btn{padding:.5rem}.gmnoprint{right:0!important;left:auto!important}.bg-gray-faint{position:relative;background-color:#fff!important;font-family:Open Sans,sans-serif;padding:8px 16px!important;margin-top:55px!important;border:1px solid #2196f3;margin-left:12px!important}.bg-gray-faint:after{color:#2196f3;content:"\\f0d8";position:absolute;font:normal normal normal 14px/1 FontAwesome;top:-19px;left:10%;font-size:27px}.checkbox-container>input,.radio-container>input,.switch-container>input,.toggle-container>input{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.txt-m{font-size:15px;line-height:24px;margin-top:0;margin-bottom:0}.toggle-group{display:inline-flex;text-align:center;border-radius:18px}.toggle-container{display:block;max-width:100%}input:checked+.toggle{background:#448ee4;color:#fff}.toggle{flex-shrink:0;cursor:pointer;color:#999;font-weight:700;font-size:12px;padding:6px 18px;border-radius:18px!important;background-color:transparent;transition:color .125s,background-color .125s}.switch{position:relative;display:inline-block;width:60px;height:31px;margin:0 10px}.switch input{opacity:0;width:0;height:0}.sliderchk{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.sliderchk,.sliderchk:before{position:absolute;transition:.4s}.sliderchk:before{content:"";height:24px;width:24px;left:6px;bottom:4px;background-color:#fff}input:checked+.sliderchk{background-color:#2196f3}input:focus+.sliderchk{box-shadow:0 0 1px #2196f3}input:checked+.sliderchk:before{transform:translateX(26px)}.sliderchk.round{border-radius:34px!important}.sliderchk.round:before{border-radius:50%}.textname{top:29px;position:absolute;left:4px;font-size:13px;color:#999;font-weight:700}.timelegend{height:10px;padding:0 15px;display:inline-block}.timelegend.min10{background-color:#96d52d}.timelegend.min20{background-color:#f0c141}.timelegend.min30{background-color:#f18d76}.showduration{float:left;color:#565656!important;position:absolute;left:4px;top:0;cursor:pointer;font-size:18px;background-color:#fff;padding:7px 18px;margin:10px;margin-left:8px;font-family:Roboto,Arial,sans-serif;z-index:999}#divdataviewdata .card-box .custom-checkbox{padding-left:1rem!important}.tags-input-root .typeahead-badges{padding-top:.25rem!important}#divmapdata .map-result img{width:auto!important}.filterscrollForCardView{scrollbar-width:thin;scrollbar-color:#848484}.filterscrollForCardView::-webkit-scrollbar{width:8px;height:8px}.filterscrollForCardView::-webkit-scrollbar-track{background-clip:content-box;border:2px solid transparent}.filterscrollForCardView::-webkit-scrollbar-thumb{background-color:#848484}.filterscrollForCardView::-webkit-scrollbar-corner,.scrollbar-1::-webkit-scrollbar-track{background-color:#848484}.typeahead-badges>span{max-width:195px}[data-color_code]:after{background-color:attr(data-color_code)}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#f5f1ef!important}.pinscreenMap{background:#17a2b8;border-left:0!important}.pinscreenMap,.unpinscreenMap{padding:15px 0!important;width:50px;cursor:pointer}.unpinscreenMap{background:#525f65}.unpinscreenMap i{transform:rotate(-45deg)}.map-actions span.esri_prof:hover{transform:none!important}.map-actions span.esri_prof a{color:#212529}.mCustomScrollBox,.mCustomScrollBox .mCS-light{max-height:inherit!important}#scrollbarreplyuserguide{max-height:350px}a[href="/Ticketing/Index"]{background:none!important}.theme-primary.partition{overflow:visible}',""]),t.exports=e},6481:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Notes")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithNote},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)},i=[],s=(a("b7ef"),a("14d9"),a("9769")),n=a("6930"),r=a.n(n),l=a("fb3d"),d=a.n(l),c=(a("d91b"),{components:{ckeditor:r.a.component},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:d.a,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;this.configData(),t.$parent.noteId>0&&(t.TicketNoteId=t.$parent.noteId,t.ticketId=t.$parent.ticketId,t._data.FormSchema[0].Data[0].value=t.$parent.note)},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var o=t/1024/1024;return o},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onChangeRadio:function(t,e){var a=this;a.ticketType=t.target.dataset.value},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],o=new FileReader;o.onload=function(t){return function(t){var o=t.target.result,i=window.btoa(o),s=a.name;e.fileName=s;var n=s.lastIndexOf("."),r=s.substring(n+1,s.length);e.fileExt+="."+r;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;e.fileSize=d;var c={attachement_mime:l,fileName:s,base64String:i,fileSize:a.size,contentType:a.type};e.fileData.push(c)}}(),o.readAsBinaryString(a)}catch(i){}},UploadFileWithNote:function(t,e){var a=this;if(""==a._data.FormSchema[0].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var o=a.disallowFileTypes.split(",");o.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var i=this.SizeToMb(a.fileSize);if(i>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,i<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var n=JSON.stringify(a.ticketModel);s["a"].AddNote(n).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.callbackfunction(),a.Close()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){var t=this;t._data.FormSchema[0].Data[0].value=null,t.FileName=null,t.file=null,t.FormSchema[2].Data[0].config.onChange=t.GetBase64String,this.$emit("Close"),t.$parent.isShowAddNote=!1,"Notes"==t.viewMode?document.getElementById("tab-notes").click():t.$parent.LoadNotesForQuickView(),t.$parent.noRecord=!1}}}),u=c,p=a("2877"),m=Object(p["a"])(u,o,i,!1,null,null,null);e["a"]=m.exports},"6f27":function(t,e,a){var o=a("dd82");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("59af9183",o,!0,{sourceMap:!1,shadowMode:!1})},"78f9":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TimeTrack")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithTime},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},i=[],s=(a("14d9"),a("9769")),n=a("6930"),r=a.n(n),l=a("fb3d"),d=a.n(l),c=(a("d91b"),{components:{ckeditor:r.a.component},props:{id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:d.a,content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,Disabled:0,FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("WorkOrder"),name:"WorkOrder",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){this.GetDDLData("FSM_TRACK_HISTORY")},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetDDLData:async function(t){var e=this,a=`id=${e.id}&moduleName='FSM'&type=`+t;await s["a"].GetDDLDataFSM(a).then((function(t){"Success"==t.data.status&&t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}))},UploadFileWithTime:function(t,e){var a=this,o={TicketId:a.id,WorkOrderId:a._data.FormSchema[0].Data[0].value,TrackDescription:a._data.FormSchema[1].Data[0].value,IsBillable:!0,TrackId:0,RequestFor:"FSM",RequestForType:"START",IPAddress:"",WorkOrderSubject:a._data.FormSchema[0].Data[0].name},i=JSON.stringify(o);a.confirmR(a.$t("ConfirmTimerMsg"),!0,a.$t("StartTimer"),(function(t){a.Disabled=1,s["a"].SaveTrackHistory(i).then(t=>{try{"Success"==t.data.status?(a.$parent.ShowTimer=!0,a.$parent.AddEditText="Edit",a.Disabled=0,a.ShowAlert(a.$t("AddedSuccess",[a.$t("TimeTrack")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedError",[a.$t("TimeTrack")]),"failure",!0,a.$t("Alert")),a.Disabled=0,a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.$emit("Close"),t._data.FormSchema[0].Data[0].value=null,t._data.FormSchema[1].Data[0].value=null,t.$parent.isShowWOTimer=!1,"Timer"==t.viewMode&&t.callbackfunction()}}}),u=c,p=a("2877"),m=Object(p["a"])(u,o,i,!1,null,null,null);e["a"]=m.exports},"7b9c":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageSubIncident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[e("em",{staticClass:"fa fa-files-o pr-2"}),t._v(t._s(t.$t("GuideForUser")))]),e("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgAddEditSubIncidentType"))}})])])])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},i=[],s=a("9769"),n={props:{IncidentTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("IncidentType"),name:"IncidentType",value:"",placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("ParentIncidentType"),name:"ParentIncidentType",value:"",placeholder:"",config:{options:[]},validationRules:{required:!0}},{astype:"TextField",label:this.$t("DESCRIPTION"),name:"DESCRIPTION",value:"",placeholder:"",validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.GetDDLData("FSM_INCIDENT"),t.IncidentTypeId>0&&this.FetchData()},methods:{GetDDLData:async function(t){var e=`id=${this.IncidentTypeId}&moduleName=FSM&type=${t}`;s["a"].GetDDLData(e).then(t=>{this.FormSchema[0].Data[1].config.options=t.data.DATA})},FetchData:function(){var t=this,e="Id="+t.IncidentTypeId;s["a"].FetchDataByIncidentId(e).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&(t.FormSchema[0].Data[0].value=e.data.result.DATA[0].TYPE_NAME,t.FormSchema[0].Data[1].value=e.data.result.DATA[0].PARENT_ID,t.FormSchema[0].Data[2].value=e.data.result.DATA[0].DESCRIPTION)}))},Close:function(){this.$parent.showSubIncidentModal=!1},onSubmit(t,e){var a=this,o={IncidentId:null==a.IncidentTypeId?0:a.IncidentTypeId,IncidentName:t.IncidentType,ParentIncidentId:t.ParentIncidentType,ModuleName:"FSM",StatusId:1001,Description:t.DESCRIPTION},i=JSON.stringify(o);s["a"].SaveIncidentType(i).then(t=>{"Success"==t.data.status?(a.IncidentTypeId>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("IncidentType")]),"success",!0,a.$t("Alert")),a.Close()),a.$parent.FetchRecords()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},r=n,l=a("2877"),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports},d5df:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("section",[e("div",{},[e("div",[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"}),e("span",{staticClass:"p-actions float-md-right float-left mb-wid-100"},[e("a",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{href:"javascript:;"},on:{click:t.ShowHideMap}},[e("em",{staticClass:"fa fa-angle-double-up",attrs:{id:"icnToggleMap"}}),e("br"),t._v(" "+t._s(t.mapHeaderText))]),e("RouterLink",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{to:"/Ticketing/WorkOrderListing",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left"}),e("br"),t._v("Back to list")])],1)])])]),1==t.isShowMap?e("MapComponentVue",{staticClass:"row",attrs:{mapContainer:"WorkOrderDetail",mapType:"MapBox",Data:t.mapObj,config:t.config}}):t._e(),e("div",{staticClass:"row"},[e("div",{staticClass:"container-fluid padding-t_10"},[e("div",{staticClass:"left-menu-tab"},[t._m(0),e("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab fsmtabcontrol lefttabiconfix",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active left-menu",attrs:{"data-toggle":"tab",href:"#Details",id:"tab-details",role:"tab","aria-controls":"DetailsText","aria-selected":"true",title:"Details"},on:{click:t.Details}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Details")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-resapproval",href:"#ServiceAppointment",role:"tab","aria-controls":"ServiceAppointment","aria-selected":"false",title:"@Resources.ServiceAppointment"},on:{click:t.ServiceAppointment}},[e("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v("Service Appointment")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-timetrackhistory",href:"#TimeTrackHistory",role:"tab","aria-controls":"TimeTrackHistory","aria-selected":"false",title:"@Resources.Time @Resources.Track @Resources.History"},on:{click:t.TimeTrackHistory}},[e("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t._v("Time Track History")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-viewstatushistory",href:"#ViewStatusHistory",role:"tab","aria-controls":"ViewStatusHistory","aria-selected":"false",title:"@Resources.View @Resources.Status @Resources.History"},on:{click:t.GetWorkOrderStatusHistory}},[e("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t._v("View Status History")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-reportincident",href:"#ReportIncident",role:"tab","aria-controls":"ReportIncident","aria-selected":"false",title:"@Resources.Report @Resources.Incident"},on:{click:t.GetReportIncidentListing}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v("Report Incident")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-attachments",href:"#Attachments",role:"tab","aria-controls":"Attachments","aria-selected":"false",title:"@Resources.Attachments"},on:{click:t.FetchAttachmentDatas}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v("Attachments")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-notes",role:"tab","aria-controls":"Notes","aria-selected":"false",title:"@Resources.Notes"},on:{click:t.LoadNoteForQuickView}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Notes")])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-requiredproduct",id:"tab-requiredproduct",role:"tab","aria-controls":"RequiredProducts","aria-selected":"false",title:"@Resources.RequiredProducts"},on:{click:t.RequiredProduct}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v("Required Products")])])])]),e("div",{staticClass:"right-content"},[e("div",{staticClass:"col-md-12 p-0 mb-2"},[e("div",{staticClass:"theme-primary partition p-actions-expand"},[e("span",{staticClass:"p-name text-white"},[e("a",{attrs:{"data-toggle-tooltip":"tooltip"}},[t._v(t._s(t.headerText))])]),e("span",{staticClass:"p-actions float-right"},[e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"AddNew Notes"},on:{click:function(e){return t.AddNote(null)}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add New Notes")]),e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"Add Attachment"},on:{click:function(e){return t.openAttachmentPopup()}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add Attachment")]),e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"Add Incident"},on:{click:function(e){return t.openReportIncidentPopUp()}}},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Add Incident")]),e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"StartTimer",id:"StartTimer"},on:{click:t.StartTimer}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Start Timer")]),t._m(1),e("RouterLink",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{to:"/FSM/workorderlisting",title:"Back","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Back to list")]),e("a",{staticClass:"p-action-btn text-white disabled btnDelete d-none",attrs:{href:"javascript:;",id:"DeleteMultiple"},on:{click:function(e){return t.DeleteIncidentList()}}},[e("i",{staticClass:"fa fa-trash pr-2"}),e("br"),t._v("Delete")]),"Completed"!=t.Status_Id&&"Failed"!=t.Status_Id&&"Canceled"!=t.Status_Id&&null!=t.SA_Id?e("a",{staticClass:"p-action-btn text-white",attrs:{title:"Schedule",href:"javascript:;"}},[e("i",{staticClass:"fa fa-clock-o action-icon",attrs:{"aria-hidden":"true"}}),e("br"),t._v("@Resources.Schedule ")]):t._e()],1)])]),t.WorkOrderDetailTab?e("WorkOrderDetailTab",{attrs:{workOrderDetailData:t.workOrderDetailData,WO_Status_Id:t.WO_Status_Id,isLocateorNonLocate:t.isLocateorNonLocate,workOrderId:t.workOrderId,ticketId:t.ticketId,callbackfunction:t.FetchRecords}}):t._e(),t.showNoteModal?e("AddEditNote",{attrs:{configdata:t.configData,id:t.ticketId},on:{Close:t.Close}}):t._e(),t.showAttachmentModal?e("ShowAttachmentDataVue",{attrs:{ListViewAttachment:"1",id:t.ticketId,configdata:t.configData},on:{FetchAttachmentData:t.FetchAttachmentData}}):t._e(),t.showIncidentPopup?e("AddIncidentVue",{attrs:{ticketId:t.ticketId,workOrderId:t.workOrderId},on:{Close:t.Close}}):t._e(),t.showServiceAppointment?e("ServiceAppointmentByIdVue",{attrs:{workOrderId:t.workOrderId,totalRecord:t.totalRecord}}):t._e(),t.showTimeTrackHistory?e("TimeTrackHistoryVue",{attrs:{workOrderId:t.workOrderId,ticketId:t.ticketId,totalRecord:t.totalRecord,TimeTrackHistoryData:t.TimeTrackHistoryData},on:{TimeTrackHistory:t.TimeTrackHistory}}):t._e(),t.showTicketAttachment?e("TicketAttachmentVue",{key:t.componentKey,attrs:{ListViewAttachment:"1",AttachmentData:t.AttachmentData},on:{"open-image":t.openSpecificImage,GetAttachmentData:t.GetAttachmentData}}):t._e(),t.showNotes?e("TicketNotesVue",{attrs:{NoteData:t.NoteList}}):t._e(),t.showReportListing?e("ReportIncidentListingVue",{attrs:{totalRecord:t.totalRecord,workOrderId:t.workOrderId,ticketId:t.ticketId,ReportIncidentListingData:t.ReportIncidentListingData}}):t._e(),t.showWorkOrderStatusHistory?e("WorkOrderStatusHistory",{attrs:{workOrderId:t.workOrderId,ticketId:t.ticketId,totalRecord:t.totalRecord,WorkOrderStatusHistory:t.WorkOrderStatusHistory}}):t._e(),t.ShowTimerMoadal?e("WorkOrderTimerModalVue",{attrs:{id:t.ticketId},on:{Close:t.Close}}):t._e(),t.visible?e("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:t.galleryImages,customClasses:t.lightboxClasses},on:{close:function(e){t.visible=!1}}}):t._e(),t.showRequiredProduct?e("RequiredProductListVue",{attrs:{workOrderId:t.workOrderId}}):t._e()],1)])])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white textelipsis"},[e("a",{attrs:{title:"WorktypeName","data-toggle-tooltip":"tooltip"}},[e("span",[t._v("WO-")]),t._v("TicketId")])])])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:"StopTimer",id:"StopTimer"}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Stop Timer")])}],s=(a("14d9"),a("33e4")),n=a("9769"),r=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"col-md-12 border",staticStyle:{display:"block"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"clearfix"}),e("div",{staticClass:"col-lg-12 mb-3"},[t._m(0),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:t}){return[e("textarea",{staticClass:"form-control form-control:disabled",attrs:{readonly:"",disabled:"disabled"},domProps:{value:t.fieldInfo.value}})]}}])})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6 mb-3"},[t._m(1),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.ScheduledSchema}})],1),e("div",{staticClass:"col-lg-6 mb-3"},[t._m(2),e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.PreferredSchema}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"clearfix"}),e("div",{staticClass:"col-lg-12 mb-3"},[t._m(3),t.isLocateorNonLocate?e("dynamic-form",{attrs:{lang:"en",schema:t.locateFormSchema}}):t._e(),t.isLocateorNonLocate?t._e():e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema}}),t.formListForSubmit.length>0?e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header mb-2"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tbl_formList"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"sorting"},[e("span",[t._v(t._s(t.$t("FormName")))])]),e("th",{staticClass:"text-center"},[e("span",[t._v(t._s(t.$t("FormSubmitted")))])]),e("th",{staticClass:"text-center sorting"},[e("span",[t._v(t._s(t.$t("Action")))])])])]),e("tbody",t._l(t.formListForSubmit,(function(a,o){return e("tr",[e("td",[t._v(" "+t._s(a.name)+" "),"1"==a.second_value?e("span",{staticClass:"text-danger font-weight-bold"},[t._v("*")]):t._e()]),e("td",{staticClass:"text-center"},["Yes"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-success text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e(),"No"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-danger text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e()]),0==t.EditEnabled?e("td",{staticClass:"text-center"},[t._m(4,!0)]):t._e(),t.EditEnabled?e("td",{staticClass:"text-center"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.GetCustomFieldFormForEdit(a)}}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success"})])]):t._e()])})),0)])])]):t._e(),e("div",{staticClass:"row flex-row-reverse mt-2"},[e("div",{staticClass:"col-lg-6 text-right"},[t.isLocateorNonLocate||0!=t.formListForSubmit.length?t._e():e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;",title:t.$t("UpdateStatus"),id:"btnSave"},on:{click:function(e){return t.WorkOrderUpdateStatus()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("UpdateStatus")))]),!t.isLocateorNonLocate&&t.formListForSubmit.length>0?e("a",{staticClass:"btn btn-primary save-btn SubmitUpdate",attrs:{href:"javascript:;",title:t.$t("SaveWorkOrder")},on:{click:function(e){return t.SubmitUpdateStatus()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveWorkOrder")))]):t._e(),t.isLocateorNonLocate?e("a",{staticClass:"btn btn-primary save-btn WorkOrderStatus mr-2",attrs:{href:"javascript:;",id:"WOStatus",title:t.$t("UpdateStatus")},on:{click:function(e){return t.WorkOrderStatus()}}},[e("i",{staticClass:"fa fa-cog pr-2",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(t.$t("UpdateStatus")))])]):t._e(),t.isLocateorNonLocate?e("a",{staticClass:"btn btn-primary save-btn SubmitUpdate",attrs:{href:"javascript:;",title:t.$t("SaveWorkOrder")},on:{click:function(e){return t.SubmitUpdateStatus()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("SaveWorkOrder")))]):t._e()])])],1)])]),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.workOrderModalStatus?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("WorkOrder")+" "+t.$t("Status")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:e}){return[t._v(" "+t._s(e.fieldInfo)+" ")]}}],null,!1,1171166564)})],1),e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{tabindex:"13",title:t.$t("Save"),id:"btnSave"},on:{click:t.SubmitWOrkOrderUpdateStatus}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{tabindex:"14",title:t.$t("Cancel"),id:"btnCancel"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])])])])]):t._e()])]),t.ShowWorkOrderStatusForm?e("EditViewFSMForm",{attrs:{isforshow:!1,formIdForShow:t.formIdForShow,listForSubmittedForm:t.listForSubmittedForm,moduleName:t.moduleName,subModuleCode:t.subModuleCode,workOrderId:t.workOrderId,subStatusId:t.subStatusId,callbackfunction:t.callbackfunction}}):t._e()],1)},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Work Order Detail")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Scheduled Time")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Preferred Time")])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"heading-border mt-2 mb-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v("Status Detail")])])])},function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success disabled"})])}],d=a("42e5"),c={components:{EditViewFSMForm:d["a"]},props:{workOrderDetailData:{type:Array,required:!1},workOrderId:{ype:Number,required:!1},isLocateorNonLocate:{type:String,required:!0},ticketId:{type:Number,required:!1},WO_Status_Id:{type:Number,required:!1},callbackfunction:{type:Function}},data(){return{FormSchema:[{layoutType:"four",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:1e3}},{astype:"TextField",label:this.$t("WO Number"),name:"workorder_number",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Estimation Duration"),name:"estimate_duration",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Ticket Number"),name:"ticket_number",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Created Date"),name:"created_at",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Created BY"),name:"created_by",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Work Type"),name:"work_type_id",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Client"),name:"client",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Address"),name:"address",disabled:!0,value:"",placeholder:"",validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Subject"),disabled:!0,name:"subject",value:"",placeholder:"",validationRules:{required:!1,max:200}}]}],ScheduledSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Scheduled Start Date Time"),name:"SA_Scheduled_StartTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Scheduled End Date Time"),name:"SA_Scheduled_EndTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}}]}],PreferredSchema:[{layoutType:"double",Data:[{astype:"TextField",label:this.$t("Preferred Start Date Time:"),name:"StartDateTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}},{astype:"TextField",label:this.$t("Preferred End Date Time"),name:"EndDateTime",value:"",placeholder:"",disabled:!0,validationRules:{required:!1,max:200}}]}],locateFormSchema:[{layoutType:"double",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.SetParentSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("SubStatus"),name:"SubStatus",value:"",config:{options:[],onChange:this.GetFormsOnBehalfOfSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.onChangeStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],isLoading:!1,moduleName:"TICKETING",subModuleCode:"TICKETING",listForSubmittedForm:[],Description:null,StatusData:[],SubStatusData:[],refId:0,subStatusId:0,fsmType:null,formIdForShow:0,formListForSubmit:[],EditEnabled:!1,workOrderTicketId:0,IsAction:!1,workOrderId:0,WorkOrderStatusId:"",workOrderModalStatus:!1,ShowWorkOrderStatusForm:!1}},created:function(){var t=this;setTimeout(()=>{t.GetDetail()},3e3),setTimeout(()=>{t.workOrderTicketId=t.ticketId,t.workOrderId=t.workOrderId,""!=t.WO_Status_Id&&(t.WorkOrderStatusId=t.WO_Status_Id),t.GetDropDownData("WORK_ORDER_FINAL_STATUS"),t.GetUpdateStatusDataForEdit(t.workOrderId,t.workOrderTicketId),1==t.isLocateorNonLocate&&t.GetFSMDDLData("FSM_WORK_ORDER",t.workOrderTicketId,t.workOrderId)},4e3)},methods:{SubmitWOrkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t._data.nonLocateFormSchema[0].Data[0].value},a=JSON.stringify(e);await n["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},Close:function(){this.workOrderModalStatus=!1},WorkOrderStatus:function(){var t=this;t.workOrderModalStatus=!t.workOrderModalStatus},GetUpdateStatusDataForEdit:async function(t,e){var a=this,o=`TicketId=${e}&WOId=${t}`;await n["a"].GetSingleWorkOrder(o).then((function(e){if("Success"==e.data.status){var o=e.data.result;null!=o&&(1==a.isLocateorNonLocate?(a.ParentSubStatusId=null==o.PARENT_SUB_STATUS_ID?"":o.PARENT_SUB_STATUS_ID,a.ChildSubStatusId=null==o.SUB_STATUS_ID?"":o.SUB_STATUS_ID,a.WorkOrderStatusId=null==o.STATUS_ID?"":o.STATUS_ID,a.ParentSubStatusName=o.PARENT_SUB_STATUS_NAME,a.ChildSubStatusName=o.CHILD_SUB_STATUS_NAME,a.Description=o.COMMENT,a.SetParentSubStatus(t),a.MinutesWorked=o.MINUTES_WORKED>0?o.MINUTES_WORKED:"",a.FeetLocated=o.FEET_LOCATED>0?o.FEET_LOCATED:"",a.ChildSubStatusId>0&&a.GetFormsOnBehalfOfSubStatus()):(a._data.nonLocateFormSchema[0].Data[0].value=a.WorkOrderStatusId,a.GetFormsWithoutSubStatus()))}}))},WorkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t.WorkOrderStatusId},a=JSON.stringify(e);await n["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},SetParentSubStatus:function(){var t=this;t.GetFSMDDLData("FSM_WORK_ORDER_CHILD_SUB_STATUS",t.workOrderTicketId,t.workOrderId),t.GetFormsOnBehalfOfSubStatus(t._data.locateFormSchema[0].Data[0].value)},GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await n["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e._data.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})});let o=a.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"==o.name||"Completed"==o.name?(e.EditEnabled=!1,e.IsAction=!0):e.EditEnabled=!0}}))},onChangeStatus:function(t){var e=this;e.WorkOrderStatusId=t.target.value;let a=e.workorderStatusDataList.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"!=a.name&&"Completed"!=a.name||1!=e.IsAction?e.EditEnabled=!0:e.EditEnabled=!1},GetDetail:function(){var t=this;t.workOrderDetailData.length>0&&t.workOrderDetailData.forEach((function(e){"Description"==e.display_name?t.isBlank(e.value)||(t.FormSchema[0].Data[0].value=e.value.replace(/<\/?[^>]+(>|$)/g,"")):"WO Number"==e.display_name?t.FormSchema[0].Data[1].value=e.value:"Estimation Duration"==e.display_name?t.FormSchema[0].Data[2].value=e.value:"Ticket number"==e.display_name?t.FormSchema[0].Data[3].value=e.value:"Created Date"==e.display_name?t.FormSchema[0].Data[4].value=e.value:"Created by"==e.display_name?t.FormSchema[0].Data[5].value=JSON.parse(e.value)[0].name:"Work type"==e.display_name?t.FormSchema[0].Data[6].value=t.FilterDDLandNormalValue(e.value):"Client"==e.display_name?t.FormSchema[0].Data[7].value=JSON.parse(e.value)[0].name:"Address"==e.display_name?t.FormSchema[0].Data[8].value=e.value:"Subject"==e.display_name?t.FormSchema[0].Data[9].value=e.value:"Preferred Start Date Time"==e.display_name?t.PreferredSchema[0].Data[0].value=e.value:"Preferred End Date Time"==e.display_name?t.PreferredSchema[0].Data[1].value=e.value:"Scheduled Start Date Time"==e.display_name?t.ScheduledSchema[0].Data[0].value=t.$options.filters.formatDateTime(e.value):"Scheduled End Date Time"==e.display_name&&(t.ScheduledSchema[0].Data[1].value=t.$options.filters.formatDateTime(e.value))}))},checkFormSubmitted:function(t){var e=this,a="No";return $.each(e.listForSubmittedForm,(function(e,o){o.formId==t&&o.formSubmittedId>0&&(a="Yes")})),a},GetCustomFieldFormForEdit:function(t){var e=this;e.formIdForShow=t.value,e.subStatusId=e._data.locateFormSchema[0].Data[1].value,e.ShowWorkOrderStatusForm=!e.ShowWorkOrderStatusForm},GetFormsOnBehalfOfSubStatus:async function(t){var e=this;let a=e._data.locateFormSchema[0].Data[1].value;e.formListForSubmit=[],e.listForSubmittedForm=[];var o=`id=${e.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_BY_STATUS&search=&refId=`+a;await n["a"].GetDDLData(o).then((function(t){!e.isBlank(t.data)&&t.data.DATA.length>0&&(e.formListForSubmit=t.data.DATA,$.each(t.data.DATA,(function(t,a){var o={formId:a.value,formSubmittedId:a.first_value,isAllFormMandatory:a.second_value};e.listForSubmittedForm.push(o)})))}))},GetFormsWithoutSubStatus:async function(){var t=this;t.formListForSubmit=[];var e=`id=${t.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_WITHOUT_STATUS_FOR_NON_LOCATE&search=&refId=`;await n["a"].GetDDLData(e).then((function(e){!t.isBlank(e.data)&&e.data.DATA.length>0&&(t.formListForSubmit=e.data.DATA,$.each(e.data.DATA,(function(e,a){var o={formId:a.value,formSubmittedId:a.first_value,isAllFormMandatory:a.second_value};t.listForSubmittedForm.push(o)})))}))},GetFSMDDLData:async function(t,e,a){var o=this,i="",s="";"FSM_WORK_ORDER"==t&&(s=""),s=o._data.locateFormSchema[0].Data[0].value,o._data.locateFormSchema[0].Data[1].config.options=[];var r="id="+e+"&moduleName=&type="+t+"&refId="+s+"&workOrderId="+a;await n["a"].GetFSMDDLData(r).then((function(e){o.isBlank(e.data)||"Success"!=e.data.status||(i=e.data.result.DATA,null!=i?"FSM_WORK_ORDER"==t?i.forEach((t,e)=>{o._data.locateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&i.forEach((t,e)=>{o._data.locateFormSchema[0].Data[1].config.options.push({value:t.value,name:t.name})}):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(o._data.locateFormSchema[0].Data[1].value=""))}))},SubmitUpdateStatus(t,e){var a=this;let o=a.workorderStatusDataList.find(t=>t.value==a.WorkOrderStatusId);"Cancelled"!=o.name&&($.each(a.listForSubmittedForm,(function(t,e){(null==e.formSubnittedId||0==e.formSubnittedId)&&e.isAllFormMandatory})),$.each(a.listForSubmittedForm,(function(t,e){1==e.hasOwnProperty("SaveFormJSON")&&delete e.SaveFormJSON}))),a.isLoading=!0;var i={WorkOrderId:a.workOrderId,TicketId:a.workOrderTicketId,ParentSubStatusId:a._data.locateFormSchema[0].Data[0].value,ChildSubStatusId:a._data.locateFormSchema[0].Data[1].value,Description:"",IsCornerLot:0,IsGasfacility:0,IsCastIron:0,IsPrivateLocateOpportunity:0,IsGasPrintIssue:0,NumberofCIMains:"",MainSizeAndDistance:"",FormSaveId:0,formBaseString:a.listForSubmittedForm,MinutesWorked:0,FeetLocated:0,ReqFrom:"WEB",WorkOrderStatusId:a.WorkOrderStatusId},s=JSON.stringify(i);n["a"].UpdateSubStatus(s).then(t=>{"SUCCESS"==t.data.result.MSG?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.callbackfunction(),setTimeout((function(){a.isLoading=!1}),500)):a.ShowAlert(vm.$t("ErrorWhileSavingRecords",[a.$t("Status")]),"failure",!0,a.$t("Alert"))})}}},u=c,p=a("2877"),m=Object(p["a"])(u,r,l,!1,null,null,null),h=m.exports,g=a("6481"),f=a("3e91"),v=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Add Incident")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SubmitReportIncident}})],1)])])])],1),t.showIncidentPopUp?e("showReportIncidentModalVue",{on:{close:t.close}}):t._e(),t.showSubIncidentPopUp?e("showReportSubIncidentModalVue",{on:{close:t.close}}):t._e()],1)},y=[],S=(a("b7ef"),a("1890")),b=a("7b9c"),_={components:{showReportIncidentModalVue:S["a"],showReportSubIncidentModalVue:b["a"]},props:{ticketId:{required:!1},workOrderId:{required:!1},EditIncidentData:{required:!1}},created:function(){var t=this;void 0!=t.EditIncidentData&&t.EditIncidentData.length>0&&t.EditData(),t.GetDDLData()},data(){return{FormSchemaData:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Incident Type"),name:"ParentIncidentId",value:"",config:{showAddIcon:!0,onChange:this.OnChange,onAddButtonClick:this.openIncidentType,options:[]},placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Incident Sub Type"),name:"ChildSubIncidentId",placeholder:"",validationRules:{required:!0},FieldIndex:0,config:{showAddIcon:!0,onChange:this.SubOnChange,onAddButtonClick:this.openSubIncidentType,options:[]}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Description",placeholder:"",validationRules:"",FieldIndex:0},{astype:"FileField",label:this.$t("Attachment"),name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Report Incident"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],IncidentData:[],showIncidentPopUp:!1,showSubIncidentPopUp:!1,ParentIncidentId:0,IncidentTypeList:[],IncidentSubTypeList:[],fileData:[],fileName:"",fileSize:"",IncidentId:0,AttachmentList:[],ChildSubIncidentId:0}},methods:{EditData:function(){var t=this;t.FormSchemaData[0].Data[0].value=t.EditIncidentData[0].incident_type_id,t.FormSchemaData[0].Data[1].value=t.EditIncidentData[0].incident_subtype_id},SubOnChange:function(t){var e=this;e.ChildSubIncidentId=t.target.value},openSubIncidentType:function(){var t=this;t.showSubIncidentPopUp=!0},openIncidentType:function(){var t=this;t.showIncidentPopUp=!0},close:function(){var t=this;t.showIncidentPopUp=!1,t.showSubIncidentPopUp=!1},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],o=new FileReader;o.onload=function(t){return function(t){var o=t.target.result,i=window.btoa(o),s=a.name;e.fileName=s;var n=s.lastIndexOf("."),r=s.substring(n+1,s.length);e.fileExt+="."+r;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;e.fileSize=d;var c={attachement_mime:l,fileName:s,id:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:i,fileSize:d};e.fileData.push(c)}}(),o.readAsBinaryString(a)}catch(i){}},GetDDLData:function(){var t=this,e="FSM_REPORT_INCIDENT",a=`id=${t.ticketId}&moduleName=Ticketing&type=${e}`;n["a"].GetDDLData(a).then((function(e){e.data.DATA;e.data.DATA.forEach((function(e){t.IncidentTypeList.push({name:e.name,value:e.value}),t.FormSchemaData[0].Data[0].config.options.push({name:e.name,value:e.value})}))}))},SubmitReportIncident:function(){var t=this,e=0;t.FormSchemaData;var a=[],o=null;if("undefined"!=typeof t.fileData)if(t.fileData.length>0){for(var i=0;i<t.fileData.length;i++){var s="."+t.fileData[i].extensionName,r=$.inArray(s,t.DisallowedTypes);-1==r||(e+=1),a.push({formBaseString:""+t.fileData[i].base64String,attachementMime:""+t.fileData[i].attachement_mime,containerName:""+t.fileData[i].containerName,extensionName:""+t.fileData[i].extensionName,fileSize:""+t.fileData[i].fileSize})}0==e&&(o=JSON.stringify(a))}else o=null;else o=null;if(0==e){var l="";if(t.AttachmentList.length>0){a=[];for(i=0;i<t.AttachmentList.length;i++)a.push({AttachmentId:""+t.AttachmentList[i].TICKET_ATTACHMENT_ID});l=JSON.stringify(a)}else l=null;var d={IncidentId:t.IncidentId,TicketId:t.ticketId,WorkOrderId:t.workOrderId,ParentIncidentId:t.ParentIncidentId,ChildSubIncidentId:t.ChildSubIncidentId,IncidentAttachment:t.FileSrc,Description:vm.FormSchemaData[1].Data[0].value,StatusId:1001,file:o,prevfiles:l,ModuleName:"FSM",Submodulecode:"FSM_DETAIL"},c=JSON.stringify(d);n["a"].AddReportIncident(c).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&"Success"==e.data.status?t.IncidentId>0?(alert("1"),t.$emit("Close")):(t.ShowAlert("Incident Succesfully Added"),t.$emit("Close")):ShowAlert(String.Format(Globalize.localize("ErrorWhileSavingRecords")),"failure",!0,Globalize.localize("Alert"))}))}else{var u="";for(i=0;i<t.DisallowedTypes.length;i++)u=u+" "+t.DisallowedTypes[i];var p="";p="File Types "+u+" are not allowed",ShowAlert(p,"failure",!0,Globalize.localize("Alert"))}},OnChange:function(t){var e=this;e.ParentIncidentId=t.target.value,e.SetParentIncident(e.ParentIncidentId)},SetParentIncident:function(t){var e=this;e.FormSchemaData[0].Data[1].config.options=[];$.grep(e.IncidentTypeList,(function(a,o){a.value==t&&e.FormSchemaData[0].Data[1].config.options.push({name:a.name,value:a.value})}))}}},C=_,k=Object(p["a"])(C,v,y,!1,null,null,null),w=k.exports,A=function(){var t=this,e=t._self._c;return e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"FSM",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.SAData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["Status"==a.column.COLUMN_NAME?[e("a",{staticClass:"active"},[e("span",{class:t.getStatusClassList(a.row.Status,"Status")},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e()]}}])})},L=[],T={props:{workOrderId:{required:!0}},data(){return{Headers:[{COLUMN_NAME:"SA_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"SA Number",DISPLAY_ORDER:1},{COLUMN_NAME:"WORKORDER_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Order",DISPLAY_ORDER:2},{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Ticket Number",DISPLAY_ORDER:2},{COLUMN_NAME:"SA_SUBJECT",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Subject","DISPLAY_ORDER ":3},{COLUMN_NAME:"STATUS",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status","DISPLAY_ORDER ":3},{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Client Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"SA_STREET",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Address","DISPLAY_ORDER ":3},{COLUMN_NAME:"ASSIGNED_NAME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Assigned Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"DATE",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date","DISPLAY_ORDER ":3},{COLUMN_NAME:"TIME",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Time","DISPLAY_ORDER ":3}],TotalRecords:0,SortBy:"",SortExp:"",SAData:[],searchCondition:null,PageSize:10,PageNumber:1}},created:function(){var t=this;t.fetchRecords()},methods:{async fetchRecords(){var t=this,e=`id=${t.workOrderId}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&search=${t.searchCondition}`;await n["a"].GetServiceAppointmentByWorkOrderId(e).then(e=>{t.SAData=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].total_records}),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)},renderActions:function(t){},commonHeaderButtonClick:function(){},actionButtonClick(t,e,a,o){},getStatusClassList:function(t){var e="";switch(t){case"Completed":case"Dispatched":e="px-2 bg-success text-white text-center d-block";break;case"Cancelled":case"Canceled":e="px-2 bg-danger text-white text-center d-block";break;case"Cannot Complete":case"Open":case"Unscheduled":e="px-2 bg-secondary text-white text-center d-block";break;case"In Progress":e="px-2 bg-info text-white text-center d-block";break;case"Needs Reschedule":case"Scheduled":e="px-2 bg-dark text-white text-center d-block";break;case"Failed":case"On Hold":case"Need to Reschedule":e="px-2 bg-warning text-white text-center d-block";break;default:e=""}return e},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.fetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.fetchRecords()}}},I=T,D=Object(p["a"])(I,A,L,!1,null,null,null),x=D.exports,N=function(){var t=this,e=t._self._c;return e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"FSM",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:"",widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.TimeTrackHistoryData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.TimeTrackHistory,showCheckBox:!1,SortExp:t.sortExp,SortBy:t.sortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}})},E=[],F={props:{ticketId:{required:!1},workOrderId:{required:!1}},data(){return{Headers:[{COLUMN_NAME:"TRACK_DESCRIPTION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:1},{COLUMN_NAME:"TRACK_START_TIME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Start Time",DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_END_TIME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"End Time",DISPLAY_ORDER:2},{COLUMN_NAME:"DURATION",DATA_TYPE:"",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Duration (HH:MM:SS)","DISPLAY_ORDER ":3}],pageNumber:1,pageSize:10,sortBy:"",sortExp:"",TimeTrackHistoryData:[],totalRecord:0}},created:function(){var t=this;t.TimeTrackHistory()},methods:{pagerMethod:function(t){var e=this;e.pageSize=t.PageSize,e.pageNumber=t.PageNumber,e.TimeTrackHistory()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.TimeTrackHistory(),$("#"+t+"  span:first-child").attr("class",e)},TimeTrackHistory:function(){var t=this,e=`ticketingId=${t.ticketId}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&workCodeId=${t.workOrderId}`;n["a"].TrackHistoryList(e).then((function(e){t.TimeTrackHistoryData=e.data.result.DATA,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS})),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}}},O=F,M=Object(p["a"])(O,N,E,!1,null,null,null),R=M.exports,P=a("fc96"),B=a("0c69"),G=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"FSM",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:t.renderActions,widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.ReportIncidentListingData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}}),t.showIncident?e("EditIncidentVue",{attrs:{EditIncidentData:t.EditIncidentData,ticketId:t.ticketId},on:{Close:t.Close}}):t._e()],1)},U=[],V={components:{EditIncidentVue:w},data(){return{sortBy:"",sortExp:"",pageSize:10,pageNumber:1,showIncident:!1,EditIncidentData:[],showEditIncident:!0,ReportIncidentListingData:[],Headers:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Incident Type",DISPLAY_ORDER:1},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2}],listActions:[{title:"Edit",href:"javascript:void(0)",callbackfunction:"EditIncident",icon:"fa action-icon fa fa-pencil",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",icon:"fa fa-trash",callbackfunction:"commonDeleteData",additionalSpan:""}]}},created:function(){var t=this;t.GetReportIncidentListing()},props:{workOrderId:{required:!1},ticketId:{required:!1}},methods:{openPopupForAddEditIncident:async function(t){var e=this,a="Id="+t;await n["a"].IncidentTypeDetails(a).then(t=>{e.EditIncidentData=t.data.result.DATA,e.showIncident=!0})},pagerMethod:function(t){this.pageSize=t.PageSize,this.pageNumber=t.PageNumber,this.GetReportIncidentListing()},GetReportIncidentListing:function(){var t=this,e=`id=${t.workOrderId}&ticketId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;n["a"].FetchReportIncidentRecords(e).then((function(e){t.ReportIncidentListingData=e.data.result.data,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS})),setTimeout((function(){vueObj.CheckBoxBootstrap()}),100),setTimeout((function(){vueObj.ResponsiveDataTable("tablelistingdata")}),500)},Close:function(){var t=this;t.showIncident=!1},actionButtonClick(t,e,a,o){switch(t){case"EditIncident":this.openPopupForAddEditIncident(e.ID);break}},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Edit":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)}),a}}},H=V,z=Object(p["a"])(H,G,U,!1,null,null,null),W=z.exports,q=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"FSM",SubModuleCode:"SERVICE_APPOINTMENT",LegendArray:[],RenderRowActionMethod:"",widgets:t.widgets,IdentityColumn:"SA_Id",HeaderText:t.$t("ServiceAppointment"),listType:["List"],ListData:t.WorkOrderStatusHistory,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.totalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata}})],1)},Y=[],j={props:{ticketId:{required:!1},workOrderId:{required:!1}},created:function(){var t=this;t.GetWorkOrderStatusHistory()},data(){return{Headers:[{COLUMN_NAME:"NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"PARENT_SUB_STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"SUB_STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Sub Status",DISPLAY_ORDER:2},{COLUMN_NAME:"COMMENT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:2},{COLUMN_NAME:"UPDATED_ON",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Updated At",DISPLAY_ORDER:2},{COLUMN_NAME:"SUPERVISOR_COMMENT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"SUPERVISOR COMMENT",DISPLAY_ORDER:2},{COLUMN_NAME:"FORMDATA",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Form",DISPLAY_ORDER:2}],pageNumber:1,pageSize:10,sortBy:"",sortExp:"",WorkOrderStatusHistory:[],totalRecord:0}},methods:{pagerMethod:function(t){this.pageSize=t.PageSize,this.pageNumber=t.PageNumber,this.GetWorkOrderStatusHistory()},GetWorkOrderStatusHistory:function(){var t=this,e=`workOrderId=${t.workOrderId}&ticketingId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;n["a"].FetchViewStatusHistoryRecords(e).then((function(e){t.WorkOrderStatusHistory=e.data.result.DATA,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS})),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}}},Z=j,J=Object(p["a"])(Z,q,Y,!1,null,null,null),K=J.exports,Q=a("78f9"),X=a("e8b2"),tt=function(){var t=this,e=t._self._c;return e("section",[t.NoRecords?t._e():e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tblProductCheckoutList"}},[t._m(0),e("tbody",[t._l(t.ProductCheckoutList,(function(a){return e("tr",[1==a.ASSIGNED_STATUS?e("td",{staticClass:"text-center"},[e("input",{staticClass:"chkItems",attrs:{type:"checkbox","data-uniqueid":a.asset_catalogue_id,name:"DeleteInputs"},domProps:{value:a.asset_catalogue_id},on:{click:function(e){return t.showCheckoutButton(e)}}})]):t._e(),0==a.ASSIGNED_STATUS?e("td",{staticClass:"text-center"},[e("input",{staticClass:"chkItems",attrs:{type:"checkbox","data-uniqueid":a.asset_catalogue_id,name:"DeleteInputs"},domProps:{value:a.asset_catalogue_id},on:{click:function(e){return t.showCheckoutButton(e)}}})]):t._e(),e("td",[t._v(t._s(a.ASSET_TYPE))]),e("td",[t._v(t._s(a.REQUIRED_QUANTITY))]),e("td",[t._v(t._s(a.AVAILABLE_ITEMS))]),e("td",{staticClass:"text-center single-action"},[1==a.ASSIGNED_STATUS?e("a",{attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Assigned",href:"javascript:;"}},[e("i",{staticClass:"fa fa-check-circle text-success"})]):t._e(),0==a.ASSIGNED_STATUS?e("a",{attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Checkout",href:"javascript:;"}},[e("i",{staticClass:"fa fa-share-square-o"})]):t._e()])])})),t.NoRecords?e("tr",[e("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"7"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e()],2)])])]),e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right mt-2"},[e("a",{directives:[{name:"show",rawName:"v-show",value:t.isCheckoutButton,expression:"isCheckoutButton"}],staticClass:"btn btn-primary save-btn btnProductCheckout",attrs:{href:"javascript:;",title:t.$t("ProceedToCheckout")},on:{click:function(e){return t.CheckoutProductRequest()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("ProceedToCheckout")))])])])])},et=[function(){var t=this,e=t._self._c;return e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"text-center"},[e("input",{staticClass:"chkItems chkAll",attrs:{type:"checkbox",id:"chkAll",name:"checkbox"}})]),e("th",[e("span",[t._v(" Product Name")])]),e("th",[e("span",[t._v(" Required Quantity")])]),e("th",[e("span",[t._v(" Available Quantity")])]),e("th",{staticClass:"text-center"},[e("span",[t._v(" Status")])])])])}],at={props:{workOrderId:{type:Number,required:!1}},data(){return{ProductCheckoutList:[],NoRecords:!1,isCheckoutButton:!1,assetCatalogue:"",SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1"}},created(){var t=this;t.FetchRecords()},methods:{CheckoutProductRequest:function(){var t=this,e="";$("#tblProductCheckoutList tbody input:checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),t.assetCatalogue=btoa(e),window.location.href="/AssetAssignment/CheckOut?id="+t.assetCatalogue},showCheckoutButton:function(t){var e=this;t.target.checked?e.isCheckoutButton=!0:e.isCheckoutButton=!1},FetchRecords:async function(){var t=this;t.ProductCheckoutList=[];var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&workorderId=`+t.workOrderId;await n["a"].GetProductcheckoutList(e).then((function(e){""!=e.data&&null!=e.data&&e.data.result.data.length>0?(t.ProductCheckoutList=e.data.result.data,t.NoRecords=!1):(t.ProductCheckoutList=[],t.NoRecords=!0),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tblProductCheckoutList")}),500)}))}}},ot=at,it=Object(p["a"])(ot,tt,et,!1,null,null,null),st=it.exports,nt={data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!1,isShowEtaPipeLines:!1,isShowGetDirection:!0},showWorkOrderStatusHistory:!1,mapObj:[],showTicketAttachment:!1,isShowMap:!0,workOrderId:0,ticketId:0,workOrderDetailData:[],mapHeaderText:"Collapse map",showNoteModal:!1,showAttachmentModal:!1,showIncidentPopup:!1,showServiceAppointment:!1,showRequiredProduct:!1,WorkOrderDetailTab:!0,headerText:"Detail",totalRecord:0,pageNumber:1,pageSize:10,sortBy:"",sortExp:"",TimeTrackHistoryData:[],showTimeTrackHistory:!1,AttachmentData:[],galleryImages:[],NoteList:[],showNotes:!1,showReportListing:!1,pageNumber:1,pageSize:10,sortBy:"",sortExp:"",ReportIncidentListingData:[],WorkOrderStatusHistory:[],ShowTimerMoadal:!1,componentKey:0,visible:!1,isLocateorNonLocate:"",WO_Status_Id:0,configData:[]}},components:{MapComponentVue:s["a"],WorkOrderDetailTab:h,AddEditNote:g["a"],ShowAttachmentDataVue:f["a"],AddIncidentVue:w,ServiceAppointmentByIdVue:x,TimeTrackHistoryVue:R,TicketAttachmentVue:P["a"],TicketNotesVue:B["a"],ReportIncidentListingVue:W,WorkOrderStatusHistory:K,WorkOrderTimerModalVue:Q["a"],VueEasyLightbox:X["a"],RequiredProductListVue:st},created:function(){var t=this;t.workOrderId=t.$route.params.id,t.ticketId=t.$route.params.ticket_id,t.FetchRecords()},methods:{handleHide:function(){this.visible=!1},openSpecificImage(t,e){var a=this,o={path:t,caption:e.split(".")[0]};a.galleryImages.push(o)},StartTimer:function(){var t=this;t.ShowTimerMoadal=!0},Details:function(){var t=this;t.headerText="Detail",t.showServiceAppointment=!1,t.WorkOrderDetailTab=!0,t.showTimeTrackHistory=!1,t.showWorkOrderStatusHistory=!1,t.showRequiredProduct=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1},ServiceAppointment:function(){var t=this;t.headerText="Service Appointment",t.showServiceAppointment=!0,t.showWorkOrderStatusHistory=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showRequiredProduct=!1,t.showReportListing=!1},openReportIncidentPopUp:function(){var t=this;t.showIncidentPopup=!0},openAttachmentPopup:function(){var t=this;t.showAttachmentModal=!0},AddNote:function(){var t=this;t.showNoteModal=!0},Close:function(){var t=this;t.ShowTimerMoadal=!1,t.showNoteModal=!1,t.showIncidentPopup=!1},GetWorkOrderStatusHistory:function(){var t=this;t.headerText="View Status History",t.showWorkOrderStatusHistory=!0,t.showServiceAppointment=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showRequiredProduct=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1},FetchAttachmentDatas:function(){var t=this;t.headerText="Attachments",t.showWorkOrderStatusHistory=!1,t.showTicketAttachment=!0,t.showTimeTrackHistory=!1,t.showReportListing=!1,t.showServiceAppointment=!1,t.showRequiredProduct=!1,t.WorkOrderDetailTab=!1,t.showNotes=!1,t.AttachmentData=[];var e="ticketId="+t.ticketId;n["a"].GetTicketFiles(e).then((function(e){t.isLoading=!1,t.AttachmentData=e.data.result.DATA,t.componentKey+=1}))},LoadNoteForQuickView:async function(t){var e=this;e.headerText="Notes",e.showWorkOrderStatusHistory=!1,e.showTicketAttachment=!1,e.showTimeTrackHistory=!1,e.showServiceAppointment=!1,e.showRequiredProduct=!1,e.showReportListing=!1,e.WorkOrderDetailTab=!1,e.showNotes=!0;var a=`ticketId=${e.ticketId}&isSuptTckt=false&moduleName=Ticketing&isView=1`;await n["a"].GetWorkOrderNoteList(a).then((function(t){e.isLoading=!1,null!=t.data&&t.data.length>0?e.NoteList=t.data:e.noRecord=!0}))},GetReportIncidentListing:function(){var t=this;t.headerText="Report Incident",t.showWorkOrderStatusHistory=!1,t.showReportListing=!0,t.showTicketAttachment=!1,t.showRequiredProduct=!1,t.showTimeTrackHistory=!1,t.showServiceAppointment=!1,t.WorkOrderDetailTab=!1,t.showNotes=!1;var e=`id=${t.workOrderId}&ticketId=${t.ticketId}&sortBy=${t.sortBy}&sortExp=${t.sortExp}&pageSize=${t.pageSize}&pageNumber=${t.pageNumber}`;n["a"].FetchReportIncidentRecords(e).then((function(e){t.ReportIncidentListingData=e.data.result.data,t.totalRecord=e.data.result.DATA[0].TOTALRECORDS}))},ShowHideMap:function(){0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map"):(this.isShowMap=!1,this.mapHeaderText="Expand map")},RequiredProduct:function(){var t=this;t.headerText="Required Product",t.showServiceAppointment=!1,t.showWorkOrderStatusHistory=!1,t.showTimeTrackHistory=!1,t.WorkOrderDetailTab=!1,t.showTicketAttachment=!1,t.showNotes=!1,t.showReportListing=!1,t.showRequiredProduct=!0},TimeTrackHistory:function(){var t=this;t.headerText="Time Track History",t.showTimeTrackHistory=!0,t.showReportListing=!1,t.showTicketAttachment=!1,t.showWorkOrderStatusHistory=!1,t.showServiceAppointment=!1,t.WorkOrderDetailTab=!1,t.showRequiredProduct=!1},FetchRecords:function(){var t=this,e="moduleName=FSM&subModuleCode=FSM_WORKORDER&str_ticket_id="+t.workOrderId;n["a"].ViewPageDetails(e).then((function(e){var a,o=e.data.result.LEFTDATA;t.configData=e.data.result.CONFIG_DATA,o.forEach((function(t){"LOCATION_NW"==t.name&&(a=t.value)})),t.workOrderDetailData=e.data.result.LEFTDATA,t.workOrderDetailData.forEach((function(e){"status_id"==e.name&&(t.WO_Status_Id=t.FilterDDLValueForID(e.value))})),t.isLocateorNonLocate=e.data.result.IS_FSM_LOCATING;var i={latlong:a,refValue:"62887053677063",popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:a,longitude:a},polygons:[{name:"",latLong:[{latitude:a,longitude:a}]}],address:"",priority:"",color_code:""};t.mapObj.push(i)}))}}},rt=nt,lt=Object(p["a"])(rt,o,i,!1,null,null,null);e["default"]=lt.exports},d6ba:function(t,e,a){"use strict";a("eac8")},dd82:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.gm-style .gm-style-iw{padding:10px!important}.gm-style .gm-style-iw button{display:none!important}.cssSlider{-webkit-appearance:none;width:23%;height:17px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s;position:relative!important}.cssSlider:hover{opacity:1}.cssSlider::-webkit-slider-thumb{-webkit-appearance:none;width:25px;height:25px;background:#04aa6d;cursor:pointer}",""]),t.exports=e},e222:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v("Add Zone")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$emit("Close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])])])},i=[],s=(a("9769"),{props:{zoneEditData:{required:!1}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Zone Name",name:"txtZoneName",value:"",placeholder:"Enter Name",validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"RadioField",label:"ZoneType",name:"TypeFor",value:"Locator",placeholder:"",config:{options:[{name:"Locator Area",value:"Locator"},{name:"High Profile",value:"High_Profile"},{name:"Locator After Hours",value:"LocatorAfterHours"},{name:"Yard",value:"Yard"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!0,max:500}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.Save},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],ListData:[]}},created:function(){var t=this;t.FormSchema[0].Data[0].value=t.zoneEditData.ZONE_NAME,t.FormSchema[1].Data[0].value=t.zoneEditData.ZONE_TYPE,t.FormSchema[2].Data[0].value=t.zoneEditData.ZONE_DESCRIPTION},methods:{Close:function(){var t=this;t.$emit("Close")},Save:function(){var t=this;let e={ZoneId:void 0==t.zoneEditData?0:t.zoneEditData.ZONE_ID,Name:t.FormSchema[0].Data[0].value,ZoneType:t.FormSchema[1].Data[0].value,Description:t.FormSchema[2].Data[0].value};t.$emit("SaveZoneData",e)}}}),n=s,r=a("2877"),l=Object(r["a"])(n,o,i,!1,null,null,null);e["a"]=l.exports},eac8:function(t,e,a){var o=a("5e2a");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var i=a("499e").default;i("4c94231f",o,!0,{sourceMap:!1,shadowMode:!1})},fc96:function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[t._l(t.AttachmentList,(function(a,o){return e("div",{key:o,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),e("div",{staticClass:"box border positionrelative float-left w-100"},[e("div",{staticClass:"default-tags"},[e("div",{staticClass:"defaultpic_control"},["FSM"==t.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?e("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:t.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-fileName":a.attachment_name,"data-filePath":a.C[0].ATTACHMENTFULLPATH,"data-fileType":a.attachment_desc,"data-GpxFile":a.GEOFILE_PATH,"data-placement":"left"}},[e("em",{staticClass:"fa fa-globe"})]):t._e(),1==t.ListViewAttachment?e("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:t.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(e){return t.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[e("em",{staticClass:"fa fa-eye"}),e("br")]):t._e(),e("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:t.$t("DownloadFile"),"data-placement":"left"},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"}),e("br")]),a.CREATED_BY==t.UserId?e("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:t.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash text-danger"}),e("br")]):t._e()])]),e("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t.setImageIcon(a)?"word-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-text-o"}):t._e():e("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:t.setImageIcon(a),alt:""}}):e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),e("hr",{staticClass:"my-1"}),e("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[e("div",{staticClass:"col-12 textelipsis px-2"},[t._v(t._s(a.attachment_name))]),e("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[e("small",{staticClass:"float-left textelipsis col-6 p-0"},[e("span",[t._v(t._s(a.PostedBy))])]),e("small",{staticClass:"float-right col-6 text-right p-0"},[t._v(t._s(a.CREATED_AT))])])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)],1)},i=[],s=a("9769"),n={components:{},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:null,UserId:null,isLoading:!1,index:0}},watch:{AttachmentData:function(t){var e=this;e.AttachmentList=t,e.AttachmentList.length>0?e.NoRecords=!1:(e.AttachmentList=[],e.NoRecords=!0)}},created(){var t=this;t.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{t.UserId=t.GetUserInfo.ID,t.RequestFrom=t.AttachmentData.RequestFrom,t.GalleryImages=t.galleryImages,t.AttachmentData.length>0?(t.AttachmentList=t.AttachmentData,t.NoRecords=!1):(t.AttachmentList=[],t.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(t,e){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",t,e),a.$parent.visible=!0},setImageIcon(t){var e=this,a="/Content/Responsive/images/",o=e.getExtension(t.attachment_name);switch(o.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(t){let e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":e.slice(a+1)},deleteAttachment:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a="attachmentid="+t.ticket_attachment_id;s["a"].DeleteIncidentAttachment(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&"SUCCESS"==t.data.result.MSG?("AttachmentInDetail"==e.viewMode?e.$parent.GetAttachmentData():e.$parent.FetchAttachmentData(),e.ticket_attachment_id>0?e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")):(e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")),e.$emit("close"))):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachment_path}&fileName=${t.attachment_name}`;s["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const o=a.data,i=`data:${JSON.parse(t.attachment_desc).ContentType};base64,${o}`;var s=document.createElement("a");s.href=i,s.setAttribute("download",t.attachment_name),document.body.appendChild(s),s.click()})),e.isLoading=!1}}},r=n,l=a("2877"),d=Object(l["a"])(r,o,i,!1,null,null,null);e["a"]=d.exports}}]);
//# sourceMappingURL=chunk-c444b066.js.map