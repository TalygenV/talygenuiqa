(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62879ce6"],{"5ffb":function(e,t,a){"use strict";let s=[{title:"Add",iconClass:"fa fa-plus",callbackfunction:"openaddWorkType",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"DeleteMultiple",isEnabledOnSelectedRow:!0}],i=[{title:"Add",iconClass:"fa fa-plus",callbackfunction:"openPopupForSetupTickectSource",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"DeleteMultiple",isEnabledOnSelectedRow:!0},{title:"Back to list",iconClass:"fa fa-angle-double-left",callbackfunction:"openResourceTypeList",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:"assignTicket"}],o=[{fieldName:"Resource Type Name",fieldType:"text",fieldIcon:"fa fa-map-marker",fieldSearchConditionName:[""],paramName:"search",isSearch:!1,value:"",listOptions:[]},{fieldName:"Created At",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:[""],isSearch:!1,paramName:"searchDate",datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]}],c=[{title:"Edit",href:"javascript:void(0)",icon:"fa fa-pencil action-icon",callbackfunction:"Edit",additionalSpan:""},{title:"View",href:"javascript:void(0)",callbackfunction:"ClickOnView",icon:"fa fa-eye action-icon",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",callbackfunction:"Delete",icon:"fa fa-trash action-icon",additionalSpan:"",isEnabledOnSelectedRow:!0}];t["a"]={buttons:s,leftsearchSchema:o,listActions:c,ResourceDetailPagebuttons:i}},bf5a:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("section",{staticClass:"main-content"},[t("div",{staticClass:"padding-t_10"},[t("div",{staticClass:"left-menu-tab"},[t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"theme-primary partition"},[t("span",{staticClass:"p-name text-white textelipsis"},[t("a",{attrs:{"data-toggle-tooltip":"tooltip"}},[e._v(e._s(e.ResourceTypeName))])])])]),t("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab fsmtabcontrol lefttabiconfix",attrs:{id:"myTab",role:"tablist"}},[t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link active left-menu",attrs:{"data-toggle":"tab",href:"#TicketDetails",id:"tab-details",role:"tab","aria-controls":"TicketText","aria-selected":"true",title:"Details"},on:{click:function(t){return e.BindTabsData("tab-details")}}},[t("i",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Details")))])]),t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-resources",href:"#Activities",role:"tab","aria-controls":"Activities","aria-selected":"false",title:"Resource"},on:{click:function(t){return e.BindTabsData("tab-resources")}}},[t("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Resource")))])]),t("li",{staticClass:"nav-item"},[t("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-serviceAppointment",href:"",role:"tab","aria-controls":"ServiceAppointment","aria-selected":"false",title:"ServiceAppointment"},on:{click:function(t){return e.BindTabsData("tab-serviceAppointment")}}},[t("i",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("ServiceAppointment")))])])])]),t("div",{staticClass:"right-content"},[e.isResourceTabClicked?e._e():t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"theme-primary partition p-actions-expand"},[t("span",{staticClass:"p-actions float-right"},[t("RouterLink",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{to:"/Ticketing/ResourceType",title:"Back","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[t("i",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),t("br"),e._v(e._s(e.$t("Back to list ")))])],1)])]),t("div",{staticClass:"col-md-12 p-0 mt-2",attrs:{id:"ResourceTypeData"}},[t("div",{staticClass:"card mb-3 probx"},[e._m(0),t("div",{staticClass:"card-body"},e._l(e.ResourceTypeList,(function(a,s){return t("div",{key:s,staticClass:"row"},[t("div",{staticClass:"col-md-6 col-lg-3"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("ResourceTypeName"))+":")]),e._v(" "+e._s(a.RESOURCE_TYPE_NAME))])])]),t("div",{staticClass:"col-md-6 col-lg-3"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("Status"))+":")]),e._v(" "),1002==a.STATUS_ID?t("span",[e._v(e._s(e.$t('"Inactive"')))]):e._e(),1001==a.STATUS_ID?t("span",[e._v(e._s(e.$t("Active")))]):e._e()])])]),t("div",{staticClass:"col-md-12 col-lg-12"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("Description"))+":")]),e._v(" "+e._s(a.DESCRIPTION))])])])])})),0)])]),e.noRecord?t("div",{staticClass:"text-danger text-center no-record float-left w-100"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()]),t("div",{staticClass:"right-content",attrs:{id:"ResourceData"}},[t("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsGroupView,expression:"IsGroupView"}],attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"FSM_Resource_Type_Detail",IdentityColumn:"RESOURCE_ID",LegendArray:[],HeaderButtons:e.listheaderbuttons,RenderRowActionMethod:()=>{},widgets:[],listType:["List"],ListData:e.ResourceList,HeaderData:e.Headers,TotalRecords:e.TotalRecords,ListDataCallBackFunction:e.FetchResources,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{HeaderButtonClick:e.commonHeaderButtonClick},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[t("a",{staticClass:"inactive-disabled"},["Active"==a.row.STATUS_NAME?t("span",{class:e.getStatusClassList(a.row.STATUS_NAME,"STATUS_NAME")},[e._v(" "+e._s(a.row.STATUS_NAME)+" ")]):e._e(),"Inactive"==a.row.STATUS_NAME?t("span",{class:e.getStatusClassList(a.row.STATUS_NAME,"STATUS_NAME")},[e._v(" "+e._s(a.row.STATUS_NAME)+" ")]):e._e()])]:e._e()]}}])})],1),t("div",{staticClass:"right-content",attrs:{id:"serviceAppointmentData"}},[t("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsGroupView1,expression:"IsGroupView1"}],attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"FSM_Resource_Type_Detail",IdentityColumn:"id",LegendArray:[],RenderRowActionMethod:()=>{},widgets:[],listType:["List"],ListData:e.ServiceAppointmentList,HeaderButtons:e.Servicelistheaderbuttons,HeaderData:e.SAHeaders,TotalRecords:e.TotalRecords,ListDataCallBackFunction:e.FetchData,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[e.isCRMShowStausDrop(a.row.statusId,"Ticketing")?t("listing-status",{ref:"updatestatus",attrs:{isfor:"MapStatus",dataid:a.row.id,"data-controller":"Crm",statuslist:e.StatusListForListing,item:a.statusId,"data-action":"index",dataselected:1001==a.row.status_id?"Active":"InActive",callbackfunction:e.FetchData,isselectedvaluestring:!0}}):e._e(),e.isCRMShowStausDrop(a.row.status_id,"Ticketing")?e._e():t("a",{staticClass:"inactive-disabled"},[t("span",{class:e.getStatusClass(a.row.status_id,"status_id")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")])])]:e._e()]}}])})],1)]),e.AddResourcePopup?t("AddResourcePopup",{attrs:{ResourceTypeId:e.ticketSourceId},on:{ticketId:e.getTicketId}}):e._e()],1)},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"card-header"},[t("h2",[e._v("Details")])])}],o=(a("14d9"),a("9769")),c=a("5ffb"),r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Add Resource")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},l=[],n={props:{ResourceTypeId:{type:Number,required:!0}},data(){return{isLoading:!1,TicketId:null,FormSchema:[{layoutType:"double",Data:[{astype:"MultiSelectField",mode:"tag",label:this.$t("User "),name:"User",value:"",config:{options:[]},placeholder:this.$t("SelectUser"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[{value:"1001",name:"Active"},{value:"1002",name:"InActive"}]},placeholder:this.$t("SelectStatus"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],ListData:[]}},created:async function(){var e=this;this.FetchData(),this.GetDdlRecords_User(),e.TicketId=e.$route.params.ResourceTypeId},methods:{FetchData:function(){var e=this,t="Id="+e.ResourceTypeId;o["a"].FetchDataByResourcetypeId(t).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.FormSchema[0].Data[1].value=t.data.result.data[0].status_id,e.FormSchema[1].Data[2].value=t.data.result.data[0].description,JSON.parse(t.data.result.data[0].FSMUserListId).forEach((t,a)=>{e.ListData.push({value:t.value,label:t.name})}),e.FormSchema[1].Data[0].value=e.ListData)}))},GetDdlRecords_User:async function(){var e=this,t="id=&&moduleName=Ticketing&type=FSM_SA_User&search=&refId=";await o["a"].GetDDLData(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.DATA.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}}))},Close:function(){this.$parent.AddResourcePopup=!1},onSubmit(e,t){var a=this,s="",i=0;for(i=0;i<e.User.length;i++)0==i?(s=e.User[i].value,e.User[i].label):s=s+","+e.User[i].value;var c={Id:void 0==a.$parent.Ticket?0:a.$parent.Ticket,ResourcetypeId:a.TicketId,FSMUserListId:s,Desc:e.Description,Status:e.Status},r=JSON.stringify(c);o["a"].SaveResourceTypeResources(r).then(e=>{"Success"==e.data.status?("1"==e.data.code?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("ResourceType")]),"success",!0,a.$t("Alert")),a.Close()):a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("ResourceType")]),"success",!0,a.$t("Alert")),a.Close(),this.$emit("ticketId",a.TicketId),a.$parent.FetchResources()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},d=n,u=a("2877"),p=Object(u["a"])(d,r,l,!1,null,null,null),S=p.exports,h={components:{AddResourcePopup:S},data(){return{user_id:null,ids:0,isResourceTabClicked:!1,AddResourcePopup:!1,companyId:null,ResourceHeadingName:null,isDeleteButtonVisible:!1,isAddResourcePopUp:!1,isServiceAppointmentPopUp:!1,IsGroupView:!0,IsGroupView1:!0,noRecord:!1,TotalRecords:0,PageSize:10,PageNumber:1,CurrentPage:1,SortBy:"",SortExp:"",TicketId:null,ResourceTypeList:[],ServiceAppointmentList:[],listheaderbuttons:c["a"].ResourceDetailPagebuttons,Servicelistheaderbuttons:[],ResourceList:[],StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#d72435"}],Headers:[{COLUMN_NAME:"USERNAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"User",DISPLAY_ORDER:1},{COLUMN_NAME:"alias_name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Alias Name",DISPLAY_ORDER:2},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:3,settings:{isInSlot:!0}}],SAHeaders:[{COLUMN_NAME:"SA_Number",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"SA Number",DISPLAY_ORDER:1},{COLUMN_NAME:"Subject",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:2},{COLUMN_NAME:"resources",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Resource(S)",DISPLAY_ORDER:2},{COLUMN_NAME:"SA_Scheduled_StartTime",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Scheduled Start Time",DISPLAY_ORDER:3},{COLUMN_NAME:"SA_Scheduled_EndTime",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Scheduled End Time",DISPLAY_ORDER:4},{COLUMN_NAME:"Status",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"status",DISPLAY_ORDER:5}]}},created:async function(){var e=this;this.user_id=this.GetUserInfo.ID,this.user_type=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,e.ids=e.TicketId,e.TicketId=e.$route.params.ResourceTypeId,e.ResourceTypeName=e.$route.params.ResourceTypeName,e.UserType=e.GetUserInfo.UserType,e.FetchData()},methods:{getTicketId(e){var t=this;t.ids=e},getStatusClassList:function(e){var t="";switch(e){case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;default:t=""}return t},BindTabsData:async function(e){var t=this;"tab-details"==e?(t.isResourceTabClicked=!1,t.FetchData()):"tab-resources"==e?(t.FetchResources(),t.isResourceTabClicked=!0,t.isDeleteButtonVisible=!0,t.isAddResourcePopUp=!0,t.isServiceAppointmentPopUp=!1):"tab-serviceAppointment"==e&&(t.FetchServiceAppointment(),t.isDeleteButtonVisible=!1,t.isAddResourcePopUp=!1,t.isServiceAppointmentPopUp=!1)},getStatusClass:function(e){var t="";switch(e){case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;default:t=""}return t},FetchData:async function(){var e=this,t="ResourceTypeid="+e.TicketId;await o["a"].FetchResourceTypeById(t).then((function(t){null!=t.data?(e.ResourceTypeList=t.data.result.data,e.ResourceTypeList.length>0?e.NoRecord=!1:e.NoRecord=!0):e.NoRecord=!0,e.noRecord=!1,$("#ResourceTypeData").show(),$("#ResourceData, #serviceAppointmentData,#AddResPopUp,#DeleteMultiple,#AddServiceAppointment").hide()}))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"commonDeleteData":this.DeleteSetupTickectSourceList();break;case"openPopupForSetupTickectSource":this.openPopupForSetupTickectSource(null);break;case"openResourceTypeList":this.openResourceTypeList(null);break}},openPopupForSetupTickectSource:function(e){void 0==e&&(e=0),this.TicketId=e,this.AddResourcePopup=!this.AddResourcePopup},openPopupForServiceAppointment:function(){var e=this;e.$router.push({name:"ManageServiceAppointment"})},openResourceTypeList:function(){var e=this;e.$router.push({name:"ResourceTypeList"})},FetchResources:async function(){var e=this;0==e.TicketId&&(e.TicketId=e.ids);var t=`ResourceTypeid=${e.TicketId}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&pageSize=${e.PageSize}&pageNum=${e.PageNumber}`;await o["a"].FetchResourcesByResourceTypeById(t).then((function(t){null!=t.data.status?(e.Headers.forEach(e=>{e.settings=null,"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})}),e.ResourceList=t.data.result.data,e.listheaderbuttons[1].isdisabled=!0,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.ResourceList.length>0?(e.TotalRecords=t.data.result.data[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.NoRecord=!1):e.NoRecord=!0):e.NoRecord=!0,e.noRecord=!1,$("#ResourceTypeData, #AddServiceAppointment, #serviceAppointmentData").hide(),$("#ResourceData,#AddResPopUp,#DeleteMultiple").show()}))},FetchServiceAppointment:async function(){var e=this,t=`resourcetypeId=${e.TicketId}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&pageSize=${e.PageSize}&pageNum=${e.PageNumber}`;await o["a"].FetchResourceTypeId(t).then((function(t){null!=t.data.status?(e.ServiceAppointmentList=t.data.result.data,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.ServiceAppointmentList.length>0?(e.TotalRecords=t.data.result.data[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.NoRecord=!1):e.NoRecord=!0):e.NoRecord=!0,e.noRecord=!1,$("#ResourceTypeData").hide(),$("#ResourceData").hide(),$("#serviceAppointmentData, #AddServiceAppointment").show()}))},DeleteSetupTickectSourceList:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Resource"),(function(){var e={ids:a,companyId:t.companyId,userId:t.user_id,moduleName:"FSM",refCode:"TALYGEN_FSM_resource"},s=JSON.stringify(e);o["a"].deleteActivityData(s).then(e=>{var a="";"Success"==e.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.FetchResources(),a=t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Resource")]),"Success",!0,t.$t("Alert"))):a=t.ShowAlert(t.$t("DeletedError",[t.$t("Resource")]),"failure",!0,t.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)})})):alert(t.$t("Selectanyrecordtodelete"))},UpdateStatus:async function(e){var t=this;e="Active"==e?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&t.confirmR(t.$t("Confirm"),!0,t.$t("update")+"  "+t.$t("status"),(function(){var s=`id=${a}&status_id=${e}&isFor=group`;o["a"].updatestatus(s).then(e=>{1==e.data&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),t.FetchData())})}))}}},A=h,m=Object(u["a"])(A,s,i,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-62879ce6.js.map