(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-562598e0"],{2733:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{isVisible:t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CompanySetup",SubModuleCode:"",LegendArray:[],showCheckBox:!0,IdentityColumn:"rolE_ID",listType:["List"],ListData:t.FieldsData,HeaderText:t.$t("Roles"),HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,SearchFields:t.leftSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,TotalRecords:t.TotalRecords,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata,ActionButtonClick:t.actionButtonClick,HeaderButtonClick:t.commonHeaderButtonClick,LeftsearchButtonClick:t.leftCommonSearch},scopedSlots:t._u([{key:"slotdata",fn:function(e){var s=e.data;return["rolE_NAME"==s.column.COLUMN_NAME?[s.row.rolE_NAME?a("span",{staticClass:"text-dark"},[a("a",{staticClass:"relatedproduct",attrs:{href:"javascript:;",id:s.row.rolE_ID,title:s.row.rolE_NAME},on:{click:function(e){return t.GoToManageRole(s.row.rolE_ID)}}},[a("em",{staticClass:"text-primary",attrs:{"aria-hidden":"true"}},[t._v(t._s(s.row.rolE_NAME))])])]):t._e()]:t._e(),"statuS_NAME"==s.column.COLUMN_NAME?[a("div",{staticClass:"cstm-drop-btn"},[a("div",{staticClass:"cstm-drop-btn"},[a("select",{directives:[{name:"model",rawName:"v-model",value:s.row.selectedOption,expression:"data.row.selectedOption"}],class:s.row.selectedClass,on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s.row,"selectedOption",e.target.multiple?a:a[0])},function(e){return t.DrpdownUpdataStatus(s.row)}]}},t._l(s.row.options,(function(e,s){return a("option",{key:e.id,domProps:{value:e.value}},[t._v(t._s(e.label))])})),0)])])]:t._e(),"rolE_COUNT"==s.column.COLUMN_NAME?[a("a",{staticClass:"text-dark user_count",attrs:{href:"javascript:;",title:s.row.rolE_COUNT,"data-toggle-tooltip":"tooltip","data-original-title":s.row.rolE_COUNT},on:{click:function(e){return t.UserDetailPopup(s.row.rolE_ID)}}},[a("i",{staticClass:"fa fa-user mr-1",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"noti-circle noti-blue"},[t._v(" "+t._s(s.row.rolE_COUNT))])])]:t._e()]}}])}),t.isShowCloneRolePopup?a("CloneRole",{attrs:{RoleId:t.RoleId}}):t._e(),t.isShowUserDetailPopup?a("UserDetail"):t._e()],1)},o=[],l=(a("14d9"),a("9769"));let i=[{title:"Add New",iconClass:"fa-plus",callbackfunction:"AddRole",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],r=[{fieldName:"ROLE NAME",fieldType:"text",fieldIcon:"fa fa-file",paramName:"roleName",fieldSearchConditionName:[],isSearch:!1,value:"",listOptions:[]},{fieldName:"ROLE DESCRIPTION",fieldType:"text",fieldIcon:"fa fa-file-o",paramName:"roleDesc",fieldSearchConditionName:[],isSearch:!1,value:"",listOptions:[]},{fieldName:"USER TYPE",fieldType:"radio",fieldIcon:"fa fa-user",paramName:"userType",fieldSearchConditionName:[],isSearch:!1,value:"",listOptions:[]},{fieldName:"USER COUNT",fieldType:"text",fieldIcon:"fa fa-user-plus",paramName:"roleCount",fieldSearchConditionName:[],isSearch:!1,value:"",listOptions:[]},{fieldName:"STATUS",fieldType:"radio",fieldIcon:"fa fa-server",paramName:"statusId",fieldSearchConditionName:[],isSearch:!1,value:"",listOptions:[{value:"1001",name:"ACTIVE"},{value:"1002",name:"INACTIVE"}]}],n=[{title:"Clone",callbackfunction:"CloneField",href:"javascript:void(0)",icon:"fa fa-copy action-icon text-info",additionalSpan:""}],c=[{COLUMN_NAME:"rolE_NAME",DATA_TYPE:"Text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Role Name",DISPLAY_ORDER:1},{COLUMN_NAME:"rolE_DESC",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Role Description",DISPLAY_ORDER:2},{COLUMN_NAME:"useR_TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"User Type",DISPLAY_ORDER:3},{COLUMN_NAME:"rolE_COUNT",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"User Count",DISPLAY_ORDER:4},{COLUMN_NAME:"statuS_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:5}];function d(t,e){var a=t;if("usertype"==e){var s="filterby=MANAGEROLECA";l["a"].GetUserTypes(s).then((function(t){var e=t.data;null!=e&&(a.leftSearchFields[2].listOptions=e.map(t=>{const e={};return e.name=t.user_type_desc,e.value=t.user_type_desc.toString(),e}))}))}}var u={buttons:i,leftsearchSchema:r,listActions:n,TableHeader:c,bindleftCommonSearchdropdown:d},p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("CopyRoleName"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.ClosePopup()}}},[a("em",{staticClass:"fa fa-times"})])]),a("div",{staticClass:"border p-3"},[t.DataLoaded?a("DynamicForm",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}):t._e(),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[t._v(" "+t._s(t.$t("MandatoryString"))+" ")])])])],1)])])])])},h=[],m=a("240d"),C={components:{DynamicForm:m["DynamicForm"]},props:{RoleId:{type:Number,required:!0}},data(){return{DataLoaded:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"To Role Name",name:"RoleName",value:"",placeholder:"Enter Role Name",validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i> Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i> Cancel",onClick:this.ClosePopup}],is_duplicate:!1}},created:function(){this.DataLoaded=!0},methods:{ClosePopup(){var t=this;t.$parent.isShowCloneRolePopup=!1},onSubmit(t,e){var a=this,s=`existingRoleId=${a.RoleId}&roleName=${t.RoleName}&type=TEMPLATE_ROLE&id=&refid=`;l["a"].CopyRole(s).then((function(t){if("exist"==t.data)return a.ShowAlert(a.$t("RoleNameExist"),"warning",!0,"Alert"),!0;1==t.data&&(a.ShowAlert(a.$t("RolecopySuccessfully"),"success",!0,"Alert"),a.$parent.FetchData(),a.$parent.isShowCloneRolePopup=!1)}))}}},f=C,_=a("2877"),S=Object(_["a"])(f,p,h,!1,null,null,null),E=S.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("UserDetail"))+" ")]),a("button",{staticClass:"close",attrs:{type:"button","data-original-title":"Close"},on:{click:function(e){return t.ClosePopup()}}},[a("em",{staticClass:"fa fa-times"})])]),a("div",{staticClass:"border p-3"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive",staticStyle:{"max-height":"400px"}},[a("table",{staticClass:"table-sorting table table-bordered  mb-0",attrs:{id:"table28"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticClass:"td2"},[t._v(" "+t._s(t.$t("UserTitle"))+" ")]),a("th",{staticClass:"td3"},[t._v(" "+t._s(t.$t("Email"))+" ")]),a("th",{staticClass:"td1 text-center"},[t._v(" "+t._s(t.$t("Status"))+" ")])])]),a("tbody",[0==t.UserDetails.length?a("tr",[a("td",{staticClass:"text-center  text-danger no-record",attrs:{colspan:"3"}},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")])]):t._e(),t._l(t.UserDetails,(function(e,s){return a("tr",[a("td",{},[t._v(" "+t._s(e.username)+" ")]),a("td",{},[t._v(" "+t._s(e.useremailid)+" ")]),a("td",{staticClass:"td1 text-center"},["Active"==e.userstatus?a("a",{staticClass:"active-disabled",attrs:{statusid:"1001","data-placement":"left"}},[a("span",{staticClass:"btn btn-success"},[t._v(" "+t._s(e.userstatus))])]):a("a",{staticClass:" active-disabled",attrs:{statusid:"1001","data-placement":"left"}},[a("span",{staticClass:"btn btn-danger"},[t._v(" "+t._s(e.userstatus))])])])])}))],2)])])])])])])])])},D=[],A={data(){return{UserDetails:[]}},created:function(){this.GetUserDetails()},methods:{GetUserDetails(){var t=this,e="roleId="+t.$parent.roleIdForUserDetail;l["a"].UserListPopUp(e).then((function(e){e.data&&(t.UserDetails=e.data)}))},ClosePopup(){var t=this;t.$parent.isShowUserDetailPopup=!1}}},N=A,b=Object(_["a"])(N,v,D,!1,null,null,null),R=b.exports,g=a("4892"),I={components:{CloneRole:E,UserDetail:R,loader:g["a"]},data(){return{isLoading:!1,isShowModulePopup:!1,isShowUserDetailPopup:!1,PageSize:10,PageNumber:1,TotalPages:0,SortBy:"",SortExp:"",CurrentPage:1,listheaderbuttons:u.buttons,leftSearchFields:u.leftsearchSchema,listActions:u.listActions,Headers:u.TableHeader,searchCondition:"",TotalRecords:0,FieldsData:[],isShowCloneRolePopup:!1,RoleId:null,RoleName:"",showRole:!1,roleIdForUserDetail:""}},created:function(){var t=this;t.FetchData(),u.bindleftCommonSearchdropdown(t,"usertype")},methods:{FetchData:function(){var t=this;t.isLoading=!0;var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&${t.searchCondition}`;l["a"].GetRoles(e).then((function(e){t.isLoading=!1,null!=e.data?(t.FieldsData=e.data,t.FieldsData.forEach(t=>{t.isCheckBoxDisabled=!1;var e=[{id:1,label:"Active",value:"1001"},{id:2,label:"InActive",value:"1002"}];t.options=e,t.selectedOption="Active"==t.statuS_NAME?1001:1002,t.selectedClass="Active"==t.statuS_NAME?"btn-success":"btn-danger",t.rolE_COUNT>0?t.isCheckBoxDisabled=!0:t.isCheckBoxDisabled=!1}),t.Headers.forEach(e=>{e.settings=null,"rolE_NAME"==e.COLUMN_NAME&&(e.settings={isInSlot:!0,clickEvent:t.clickEventOfColumn}),"statuS_NAME"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"rolE_COUNT"==e.COLUMN_NAME&&(e.settings={isInSlot:!0})}),null!=t.FieldsData?(t.TotalRecords=t.FieldsData[0].totaL_RECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.noRecord=!0,t.FieldsData=[],t.TotalRecords=0,t.isLoading=!1)):(t.noRecord=!0,t.FieldsData=[],t.TotalRecords=0,t.isLoading=!1)}))},DrpdownUpdataStatus(t){var e=this;e.isLoading=!0;var a=`roleid=${t.rolE_ID}&statusId=${parseInt(t.selectedOption)}&tableName=TALYGEN_ROLE&primaryKey=ROLE_ID`;l["a"].UpdateRoleStatus(a).then((function(t){t.data&&e.FetchData(),e.isLoading=!1}))},GoToManageRole(t){var e=this;e.$router.push({path:"/Roles/UpdateRoles/"+t})},UserDetailPopup(t){var e=this;e.roleIdForUserDetail=t,e.isShowUserDetailPopup=!0},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Clone":e.isVisible=!0;break}a.push(e)}),a},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchConditionJson:this.searchCondition="",this.FetchData()},actionButtonClick:function(t,e,a,s){var o=this;switch(t){case"CloneField":o.AddCloneRole(e);break}},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"AddRole":this.AddRole();break;case"commonDeleteData":this.commonDeleteData();break}},AddCloneRole:function(t){var e=this;return null!=t.rolE_ID||void 0!=t.rolE_ID?(e.RoleId=t.rolE_ID,e.RoleName=t.rolE_NAME,e.isShowCloneRolePopup=!0):e.isShowCloneRolePopup=!1},clickEventOfColumn:function(t,e){console.log(t,e.COLUMN_NAME),"rolE_NAME"==e.COLUMN_NAME&&this.$router.push({name:"ManageRole",params:{RoleId:t.rolE_ID}})},commonDeleteData:function(t){var e=this,a="";e.isLoading=!0,null==t?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=t,null!=a?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Report"),(function(){var t={ids:a,CRM:"",Deals:"",refCode:"TALYGEN_ROLE"},s=JSON.stringify(t);l["a"].CommonCommonDelete(s).then((function(t){200==t.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Record")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Report")]),"Success",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete")),e.isLoading=!1},AddRole:function(t){var e=this;e.$router.push({path:"/Roles/AddRoles"})},hidePopup(){var t=this;t.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},CloseAddPopup:function(){var t=this;t.showLayoutPopup=!1,t.FetchData()},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()}}},L=I,M=(a("dc13"),Object(_["a"])(L,s,o,!1,null,null,null));e["default"]=M.exports},"386d":function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,"span#action-list{display:flex;align-items:center}.vue-treeselect__input{border:1px solid #abb5bf;padding:4px 12px}.vue-treeselect__single-value{padding-left:12px}",""]),t.exports=e},"50f3":function(t,e,a){var s=a("386d");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var o=a("499e").default;o("5a4539f0",s,!0,{sourceMap:!1,shadowMode:!1})},dc13:function(t,e,a){"use strict";a("50f3")}}]);
//# sourceMappingURL=chunk-562598e0.js.map