(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-329737c9"],{"26fe":function(t,e,a){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("SetFormMapping")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("Form",{ref:"ManageRuleEngineTarget"},[e("div",{staticClass:"float-right"},[e("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return t.addMoreOptionToBindForm()}}},[e("i",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddMore")))]),t._v("  "),t.StatuscodeMappingForBindForm.length>0?e("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.SaveFormMapping()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(t._s(t.$t("Save")))]):t._e(),t._v("  "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times pr-2"}),t._v(" "+t._s(t.$t("Cancel")))])]),e("div",{staticClass:"listing mt-3"},[e("div",{staticClass:"table-responsive",staticStyle:{height:"300px"}},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"bindFormWithStatusCode"}},[e("thead",{staticClass:"thead-bg"},[e("tr",{staticClass:"text-capitalize"},["FormBulider"==t.Form?e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px"}},[t._v(t._s(t.$t("ParentWorkType"))+" ")])]):t._e(),"locating"==t.CheckLocate?e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px"}},[t._v(" "+t._s(t.$t("ParentStatusCode")))])]):t._e(),"locating"==t.CheckLocate?e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px"}},[t._v(" "+t._s(t.$t("StatusCode"))+" ")])]):t._e(),e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px"}},[t._v(" "+t._s(t.$t("Form")))])]),e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"150px"}},[t._v(" "+t._s(t.$t("IsFormMandatory")))])]),e("th",{staticStyle:{display:"none"},attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px",display:"none"}},[t._v(" "+t._s(t.$t("Subject")))])]),e("th",{staticStyle:{display:"none"},attrs:{scope:"col"}},[e("span",{staticStyle:{width:"200px",display:"none"}},[t._v(" "+t._s(t.$t("NotificationTo")))])]),e("th",{attrs:{scope:"col"}},[e("span",{staticStyle:{width:"150px"}},[t._v(" "+t._s(t.$t("ApprovalTo")))])]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[e("span",{staticStyle:{width:"150px"}},[t._v(t._s(t.$t("Action")))])])])]),e("tbody",[0==t.StatuscodeMappingForBindForm.length?e("tr",[e("td",{staticClass:"text-center text-danger",attrs:{colspan:"8"}},[t._v(t._s(t.$t("NoRecordfound"))+" ")])]):t._l(t.StatuscodeMappingForBindForm,(function(a,o){return e("tr",{key:o},["FormBulider"==t.Form?e("td",{staticClass:"text-capitalize"},[e("Field",{attrs:{name:"WorkType"+o,rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.selectedWorkType,expression:"item.selectedWorkType"}],staticClass:"form-control",class:{"is-invalid":!a.isValid},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"selectedWorkType",e.target.multiple?o:o[0])},function(e){return t.getFormList("FSM_STATUSCODE",null,a,!0)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.WorkTypeDropdownOptions,(function(a,o){return e("option",{key:o,domProps:{value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),s[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"WorkType"+o}},[t._v(t._s(t.$t("WorkTypeIsRequired")))]):t._e()]}}],null,!0)})],1):t._e(),"locating"==t.CheckLocate?e("td",{staticClass:"text-capitalize"},[e("Field",{attrs:{name:"StatusCode"+o,rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function({errors:s}){return[e("select",{directives:[{name:"model",rawName:"v-model",value:a.parentselectedStatusCode,expression:"item.parentselectedStatusCode"}],staticClass:"form-control",class:{"is-invalid":!a.isValid},on:{change:[function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"parentselectedStatusCode",e.target.multiple?o:o[0])},function(e){return t.getFormList("FSM_SUBSTATUSCODE",null,a,!0)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.ParentStatusCodeDropdownOptions,(function(a,o){return e("option",{key:o,domProps:{value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),s[0]?e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"StatusCode"+o}},[t._v(t._s(t.$t("ParentSCode")))]):t._e()]}}],null,!0)})],1):t._e(),"locating"==t.CheckLocate?e("td",{staticClass:"text-capitalize"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.selectedStatusCode,expression:"item.selectedStatusCode"}],staticClass:"form-control",class:{"is-invalid":!a.isValid},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"selectedStatusCode",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"0"}},[t._v(t._s(t.$t("Select")))]),t._l(a.subStatusCodeList,(function(a,o){return e("option",{key:o,domProps:{value:a.value}},[t._v(t._s(a.name))])}))],2)]):t._e(),e("td",{staticStyle:{position:"relative",overflow:"visible !important"}},[e("multiselect",{class:{disabled:!0,"border border-danger":!a.isValid},attrs:{placeholder:"Select Form",label:"name","track-by":"value",options:t.FormList,multiple:!0,taggable:!0},model:{value:a.selectedForm,callback:function(e){t.$set(a,"selectedForm",e)},expression:"item.selectedForm"}}),a.isValid?t._e():e("span",{staticClass:"text-danger"},[t._v(t._s(t.$t("AlreadySelectedStatusCode")))])],1),e("td",{staticClass:"text-center"},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.isFormMandatory,expression:"item.isFormMandatory"}],staticClass:"chkitems custom-control-input",attrs:{type:"checkbox",name:"policySLAReminderResolve_IsHOD"+o,id:"policySLAReminderResolve_IsHOD"+o},domProps:{checked:Array.isArray(a.isFormMandatory)?t._i(a.isFormMandatory,null)>-1:a.isFormMandatory},on:{change:function(e){var o=a.isFormMandatory,s=e.target,i=!!s.checked;if(Array.isArray(o)){var r=null,n=t._i(o,r);s.checked?n<0&&t.$set(a,"isFormMandatory",o.concat([r])):n>-1&&t.$set(a,"isFormMandatory",o.slice(0,n).concat(o.slice(n+1)))}else t.$set(a,"isFormMandatory",i)}}}),e("label",{staticClass:"custom-control-label",attrs:{type:"checkbox",name:"policySLAReminderResolve_IsHOD"+o,for:"policySLAReminderResolve_IsHOD"+o}})])]),e("td",{staticStyle:{display:"none"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.subject,expression:"item.subject"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Subject"},domProps:{value:a.subject},on:{input:function(e){e.target.composing||t.$set(a,"subject",e.target.value)}}})]),e("td",{staticStyle:{display:"none"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.notificationTo,expression:"item.notificationTo"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Email"},domProps:{value:a.notificationTo},on:{input:function(e){e.target.composing||t.$set(a,"notificationTo",e.target.value)}}})]),e("td",{staticClass:"text-center"},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.isApprovalRequired,expression:"item.isApprovalRequired"}],staticClass:"chkitems custom-control-input",attrs:{type:"checkbox",id:"policySLAReminderResolve"+o,name:"policySLAReminderResolve"+o},domProps:{checked:Array.isArray(a.isApprovalRequired)?t._i(a.isApprovalRequired,null)>-1:a.isApprovalRequired},on:{change:[function(e){var o=a.isApprovalRequired,s=e.target,i=!!s.checked;if(Array.isArray(o)){var r=null,n=t._i(o,r);s.checked?n<0&&t.$set(a,"isApprovalRequired",o.concat([r])):n>-1&&t.$set(a,"isApprovalRequired",o.slice(0,n).concat(o.slice(n+1)))}else t.$set(a,"isApprovalRequired",i)},function(e){return t.chkLocateApprovaStatus(e,o)}]}}),e("label",{staticClass:"custom-control-label",attrs:{type:"checkbox",name:"policySLAReminderResolve"+o,for:"policySLAReminderResolve"+o}})])]),a.isApprovalRequired?e("td",{staticClass:"text-capitalize"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.approval_to,expression:"item.approval_to"}],staticClass:"form-control ApprovalTo",attrs:{id:"isLocateApprovalChk_"+o,name:"StatusList"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"approval_to",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"0"}},[t._v(t._s(t.$t("SelectApprovalTo")))]),e("option",{attrs:{value:"HOD"}},[t._v("HOD")]),e("option",{attrs:{value:"Supervisor"}},[t._v("Supervisor")]),e("option",{attrs:{value:"Admin"}},[t._v("Admin")])])]):e("td",{staticClass:"text-capitalize"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.approval_to,expression:"item.approval_to"}],staticClass:"form-control ApprovalTo d-none",attrs:{id:"isLocateApprovalChk_"+o,name:"StatusList"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(a,"approval_to",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("SelectApprovalTo")))]),e("option",{attrs:{value:"HOD"}},[t._v("HOD")]),e("option",{attrs:{value:"Supervisor"}},[t._v("Supervisor")]),e("option",{attrs:{value:"Admin"}},[t._v("Admin")])])]),e("td",{staticClass:"text-center single-action"},[o>0?e("a",{attrs:{title:"Delete"},on:{click:function(e){return t.deleteRecordOfFormMapping(o)}}},[e("i",{class:{"fa fa-trash text-danger action-icon":!0}})]):t._e()])])}))],2)])])])])],1)])])])],1)},s=[],i=(a("14d9"),a("9769")),r={props:{Form_Id:{type:Number,Required:!0},IsCheckLocate:{type:String,Required:!0},Form:{type:Number,Required:!0}},data(){return{isLoading:!1,StatuscodeMappingForBindForm:[],parentselectedStatusCode:"",ParentStatusCodeDropdownOptions:[],StatusCodeDropdownOptions:[],FormList:[],approval_To:"",workTypeId:null,CheckLocate:"",WorkTypeDropdownOptions:[],selectedWorkType:""}},created:async function(){var t=this;t.CheckLocate=t.IsCheckLocate,t.workTypeId=t.Form_Id,"FormBulider"==t.Form?(this.getFormList("FSM_WORKTYPES",null,null,null),this.getFormList("FSM_FORMS",null,null,null)):(this.getFormList("FSM_STATUSCODE",t.workTypeId,null,null),this.getFormList("FSM_FORMS",null,null,null))},methods:{getFormList:async function(t,e,a,o){var s=this;if("FormBulider"==s.Form)if(null!=a)var r=`id=${a.parentselectedStatusCode}&&moduleName=Ticketing&type=${t}&search=&refId=${a.selectedWorkType}`;else r=`id=&&moduleName=Ticketing&type=${t}&search=&refId=`;else if(null!=a)r=`id=${a.parentselectedStatusCode}&&moduleName=Ticketing&type=${t}&search=&refId=${s.workTypeId}`;else if(null!=e)r=`id=&&moduleName=Ticketing&type=${t}&search=&refId=${e}`;else r=`id=&&moduleName=Ticketing&type=${t}&search=&refId=`;await i["a"].GetDDLData(r).then((function(e){200==e.status||"OK"==e.statusText?"FSM_FORMS"==t?(s.FormList=e.data.DATA,s.getStatuscodeMappingForBindForm()):"FSM_STATUSCODE"==t?s.ParentStatusCodeDropdownOptions=e.data.DATA:"FSM_WORKTYPES"==t?s.WorkTypeDropdownOptions=e.data.DATA:(a.subStatusCodeList=e.data.DATA,1==o&&(a.selectedStatusCode=0)):"FSM_FORMS"==t?s.FormList=[]:"FSM_STATUSCODE"==t?(a.ParentStatusCodeDropdownOptions=[],1==o&&(a.parentselectedStatusCode="")):"FSM_WORKTYPES"==t?s.WorkTypeDropdownOptions=[]:(a.subStatusCodeList=[],1==o&&(a.selectedStatusCode=0))}))},chkLocateApprovaStatus:function(t,e){var a=t.target.checked;1==a?$("#isLocateApprovalChk_"+e).removeClass("d-none").addClass("d-block"):$("#isLocateApprovalChk_"+e).removeClass("d-block").addClass("d-none")},addMoreOptionToBindForm:function(){var t=this;let e=t.FormList.filter(e=>e.value==t.workTypeId);var a={selectedWorkType:"",parentselectedStatusCode:"",selectedStatusCode:0,selectedForm:e,subject:"",notificationTo:"",sendNotificationToYard:!1,isApprovalRequired:!1,isFormMandatory:!1,isValid:!0,subStatusCodeList:[],approval_To:0};t.StatuscodeMappingForBindForm.push(a)},deleteRecordOfFormMapping:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Record"),(function(){e.StatuscodeMappingForBindForm.splice(t,1)}))},getStatuscodeMappingForBindForm:function(){var t=this;if("FormBulider"==t.Form)var e="worktypeid=&formId="+t.workTypeId;else e=`worktypeid=${t.workTypeId}&formId=`;i["a"].GetFsmWorktypeStatusCodeFormMappingList(e).then(e=>{if(""!=e.data&&null!=e.data){let a=[];e.data.result.data.length>0?$.each(e.data.result.data,(function(o,s){var i=$.grep(e.data.result.data,(function(t,e){return t.subject==s.subject&&t.email==s.email&&t.is_approval_required==s.is_approval_required&&t.is_notification_to_yard==s.is_notification_to_yard&&t.is_form_mandatory==s.is_form_mandatory&&t.sub_status_code_id==s.sub_status_code_id&&t.status_code_id==s.status_code_id&&t.approval_to==s.approval_to}));if(i.length>0){var r=$.grep(t.StatuscodeMappingForBindForm,(function(t,e){return t.subject==s.subject&&t.notificationTo==s.email&&t.isApprovalRequired==s.is_approval_required&&t.sendNotificationToYard==s.is_notification_to_yard&&t.isFormMandatory==s.is_form_mandatory&&t.approval_to==s.approval_to&&parseInt(t.parentselectedStatusCode)==parseInt(s.status_code_id)&&parseInt(t.selectedStatusCode)==parseInt(s.sub_status_code_id)&&parseInt(t.selectedWorkType)==parseInt(s.worktype_id)}));if(0==r.length){$.each(i,(function(e,o){a=[];var s=t.FormList.filter((function(t){return t.value==o.form_id}));a.push(...s)}));var n={parentselectedStatusCode:s.status_code_id,selectedStatusCode:s.sub_status_code_id,selectedForm:a,subject:s.subject,notificationTo:s.email,sendNotificationToYard:s.is_notification_to_yard,isApprovalRequired:s.is_approval_required,isFormMandatory:s.is_form_mandatory,approval_to:s.approval_to,isValid:!0,subStatusCodeList:[],selectedWorkType:s.worktype_id};a=[],t.StatuscodeMappingForBindForm.push(n)}"FormBulider"==t.Form?(t.getFormList("FSM_STATUSCODE",null,n,null),t.getFormList("FSM_SUBSTATUSCODE",null,n,null)):t.getFormList("FSM_SUBSTATUSCODE",null,n,null),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}})):t.StatuscodeMappingForBindForm=[]}else t.StatuscodeMappingForBindForm=[]})},Close:function(){this.$parent.SetFormMapping=!1},SaveFormMapping:function(){var t=this,e=[],a=!0;if(t.StatuscodeMappingForBindForm.length>0){if($.each(t.StatuscodeMappingForBindForm,(function(e,o){$.each(t.StatuscodeMappingForBindForm,(function(s,i){e!=s&&("FormBulider"==t.Form?o.selectedWorkType==i.selectedWorkType&&o.parentselectedStatusCode==i.parentselectedStatusCode&&o.selectedStatusCode==i.selectedStatusCode&&(t.ShowAlert(t.$t("AlreadySelectedStatusCode",[t.$t("StatusCode")]),"failure",!0,t.$t("Alert")),t.StatuscodeMappingForBindForm[s].isValid=!1,a=!1):$.each(o.selectedForm,(function(e,r){$.each(i.selectedForm,(function(e,n){o.selectedStatusCode==i.selectedStatusCode&&r.value==n.value&&(t.ShowAlert(t.$t("AlreadySelectedStatusCode",[t.$t("StatusCode")]),"failure",!0,t.$t("Alert")),t.StatuscodeMappingForBindForm[s].isValid=!1,a=!1)}))})))}))})),a){$.each(t.StatuscodeMappingForBindForm,(function(t,a){var o=[],s="";$.each(a.selectedForm,(function(t,e){o.push(e.value)})),o.length>0&&(s=o.join(","));var i={selectedStatusCode:a.parentselectedStatusCode,selectedForm:s,subject:a.subject,notificationTo:a.notificationTo,sendNotificationToYard:a.sendNotificationToYard,isApprovalRequired:a.isApprovalRequired,isFormMandatory:a.isFormMandatory,workTypeId:a.selectedWorkType,sub_status_code_id:a.selectedStatusCode,approval_To:a.approval_to};e.push(i)}));var o=JSON.stringify(e);t.$refs.ManageRuleEngineTarget.validate().then(e=>{e&&i["a"].SaveFormStatusCodeMapping(o).then(e=>{"Success"==e.data.status?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("WorktypeFormMapping")]),"success",!0,t.$t("Alert")),t.Close(),t.$parent.FetchRecords()):(t.ShowAlert(t.$t("AddedError",[t.$t("Resource")]),"failure",!0,t.$t("Alert")),t.Close())})})}}else t.ShowAlert(t.$t("AddedError",[t.$t("Resource")]),"failure",!0,t.$t("Alert"))}}},n=r,l=(a("2f19"),a("2877")),c=Object(l["a"])(n,o,s,!1,null,null,null);e["a"]=c.exports},"2f19":function(t,e,a){"use strict";a("c3d3")},"73ae":function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".single-action i{font-size:20px}",""]),t.exports=e},c3d3:function(t,e,a){var o=a("73ae");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=a("499e").default;s("e0bb53d4",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-329737c9.js.map