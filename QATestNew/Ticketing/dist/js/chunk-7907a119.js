(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7907a119","chunk-2d0d0f48"],{"0c69":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),e.NoteList.length>0?[t("div",{staticClass:"row card-view no-bg custom-box-width"},e._l(e.NoteList,(function(a,i){return t("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[t("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[t("div",{staticClass:"card-heading"},[t("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?t("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:e.$t("Image")}}):t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:e.$t("Image"),border:"0"}})]),e._v(" "+e._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),t("div",{staticClass:"card-detail-main1 dynamiclistol"},[t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.CREATED_BY_NAME))])]),t("hr",{staticClass:"my-2"}),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"150px","overflow-y":"auto"}},[t("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:e._s(a.NOTE)}})])]),t("div",{staticClass:"bottom-action"},[t("div",{staticClass:"card-date"},[t("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),t("span",[e._v(" "+e._s(a.CREATED_AT?e.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),t("div",{staticClass:"card-action"},[a.TICKET_ATTACHMENT_ID>0?t("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:e.$t("ClickHereDownloadAttachment"),alt:e.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(t){return e.DownloadAttachment(a)}}},[t("em",{staticClass:"fa fa-download"})]):e._e(),1!=e.ListNoteData?t("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:e.$t("EditNotes"),alt:e.$t("EditNotes"),href:"javascript:;"},on:{click:function(t){return e.EditNote(a)}}},[t("em",{staticClass:"fa fa-edit"})]):e._e()])])])])})),0)]:e._e(),e.NoRecords?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[t("span",{staticClass:"text-danger text-center d-block no-record"},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)},s=[],l=a("9769"),o={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(e){var t=this;t.NoteList=e,t.NoteList.length>0?t.NoRecords=!1:(t.NoteList=[],t.NoRecords=!0)}},created(){setTimeout(()=>{var e=this;e.UserId=e.GetUserInfo.ID,e.ListNoteData=this.ListNoteData,e.isBlank(e.NoteData)?(e.NoRecords=!0,e.NoteList=[]):(e.NoteList=e.NoteData,e.NoRecords=!1)},500)},methods:{EditNote:function(e){var t=this;t.$parent.noteId=e.NOTE_ID,t.$parent.ticketId=e.TICKET_ID,t.$parent.note=e.NOTE,t.$parent.privacy=e.PRIVACY,t.$parent.ATTACHMENT_NAME=e.ATTACHMENT_NAME,t.$parent.ATTACHMENT_PATH=e.ATTACHMENT_PATH,t.$parent.isShowAddNote=!0},DownloadAttachment(e){var t=this;t.isLoading=!0;var a=`filePath=${e.ATTACHMENT_PATH}&fileName=${e.ATTACHMENT_NAME}`;l["a"].DownloadFile(a).then((function(a){t.isLoading=!1;const i=a.data,s=`data:${JSON.parse(e.ATTACHMENT_DESC).ContentType};base64,${i}`;var l=document.createElement("a");l.href=s,l.setAttribute("download",e.ATTACHMENT_NAME),document.body.appendChild(l),l.click()})),t.isLoading=!1}}},r=o,n=a("2877"),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"122c":function(e,t,a){var i=a("5aef");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("1015bb95",i,!0,{sourceMap:!1,shadowMode:!1})},1788:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("AddWorkOrder")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddEditWorkOrder"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-Mapslot",fn:function({data:a}){return[e.isShowMap?t("ManageMap",{key:e.componentKey,staticClass:"row",attrs:{mapType:"MapBox",config:e.config,mapContainer:"WorkOrder",Data:e.mapObj},on:{GetAddress:e.GetAddress}}):e._e()]}}])})],1)])])])],1)},s=[],l=(a("14d9"),a("9769")),o=a("33e4"),r={components:{ManageMap:o["a"]},props:{WorkOrdrId:{type:Number,required:!0},form:{type:String,required:!0}},data(){return{config:{isShowDrawButton:!0,isShowEtaOrLocator:!0,isShowSearchBox:!0},isLoading:!1,isShowMap:!0,showSetting:!1,clientId:0,CompanyType:"",WorkOrderNumber:"",selectClientvalue:"",CountryDDl:"",StateDDl:"",selectvalue:"",Latitude:"",Longitude:"",FormSchema:[{layoutType:"double",Data:[{astype:"CustomSelectField",label:this.$t("TicketNumber"),name:"TicketNumber",value:"",config:{options:[],onSearchChange:this.onSearch,onChange:this.setSelectedValue},placeholder:this.$t("Select"),validationRules:{required:!0}},{astype:"TextField",label:this.$t("Title"),name:"WorkOrderTitle",value:"",placeholder:"",validationRules:{required:!0}},{astype:"DateField",label:this.$t("WorkOrderDate"),name:"WorkOrderDate",value:"",placeholder:"",config:{format:"M/D/YYYY",minDate:new Date},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("WorkType"),name:"WorkType",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Product"),name:"Product",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:""},{astype:"SelectField",label:this.$t("Client"),name:"Client",value:"",disabled:!0,config:{options:[],onChange:this.GetClientaddress},placeholder:this.$t("Select"),validationRules:""},{astype:"SelectField",label:this.$t("ClientAddress"),name:"ClientAddress",value:"",config:{options:[],onChange:this.fetchAddressByClientId},placeholder:this.$t("Select"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Utility"),name:"Utility",value:"",config:{options:[],onChange:this.GetCDCDdlData},placeholder:this.$t("Select"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("CDC"),name:"CDC",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",placeholder:this.$t("EnterDescription"),validationRules:{required:!0}}]},{layoutType:"double",group_name:"Preferred Time",Data:[{astype:"DateField",label:this.$t("StartDateTime"),name:"StartDate",value:"",placeholder:"",config:{format:"M/D/YYYY",onChange:this.GetStartData},validationRules:""},{astype:"DateField",label:this.$t("EndDate"),name:"EndDate",value:"",placeholder:"",config:{format:"M/D/YYYY",minDate:""},validationRules:""}]},{layoutType:"triple",group_name:"Address",Data:[{astype:"TextField",label:this.$t("Address"),name:"Address",value:"",placeholder:"",validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Country"),name:"Country",value:"",disabled:!0,config:{options:[],onChange:this.GetStateDDL},placeholder:this.$t("Select"),validationRules:""},{astype:"SelectField",label:this.$t("State"),name:"State",value:"",disabled:!0,config:{options:[]},placeholder:this.$t("Select"),validationRules:""},{astype:"TextField",label:this.$t("County"),name:"County",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:this.$t("City"),name:"City",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:this.$t("Street"),name:"Street",value:"",disabled:!0,placeholder:"",validationRules:""},{astype:"TextField",label:this.$t("ZipCode"),name:"ZipCode",value:"",disabled:!0,placeholder:"",validationRules:""}]},{layoutType:"single",Data:[{astype:"SlotField",label:"",name:"Mapslot",value:"",placeholder:"",visibility:!0,validationRules:"",settings:{isInSlot:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var e=this;if(null!=e.$parent.TicketId&&null!=e.$parent.TicketNumber){e.tiketidNumber=e.$parent.TicketId;let t={label:e.$parent.TicketNumber,value:e.$parent.TicketId};e.FormSchema[0].Data[0].value=t,e.FormSchema[0].Data[0].disabled=!0,e.setClientData(null,e.tiketidNumber)}this.IsExtraMapFeature(),this.GetDdlRecords_WorkType(),this.GetProductRecords(),this.GetAddClientDDL(),this.GetCountryDDL()},methods:{GetAddress:function(e){var t=this;t.Latitude="",t.Longitude="";var a=e.length-1;let i=t.CountryDDl.filter(t=>t.name===e[a].CompleteAddress.Country.LongName);t.FormSchema[3].Data[0].value=e[a].CompleteAddress.FullAddress;var s=""==i?"":i[0].value;t.FormSchema[3].Data[1].value=s,t.GetStateDDL(null,s),setTimeout((function(){let i=t.StateDDl.filter(t=>t.name===e[a].CompleteAddress.AdministrativeAreaLevel1.LongName);var s=""==i?"":i[0].value;t.FormSchema[3].Data[2].value=s}),1e3),t.FormSchema[3].Data[3].value=e[a].CompleteAddress.AdministrativeAreaLevel2.LongName,t.FormSchema[3].Data[4].value=e[a].CompleteAddress.City.LongName,t.FormSchema[3].Data[5].value=e[a].CompleteAddress.AdministrativeAreaLevel3.LongName,t.FormSchema[3].Data[6].value=e[a].CompleteAddress.PinCode.LongName;var l="",o="",r="",n="";e[a].LatLng.forEach((e,t)=>{0==t?(l=e.Lat,o=e.Lng):(r=e.Lat,n=e.Lng)}),t.Latitude=r+","+o,t.Longitude=l+","+n},Close:function(){this.$parent.AddWorkOrderModal=!1},IsExtraMapFeature:function(){var e=this;l["a"].IsExtraMapFeature().then((function(t){e.CompanyType="",null!=t.data&&""!=t.data?(e.CompanyType=t.data,"nonlocating"!=e.CompanyType&&"normal"!=e.CompanyType||(e.FormSchema[0].Data[7].visibility=!1,e.FormSchema[0].Data[8].visibility=!1,e.FormSchema[0].Data[7].validationRules={required:!1},e.FormSchema[0].Data[8].validationRules={required:!1})):(e.CompanyType="normal",e.FormSchema[0].Data[7].visibility=!1,e.FormSchema[0].Data[8].visibility=!1,e.FormSchema[0].Data[7].validationRules={required:!1},e.FormSchema[0].Data[8].validationRules={required:!1})}))},GetStartData:function(e,t){var a=this;a.FormSchema[2].Data[1].config.minDate=e},onSearch:async function(e,t,a){this.searchSelectData(a,this,t)},searchSelectData:async function(e,t){var a=this;this.ShowSearchData(e,a,t)},setSelectedValue:async function(e,t,a){var i=this;i.selectvalue="";try{""!=a.value?i.selectvalue=a.value:i.selectvalue=i.FormSchema[0].Data[0].value}catch(s){}i.setClientData(i.selectvalue,null)},setClientData:async function(e,t){var a=this,i=null;i=null!=t?t:e,a.FormSchema[0].Data[5].value="";var s="id=&&moduleName=Ticketing&type=CLIENTFROMTICKETID&search=&refId="+i;await l["a"].GetDDLDataFSM(s).then((function(e){e.data&&("Success"==e.data.status?(a.FormSchema[0].Data[5].value=e.data.result.DATA[0].value,a.GetClientaddress(null,e.data.result.DATA[0].value)):a.selectClientvalue="")}))},ShowSearchData:async function(e,t){var a=this,i=`id=&&moduleName=Ticketing&type=FSM_Tickets_List&search=${e}&refId=`;"undefined"==typeof t&&(t=0),a.FormSchema[0].Data[0].config.options=[],await l["a"].GetDDLDataFSM(i).then((function(e){if(e.data){var t=e.data;null!=t&&e.data.result.DATA.forEach((e,t)=>{a.FormSchema[0].Data[0].config.options.push({value:e.value,name:e.name})})}}))},GetDdlRecords_WorkType:async function(){var e=this,t="id=&&moduleName=Ticketing&type=FSM_WORKTYPE&search=&refId=";await l["a"].GetDDLDataFSM(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[3].config.options.push({value:t.value,name:t.name})})}}))},GetProductRecords:async function(){var e=this,t="id=&&moduleName=Ticketing&type=PRODUCT&search=&refId=";await l["a"].GetDDLDataFSM(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[4].config.options.push({value:t.value,name:t.name})})}}))},GetAddClientDDL:async function(){var e=this,t="id=&&moduleName=Ticketing&type=CLIENT_LIST_WO&search=&refId=";await l["a"].GetDDLDataFSM(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[5].config.options.push({value:t.value,name:t.name})})}}))},GetClientaddress:async function(e,t){var a=this,i=0;null==e?i=t:(i=e.target.value.toString(),a.clientId=i),a.FormSchema[0].Data[6].config.options=[];var s="id=&&moduleName=Ticketing&type=CLIENT_ADDRESS_LIST_WO&search=&refId="+i;await l["a"].GetDDLDataFSM(s).then((function(e){if(e.data){var t=e.data;null!=t&&e.data.result.DATA.forEach((e,t)=>{a.FormSchema[0].Data[6].config.options.push({value:e.value,name:e.name})})}})),a.GetUtilityDDL(e,t)},fetchAddressByClientId:async function(e,t){var a=this;a.Latitude="",a.Longitude="";var i=0;i=null==e?t:e.target.value.toString();var s=`id=${a.clientId}&&moduleName=Ticketing&&addressId=`+i;await l["a"].GetTicketClientAddress(s).then((function(e){if(e.data){var t=e.data.result.data[0].COUNTRY_ID;a.GetStateDDL(null,t),a.FormSchema[3].Data[0].value=e.data.result.data[0].USER_ADDRESS_1,a.FormSchema[3].Data[1].value=e.data.result.data[0].COUNTRY_ID,a.FormSchema[3].Data[2].value=e.data.result.data[0].CT[0].ST[0].STATE_ID,a.FormSchema[3].Data[3].value=e.data.result.data[0].USER_STATE,a.FormSchema[3].Data[4].value=e.data.result.data[0].USER_CITY,a.FormSchema[3].Data[5].value=e.data.result.data[0].USER_ADDRESS_2,a.FormSchema[3].Data[6].value=e.data.result.data[0].USER_ZIPCODE,a.Latitude=e.data.result.data[0].Latitude+","+e.data.result.data[0].Longitude,a.Longitude=e.data.result.data[0].Latitude+","+e.data.result.data[0].Longitude}}))},GetUtilityDDL:async function(e,t){var a=0;a=null==e?t:e.target.value.toString();var i=this;i.FormSchema[0].Data[7].config.options=[];var s="refId=&&moduleName=Ticketing&type=UTILITY_LIST_BY_CLIENT_ID&search=&id="+a;await l["a"].GetDDLDataFSM(s).then((function(e){if(e.data){var t=e.data;null!=t&&e.data.result.DATA.forEach((e,t)=>{i.FormSchema[0].Data[7].config.options.push({value:e.value,name:e.name})})}}))},GetCDCDdlData:async function(e){var t=this,a=e.target.value.toString();t.FormSchema[0].Data[8].config.options=[];var i="refId=&&moduleName=Ticketing&type=FSM_CDCCODE_FOR_TICKET&search=&id="+a;await l["a"].GetDDLDataFSM(i).then((function(e){if(e.data){var a=e.data;null!=a&&e.data.result.DATA.forEach((e,a)=>{t.FormSchema[0].Data[8].config.options.push({value:e.value,name:e.name})})}}))},GetCountryDDL:async function(e){var t=this;t.FormSchema[3].Data[1].config.options=[],t.CountryDDl="";var a="id=&&moduleName=Ticketing&type=COUNTRIES&search=&refId=";await l["a"].GetDDLDataFSM(a).then((function(e){if(e.data){var a=e.data;t.CountryDDl=e.data.result.DATA,null!=a&&e.data.result.DATA.forEach((e,a)=>{t.FormSchema[3].Data[1].config.options.push({value:e.value,name:e.name})})}}))},GetStateDDL:async function(e,t){var a=this,i=0;i=null==e?t:e.target.value.toString(),a.FormSchema[3].Data[2].config.options=[],a.StateDDl="";var s="id=&&moduleName=FSM&type=STATE&search=&refId="+i;await l["a"].GetDDLDataFSM(s).then((function(e){if(e.data){var t=e.data;a.StateDDl=e.data.result.DATA,null!=t&&e.data.result.DATA.forEach((e,t)=>{a.FormSchema[3].Data[2].config.options.push({value:e.value,name:e.name})})}}))},onSubmit(e,t){var a=this;a.buttons[0].class+=" disabled";var i={WorkOrderId:null==a.WorkOrdrId?0:a.WorkOrdrId,WorkOrderNumber:a.WorkOrderNumber,WorkOrderDate:a.$options.filters.formatDate(e.WorkOrderDate),WorkOrderTitle:e.WorkOrderTitle,WorkOrderDescription:e.Description,TicketId:""!=e.TicketNumber.value?e.TicketNumber.value:a.selectvalue,CDCMvalueId:e.CDC,workTypeId:e.WorkType,productId:e.Product,Address:e.Address,City:e.City,State:e.State,Zip:void 0==e.ZipCode?"":e.ZipCode,LOCATION_NW:a.Latitude,LOCATION_SE:a.Longitude,DIGSTREET:e.Street,County:e.County,CountryId:e.Country,StartDateTime:""==e.StartDate?"":a.$options.filters.formatDateTime(e.StartDate),EndDateTime:""==e.EndDate?"":a.$options.filters.formatDateTime(e.EndDate),ClientId:e.Client},s=JSON.stringify(i);l["a"].SaveWorkOrder(s).then(e=>{"Success"==e.data.status?("EXIST"==e.data.result.MSG?a.ShowAlert(a.$t("AlreadyExists",[a.$t("WorkOrder")]),"failure",!0,a.$t("Alert")):a.WorkOrdrId>0?a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("WorkOrder")]),"success",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddedSuccess",[a.$t("WorkOrder")]),"success",!0,a.$t("Alert")),"WorkOrder"==a.form?(a.$parent.fetchRecords(),a.Close()):(a.$parent.IsWorkOrderShow=!0,a.$parent.isShowWorkList=!1,a.$parent.isShowWorkOrder=!1,a.$parent.LoadTab("workorder"),a.Close())):(a.ShowAlert(a.$t("AddedError",[a.$t("WorkOrder")]),"failure",!0,a.$t("Alert")),a.Close())})}}},n=r,d=a("2877"),c=Object(d["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},2008:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".talygen-card-view .card-number,.talygen-card-view .text-info,.talygen-card-view .text-success{font-weight:500!important}.talygen-card-view .card-detail span{font-weight:400!important}.round-icon-small{width:26px;height:26px;line-height:26px;margin:0 2px}.round-icon-small em{font-size:13px!important}",""]),e.exports=t},2256:function(e,t,a){"use strict";a("82dd")},"334f":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".multiselect .multiselect__content-wrapper{z-index:1000!important}#ArrivalWindowEndTime .vc-popover-content-wrapper,#ArrivalWindowStartTime .vc-popover-content-wrapper{z-index:999}#ScheduledEndTime,#ScheduledStartTime{z-index:998}",""]),e.exports=t},"3a09":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ScheduledAppointment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.CloseScheduledAppointment}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgScheduledAppointment"))}})])])])]),t("div",{staticClass:"modal-body",staticStyle:{"max-height":"70vh",overflow:"auto"}},[t("dynamic-form",{ref:"AddForm",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-NoAssignedServiceResources",fn:function({data:a}){return[t("div",{staticClass:"form-group p-2 bg-light mb-0",staticStyle:{"min-height":"33px"}},[""!=e.SchduleAppointment.AssignedResources?t("span",[e._v(e._s(e.SchduleAppointment.AssignedResources))]):t("span",{staticClass:"text-danger"},[e._v(e._s(e.$t("Noassignedresourcefound")))])])]}},{key:"tgslot-NoAssignedServiceCrews",fn:function({data:a}){return[t("div",{staticClass:"form-group p-2 bg-light mb-0",staticStyle:{"min-height":"33px"}},[""!=e.SchduleAppointment.AssignedCrews?t("span",[e._v(e._s(e.SchduleAppointment.AssignedCrews))]):t("span",{staticClass:"text-danger"},[e._v(e._s(e.$t("Noassignedcrewfound")))])])]}},{key:"tgslot-RelatedSAList",fn:function({data:a}){return["NU"!=e.isLocateOrNonLocate?t("div",{staticClass:"listing"},[t("div",{staticClass:"table-responsive table-fix-header",staticStyle:{"max-height":"400px"}},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"realtedServiceAppointmentlistingdata"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"text-center",staticStyle:{width:"25%"}},[e._v(e._s(e.$t("AppointmentNumber"))+" ")]),t("th",{staticClass:"text-center",staticStyle:{width:"20%"}},[e._v(e._s(e.$t("ScheduledSA")))]),t("th",{staticClass:"text-center",staticStyle:{width:"20%"}},[e._v(e._s(e.$t("Status")))]),t("th",{staticClass:"text-left",staticStyle:{width:"35%"}},[e._v(e._s(e.$t("WorkType")))])])]),t("tbody",[e._l(e.relatedSAList,(function(a,i){return t("tr",{key:i},[t("td",{staticClass:"text-center",staticStyle:{width:"25%"}},[t("a",{attrs:{href:"/ServiceAppointment/ViewSADetails/"+a.Id,target:"_blank"}},[e._v(e._s(a.AppointmentNo))])]),t("td",{staticClass:"text-center",staticStyle:{width:"20%"}},["NU"!=e.isLocateOrNonLocate?t("label",{staticClass:"switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedRelatedSAList,expression:"checkedRelatedSAList"}],attrs:{type:"checkbox",hidden:"",id:a.Id},domProps:{value:a.Id,checked:Array.isArray(e.checkedRelatedSAList)?e._i(e.checkedRelatedSAList,a.Id)>-1:e.checkedRelatedSAList},on:{click:function(t){return e.check(t)},change:function(t){var i=e.checkedRelatedSAList,s=t.target,l=!!s.checked;if(Array.isArray(i)){var o=a.Id,r=e._i(i,o);s.checked?r<0&&(e.checkedRelatedSAList=i.concat([o])):r>-1&&(e.checkedRelatedSAList=i.slice(0,r).concat(i.slice(r+1)))}else e.checkedRelatedSAList=l}}}),t("span",{staticClass:"slider round"})]):e._e(),"NU"==e.isLocateOrNonLocate?t("label",{staticClass:"switch"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedRelatedSAList,expression:"checkedRelatedSAList"}],attrs:{type:"checkbox",disabled:"",hidden:"",id:a.Id},domProps:{value:a.Id,checked:Array.isArray(e.checkedRelatedSAList)?e._i(e.checkedRelatedSAList,a.Id)>-1:e.checkedRelatedSAList},on:{click:function(t){return e.check(t)},change:function(t){var i=e.checkedRelatedSAList,s=t.target,l=!!s.checked;if(Array.isArray(i)){var o=a.Id,r=e._i(i,o);s.checked?r<0&&(e.checkedRelatedSAList=i.concat([o])):r>-1&&(e.checkedRelatedSAList=i.slice(0,r).concat(i.slice(r+1)))}else e.checkedRelatedSAList=l}}}),t("span",{staticClass:"slider round"})]):e._e()]),t("td",{staticClass:"text-center",staticStyle:{width:"20%"}},[e._v(e._s(a.Status))]),t("td",{staticClass:"text",staticStyle:{width:"35%"}},[e._v(e._s(a.WorkType))])])})),0==e.relatedSAList.length?t("tr",[t("td",{staticClass:"text-center bg-light text-danger",attrs:{colspan:"4"}},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)])])]):e._e()]}}])}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])])],1)])])])],1)},s=[],l=(a("14d9"),a("9769")),o={props:{SchduleAppointment:{type:Object,required:!0},SA_GroupData:{type:Array,required:!0},IsCurrentView:{type:String,required:!0}},data(){return{isLocateOrNonLocate:"",checkedRelatedSAList:[],Headers:[{COLUMN_NAME:"AppointmentNo",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Appointment Number",DISPLAY_ORDER:1},{COLUMN_NAME:"Id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Scheduled SA",DISPLAY_ORDER:2},{COLUMN_NAME:"Status",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:3},{COLUMN_NAME:"WorkType",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Type",DISPLAY_ORDER:4}],widgets:[],HeaderText:"",LegendArray:[],listheaderbuttons:[],isLoading:!1,SortExp:"",SortBy:"",TotalRecords:0,FormSchema:[{layoutType:"double",group_name:"General Information",Data:[{astype:"TextField",label:this.$t("ScheduledAppointment"),name:"ScheduledAppointment",value:"",disabled:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("Acount"),name:"Acount",value:"",disabled:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("Subject"),name:"Subject",value:"",disabled:!0,validationRules:{required:!1}},{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[]},placeholder:this.$t("SelectStatus"),validationRules:{required:!0,max:100}},{astype:"TextField",label:this.$t("WorkType"),name:"WorkType",value:"",disabled:!0,validationRules:{required:!1}},{astype:"TextField",label:this.$t("WorkOrder"),name:"WorkOrder",value:"",disabled:!0,validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("description"),name:"Description",value:"",validationRules:"",config:{rows:4,cols:5}}]},{layoutType:"double",group_name:"Scheduled Times",Data:[{astype:"DateField",label:this.$t("ArrivalWindowStartTime"),name:"ArrivalWindowStartTime",value:"",config:{mode:"DateTime",format:"M/D/YYYY",onChange:this.GetStartData}},{astype:"DateField",label:this.$t("ArrivalWindowEndTime"),name:"ArrivalWindowEndTime",value:"",config:{mode:"DateTime",format:"M/D/YYYY",minDate:""}},{astype:"DateField",label:this.$t("ScheduledStartTime"),name:"ScheduledStartTime",value:"",config:{mode:"DateTime",format:"MM/DD/YYYY h:mm A",onChange:this.GetStartDataa}},{astype:"DateField",label:this.$t("ScheduledEndTime"),name:"ScheduledEndTime",mode:"DateTime",value:"",config:{mode:"DateTime",format:"MM/DD/YYYY h:mm A",minDate:""}},{astype:"MultiSelectField",label:this.$t("ServiceResource"),name:"ServiceResource",value:"",mode:"tag",placeholder:"",validationRules:{required:!1},config:{options:[]}},{astype:"SlotField",label:this.$t("AssignedServiceResources"),name:"NoAssignedServiceResources",value:"",placeholder:"",visibility:!0,validationRules:"",settings:{isInSlot:!0}},{astype:"MultiSelectField",label:this.$t("ServiceCrew"),name:"ServiceCrew",value:"",mode:"tag",placeholder:"",validationRules:{required:!1},config:{options:[]}},{astype:"SlotField",label:this.$t("SelectedServiceCrews"),name:"NoAssignedServiceCrews",value:"",placeholder:"",visibility:!0,validationRules:"",settings:{isInSlot:!0}}]},{layoutType:"single",group_name:"Related SA List",Data:[{astype:"SlotField",label:"",name:"RelatedSAList"}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.CloseScheduledAppointment}],statusList:[],resourceList:[],crewList:[],relatedSAList:[],isAjax:!1}},created:async function(){await this.FetchData(),await this.getResourceCrewData(),await this.getStatusList(),await this.getResourceList(),await this.getcrewList(),await this.getRelatedSAList(this.SchduleAppointment.SA_Account_Id,this.SchduleAppointment.SA_Id),this.isLocateOrNonLocate=this.GetUserInfo.UserType},methods:{check(){},GetStartData:function(e,t){var a=this;a.FormSchema[2].Data[1].config.minDate=e,a.FormSchema[2].Data[3].config.minDate=e},GetStartDataa:function(e,t){var a=this;a.FormSchema[2].Data[3].config.minDate=e},FetchData:async function(){var e=this;e.FormSchema[0].Data[0].value=e.SchduleAppointment.SA_Number,e.FormSchema[0].Data[1].value=e.SchduleAppointment.SA_Account,e.FormSchema[0].Data[2].value=e.SchduleAppointment.SA_Subject,e.FormSchema[0].Data[3].value=e.SchduleAppointment.Status_Id,e.FormSchema[0].Data[4].value=e.SchduleAppointment.SA_WorkType,e.FormSchema[0].Data[5].value=e.SchduleAppointment.SA_WorkOrder,e.FormSchema[1].Data[0].value=e.SchduleAppointment.SA_Description,e.FormSchema[2].Data[2].value=e.$options.filters.formatDateTime(e.SchduleAppointment.SA_Scheduled_StartTime),e.FormSchema[2].Data[3].value=e.$options.filters.formatDateTime(e.SchduleAppointment.SA_Scheduled_EndTime)},CloseScheduledAppointment:function(){this.$parent.IsSchduleAppointment=!1},getRelatedSAList:async function(e,t){e=null==e?0:e;var a=`accountId=${e}&sa_id=${t}`;await l["a"].getRelatedSAList(a).then(e=>{""!=e.data.result?this.relatedSAList=e.data.result.data:this.relatedSAList=[]})},getResourceCrewData:async function(){var e,t,a=this,i="SA_ID="+a.SchduleAppointment.SA_Id;await l["a"].getResourceCrewData(i).then(i=>{if(null!=i.data){if("Failure"!=i.data.status){if(i.data.result.data.forEach(a=>{e=$.grep(i.data.result.data,(function(e,t){return"RESOURCE"==e.ResourceType})),t=$.grep(i.data.result.data,(function(e,t){return"CREW"==e.ResourceType}))}),e){var s=[];e.forEach(e=>{s.push({label:e.name,value:e.value})}),a.FormSchema[2].Data[4].value=s}if(t){var l=[];t.forEach(e=>{l.push({label:e.name,value:e.value})}),a.FormSchema[2].Data[6].value=l}}if(this.SA_GroupData.length>0)if("Resource"==this.SA_GroupData[0].type){s=[];this.SA_GroupData.forEach(e=>{s.push({label:e.name,value:e.value})}),a.FormSchema[2].Data[4].value=s}else if("Crew"==this.SA_GroupData[0].type){l=[];this.SA_GroupData.forEach(e=>{l.push({label:e.name,value:e.value})}),a.FormSchema[2].Data[6].value=l}}})},getStatusList:async function(){var e="type=status";await l["a"].getStatusList(e).then(e=>{null!=e.data&&(this.statusList=e.data.result,this.statusList.forEach(e=>{let t={name:e.text,value:e.value};this.FormSchema[0].Data[3].config.options.push(t),this.$refs.AddForm.UpdateKeyValue()}))})},getResourceList:async function(){var e="moduleName=&type=FSM_SA_RESOURCENAME&refId=";await l["a"].GetDDLDataFSM(e).then(e=>{this.resourceList=e.data.result.DATA,this.resourceList.forEach(e=>{let t={name:e.name,value:e.value};this.FormSchema[2].Data[4].config.options.push(t)})})},getcrewList:async function(){var e="moduleName=&type=FSM_CREWNAME&refId=";await l["a"].GetDDLDataFSM(e).then(e=>{this.crewList=e.data.result.DATA,this.crewList.forEach(e=>{let t={name:e.name,value:e.value};this.FormSchema[2].Data[6].config.options.push(t)})})},onSubmit(e,t){var a=this,i=this.checkedRelatedSAList.join(","),s="",o="",r="Invalid Date"===a.$options.filters.formatDateTime(e.ArrivalWindowStartTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.ArrivalWindowStartTime):a.$options.filters.formatDateTime(e.ArrivalWindowStartTime),n="Invalid Date"===a.$options.filters.formatDateTime(e.ArrivalWindowEndTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.ArrivalWindowEndTime):a.$options.filters.formatDateTime(e.ArrivalWindowEndTime),d="Invalid Date"===a.$options.filters.formatDateTime(e.ArrivalWindowStartTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.ArrivalWindowStartTime):a.$options.filters.formatDateTime(e.ArrivalWindowStartTime),c="Invalid Date"===a.$options.filters.formatDateTime(e.ArrivalWindowEndTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.ArrivalWindowEndTime):a.$options.filters.formatDateTime(e.ArrivalWindowEndTime);if(d==c&&r>n)return a.ShowAlert(a.$t("ArrivalWindowTimeRangeValidation"),"warning",!0,a.$t("Alert")),e.ArrivalWindowEndTime="",!1;var u="Invalid date"===a.$options.filters.formatDateTime(e.ScheduledStartTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.SA_Scheduled_StartTime):a.$options.filters.formatDateTime(e.ScheduledStartTime),p="Invalid date"===a.$options.filters.formatDateTime(e.ScheduledEndTimes)?a.$options.filters.formatDateTime(a.SchduleAppointment.SA_Scheduled_EndTime):a.$options.filters.formatDateTime(e.ScheduledEndTime),m="Invalid date"===a.$options.filters.formatDateTime(e.ScheduledStartTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.SA_Scheduled_StartTime):a.$options.filters.formatDateTime(e.ScheduledStartTime),f="Invalid date"===a.$options.filters.formatDateTime(e.ScheduledEndTime)?a.$options.filters.formatDateTime(a.SchduleAppointment.SA_Scheduled_EndTime):a.$options.filters.formatDateTime(e.ScheduledEndTime);if(m==f&&u>p)return a.ShowAlert(a.$t("ScheduledTimeRangeValidation"),"warning",!0,a.$t("Alert")),e.ScheduledStartTime="",!1;if(e.ServiceResource){var h=[];e.ServiceResource.forEach(e=>{h.push(e.value)}),s=h.join(",")}if(e.ServiceCrew){var v=[];e.ServiceResource.forEach(e=>{v.push(e.value)}),o=v.join(",")}var _={SA_id:a.SchduleAppointment.SA_Id,txtSA_Number:e.ScheduledAppointment,txtAccount:e.Acount,Subject:e.Subject,satusId:e.Status,Description:e.Description,arrivalWindowStartTime:void 0==d?null:d,arrivalWindowEndTime:void 0==c?null:c,scheduledStartTime:void 0==m?null:m,scheduledEndTime:void 0==f?null:f,serviceResourceId:s,serviceCrewId:o,relatedServiceAppointments:i},S=JSON.stringify(_);l["a"].AddScheduledAppointment(S).then(e=>{1==e.data?(a.SchduleAppointment.SA_Id>0?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("ServiceAppointment")]),"success",!0,a.$t("Alert")),a.CloseScheduledAppointment(),"WorkOrderListing"==a.$route.name?(a.$router.push({name:"WorkOrderListing"}),a.$parent.fetchRecords()):"Gantt"==a.IsCurrentView?(a.$parent.IsListView=!0,a.$parent.loadGanttChart(),a.CloseScheduledAppointment()):(a.$router.push({path:"/ServiceAppointment/Index"}),a.$parent.fetchRecords())):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("ServiceAppointment")]),"success",!0,a.$t("Alert")),a.CloseScheduledAppointment(),a.$parent.fetchRecords()),1==a.isAjax&&a.CloseScheduledAppointment()):a.ShowAlert(a.$t("AddedError",[a.$t("ServiceAppointment")]),"failure",!0,a.$t("Alert"))})},openPopupForSetupTickectSource(e){this.$router.push({name:"ViewSADetails",params:{id:e}})}}},r=o,n=(a("2256"),a("2877")),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"3e91":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("Attachment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddAttachment"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchemaData},on:{OnSubmit:e.SaveAttachment}})],1)])])])],1)},s=[],l=(a("b7ef"),a("14d9"),a("9769")),o={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(e){try{var t=this;t.AttachmentfileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),l=a.name;t.AttachmentfileName=l;var o=l.lastIndexOf("."),r=l.substring(o+1,l.length);t.AttachmentfileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;t.AttachmentfileSize=d;var c={attachement_mime:n,fileName:l,id:0==t.id||null==t.id?t.TicketAttachmentId:t.id,moduleName:t.modulename,subModuleCode:t.submodulecode,base64String:s,fileSize:d};t.AttachmentfileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?(this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE,this.FormSchemaData[0].Data[1].config.maxSize=this.allowedPerFileSizeInMb):"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var e=this;e.buttons[0].class+=" disabled";var t=e.disallowFileTypes.split(",");t.includes(e.AttachmentfileExt)?(e.checkFileValidExt=!1,e.ShowAlert(e.$t("InvalidFileUploadMsg",e.fileName,e.disallowFileTypes),"warning",!0,e.$t("Alert")),e.buttons[0].class="btn btn-success"):e.checkFileValidExt=!0;var a=this.SizeToMb(e.AttachmentfileSize);if(a>parseInt(e.allowedPerFileSizeInMb,10)?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert")),e.buttons[0].class="btn btn-success"):e.checkFileValidSize=!0,a<0?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert")),e.buttons[0].class="btn btn-success"):e.checkFileValidSize=!0,1==e.checkFileValidExt&&1==e.checkFileValidSize){var i=JSON.stringify(e.AttachmentfileData);l["a"].UploadFile(i).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.Status?(e.ShowAlert(e.$t("Attachment successfully added"),"success",!0,e.$t("Alert")),e.DisplayName="",e.FileSrc="",$("input[type=text]").val(""),e.$emit("FetchAttachmentData"),e.$parent.noRecord=!1,e.Close(),e.callbackfunction()):(e.FileSrc="",e.buttons[0].class="btn btn-success",$("input[type=text]").val(""))},(function(e){}))}},Close:function(){var e=this;e.FormSchemaData[0].Data[0].value=null,e.AttachmentfileName="",e.Attachmentfile=null,e.AttachmentfileData=null,e.FormSchemaData[0].Data[1].config.onChange=e.GetBase64String,e.$parent.showAttachmentModal=!1,"Attachments"==e.viewMode?document.getElementById("tab-attachment").click():e.$parent.FetchAttachmentData(),e.$parent.noRecord=!1}}},r=o,n=a("2877"),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"4b50":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,"div#video_player_box{width:46%;background:#000;margin:11px;float:left;height:499px;margin-bottom:63px}div#video_controls_bar{background:#333;padding:10px;color:#ccc;position:absolute;bottom:0;width:100%}*{font-family:sans-serif}div#appTitle{position:absolute;top:0;left:0;right:0;width:100%;box-shadow:0 0 5px 1px #000;background-color:rgba(40,40,40,.85);font-weight:700;line-height:45px;border-bottom:1px solid #111;color:#fff}div#appTitle span#appName{padding-left:10px}div#appTitle span.sample{font-weight:400;font-size:smaller;font-style:italic}.axisLine line,.axisLine path{fill:none;stroke:#fff;shape-rendering:crispEdges}.axis{font:10px sans-serif;-webkit-user-select:none;-moz-user-select:none;user-select:none}.axis .domain{fill:none;stroke:#000;stroke-width:10px;stroke-linecap:round}.axis .halo{fill:none;stroke:#ddd;stroke-width:7.5px;stroke-linecap:round}.slider .handle{stroke:#111;stroke-opacity:.5;stroke-width:1.25px;pointer-events:none}.dIntroText{text-anchor:middle;fill:#282828;cursor:pointer}a.dIntroText{font-family:sans-serif;font-size:24px;text-decoration:inherit;color:#000}div#intro div *{font-family:sans-serif;font-size:13px;font-style:italic}.dDataDropZone{height:500px;float:right;margin:10px;border:3px solid #666;width:50%;opacity:1}.dDataDropZone svg{width:100%}.dDataDropZone.dropping{opacity:.3;box-shadow:inset 0 -15px 50px 50px #282828}div#chartGroup{position:absolute;width:720px;margin:0 auto;bottom:0;left:50%}svg.dataChart path.chartLine{fill:none;shape-rendering:auto;stroke:#000;stroke-width:1px}svg.dataChart circle.chartCircle{fill:#de2d26;stroke-width:1;stroke:#000}svg.dataChart text.chartCircleText{font:8pt sans-serif;fill:#de2d26;text-shadow:1px 1px 0 #000,0 1px 0 #000}svg.dataChart g.chartAxis text{font:8pt sans-serif;fill:#555}svg.dataChart g.chartAxis path{display:none}svg.dataChart g.chartAxis line{fill:none;stroke:#555;opacity:.4;shape-rendering:crispEdges}.slidecontainer{width:100%}.slider{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:11px;background:#d3d3d3;outline:none;width:80%;display:block;position:unset;margin-top:6px;margin-left:10px;margin-right:10px;float:left}.slider:hover{opacity:1}.slider:before{display:none!important}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.slider::-moz-range-thumb{width:25px;height:25px;background:#4caf50;cursor:pointer;border-radius:50%}.dDataDropZone{margin:inherit!important;width:65%!important}div#video_player_box{margin:inherit!important;margin-bottom:55px!important;width:35%!important}.map-botton{padding:10px 14px;border-radius:24px;position:absolute;right:0;margin:15px 16px 0 0;bottom:6px;z-index:999}",""]),e.exports=t},5214:function(e,t,a){var i=a("4b50");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("21708364",i,!0,{sourceMap:!1,shadowMode:!1})},"5aef":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".my-popups .modal-dialog[data-v-30937973]{max-width:85%!important}",""]),e.exports=t},6481:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h5",{staticClass:"modal-title"},[e._v(e._s(e.$t("Notes")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("span",{staticClass:"user-guide"},[t("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t("em",{staticClass:"fa fa-files-o pr-2"}),e._v(e._s(e.$t("GuideForUser")))]),t("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("UgAddNotes"))}})])])])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.UploadFileWithNote},scopedSlots:e._u([{key:"tgslot-Description",fn:function({data:a}){return[t("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady,input:function(t){return e.updateCkeditorModel(t,a)}}}),t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(a.error))]),t("input",{directives:[{name:"model",rawName:"v-model",value:a.fieldInfo.value,expression:"data.fieldInfo.value"}],attrs:{type:"hidden"},domProps:{value:a.fieldInfo.value},on:{input:function(t){t.target.composing||e.$set(a.fieldInfo,"value",t.target.value)}}})]}}])})],1)])])])],1)},s=[],l=(a("14d9"),a("b7ef"),a("9769")),o=(a("d91b"),{props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,content:"",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:5e3}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],showSelectedFiles:[],onDeleteSelectedFiles:this.onDeleteSelectedFiles,onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var e=this;if(this.configData(),e.$parent.noteId>0){e.TicketNoteId=e.$parent.noteId,e.ticketId=e.$parent.ticketId,e.FormSchema[0].Data[0].value=e.$parent.note,e.FormSchema[1].Data[0].value="Private"==e.$parent.privacy?1:2;var t={attachmentName:e.$parent.ATTACHMENT_NAME,attachmentPath:e.$parent.ATTACHMENT_PATH};null!=t.attachmentName&&null!=t.attachmentPath&&e.FormSchema[2].Data[0].config.showSelectedFiles.push(t)}},methods:{onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},setFile:function(e){var t=this;t.file=e.target.files[0],t.FileName=e.target.files[0].name},onDeleteSelectedFiles:function(e){this.$delete(this.FormSchema[2].Data[0].config,"showSelectedFiles")},onChangeRadio:function(e,t){var a=this;a.ticketType=e.target.dataset.value},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),l=a.name;t.fileName=l;var o=l.lastIndexOf("."),r=l.substring(o+1,l.length);t.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;t.fileSize=d;var c={attachement_mime:n,fileName:l,base64String:s,fileSize:a.size,contentType:a.type};t.fileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(e,t){var a=this;if(a.buttons[0].class+=" disabled",""==a.FormSchema[0].Data[0].value||null==a.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",[a.fileName,a.disallowFileTypes]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",[a.fileName,a.allowedPerFileSizeInMb]),"warning",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success"):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var o=JSON.stringify(a.ticketModel);l["a"].AddNote(o).then(e=>{try{null!=e.data&&""!=e.data&&"Success"==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.$emit("LoadNoteForQuickView"),a.Close(),a.callbackfunction()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.buttons[0].class="btn btn-success",a.FileSrc="",$("input[type=text]").val(""))}catch(t){return HandleErrorOccured(t,"saveNote")}})}}},updateCkeditorModel:function(e,t){t.fieldInfo.value=e},Close:function(){var e=this;e._data.FormSchema[0].Data[0].value=null,e.FileName=null,e.file=null,e.FormSchema[2].Data[0].config.onChange=e.GetBase64String,this.$emit("Close"),e.$parent.isShowAddNote=!1,e.$parent.noteId=0,"Notes"==e.viewMode?document.getElementById("tab-notes").click():e.$parent.LoadNotesForQuickView(),e.$parent.noRecord=!1}}}),r=o,n=a("2877"),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"69d3":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",attrs:{name:"header"}},[e._v(e._s(e.$t("Search")))]),t("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[t("div",{staticClass:"form-content"},[e.showListData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divshowSearchCriteriaList"}},[e.filterData.length>=10?t("div",{staticClass:"form-group is-invalid"},[t("div",{staticClass:"invalid-feedback alert alert-danger",staticStyle:{display:"block"},attrs:{role:"alert"}},[e._v(" "+e._s(e.$t("NotAddMoreThanTen"))+" "),t("a",{attrs:{href:"javascript:;"}},[t("em",{staticClass:"fa fa-close float-right text-danger"})])])]):e._e(),t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(" "+e._s(e.$t("Filter")))]),e.filterData.length<10?t("small",{staticClass:"float-right"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Add")},on:{click:function(t){e.showListData=!1,e.showAddData=!0,e.filterName="",e.filterId=0,e.conditionText=""}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v(" "+e._s(e.$t("Add"))+" ")])]):e._e()])]),t("div",{staticClass:"listing mt-2"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{"aria-describedby":"serachfilter"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticStyle:{"min-width":"480px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Name")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Edit")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Apply")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[e._l(e.$parent.appliedFilter,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.field_name))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditFilter(a,"NotSaved")}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon",attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyFilter(a.searchCondition)}}},[t("em",{class:{"fa fa-check action-icon":!0,"text-success":e.$parent.searchCondition==a.searchCondition,"text-primary":e.$parent.searchCondition!=a.searchCondition},attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.ClearFilter()}}},[t("em",{staticClass:"fa fa-trash text-danger action-icon",attrs:{"aria-hidden":"true"}})])])])})),e._l(e.filterData,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.FILTER_NAME))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditFilter(a,"")}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon",attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyFilter(a.DATABASE_CONDITION)}}},[t("em",{class:{"fa fa-check action-icon":!0,"text-success":e.$parent.searchCondition==a.DATABASE_CONDITION,"text-primary":e.$parent.searchCondition!=a.DATABASE_CONDITION},attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteFilter(a)}}},[t("em",{staticClass:"fa fa-trash text-danger action-icon",attrs:{"aria-hidden":"true"}})])])])})),null!=e.filterData&&0!=e.filterData.length||void 0!=e.$parent.appliedFilter&&null!=e.$parent.appliedFilter&&(void 0==e.$parent.appliedFilter||0!=e.$parent.appliedFilter.length)?e._e():t("tr",[t("td",{staticClass:"text-center text-danger py-3",attrs:{colspan:"3"}},[e._v(e._s(e.$t("NoRecordfound")))])])],2)])])])]):e._e(),e.showAddData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divManageSearchCriteria"}},[t("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({values:a,meta:i}){return[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 px-0"},[t("div",{staticClass:"form-group mb-0"},[t("label",[e._v(" "+e._s(e.$t("Name"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("Field",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.filterName,expression:"filterName",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":a[0]},attrs:{name:"name",maxlength:"100",type:"text"},domProps:{value:e.filterName},on:{input:function(t){t.target.composing||(e.filterName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"name"}},[e._v(e._s(a[0]))]):e._e()]}}],null,!0)})],1)]),t("div",{staticClass:"listing mt-2 below768 p-0"},[t("div",{staticClass:"table-responsive overflow-visible"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{"aria-describedby":"search-filter-table"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticStyle:{"min-width":"110px","max-width":"110px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("fieldName")))])]),t("th",{staticStyle:{"min-width":"160px","max-width":"110px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("ConditionalOperator")))])]),t("th",{staticStyle:{"min-width":"350px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Value")))])]),t("th",{staticClass:"text-center",attrs:{scope:"col"}},[t("a",{staticClass:"text-success",attrs:{href:"javascript:void(0)"},on:{click:e.AddSearchData}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v(" "+e._s(e.$t("Add"))+" ")])])])]),t("tbody",e._l(e.filterItemData,(function(a,i){return t("tr",{key:i},[t("td",[t("Field",{attrs:{name:"field_name"+(i+1),rules:{required:!0},label:"Field Name"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.field_name,expression:"item.field_name"}],class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"field_name"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"field_name",t.target.multiple?i:i[0])},function(t){return e.GetOperatorData(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.fieldNameData,(function(a,i){return t("option",{key:i,domProps:{value:String(a.custom_field_id)}},[e._v(" "+e._s(e.GetFieldDisplayName(a.label,a.display_name)))])}))],2)]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"operator"+(i+1),rules:{required:!0},label:"operator"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.operator,expression:"item.operator"}],class:{"form-control":!0,disableAria:!0,"is-invalid":s[0]},attrs:{name:"operator"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"operator",t.target.multiple?i:i[0])},function(t){return e.ShowFieldValue(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.operator_list,(function(a,i){return t("option",{key:i,domProps:{value:String(a.OPERATOR_ID)}},[e._v(" "+e._s(a.OPERATOR_DISPLAY_NAME))])}))],2)]}}],null,!0)})],1),t("td",{staticClass:"overflow-visible"},["date"==a.dt_code||"datetime"==a.dt_code?t("div",{class:{"col-5 p-0 float-left pr-1":"between"==a.operator_expression}},[t("Field",{attrs:{name:"date"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return["date"==a.dt_code||"datetime"==a.dt_code?t("v-date-picker",{staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"date"+a.label+i,value:e.$options.filters.formatDate(a.value)},on:{dayclick:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e()]}}],null,!0)})],1):e._e(),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(" "+e._s(e.$t("And","And")))]),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{class:{"input-group":!0,"col-5 p-0 float-left":"between"==a.operator_expression}},[t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return["date"==a.dt_code||"datetime"==a.dt_code?t("v-date-picker",{ref:"SecondDatePicker",refInFor:!0,staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"second"+a.label+i},on:{dayclick:function(t){return e.SetValues(t,a,"second")}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.second_value,callback:function(t){e.$set(a,"second_value",t)},expression:"item.second_value"}}):e._e()]}}],null,!0)})],1),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code?t("Field",{attrs:{name:a.label+i,rules:{required:a.is_required},label:"Value"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{id:a.label+i,name:a.label+i,type:"text"},domProps:{value:a.value},on:{input:[function(t){t.target.composing||e.$set(a,"value",t.target.value)},function(t){return e.SetValues(t,a)}]}})]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(e._s(e.$t("And","And"))+" ")]):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:"second"+a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.second_value,expression:"item.second_value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{type:"text",id:a.label,name:"second"+a.label+i},domProps:{value:a.second_value},on:{input:[function(t){t.target.composing||e.$set(a,"second_value",t.target.value)},function(t){return e.SetValues(t,a,"second")}]}})]}}],null,!0)}):e._e(),"textarea"==a.dt_code?t("Field",{attrs:{name:"textarea"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==a.dt_code&&i[0]},attrs:{id:a.label},domProps:{value:a.value},on:{change:function(t){return e.SetValues(t,a)},input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})]}}],null,!0)}):e._e(),"radio"==a.dt_code?t("div",{staticClass:"form-control pl-4 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"form-check form-check-inline custom-control mx-4 pl-2 custom-radio",attrs:{key:i.name}},[t("Field",{attrs:{name:"rdo_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+a.custom_field_id+i.value,name:"rdo_"+a.custom_field_id+i.value,"data-resource":i.name,type:"radio"},domProps:{value:i.value,checked:i.value==a.value,checked:e._q(a.value,i.value)},on:{change:[function(t){return e.$set(a,"value",i.value)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-0 pt-0 dynamic",attrs:{for:"rdo_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"checkbox"==a.dt_code?t("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"custom-control custom-checkbox"},[t("Field",{attrs:{name:"chk_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select_value,expression:"item.select_value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+a.custom_field_id+i.value,name:"chk_"+a.custom_field_id+i.value,"data-resource-id":i.name,type:"checkbox"},domProps:{value:i.value,checked:Array.isArray(a.select_value)?e._i(a.select_value,i.value)>-1:a.select_value},on:{change:[function(t){var s=a.select_value,l=t.target,o=!!l.checked;if(Array.isArray(s)){var r=i.value,n=e._i(s,r);l.checked?n<0&&e.$set(a,"select_value",s.concat([r])):n>-1&&e.$set(a,"select_value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"select_value",o)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"Lookup"!=a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&s[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,name:"Multiselect"+a.label+i,placeholder:"Search a value",value:a.value,"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:"normal"==a.dropdown_type?e.MakeNormalArray(a.select_options):a.select_options,object:!0,label:"name",showNoOptions:!0},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)}},model:{value:a.select_value,callback:function(t){e.$set(a,"select_value",t)},expression:"item.select_value"}},[t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(" Type to search "+e._s(e.$t(a.label,a.display_name))+" ")])])]}}],null,!0)}),"Lookup"==a.picklist_options&&"select"==a.dt_code&&"normal"==a.dropdown_type&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select"+a.label+i,rules:{required:a.is_required}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select"+a.label+i},on:{change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeNormalArray(a.select_options),(function(a,i){return t("option",{key:i,domProps:{value:a.value}},[e._v(e._s(a.name))])}))],2)]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),"Lookup"!=a.picklist_options&&"select"==a.dt_code&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select2"+a.label+i,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select2"+a.label+i},on:{change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i){return null!=a.picklist_options?t("option",{domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name)+" ")]):e._e()}))],2)]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),"Lookup"==a.picklist_options||null==a.picklist_options||"select"!=a.dt_code||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?e._e():t("Field",{attrs:{name:"Multiselect2"+a.label+i,rules:{required:a.is_required},label:"name"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&i[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,taggable:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,placeholder:"Search a value",showNoOptions:!0,"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:e.MakeArray(a.picklist_options,a.dt_code),object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)}},model:{value:a.select_value,callback:function(t){e.$set(a,"select_value",t)},expression:"item.select_value"}},[t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(" Type to search "+e._s(e.$t(a.label,a.display_name))+" ")])])]}}],null,!0)})],1),t("td",{staticClass:"text-center single-action"},[0!=i?t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteSearchItem(a,i)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})]):e._e()])])})),0)])])]),e.isBlank(e.condition)?e._e():t("div",{staticClass:"col-12 float-left p-0 mt-2"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(e._s(e.$t("Condition"))+":")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.condition))])])]),t("div",{staticClass:"col-12 float-left p-0 mt-2 d-none"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(" Database Condition: ")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.databaseCondition))])])])])])]),t("div",{staticClass:"modal-footer text-right pr-0 pb-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[t("a",{class:{"btn btn-success mr-2":!0},attrs:{href:"javascript:;",title:e.$t("SaveAndSearch")},on:{click:function(t){return e.SubmitData("save",a,i)}}},[t("em",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("SaveAndSearch"))+" ")]),t("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;",title:e.$t("Search")},on:{click:function(t){return e.SubmitData("search",a,i)}}},[t("em",{staticClass:"fa fa-search pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Search"))+" ")]),t("a",{staticClass:"btn btn-primary delete-btn",attrs:{href:"javascript:;",title:e.$t("Cancel")},on:{click:function(t){e.showListData=!0,e.showAddData=!1,e.filterItemData=[],e.GetSearchFilterItemData()}}},[t("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])]}}],null,!1,2574438230)})],1):e._e()])])])])])])])])])},s=[],l=(a("14d9"),a("9769")),o={props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function}},data:function(){return{filterData:[],showListData:!0,showAddData:!1,filterItemData:[],fieldNameData:[],options:null,submited:!1,databaseCondition:"",condition:"",filterName:"",validationForName:"",filterId:0,isDefault:!1,FormatForSecond:"",isFirstTime:!1,exitstingFilterNameArray:[],ApiURL:"",BaseUrl:"",ImageVal:"Image",popover:{visibility:"click"},masks:{input:"MM-DD-YYYY",CompanyType:""}}},created:async function(){await this.IsExtraMapFeature(),await this.GetSearchFilterData(),await this.GetSearchFilterItemData(),await this.GetFieldNameData()},methods:{IsExtraMapFeature:function(){var e=this;l["a"].IsExtraMapFeature().then((function(t){e.CompanyType="",null!=t.data&&""!=t.data?e.CompanyType=t.data:e.CompanyType="normal"}))},MakeArray:function(e,t){var a=[],i=String(e).split(",");if("radio"==t||"checkbox"==t){if(i.length>0)for(var s of i)if(s.split("|").length>1){var l={name:s.split("|")[0],value:s.split("|")[1]};a.push(l)}else{l={name:s,value:s};a.push(l)}}else if(i.length>0)for(var s of i){l={name:s,value:s.trim()};a.push(l)}return a},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e));return a!=String(e)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t));return a!=String(t)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(i){console.log(i)}},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},isBlank:function(e){return!e||/^\s*$/.test(e)},returnDateObject:function(e){var t=null;return e=void 0==e?"":e,""!=e&&(t=new Date(Date.parse(e))),{format:String(Globalize.culture().calendar.patterns.d).toUpperCase(),useStrict:!0,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:t,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},GetValidationF:function(e){var t=this;if(null!=t.filterName&&""!=t.filterName&&!t.submited)return this.$validator.reset(),e;var a={};return e.is_required&&(a["required"]=!0),e.length>0&&("textarea"==e.dt_code?a["max"]=200:a["max"]=e.length),"email"==e.validation_type&&(a["email"]=!0),"date"!=e.dt_code&&"datetime"!=e.dt_code||(a["date_format"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"decimal"==e.dt_code&&(a["decimal"]=2),"int"!=e.dt_code&&"bigint"!=e.dt_code||(a["numeric"]=!0),"url"==e.dt_code&&(a["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(a["regex"]=e.regular_expression),t.submited=!1,a},onSearch:function(e,t){this.searchSelectData(e,this,t)},searchSelectData:function(e,t,a){this.ShowSearchData(e,t,a)},ShowSearchData:function(e,t,a,i){"undefined"==typeof i&&(i=0);var s="id=&moduleName="+t.modulename+"&type="+a.field_code;"fill"==a.dependent_type&&(s+="&refId="+i),l["a"].getDDLDataCrm(s+"&search="+escape(e)).then(e=>{var t=[];return e.data,""!=e.data&&(t=e.data),a.select_options=t.DATA})},setSelectedValue:function(e,t){var a=this;try{setTimeout(()=>{e.value=e.select_value,a.SetCondition()},100)}catch(i){}},AddSearchData:function(){this.GetSearchFilterItemData()},DeleteSearchItem:function(e,t){var a=this,i=a.$t("ConfirmDelete");a.confirmR(i,!0,null,(function(){a.filterItemData.splice(t,1),a.SetCondition()}))},GetSearchFilterData:async function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.filterData=[],await l["a"].SearchCriteriaListingCrm(t).then((function(t){var a=t.data;null!=a&&(e.filterData=a.DATA)}))},GetFieldNameData:async function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.fieldNameData=[],await l["a"].GetFieldNameCrm(t).then((function(t){var a=t.data;if(null!=a){if("nonlocating"!=e.CompanyType)return e.fieldNameData=a.DATA.length>0?a.DATA:void 0;a.DATA.forEach((t,i)=>{if("parent_sub_status_id"==t.label||"sub_status_id"==t.label)return a.DATA.splice(i,1),e.fieldNameData=a.DATA})}}))},GetOperatorData:async function(e,t,a){var i=this,s=e.target.value,o=$.grep(this.fieldNameData,(function(e,t){return e.custom_field_id==s})),r="";if(t.dt_code="",t.picklist_options=[],t.label="",t.dropdown_type="",t.select_options="",t.select_value="",t.length=0,t.operator="",t.field_code="",t.second_value="",t.display_name="",t.is_required=!0,o.length>0){if(r=o[0].sql_type,t.dt_code=o[0].dt_code,t.picklist_options=o[0].picklist_options,t.label=o[0].label,t.dropdown_type=o[0].dropdown_type,"normal"==o[0].dropdown_type&&"Lookup"==o[0].picklist_options&&"EVENT.event_reminder_id"==o[0].name){var n=i.MakeNormalArray(o[0].select_options);$.each(n,(function(e,t){n[e].name=i.$t(t.name)})),t.select_options=n}else t.select_options=o[0].select_options;t.length=o[0].length,t.display_name=o[0].display_name,t.field_code=o[0].field_code,t.is_required=o[0].is_required,t.validation_type=o[0].validation_type}var d="dataType="+r+"&customField="+s;t.operator_list=[],await l["a"].GetOperatorCrm(d).then((function(e){var a=e.data;if(null!=a)return t.operator_list=a.DATA})),t.field_name=s,t.value="",this.SetCondition()},SetValues:function(e,t,a){if("date"==t.dt_code||"datetime"==t.dt_code||"decimal"==t.dt_code){var i=/^(\+|-)?(\d*\.?\d*)$/;if(i.test(t.value)||"decimal"!=t.dt_code||(t.value=""),i.test(t.second_value)||"decimal"!=t.dt_code||(t.second_value=""),"second"==a){var s=t.second_value?this.$options.filters.formatDate(t.second_value):t.second_value;t.second_value=s}else if("decimal"==t.dt_code){s=t.value;t.value=s,t.second_value=s}else if("FSM_WORKORDER"==this.submodulecode||"SA_Scheduled_StartTime"!=t.label&&"SA_Scheduled_EndTime"!=t.label&&"SA_Actual_StartTime"!=t.label&&"SA_Actual_EndTime"!=t.label&&"ArrivalWindowStartTime"!=t.label&&"ArrivalWindowEndTime"!=t.label){s=t.value?this.$options.filters.formatDate(t.value):t.value;t.value=s,t.second_value=s}else{var s=t.value?this.$options.filters.formatDatee(t.value):t.value;t.value=s,t.second_value=s}}else"second"==a?t.second_value=e.target.value:e.target.value&&(t.value=e.target.value);this.SetCondition()},SetCondition:function(){var e=this,t="",a="",i="";$.each(e.filterItemData,(function(s,l){s>0&&(t+=" And ",a+=" and ");var o=l.field_name,r=$.grep(e.fieldNameData,(function(e,t){return e.custom_field_id==o}));if("undefined"!=typeof r&&r.length>0)if(t+=e.GetLocalizedValue(r[0].label,r[0].display_name),"date"==r[0].dt_code||"datetime"==r[0].dt_code)if("datetimeoffset"==r[0].actual_data_type){var n="'+00:00'";a+=`convert(date, replace(${r[0].name}, ${n}, ''), 23)`}else a+="convert(date, "+r[0].name+", 23)";else a+=""+r[0].name.trimEnd();var d=l.operator;if(r=$.grep(l.operator_list,(function(e,t){return e.OPERATOR_ID==d})),"undefined"!=typeof r&&r.length>0&&(t=t+" "+r[0].OPERATOR_DISPLAY_NAME,i=r[0].OPERATOR_EXPRESSION,a+=" "+i),!e.isBlank(l.value)){var c=l.value,u=l.value;if("select"==l.dt_code&&"normal"==l.dropdown_type&&"IN"!=i&&"NOT IN"!=i){var p=e.MakeNormalArray(l.select_options);r=$.grep(p,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(c=r[0].name)}else if("select"==l.dt_code&&"custom"==l.dropdown_type||"select"==l.dt_code&&"normal"==l.dropdown_type&&("IN"==i||"NOT IN"==i))Array.isArray(l.value)?(u=e.createString(l.value,"value"),c=e.createString(l.value,"name")):(u=l.value.value?l.value.value:l.value,c=l.value.name),"IN"!=i&&"NOT IN"!=i||(u="("+u+")");else if("select"==l.dt_code&&"custom"!=l.dropdown_type&&"normal"!=l.dropdown_type)if("IN"==i||"NOT IN"==i)Array.isArray(l.value)?(u=e.createString(l.value,"value"),c=e.createString(l.value,"name")):(u=l.value.value,c=l.value.name),u="("+u+")";else{p=e.MakeArray(l.picklist_options,l.dt_code);r=$.grep(p,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(c=r[0].name),u=" '"+u+"'"}else if("date"==l.dt_code)"between"==i?(c=l.value+" And "+l.second_value,u="'"+l.value+"' and '"+l.second_value+"'"):(c=l.value,u="'"+l.value+"'");else if("radio"==l.dt_code){p=e.MakeArray(l.picklist_options,l.dt_code);r=$.grep(p,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(c=r[0].name,u="'"+r[0].value+"'")}else if("Like"==i||"Not Like"==i)u="'%"+l.value+"%'";else if("Starts With"==i)u="'"+l.value+"%'",a=a.replcae("Starts With","like");else if("Ends With"==i)u="'%"+l.value+"'",a=a.replcae("Ends With","like");else if("between"==i)c=l.value+" And "+l.second_value,u="'"+l.value+"' and '"+l.second_value+"'";else if("IN"==i||"NOT IN"==i){for(var m=String(l.value).split(","),f="",h=0;h<m.length;h++)h>0&&(f+=" , "),f+="'"+m[h]+"'";u="("+f+")"}else u="'"+u+"'";"select"==l.dt_code&&"normal"==l.dropdown_type&&"event_location"==l.label?a+=" '"+u+"'":"select"==l.dt_code&&"normal"==l.dropdown_type&&"forecast_category_name"==l.label?a+=i.indexOf("IN")>-1?" ("+c+")":" '"+c+"'":"select"==l.dt_code&&"normal"==l.dropdown_type&&"display_icon"==l.label||"select"==l.dt_code&&"normal"==l.dropdown_type&&"contract_currency"==l.label?a+=i.indexOf("IN")>-1?" "+u:" '"+u+"'":a+=" "+u,t=t+" "+c}})),this.condition=t,this.databaseCondition=a},ShowFieldValue:function(e,t,a){var i=e.target.value,s=$.grep(t.operator_list,(function(e,t){return e.OPERATOR_ID==i})),l="";s.length>0&&(l=s[0].OPERATOR_EXPRESSION),t.showSecondValue="between"==l,t.operator=i,t.value="",t.select_value=[],t.operator_expression=l,this.SetCondition()},GetSearchFilterItemData:async function(){var e={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:[],first_value:"",second_value:"",showSecondValue:!1,picklist_options:[],label:"",display_name:"",dropdown_type:"",select_options:"",length:0,field_code:"",select_value:"",is_required:!0};this.filterItemData.push(e)},ApplyFilter:function(e){this.databaseCondition=e,this.$parent.searchCondition=this.databaseCondition,"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?(this.$emit("FilterData",1,10,"","",this.databaseCondition,this.filterItemData),this.$parent.appliedFilter=[],this.callbackfunction()):(this.$parent.PageSize=10,this.$parent.fetchRecords()),this.$emit("close")},EditFilter:function(e,t){this.showListData=!1,this.showAddData=!0,"NotSaved"!=t?(this.filterId=e.FILTER_ID,this.EditSearchFilterData(this.filterId)):(this.filterName=this.$parent.appliedFilter[0].field_name.split("(")[0],this.filterItemData=this.$parent.appliedFilter[0],this.SetCondition())},deleteFilter:function(e){this.filterId=e.FILTER_ID;var t=this;t.confirmR(t.$t("ConfirmDeleteFilter"),!0,null,(function(){var a="id="+e.FILTER_ID+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&isDelete=1";l["a"].SearchCriteriaByIdCrm(a).then((function(a){var i=a.data;null!=i&&"SUCCESS"==i.MSG&&(t.GetSearchFilterData(),e.DATABASE_CONDITION==t.$parent.searchCondition&&(t.$parent.searchCondition="","undefined"!=typeof t.callbackfunction&&null!=t.callbackfunction?t.callbackfunction():t.$parent.fetchRecords()),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Filter")]),"success",!0,t.$t("Alert")))}))}))},checkEncodeURI(e){return/\%/i.test(e)},EditSearchFilterData:function(e){var t=this,a="id="+e+"&moduleName="+this.modulename+"&subModuleCode="+this.submodulecode;t.filterItemData=[],l["a"].SearchCriteriaByIdCrm(a).then((function(a){var i=a.data;if(null!=i){var s=i.DATA,l=$.grep(s,(function(t,a){return t.FILTER_ID==e})),o=t.checkEncodeURI(l[0].DATABASE_CONDITION);t.databaseCondition=o?decodeURIComponent(l[0].DATABASE_CONDITION):l[0].DATABASE_CONDITION,t.filterName=l[0].FILTER_NAME,t.condition=l[0].FILTER_CONDITION,t.isDefault=l[0].IS_DEFAULT,$.each(s,(function(e,a){var i=a.FIRST_VALUE,s=a.SECOND_VALUE;"date"==a.DT_CODE&&a.OPERATOR_EXPRESSION;var l=[];if("select"!=a.DT_CODE||"normal"!=a.DROPDOWN_TYPE&&(null!=a.DROPDOWN_TYPE||"Lookup"==a.PICKLIST_OPTIONS)||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION)l="Lookup"==a.PICKLIST_OPTIONS||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION?t.MakeNormalArray(a.SELECT_OPTIONS):t.MakeArray(i.replcae(/'/g,""),a.dt_code);else{var o=t.MakeArray(i.replcae(/'/g,""),a.dt_code);$.each(o,(function(e,i){if(-1==a.SELECT_OPTIONS.indexOf("[{")&&a.SELECT_OPTIONS.length>0){var s=a.SELECT_OPTIONS.split(","),o=[],r=[];$.each(s,(function(e,t){var a={name:t,value:t};o.push(a)})),r=o.filter((function(e){return e.value==i.value}))}else r=t.MakeNormalArray(a.SELECT_OPTIONS).filter((function(e){return e.value==i.value}));r.length>0&&l.push(r[0])}))}var r={field_name:a.FIELD_ID,dt_code:a.DT_CODE,operator:a.OPERATOR_ID,operator_expression:a.OPERATOR_EXPRESSION,operator_list:t.MakeNormalArray(a.OPERATOR_LIST),value:i,second_value:s,showSecondValue:!t.isBlank(a.SECOND_VALUE),picklist_options:a.PICKLIST_OPTIONS,label:a.LABEL,dropdown_type:a.DROPDOWN_TYPE,select_options:"Lookup"==a.PICKLIST_OPTIONS||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION?t.MakeNormalArray(a.SELECT_OPTIONS):a.SELECT_OPTIONS,length:a.LENGTH,field_code:a.FIELD_CODE,select_value:l,is_required:a.IS_REQUIRED};t.filterItemData.push(r)}))}}))},ClearFilter:function(){this.$parent.appliedFilter[0].searchCondition==this.$parent.searchCondition&&(this.$parent.searchCondition="","undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():this.$parent.fetchRecords()),this.$parent.appliedFilter=[]},SubmitData:function(e,t,a){var i=this;i.submited=!0,i.$refs.form.validate().then(a=>{for(var s in console.log(this.$refs.form.errors),a.errors){var o=document.getElementsByName(s);t[s]||0==o.length?delete a.errors[s]:t.hasOwnProperty(s)||delete a.errors[s]}if(a)if("search"==e)i.$parent.searchcondition=i.databaseCondition,""==i.filterName?i.filterItemData.field_name="New Created Filter(Not Saved)":i.filterItemData.field_name=i.filterName+"(Not Saved)",i.filterItemData.searchCondition=i.databaseCondition,i.$parent.appliedFilter=[],i.$parent.PageNumber=1,i.$parent.PageSize=10,i.$parent.SortBy="",i.$parent.SortExp="","undefined"!=typeof i.callbackfunction&&null!=i.callbackfunction?i.$emit("FilterData",1,10,"","",i.databaseCondition,i.filterItemData):i.$parent.fetchRecords(),i.$emit("close");else{var r=[];if(0==i.filterId&&(r=$.grep(i.filterData,(function(e,t){return e.FILTER_NAME==$.trim(i.filterName)}))),0==r.length){i.$parent.appliedFilter=[];var n=i.filterItemData,d=[];$.each(n,(function(e,t){var a=t.value,s=t.second_value;("select"==t.dt_code&&"custom"==t.dropdown_type||"select"==t.dt_code&&"Lookup"!=t.picklist_options&&("IN"==t.operator_expression||"NOT IN"==t.operator_expression)||"select"==t.dt_code&&"normal"==t.dropdown_type&&("IN"==t.operator_expression||"NOT IN"==t.operator_expression))&&(a=Array.isArray(t.value)?i.createString(t.value,"value"):t.value.value?t.value.value:t.value),"date"==t.dt_code&&!i.isBlank(s)&&t.operator_expression;var l={fieldId:t.field_name,operatorId:t.operator,firstValue:a,secondValue:s};d.push(l)}));var c={filterId:i.filterId,filterName:i.filterName,condition:i.condition,databaseCondition:i.databaseCondition,isDefault:i.isDefault,moduleName:i.modulename,subModuleCode:i.submodulecode,data:d},u=JSON.stringify(c);l["a"].SaveFilterCrm(u).then((function(e){i.$parent.PageNumber=1,i.$parent.PageSize=10,i.$parent.SortBy="",i.$parent.SortExp="",i.$parent.searchCondition=i.databaseCondition,"undefined"!=typeof i.callbackfunction&&null!=i.callbackfunction?(i.$emit("FilterData",1,10,"","",i.databaseCondition,null),i.$parent.appliedFilter=[]):i.$parent.fetchRecords(),i.$emit("close")}))}else this.ShowAlert(this.$t("FilterNameAlreadyExist"))}})}}},r=o,n=a("2877"),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"6c0e":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("ServiceAppointment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.Close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body",staticStyle:{"max-height":"70vh",overflow:"auto"}},[t("Form",{ref:"AddService"},[t("dynamic-form",{ref:"AddTicketForm",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.OnSubmit}})],1),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"py-2"},[t("small",{staticClass:"text-danger"},[e._v(e._s(e.$t("MandatoryString")))])])])])],1)])])])],1)},s=[],l=(a("14d9"),a("9769")),o={props:{SchduleObj:{Type:Object,required:!0},callfrom:{Type:String,required:!0}},data(){return{isLoading:!1,WorkOrderListData:[],StaticObj:{layoutType:"double",Data:[{astype:"MultiSelectField",label:this.$t("ServiceResource"),name:"ServiceResource",value:"",mode:"tag",placeholder:"",validationRules:{required:!1},config:{options:[]}},{astype:"MultiSelectField",label:this.$t("Service Crew"),name:"ServiceCrew",value:"",mode:"tag",placeholder:"",validationRules:{required:!1},config:{options:[]}}]},FormSchema:[],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],resourceList:[],crewList:[],SAData:[],isFsmLocating:"",SAFormSchema:[],StatusId:"1001",StatusData:[],DurationData:[],Id:0,ServiceAppointmentList:[],JsonObj:[],TicketNumber:""}},created:async function(){null!=this.SchduleObj?("ServiceAppointment"==this.callfrom?this.TicketNumber=this.SchduleObj.SA_Related_Object_Id:this.TicketNumber=this.SchduleObj.ticket_number,this.Id=this.SchduleObj.SA_Id,await this.getForm(),await this.getResourceCrewData(null==this.Id?0:this.Id)):await this.getForm(),await this.getResourceList(),await this.getcrewList()},methods:{Close(){this.$parent.showPopupAddServiceAppointment=!1},getResourceCrewData:async function(e){var t,a,i=this,s=[],o=[],r="SA_ID="+e;await l["a"].getResourceCrewData(r).then(e=>{$.each(e.data.result.data,(function(i,s){t=$.grep(e.data.result.data,(function(e,t){return"RESOURCE"==e.ResourceType})),a=$.grep(e.data.result.data,(function(e,t){return"CREW"==e.ResourceType}))})),void 0!=t&&t.forEach(e=>{let t={label:e.name,value:e.value};s.push(t),i.FormSchema[2].Data[0].value=s}),void 0!=a&&a.forEach(e=>{let t={label:e.name,value:e.value};o.push(t),i.FormSchema[2].Data[1].value=o})})},getResourceList:async function(){var e="moduleName=Ticketing&type=FSM_SA_RESOURCENAME&refId=";await l["a"].GetDDLData(e).then(e=>{this.resourceList=e.data.DATA,this.resourceList.forEach(e=>{let t={name:e.name,value:e.value};this.FormSchema[2].Data[0].config.options.push(t)})})},getcrewList:async function(){var e="moduleName=Ticketing&type=FSM_CREWNAME&refId=";await l["a"].GetDDLData(e).then(e=>{this.crewList=e.data.DATA,this.crewList.forEach(e=>{let t={name:e.name,value:e.value};this.FormSchema[2].Data[1].config.options.push(t)})})},async getForm(){var e=this;e.isLoading=!0;var t=null==e.Id?0:e.Id,a=`recordId=${t}&moduleName=Ticketing&subModuleCode=SERVICE_APPOINTMENT`;await l["a"].GetDynamicForm(a).then(t=>{e.isLoading=!1,e.FormSchema=e.$refs.AddTicketForm.ConvertCustomFieldIntoDynamicFormObj(t.data.data),e.FormSchema.forEach((t,a)=>{t.Data.forEach((a,i)=>{if("General Information"==t.group_name){if("SA_Description"==a.name&&(a.astype="TextAreaField"),"SA_Status"==a.name&&""==a.value&&(a.value="1001"),"WorkOrder"==e.callfrom){if("SA_Related_Object_Id"==a.name){const t=a.config.options.filter(t=>t.value==e.SchduleObj.ticket_id);t.length>0&&(a.value={value:t[0].value,label:t[0].name}),a.disabled=!0,a.config.onSearchChange=e.onSearch}"SA_WorkOrder_Id"==a.name&&(a.value=e.SchduleObj.id,a.disabled=!0)}if("ServiceAppointment"==e.callfrom&&"SA_Related_Object_Id"==a.name){const t=a.config.options.filter(e=>e.value==a.value);t.length>0&&(a.value={value:t[0].value,label:t[0].name}),a.config.onSearchChange=e.onSearch}}"Scheduled Times"==t.group_name?"ArrivalWindowStartTime"!=a.name&&"ArrivalWindowEndTime"!=a.name&&"SA_Scheduled_StartTime"!=a.name&&"SA_Scheduled_EndTime"!=a.name||(a.astype="DateField",a.config={mode:"DateTime",format:"MM/DD/YYYY h:mm A"}):"ArrivalWindowStartTime"==a.name||"SA_Scheduled_StartTime"==a.name?(a.config={mode:"DateTime",format:"MM/DD/YYYY h:mm A"},a.config.onChange=e.GetStartData):"ArrivalWindowEndTime"!=a.name&&"SA_Scheduled_EndTime"!=a.name||(a.config={mode:"DateTime",format:"MM/DD/YYYY h:mm A"},a.config.minDate=""),a.config.onChange=e.onChangeEventForFields})}),e.FormSchema.push(e.StaticObj)})},GetStartData:function(e,t){},onChangeEventForFields:function(e,t,a){var i=this;"SA_Related_Object_Id"==t.name&&setTimeout((function(){i.GetDropDownData("SA_TICKET_WORKORDERS",t,null)}),1e3)},GetDropDownData:function(e,t,a){var i=this,s=`id=&moduleName=TICKETING&type=${e}&search=&refId=${"undefined"===typeof t.value.value?"":t.value.value}`;l["a"].GetDDLData(s).then(e=>{i.FormSchema[0].Data[2].config.options=[],""!=e.data&&e.data.DATA.forEach(e=>{let t={value:e.value,name:e.name};i.FormSchema[0].Data[2].config.options.push(t)})})},onSearch:function(e,t,a){var i=this;i.searchSelectData(a,i,t)},searchSelectData:function(e,t,a){this.ShowSearchData(e,t,a)},ShowSearchData:async function(e,t,a){var i=this,s=`id=&&moduleName=Ticketing&type=SA_TICKET_NUMBER&search=${e}&refId=`;"undefined"==typeof a&&(a=0),i.FormSchema[0].Data[1].config.options=[],await l["a"].GetDDLDataFSM(s).then((function(e){e.data&&(i.JsonObj=e.data,null!=i.JsonObj&&e.data.result.DATA.forEach(e=>{var t={value:e.value,name:e.name};i.FormSchema[0].Data[1].config.options.push(t)}))}))},OnSubmit(e){var t=this;t.isLoading=!0;var a=t.$refs.AddTicketForm.ConvertDynamicFormObjToCustomFieldObj(t.FormSchema),i="",s="",o="";a.forEach(e=>{"SA_WorkOrder_Id"==e.field_name&&(t.isBlank(e.field_value)||(o=e.field_value)),"SA_Id"==e.field_name&&(t.id,e.field_value=e.field_value),"SA_Related_Object_Id"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=e.field_value.value)),"ArrivalWindowStartTime"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=t.$options.filters.formatDateTime(e.field_value))),"ArrivalWindowEndTime"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=t.$options.filters.formatDateTime(e.field_value))),"SA_Scheduled_StartTime"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=t.$options.filters.formatDateTime(e.field_value))),"SA_Scheduled_EndTime"==e.field_name&&(t.isBlank(e.field_value)||(e.field_value=t.$options.filters.formatDateTime(e.field_value)))}),e.ServiceResource.forEach((e,t)=>{0==t?s=e.value:s+=","+e.value});var r=s;e.ServiceCrew.forEach((e,t)=>{0==t?i=e.value:i+=","+e.value});var n=i,d={data:a,serviceResourceId:r,serviceCrewId:n},c=JSON.stringify(d);if(null!=o||""!=o){var u=`Id=${o}&SA_Id=${null==t.Id?0:t.Id}&reqfrom=AddServiceAppointment`;l["a"].GetServiceAppointmentByWorkOrderId(u).then(e=>{if(t.ServiceAppointmentList=[],t.isLoading=!1,null!=e.data&&""!=e.data&&"Success"==e.data.status){t.ServiceAppointmentList=e.data.result.DATA;var a="";if($.each(t.ServiceAppointmentList,(function(e,t){a+=t.SA_NUMBER+","})),""!=a){var i=t.$t("ServiceAppointmentCancel")+"("+a+")"+t.$t("ConfirmServiceAppointmentCancel");t.confirmR(i,!0,null,(function(){l["a"].AddEditServiceAppointment(c).then(e=>{1==e.data.CODE?t.Id>0?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("ServiceAppointment")]),"success",!0,t.$t("Alert")),t.Close(),t.$parent.fetchRecords()):(t.ShowAlert(t.$t("AddedSuccess",[t.$t("ServiceAppointment")]),"success",!0,t.$t("Alert")),t.Close(),t.$parent.fetchRecords()):t.ShowAlert(t.$t("AddedError",[t.$t("ServiceAppointment")]),"failure",!0,t.$t("Alert")),t.isLoading=!1})}))}else l["a"].AddEditServiceAppointment(c).then(e=>{1==e.data.CODE?t.Id>0?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("ServiceAppointment")]),"success",!0,t.$t("Alert")),t.Close(),t.$parent.fetchRecords()):(t.ShowAlert(t.$t("AddedSuccess",[t.$t("ServiceAppointment")]),"success",!0,t.$t("Alert")),t.Close(),t.$parent.fetchRecords()):t.ShowAlert(t.$t("AddedError",[t.$t("ServiceAppointment")]),"failure",!0,t.$t("Alert")),t.isLoading=!1})}})}}}},r=o,n=a("2877"),d=Object(n["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"82dd":function(e,t,a){var i=a("334f");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("3922cfc3",i,!0,{sourceMap:!1,shadowMode:!1})},"87de":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalManageView",role:"dialog"}},[t("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageView")))]),t("span",{staticClass:"user-guide"},[e.ShowLisiting?e._e():t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:void(0)",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},on:{click:function(t){return e.ShowUserGuide()}}},[e._v("User Guide")]),t("div",{class:"divancuserguide collapse"+e.toggleUserGuide,attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("MangeViewUG1"))}})])])])]),t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.ShowLisiting?t("div",{staticClass:"w-100 float-left"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("ManageView")))]),t("small",{staticClass:"float-right"},[t("a",{attrs:{href:"javascript:;",title:e.$t("AddNew")},on:{click:function(t){return e.AddNewView()}}},[t("em",{staticClass:"fa fa-plus pr-1"}),e._v(" "+e._s(e.$t("AddNew"))+" ")]),t("a",{class:{disabled:e.isClearViewDisabled},attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearView()}}},[t("em",{staticClass:"fa fa-refresh pr-1 ml-3"}),e._v(" "+e._s(e.$t("Clear"))+" ")])])])]),t("div",{staticClass:"listing mt-3"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-describedby":"viewlayout"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Name")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Apply")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Edit")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Delete")))])])]),t("tbody",[e._l(e.ListingData,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.VIEW_NAME))]),t("td",{staticClass:"text-center single-action"},[0==a.IS_SLECTED_USER_ID?t("a",{attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyView(a.VIEW_ID,a.VIEW_NAME)}}},[t("em",{staticClass:"fa fa-check text-info"})]):e._e(),a.IS_SLECTED_USER_ID>0?t("a",{attrs:{title:e.$t("Applied")}},[t("em",{staticClass:"fa fa-check text-success"})]):e._e()]),t("td",{staticClass:"text-center single-action"},[a.CAN_EDIT?t("a",{attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditManageView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-pencil text-success"})]):e._e(),a.CAN_EDIT?e._e():t("a",{staticClass:"disabled",staticStyle:{cursor:"no-drop !important"},attrs:{href:"javascript:;",title:" $t('Edit') "}},[t("em",{staticClass:"fa fa-pencil text-success disabled"})])]),t("td",{staticClass:"text-center single-action"},[a.CAN_EDIT?t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-trash text-danger"})]):e._e(),a.CAN_EDIT?e._e():t("a",{class:{disabled:!a.CAN_EDIT},attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-trash text-danger disabled"})])])])})),e.noRecord?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"text-center text-danger d-flex align-items-center justify-content-center norecs"},[e._v(e._s(e.$t("NoRecordfound")))])])]):e._e()],2)])])])]):e._e(),e.ShowLisiting?e._e():t("section",{staticClass:"tab mt-2"},[t("div",{staticClass:"tab-style"},[t("div",{staticClass:"tab_container"},[t("div",{staticClass:"responsive-tabs-container view_tab"},[t("ul",{staticClass:"nav nav-tabs all-tabs responsive-tabs cust"},[t("li",{staticClass:"nav-item general"},[t("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(1)}}},[t("span",{staticClass:"numb"},[e._v("1")]),e._v(" "+e._s(e.$t("General"))+" ")])]),t("li",{staticClass:"nav-item selectcolumn"},[t("a",{class:{"nav-link":!0,disabled:""==e.ViewData.Name||2==e.ViewData.ApplyTo&&0==e.ListSelectedUsers.length},attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(2)}}},[t("span",{staticClass:"numb"},[e._v("2")]),e._v(" "+e._s(e.$t("Select Column"))+" ")])]),t("li",{staticClass:"nav-item filter"},[t("a",{class:{"nav-link":!0,disabled:""==e.ViewData.Name||2==e.ViewData.ApplyTo&&0==e.ListSelectedUsers.length||0==e.SelectedItems.length},attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(3)}}},[t("span",{staticClass:"numb"},[e._v("3")]),e._v(" "+e._s(e.$t("Filter"))+" ")])])]),t("Form",{ref:"ManageViewLayoutData"},[t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane active",attrs:{id:"step1"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"form-group"},[t("label",[e._v(" "+e._s(e.$t("ViewName"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.ViewData.Name,expression:"ViewData.Name",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:e.ViewData.Name},on:{input:function(t){t.target.composing||e.$set(e.ViewData,"Name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),t("div",{staticClass:"col-lg-6 float-left"},[t("div",{staticClass:"col-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("label",[e._v(" "+e._s(e.$t("ApplyTo"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("div",{staticClass:"form-group"},[t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio",name:"viewapplyto",value:"1"},domProps:{checked:e._q(e.ViewData.ApplyTo,"1")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","1")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio"}},[e._v("Only For Me")])]),"CA"==e.usertype?t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio2",name:"viewapplyto",value:"2"},domProps:{checked:e._q(e.ViewData.ApplyTo,"2")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","2")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio2"}},[e._v(e._s(e.$t("Others")))])]):e._e(),"CA"==e.usertype?t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio3",name:"viewapplyto",value:"3"},domProps:{checked:e._q(e.ViewData.ApplyTo,"3")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","3")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio3"}},[e._v(e._s(e.$t("ALL")))])]):e._e()])])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.ViewData.ApplyTo,expression:"ViewData.ApplyTo==2"}],staticClass:"w-100 float-left mb-2 mt-2"},[e.ListUnselectedUsers.length>0?t("moveuser",{attrs:{leftItems:e.ListUnselectedUsers,"right-items":e.ListSelectedUsers,"title-left":e.$t("Available"),"title-right":e.$t("Selectedusers"),"moved-item-location":"bottom","target-id":"ListViewUsers"}}):e._e()],1),t("div",{staticClass:"col-lg-12 text-right mt-3"},[t("a",{staticClass:"btn btn-secondary mr-1",attrs:{href:"javascript:;",title:e.$t("BacktoList")},on:{click:function(t){return e.BackToList()}}},[t("em",{staticClass:"fa fa-angle-double-left pr-2"}),e._v(" "+e._s(e.$t("BacktoList"))+" ")]),t("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;",title:e.$t("Next")},on:{click:function(t){return e.ShowNextTab(2)}}},[t("em",{staticClass:"fa fa-angle-double-right pr-2"}),e._v(" "+e._s(e.$t("Next"))+" ")])])])])]),t("div",{staticClass:"tab-pane",attrs:{id:"step2"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e.UnselectedItems&&e.UnselectedItems.length>0?t("mover",{attrs:{"left-items":e.UnselectedItems,"right-items":e.SelectedItems,"title-left":e.$t("AvailableFields"),"title-right":e.$t("SelectedFields"),"moved-item-location":"bottom","max-item":"25"}}):e._e()],1),t("div",{staticClass:"col-12 text-right mt-3"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",title:e.$t("Next")},on:{click:function(t){return e.ShowNextTab(3)}}},[t("em",{staticClass:"fa fa-angle-double-right pr-2"}),e._v(" "+e._s(e.$t("Next"))+" ")])])])])]),t("div",{staticClass:"tab-pane",attrs:{id:"step3"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("searchfilter",{attrs:{submodulecode:e.SubmoduleCode,modulename:e.ModuleName,viewId:e.ViewData.ViewId,"filter-type":"VIEW"}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])])],1),t("div",{staticClass:"col-12 text-right mt-3"},[t("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;",title:e.$t("Save")},on:{"~click":function(t){return e.SaveViewData()}}},[t("em",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("Save"))+" ")])])])])])])])])],1)])])])],1)])])])},s=[],l=(a("14d9"),a("9769")),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"listing mover-panel",attrs:{id:e.targetId}},[t("div",{staticClass:"border-0 p-0 d-flex flex-wrap"},[t("div",{staticClass:"mover-panel-box leftpanel",attrs:{id:"MoverLeft"}},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleLeft))])])]),t("div",{staticClass:"col-12 pl-0 mt-2 px-small-0"},[t("div",{staticClass:"col-sm-12 col-md-8 col-lg-8 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Search,expression:"Search"}],staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search by Name",autocomplete:"off"},domProps:{value:e.Search},on:{keyup:function(t){return e.SearchData()},input:function(t){t.target.composing||(e.Search=t.target.value)}}})])]),t("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 float-left pl-0 px-small-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:e.$t("Search"),href:"javascript:;"},on:{click:function(t){return e.SearchData()}}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearData()}}},[t("em",{staticClass:"fa fa-refresh"})])])])]),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{"aria-describedby":"fildname"}},[t("thead",{staticClass:"thead-bg"},[t("tr",{attrs:{role:"row"}},[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("fieldName")))])])]),t("tbody",{attrs:{id:e.targetId+"LeftItems"}},[e._l(e.unselectedItems,(function(a,i){return t("tr",{class:{"low-bar":a.isSelected,even:i%2==2,odd:i%2>0},attrs:{Key:a,"data-id":a.value,"data-side":"left","data-index":i},on:{click:function(t){return e.selectItem(a,e.unselectedItems)}}},[t("td",{staticClass:"sorting_1"},[e._v(e._s(a.displayValue))])])})),null==e.unselectedItems||0==e.unselectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger"},[e._v(" "+e._s(e.$t("NoRecordfound")))])]):e._e()],2)])])])],1)]),t("div",{staticClass:"mover-controls"},["false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllRight")},on:{click:function(t){return e.moveAllRight()}}},[t("em",{staticClass:"fa fa-angle-double-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-double-right fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]):e._e(),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveRight")},on:{click:function(t){return e.moveRight()}}},[t("em",{staticClass:"fa fa-angle-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-right fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveLeft")},on:{click:function(t){return e.moveLeft()}}},[t("em",{staticClass:"fa fa-angle-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-left fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]),"false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllLeft")},on:{click:function(t){return e.moveAllLeft()}}},[t("em",{staticClass:"fa fa-angle-double-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa fa-angle-double-left fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]):e._e()]),t("div",{staticClass:"mover-panel-box rightpanel",attrs:{id:"MoverRight"}},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleRight))])])]),e._m(0),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{id:"example","aria-describedby":"mover"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("fieldName"))+" ")])]),t("th",{staticClass:"text-center",staticStyle:{width:"100px"},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("Sortable")))])])]),t("tbody",{attrs:{id:e.targetId+"RightItems"}},[e._l(e.selectedItems,(function(a,i){return t("tr",{class:{even:i%2==2,odd:i%2>0,"low-bar":a.isSelected},attrs:{"data-id":a.value,"data-side":"right","data-index":i,Key:a},on:{click:function(t){return e.selectItem(a,e.selectedItems)}}},[t("td",[t("span",{staticClass:"my-handle"},[e._v(e._s(a.displayValue))])]),t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSortable,expression:"item.isSortable"}],staticClass:"form-check-input float-right custom-control-input multilevel",staticStyle:{display:"none"},attrs:{disabled:0==a.isSortableEnabled,id:a.value,name:a.value,type:"checkbox"},domProps:{value:a.isSortable,checked:Array.isArray(a.isSortable)?e._i(a.isSortable,a.isSortable)>-1:a.isSortable},on:{change:function(t){var i=a.isSortable,s=t.target,l=!!s.checked;if(Array.isArray(i)){var o=a.isSortable,r=e._i(i,o);s.checked?r<0&&e.$set(a,"isSortable",i.concat([o])):r>-1&&e.$set(a,"isSortable",i.slice(0,r).concat(i.slice(r+1)))}else e.$set(a,"isSortable",l)}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.value}})])])])})),null==e.selectedItems||0==e.selectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(" "+e._s(e.$t("NoFieldSelected")))])]):e._e()],2)])])])],1)])])])},r=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 pl-0 mt-2 d-none"},[t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pl-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",id:"Go",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"}},[t("em",{staticClass:"fa fa-refresh"})])])])])}],n=a("aa47"),d={props:{titleLeft:{type:String,default:"Available"},titleRight:{type:String,default:"Selected"},movedItemLocation:{type:String,default:"top"},leftItems:Array,rightItems:Array,targetId:{type:String,default:"Mover"},normalizeLists:{type:Boolean,default:!0},fontAwesome:{type:Boolean,default:!0},moveAll:{type:Boolean,default:!0},maxItem:{type:String,default:null}},methods:{raiseItemMoved:function(e,t,a){this.lastMovedItem={item:e,targetList:t,listType:a},this.$emit("item-moved",this.lastMovedItem)}},data:function(){var e={selectedSortable:null,unselectedSortable:null,selectedItem:{},selectedList:null,selectedItems:this.rightItems,unselectedItems:[],AllItems:[],lastMovedItem:null,Search:"",initialize:function(t){var a={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,sort:!1,disabled:!0},i={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,handle:".my-handle",nodeName:"tr"},s=t.targetId,l=document.getElementById(s+"LeftItems");e.unselectedSortable=n["a"].create(l,a);var o=document.getElementById(s+"RightItems");e.selectedSortable=n["a"].create(o,i),t.normalizeLists&&e.normalizeListValues()},selectItem:function(e,t){var a=this;if(e.hasOwnProperty("length")){if(t.length>0&&(e=t[0]),!e)return}else e.isSelected=!e.isSelected,a.selectedItem=e,a.selectedList=t},moveRight:function(e,t){var a=this;if(!e)e=$.grep(a.unselectedItems,(function(e,t){return e.isSelected}));e&&(a.selectedItems.length>a.maxItem-1&&a.maxItem>0||e.length+a.selectedItems.length>a.maxItem&&a.maxItem>0?a.ShowAlert(a.$t("SelectFieldMessage",[a.maxItem]),"warning",!0,a.$t("Alert")):($.each(e,(function(e,t){t.isSelected=!1;var i=a.unselectedItems.indexOf(t);if(a.unselectedItems.splice(i,1),"number"===typeof e)a.selectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.selectedItems.unshift(t);else{a.selectedItems.push(t);var s=a.$el.querySelector(".mover-right>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){a.selectItem(e,a.selectedItems),a.raiseItemMoved(e,a.selectedItems,"right")}),1),a.SetCheckbox("right",a)))},moveLeft:function(){var e=this,t=$.grep(e.selectedItems,(function(e,t){return e.isSelected}));t&&($.each(t,(function(t,a){a.isSelected=!1;var i=e.selectedItems.indexOf(a);if(e.selectedItems.splice(i,1),"number"===typeof t)e.unselectedItems.splice(t,0,a);else if("top"==e.movedItemLocation)e.unselectedItems.unshift(a);else{e.unselectedItems.push(a);var s=e.$el.querySelector(".mover-left>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){e.selectItem(t,e.unselectedItems),e.raiseItemMoved(t,e.unselectedItems,"left")}),10),e.SetCheckbox("left",e))},SetCheckbox:function(e,t){setTimeout((function(){t.CheckBoxBootstrap(),$(".mover-panel :checkbox").prop("checked",!0)}),100)},moveAllRight:function(){for(var e=this,t=e.unselectedItems.length-1;t>=0;t--){var a=e.unselectedItems[t];e.unselectedItems.splice(t,1),e.selectedItems.push(a)}},moveAllLeft:function(){for(var e=this,t=e.selectedItems.length-1;t>=0;t--){var a=e.selectedItems[t];e.selectedItems.splice(t,1),e.unselectedItems.push(a)}},refreshListDisplay:function(){setTimeout((function(){var t=e.selectedItems;e.selectedItems=[],e.selectedItems=t,t=e.unselectedItems,e.unselectedItems=[],e.unselectedItems=t}),10)},SearchData:function(){var e=this,t=e.Search;t=t.toLowerCase(),e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length})),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)}))},ClearData:function(){var e=this;e.Search="",e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length}))},onSorted:function(t){var a=t.item.dataset["id"],i=t.item.dataset["side"],s=t.item.dataset["index"];if("left"==i){var l=e.SortItemOfList(e.unselectedItems,a,s,t.newIndex);e.unselectedItems=[],setTimeout((function(){e.unselectedItems=l}),1)}else l=e.SortItemOfList(e.selectedItems,a,s,t.newIndex),e.selectedItems=[],setTimeout((function(){e.selectedItems=l}),1)},SortItemOfList:function(t,a,i,s){var l=t.find((function(e){return e.value==a}));return l?(t.splice(i,1),t.splice(s,0,l),t.forEach((function(e){e.isSelected=!1})),e.selectItem(l,t),t):t},onListDrop:function(e){return!1},normalizeListValues:function(){if(e.selectedItems&&0!=e.selectedItems.length&&e.unselectedItems&&0!=e.unselectedItems.length)for(var t of e.selectedItems){var a=t,i=e.unselectedItems.findIndex((function(e){return e.value==a.value}));i>-1&&e.unselectedItems.splice(i,1)}}},t=this;return setTimeout((function(){e.initialize(t)}),100),e},created:function(){var e=this;setTimeout((function(){var t=JSON.parse(JSON.stringify(e.leftItems));$.each(t,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)})),e.unselectedItems=JSON.parse(JSON.stringify(e.leftItems));var a=JSON.parse(JSON.stringify(e.rightItems));$.each(a,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)}))}),1e3),setTimeout((function(){e.SetBootstraptoolTip()}),200),setTimeout((function(){e.CheckBoxBootstrap()}),100)}},c=d,u=a("2877"),p=Object(u["a"])(c,o,r,!1,null,null,null),m=p.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid mover-panel"},[t("div",{staticClass:"border-0 p-0 d-flex flex-wrap"},[t("div",{staticClass:"mover-panel-box leftpanel"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleLeft))])])]),t("div",{staticClass:"col-12 pl-0 mt-2 px-small-0"},[t("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.UserName,expression:"UserName"}],staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:e.GetPlaceHoder(),autocomplete:"off"},domProps:{value:e.UserName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SearchData()},input:function(t){t.target.composing||(e.UserName=t.target.value)}}})])]),t("div",{staticClass:"col-sm-12 col-md-5 col-lg-5 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.DepartmentName,expression:"DepartmentName"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.DepartmentName=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectDepartment")))]),e._l(e.GetDistinctArray(e.leftItems),(function(a,i){return t("option",{key:i,domProps:{value:a}},[e._v(e._s(a))])}))],2)])]),t("div",{staticClass:"col-sm-12 col-md-3 col-lg-3 float-left pl-0 px-small-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline d-flex"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:e.$t("Search"),href:"javascript:;"},on:{click:function(t){return e.SearchData()}}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearData()}}},[t("em",{staticClass:"fa fa-refresh"})])])])]),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{"aria-describedby":"moveruser"}},[t("thead",{staticClass:"thead-bg"},[t("tr",{attrs:{role:"row"}},[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("UserName")))]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Department")))])])]),t("tbody",{attrs:{id:e.targetId+"LeftItems"}},[e._l(e.unselectedItems,(function(a,i){return t("tr",{key:i,class:{"low-bar":a.isSelected,even:i%2==2,odd:i%2>0},attrs:{"data-id":a.value,"data-side":"left","data-index":i},on:{click:function(t){return e.selectItem(a,e.unselectedItems)}}},[t("td",{staticClass:"sorting_1"},[e._v(e._s(a.displayValue))]),t("td",{staticClass:"sorting_1"},[e._v(e._s(a.departmentName))])])})),null==e.unselectedItems||0==e.unselectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(e._s(e.$t("NoUserFound")))])]):e._e()],2)])])])],1)]),t("div",{staticClass:"mover-controls"},["false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllRight")},on:{click:function(t){return e.moveAllRight()}}},[t("em",{staticClass:"fa fa-angle-double-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-double-right fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]):e._e(),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveRight")},on:{click:function(t){return e.moveRight()}}},[t("em",{staticClass:"fa fa-angle-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-right fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveLeft")},on:{click:function(t){return e.moveLeft()}}},[t("em",{staticClass:"fa fa-angle-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-left fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]),"false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllLeft")},on:{click:function(t){return e.moveAllLeft()}}},[t("em",{staticClass:"fa fa-angle-double-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa fa-angle-double-left fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]):e._e()]),t("div",{staticClass:"mover-panel-box rightpanel"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleRight))])])]),e._m(0),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{id:"example","aria-describedby":"mover"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("UserName")))]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Department")))])])]),t("tbody",{attrs:{id:e.targetId+"RightItems"}},[e._l(e.selectedItems,(function(a,i){return t("tr",{key:i,class:{even:i%2==2,odd:i%2>0,"low-bar":a.isSelected},attrs:{"data-id":a.value,"data-side":"right"},on:{click:function(t){return e.selectItem(a,e.selectedItems)}}},[t("td",[t("span",{staticClass:"my-handle"},[e._v(e._s(a.displayValue))])]),t("td",[e._v(e._s(a.departmentName))])])})),null==e.selectedItems||0==e.selectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(e._s(e.$t("UserNotSelect")))])]):e._e()],2)])])])],1)])])])},h=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 pl-0 mt-2 d-none"},[t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pl-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline d-flex"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",id:"Go",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"}},[t("em",{staticClass:"fa fa-refresh"})])])])])}],v={props:{titleLeft:{type:String,default:"Available"},titleRight:{type:String,default:"Selected"},movedItemLocation:{type:String,default:"top"},leftItems:Array,rightItems:Array,targetId:{type:String,default:"Mover"},normalizeLists:{type:Boolean,default:!0},fontAwesome:{type:Boolean,default:!0},moveAll:{type:Boolean,default:!0},maxItem:{type:Number,default:0}},methods:{raiseItemMoved:function(e,t,a){this.lastMovedItem={item:e,targetList:t,listType:a},this.$emit("item-moved",this.lastMovedItem)},GetDistinctArray:function(e){return e.map((function(e){return e.departmentName})).filter((function(e,t,a){return a.indexOf(e)===t}))},GetPlaceHoder:function(){return this.$t("SearchbyFieldName"),this.$t("Name")}},data:function(){var e={selectedSortable:null,unselectedSortable:null,selectedItem:{},selectedList:null,selectedItems:this.rightItems,AllItems:[],unselectedItems:[],lastMovedItem:null,DepartmentArray:this.department,UserName:"",DepartmentName:"",initialize:function(t){var a={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,sort:!1,disabled:!0},i={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,handle:".my-handle"},s=t.targetId,l=document.getElementById(s+"LeftItems");e.unselectedSortable=n["a"].create(l,a);var o=document.getElementById(s+"RightItems");e.selectedSortable=n["a"].create(o,i),t.normalizeLists&&e.normalizeListValues()},selectItem:function(e,t){var a=this;(e||(t.length>0&&(e=t[0]),e))&&(e.isSelected=!e.isSelected,a.selectedItem=e,a.selectedList=t)},SetCheckbox:function(e){setTimeout((function(){$(".mover-panel :checkbox").prop("checked",!1)}),100)},moveRight:function(e,t){var a=this;if(!e)e=$.grep(a.unselectedItems,(function(e,t){return e.isSelected}));e&&(a.selectedItems.length>a.maxItem-1&&a.maxItem>0?alertR(this.$t("SelectFieldMessage")+a.maxItem,!0,this.$t("Alert")):($.each(e,(function(e,t){t.isSelected=!1;var i=a.unselectedItems.indexOf(t);if(a.unselectedItems.splice(i,1),console.log(a.selectedItems),"number"===typeof e)e=a.selectedItems.hasOwnProperty("length")?a.selectedItems.length:0,a.selectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.selectedItems.unshift(t);else{a.selectedItems.push(t);var s=a.$el.querySelector(".mover-right>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}console.log(a.selectedItems)})),setTimeout((function(){a.selectItem(e,a.selectedItems),a.raiseItemMoved(e,a.selectedItems,"right")}),10),a.SetCheckbox("right")))},moveLeft:function(e,t){var a=this;e=$.grep(a.selectedItems,(function(e,t){return e.isSelected}));e&&($.each(e,(function(e,t){t.isSelected=!1;var i=a.selectedItems.indexOf(t);if(a.selectedItems.splice(i,1),"number"===typeof e)a.unselectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.unselectedItems.unshift(t);else{a.unselectedItems.push(t);var s=a.$el.querySelector(".mover-left>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){a.selectItem(e,a.unselectedItems),a.raiseItemMoved(e,a.unselectedItems,"left")}),10),a.SetCheckbox("left"))},moveAllRight:function(){for(var e=this,t=e.unselectedItems.length-1;t>=0;t--){var a=e.unselectedItems[t];e.unselectedItems.splice(t,1),e.selectedItems.push(a)}e.SetCheckbox()},moveAllLeft:function(){for(var e=this,t=e.selectedItems.length-1;t>=0;t--){var a=e.selectedItems[t];e.selectedItems.splice(t,1),e.unselectedItems.push(a)}e.SetCheckbox()},refreshListDisplay:function(){var e=this;setTimeout((function(){var t=e.selectedItems;e.selectedItems=[],e.selectedItems=t,t=e.unselectedItems,e.unselectedItems=[],e.unselectedItems=t}),10)},SearchData:function(){var e=this,t=e.UserName,a=e.DepartmentName;e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length})),""!=$.trim(t)&&""==$.trim(a)?(t=t.toLowerCase(),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)}))):""==$.trim(t)&&""!=$.trim(a)?e.unselectedItems=$.grep(e.unselectedItems,(function(e){return e.departmentName==a})):""!=$.trim(t)&&""!=$.trim(a)&&(t=t.toLowerCase(),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)&&e.departmentName==a})))},ClearData:function(){var e=this;e.UserName="",e.DepartmentName="",e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length}))},onSorted:function(t){var a=t.item.dataset["id"],i=t.item.dataset["side"],s=t.item.dataset["index"];if("left"==i){var l=e.SortItemOfList(e.unselectedItems,a,s,t.newIndex);e.unselectedItems=[],setTimeout((function(){e.unselectedItems=l}),1)}else l=e.SortItemOfList(e.selectedItems,a,s,t.newIndex),e.selectedItems=[],setTimeout((function(){e.selectedItems=l}),1)},SortItemOfList:function(e,t,a,i){var s=this,l=e.find((function(e){return e.value==t}));return l?(e.splice(a,1),e.splice(i,0,l),e.forEach((function(e){e.isSelected=!1})),s.selectItem(l,e),e):e},onListDrop:function(e){var t=this,a=e.item.dataset["id"],i=e.item.dataset["side"],s=e.newIndex;if("left"==i){var l=t.unselectedItems.find((function(e){return e.value==a}));t.moveRight(l,s),l.isSelected=!0;var o=t.unselectedItems;t.unselectedItems=[],setTimeout((function(){t.unselectedItems=o}))}else{l=t.selectedItems.find((function(e){return e.value==a}));l.isSelected=!0,t.moveLeft(l,s);o=t.selectedItems;t.selectedItems=[],setTimeout((function(){t.selectedItems=o}))}},normalizeListValues:function(){var e=this;if(e.selectedItems&&0!=e.selectedItems.length&&e.unselectedItems&&0!=e.unselectedItems.length)for(var t of e.selectedItems){var a=t,i=e.unselectedItems.findIndex((function(e){return e.value==a.value}));i>-1&&e.unselectedItems.splice(i,1)}}},t=this;return setTimeout((function(){e.initialize(t)}),100),e},created:function(){var e=this;setTimeout((function(){var t=JSON.parse(JSON.stringify(e.leftItems));$.each(t,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)})),e.unselectedItems=JSON.parse(JSON.stringify(e.leftItems));var a=JSON.parse(JSON.stringify(e.rightItems));$.each(a,(function(t,a){0==e.AllItems.filter((function(e){return e.value==a.value})).length&&e.AllItems.push(a)}))}),1e3),setTimeout((function(){e.SetBootstraptoolTip()}),200)}},_=v,S=Object(u["a"])(_,f,h,!1,null,null,null),g=S.exports,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 float-left px-3 listing"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"form-content border-0"},[e.showAddData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divManageSearchCriteria"}},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({values:a,meta:i}){return[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"table-responsive overflow-visible"},[t("table",{staticClass:"table table-bordered nowrap mt-0 mb-0",attrs:{"aria-describedby":"layoutfilter"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("fieldName")))])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("ConditionalOperator")))])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("Value")))])]),t("th",{staticClass:"text-center",attrs:{scope:"col"}})])]),t("tbody",e._l(e.filterItemData,(function(a,i){return t("tr",{key:i},[t("td",[t("Field",{attrs:{name:"field_name"+(i+1),"data-vv-name":"SearchFilter.fieldName"+(i+1),rules:{required:a.is_required},label:"Field Name"},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.field_name,expression:"item.field_name"}],class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"field_name"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"field_name",t.target.multiple?i:i[0])},function(t){return e.GetOperatorData(t,a,i)}],"update:modelValue":l}},[t("option",{attrs:{"data-index":i,value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.fieldNameData,(function(a,i){return t("option",{key:i,domProps:{value:String(a.custom_field_id)}},[e._v(" "+e._s(e.$t(a.display_name)))])}))],2)]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"operator"+(i+1),rules:{required:a.is_required},label:"operator"},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.operator,expression:"item.operator"}],class:{"form-control":!0,disableAria:!0,"is-invalid":s[0]},attrs:{name:"operator"+(i+1)},on:{"update:modelValue":l,change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"operator",t.target.multiple?i:i[0])},function(t){return e.ShowFieldValue(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.operator_list,(function(a,i){return t("option",{key:i,domProps:{value:String(a.OPERATOR_ID)}},[e._v(" "+e._s(a.OPERATOR_DISPLAY_NAME))])}))],2)]}}],null,!0)})],1),t("td",{staticClass:"overflow-visible"},["date"==a.dt_code||"datetime"==a.dt_code?t("div",{class:{"col-5 p-0 float-left pr-1":"between"==a.operator_expression}},[t("Field",{attrs:{name:"date"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("v-date-picker",{staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,name:"date"+a.label+i},on:{"dp-hide":function(t){a.second_value="",e.SetValues(t,a)},"update:modelValue":l,input:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)})],1):e._e(),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(" "+e._s(e.$t("And","And")))]),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{class:{"input-group":!0,"col-5 p-0 float-left":"between"==a.operator_expression}},[t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("v-date-picker",{ref:"SecondDatePicker",refInFor:!0,staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,name:"second"+a.label+i},on:{"dp-hide":function(t){a.second_value="",e.SetValues(t,a)},"update:modelValue":l,input:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.second_value,callback:function(t){e.$set(a,"second_value",t)},expression:"item.second_value"}})]}}],null,!0)})],1),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"Is Null"!=a.operator_expression&&"Is Not Null"!=a.operator_expression?t("Field",{attrs:{name:a.label+i,rules:{required:a.is_required},label:"Value"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{id:a.label+i,name:a.label+i,type:"text"},domProps:{value:a.value},on:{input:[function(t){t.target.composing||e.$set(a,"value",t.target.value)},function(t){return e.SetValues(t,a)}]}})]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(" "+e._s(e.$t("And","And"))+" ")]):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:"second"+a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.second_value,expression:"item.second_value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{type:"text",id:a.label,name:"second"+a.label+i},domProps:{value:a.second_value},on:{input:[function(t){t.target.composing||e.$set(a,"second_value",t.target.value)},function(t){return e.SetValues(t,a,"second")}]}})]}}],null,!0)}):e._e(),"textarea"==a.dt_code?t("Field",{attrs:{name:"textarea"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==a.dt_code&&i[0]},attrs:{id:a.label},domProps:{value:a.value},on:{change:function(t){return e.SetValues(t,a)},input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})]}}],null,!0)}):e._e(),"radio"==a.dt_code?t("div",{staticClass:"form-control pl-4 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"form-check form-check-inline custom-control mx-4 pl-2 custom-radio",attrs:{key:i.name}},[t("Field",{attrs:{name:"rdo_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("label",{staticClass:"form-check form-check-inline"},[t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],staticClass:"custom-control-input",attrs:{name:"rdo_"+a.custom_field_id+i.value,id:"rdo_"+a.custom_field_id+i.value,type:"radio","data-resource":i.name},domProps:{checked:i.value==a.value,value:i.value,checked:e._q(a.value,i.value)},on:{change:[function(t){return e.$set(a,"value",i.value)},function(t){return e.SetValues(t,a)}]}}),t("label",{staticClass:"custom-control-label",attrs:{for:"rdo_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])])])])],1)})),0)]):e._e(),"checkbox"==a.dt_code?t("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"custom-control custom-checkbox"},[t("Field",{attrs:{name:"chk_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select_value,expression:"item.select_value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+a.custom_field_id+i.value,name:"chk_"+a.custom_field_id+i.value,"data-resource-id":i.name,type:"checkbox"},domProps:{value:i.value,checked:Array.isArray(a.select_value)?e._i(a.select_value,i.value)>-1:a.select_value},on:{change:[function(t){var s=a.select_value,l=t.target,o=!!l.checked;if(Array.isArray(s)){var r=i.value,n=e._i(s,r);l.checked?n<0&&e.$set(a,"select_value",s.concat([r])):n>-1&&e.$set(a,"select_value",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"select_value",o)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"Lookup"!=a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&s[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,name:"Multiselect"+a.label+i,placeholder:"Search a value","filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:"normal"==a.dropdown_type?e.MakeNormalArray(a.select_options):a.select_options,object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:e.setSelectedValue,"update:modelValue":l},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)}),"Lookup"==a.picklist_options&&"select"==a.dt_code&&"normal"==a.dropdown_type&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression&&"Is Null"!=a.operator_expression&&"Is Not Null"!=a.operator_expression?t("Field",{attrs:{name:"select"+a.label+i,rules:{required:!0},label:a.operator},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select"+a.label+i},on:{"update:modelValue":l,change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeNormalArray(a.select_options),(function(i,s){return t("option",{key:s,domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name))])}))],2)]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"select"==a.dt_code&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select2"+a.label+i,rules:{required:!0},label:a.operator},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:l}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select2"+a.label+i},on:{"update:modelValue":l,change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return null!=a.picklist_options?t("option",{key:s,domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name))]):e._e()}))],2)]}}],null,!0)}):e._e(),"Lookup"==a.picklist_options||null==a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect2"+a.label+i,rules:{required:a.is_required},label:"name"},scopedSlots:e._u([{key:"default",fn:function({errors:i,changed:s}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&i[0]},attrs:{placeholder:"Search a value","filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:a.select_options,object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)},"update:modelValue":s},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)})],1),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.DeleteSearchItem(a,i)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0)]),t("div",{staticClass:"col-lg-12 text-right py-3"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",title:e.$t("Add")},on:{click:e.AddSearchData}},[t("em",{staticClass:"fa fa-plus pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Add")))])])])]),e.isBlank(e.condition)?e._e():t("div",{staticClass:"col-12 float-left p-0 mt-2"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(" "+e._s(e.$t("Condition"))+":")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.condition))])])]),t("div",{staticClass:"col-12 float-left p-0 mt-2 d-none"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v("Database Condition:")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.databaseCondition))])])]),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left py-3 d-none"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"search-btm-btn"},[t("a",{staticClass:"btn btn-success formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("SaveAndSearch")},on:{click:function(t){return e.SubmitData("save")}}},[t("em",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("SaveAndSearch"))+" ")]),t("a",{staticClass:"btn btn-success formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("Search")},on:{click:function(t){return e.SubmitData("search")}}},[t("em",{staticClass:"fa fa-search pr-2"}),e._v(e._s(e.$t("Search")))]),t("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("Cancel")},on:{click:function(t){e.showListData=!0,e.showAddData=!1,e.filterItemData=[],e.GetSearchFilterItemData()}}},[t("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])])])])]}}],null,!1,3265298269)})],1)]):e._e()])])])])},A=[],b=a("1157"),y=a.n(b),D={props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function},control:{type:Object},viewId:{type:Number},filterType:{type:String},tabId:{type:Number}},data:function(){return{filterData:[],showListData:!1,showAddData:!0,filterItemData:[],fieldNameData:[],options:"",submited:!1,databaseCondition:"",condition:"",filterName:"",validationForName:"",filterId:0,isDefault:!1,FormatForSecond:"",isFirstTime:!1,exitstingFilterNameArray:[],ApiURL:"",CurrentObject:null,ViewId:0,FilterType:"",TabId:0,popover:{visibility:"click"},CompanyType:"",isEmpty:!1}},created:function(){this.ViewId=this.viewId,this.FilterType=this.filterType,this.CurrentObject=this.control,this.TabId=this.tabId,this.IsExtraMapFeature(),this.GetSearchFilterItemData(),this.GetFieldNameData(),this.ViewId>0&&this.EditSearchFilterData(this.ViewId),setTimeout((function(){y()(".modal-dialog").draggable({handle:".modal-header"})}),1e3)},methods:{IsExtraMapFeature:function(){var e=this;l["a"].IsExtraMapFeature().then((function(t){e.CompanyType="",null!=t.data&&""!=t.data?e.CompanyType=t.data:e.CompanyType="locating"}))},MakeArray:function(e,t){var a=[],i=String(e).split(",");if("radio"==t||"checkbox"==t){if(i.length>0)for(var s of i)if(s.split("|").length>1){var l={name:s.split("|")[0],value:s.split("|")[1]};a.push(l)}else{l={name:s,value:s};a.push(l)}}else if(i.length>0)for(var s of i){l={name:s,value:s};a.push(l)}return a},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(i){console.log(i)}},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},isBlank:function(e){return!e||/^\s*$/.test(e)},returnDateObject:function(e){var t=null;return e=void 0==e?"":e,""!=e&&(t=new Date(Date.parse(e))),{format:"MM-dd-yyyy",useStrict:!0,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:t,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},GetValidationF:function(e){var t={};return e.is_required&&(t["required"]=!0),e.length>0&&(t["max"]=e.length),"email"==e.validation_type&&(t["email"]=!0),"date"!=e.dt_code&&"datetime"!=e.dt_code||(t["date_format"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"decimal"==e.dt_code&&(t["decimal"]=2),"mobile_phone"!=e.name&&"business_phone"!=e.name&&"fax"!=e.name&&"zipcode"!=e.name||"CRM_CONTACTS"!=this.submodulecode||(t["numeric"]=!0,t["max"]=15),"int"!=e.dt_code&&"bigint"!=e.dt_code||(t["numeric"]=!0),"url"==e.dt_code&&(t["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(t["regex"]=e.regular_expression),t},onSearch:async function(e,t){var a=t.value;"undefined"==typeof a&&(a=0);var i="id=&moduleName="+this.modulename+"&type="+t.field_code+"&search="+escape(e);"fill"==t.dependent_type&&(i+="&refId="+a),await l["a"].getDDLData(i).then((function(e){var a=[];return e.data,""!=e.data&&(a=e.data),t.select_options=a.DATA}))},setSelectedValue:function(e,t){try{setTimeout(()=>{this.SetCondition(),this.validateFilterData()},100)}catch(a){}},AddSearchData:function(){this.GetSearchFilterItemData()},DeleteSearchItem:function(e,t){var a=this,i=a.$t("ConfirmDelete");a.confirmR(i,!0,null,(function(){a.filterItemData.splice(t,1),a.SetCondition()}))},GetSearchFilterData:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.filterData=[],l["a"].SearchCriteriaListing(t).then((function(e){var t=e.data;if(null!=t)return this.filterData=t.DATA,this.filterData}))},GetFieldNameData:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;"VIEW"==this.FilterType&&(t+="&reqFrom=MANAGEVIEW"),this.fieldNameData=[],l["a"].GetFieldName(t).then((function(t){var a=t.data;if(null!=a){if(e.fieldNameData=a.DATA,"nonlocating"!=e.CompanyType)return e.fieldNameData;e.fieldNameData.forEach((t,a)=>{if("parent_sub_status_id"==t.label||"sub_status_id"==t.label)return e.fieldNameData.splice(a,1)})}}))},GetOperatorData:function(e,t){var a=e.target.value,i=y.a.grep(this.fieldNameData,(function(e,t){return e.custom_field_id==a})),s="";t.dt_code="",t.picklist_options=[],t.label="",t.dropdown_type="",t.select_options="",t.select_value="",t.length=0,t.operator="",t.field_code="",t.second_value="",t.display_name="",t.is_required=!1,i.length>0&&(s="ModifiedBy"==i[0].display_name||"Modified By"==i[0].display_name?"nvarchar":i[0].sql_type,t.dt_code=i[0].dt_code,t.picklist_options=i[0].picklist_options,t.label=i[0].label,t.dropdown_type=i[0].dropdown_type,t.select_options=i[0].select_options,t.length=i[0].length,t.display_name=i[0].display_name,t.field_code=i[0].field_code,t.is_required=i[0].is_required,t.validation_type=i[0].validation_type);var o="dataType="+s+"&customField="+a;t.operator_list=[],l["a"].GetOperator(o).then((function(e){var a=e.data;if(null!=a)return t.operator_list=a.DATA,t.operator_list})),t.field_name=a,t.value="",setTimeout(()=>{this.SetCondition(),this.validateFilterData()},1e3)},SetValues:function(e,t,a){if("datetime"==t.dt_code||"decimal"==t.dt_code||"date"==t.dt_code){if("second"==a){var i=t.second_value;t.second_value=i}else{i=t.value;t.value=i}this.isEmpty=!0}else"second"==a?t.second_value=e.target.value:t.value=e.target.value,this.isEmpty=!0;this.SetCondition(),this.validateFilterData()},SetCondition:function(){var e="",t="",a=this,i="";y.a.each(a.filterItemData,(function(s,l){s>0&&(e+=" And ",t+=" and ");var o=l.field_name,r=y.a.grep(a.fieldNameData,(function(e){return e.custom_field_id==o}));"undefined"!=typeof r&&r.length>0&&(e+=a.GetLocalizedValue(r[0].label,r[0].display_name),"date"==r[0].dt_code||"datetime"==r[0].dt_code?t+="convert(date, "+r[0].name+", 23)":"CL.client"==r[0].name?r[0].name="CL.UserNames":"PMU.pm"==r[0].name?r[0].name="PMU.UserNames":t+=r[0].name.trimEnd());var n=l.operator;if(r=y.a.grep(l.operator_list,(function(e,t){return e.OPERATOR_ID==n})),"undefined"!=typeof r&&r.length>0&&(e=e+" "+r[0].OPERATOR_DISPLAY_NAME,i=r[0].OPERATOR_EXPRESSION,t+=" "+i),!a.isBlank(l.value)){var d=l.value,c=l.value;if("select"==l.dt_code&&"normal"==l.dropdown_type&&"IN"!=i&&"NOT IN"!=i&&"Is Null"!=i&&"Is Not Null"!=i){var u=a.MakeNormalArray(l.select_options);r=y.a.grep(u,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(d=r[0].name)}else if("select"==l.dt_code&&"custom"==l.dropdown_type||"select"==l.dt_code&&"normal"==l.dropdown_type&&("IN"==i||"NOT IN"==i)){if(Array.isArray(l.value)?(c=a.createString(l.value,"value"),d=a.createString(l.value,"name")):(c=l.value.value,d=l.value.name),"IN"==i||"NOT IN"==i){u=a.MakeNormalArray(l.select_options);r=y.a.grep(u,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(d=r[0].name),c="("+c+")"}}else if("select"!=l.dt_code||"normal"!=l.dropdown_type||"Is Null"!=i&&"Is Not Null"!=i)if("select"==l.dt_code&&"custom"!=l.dropdown_type&&"normal"!=l.dropdown_type)if("IN"==i||"NOT IN"==i)Array.isArray(l.value)?(c=a.createString(l.value,"value"),d=a.createString(l.value,"name")):(c=l.value.value,d=l.value.name),c="("+c+")";else{u=a.MakeArray(l.picklist_options,l.dt_code);r=y.a.grep(u,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(d=r[0].name),c=" '"+c+"'"}else if("date"==l.dt_code||"datetime"==l.dt_code)"between"==i?(d=l.value+" And "+l.second_value,c="'"+a.$options.filters.formatDatee(l.value)+"' and '"+a.$options.filters.formatDatee(l.second_value)+"'"):(d=l.value,c="'"+a.$options.filters.formatDatee(l.value)+"'");else if("radio"==l.dt_code){u=a.MakeArray(l.picklist_options,l.dt_code);r=y.a.grep(u,(function(e,t){return e.value==l.value})),"undefined"!=typeof r&&r.length>0&&(d=r[0].name,c="'"+r[0].value+"'")}else if("Like"==i||"Not Like"==i)c="'%"+l.value+"%'";else if("Starts With"==i)c="'"+l.value+"%'",t=t.replace("Starts With","like");else if("Ends With"==i)c="'%"+l.value+"'",t=t.replace("Ends With","like");else if("between"==i)d=l.value+" And "+l.second_value,c="'"+l.value+"' and '"+l.second_value+"'";else if("IN"==i||"NOT IN"==i){for(var p=String(l.value).split(","),m="",f=0;f<p.length;f++)f>0&&(m+=" , "),m+="'"+p[f]+"'";c="("+m+")"}else c="'"+c+"'";else"Is Null"==l.operator_expression&&(c="",d=""),"Is Not Null"==l.operator_expression&&(c="",d="");"select"==l.dt_code&&"normal"==l.dropdown_type&&"frequency"==l.label?t+=" '"+c+"'":"select"==l.dt_code&&"normal"==l.dropdown_type&&"forecast_category_name"==l.label?t+=" '"+d+"'":"select"==l.dt_code&&"normal"==l.dropdown_type&&"display_icon"==l.label?t+=" '"+c+"'":t+=" "+c,e=e+" "+d}})),a.condition=e,a.databaseCondition=encodeURIComponent(t).replace(/'/g,"%27"),"undefined"!=typeof a.CurrentObject&&null!=a.CurrentObject?(a.CurrentObject.TabCondition=a.condition,a.CurrentObject.TabDatabaseCondition=a.databaseCondition):(a.$parent.$parent.ViewData.Condition=a.condition,a.$parent.$parent.ViewData.DatabaseCondition=a.databaseCondition),a.SubmitData()},ShowFieldValue:function(e,t){var a=e.target.value,i=y.a.grep(t.operator_list,(function(e,t){return e.OPERATOR_ID==a})),s="";i.length>0&&(s=i[0].OPERATOR_EXPRESSION),t.showSecondValue="between"==s,t.operator=a,t.operator_expression=s,"Is Null"==t.operator_expression||"Is Not Null"==t.operator_expression?(this.isEmpty=!0,t.is_required=!1,this.SetCondition()):(console.log("UnCheck"),this.SetCondition(),this.validateFilterData())},GetSearchFilterItemData:function(){var e={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:[],first_value:"",second_value:"",showSecondValue:!1,picklist_options:[],label:"",display_name:"",dropdown_type:"",select_options:"",length:0,field_code:"",select_value:"",is_required:!1};this.filterItemData.push(e)},ApplyFilter:function(e){this.databaseCondition=e,checkVue.searchCondition=this.databaseCondition,"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():(this.$parent.PageSize=10,this.$parent.FetchData()),this.$emit("close")},EditFilter:function(e,t){this.showListData=!1,this.showAddData=!0,"NotSaved"!=t?(this.filterId=e.FILTER_ID,this.EditSearchFilterData(this.filterId)):(this.filterName=this.$parent.appliedFilter[0].field_name.split("(")[0],this.filterItemData=this.$parent.appliedFilter[0])},deleteFilter:function(e){this.filterId=e.FILTER_ID;var t=this,a=t.$t("Delete"),i=t.$t("ConfirmDeleteFilter")+t.$t("Remove");t.confirmR(i,!0,a,(function(){var a="id="+e.FILTER_ID+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&isDelete=1";l["a"].SearchCriteriaById(a).then((function(a){var i=a.data;null!=i&&"SUCCESS"==i.MSG&&(t.GetSearchFilterData(),e.DATABASE_CONDITION==t.$parent.searchCondition&&(t.$parent.searchCondition="","undefined"!=typeof t.callbackfunction&&null!=t.callbackfunction?t.callbackfunction():t.$parent.FetchData()),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Filter")]),"success",!0,t.$t("Filter")))}))}))},EditSearchFilterData:function(e){var t=this,a=0;t.TabId>0&&(a=t.TabId);var i="id="+e+"&type="+t.FilterType+"&tabId="+a+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode;t.filterItemData=[],l["a"].SearchCriteriaByIdView(i).then((function(a){var i=a.data;if(null!=i){var s=i.DATA,l=y.a.grep(s,(function(t,a){return t.VIEW_ID==e}));if(null!=l&&l.length>0&&(t.condition=l[0].CONDITION,t.databaseCondition=l[0].DATABASE_CONDITION),0==s.length){var o={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:"",value:"",second_value:"",showSecondValue:!1,picklist_options:"",label:"",dropdown_type:"",select_options:"",length:"",field_code:"",select_value:"",is_required:!1};t.filterItemData.push(o)}y.a.each(s,(function(e,a){var i=a.FIRST_VALUE,s=a.SECOND_VALUE;"date"==a.DT_CODE&&(i=t.formatDate(i),"between"==a.OPERATOR_EXPRESSION&&(s=t.formatDate(s)));var l={field_name:a.FIELD_ID,dt_code:a.DT_CODE,operator:a.OPERATOR_ID,operator_expression:a.OPERATOR_EXPRESSION,operator_list:t.MakeNormalArray(a.OPERATOR_LIST),value:t.MakeNormalArray(i),second_value:s,showSecondValue:!t.isBlank(a.SECOND_VALUE),picklist_options:a.PICKLIST_OPTIONS,label:a.LABEL,dropdown_type:a.DROPDOWN_TYPE,select_options:t.MakeNormalArray(a.SELECT_OPTIONS),length:a.LENGTH,field_code:a.FIELD_CODE,select_value:t.MakeNormalArray(a.SELECT_OPTIONS),is_required:a.IS_REQUIRED};t.filterItemData.push(l)})),t.SubmitData()}}))},ClearFilter:function(){this.$parent.appliedFilter[0].searchCondition==this.$parent.searchCondition&&(this.$parent.searchCondition="","undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():this.$parent.FetchData()),this.$parent.appliedFilter=[]},SubmitData:function(e){var t=this;t.$refs.form.validate().then(e=>{if(e=!!t.isEmpty,e){t.$parent.appliedFilter=[];var a=t.filterItemData,i=[];y.a.each(a,(function(e,a){var s=a.value,l=a.second_value;"select"==a.dt_code&&"custom"==a.dropdown_type&&(s=Array.isArray(a.value)?t.createString(a.value,"value"):a.value.value),"date"==a.dt_code&&(t.isBlank(l)||"between"!=a.operator_expression||(l=t.$options.filters.formatDate(l)),s=t.$options.filters.formatDate(a.value));var o={fieldId:a.field_name,operatorId:a.operator,firstValue:s,secondValue:l};i.push(o)})),"undefined"!=typeof t.CurrentObject&&null!=t.CurrentObject?t.CurrentObject.TabData=i:t.$parent.$parent.ViewData.FilterData=i}})},validateFilterData:function(){var e=this;e.filterItemData.length>0&&""!=e.filterItemData[0].field_name&&null!=e.filterItemData[0].field_name?void 0!=e.$parent.$parent.isFilterDataValidationError&&e.$refs.form.validate().then(t=>{e.$parent.$parent.isFilterDataValidationError=!t}):e.$parent.$parent.isFilterDataValidationError=!1},inputEvents(){},inputValue(){}}},w=D,I=Object(u["a"])(w,C,A,!1,null,null,null),T=I.exports,k={components:{mover:m,moveuser:g,searchfilter:T},props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function},show:{type:Boolean},usertype:{type:String}},data:function(){return{isLoading:!1,StatusId:this.dataselected,ViewData:{ViewId:0,Name:"",Description:"",ApplyTo:1,ApplicableUser:"",SelectedUser:"",Selectoptions:"",ViewTabData:[],Condition:"",FilterData:[],DatabaseCondition:""},ListUnselectedUsers:[],ListSelectedUsers:[],ListDepartment:[],UnselectedItems:[],SelectedItems:[],SubmoduleCode:this.submodulecode,ModuleName:this.modulename,ShowLisiting:!0,ListingData:[],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,noRecord:!0,isClearViewDisabled:!0,isFilterDataValidationError:!1,toggleUserGuide:"d-none"}},created:function(){var e=this;e.GetViewList()},watch:{dataselected:function(e){this.StatusId=e}},methods:{close:function(){this.$parent.ShowManageView=!1,$("#modalManageView").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},AddNewView:function(){this.ShowLisiting=!1,this.ViewData.ViewId=0,this.ViewData.Name="",this.FetchData()},BackToList:function(){this.ShowLisiting=!0},ClearView:function(){var e=this,t={ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},a=e.$t("Leave_Confirm_Part1")+" "+e.$t("Clear")+" "+e.$t("View")+"?";e.confirmR(a,!0,e.$t("Confirm"),(function(){var a=JSON.stringify(t);l["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.body.Code)?(e.ShowAlert(e.$t("ClearedSuccess",[e.$t("View")]),"Success",!0,e.$t("Alert")),e.close(),e.callbackfunction()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))}))},DefaultView:function(){var e=this,t={ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},a=JSON.stringify(t);l["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ApplySuccess",[e.$t("Default View")]),"success",!0,e.$t("Alert")),e.close(),e.callbackfunction(),e.GetViewList()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))},OnChangeToggle:function(e){var t=this;e.target.checked?t.ViewData.ApplyTo=1:t.ViewData.ApplyTo=0},isBlank:function(e){return!e||/^\s*$/.test(e)},GetLocalizedValue:function(e,t){if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)},CreateString:function(e,t,a){return e.map((function(e){return"int"==a?e[t]:"'"+e[t]+"'"})).join(",")},GetViewList:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId+"&pageSize="+this.PageSize+"&pageNum="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp;l["a"].GetViewList(t).then((function(t){if(null!=t.data&&""!=t.data){e.ListingData=t.data.DATA,e.TotalRecords=e.ListingData[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1;var a=0;e.ListingData.forEach((function(e){e.IS_SLECTED_USER_ID>0&&(a+=1)}));var i=0;a>0?e.ListingData.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:parseInt(e.TotalRecords+1),VIEW_TYPE:"",USER_LIST:""}):e.ListingData.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:parseInt(e.TotalRecords+1),VIEW_TYPE:"",USER_LIST:""})}else e.noRecord=!1,e.TotalRecords=1,e.ListingData.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:e.TotalRecords,VIEW_TYPE:"",USER_LIST:""});setTimeout((function(){e.SetBootstraptoolTip()}),200),e.checkIfClearViewDisabled()}))},deleteView:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Remove"),(function(){var a={ids:e,moduleName:"",subModuleCode:"",refCode:"DELETE_HOME_MANAGE_VIEW"};t.isLoading=!0;var i=JSON.stringify(a);l["a"].CommonCommonDelete(i).then((function(e){t.isLoading=!1;"Success"==e.data[0].Status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("View")]),"success",!0,t.$t("Alert")),t.callbackfunction(),$("#modalManageView").modal("hide"),window.location.reload()):t.ShowAlert(t.$t("DeletedError",[t.$t("View")]),"warning",!0,t.$t("Alert"))}))}))},EditManageView:function(e){var t=this;t.ViewData.ViewId=e;var a="moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&id="+t.ViewData.ViewId;l["a"].GetViewById(a).then((function(e){if(null!=e.data){var a=e.data.DATA;a.length>0&&(a=a[0],t.ViewData.Name=a.VIEW_NAME,t.ViewData.Description=a.DESCRIPTION,t.ViewData.ApplyTo=a.IS_APPLICABLE_TO_ALL,t.ViewData.Condition=a.CONDITION,t.ViewData.DatabaseCondition=encodeURIComponent(a.DATABASE_CONDITION)),t.ShowLisiting=!1,t.FetchData()}}))},ApplyView:function(e,t){var a=this;if(0==e)a.DefaultView();else{var i={ViewId:e,ModuleName:a.ModuleName,SubmoduleCode:a.submodulecode},s=JSON.stringify(i);l["a"].ApplyView(s).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(a.ShowAlert(a.$t("ApplySuccess",[a.$t(t)]),"success",!0,a.$t("Alert")),a.close(),a.callbackfunction(),a.GetViewList()):a.ShowAlert(a.$t("AddedError",[a.$t("View")]),"failure",!0,a.$t("Alert"))}))}},SaveViewData:function(){var e=this;$("#spnlistfieldssmessage").hide(),$("#spnusersmessage").hide(),$("#spncardfieldssmessage").hide(),$("#spncardtabsmessage").hide(),null!=e.SelectedItems&&0!=e.SelectedItems.length||$("#spnlistfieldssmessage").show(),"0"!=e.ViewData.IsApplicableToAll||null!=e.ListSelectedUsers&&0!=e.ListSelectedUsers.length||$("#spnusersmessage").show(),e.$refs.ManageViewLayoutData.validate().then(t=>{if(t){var a=[];$.each(e.SelectedItems,(function(e,t){var i={id:t.value,order:e+1,isSortable:t.isSortable};a.push(i)})),e.ViewData.DatabaseCondition=decodeURIComponent(e.ViewData.DatabaseCondition);var i={ViewData:e.ViewData,ListFields:a,FilterData:e.ViewData.FilterData,ShareUsers:e.CreateString(e.ListSelectedUsers,"value","int"),ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},s=JSON.stringify(i);l["a"].SaveView(s).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ViewData.ViewId>0?(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.callbackfunction()):(e.ShowAlert(e.$t("AddedSuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.callbackfunction()),e.GetViewList(),e.ShowLisiting=!0,e.close()):e.ShowAlert(e.$t("AddedError",[e.$t("View")]),"failure",!0,e.$t("Alert"))}))}else console.log(this.$refs.ManageViewLayoutData.errors)})},FetchData:function(){var e=this;e.isLoading=!0;var t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId;e.UnselectedItems=[],e.SelectedItems=[],l["a"].ViewListFields(t).then((function(t){if(t.data.AVAILABLE_FIELDS.length!==t.data.SELECTED_FIELDS.length)for(var a=t.data.AVAILABLE_FIELDS.length-1;a>=0;a--)for(var i=0;i<t.data.SELECTED_FIELDS.length;i++)t.data.AVAILABLE_FIELDS[a]&&t.data.AVAILABLE_FIELDS[a].NAME===t.data.SELECTED_FIELDS[i].NAME&&t.data.AVAILABLE_FIELDS.splice(a,1);t.data.AVAILABLE_FIELDS.length>0&&$.each(t.data.AVAILABLE_FIELDS,(function(t,a){var i={value:a.CUSTOM_FIELD_ID,displayValue:a.DISPLAY_NAME,isSortable:a.IS_SORTABLE,displayOrder:a.DISPLAY_ORDER,isSelected:!1,isSystemGenerated:a.IS_SYSTEM_GENERATED,isSortableEnabled:a.IS_SORTABLE_ENABLE};e.UnselectedItems.push(i)})),$.each(t.data.SELECTED_FIELDS,(function(t,a){var i={value:a.CUSTOM_FIELD_ID,displayValue:a.DISPLAY_NAME,isSortable:a.IS_SORTABLE,displayOrder:a.DISPLAY_ORDER,isSelected:!1,isSystemGenerated:a.IS_SYSTEM_GENERATED,isSortableEnabled:a.IS_SORTABLE_ENABLE};e.SelectedItems.push(i)})),e.isLoading=!1,e.FetchUserData()}))},FetchUserData:function(){var e=this;e.isLoading=!0,e.ListUnselectedUsers=[],e.ListSelectedUsers=[];var t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId;l["a"].ViewListUsers(t).then((function(t){e.isLoading=!1;var a=[];$.each(t.data.AVAILABLE_FIELDS,(function(t,a){var i={value:a.USER_ID,displayValue:a.USER_NAME,departmentName:a.DEPARTMENT_NAME,isSelected:!1};e.ListUnselectedUsers.push(i)})),e.ListUnselectedUsers=a,a=[],$.each(t.data.SELECTED_FIELDS,(function(t,a){var i={value:a.USER_ID,displayValue:a.USER_NAME,departmentName:a.DEPARTMENT_NAME,isSelected:!1};e.ListSelectedUsers.push(i)}))}))},ShowNextTab:function(e){var t=this;if(2==e)$("#scrollbarreplyuserguideMangeView .con").html(t.$t("MangeViewUG2")),""==$.trim(t.ViewData.Name)?t.ShowAlert(t.$t("Required",[t.$t("ViewName")]),"warning",!0,t.$t("Alert")):2==t.ViewData.ApplyTo&&0==t.ListSelectedUsers.length?t.ShowAlert(t.$t("PleaseSelectAtleastOneUser"),"warning",!0,t.$t("Alert")):($(".view_tab a").removeClass("active show"),$("li.selectcolumn").find("a").addClass("active"),$(".view_tab .tab-pane").removeClass("active show"),$(".view_tab a[href='#step2']").addClass("active show"),$(".view_tab #step2").addClass("active show"));else if(3==e){$("#scrollbarreplyuserguideMangeView .con").html(t.$t("MangeViewUG3"));var a=25;""==$.trim(t.ViewData.Name)?t.ShowAlert(t.$t("Required",[t.$t("ViewName")]),!0,"warning",t.$t("Alert")):2==t.ViewData.ApplyTo&&0==t.ListSelectedUsers.length?t.ShowAlert(t.$t("PleaseSelectAtleastOneUser")):0==t.SelectedItems.length?t.ShowAlert(t.$t("Pleaseselectatleastonecolumn"),"warning",!0,t.$t("Alert")):t.SelectedItems.length>a?t.ShowAlert(t.$t("SelectFieldMessage",[a]),"warning",!0,t.$t("Alert")):($(".view_tab a").removeClass("active show"),$("li.filter").find("a").addClass("active"),$(".view_tab .tab-pane").removeClass("active show"),$(".view_tab a[href='#step3']").addClass("active show"),$(".view_tab #step3").addClass("active show"))}},checkIfClearViewDisabled:function(){var e=this;if(null!=e.ListingData&&e.ListingData.length>0){var t=e.ListingData.filter((function(e){return e.IS_SLECTED_USER_ID>0}));t.length>0?e.isClearViewDisabled=!1:e.isClearViewDisabled=!0}else e.isClearViewDisabled=!0},ShowTabData:function(e){"1"==e?($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG1")),$("li.general").find("a").addClass("active"),$("li.selectcolumn").find("a").removeClass("active"),$("li.filter").find("a").removeClass("active"),$("div#step1").addClass("active show"),$("div#step2").removeClass("active show"),$("div#step3").removeClass("active show")):"2"==e?($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG2")),$("li.general").find("a").removeClass("active"),$("li.selectcolumn").find("a").addClass("active"),$("li.filter").find("a").removeClass("active"),$("div#step1").removeClass("active show"),$("div#step2").addClass("active show"),$("div#step3").removeClass("active show")):"3"==e&&($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG3")),$("li.general").find("a").removeClass("active"),$("li.selectcolumn").find("a").removeClass("active"),$("li.filter").find("a").addClass("active"),$("div#step1").removeClass("active show"),$("div#step2").removeClass("active show"),$("div#step3").addClass("active show")),this.$forceUpdate()},ShowUserGuide(){var e=this;"d-none"==e.toggleUserGuide&&(e.toggleUserGuide="d-block")}}},E=k,x=Object(u["a"])(E,i,s,!1,null,null,null);t["a"]=x.exports},"9eea":function(e,t,a){var i=a("2008");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("b9d6c960",i,!0,{sourceMap:!1,shadowMode:!1})},ab81:function(e,t,a){"use strict";a("122c")},b0dd:function(e,t,a){"use strict";a("14d9");var i=a("9769");let s=[{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add WorkOrder",iconClass:"fa fa-plus",callbackfunction:"openaddWorkOrder",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"}],l=[{fieldName:"WO Number",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["WO.workorder_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Number",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TICK.ticket_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Assigned To",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TICK.assigned_to"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Created Date",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.created_at"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]},{fieldName:"Created By",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.created_by"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Parent Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.parent_sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Sub Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Client",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.client_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Work Type",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.work_type_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Service Appointment",fieldType:"text",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSA.SA_Number"],isSearch:!1,value:"",listOptions:[]}],o=[{title:"Details",href:"javascript:void(0)",callbackfunction:"WorkOrderDetails",icon:"fa fa-ticket",additionalSpan:""},{title:"Update Status",href:"javascript:void(0)",icon:"fa fa-cog text-info",callbackfunction:"WorkOrderStatus",additionalSpan:""}],r=[{title:"View on Map",callbackfunction:"ViewonMap",href:"javascript:void(0)",icon:"fa action-icon fa-map",additionalSpan:""},{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"openQuickViewpopup",additionalSpan:""},{title:"Notes",callbackfunction:"ManageNote",href:"javascript:void(0)",icon:"fa fa-sticky-note",additionalSpan:""},{title:"Details",href:"javascript:void(0)",callbackfunction:"WorkOrderDetails",icon:"fa fa-ticket",additionalSpan:""},{title:"Status",href:"javascript:void(0)",icon:"fa fa-check",callbackfunction:"WorkOrderStatus",additionalSpan:""},{title:"Schdule",href:"javascript:void(0)",callbackfunction:"SchduleAppointment",icon:"fa fa-clock-o",additionalSpan:""},{title:"Add Service Appointment",href:"javascript:void(0)",icon:"fa fa-calendar-plus-o",callbackfunction:"AddServiceAppointment",additionalSpan:""}];async function n(e,t,a,s,l){var o=e,r="moduleName=Ticketing&type="+a;"USERS"==a?await i["a"].GetDDLData(r).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};o.leftSearchFields[2].listOptions.push(t),o.leftSearchFields[4].listOptions.push(t)})}):"Work_Order_Client_list"==a?await i["a"].GetDDLData(r).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};o.leftSearchFields[7].listOptions.push(t)})}):"Work_Order_Parent_Statuscode"==a?await i["a"].GetDDLData(r).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};o.leftSearchFields[5].listOptions.push(t)})}):"Work_Order_Child_Statuscode"==a?await i["a"].GetDDLData(r).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};o.leftSearchFields[6].listOptions.push(t)})}):"Work_Type_List"==a&&await i["a"].GetDDLData(r).then(e=>{""!=e.data&&e.data.DATA.length&&e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};o.leftSearchFields[8].listOptions.push(t)})})}t["a"]={buttons:s,leftsearchSchema:l,listActions:r,workOrderListActions:o,bindleftCommonSearchdropdown:n}},b8c3:function(e,t,a){"use strict";a("9eea")},bfab:function(e,t,a){a("14d9"),d3.geo.tile=function(){var e=[960,500],t=256,a=[e[0]/2,e[1]/2],i=0;function s(){var s=Math.max(Math.log(t)/Math.LN2-8,0),l=Math.round(s+i),o=Math.pow(2,s-l+8),r=[(a[0]-t/2)/o,(a[1]-t/2)/o],n=[],d=d3.range(Math.max(0,Math.floor(-r[0])),Math.max(0,Math.ceil(e[0]/o-r[0]))),c=d3.range(Math.max(0,Math.floor(-r[1])),Math.max(0,Math.ceil(e[1]/o-r[1])));return c.forEach((function(e){d.forEach((function(t){n.push([t,e,l])}))})),n.translate=r,n.scale=o,n}return s.size=function(t){return arguments.length?(e=t,s):e},s.scale=function(e){return arguments.length?(t=e,s):t},s.translate=function(e){return arguments.length?(a=e,s):a},s.zoomDelta=function(e){return arguments.length?(i=+e,s):i},s}},d7c8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"theme-primary partition-full"},[t("div",{staticClass:"p-actions legends_topbar float-right"},[t("div",{staticClass:"p-action-map collapse_map"},[t("a",{staticClass:"e-c-map p-action-btn text-white align-items-center d-flex",attrs:{href:"javascript:;"},on:{click:e.ShowHideMap}},[t("em",{staticClass:"fa pr-2",class:{"fa-angle-double-up":1==e.isShowMap,"fa-angle-double-down":0==e.isShowMap},attrs:{id:"icnToggleMap"}}),t("span",{attrs:{id:"spnToggleMap"}},[e._v(e._s(e.mapHeaderText))])])])])]),e.isShowMap?t("MapComponent",{staticClass:"row",attrs:{mapContainer:"workOrderMapDiv",mapType:"Google",Data:e.mapObj,latLng:e.latLng,config:e.config}}):e._e(),t("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsWorkOrderView,expression:"IsWorkOrderView"}],ref:"tgList",attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"FSM_WORKORDER",LegendArray:[],widgets:e.widgets,IdentityColumn:"id",HeaderText:e.$t("WorkOrder"),listType:e.ListView,ListData:e.WorkOrderData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.fetchRecords,ViewList:e.ViewList,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{ApplyView:e.OnApplyView,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["workorder_number"==a.column.COLUMN_NAME?[t("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/WorkOrderDetail/"+a.row.id+"/"+a.row.ticket_id,"data-toggle-tooltip":"tooltip"}},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME]))])]:e._e(),"sa_status"==a.column.COLUMN_NAME?[t("a",[t("span",{class:e.getSAStatusClassList(a.row.sa_status,"sa_status")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")])])]:e._e(),"status_id"==a.column.COLUMN_NAME?[t("a",{staticClass:"inactive-disabled"},["Active"!=a.row.status_id&&"ApprovalPending"!=a.row.status_id?t("span",{class:e.getStatusClassList(a.row.status_id,"status_id")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")]):e._e()])]:e._e()]}},{key:"customcard",fn:function({data:a}){return[t("div",{staticClass:"card-box expense-card px-2 d-flex flex-column justify-content-between blue-bg-light"},[t("div",{staticClass:"d-block mb-3 float-left"},[t("div",{staticClass:"expense-card-header"},[""!=a.row.sa_status?t("div",{staticClass:"card-number"},[e._v(" #"+e._s(a.row.workorder_number)+" ("+e._s(a.row.status_id)+"-"+e._s(a.row.sa_status)+") ")]):t("div",{staticClass:"card-number"},[e._v(" #"+e._s(a.row.workorder_number)+" ("+e._s(a.row.status_id)+") ")])]),""!=a.row.subject&&null!=a.row.subject?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.row.subject))])]):e._e(),""!=a.row.worktype_name&&null!=a.row.worktype_name?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),t("span",{staticStyle:{width:"auto"},attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Work Type"}},[e._v(e._s(a.row.worktype_name))])]):e._e(),""!=a.row.item_name&&null!=a.row.item_name?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.row.item_name))])]):e._e(),""!=a.row.assigned_to&&null!=a.row.assigned_to?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.row.assigned_to))])]):e._e(),""!=a.row.Address?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.row.Address))])]):e._e(),t("br")]),t("div",{staticClass:"scheduled_type"},[null==a.row.SA_Scheduled_StartTime&&null==a.row.SA_Scheduled_EndTime&&null!=a.row.StartDateTime?t("span",{staticClass:"text-info",staticStyle:{"font-weight":"500"}},[e._v(" Preferred Time ")]):e._e(),null!=a.row.SA_Scheduled_StartTime&&null!=a.row.SA_Scheduled_EndTime?t("span",{staticClass:"text-success",staticStyle:{"font-weight":"500"}},[e._v(" Scheduled Time ")]):e._e()]),t("div",{staticClass:"bottom-action"},[t("div",{staticClass:"card-date"},[null==a.row.SA_Scheduled_StartTime&&null==a.row.SA_Scheduled_EndTime&&null!=a.row.StartDateTime?t("span",{staticClass:"text-info"},[t("span",{staticClass:"preferedtime"},[e._v(" "+e._s(e.$options.filters.formatDateTime(a.row.StartDateTime)))]),t("span",{staticStyle:{float:"left","font-weight":"bold !important"}},[e._v("-")]),t("span",{staticClass:"preferedtime"},[e._v(" "+e._s(e.$options.filters.formatDateTime(a.row.EndDateTime)))])]):e._e(),null!=a.row.SA_Scheduled_StartTime&&null!=a.row.SA_Scheduled_EndTime?t("span",{staticClass:"text-success"},[t("span",{staticClass:"preferedtime"},[e._v(" "+e._s(e.$options.filters.formatDateTime(a.row.SA_Scheduled_StartTime)))]),t("span",{staticStyle:{float:"left","font-weight":"bold !important"}},[e._v("-")]),t("span",{staticClass:"preferedtime"},[e._v(" "+e._s(e.$options.filters.formatDateTime(a.row.SA_Scheduled_EndTime)))])]):e._e()]),t("div",{staticClass:"card-action"},[t("a",{staticClass:"round-icon-small btn-secondary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"ViewOnMap",title:"View on Map"},on:{click:function(t){return e.ViewonMap(a.row.ticket_id,a.row)}}},[t("em",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}})]),t("a",{staticClass:"round-icon-small btn-warning",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Notes",title:"Notes"},on:{click:function(t){return e.openNoteListPopUp(a.row)}}},[t("em",{staticClass:"fa fa-sticky-note-o"})]),t("a",{staticClass:"round-icon-small btn-primary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"QuickView",title:"Quick View"},on:{click:function(t){return e.openQuickViewpopup(a.row)}}},[t("em",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}})]),0==e.isViewMode?t("a",{staticClass:"round-icon-small btn-success",attrs:{id:"WOStatus",title:"Status"},on:{click:function(t){return e.WorkOrderStatus(a.row)}}},[t("em",{staticClass:"fa fa-tag"}),t("span",[e._v("Status")])]):e._e(),t("a",{staticClass:"round-icon-small btn-primary-light",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Detail",title:"Detail"},on:{click:function(t){return e.WorkOrderDetails(a.row,"Card")}}},[t("em",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}})]),"Completed"!=a.row.status_id&&"Failed"!=a.row.status_id&&"Canceled"!=a.row.status_id&&null!=a.row.SA_Id?t("a",{staticClass:"round-icon-small btn-success-light",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Schedule",title:"Schedule"},on:{click:function(t){return e.openScheduledAppointmentPopup(a.row)}}},[t("em",{staticClass:"fa fa-clock-o action-icon",attrs:{"aria-hidden":"true"}})]):e._e(),"Completed"!=a.row.status_id&&"Failed"!=a.row.status_id&&"Canceled"!=a.row.status_id&&null==a.row.SA_Id?t("a",{staticClass:"round-icon-small btn-success-light",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"AddServiceAppointment",title:"Add Service Appointment"},on:{click:function(t){return e.openAddServiceAppointment(a.row)}}},[t("em",{staticClass:"fa fa-calendar-plus-o action-icon",attrs:{"aria-hidden":"true"}})]):e._e()])])])]}}])}),e.AddWorkOrderModal?t("AddWorkOrderModal",{attrs:{WorkOrdrId:e.ticketSourceId,form:e.Workorder}}):e._e(),e.ShowManageView?t("ManageView",{attrs:{submodulecode:"FSM_WORKORDER",modulename:"Ticketing",callbackfunction:e.fetchRecords,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showquickviewModal?t("modalquickviewdetails",{attrs:{submodulecode:"FSM_WORKORDER",modulename:"Ticketing",WorkOrderDetails:e.IsWorkOrderDetails},on:{close:function(t){e.showquickviewModal=!1}}}):e._e(),e.shownotelist?t("NoteListPopUp",{attrs:{WorkOrderDetails:e.IsWorkOrderDetails}}):e._e(),e.statuslist?t("StatuslistPopUp",{attrs:{WorkOrderDetails:e.IsWorkOrderDetails}}):e._e(),e.IsSchduleAppointment?t("SchduleAppointment",{attrs:{SchduleAppointment:e.SchduleAppointment,SA_GroupData:e.SA_GroupData}}):e._e(),e.showPopupAddServiceAppointment?t("AddServiceAppointmentPopUp",{attrs:{SchduleObj:e.ObjectToAddServiceAppointment,callfrom:e.Workorder}}):e._e(),e.showFilter?t("SearchFilter",{attrs:{submodulecode:"FSM_WORKORDER",modulename:"Ticketing",callbackfunction:e.fetchRecords},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e()],1)},s=[],l=(a("14d9"),a("b0dd")),o=a("1788"),r=a("9769"),n=a("87de"),d=function(){var e=this,t=e._self._c;return t("section",[t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("QuickView"))+" ")]),t("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-5 mb-2"},[t("div",{staticClass:"p-2 bg-grey text-center"},[t("b",{staticClass:"font-weight-medium"},[e._v(e._s(e.$t("WorkOrderNumber"))+":")]),e._v(" "+e._s(e.WorkOrderDetails.workorder_number))])]),t("div",{staticClass:"col-lg-5 mb-2"},[t("div",{staticClass:"p-2 bg-grey text-center"},[t("b",{staticClass:"font-weight-medium"},[e._v(e._s(e.$t("Location"))+":")]),e._v(" "+e._s(e.WorkOrderDetails.Address))])]),t("div",{staticClass:"col-lg-2 mb-2"},[t("div",{staticClass:"p-2 bg-info text-center"},[t("a",{staticClass:"text-white",attrs:{href:"",title:"View Detail"}},[t("i",{staticClass:"fa fa-eye pr-2"}),e._v(e._s(e.$t("ViewDetail")))])])]),"FSM"==e.ticketType?t("div",{staticClass:"col-lg-12 mb-2"},[t("MapComponent",{key:e.componentKey,attrs:{mapType:"MapBox",mapContainer:"quickViewMapDiv",Data:e.mapObj,mapWidth:"1552px",mapHeight:"200px"}})],1):e._e()]),t("div",{staticClass:"accordion custom-accr",attrs:{id:"accordionExample"}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingOneQV"}},[t("a",{attrs:{"data-toggle":"collapse","data-target":"#collapseQV","aria-expanded":"true","aria-controls":"col\n                                            lapseOn"},on:{click:function(t){return e.openWorkOrderQuickView()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("WorkOrderDetail"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseQV","aria-labelledby":"headingQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},e._l(e.LeftViewData,(function(a,i){return t("div",{key:i,staticClass:"row px-2"},e._l(a.LeftViewData,(function(a,i){return t("p",{key:i,staticClass:"col-6"},["YES"==a.form_field_visibility?[t("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),t("span",{staticClass:"pl-1 font-weight-bold",attrs:{"data-visible":a.name+" "+a.form_field_visibility}},[e._v(e._s(e.$t(a.name,a.display_name))+":")]),t("span",{domProps:{innerHTML:e._s(a.value)}})]:e._e()],2)})),0)})),0)])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingSAQV"}},[t("a",{staticClass:"collapsed",attrs:{id:"tab-ServiceAppointment","data-toggle":"collapse","data-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseOn"},on:{click:function(t){return e.openServiceAppointmentQuickView()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("ServiceAppointment"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseTwo","aria-labelledby":"headingSAQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body w-100 float-left"},[t("tg-list",{attrs:{IsShowAction:!1,SearchPosition:"none",ModuleName:"Ticketing",SubModuleCode:"FSM_WORKORDER",LegendArray:[],widgets:e.widgets,IdentityColumn:"SA_ID",HeaderText:e.HeaderText,listType:["List"],ListData:e.ServiceAppointmentList,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.openServiceAppointmentQuickView,showCheckBox:!1,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["SA_NUMBER"==a.column.COLUMN_NAME?[t("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/ServiceAppointment/ViewSADetails/"+a.row.SA_ID,"data-toggle-tooltip":"tooltip",target:"_blank"}},[e._v(" "+e._s(a.row.SA_NUMBER))])]:e._e()]}}],null,!1,2092613614)})],1)])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"heading5QV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse5QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(t){return e.FetchAttachmentData()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Attachments"))+" ")]),e.showAddButton?[e.IsAddAttachment?t("a",{staticClass:"accordian-header-button btn btn-success float-right mb-1",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample6",title:"Add Attachment"},on:{click:function(t){return e.openAttachmentModel()}}},[t("i",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Attachment")))]):e._e()]:e._e()],2),t("div",{staticClass:"collapse",attrs:{id:"collapse5QV","aria-labelledby":"heading5QV","data-parent":"#accordionExample"}},[e.showAddButton?t("div",{staticClass:"card-body float-left w-100"},[t("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxFile"}}),t("div",{staticClass:"col-12 p-0 d-flex flex-wrap scroll",attrs:{id:"divAttachment"}},[e.showAttachmentModal?t("ShowTicketAttachmentData",{attrs:{id:e.sourceId,callbackfunction:e.FetchAttachmentData,modulename:"Ticketing",submodulecode:"Ticketing",configdata:e.ConfigData},on:{close:function(t){e.showAttachmentModal=!1}}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Attachments")))])]):e._e(),null!=e.AttachmentList?t("div",{staticClass:"listing pt-1"},[t("TicketAttachment",{attrs:{AttachmentData:e.AttachmentList,ListViewAttachment:e.ListViewAttachment},on:{"open-image":e.openSpecificImage}})],1):e._e(),e.noRecord?t("div",{staticClass:"text-danger text-center no-record float-left w-100"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()],1)]):e._e()])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingTimetrackQV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseTimeTrack","aria-expanded":"false","aria-controls":"collapseOn"},on:{click:function(t){return e.FetchTrackHistoryRecords()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("TimeTrack"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseTimeTrack","aria-labelledby":"headingTimetrackQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body w-100 float-left"},[t("tg-list",{attrs:{IsShowAction:!1,SearchPosition:"none",ModuleName:"Ticketing",SubModuleCode:"FSM_WORKORDER",LegendArray:[],widgets:e.widgets,IdentityColumn:"workorder_number",HeaderText:e.HeaderText,listType:["List"],ListData:e.TimeTrackHistoryList,HeaderData:e.TimeTrackHeaders,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.openServiceAppointmentQuickView,showCheckBox:!1,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata}})],1)])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header positionrelative",attrs:{id:"headingTwoQV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseTwoQV","aria-expanded":"false","aria-controls":"collapseTwo"},on:{click:function(t){return e.LoadNotesForQuickView("FSM")}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Notes"))+" ")]),e.showAddButton?t("a",{staticClass:"accordian-header-button btn btn-success addnotes",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample4",title:e.$t("AddNote")},on:{click:function(t){return e.LoadTicketTabData("addnotes",e.WorkOrderDetails.ticket_id,"FSM")}}},[t("i",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("AddNote")))]):e._e()]),t("div",{staticClass:"collapse",attrs:{id:"collapseTwoQV","aria-labelledby":"headingTwoQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"w-100"},[t("div",{staticClass:"w-100"},[e.isShowAddNote?t("AddNoteData",{attrs:{id:e.sourceId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:e.LoadNotesForQuickView,HeaderName:e.$t("AddNotes")}}):e._e()],1)]),t("div",{staticClass:"pb-2",attrs:{id:"div_NotesLabel"}},[t("span",{staticClass:"legend-Progress colorboxsquare"}),e._v(e._s(e.$t("Private"))+" "),t("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),e._v(e._s(e.$t("Public"))+" ")]),e.NoteList.length>0?t("div",{staticClass:"w-100",attrs:{id:"tab-notes-content-quickview"}},[t("TicketNotes",{attrs:{NoteData:e.NoteList}})],1):e._e()])])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingRIQV"}},[t("a",{staticClass:"collapsed",attrs:{id:"tab-ReportIncident","data-toggle":"collapse","data-target":"#collapseReportIncident","aria-expanded":"false","aria-controls":"collapseOn"},on:{click:function(t){return e.FetchReportIncidentRecords()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("ReportIncident"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseReportIncident","aria-labelledby":"headingRIQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body w-100 float-left"},[t("tg-list",{attrs:{IsShowAction:!1,SearchPosition:"none",ModuleName:"Ticketing",SubModuleCode:"FSM_WORKORDER",LegendArray:[],widgets:e.widgets,IdentityColumn:"workorder_number",HeaderText:e.HeaderText,listType:["List"],ListData:e.IncidentList,HeaderData:e.ReportIncidentHeaders,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.openServiceAppointmentQuickView,showCheckBox:!1,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata}})],1)])]),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingViewStatusQV"}},[t("a",{staticClass:"collapsed",attrs:{id:"tab-ViewStatus","data-toggle":"collapse","data-target":"#collapseViewStauts","aria-expanded":"false","aria-controls":"collapseOn"},on:{click:e.FetchViewStatusHistoryRecords}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("View"))+" "+e._s(e.$t("Status"))+" "+e._s(e.$t("History"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseViewStauts","aria-labelledby":"headingViewStatusQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body w-100 float-left"},[t("tg-list",{attrs:{IsShowAction:!1,SearchPosition:"none",ModuleName:"Ticketing",SubModuleCode:"FSM_WORKORDER",LegendArray:[],widgets:e.widgets,IdentityColumn:"workorder_number",HeaderText:e.HeaderText,listType:["List"],ListData:e.WorkOrderStatusHistoryList,HeaderData:e.ViewStatusHistoryHeaders,HeaderButtons:null,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,ListDataCallBackFunction:e.openServiceAppointmentQuickView,showCheckBox:!1,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["Form_Name"==a.column.COLUMN_NAME?[null!=a.row.FORMDATA&&1==a.row.IS_SUBMITED&&a.row.FORMDATA.length>0?t("select",{directives:[{name:"model",rawName:"v-model",value:a.row.selectedFormDataId,expression:"data.row.selectedFormDataId"}],staticClass:"form-control float-left",staticStyle:{width:"80%"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a.row,"selectedFormDataId",t.target.multiple?i:i[0])}}},e._l(a.row.FORMDATA,(function(a,i){return t("option",{key:i,domProps:{value:a.Formdata_Id}},[e._v(" "+e._s(a.Form_Name)+" ")])})),0):e._e(),null!=a.row.FORMDATA&&1==a.row.IS_SUBMITED&&a.row.FORMDATA.length>0?t("a",{attrs:{href:"javascript:;",title:"View Form"},on:{click:function(t){return e.ShowCustomFieldForm(a.row)}}},[t("em",{staticClass:"fa fa-eye action-link text-info"})]):e._e()]:e._e(),"Action"==a.column.COLUMN_NAME?[1==a.row.IS_SHOW_APPROVE_REJECT&&null==a.row.IS_APPROVE&&null!=a.row.FORMDATA&&a.row.FORMDATA.length>0&&1==a.row.IS_SUBMITED?t("a",{attrs:{href:"javascript:;",title:"Approve"},on:{click:function(t){return e.ApproveRejectStatus(a.row,"approve")}}},[t("em",{staticClass:"fa fa-check action-link text-success"})]):e._e(),1==a.row.IS_SHOW_APPROVE_REJECT&&null==a.row.IS_APPROVE&&null!=a.row.FORMDATA&&a.row.FORMDATA.length>0&&1==a.row.IS_SUBMITED?t("a",{attrs:{href:"javascript:;",title:"Reject"},on:{click:function(t){return e.ApproveRejectStatus(a.row,"reject")}}},[t("em",{staticClass:"fa fa-times action-link text-danger"})]):e._e()]:e._e()]}}],null,!1,1164959270)})],1)])])])])])])])],1)]),e.visible?t("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:e.galleryImages,customClasses:e.lightboxClasses},on:{close:function(t){e.visible=!1}}}):e._e()],1)},c=[],u=a("33e4"),p=a("fc96"),m=a("3e91"),f=a("6481"),h=a("0c69"),v=a("e8b2"),_={components:{MapComponent:u["a"],ShowTicketAttachmentData:m["a"],TicketAttachment:p["a"],AddNoteData:f["a"],TicketNotes:h["a"],VueEasyLightbox:v["a"]},props:{WorkOrderDetails:{Type:Object,required:!0}},data(){return{ListViewAttachment:0,visible:!1,isLoading:!1,widgets:[],LeftViewData:[],LOCATION_SE:"",LOCATION_NW:"",FORMATED_ADDRESS:"",TICKETNUMBER:"",SortExp:"",SortBy:"",PageSize:10,PageNumber:1,TotalRecords:0,ServiceAppointmentList:[],Headers:[{COLUMN_NAME:"SA_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"SA Number",DISPLAY_ORDER:1,settings:{isInSlot:!0}},{COLUMN_NAME:"WORKORDER_NUMBER",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WorkOrder Number",DISPLAY_ORDER:2},{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Ticket Number","DISPLAY_ORDER ":3},{COLUMN_NAME:"SA_SUBJECT",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:4},{COLUMN_NAME:"STATUS",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:5},{COLUMN_NAME:"CLIENT_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Client Name",DISPLAY_ORDER:6},{COLUMN_NAME:"SA_STREET",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Street",DISPLAY_ORDER:7},{COLUMN_NAME:"ASSIGNED_TO",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Assigned To",DISPLAY_ORDER:8},{COLUMN_NAME:"DATE",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Date",DISPLAY_ORDER:9},{COLUMN_NAME:"TIME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Time",DISPLAY_ORDER:10}],TimeTrackHeaders:[{COLUMN_NAME:"TRACK_DESCRIPTION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:1},{COLUMN_NAME:"TRACK_START_TIME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Start Time",DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_END_TIME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"End Time","DISPLAY_ORDER ":3},{COLUMN_NAME:"DURATION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Duration (HH:MM:SS)",DISPLAY_ORDER:4},{COLUMN_NAME:"Action",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Action",DISPLAY_ORDER:9,settings:{isInSlot:!0}}],ReportIncidentHeaders:[{COLUMN_NAME:"TYPE_NAME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"DESCRIPTION",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2},{COLUMN_NAME:"Action",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Action",DISPLAY_ORDER:3,settings:{isInSlot:!0}}],ViewStatusHistoryHeaders:[{COLUMN_NAME:"NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"PARENT_SUB_STATUS_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"CHILD_SUB_STATUS_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Sub Status",DISPLAY_ORDER:3},{COLUMN_NAME:"CHILD_SUB_STATUS_NAME",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Sub Status",DISPLAY_ORDER:4},{COLUMN_NAME:"COMMENT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:5},{COLUMN_NAME:"UPDATED_ON",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Update At",DISPLAY_ORDER:6},{COLUMN_NAME:"TRACK_AGENT",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Platform",DISPLAY_ORDER:7},{COLUMN_NAME:"Form_Name",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Form",DISPLAY_ORDER:8,settings:{isInSlot:!0}},{COLUMN_NAME:"Action",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Action",DISPLAY_ORDER:9,settings:{isInSlot:!0}}],AttachmentList:[],galleryFilesView:[],galleryImages:[],ConfigData:[],noRecord:!1,showAttachmentModal:!1,showAddButton:!0,TimeTrackHistoryList:[],NoteList:[],isShowAddNote:!1,IncidentList:[],NoRecord:!1,CurrentPage:1,WorkOrderStatusHistoryList:[],IsAddAttachment:!1,sourceId:null,ticketType:"",mapObj:[],componentKey:0,galleryImages:[]}},created:async function(){var e=this;e.sourceId=e.WorkOrderDetails.ticket_id,await e.openWorkOrderQuickView()},methods:{sortdata(){},actionButtonClick(){},commonHeaderButtonClick(){},pagerMethod(){},leftCommonSearch(){},renderActions(){},openAttachmentModel:function(){var e=this;e.showAttachmentModal=!0,$("#divAttachment").scrollTop(0)},openSpecificImage(e,t){var a=this;a.galleryImages=[];var i={path:e,caption:t.split(".")[0]};a.galleryImages.push(i),a.visible=!0},FetchAttachmentData:function(){var e=this;e.IsAddAttachment=!0,e.galleryImages=[],e.AttachmentList=[],e.galleryFilesView=[],e.isLoading=!0;var t="ticketId="+e.WorkOrderDetails.ticket_id;r["a"].GetTicketFiles(t).then((function(t){e.isLoading=!1,"Success"==t.data.status?(e.AttachmentList=t.data.result.DATA,e.ListViewAttachment=1,e.ConfigData=t.data.result.CONFIGDATA,null!=e.AttachmentList&&e.AttachmentList.length>0?(e.galleryFilesView=$.grep(e.AttachmentList,(function(t,a){return e.noRecord=!1,"pdf"!=JSON.parse(t.attachment_desc).Extension&&"word"!=JSON.parse(t.attachment_desc).Extension&&"excel"!=JSON.parse(t.attachment_desc).Extension&&"txt"!=JSON.parse(t.attachment_desc).Extension})),$.each(e.galleryFilesView,$.proxy((function(t,a){e.galleryImages.push(a.attachment_path)}),this))):e.noRecord=!0):(e.AttachmentList=null,e.noRecord=!0)}))},openServiceAppointmentQuickView(){var e=this;e.isLoading=!0;var t=`id=${e.WorkOrderDetails.id}&pagesize=${e.PageSize}&pagenumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&search=`;r["a"].GetServiceAppointmentByWorkOrderId(t).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.ServiceAppointmentList=t.data.result.DATA,e.isLoading=!1)})},openWorkOrderQuickView:async function(){var e=this;e.isLoading=!0;var t=`id=${e.WorkOrderDetails.id}&moduleName=Ticketing&subModuleCode=FSM_WORKORDER`;await r["a"].ViewPageDetails(t).then((function(t){if(e.isLoading=!1,null!=t.data.result){var a=t.data.result.LEFTDATA;if(a=$.grep(a,(function(t,a){if("LOCATION_SE"==t.name&&(e.LOCATION_SE=t.value),"LOCATION_NW"==t.name&&(e.LOCATION_NW=t.value),"Address"==t.name&&(e.FORMATED_ADDRESS=t.value),"ticket_number"==t.name&&(e.TICKETNUMBER=t.value),"NO"!=t.form_field_visibility)return"select"==t.dt_code&&"Lookup"==t.picklist_options&&(t.value=e.FilterDDLandNormalValue(t.value)),"YES"==t.form_field_visibility})),null!=a&&a.length>0){var i=a[0].group_id;$.each(a,$.proxy((function(t,s){i=s.group_id;var l=$.grep(e.LeftViewData,(function(e,t){return e.group_id==i}));if(0==l.length){var o=$.grep(a,(function(e,t){return e.group_id==i}));if(o.length>0){var r={group_id:i,group_name:o[0].group_name,LeftViewData:o};e.LeftViewData.push(r)}}}),this))}e.mapObj=[];var s={refValue:e.TICKETNUMBER,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:e.LOCATION_SE,longitude:e.LOCATION_NW},polygons:[{name:"",latLong:[{latitude:e.LOCATION_SE,longitude:e.LOCATION_NW}]}],address:e.FORMATED_ADDRESS,priority:"",color_code:""};if(e.mapObj.push(s),e.ticketType="FSM","Google"==t.data.result.FSM_MAP_CONFIG[0].TYPE){var l=document.createElement("script");l.type="text/javascript",l.readyState?l.onreadystatechange=function(){"loaded"!=l.readyState&&"complete"!=l.readyState||(l.onreadystatechange=null)}:l.onload=function(){initializeGoolgeMap("Google",t.data.result.FSM_MAP_CONFIG[0].API_KEY,s)},l.src="https://maps.googleapis.com/maps/api/js?key="+t.data.result.FSM_MAP_CONFIG[0].API_KEY+"&libraries=places",document.getElementsByTagName("head")[0].appendChild(l)}else if("MapBox"==t.data.result.FSM_MAP_CONFIG[0].TYPE){l=document.createElement("script");l.type="text/javascript",l.readyState?l.onreadystatechange=function(){"loaded"!=l.readyState&&"complete"!=l.readyState||(l.onreadystatechange=null)}:l.onload=function(){LoadMapBox("MapBox",t.data.result.FSM_MAP_CONFIG[0].API_KEY,s)},l.src="//api.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.js",document.getElementsByTagName("head")[0].appendChild(l);var o=document.createElement("script");o.type="text/javascript",o.src="//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js",document.getElementsByTagName("head")[0].appendChild(o)}else{l=document.createElement("script");l.type="text/javascript",l.readyState?l.onreadystatechange=function(){"loaded"!=l.readyState&&"complete"!=l.readyState||(l.onreadystatechange=null)}:l.onload=function(){LoadLeafLetQuickview("LeafLet",t.data.result.FSM_MAP_CONFIG[0].API_KEY,s)},l.src="//unpkg.com/leaflet@1.6.0/dist/leaflet.js",document.getElementsByTagName("head")[0].appendChild(l);o=document.createElement("script");o.type="text/javascript",o.src="/Scripts/FsmMaps/dist/leaflet_markerclusterer.js",document.getElementsByTagName("head")[0].appendChild(o)}setTimeout(()=>{e.SetResponsiveTab(),e.RadioButtonBootstrap()},500)}}))},FetchTrackHistoryRecords(){var e=this;e.isLoading=!0;var t=`ticketingId=${e.WorkOrderDetails.ticket_id}&pagesize=${e.PageSize}&pagenumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&workCodeId=${e.WorkOrderDetails.id}&lang=EN`;r["a"].TrackHistoryList(t).then(t=>{e.isLoading=!1,e.TimeTrackHistoryList=[],null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.TimeTrackHistoryList=t.data.result.DATA,null!=e.TimeTrackHistoryList&&e.TimeTrackHistoryList.length>0&&(e.TotalRecords=t.data.result.DATA[0].TOTALRECORDS))})},LoadNotesForQuickView:async function(e){var t=this;t.NoteList=[],t.isLoading=!0,null!=e&&"undefined"!=e||(e=t.moduleName);var a=`ticketId=${t.sourceId}&isSuptTckt=false&moduleName=${e}&isView=1`;await r["a"].GetWorkOrderNoteList(a).then((function(e){t.isLoading=!1,null!=e.data&&e.data.length>0?(t.NoteList=e.data,$("#tab-notes-content-quickview").removeClass("d-none")):($("#div_NotesLabel").removeClass("d-none"),t.noRecord=!0)}))},LoadTicketTabData:function(e,t,a){var i=this;if(""!=e){"addnotes"==e&&"/Ticketing/EditNote";var s=[];s.push({name:"ticketId",value:t}),"addnotes"!=e&&"transfer"!=e||s.push({name:"moduleName",value:a});var l=JSON.stringify(s);r["a"].EditNote(l).then(e=>{1003==e.TicketStatusId?($("#divloadticketdata").empty().html(""),ShowAlert(Globalize.localize("SorryThetickethavebeendeleted"),"failure",!0,Globalize.localize("Alert"),!0)):("FSM"==a&&($("#hdnissupttckt").val("@ViewBag.IsSupportTicket"),$("#divloadticketdata").removeClass("hide").addClass("show"),$("#div_NotesLabel").addClass("d-none"),$("#tab-notes-content-quickview").addClass("d-none"),i.isShowAddNote=!0,$("#divNotes").scrollTop(0)),$("#divloadticketdata").show().empty().html(e.data),$("#divNotes").scrollTop(0))})}},FetchReportIncidentRecords(){var e=this,t=`ticketingId=${e.WorkOrderDetails.ticket_id}&pagesize=${e.PageSize}&pagenumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&workCodeId=${e.WorkOrderDetails.id}&lang=EN`;r["a"].FetchReportIncidentRecords(t).then(t=>{null!=t.data&&""!=t.data&&("Success"==t.data.status?(e.IncidentList=t.data.result.data,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.IncidentList.length>0?(e.TotalRecords=t.data.result.data[0].TOTALRECORDS,e.NoRecord=!1):e.NoRecord=!0):e.NoRecord=!0)})},FetchViewStatusHistoryRecords(){var e=this,t=`ticketingId=${e.WorkOrderDetails.ticket_id}&pagesize=${e.PageSize}&pagenumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&workOrderId=${e.WorkOrderDetails.id}`;r["a"].FetchViewStatusHistoryRecords(t).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.status?(e.WorkOrderStatusHistoryList=t.data.result.DATA,e.WorkOrderStatusHistoryList.length>0?($.each(e.WorkOrderStatusHistoryList,(function(e,t){null!=t.FORMDATA&&(t.selectedFormDataId=t.FORMDATA[0].Formdata_Id)})),e.TotalRecords=t.data.result.DATA[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):e.noRecord=!0):e.noRecord=!0})},ApproveRejectStatus:function(e,t){var a=this,i="",s="";"approve"==t?(i="Are you sure you want to Approve the Status?",s="approve"):(i="Are you sure you want to Reject the Status?",s="Reject"),a.confirmR(i,!0,s,(function(){var i={Id:e.ID,IsApprove:"approve"==t?1:0,SupervisorComment:void 0!=e.SupervisorDescription?e.SupervisorDescription:null},s=JSON.stringify(i);r["a"].ApproveRejectStatus(s).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&"SUCCESS"==e.data.result.MSG?(e.data.result.SAVED_FORM_DATA_ID,a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.FetchViewStatusHistoryRecords()):a.ShowAlert(a.$t("ErrorWhileUpdating",[a.$t("Status")]),"failure",!0,a.$t("Alert"))}))}))}}},S=_,g=(a("ab81"),a("2877")),C=Object(g["a"])(S,d,c,!1,null,"30937973",null),A=C.exports,b=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Notes")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.Close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[e.IsNoteList?[t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"heading-border mb-3"},[t("h5",{staticClass:"h5"},[t("span",[e._v(" "+e._s(e.$t("Notes")))]),t("small",{staticClass:"float-right"},[t("a",{staticClass:"addnotes",attrs:{title:"Add Note"},on:{click:e.AddNote}},[t("i",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("AddNote")))])])])])])]:e._e(),e.IsNoteList?[t("span",{staticClass:"legend-Progress colorboxsquare"}),e._v(e._s(e.$t("Private"))+" "),t("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),e._v(e._s(e.$t("Public"))+" "),e.NoteList.length>0?t("div",{staticClass:"w-100 pt-2"},[t("TicketNotes",{attrs:{NoteData:e.NoteList}})],1):e._e()]:e._e(),e.IsNoteList?e._e():[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.UploadFileWithNote},scopedSlots:e._u([{key:"tgslot-Description",fn:function({data:a}){return[t("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady},model:{value:e.Descriptionn,callback:function(t){e.Descriptionn=t},expression:"Descriptionn"}})]}}],null,!1,3501734821)})]],2)])])])],1)},y=[],D=(a("b7ef"),{components:{TicketNotes:h["a"]},props:{WorkOrderDetails:{Type:Object,required:!0}},data(){return{editor:this.CLASSIC_EDITOR,isLoading:!1,IsNoteList:!0,NoteList:[],FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.ShowNoteList}],ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},ticketType:"",Descriptionn:null}},created:function(){this.LoadWorkorderNotes(this.WorkOrderDetails.ticket_id)},methods:{Close(){this.$parent.shownotelist=!1},AddNote(){this.IsNoteList=!1},ShowNoteList(){this.IsNoteList=!0},async LoadWorkorderNotes(e){var t=this;t.NoteList=[],t.isLoading=!0;var a="TicketId="+e;await r["a"].GetWorkOrderNoteList(a).then((function(e){t.isLoading=!1,null!=e.data&&e.data.length>0?t.NoteList=e.data:t.noRecord=!0}))},onChangeRadio:function(e,t){this.ticketType=e.target.getAttribute("data-value")},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),l=a.name;t.fileName=l;var o=l.lastIndexOf("."),r=l.substring(o+1,l.length);t.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',d=a.size;t.fileSize=d;var c={attachement_mime:n,fileName:l,base64String:s,fileSize:a.size,contentType:a.type};t.fileData.push(c)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(e,t){var a=this;a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.Descriptionn,a.ticketModel.TicketId=a.WorkOrderDetails.ticket_id,a.ticketModel.ModuleName="FSM",a.ticketModel.SubModuleCode="FSM_WORKORDER",a.ticketModel.fileData=a.fileData;var i=JSON.stringify(a.ticketModel);r["a"].AddNote(i).then(e=>{try{null!=e.data&&""!=e.data&&"Success"==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),a.LoadWorkorderNotes(this.WorkOrderDetails.ticket_id),a.ShowNoteList()):a.ShowAlert(a.$t("AddedError",[a.$t("Notes")]),"failure",!0,a.$t("Alert"))}catch(t){return HandleErrorOccured(t,"saveNote")}})}}}),w=D,I=Object(g["a"])(w,b,y,!1,null,null,null),T=I.exports,k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("WorkOrderStatus")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.Close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.OnSubmit}})],1)])])])],1)},E=[],x={props:{WorkOrderDetails:{Type:Object,required:!0}},data(){return{isLoading:!1,FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1},validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:function(){var e=this;e.GetDropDownData("WORK_ORDER_FINAL_STATUS"),e.FormSchema[0].Data[0].value=e.WorkOrderDetails.WO_Status_Id},methods:{Close(){this.$parent.statuslist=!1},GetDropDownData:function(e){var t=this;t.isLoading=!0;var a=`id=&moduleName=Ticketing&type=${e}&search=&refId=`;r["a"].GetDDLData(a).then(a=>{200==a.status&&"WORK_ORDER_FINAL_STATUS"==e&&(t.FormSchema[0].Data[0].config.options=a.data.DATA),t.isLoading=!1})},OnSubmit(e,t){var a=this;a.isLoading=!0;var i={Id:a.WorkOrderDetails.id,StatusId:e.Status},s=JSON.stringify(i);r["a"].MarkAsDone(s).then(e=>{1==e.data?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.Close(),a.$parent.FetchData()):a.ShowAlert(a.$t("ErrorWhileUpdating",[a.$t("Status")]),"failure",!0,a.$t("Alert")),a.isLoading=!1})}}},N=x,L=Object(g["a"])(N,k,E,!1,null,null,null),O=L.exports,M=a("3a09"),R=a("6c0e"),F=a("69d3"),V={components:{SearchFilter:F["a"],AddWorkOrderModal:o["a"],ManageView:n["a"],modalquickviewdetails:A,MapComponent:u["a"],NoteListPopUp:T,StatuslistPopUp:O,SchduleAppointment:M["a"],AddServiceAppointmentPopUp:R["a"]},data(){return{isLoading:!1,showFilter:!1,SA_GroupData:[],ListView:["List","Card"],config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!0},mapHeaderText:"Expand Map",ShowManageView:!1,listActions:l["a"].listActions,WorkOrderData:[],ViewList:[],AddWorkOrderModal:!1,Workorder:"WorkOrder",widgets:[{icon:"fa fa-list-ul",value:0,name:"Completed",class:"one_wid",onClick:this.widgetClick},{icon:"fa fa-ticket",value:0,name:"In progress",class:"two_wid",onClick:this.widgetClick},{icon:"fa fa-line-chart",value:0,name:"Need To Reschedule",class:"three_wid",onClick:this.widgetClick},{icon:"fa fa-reply",value:0,name:"Scheduled",class:"four_wid",onClick:this.widgetClick},{icon:"fa fa-calendar-check-o",value:0,name:"Unscheduled",class:"five_wid",onClick:this.widgetClick},{icon:"fa fa-file-text",value:0,name:"Cancelled",class:"six_wid",onClick:this.widgetClick}],isShowMap:!1,noRecord:!1,WorkOrderListing:!0,viewType:"List View",classView:"fa fa-th-list",IsSchduleAppointment:!1,WorkOrderCard:!1,showWorkOrderModal:!1,Headers:[],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",str_ticket_id:"",TicketID:"",IsSupervisor:0,IsLoad:!1,IsLocator:0,UserType:"",Latitude:"",Longitude:"",MapIndex:null,CurrentItem:null,ShowLocatorMap:!1,ShowSupervisorMap:!1,TicketIdNumber:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,mapAPIKey:"",MapType:"",map:"",listheaderbuttons:l["a"].buttons,leftSearchFields:l["a"].leftsearchSchema,isExtraMapFeatEnabled:"",showPopupAddServiceAppointment:!1,UserList:null,IsWorkOrderView:!0,WorkOrdrId:"",showquickviewModal:!1,IsWorkOrderDetails:null,mapObj:[],latLng:null,shownotelist:!1,IsFSMVIEWMODE:"",isViewMode:null,statuslist:!1,IsExtraMapFetureEnabled:"",SchduleAppointment:{},ObjectToAddServiceAppointment:{},appliedFilter:[],searchCondition:"",latLong:"",ViewListId:"",CompanyUserType:""}},created:async function(){var e=this;e.viewType="undefined"==typeof localStorage.viewType||"true"==localStorage.getItem("viewType")?"Card View":"List View","Card View"==e.viewType?(e.WorkOrderListing=!1,e.WorkOrderCard=!0):(e.WorkOrderListing=!0,e.WorkOrderCard=!1);var t=localStorage.getItem("ListCardView");e.ListView="List"==t||null==t?["List","Card"]:["Card","List"],await e.GetDdlRecords_ViewList(),await e.fetchRecords(),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","USERS"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Work_Order_Client_list"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Work_Order_Parent_Statuscode"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Work_Order_Child_Statuscode"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Work_Type_List"),e.CheckConfigurationValueByKey("","FSMVIEWMODE"),e.isViewMode="yes"==this.IsFSMVIEWMODE?1:0,await e.IsExtraMapFeature(),e.CompanyUserType=e.GetUserInfo.UserType,localStorage.removeItem("ListCardView")},methods:{openFilter(){this.showFilter=!0},widgetClick:function(e){var t=this;t.selectedWidgetCode=e.name,"In progress"==t.selectedWidgetCode&&(t.selectedWidgetCode="inprogress"),"Completed"==t.selectedWidgetCode&&(t.selectedWidgetCode="completed"),"Need To Reschedule"==t.selectedWidgetCode&&(t.selectedWidgetCode="needtoreschedule"),"Scheduled"==t.selectedWidgetCode&&(t.selectedWidgetCode="scheduled"),"UnScheduled"==t.selectedWidgetCode&&(t.selectedWidgetCode="unscheduled"),"Cancelled"==t.selectedWidgetCode&&(t.selectedWidgetCode="cancelled"),t.fetchRecords()},FilterData:function(e,t,a,i,s,l){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=s,null!=typeof l&&this.appliedFilter.push(l),this.fetchRecords()},CheckConfigurationValueByKey(e,t){var a=`moduleName=${e}&configkey=${t}`;r["a"].CheckConfigurationValueByKey(a).then(e=>{null!=e.data&&(this.IsFSMVIEWMODE=e.data.CONFIG_DATA_VALUE)})},IsExtraMapFeature:async function(){await r["a"].IsExtraMapFeature().then(e=>{"locating"==e.data?this.IsExtraMapFetureEnabled=!0:this.IsExtraMapFetureEnabled=!1})},ShowHideMap:function(){0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse Map"):(this.isShowMap=!1,this.mapHeaderText="Expand Map")},leftCommonSearch:function(e){var t=this;""==e.searchCondition&&(t.selectedWidgetCode=""),this.PageNumber=e.PageNumber,this.isPaged=1,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.fetchRecords()},ManageView:function(){var e=this;e.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show"),setTimeout((function(){e.SetBootstraptoolTip()}),200)}),1e3)},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"openFilterPopUp":this.openFilter();break;case"openaddWorkOrder":this.openPopupForAddWorkOrder(null);break;case"removeFilter":var t=this;t.searchCondition="";const e=t.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);t.listheaderbuttons[e].isvisible=!1;const i=t.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(a){}t.fetchRecords();break;case"ManageView":this.ManageView();break}},openFilter(){this.showFilter=!0},actionButtonClick:function(e,t,a,i){switch(e){case"WorkOrderDetails":this.WorkOrderDetails(t,"List");break;case"openQuickViewpopup":this.openQuickViewpopup(t);break;case"ManageNote":this.openNoteListPopUp(t);break;case"WorkOrderStatus":this.WorkOrderStatus(t);break;case"ViewonMap":this.ViewonMap(t,t);break;case"SchduleAppointment":this.openScheduledAppointmentPopup(t);break;case"AddServiceAppointment":this.openAddServiceAppointment(t);break}},ViewonMap:function(e){var t=this;t.latLng=e,t.isShowMap=!0},openNoteListPopUp(e){this.shownotelist=!0,this.IsWorkOrderDetails=e},WorkOrderStatus(e){this.statuslist=!0,this.IsWorkOrderDetails=e},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.fetchRecords()},openPopupForAddWorkOrder:function(e){void 0==e&&(e=0),this.ticketSourceId=e,this.AddWorkOrderModal=!this.AddWorkOrderModal},getStatusClassList:function(e){var t="";switch(e){case"UnPublish":t="px-2 text-center bg-danger text-white d-block";break;case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Reopen":t="px-2 bg-primary text-center text-white d-block";break;case"On Hold":t="px-2 bg-warning text-center text-white d-block";break;case"Draft":t="px-2 text-center bg-warning text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;case"Open":t="px-2 text-center bg-success text-white d-block";break;case"Waiting":t="px-2 text-center bg-success text-white d-block";break;case"In progress":t="px-2 bg-secondary text-center text-white d-block";break;case"Completed":t="px-2 bg-secondary text-center text-white d-block";break;case"Cancelled":t="px-2 bg-danger text-center text-white d-block";break;case"Closed":t="px-2 bg-danger text-center text-white d-block";break;case"Closed and Locked":t="px-2 bg-danger text-center text-white d-block";break;case"Waiting Resolved":t="px-2 bg-secondary text-center text-white d-block";break;case"Waiting Response":t="px-2 bg-secondary text-center text-white d-block";break;default:t=""}return t},getSaStatusData(e){var t="";return""!=e&&"Completed"!=e&&(t=" - "+e),t},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.fetchRecords(),$("#"+e+"  span:first-child").attr("class",t)},openQuickViewpopup(e){this.IsWorkOrderDetails=e,this.showquickviewModal=!0},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(t=>{let i={...t};switch(i.title){case"Quick View":i.isVisible=!0;break;case"Details":i.isVisible=!0;break;case"Notes":i.isVisible=!0;break;case"View on Map":i.isVisible=!0;break;case"Schdule":i.isVisible="Completed"!=e.status_id&&"Failed"!=e.status_id&&"Canceled"!=e.status_id&&null!=e.SA_Id;break;case"Status":i.isVisible=0==this.isViewMode;break;case"Add Service Appointment":i.isVisible="Completed"!=e.status_id&&"Failed"!=e.status_id&&"Canceled"!=e.status_id&&null==e.SA_Id;break;default:i.isVisible=!0}a.push(i)}),a},fetchRecords:async function(){var e=this;e.isLoading=!0;var t="";t="";if(this.isBlank(this.searchCondition)||(t+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(t+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=t){if(e.appliedFilter.length>0){const t=e.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);e.listheaderbuttons[t].isvisible=!0;const a=e.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);e.listheaderbuttons[a].iconClass="fa fa-filter text-success"}}else if(0==e.appliedFilter.length){const t=e.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);e.listheaderbuttons[t].isvisible=!1;const a=e.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);e.listheaderbuttons[a].iconClass="fa fa-filter"}var a=`pageSize=${e.PageSize}&pageNumber=${e.PageNumber}&sortBy=${e.SortBy}&sortExp=${e.SortExp}&code=${e.selectedWidgetCode}`;e.isBlank(e.searchCondition)||(a=e.searchCondition.includes("TICK.ticket_number")||e.searchCondition.includes("WO.workorder_number")||e.searchCondition.includes("TSA.SA_Number")?a+"&search="+encodeURIComponent(this.searchCondition):a+"&search="+e.searchCondition),await r["a"].WorkOrderList(a).then((function(t){e.isLoading=!1,"undefined"!=typeof t.data.result.mapdetail&&null!=typeof t.data.result.mapdetail&&t.data.result.mapdetail.length>0&&(e.latLong=t.data.result.mapdetail[0].LATITUDE+","+t.data.result.mapdetail[0].LONGITUDE),""!=t.data&&null!=t.data?(e.Headers=t.data.result.schema,e.Headers.forEach(e=>{"workorder_number"==e.COLUMN_NAME&&(e.DISPLAY_NAME="WO Number",e.settings={isInSlot:!0}),"sa_status"==e.COLUMN_NAME&&(e.DISPLAY_NAME="SA Status",e.settings={isInSlot:!0}),"sub_status_id"==e.COLUMN_NAME&&(e.VISIBLE=!1),"parent_sub_status_id"==e.COLUMN_NAME&&(e.VISIBLE=!1),"status_id"==e.COLUMN_NAME&&(e.settings={isInSlot:!0,isForTag:!0})}),t.data.result.data.length>0&&""!=t.data.result?(e.WorkOrderData=t.data.result.data,e.AllResponseData=t.data.result,e.CurrentItem=null,e.IsSupervisor=t.data.result.IS_SUPERVISOR,e.IsLocator=t.data.result.IS_LOCATOR,e.UserType=t.data.result.USERTYPE_NAME,e.TotalRecords=t.data.result.data[0].TOTALRECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.GetDdlRecords_ViewList(),e.noRecord=!1,e.IsLoad=!0):(e.noRecord=!0,e.WorkOrderData=[],e.TotalRecords=0),0==t.data.result.CompletedSACount?e.CompletedSACount=0:e.widgets[0].value=t.data.result.CompletedSACount,0==t.data.result.InProgressSACount?e.InProgressSACount=0:e.widgets[1].value=t.data.result.InProgressSACount,0==t.data.result.NeedToRescheduleSACount?e.NeedToRescheduleSACount=0:e.widgets[2].value=t.data.result.NeedToRescheduleSACount,0==t.data.result.ScheduledSACount?e.ScheduledSACount=0:e.widgets[3].value=t.data.result.ScheduledSACount,0==t.data.result.UnscheduledSACount?e.UnscheduledSACount=0:e.widgets[4].value=t.data.result.UnscheduledSACount,0==t.data.result.CancelledSACount?e.CancelledSACount=0:e.widgets[5].value=t.data.result.CancelledSACount):(e.noRecord=!0,e.WorkOrderData=[],e.Headers=[],e.TotalRecords=0),t.data.result.data.forEach((function(t){var a=e.$options.filters.formatDate(t.created_at),i={latlong:e.latLong,refValue:t.ticket_number,popupHeaderHtml:'<div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+t.ticket_number+'<span class="status">'+t.priority+"</span></h1>",popupHeaderColor:"",popupBodyHtml:'<p class="details"><i class="fa fa-calendar" style="font-size: 19px;margin-right: 6px;"></i><span style="text-transform:uppercase !important;">'+a+'</span></p><p class="details"><i class="fa fa-wrench" style="font-size: 19px;margin-right: 6px;"></i><span>'+t.work_type_id+'</span></p><p class="details"><i class="fa fa-map-marker" style="font-size: 25px;margin-right: 7px;margin-left: 3px;"></i><span>'+t.Address+"</span></p>",popupFooterHtml:'<span class="p-2"><a href="javascript:;"><i class="fa fa-file-pdf-o"></i> 0</a><a href="javascript:;"><i class="fa fa-image"></i> 0</a><a href="javascript:;"><i class="fa fa-video-camera"></i> 0</a></span>',pinLatLong:{latitude:t.location_nw,longitude:t.location_nw},polygons:[{name:"",latLong:[{latitude:t.location_nw,longitude:t.location_nw}]}],address:t.Address,priority:t.priority,color_code:t.color_code};e.mapObj.push(i)})),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},ShowTicketOnMap:function(e,t){this.IsObject(e)||(e=JSON.parse(e));var a=this;if(a.ShowSupervisorMap=!1,"true"!=a.ExpandMap&&0!=a.IsMapView||$(window).scrollTop(1e3),$("html, body").animate({scrollTop:0},"slow"),a.CurrentItem=e,a.Latitude=e.location_nw,a.Longitude=e.location_se,a.MapIndex=t,"none"==$("#divmapdata").css("display")){var i=$("#icnToggleMap"),s=$("#spnToggleMap");$("#divmapdata").slideToggle(),i.hasClass("fa-angle-double-down")&&(i.removeClass("fa-angle-double-down"),i.addClass("fa-angle-double-up"),s.html("Collapse map")),setTimeout((function(){"block"==$("#divmapdata").css("display")&&LoadMapJsCode(checkVue.AllResponseData,checkVue),setTimeout((function(){ShowTicketOnMapIndexMap(e,t)}),700)}),500)}else ShowTicketOnMapIndexMap(e,t)},ShowEtaMap:function(e){var t=this;"super"==e?(t.ShowLocatorMap=!1,t.ShowSupervisorMap?(t.ShowSupervisorMap=!1,RemoveAllFeatureAndImages()):(t.ShowSupervisorMap=!0,LoadLocatoronMap())):(t.ShowSupervisorMap=!0,t.ShowLocatorMap?(t.ShowLocatorMap=!1,$(".anchideduration,.ancshowduration,.bg-gray-faint").hide(),RemoveAllFeatureAndImages()):(t.ShowLocatorMap=!0,t.ShowSupervisorMap=!1,LoadETAMap())),$("#divmapdata").slideDown()},changeWorkOrderView:function(){var e=this;e.WorkOrderListing=!e.WorkOrderListing,e.WorkOrderCard=!e.WorkOrderCard,"List View"==e.viewType?(e.viewType="Card View",e.classView="fa fa-th-large"):(e.viewType="List View",e.classView="fa fa-th-list"),localStorage.setItem("viewType",e.viewType),e.fetchRecords()},OnApplyView(e){var t=this;if("0"==e)t.DefaultView();else{var a={ViewId:e,ModuleName:"Ticketing",SubmoduleCode:"FSM_WORKORDER"},i=JSON.stringify(a);r["a"].ApplyView(i).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(t.ShowAlert(t.$t("ApplySuccess",[t.$t("View")]),"success",!0,t.$t("Alert")),t.$emit("RefreshManageView"),t.fetchRecords()):t.ShowAlert(t.$t("AddedError",[t.$t("View")]),"failure",!0,t.$t("Alert"))}))}},DefaultView:function(){var e=this,t={ModuleName:"Ticketing",SubmoduleCode:"FSM_WORKORDER"},a=JSON.stringify(t);r["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ClearSuccess",[e.$t("DefaultView")]),"success",!0,e.$t("Alert")),e.fetchRecords()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))},GetDdlRecords_ViewList:async function(){var e=this;e.ViewList=[];var t="moduleName=Ticketing&subModuleCode=FSM_WORKORDER&viewId=0&pageSize=10&pageNum=1&sortBy=&sortExp=";await r["a"].GetViewList(t).then((function(t){t.data&&"undefined"!=typeof t.data.DATA&&(e.ViewList=t.data.DATA);var a=0;e.ViewListId="0",null==e.ViewList||""==e.ViewList||e.ViewList.forEach((function(t){t.IS_SLECTED_USER_ID>0&&(a+=1,e.ViewListId=t.VIEW_ID)}));var i=0;a>0?e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):null==e.ViewList||""==e.ViewList?e.ViewList.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}),setTimeout(()=>{e.ViewListId>0?e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId=e.ViewListId:e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId="0"},1e3)}))},openScheduledAppointmentPopup:function(e){var t=this;t.SchduleAppointment=e,t.IsSchduleAppointment=!t.IsSchduleAppointment},openAddServiceAppointment:function(e){this.ObjectToAddServiceAppointment=e,this.showPopupAddServiceAppointment=!this.showPopupAddServiceAppointment},WorkOrderDetails:function(e,t){localStorage.setItem("ListCardView",t);let a=this.$router.resolve({name:"WorkOrderDetail",params:{id:e.id,ticket_id:e.ticket_id}});window.open(a.href)}}},P=V,U=(a("b8c3"),Object(g["a"])(P,i,s,!1,null,null,null));t["default"]=U.exports},e234:function(e,t,a){"use strict";a("5214")},fc96:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[e._l(e.AttachmentList,(function(a,i){return t("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[t("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),t("div",{staticClass:"box border positionrelative float-left w-100"},[t("div",{staticClass:"default-tags"},[t("div",{staticClass:"defaultpic_control"},["FSM"==e.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?t("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:e.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-placement":"left"},on:{click:function(t){return e.openVideoPlayer(a.C[0].ATTACHMENTFULLPATH,a.ATTACHMENT_NAME,"",a.GEOFILE_PATH)}}},[t("em",{staticClass:"fa fa-globe"})]):e._e(),1==e.ListViewAttachment&&1==e.CheckExtension(a.attachment_desc,a.GEOFILE_PATH)?t("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:e.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(t){return e.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[t("em",{staticClass:"fa fa-eye"}),t("br")]):e._e(),t("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:e.$t("DownloadFile"),"data-placement":"left"},on:{click:function(t){return e.DownloadAttachment(a)}}},[t("em",{staticClass:"fa fa-download"}),t("br")]),a.CREATED_BY==e.UserId?t("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:e.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(t){return e.deleteAttachment(a)}}},[t("em",{staticClass:"fa fa-trash text-danger"}),t("br")]):e._e()])]),t("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[e.setImageIcon(a)?"word-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==e.setImageIcon(a)?t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-text-o"}):e._e():t("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=e.setImageIcon(a)?t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:e.setImageIcon(a),alt:""}}):t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),t("hr",{staticClass:"my-1"}),t("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[t("div",{staticClass:"col-12 textelipsis px-2"},[e._v(e._s(a.attachment_name))]),t("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[t("small",{staticClass:"float-left textelipsis col-6 p-0"},[t("span",[e._v(e._s(a.PostedBy))])]),t("small",{staticClass:"float-right col-6 text-right p-0"},[e._v(e._s(e.$options.filters.formatDateTime(a.CREATED_AT)))])])])])])})),e.NoRecords?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[t("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2),e.ShowGPXFile?t("ShowGPXFile",{attrs:{GpxFileXmlData:e.GpxFileXmlData,videoFilePath:e.videoFilePath,gpxFilePath:e.gpxFilePath}}):e._e()],1)},s=[],l=a("9769"),o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("ViewOnMap")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{attrs:{id:"video_player_box"}},[t("div",{staticStyle:{position:"absolute",top:"249px",left:"16%",color:"#FFF","font-size":"36px !important",display:"none"},attrs:{id:"div_videoLoad"}},[e._v("Loading...")]),t("input",{attrs:{type:"hidden",id:"hiddn_XmlFile"},domProps:{value:e.GpxFile}}),t("input",{attrs:{type:"hidden",id:"hiddn_GpxXmlData"},domProps:{value:e.GpxFileXmlData}}),t("video",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"my_video",preload:"none"}},[t("source",{attrs:{src:e.videoFilePath}})])]),t("div",{staticClass:"dDataDropZone",attrs:{id:"gpxCtr"}},[t("div",{attrs:{id:"intro"}},[t("div",{staticClass:"map_canvas map_ipadcontrol",staticStyle:{"min-height":"496px","min-width":"600px"},attrs:{id:e.mapContainer}})])]),t("a",{staticClass:"bg-primary text-white map-botton change-map-icon",attrs:{href:"javascript:;",title:e.MapTitle},on:{click:e.changeMapViewForGpx}},[t("i",{class:e.MapClass})]),e._m(0),e._m(1)])])])])])])},r=[function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"video_controls_bar"}},[t("div",[t("button",{staticClass:"btn btn-info",staticStyle:{width:"90px",float:"left"},attrs:{id:"playpausebtn"}},[e._v("Pause")]),t("input",{staticClass:"slider",staticStyle:{width:"80%"},attrs:{id:"seekslider",type:"range",min:"0",max:"100",value:"0",step:"1"}}),t("span",{attrs:{id:"curtimetext"}},[e._v("00:00")]),e._v(" / "),t("span",{attrs:{id:"durtimetext"}},[e._v("00:00")])])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"none"},attrs:{id:"appTitle"}},[t("span",{attrs:{id:"appName"}},[e._v("d3.gpx")]),e._v(" "),t("span",{staticClass:"sample"})])}],n=(a("14d9"),a("e11e")),d=a.n(n),c=(a("6cc5"),a("bfab"),{props:{GpxFileXmlData:{type:String,required:!0},videoFilePath:{type:String,required:!0},gpxFilePath:{type:String,required:!0}},data(){return{isLoading:!1,map:null,mapContainer:"Gpx",mapTypeForGpx:"streets-v11",GpxFile:"",vid:"",playbtn:"",seekslider:"",curtimetext:"",durtimetext:"",d3gpx:"",MapClass:"fa fa-map-o",MapTitle:"Street View"}},created:function(){var e=this;let t=document.createElement("script");t.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"),document.head.appendChild(t),setTimeout(()=>{this.initMap(),e.intializePlayer()},2e3)},methods:{initMap:function(){var e=this;e.map=d.a.map(e.mapContainer).setView([51.505,-.09],13),d.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(e.map);var t=e.gpxFilePath;new d.a.GPX(t,{async:!0})},changeMapViewForGpx:function(){var e=this;"fa fa-map-o"==e.MapClass?(e.mapTypeForGpx="streets-v11",e.MapClass="fa fa-map",e.MapTitle="Satellite View"):(e.mapTypeForGpx="satellite-v9",e.MapClass="fa fa-map-o",e.MapTitle="Street View"),e.getGPXFile(),$(".map-botton.change-map-icon").tooltip("dispose"),setTimeout((function(){$(".map-botton.change-map-icon").tooltip()}),100)},getGPXFile:function(){var e=this;document.getElementById("hiddn_XmlFile").value;var t=(new DOMParser).parseFromString(document.getElementById("hiddn_GpxXmlData").value,"text/xml"),a={d:t,t:e.mapTypeForGpx},i=i||function(){var e,t,a,i,s,l,o,r,n,d,c,u,p,m,f,h,v,_,S,g,C,A,b,y,D=-1,w=!1,I=[],T=[],k=[],E=[],x=[],N=[],L=[],$=[],O=d3.time.format.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",function(){return!0}]]),M={top:10,right:10,bottom:10,left:10},R=650-M.left-M.right,F=50-M.bottom-M.top,V=0,P=0,U=!1,B=.2,W=0,G=[.1,.001,625e-7,625e-8],j=0,Y=[],q=!0,H=6,z=function(e){if(d3.event&&d3.event.sourceEvent){P=_.invert(d3.mouse(this)[0]);var s=Math.abs(window.innerHeight-j)*(2/3),l=Math.min(Math.abs(d3.event.sourceEvent.y-j),s),o=l/s,r=H;return W=0,o>=0&&o<.25?(W=0,r=H):o>=.25&&o<.5?(W=1,r=4.242640687119285):o>=.5&&o<.75?(W=2,r=3):o>=.75&&o<=1&&(W=3,r=2.1213203435596424),C.transition().duration(200).attr("r",r),Q(),void J()}e&&g.call(S.extent([t[0],t[0]])).call(S.event),V=S.extent()[0],C.attr("cx",_(V));var n=d3.time.format("%d %b %Y %I:%M:%S %p"),d=Math.round(V),c=n(new Date(d));d3.select("div#console").text(c),d3.select("svg#testArea circle.track").attr("transform",(function(e){return"translate("+f([a(new Date(d)),i(new Date(d))])+")"})),le(new Date(d))},K=function(){P=V},J=function(e){if(U)return!1;U=!0,d3.select("button#playpausebtn").attr("disabled","true"),d3.timer((function(){var e=G[W];(e>B||e<0)&&(e=B),console.log("first Current Value: - "+V),V=Math.abs(V-P)<.001?P:P*e+V*(1-e),console.log("Current Value: - "+P),g.call(S.extent([V,V])).call(S.event);var t=Math.round(V/1e3)!==Math.round(P/1e3);return t||d3.select("button#playpausebtn").attr("disabled",null),!(U=t)}),200)},Q=function(){clearTimeout(D),D=-1,w=!1,U=!1,d3.select("button#playpausebtn").text("Play")},X=function(e){D=setTimeout((function(){if(U)return!1;U=!0,w=!0,d3.select("button#playpausebtn").text("Pause"),P=t[1];var e=new Date(S.extent()[0]),a=new Date;d3.timer((function(){var t=new Date-a;V=e.getTime()+t,g.call(S.extent([V,V])).call(S.event),console.log(V);var i=Math.round(V/1e3)<Math.round(P/1e3),s=!U||!(U=i)||!w||-1==D;return s&&(d3.select("button#playpausebtn").text("Play"),Q()),s}))}),e?0:3e3)},Z=function(e,t){return e<<t<0?Z(e,--t):e<<t},ee=function(){var e=ae(b),t=e[0],a=e[1],i=h.bounds(m),s=Z(.95/Math.max((i[1][0]-i[0][0])/t,(i[1][1]-i[0][1])/a),8);s=Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),s=Math.min(s,v.scaleExtent()[1]),s=Math.max(s,v.scaleExtent()[0]);var l=f.scale(s/2/Math.PI)(d3.geo.centroid(m)),o=f([0,0]),r=[t/2-(l[0]-o[0]),a/2-(l[1]-o[1])];v.scale(s).translate(r)},te=function(){var t=!0;d3.event&&(o==d3.event.scale?(t=!1,q=!1):(t=!0,q=!0),q&&(Y=d3.event.translate,q=!1),o=d3.event.scale);var s=d3.geo.tile().size(ae(b)).scale(v.scale()).translate(v.translate())();if(f.scale(v.scale()/2/Math.PI).translate(v.translate()),t||!d3.event)b.select("path.trackpath").attr("d",h).attr("transform",null);else{var l=d3.event.translate[0]-Y[0],r=d3.event.translate[1]-Y[1];b.select("path.trackpath").attr("transform");b.select("path.trackpath").attr("transform","translate("+[l,r]+")")}var n=Math.round(S.extent()[0]);b.select("circle.track").attr("transform",(function(e){return"translate("+f([a(new Date(n)),i(new Date(n))])+")"}));var d=y.attr("transform","scale("+s.scale+")translate("+s.translate+")").selectAll("image").data(s,(function(e){return e}));d.exit().remove(),d.enter().append("image").attr("xlink:href",(function(t){return"https://api.mapbox.com/styles/v1/mapbox/"+e+"/tiles/"+t[2]+"/"+t[0]+"/"+t[1]+"?access_token=pk.eyJ1Ijoic2VxdWVsZ3JvdXAiLCJhIjoiY2pmMHUyaDhjMDM2djJxbG5iMDJ5aTB5dyJ9.V1L6SU58S2GIyFS2BP20SA"})).attr("width",1).attr("height",1).attr("x",(function(e){return e[0]})).attr("y",(function(e){return e[1]}))},ae=function(e){return[parseInt(e.style("width"),10),parseInt(e.style("height"),10)]},ie=function(e,t,a){if(t.length==a.length){var i=d3.extent(t),s=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=s[0]&&void 0!=s[1]){for(var o=[],d=0;d<t.length;d++)o.push({date:t[d],speed:a[d]});r=300,n=100,u=d3.time.scale().range([0,r]).domain(i).clamp(!0),p=d3.scale.linear().range([n,0]).domain(s).clamp(!0),l=d3.time.scale().domain(t).range(a).clamp(!0);var c=d3.svg.line().x((function(e){return u(e.date)})).y((function(e){return p(e.speed)}));e.style("float","left").style("width",r+3*M.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var m=e.append("svg").attr("id","speedChart").attr("class","dataChart").attr("width",r+"px").attr("height",n+"px").style("padding-left",4*M.left+"px").style("padding-right",3*M.left+"px").style("padding-top",2*M.left+"px").style("padding-bottom",2*M.left+"px").append("g"),f=d3.svg.axis().scale(u).orient("bottom").tickFormat(O).ticks(5).outerTickSize(0),h=d3.svg.axis().scale(p).orient("left").tickFormat((function(e){return d3.format("s")(3.6*e)})).ticks(5).outerTickSize(0).innerTickSize(-r);m.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(n+3)+")").call(f),m.append("g").attr("class","y chartAxis").call(h).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Speed (kph)"),m.append("path").datum(o).attr("class","chartLine").attr("d",c)}}},se=function(e,t,a){if(t.length==a.length){var i=d3.extent(t),l=d3.extent(a);if(void 0!=i[0]&&void 0!=i[1]&&void 0!=l[0]&&void 0!=l[1]){for(var o=[],u=0;u<t.length;u++)o.push({date:t[u],ele:a[u]});r=300,n=100,d=d3.time.scale().range([0,r]).domain(i).clamp(!0),c=d3.scale.linear().range([n,0]).domain(l).clamp(!0),s=d3.time.scale().domain(t).range(a).clamp(!0);var p=d3.svg.line().x((function(e){return d(e.date)})).y((function(e){return c(e.ele)}));e.style("float","left").style("width",r+3*M.left*2+"px").style("background-color","rgba(255,255,255,0.4)");var m=e.append("svg").attr("id","elevationChart").attr("class","dataChart").attr("width",r+"px").attr("height",n+"px").style("padding-left",3*M.left+"px").style("padding-right",3*M.left+"px").style("padding-top",2*M.left+"px").style("padding-bottom",2*M.left+"px").append("g"),f=d3.svg.axis().scale(d).orient("bottom").tickFormat(O).ticks(5).outerTickSize(0),h=d3.svg.axis().scale(c).orient("left").tickFormat(d3.format("s")).ticks(5).outerTickSize(0).innerTickSize(-r);m.append("g").attr("class","x chartAxis").attr("transform","translate(0,"+(n+3)+")").call(f),m.append("g").attr("class","y chartAxis").call(h).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Elevation (m)"),m.append("path").datum(o).attr("class","chartLine").attr("d",p)}}},le=function(e){var t="elevationFocus",a="speedFocus",i=d3.select("svg#elevationChart g"),o=d3.select("svg#speedChart g"),r=i.select("g#"+t),n=o.select("g#"+a);if(!i.empty()&&r.empty()&&(r=i.append("g").attr("id",t),r.append("circle").attr("id",t+"Circle").attr("class","chartCircle").attr("r",2.5),r.append("text").attr("id",t+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!o.empty()&&n.empty()&&(n=o.append("g").attr("id",a),n.append("circle").attr("id",a+"Circle").attr("class","chartCircle").attr("r",2.5),n.append("text").attr("id",a+"Text").attr("class","chartCircleText").attr("text-anchor","middle").attr("dy","-0.7em")),!i.empty()){var m=s(e);r.attr("transform","translate("+d(e)+","+c(m)+")"),r.select("text#"+t+"Text").text(d3.format(",.2f")(m)+" m")}if(!o.empty()){var f=l(e);n.attr("transform","translate("+u(e)+","+p(f)+")"),n.select("text#"+a+"Text").text(d3.format(",.2f")(3.6*f)+" kph")}};return{play:function(){X(!0)},pause:function(){Q()},scroll:function(){J()},stopScroll:function(){K()},setPointerPosition:function(e){var a=Math.round(I.length*(e/100)-1);a>0?g.call(S.extent([I[a],I[a]])).call(S.event):g.call(S.extent([t[0],t[0]])).call(S.event)},loadGPXViewer:function(s){var l=s.d;e=s.t,I=[],T=[],k=[],E=[],x=[],N=[],L=[],$=[],Q(),K();d3.select(l).selectAll("trk").selectAll("trkseg").selectAll("trkpt").each((function(){var e=parseFloat(d3.select(this).attr("lat")),t=parseFloat(d3.select(this).attr("lon"));k.push(e),T.push(t),$.push([t,e]),I.push(d3.select(this).select("time").node()?new Date(d3.select(this).select("time").text()):null),E.push(d3.select(this).select("ele").node()?parseFloat(d3.select(this).select("ele").text()):null),x.push(d3.select(this).select("course").node()?parseFloat(d3.select(this).select("course").text()):null),N.push(d3.select(this).select("speed").node()?parseFloat(d3.select(this).select("speed").text()):null),L.push(d3.select(this).select("pdop").node()?parseFloat(d3.select(this).select("pdop").text()):null)}));if($.length<=1)return alert("GPX file should contain at least a track, made of at least one segment containing waypoints."),!1;d3.select("body").selectAll("div#gpxCtr *, div#appTitle div#playbackControl").remove(),t=d3.extent(I),a=d3.time.scale().domain(I).range(T).clamp(!0),i=d3.time.scale().domain(I).range(k).clamp(!0),m={type:"LineString",coordinates:$},f=d3.geo.mercator().scale(1024/Math.PI),h=d3.geo.path().projection(f),v=d3.behavior.zoom().scaleExtent([1,"Infinity"]).scale(2*f.scale()*Math.PI).translate([window.innerWidth/2,window.innerHeight/2]).on("zoom",te),_=d3.time.scale().domain(t).range([0,R]).clamp(!0),S=d3.svg.brush().x(_).extent([0,0]).on("brush",z).on("brushstart",(function(){d3.event&&d3.event.sourceEvent&&(j=d3.event.sourceEvent.y)})).on("brushend",(function(){d3.event&&d3.event.sourceEvent&&(0!=W&&K(),C.transition().duration(200).attr("r",H))}));var o=d3.select("div#appTitle").append("div").attr("id","playbackControl"),r=d3.select("body div#gpxCtr"),n=(o.append("div").attr("id","console").style("font-size","smaller").style("font-weight","normal").style("position","absolute").style("line-height","45px").style("right","10px").style("top","0px").style("padding-right","10px"),o.append("button").attr("id","playpausebtn").style("right",R+M.left+M.right+10+170+10+"px").text("Play").on("click",(function(e){w||-1!=D?Q():X(!0)})),o.append("svg").attr("id","timeslider").attr("width",R+M.left+M.right+10).attr("height",F+M.top).style("position","absolute").style("right","170px").style("top","0px").append("g").attr("transform","translate("+M.left+",0)")),d=n.append("g").attr("class","axisLine").attr("transform","translate(0,"+(F/2+3)+")").style("font-size","0 pt").call(d3.svg.axis().scale(_).tickFormat(O).tickValues(null));d.selectAll("text").remove(),d.selectAll("path").remove(),n.append("g").attr("class","x axis").attr("transform","translate(0,"+F/2+")").style("font-size","6 pt").style("fill","#fff").call(d3.svg.axis().scale(_).tickFormat(O).tickPadding(12).tickSize(0)).select(".domain").style("stroke","#111").select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("class","halo").style("stroke-opacity",1).style("stroke","#fff"),g=n.append("g").attr("class","slider").call(S),g.selectAll(".extent,.resize").remove(),g.select(".background").attr("height",F).attr("fill","#111").style("cursor","ew-resize"),C=g.append("circle").attr("class","handle").attr("transform","translate(0,"+F/2+")").attr("r",H).style("fill","#fff"),A=r.append("div").style("width","100%").style("height","100%"),b=A.append("svg").attr("id","testArea").style("height","100%").style("width","100%").call(v),y=b.append("g"),b.append("path").datum(m).attr("class","trackpath").attr("d",h).attr("fill","none").attr("stroke","rgb(222,45,38)").attr("stroke-width",1),b.append("circle").attr("class","track").attr("id","testTrack").attr("r",4).style("fill","rgb(222,45,38)").style("stroke-width",1).style("stroke","rgb(0,0,0)");var c=r.append("div").attr("id","chartGroup");return se(c.append("div"),I,E),ie(c.append("div"),I,N),ee(),te(),setTimeout((function(){z(!0)}),200),!0}}}();e.d3gpx=i,i.loadGPXViewer(a)},playPause:function(){var e=this;e.vid.paused?(100==e.seekslider.value&&(e.seekslider.value=0,e.d3gpx.setPointerPosition(e.seekslider.value)),e.vid.play(),e.d3gpx.play(),e.playbtn.innerHTML="Pause"):(e.vid.pause(),e.d3gpx.pause(),e.playbtn.innerHTML="Play")},vidSeek:function(){var e=this;e.vid.pause(),e.d3gpx.pause(),e.playbtn.innerHTML="Play";e.vid.duration,e.seekslider.value;e.d3gpx.setPointerPosition(e.seekslider.value)},seektimeupdate:function(){var e=this,t=e.vid.currentTime*(100/e.vid.duration);e.seekslider.value=t;var a=Math.floor(e.vid.currentTime/60),i=Math.floor(e.vid.currentTime-60*a),s=Math.floor(e.vid.duration/60),l=Math.floor(e.vid.duration-60*s);i<10&&(i="0"+i),l<10&&(l="0"+l),a<10&&(a="0"+a),s<10&&(s="0"+s),e.curtimetext.innerHTML=a+":"+i,e.durtimetext.innerHTML=s+":"+l},intializePlayer:function(){var e=this;$(".map-botton.change-map-icon").tooltip(),e.vid=document.getElementById("my_video"),e.playbtn=document.getElementById("playpausebtn"),e.seekslider=document.getElementById("seekslider"),e.curtimetext=document.getElementById("curtimetext"),e.durtimetext=document.getElementById("durtimetext"),e.playbtn.addEventListener("click",e.playPause,!1),e.seekslider.addEventListener("change",e.vidSeek,!1),e.seekslider.addEventListener("input",e.vidSeek,!1),e.vid.addEventListener("timeupdate",e.seektimeupdate,!1),e.vid.onwaiting=function(){e.d3gpx.pause()},e.vid.onplaying=function(){e.d3gpx.play()},e.seekslider.value=0,e.getGPXFile(),e.seektimeupdate()},Close:function(){this.$parent.ShowGPXFile=!1}}}),u=c,p=(a("e234"),a("2877")),m=Object(p["a"])(u,o,r,!1,null,null,null),f=m.exports,h={components:{ShowGPXFile:f},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:"FSM",UserId:null,isLoading:!1,index:0,GpxFileXmlData:"",ShowGPXFile:!1,videoFilePath:"",gpxFilePath:""}},watch:{AttachmentData:function(e){var t=this;t.AttachmentList=e,t.AttachmentList.length>0?t.NoRecords=!1:(t.AttachmentList=[],t.NoRecords=!0)}},created(){var e=this;e.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{e.UserId=e.GetUserInfo.ID,e.GalleryImages=e.galleryImages,"undefined"!=typeof e.AttachmentData&&e.AttachmentData.length>0?(e.RequestFrom=e.AttachmentData.RequestFrom,e.AttachmentList=e.AttachmentData,e.NoRecords=!1):(e.AttachmentList=[],e.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(e,t){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",e,t),a.$parent.visible=!0},CheckExtension(e,t){var a=0;if(null==t||""==t)return"jpg"!=JSON.parse(e).Extension&&"jpeg"!=JSON.parse(e).Extension&&"png"!=JSON.parse(e).Extension&&"gif"!=JSON.parse(e).Extension||(a=1),a},setImageIcon(e){var t=this,a="/Content/Responsive/images/",i=t.getExtension(e.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(e){let t=e.split(/[\\/]/).pop(),a=t.lastIndexOf(".");return""===t||a<1?"":t.slice(a+1)},openVideoPlayer:function(e,t,a,i){var s=this;s.videoFilePath=e,s.gpxFilePath=i;var o=`videoFilePath=${e}&videoFileName=''&videoFileType=${a}&gpxFilePath=${i}`;l["a"].ShowGpxPlayer(o).then((function(e){s.GpxFileXmlData=e.data,s.ShowGPXFile=!0}))},deleteAttachment:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Remove"),(function(){var a="attachmentid="+e.ticket_attachment_id;l["a"].DeleteIncidentAttachment(a).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&"SUCCESS"==e.data.result.MSG?("AttachmentInDetail"==t.viewMode?document.getElementById("tab-attachment").click():"AttachmentInWorkOrderDetail"==t.viewMode?document.getElementById("tab-attachments").click():t.$parent.FetchAttachmentData(),t.ticket_attachment_id>0?t.ShowAlert(t.$t("Attachment has been successfully deleted"),"success",!0,t.$t("Alert")):(t.ShowAlert(t.$t("Attachment has been successfully deleted"),"success",!0,t.$t("Alert")),t.$emit("close"))):t.ShowAlert(t.$t("ErrorWhileSavingRecords",[t.$t("failure")]),"success",!0,t.$t("Alert"))}))}))},DownloadAttachment(e){var t=this;t.isLoading=!0;var a=`filePath=${e.attachment_path}&fileName=${e.attachment_name}`;l["a"].DownloadFile(a).then((function(a){t.isLoading=!1;const i=a.data,s=`data:${JSON.parse(e.attachment_desc).ContentType};base64,${i}`;var l=document.createElement("a");l.href=s,l.setAttribute("download",e.attachment_name),document.body.appendChild(l),l.click()})),t.isLoading=!1}}},v=h,_=Object(p["a"])(v,i,s,!1,null,null,null);t["a"]=_.exports}}]);
//# sourceMappingURL=chunk-7907a119.js.map