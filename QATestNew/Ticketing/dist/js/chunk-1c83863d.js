(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c83863d"],{"0c69":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoteList.length>0?[e("div",{staticClass:"row card-view no-bg custom-box-width"},t._l(t.NoteList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[e("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?e("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:t.$t("Image")}}):e("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),e("div",{staticClass:"card-detail-main1 dynamiclistol"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.CREATED_BY_NAME))])]),e("hr",{staticClass:"my-2"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"260px"}},[e("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:t._s(a.NOTE)}})])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.CREATED_AT?t.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),e("div",{staticClass:"card-action"},[e("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})]),1!=t.ListNoteData?e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:t.$t("EditNotes"),alt:t.$t("EditNotes"),href:"javascript:;"},on:{click:function(e){return t.EditNote(a)}}},[e("em",{staticClass:"fa fa-edit"})]):t._e()])])])])})),0)]:t._e(),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center d-block no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)},s=[],o=a("9769"),r={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(t){var e=this;e.NoteList=t,e.NoteList.length>0?e.NoRecords=!1:(e.NoteList=[],e.NoRecords=!0)}},created(){setTimeout(()=>{var t=this;t.UserId=t.GetUserInfo.ID,t.ListNoteData=this.ListNoteData,null!=t.NoteData?(t.NoteList=t.NoteData,t.NoRecords=!1):(t.NoRecords=!0,t.NoteList=[])},2e3)},methods:{EditNote:function(t){var e=this;e.$parent.noteId=t.NOTE_ID,e.$parent.ticketId=t.TICKET_ID,e.$parent.note=t.NOTE,e.$parent.isShowAddNote=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.ATTACHMENT_PATH}&fileName=${t.ATTACHMENT_NAME}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.ATTACHMENT_DESC).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.ATTACHMENT_NAME),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},2060:function(t,e,a){var i=a("6c98");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("18ee8031",i,!0,{sourceMap:!1,shadowMode:!1})},2377:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input span{margin-bottom:.3em}.tags-input-root .typeahead-badges{padding-top:.25rem!important}.tags-input-wrapper-default{padding:.5em .25em;background:#fff;border:1px solid transparent;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent;border-radius:.25em;border-color:#dbdbdb}.tags-input{display:flex;flex-wrap:wrap;align-items:center}.tags-input input[type=text]{color:#495057}.tags-input input{flex:1;background:transparent;border:none}.typeahead-badges>span{cursor:pointer;margin-right:.3em;max-width:195px}.typeahead-hide-btn{color:#999!important;font-style:italic}.tags-input-badge{position:relative;display:inline-block;padding:.25em .4em;padding-top:.25em;padding-bottom:.25em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em!important;overflow:hidden;text-overflow:ellipsis}.tags-input-remove{cursor:pointer;position:absolute;display:inline-block;right:.3em;top:.3em;padding:.5em;overflow:hidden}.tags-input-remove:before{transform:rotate(45deg)}.tags-input-remove:after,.tags-input-remove:before{content:"";position:absolute;width:75%;left:.15em;background:#5dc282;height:2px;margin-top:-1px;background:#fff!important}.tags-input-remove:after{transform:rotate(-45deg)}.tags-input span{margin-right:.3em}.tags-input-badge-pill{padding-right:1.25em;padding-left:.6em;border-radius:10em}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#fff7f3!important}.card-box .card-detail span{width:auto}',""]),t.exports=e},"3e91":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachment")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SaveAttachment}})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),r={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(t){try{var e=this;e.AttachmentfileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.AttachmentfileName=o;var r=o.lastIndexOf("."),n=o.substring(r+1,o.length);e.AttachmentfileExt+="."+n;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;e.AttachmentfileSize=c;var d={attachement_mime:l,fileName:o,id:0==e.id||null==e.id?e.TicketAttachmentId:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:s,fileSize:c};e.AttachmentfileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var t=this,e=t.disallowFileTypes.split(",");e.includes(t.AttachmentfileExt)?(t.checkFileValidExt=!1,t.ShowAlert(t.$t("InvalidFileUploadMsg",t.fileName,t.disallowFileTypes),"warning",!0,t.$t("Alert"))):t.checkFileValidExt=!0;var a=this.SizeToMb(t.AttachmentfileSize);if(a>parseInt(t.allowedPerFileSizeInMb,10)?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,a<0?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,1==t.checkFileValidExt&&1==t.checkFileValidSize){var i=JSON.stringify(t.AttachmentfileData);o["a"].UploadFile(i).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.Status?(t.ShowAlert(t.$t("Attachment successfully added"),"success",!0,t.$t("Alert")),t.DisplayName="",t.FileSrc="",$("input[type=text]").val(""),t.Close(),t.$emit("FetchAttachmentData"),t.$parent.noRecord=!1,t.callbackfunction()):(t.FileSrc="",$("input[type=text]").val(""))},(function(t){}))}},Close:function(){var t=this;t.FormSchemaData[0].Data[0].value=null,t.AttachmentfileName="",t.Attachmentfile=null,t.AttachmentfileData=null,t.FormSchemaData[0].Data[1].config.onChange=t.GetBase64String,t.$parent.showAttachmentModal=!1,"Attachments"==t.viewMode?document.getElementById("tab-attachment").click():t.$parent.FetchAttachmentData(),t.$parent.noRecord=!1}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},"42ed":function(t,e,a){"use strict";a("14d9");var i=a("9769");let s=[{title:"Add Ticket",iconClass:"fa fa-plus",callbackfunction:"openaddTicket",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Assign Ticket",iconClass:"fa fa-user",callbackfunction:"ticketAssigned",additionalClass:"",isdisabled:!0,isvisible:!0,id:"AssignTicket",isEnabledOnSelectedRow:!0},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Update Status",iconClass:"fa fa-cog",callbackfunction:"openupdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"UpdateStatus",isEnabledOnSelectedRow:!0},{title:"Assign Tag",iconClass:"fa fa-tags",callbackfunction:"opentags",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"AssignTag",isEnabledOnSelectedRow:!0},{title:"Export To Excel",iconClass:"fa fa-file-excel-o",callbackfunction:"DownloadExcelDataNew",additionalClass:"",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isEnabledOnSelectedRow:!0}],o=[{fieldName:"Priority",fieldType:"radio",fieldIcon:"fa fa-list-ul",paramName:"priorityCode",fieldSearchConditionName:["TP.PRIORITY_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Location",fieldType:"text",fieldIcon:"fa fa-map-marker",fieldSearchConditionName:["TPIN.COUNTY","TPIN.PLACE","TPIN.ADDRNAME","TPIN.ADDRFROM","TPIN.DIGSTREET","TPIN.STATE"],isSearch:!1,paramName:"LocationValue",value:"",listOptions:[]},{fieldName:"Subject",fieldType:"text",fieldIcon:"fa fa-file",fieldSearchConditionName:["TICK.TICKET_SUBJECT"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Text",fieldType:"text",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["TICK.TICKET_TEXT"],paramName:"TicketText",isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Number",fieldType:"text",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["TICK.TICKET_NUMBER"],isSearch:!1,paramName:"ticketNumber",value:"",listOptions:[]},{fieldName:"Assigned To",fieldType:"radio",fieldIcon:"fa fa-user",paramName:"AssignedTo",fieldSearchConditionName:["TICK.Assigned_To"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["STS.STATUS_NAME"],isSearch:!1,paramName:"Status",value:"",listOptions:[]},{fieldName:"Close Date",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TICK.CLOSE_DATE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Supervisor",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",paramName:"SupervisorId",fieldSearchConditionName:["TICK.SUPERVISOR"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Critical Approval",fieldType:"radio",fieldIcon:"fa fa-certificate",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Form Submit",fieldType:"radio",fieldIcon:"fa fa-wpforms",fieldSearchConditionName:["IsFormSubmitted"],paramName:"IsFormSubmitted",isSearch:!1,value:"",listOptions:[]},{fieldName:"Tags",fieldType:"radio",fieldIcon:"fa fa-wpforms",fieldSearchConditionName:["TagId"],paramName:"TagId",isSearch:!1,value:"",listOptions:[]},{fieldName:"Pending Acceptance",fieldType:"radio",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["IsAccepted"],paramName:"IsAccepted",isSearch:!1,value:"",listOptions:[]},{fieldName:"Recurring Type",fieldType:"radio",fieldIcon:"fa fa-refresh",fieldSearchConditionName:["TICK.RecurringType"],paramName:"IsRecurring",isSearch:!1,value:"",listOptions:[]},{fieldName:"Open By",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",fieldSearchConditionName:["TICK.OpenByUser"],paramName:"OpenUserId",isSearch:!1,value:"",listOptions:[]},{fieldName:"Open Date",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:[""],paramName:"OpenDate",isSearch:!1,value:"",listOptions:[]},{fieldName:"Department",fieldType:"radio",fieldIcon:"fa fa-users",fieldSearchConditionName:["IsDepartment"],paramName:"IsDepartment",isSearch:!1,value:"",listOptions:[]},{fieldName:"Category",fieldType:"radio",fieldIcon:"fa fa-list-ul",fieldSearchConditionName:["IsCategory"],paramName:"IsCategory",isSearch:!1,value:"",listOptions:[]},{fieldName:"Contract",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",fieldSearchConditionName:["IsClient"],paramName:"IsClient",isSearch:!1,value:"",listOptions:[]},{fieldName:"Product",fieldType:"radio",fieldIcon:"fa fa-columns",fieldSearchConditionName:["IsProduct"],paramName:"IsProduct",isSearch:!1,value:"",listOptions:[]}],r=[{title:"Accept",href:"javascript:void(0)",callbackfunction:"AcceptRejectTicket",icon:"fa fa-check action-icon",additionalSpan:""},{title:"Reject",href:"javascript:void(0)",callbackfunction:"AcceptRejectTicket",icon:"fa fa-close action-icon",additionalSpan:""},{title:"View on Map",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-map-marker",additionalSpan:"",class:"bg-secondary"},{title:"Edit",href:"javascript:void(0)",icon:"ffa action-icon fa fa-edit",additionalSpan:""},{title:"View Ticket",href:"javascript:void(0)",icon:"fa fa-ticket",callbackfunction:"openViewTicketTab",additionalSpan:"",class:"round-icon-small btn-info"},{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"openQuickViewpopup",additionalSpan:"",class:"round-icon-small btn-primary"},{title:"Follow-Up",callbackfunction:"ManageFollowUp",href:"javascript:void(0)",icon:"fa fa-flag",additionalSpan:"",class:"round-icon-small  btn-success"},{title:"View Recurring Detail",callbackfunction:"openViewRecurringTicket",href:"javascript:void(0)",icon:"fa fa-refresh",additionalSpan:"",class:"round-icon-small  btn-success"},{title:"Reopen",callbackfunction:"MarkAsActive",href:"javascript:void(0)",icon:"fa fa-check",additionalSpan:"",class:"round-icon-small btn-success"}];async function n(t,e,a,s,o){var r=t,n="moduleName=Ticketing&type="+a;if("Priority"==a)r.leftSearchFields[0].listOptions.push({name:"All("+o+")",value:""}),s.forEach(t=>{let e={name:t.mapping_name+"("+t.tab_count_data+")",value:t.tab_mapping_id};r.leftSearchFields[0].listOptions.push(e)});else if("TICKET_RESOLVER"==a)await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[5].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[5].listOptions.push(e)})});else if("Ticketing"==a){var l="statusType=Ticketing";await i["a"].GetFsmStatusDDLData(l).then(t=>{r.leftSearchFields[6].listOptions=[],t.data.forEach(t=>{let e={name:t.STATUS,value:t.STATUS};r.leftSearchFields[6].listOptions.push(e)})})}else if("TICKET_SUPERVISOR"==a)await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[7].listOptions=[],t.data&&t.data.hasOwnProperty("DATA")&&(r.leftSearchFields[7].listOptions.push({name:"All",value:"All"}),t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[7].listOptions.push(e)}))});else if("Critical Approval"==a){r.leftSearchFields[9].listOptions=[];let t={name:"ALL",value:"ALL"},e={name:"Approval Pending",value:"APPROVE_PENDING"},a={name:"Approved",value:"APPROVED"};r.leftSearchFields[9].listOptions.push(t),r.leftSearchFields[9].listOptions.push(e),r.leftSearchFields[9].listOptions.push(a)}else if("Form Submit"==a){r.leftSearchFields[8].listOptions=[];let t={name:"Yes",value:1},e={name:"No",value:0};r.leftSearchFields[8].listOptions.push(t),r.leftSearchFields[8].listOptions.push(e)}else if("TAG_DATA"==a)await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[9].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[9].listOptions.push(e)})});else if("Pending Acceptance"==a){r.leftSearchFields[10].listOptions=[];let t={name:"All",value:2},e={name:"Yes",value:1},a={name:"No",value:0};r.leftSearchFields[10].listOptions.push(t),r.leftSearchFields[10].listOptions.push(e),r.leftSearchFields[10].listOptions.push(a)}else if("Recurring Type"==a){r.leftSearchFields[11].listOptions=[];let t={name:"ParentRecurringTicket",value:1},e={name:"RecurringTicket",value:2};r.leftSearchFields[11].listOptions.push(t),r.leftSearchFields[11].listOptions.push(e)}else"FSM_USERS"==a?await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[12].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[12].listOptions.push(e)})}):"DEPARTMENT"==a?await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[14].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[14].listOptions.push(e)})}):"TICKET_CATEGORY"==a?await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[15].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[15].listOptions.push(e)})}):"CLIENT"==a?await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[16].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[16].listOptions.push(e)})}):"PRODUCT"==a&&await i["a"].GetDDLData(n).then(t=>{r.leftSearchFields[17].listOptions=[],t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[17].listOptions.push(e)})})}e["a"]={buttons:s,leftsearchSchema:o,listActions:r,bindleftCommonSearchdropdown:n}},"47f3":function(t,e,a){"use strict";a("2060")},5625:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".my-popups .modal-dialog[data-v-0cdeaf89]{max-width:85%!important}",""]),t.exports=e},5774:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"listing"},[e("div",{staticClass:"w-100",attrs:{id:"accordion"}},[t._l(t.groupByDate,(function(a,i,s){return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("a",{class:{"card-link collapsed":s>1,"card-link":s<=1},attrs:{"data-toggle":"collapse",href:"#collapseOneThread"+s}},[e("div",{staticClass:"conversation-date heading-border"},[e("span",[t._v(t._s(t.$t(i)))])])])]),e("div",[e("div",{class:{collapse:s>1,"collapse show":s<=1},attrs:{id:"collapseOneThread"+s}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"conversation-main"},[t._l(a,(function(a,i){return[e("div",{staticClass:"conversation-time"},[e("span",[t._v(t._s(t.$options.filters.formatTime(a.createdAt)))])]),e("div",{staticClass:"conversation-box-con"},[e("div",{staticClass:"conversation-box"},[t._m(0,!0),e("div",{staticClass:"conversation-header addednote-ticket"},[e("span",[e("span",{staticClass:"sender-name"},[t._v(t._s(a.actionPerformedByName))]),e("span",{staticClass:"sender-department"},[t._v("("+t._s(a.actionPerformedByDeptName)+")")])]),a.ticketAttachmentId>0?e("span",{staticClass:"header-action"},[e("a",{staticClass:"btn-primary downloadAttachement round-icon-split round-icon split",attrs:{id:a.ticketAttachmentId,title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.ticketAttachmentId,"data-isSupportTicket":a.isSupportTicket},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})])]):t._e()]),e("div",{staticClass:"conversation-content addednote-ticket"},[e("p",[t._v(t._s(t.SetMessage(a)))]),null!=a.threadDescription&&a.threadDescription.length>0?e("div",{staticClass:"addednote-ticket-content"},[e("div",{staticClass:"col-12 p-0 notesdata"},[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.threadDescription)}})])])]):t._e()])])])]}))],2)])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 text-center col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-circle text-white light-yellow"},[e("em",{staticClass:"fa fa-file",staticStyle:{"font-size":"18px","margin-top":"18px !important"},attrs:{"aria-hidden":"true"}})])}],o=(a("14d9"),a("9769")),r={props:{TicketThreads:{type:Array,required:!0}},data(){return{ThreadsList:[],UserType:null,UserId:null,NoRecords:!1}},computed:{groupByDate(){var t=this;let e={};return t.TicketThreads.forEach(t=>{let a=t.createdAt.substring(0,10);e[a]||(e[a]=[]),e[a].push(t)}),e}},created(){var t=this;t.UserId=t.GetUserInfo.ID,t.UserType=t.GetUserInfo.UserType},methods:{DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.fileSrc}&fileName=${t.fileName}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.fileMime).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.fileName),document.body.appendChild(o),o.click()}))},SetMessage:function(t){var e=this,a="";if("TICKET_TRANSFER"==t.statusCode&&t.currentStatus==t.priviousStatus&&"CA"!=e.UserType){var i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED"),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus:"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+i=="TICKET_TRANSFER"?t.departmentName:t.currentStatus:""==t.currentStatus?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length>0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");var s="";t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus.toUpperCase()==t.priviousStatus.toUpperCase()&&(s=""),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+i=="TICKET_TRANSFER"?t.actionPerformedByDeptName:t.actionPerformedByName+" "+e.$t("To")+" "+i=="TICKET_TRANSFER"?t.departmentName:t.currentStatus+" "+s:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length<=0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");s="";if(t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus==t.priviousStatus&&(s=""),t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType)a=t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s;else if("CA"!=e.UserType&&"SA"!=e.UserType){var o=t.currentStatus;""==o&&(o=t.TicketThreadTo),a=t.departmentName.toUpperCase()==o.toUpperCase()?e.$t(i)+" "+$t("By")+" "+t.departmentName:e.$t(i)+" "+$t("By")+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+("TICKET_TRANSFER"==i?t.departmentName:o+" "+s)}else a=e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s}else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length>0)"CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode?a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"CL"==e.UserType&&t.threadCreatedBy==e.UserId?a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]):"CL"==e.UserType?a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:"CA"!=e.UserType||"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=t.statusCode.toUpperCase()==t.actionPerformedByName.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("To")+" "+t.departmentName+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:t.isSupportTicket?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus;else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length<=0)if("CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("CL"==e.UserType&&t.threadCreatedBy==e.UserId)a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]);else if("CL"==e.UserType)a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]);else{o=t.currentStatus;t.currentStatus!=t.departmentName&&""!=o||(o=t.TicketThreadTo),a=t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:t.actionPerformedByName.toUpperCase()==t.currentStatus.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus}else if("TICKET_SPLIT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.currentStatus==t.priviousStatus)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus;else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.priviousStatus.length>0)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus;else if("TICKET_CLOSED"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_FEEDBACK"==t.statusCode||"TICKET_NOTES_CREATED"==t.statusCode||"TICKET_NOTES_DELETED"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_ETA_CHANGE"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_ETA_CHANGE_CL",[t.ticketNumber]):""!=t.priviousStatus?e.$t("TICKET_ETA_CHANGE_MESSAGE")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.priviousStatus+" "+e.$t("To")+" "+t.currentStatus:e.$t("TICKET_ETA_UPDATE_MESSAGE")+" "+t.currentStatus+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CONCLUSION"==t.statusCode)a="TICKET CONCLUSION DRAFT"==t.currentStatus?e.$t("Conclusion")+" "+e.$t("Drafted")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t("Conclusion")+" "+e.$t("Created_By")+" "+t.actionPerformedByName;else if("CLAIM_CREATED"==t.statusCode||"CLAIM_APPROVE"==t.statusCode||"CLAIM_REJECT"==t.statusCode)a="CLAIM DRAFT"==t.currentStatus||"TICKET_CLAIM_DRAFT"==t.currentStatus?e.$t("TICKET_CLAIM_DRAFT")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&""!=t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("OnBehalf")+" "+e.$t("of")+" "+t.onBehalfUser;else if("TICKET_PRODUCT_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_PRODUCT_CHANGE_CL",[t.ticketNumber]);else{var r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)}else if("TICKET_CATEGORY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)}else if("TICKET_PRIORITY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{r=null;""!=t.previousProduct&&(r=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)+r:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)}else a="TICKET_MERGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_ESCALATES_NEXT_LEVEL"==t.statusCode?e.$t("TICKET_ESCALATES_NEXT_LEVEL",[e.$t("Level")+" "+t.currentStatus,t.actionPerformedByName]):"TICKET_DELETED"==t.statusCode?"CL"==e.UserType?e.$t("TICKET_DELETED_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"ADD_ATTACHMENT"==t.statusCode||"TICKET_ACCEPT"==t.statusCode||"TICKET_REJECT"==t.statusCode||"TICKET_WO_ADDED"==t.statusCode||"REPORT_INCIDENT"==t.statusCode||"DELETE_REPORT_INCIDENT"==t.statusCode||"EDIT_REPORT_INCIDENT"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_WO_SUB_STATUS_CHANGED"==t.statusCode||"WO_STATUS_CHANGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.previousProduct+" "+e.$t("To")+" "+t.currentProduct:"TICKET_WO_STATUS_CHANGED_HIGH_PROFILE_WHILE_PARSING"==t.statusCode?e.$t(t.statusCode):"HIGH_PROFILE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode,[t.ticketNumber,t.currentProduct]):"TICKET_ASSIGN_SMS"==t.statusCode?e.$t("Ticket_Assign_SMS",[t.ticketNumber,t.currentProduct]):"WORK_ORDER_FORM_NOTIFICATION"==t.statusCode||"CORNER_LOT_EMAIL_NOTIFICATION"==t.statusCode||"GAS_FACILITY_EMAIL_NOTIFICATION"==t.statusCode||"CAST_IRON_EMAIL_NOTIFICATION"==t.statusCode||"GAS_PRINT_ISSUE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode)+" "+t.threadType+" "+e.$t("By")+" "+t.actionPerformedByName:"PL_FORM_NOTIFICATION_HAS_BEEN_SENT"==t.statusCode?t.threadType:"WORK_ORDER_FORMS_ACCEPT"==t.statusCode?"Work Order Forms accepted "+e.$t("By")+" "+t.actionPerformedByName:"WORK_ORDER_FORMS_REJECT"==t.statusCode?"Work Order Forms rejected "+e.$t("By")+" "+t.actionPerformedByName:e.$t("AssignedTo")+" "+t.actionPerformedByName+" "+t.departmentName;return a}}},n=r,l=(a("47f3"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports},"5e28":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("QuickView"))+" ")]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"container-fluid p-3",attrs:{id:"quickViewData"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-5 mb-2"},[e("div",{staticClass:"p-2 bg-grey text-center"},[e("b",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("TicketNumber"))+":")]),t._v(" "+t._s(t.TicketNumber)+" ")])]),(t.IsFsmLocating,e("div",{staticClass:"col-lg-5 mb-2"},[e("div",{staticClass:"p-2 bg-grey text-center"},[e("b",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("Location"))+":")]),t._v(" "+t._s(t.TicketLocation))])])),e("div",{staticClass:"col-lg-2 mb-2"},[e("div",{staticClass:"p-2 bg-info text-center"},[(t.IsFieldService,e("RouterLink",{staticClass:"text-white",attrs:{to:"/Ticketing/Manage/"+t.NumericTicketId,title:t.$t("ViewDetail")}},[e("i",{staticClass:"fa fa-eye pr-2"}),t._v(t._s(t.$t("ViewDetail"))+" ")]))],1)])]),"FSM"==t.ticketType?e("div",{staticClass:"col-lg-12 mb-2"},[e("MapComponent",{key:t.componentKey,staticClass:"row",attrs:{mapType:"MapBox",mapContainer:"quickViewMapDiv",Data:t.mapObj,mapWidth:"1552px",mapHeight:"200px"}})],1):t._e()]),e("div",{staticClass:"accordion custom-accr m-3",attrs:{id:"accordionExample"}},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-header",attrs:{id:"headingOneQV"}},[e("a",{attrs:{"data-toggle":"collapse","data-target":"#collapseQV","aria-expanded":"true","aria-controls":"collapseOn"},on:{click:function(e){return t.openTicketDetailTab()}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("TicketDetail"))+" ")])]),e("div",{staticClass:"collapse",attrs:{id:"collapseQV","aria-labelledby":"headingQV","data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body"},t._l(t.LeftViewData,(function(a,i){return e("div",{key:i,staticClass:"row px-2",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[e("div",{staticClass:"light-greybg w-100 mb-2 font-weight-bold mb-2 p-2"},[t._v(" "+t._s(t.$t(a.group_name,""))+" ")]),t._l(a.LeftViewData,(function(a){return e("p",{staticClass:"col-6"},["YES"==a.form_field_visibility?[e("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),e("span",{staticClass:"pl-1 font-weight-bold",attrs:{"data-visible":a.name+" "+a.form_field_visibility}},[t._v(t._s(t.$t(a.display_name))+": ")]),e("span",{domProps:{innerHTML:t._s(a.value)}})]:t._e()],2)}))],2)})),0)])]),""!=t.ShowOneCallSource?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header",attrs:{id:"headingOneQV"}},[e("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseOneQV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(e){return t.openTicketTextTab()}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("TicketText"))+" ")])]),e("div",{staticClass:"collapse",attrs:{id:"collapseOneQV","aria-labelledby":"headingOneQV","data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body"},[""!=t.TicketTextDetail?e("pre",{domProps:{innerHTML:t._s(t.TicketTextDetail)}}):t._e(),""==t.TicketTextDetail?e("div",{staticClass:"col-12 text-center text-danger"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])])]):t._e(),0==t.isViewMode?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header positionrelative",attrs:{id:"headingTwoQV"}},[e("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseTwoQV","aria-expanded":"false","aria-controls":"collapseTwo"},on:{click:function(e){return t.LoadNotesForQuickView("FSM")}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Notes"))+" ")]),0==t.isViewMode&&t.showAddButton?e("a",{staticClass:"accordian-header-button btn btn-success addnotes",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample4",title:t.$t("AddNote")},on:{click:function(e){return t.LoadTicketTabData("addnotes",t.NumericTicketId,"FSM")}}},[e("i",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNote")))]):t._e()]),e("div",{staticClass:"collapse",attrs:{id:"collapseTwoQV","aria-labelledby":"headingTwoQV","data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"w-100"},[e("div",{staticClass:"w-100"},[t.isShowAddNote?e("AddNoteData",{attrs:{id:t.sourceId,modulename:"Ticketing",submodulecode:"Ticketing",configdata:t.ConfigData,callbackfunction:t.LoadNotesForQuickView,HeaderName:t.$t("AddNotes")}}):t._e()],1)]),e("div",{staticClass:"pb-2",attrs:{id:"div_NotesLabel"}},[e("span",{staticClass:"legend-Progress colorboxsquare"}),t._v(t._s(t.$t("Private"))+" "),e("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),t._v(t._s(t.$t("Public"))+" ")]),t.NoteList.length>0?e("div",{staticClass:"w-100",attrs:{id:"tab-notes-content-quickview"}},[e("TicketNotes",{attrs:{NoteData:t.NoteList,ListNoteData:t.ListNoteData}})],1):t._e(),t.noRecord?e("div",{staticClass:"text-danger text-center d-block no-record"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e()])])]):t._e(),0==t.isViewMode&&"NU"!=t.UserType?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header",attrs:{id:"heading3QV"}},[e("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse3QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(e){return t.LoadThreads()}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("Activities"))+" ")])]),e("div",{staticClass:"collapse",attrs:{id:"collapse3QV","aria-labelledby":"heading3QV","data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body w-100 float-left"},[t.ThreadDetail.length>0?e("div",{staticClass:"w-100 activity-tab",attrs:{id:"divconversationbox-quickview"}},[e("ThreadsList",{attrs:{TicketThreads:t.ThreadDetail}})],1):t._e()])])]):t._e(),"Field Service"==t.IsFieldService?e("div",{staticClass:"card"},[e("div",{staticClass:"card-header",attrs:{id:"heading4QV"}},[e("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse4QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(e){return t.FetchWorkOrderData()}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("WorkOrder"))+" ")])]),e("div",{staticClass:"collapse",attrs:{id:"collapse4QV","aria-labelledby":"heading4QV","data-parent":"#accordionExample"}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"w-100",attrs:{id:"tab-workorder-content"}},[e("FsmworkOrder",{attrs:{workorderlist:t.WorkOrderList,sourceIds:t.sourceId,submodulecode:"Ticketing",modulename:"Ticketing"}})],1),e("div",{staticStyle:{clear:"both"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.WoTotalRecords>10,expression:"WoTotalRecords > 10"}],staticClass:"w-100"})])])]):t._e(),e("div",{staticClass:"card"},[e("div",{staticClass:"card-header",attrs:{id:"heading5QV"}},[e("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse5QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(e){return t.FetchAttachmentData()}}},[e("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Attachments"))+" ")]),t.showAddButton?["TICKET_CLOSED"!=t.TicketStatus&&"TICKET_CLOSEDLOCKED"!=t.TicketStatus?e("a",{staticClass:"accordian-header-button btn btn-success float-right mb-1",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample6",title:"Add Attachment"},on:{click:function(e){return t.openAttachmentModel()}}},[e("i",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Attachment")))]):t._e()]:t._e()],2),e("div",{staticClass:"collapse",attrs:{id:"collapse5QV","aria-labelledby":"heading5QV","data-parent":"#accordionExample"}},[t.showAddButton?e("div",{staticClass:"card-body float-left w-100"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxFile"}}),e("div",{staticClass:"col-12 p-0 d-flex flex-wrap scroll",attrs:{id:"divAttachment"}},[t.showAttachmentModal?e("ShowTicketAttachmentData",{attrs:{id:t.sourceId,configdata:t.ConfigData,callbackfunction:t.FetchAttachmentData,modulename:"Ticketing",submodulecode:"Ticketing"},on:{close:function(e){t.showAttachmentModal=!1}}},[e("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Attachments")))])]):t._e(),null!=t.AttachmentList?e("div",{staticClass:"listing pt-1"},[e("TicketAttachment",{attrs:{AttachmentData:t.AttachmentList,ListViewAttachment:t.ListViewAttachment},on:{"open-image":t.openSpecificImage}})],1):t._e(),t.noRecord?e("div",{staticClass:"text-danger text-center no-record float-left w-100"},[t._v(" "+t._s(t.$t("NoRecordfound"))+" ")]):t._e()],1)]):t._e()]),t.visible?e("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:t.galleryImages,customClasses:t.lightboxClasses},on:{close:function(e){t.visible=!1}}}):t._e()],1)])])])])],1)])},s=[],o=(a("14d9"),a("9769")),r=a("0c69"),n=a("5774"),l=a("fc96"),c=a("33e4"),d=a("6481"),u=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"FSM_WorkOrder",LegendArray:[],widgets:[],IdentityColumn:"id",listType:["List"],HeaderText:t.$t("Wokr Order"),ListData:t.WorkOrderList,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SortExp:t.SortExp,SortBy:t.SortBy,RenderRowActionMethod:t.renderActions,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.actionButtonClick,PagerButtonClick:t.pagerMethod},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[e("td",{staticClass:"text-center single-action tourguide_a"},[e("span",{class:t.getStatusClass(a.row.status_id,"status_id")},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e()]}}])})],1)},p=[],h=a("b0dd"),m={components:{},props:{workorderlist:{type:Array,required:!1}},watch:{workorderlist:function(t){this.WorkOrderList=t,this.IsListView=this.$parent.IsListView}},data(){return{WorkOrderList:[],TotalRecords:0,PageSize:10,PageNumber:1,CurrentPage:1,SortBy:"",SortExp:"",IsInSlot:!0,listheaderbuttons:null,listActions:h["a"].workOrderlistActions,Headers:[{COLUMN_NAME:"workorder_number",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WO NUMBER",DISPLAY_ORDER:1},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"worktype_name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WO Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"work_order_date",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Order Date",DISPLAY_ORDER:4},{COLUMN_NAME:"comment",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:5},{COLUMN_NAME:"zone_name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"High Profile Zone Name",DISPLAY_ORDER:6},{COLUMN_NAME:"is_submited",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Form Submitted",DISPLAY_ORDER:7}]}},updated:function(){this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber},actionButtonClick:function(t,e,a,i){switch(t){case"Edit":break;case"OpenFileModal":this.OpenFileModal(e);break;case"ManageFollowUp":this.ManageFollowUp(e.ticket_id,e);break;case"openQuickViewpopup":this.openQuickViewpopup(e.ticket_id,e.str_ticket_id,e.ticket_category_id);break}},getStatusClass:function(t){var e="";switch(t){case"Active":e="px-2 text-center bg-success text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;case"Open":e="px-2 text-center bg-success text-white d-block";break;default:e=""}return e},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(i=>{let s={...i};switch(s.title){case"Detail":s.isVisible=1==e.IsInSlot&&""==t.TICKET_AR_TYPE&&0==t.IS_SHOW_ACCEPT_REJECT;break;case"Update Status":s.isVisible=1==e.IsInSlot&&""==t.TICKET_AR_TYPE&&0==t.IS_SHOW_ACCEPT_REJECT;break;default:s.isVisible=!0}a.push(s)}),a}}},f=m,T=a("2877"),C=Object(T["a"])(f,u,p,!1,null,null,null),g=C.exports,S=a("3e91"),v=a("e8b2"),_={components:{TicketNotes:r["a"],ThreadsList:n["a"],TicketAttachment:l["a"],MapComponent:c["a"],FsmworkOrder:g,AddNoteData:d["a"],ShowTicketAttachmentData:S["a"],VueEasyLightbox:v["a"]},mounted(){const t=document.querySelector("#headingOneQV a");t&&t.click()},props:{sourceIds:{type:Number,required:!0},EncryptTicketId:{type:String,required:!1},isFileServiceIds:{type:String,required:!1},isTicketType:{type:String,required:!1}},data(){return{ListViewAttachment:0,ListNoteData:0,moduleName:"FSM",isLoading:!1,IsFsmLocating:"normal",TicketId:"",NumericTicketId:"",IsSupportTicket:"",TicketStatus:"",TicketARType:"",IsShowAcceptReject:"",IsFieldService:"",OneCallSource:"",IsFSMVIEWMODE:"",isShowAddNote:!1,TicketTextDetail:"",WorkOrderList:[],noRecord:!1,WoTotalRecords:0,showUnauthorizedMessage:!0,TicketNumber:"",TicketLocation:"",AttachmentList:[],galleryFilesView:[],galleryImages:[],visible:!1,index:0,showAttachmentModal:!1,IsListView:!1,isView:1,isViewMode:0,currentObject:null,PageSize:10,PageNumber:1,CurrentPage:1,GroupStart:1,GroupEnd:3,ConfigData:[],showUpdateStatusHistoryModal:!1,showTrackHistoryModalList:!1,WorkOrderId:0,showUpdateStatusModal:!1,WorkOrderTicketIdForEdit:null,WorkOrderOneCallCenter:null,WorkOrderItemName:null,TicketStatus:"TicketStatus",ShowOneCallSource:"",LeftViewData:[],showAddButton:!0,NoteList:[],ThreadDetail:[],UserId:null,UserType:null,mapObj:[],componentKey:0,ticketType:null,TicketFileSize:0,TicketDisallowedFileTypes:null}},created:async function(){var t=this;t.UserType=t.GetUserInfo.UserType,t.IsFieldService=t.isFileServiceIds,t.UserId=t.GetUserInfo.ID,t.sourceId=t.sourceIds,t.NumericTicketId=t.EncryptTicketId,t.ticketType=t.isTicketType,await t.fetchTicketData()},methods:{openSpecificImage(t,e){var a=this,i={path:t,caption:e.split(".")[0]};a.galleryImages.push(i)},openVideoPlayer:function(t,e,a,i){$("#div_ShowGpxFile").html(""),$.ajax({url:"/FSM/ShowGpxPlayer",contentType:"application/html; charset=utf-8",type:"GET",dataType:"html",data:{videoFilePath:t,videoFileName:e,videoFileType:a,gpxFilePath:i}}).success((function(t){$("#div_ShowGpxFile").html(t),setTimeout((function(){$("#div_ShowGpxFile .dDataDropZone").prepend("<span class='closePlayer' style='position: absolute;right: -6px;top: -9px;background:#fff;padding:2px;width:25px;height:25px;text-align:center;border-radius:100%; cursor:pointer;'><i class='fa fa-times-circle fa-size text-danger'></i></span>"),$("#div_ShowGpxFile .dDataDropZone span.closePlayer").on("click",(function(){$("#div_ShowGpxFile").html("")}))}),100)}))},formatDateTime(t){if(t)try{var e=Globalize.culture().calendar.patterns.t;e=String(e).replace("t","A").replace("t","");var a=new Date(moment(String(t)).year(),moment(String(t)).month(),moment(String(t)).date(),moment(String(t)).hours(),moment(String(t)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(e))}catch(i){e=Globalize.culture().calendar.patterns.t;return e=String(e).replace("t","a").replace("t",""),moment(String(t)).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(e))}},convertToTimeFormatHHMMSS(t){const e=parseInt(t,10);let a=Math.floor(e/3600),i=Math.floor((e-3600*a)/60),s=e-3600*a-60*i;return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),a+":"+i+":"+s},openTicketTextTab:function(){var t=`TicketId=${this.sourceId}&formId=`;o["a"].GetTicketText(t).then((function(t){null!=t.data&&"Success"==t.data.status&&(vueObj.TicketTextDetail=t.data.result.DATA[0].TICKETTEXT)}))},handleHide:function(){this.visible=!1},openTicketDetailTab:function(){var t=this;t.isLoading=!0;var e=`str_ticket_id=${t.sourceId}&moduleName=Ticketing&subModuleCode=Ticketing`;o["a"].ViewPageDetails(e).then((function(e){if(t.isLoading=!1,null!=e.data.result){var a=e.data.result.LEFTDATA;if(t.ConfigData=e.data.result.CONFIG_DATA,a=$.grep(a,(function(e,a){return"normal"==t.IsFsmLocating||"Field Service"==t.IsFieldService?"ticket_subject"==e.name||"priority_id"==e.name||"ticket_category_id"==e.name||"ticket_department_id"==e.name||"assigned_to"==e.name||"status_id"==e.name||"Description"==e.name?e.form_field_visibility="YES":e.form_field_visibility="NO":"ticket_subject"==e.name||"priority_id"==e.name||"ticket_category_id"==e.name||"City"==e.name||"ticket_department_id"==e.name||"AddrFrom"==e.name||"assigned_to"==e.name||"status_id"==e.name||"County"==e.name||"State"==e.name||"TypeofWork"==e.name||"Description"==e.name||"DigStreet"==e.name||"Place"==e.name||"Zip"==e.name||"Notes"==e.name?e.form_field_visibility="YES":e.form_field_visibility="NO","YES"==e.form_field_visibility})),"1"==e.data.result.IS_WORKORDER_COMPLETE?t.noStatus=!1:t.noStatus=!0,null!=a&&a.length>0){var i=a[0].group_id;$.each(a,$.proxy((function(e,s){"ticket_number"==s.name&&(t.TicketNumber=s.value),"TypeofWork"==s.name&&(t.TicketName=s.value),i=s.group_id;var o=$.grep(t.LeftViewData,(function(t,e){return t.group_id==i}));if(0==o.length){var r=$.grep(a,(function(t,e){return t.group_id==i}));if(r.length>0){var n={group_id:i,group_name:r[0].group_name,LeftViewData:r};t.LeftViewData.push(n)}}}),this)),console.log(t.LeftViewData)}setTimeout(()=>{t.SetResponsiveTab(),t.RadioButtonBootstrap()},500)}}))},FetchWorkOrderData:async function(){var t=this,e="ticketId="+t.sourceId;await o["a"].WorkOrderList(e).then((function(e){"Success"==e.data.status&&(t.WorkOrderList=e.data.result.data,null!=t.WorkOrderList&&t.WorkOrderList.length>0?(t.WoTotalRecords=e.data.result.data[0].TOTALRECORDS,t.noRecord=!1):(t.WoTotalRecords=0,t.noRecord=!0)),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},LoadThreads:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.NumericTicketId}&isFor=${t.moduleName}&isView=1`;await o["a"].GetTicketById(e).then((function(e){t.isLoading=!1,null!=e.data&&(t.ThreadDetail=e.data.ticket.ticketThreads,console.log(t.ThreadDetail))}))},getExtension:function(t){t=String(t).toLowerCase();var e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":(e=e.slice(a+1),e="png"==e||"jpeg"==e||"jpg"==e||"gif"==e||"bmp"==e?"image":"doc"==e||"docx"==e?"word":"xls"==e||"xlsx"==e||"csv"==e?"excel":"mp3"==e||"wav"==e?"audio":"webm"==e||"mov"==e||"mpv"==e||"mp4"==e?"movie":"pdf"==e?"pdf":"txt",e)},showImg:function(t){this.index=t,this.visible=!0,$("#div_ShowGpxFile").html("")},handleHide:function(){this.visible=!1},downloadAttachment:function(t){$.download('@Url.Action("DownloadFile", "Ticketing", new { area = "" })',"fileId="+t.TICKET_ATTACHMENT_ID+"&filePath="+t.FILE_PATH+"&fileType="+t.ATTACHMENT_DESC+"&fileName="+t.ATTACHMENT_NAME+"&downloadType=single","Get")},openAttachmentModel:function(){var t=this;t.showAttachmentModal=!0,$("#divAttachment").scrollTop(0)},FetchAttachmentData:function(){var t=this;t.galleryImages=[],t.AttachmentList=[],t.galleryFilesView=[];var e="ticketId="+t.sourceId;o["a"].GetTicketFiles(e).then((function(e){"Success"==e.data.status?(t.AttachmentList=e.data.result.DATA,t.ListViewAttachment=1,null!=t.AttachmentList&&t.AttachmentList.length>0?t.galleryFilesView=$.grep(t.AttachmentList,(function(e,a){return t.noRecord=!1,"pdf"!=JSON.parse(e.attachment_desc).Extension&&"word"!=JSON.parse(e.attachment_desc).Extension&&"excel"!=JSON.parse(e.attachment_desc).Extension&&"txt"!=JSON.parse(e.attachment_desc).Extension})):t.noRecord=!0):(t.AttachmentList=null,t.noRecord=!0)}))},LoadTicketTabData:function(t,e,a){var i=this;if(""!=t){"addnotes"==t&&"/Ticketing/EditNote";var s=[];s.push({name:"ticketId",value:e}),"addnotes"!=t&&"transfer"!=t||s.push({name:"moduleName",value:a});var r=JSON.stringify(s);o["a"].EditNote(r).then(t=>{1003==t.TicketStatusId?($("#divloadticketdata").empty().html(""),ShowAlert(Globalize.localize("SorryThetickethavebeendeleted"),"failure",!0,Globalize.localize("Alert"),!0)):("FSM"==a&&($("#hdnissupttckt").val("@ViewBag.IsSupportTicket"),$("#divloadticketdata").removeClass("hide").addClass("show"),$("#div_NotesLabel").addClass("d-none"),$("#tab-notes-content-quickview").addClass("d-none"),i.isShowAddNote=!0,$("#divNotes").scrollTop(0)),$("#divloadticketdata").show().empty().html(t.data),$("#divNotes").scrollTop(0))})}},fetchTicketData:function(){var t=this;t.isLoading=!0,o["a"].ViewFSMTicketDetails("id="+t.sourceId).then((function(e){t.mapObj=[];var a={latlong:e.data.result.LOCATION_NW,refValue:e.data.result.TICKETNUMBER,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:e.data.result.LOCATION_NW,longitude:e.data.result.LOCATION_NW},polygons:[{name:"",latLong:[{latitude:e.data.result.LOCATION_NW,longitude:e.data.result.LOCATION_NW}]}],address:e.data.result.FORMATED_ADDRESS,priority:"",color_code:""};if(t.mapObj.push(a),t.isLoading=!1,null!=e.data.result&&(t.TicketLocation=e.data.result.FORMATED_ADDRESS,t.TicketNumber=e.data.result.TICKETNUMBER,t.TicketStatus=e.data.result.STATUS_CODE),null!=e.data.result&&"Google"==e.data.result.Type){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){initializeGoolgeMap("Google",e.data.result.API_KEY,e.data.result)},i.src="https://maps.googleapis.com/maps/api/js?key="+e.data.result.API_KEY+"&libraries=places",document.getElementsByTagName("head")[0].appendChild(i)}else if(null!=e.data.result&&"MapBox"==e.data.result.Type){i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){LoadMapBox("MapBox",e.data.result.API_KEY,e.data.result)},i.src="//api.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.js",document.getElementsByTagName("head")[0].appendChild(i);var s=document.createElement("script");s.type="text/javascript",s.src="//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js",document.getElementsByTagName("head")[0].appendChild(s)}else{i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){},i.src="//unpkg.com/leaflet@1.6.0/dist/leaflet.js",document.getElementsByTagName("head")[0].appendChild(i);s=document.createElement("script");s.type="text/javascript",s.src="/Scripts/FsmMaps/dist/leaflet_markerclusterer.js",document.getElementsByTagName("head")[0].appendChild(s)}}))},fetchTicketDetail:async function(){var t=this,e="ticketId="+t.sourceId;await o["a"].ViewTicketDetails(e).then((function(e){null!=e.data&&"Success"==e.data.status?t.ShowOneCallSource=e.data:t.noRecord=!0}))},LoadNotesForQuickView:async function(t){var e=this;e.isLoading=!0,null!=t&&"undefined"!=t||(t=e.moduleName);var a=`ticketId=${e.sourceId}&isSuptTckt=false&moduleName=${t}&isView=1`;await o["a"].GetWorkOrderNoteList(a).then((function(t){e.isLoading=!1,null!=t.data&&t.data.length>0?(e.NoteList=t.data,e.ListNoteData=1,$("#tab-notes-content-quickview").removeClass("d-none")):($("#div_NotesLabel").removeClass("d-none"),e.noRecord=!0,e.isLoading=!1),e.isLoading=!1})),e.isLoading=!1}}},A=_,I=(a("a103"),Object(T["a"])(A,i,s,!1,null,"0cdeaf89",null));e["a"]=I.exports},6481:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Notes")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithNote},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("ckeditor",{attrs:{editor:t.editor},on:{ready:t.onReady},model:{value:a.fieldInfo.value,callback:function(e){t.$set(a.fieldInfo,"value",e)},expression:"data.fieldInfo.value"}}),e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),r=a("6930"),n=a.n(r),l=a("fb3d"),c=a.n(l),d=(a("d91b"),{components:{ckeditor:n.a.component},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:c.a,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;this.configData(),t.$parent.noteId>0&&(t.TicketNoteId=t.$parent.noteId,t.ticketId=t.$parent.ticketId,t._data.FormSchema[0].Data[0].value=t.$parent.note)},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onChangeRadio:function(t,e){var a=this;a.ticketType=t.target.dataset.value},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var r=o.lastIndexOf("."),n=o.substring(r+1,o.length);e.fileExt+="."+n;var l='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:l,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(t,e){var a=this;if(""==a._data.FormSchema[0].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var r=JSON.stringify(a.ticketModel);o["a"].AddNote(r).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.callbackfunction(),a.Close()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){var t=this;t._data.FormSchema[0].Data[0].value=null,t.FileName=null,t.file=null,t.FormSchema[2].Data[0].config.onChange=t.GetBase64String,this.$emit("Close"),t.$parent.isShowAddNote=!1,"Notes"==t.viewMode?document.getElementById("tab-notes").click():t.$parent.LoadNotesForQuickView(),t.$parent.noRecord=!1}}}),u=d,p=a("2877"),h=Object(p["a"])(u,i,s,!1,null,null,null);e["a"]=h.exports},"6c98":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".lessmorenotes .notesdata{max-height:100px;text-overflow:ellipsis;overflow:hidden}.readmorenotes{height:auto;text-overflow:ellipsis;overflow:visible}",""]),t.exports=e},8169:function(t,e,a){"use strict";a("a4fd")},"9d60":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"},[t._v("Tickets")]),e("div",{staticClass:"p-name text-white px-2"},["normal"!=t.CompanyType?e("select",{directives:[{name:"model",rawName:"v-model",value:t.ViewTicketType,expression:"ViewTicketType"}],staticClass:"form-control float-left customized_ddl",staticStyle:{width:"168px"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.ViewTicketType=e.target.multiple?a:a[0]},function(e){return t.changeViewTicketType()}]}},[e("option",{attrs:{value:""}},[t._v("ALL Tickets")]),e("option",{attrs:{value:"FSM"}},[t._v("Field Service Ticket")]),e("option",{attrs:{value:"TKT"}},[t._v("Normal Tickets")])]):t._e(),e("select",{directives:[{name:"model",rawName:"v-model",value:t.userstatus,expression:"userstatus"}],staticClass:"form-control customized_ddl",staticStyle:{width:"150px"},attrs:{name:"ddlUserCurrentStatus",id:"ddlUserCurrentStatus"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.userstatus=e.target.multiple?a:a[0]},function(e){return t.UserCurrentStatus()}]}},[e("option",{attrs:{value:"Busy"}},[t._v("Busy")]),e("option",{attrs:{value:"Offline"}},[t._v("Offline")]),e("option",{attrs:{value:"Online"}},[t._v("Online")])])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"normal"!=t.CompanyType,expression:"CompanyType != 'normal'"}],staticClass:"p-actions legends_topbar float-right"},[e("div",{staticClass:"clear showclear"}),e("a",{staticClass:"p-action-btn text-white align-items-center unpinscreenMap pinUnpinId",staticStyle:{display:"flex","align-items":"center","flex-direction":"column","align-content":"flex-end","justify-content":"flex-start","flex-wrap":"wrap",height:"52px"},attrs:{href:"javascript:;",id:"pinUnpinId",value:t.PinId,pinned:"0",title:"PIN"},on:{click:function(e){return t.SavePinView()}}},[e("i",{staticClass:"fa fa-thumb-tack",staticStyle:{"margin-top":"-3px",position:"absolute"},attrs:{"aria-hidden":"true"}}),e("span",{attrs:{id:"spnPin"}},[t._v(t._s(t.$t("PIN")))])]),e("div",{staticClass:"p-actions legends_topbar float-right"},[e("div",{staticClass:"p-action-map collapse_map"},[e("a",{staticClass:"e-c-map p-action-btn text-white align-items-center d-flex",attrs:{href:"javascript:;"},on:{click:t.ShowHideMap}},[e("i",{staticClass:"fa fa-angle-double-up pr-2",attrs:{id:"icnToggleMap"}}),e("span",{attrs:{id:"spnToggleMap"}},[t._v(t._s(t.mapHeaderText))])])])])])]),t.isShowMap?e("ManageMap",{key:t.componentKey,staticClass:"row",attrs:{mapType:t.MapType,mapContainer:"indexMapDiv",latLng:t.latLng,Data:t.mapObj,config:t.config}}):t._e(),e("loader",{attrs:{"is-visible":t.isLoading}}),e("tg-list",{directives:[{name:"show",rawName:"v-show",value:t.IsTicketingView,expression:"IsTicketingView"}],ref:"tgList",attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"ticket_id",listType:["List","Card"],ListData:t.TicketList,ViewList:t.ViewList,HeaderData:t.Headers,widgets:t.widgets,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.fetchRecords,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,LegendArray:t.LegendArray,NorecordfoundText:t.$t("NoRecordfound")},on:{ApplyView:t.OnApplyView,LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,ActionButtonClick:t.actionButtonClick,SortdataButtonClick:t.sortdata,RefreshManageView:t.fetchRecords},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[e("a",{staticClass:"inactive-disabled"},["Active"!=a.row.status_id&&"ApprovalPending"!=a.row.status_id?e("span",{class:t.getStatusClassList(a.row.status_id,"status_id")},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")]):t._e()])]:t._e(),"ticket_subject"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/Manage/"+a.row.str_ticket_id,"data-toggle-tooltip":"tooltip"}},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME]))])]:t._e(),"totalcomments"==a.column.COLUMN_NAME?[e("a",{staticClass:"text-dark",attrs:{href:"javascript:;"},on:{click:function(e){return t.OpenReplyTicketPopup(a)}}},[e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"noti-circle noti-green"},[t._v(t._s(a.row[a.column.COLUMN_NAME]))])])]:t._e(),"attachments_count"==a.column.COLUMN_NAME?[e("a",{staticClass:"text-dark",attrs:{href:"javascript:;"},on:{click:function(e){return t.openAttachmentPopUp(a)}}},[e("i",{staticClass:"fa fa-paperclip",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"noti-circle noti-blue"},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME]))])])]:t._e(),"no_of_notes"==a.column.COLUMN_NAME?[e("a",{staticClass:"text-dark viewnotes",attrs:{href:"javascript:;"},on:{click:function(e){return t.openNotesPopUp(a)}}},[e("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}}),e("span",{staticClass:"noti-circle noti-orange"},[t._v(t._s(a.row[a.column.COLUMN_NAME]))])])]:t._e()]}},{key:"customcard",fn:function({data:a}){return[e("div",{class:{"card-box":!0,"red-bg-light":"YES"==a.row.is_high_profile||"true"==a.row.is_high_profile,samplebar_card:1==a.row.is_sample_data,"fsm-ticket":1==a.row.is_by_recurring},style:t.SetTicketColor(a.row.color_code)},[e("div",{staticClass:"card-number"},[e("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[e("input",{staticClass:"chkItems custom-control-input",attrs:{id:a.row.TicketNumber,type:"checkbox",disabled:"TICKET_DRAFT"==a.row.status_code},domProps:{value:a.row.ticket_id},on:{change:function(e){return t.ForCheckBoxClear(e)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:a.row.TicketNumber,type:"checkbox"}})]),t._v(" "+t._s(a.row.TicketNumber)+" "),null!=a.row.external_ticket_number?e("span",{staticStyle:{"font-size":"12px",color:"#bfbfbf"}},[t._v("("+t._s(a.row.external_ticket_number)+")")]):t._e(),"FSM"==a.row.is_field_service?e("span",{staticClass:"badge badge-info float-right",staticStyle:{"font-weight":"normal"}},[t._v("FSM")]):t._e(),"Normal"==a.row.is_field_service?e("span",{staticClass:"badge badge-primary float-right",staticStyle:{"font-weight":"normal"}},[t._v("Normal")]):t._e()]),e("div",{staticClass:"card-detail-main filterscrollForCardView"},[""!=a.row.ticket_subject?e("div",{staticClass:"card-detail",attrs:{"data-isfsm":t.CompanyType}},[e("em",{staticClass:"fa fa-newspaper-o",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(a.row.ticket_subject))])]):t._e(),""!=a.row.Formated_address?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(a.row.Formated_address)+" "+t._s(a.row.State))])]):t._e(),"FSM"==a.row.is_field_service?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(""!=a.row.TypeofWork?a.row.TypeofWork:"--"))])]):t._e(),"Normal"==a.row.is_field_service?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(""!=a.row.ticket_department_id?a.row.ticket_department_id:"--"))])]):t._e(),""!=a.row.assigned_to&&null!=a.row.assigned_to?e("div",{staticClass:"card-detail"},[e("i",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.row.assigned_to))])]):t._e(),null!=a.row.remainingTime&&""!=a.row.remainingTime&&"--"!=a.row.remainingTime?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),e("span",{class:t.getTimerTextClass(a.row.remainingTime)},[t._v(t._s(a.row.remainingTime))])]):null==a.row.assigned_to?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v("‒ ‒")])]):t._e(),null!=a.row.resolve_time?e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",[t._v(t._s(a.row.resolve_time)+" "+t._s(a.row.resolve_time))])]):t._e(),e("div",{staticClass:"card-detail bg-light px-2 mt-2"},[e("i",{staticClass:"fa fa-file-pdf-o",attrs:{"aria-hidden":"true"}}),e("span",{staticStyle:{width:"30px"}},[t._v(t._s(t.getAttachmentCount(a.row.attachmentCountWithExt,"Document")))]),e("i",{staticClass:"fa fa-image",attrs:{"aria-hidden":"true"}}),e("span",{staticStyle:{width:"30px"}},[t._v(t._s(t.getAttachmentCount(a.row.attachmentCountWithExt,"Image")))]),e("i",{staticClass:"fa fa-video-camera",attrs:{"aria-hidden":"true"}}),e("span",{staticStyle:{width:"30px"}},[t._v(t._s(t.getAttachmentCount(a.row.attachmentCountWithExt,"Video")))])]),""!=a.row.TAG_NAME?e("div",{staticClass:"card-tags"},t._l(a.row.TAG_NAME,(function(a,i){return e("div",{key:i,staticClass:"rounded",staticStyle:{background:"rgb(23, 162, 184)",color:"rgb(70, 70, 70)"},style:t.SetStyle(a)},[t._v(" "+t._s(a.tag_name)+" "),e("a",{staticClass:"ml-1",attrs:{href:"javascript:;",id:a.tag_id},on:{click:function(e){return t.RemoveTag(e,a)}}},[e("i",{staticClass:"fa fa-close text-white"})])])})),0):t._e()]),e("div",{staticClass:"bottom-action",staticStyle:{background:"none !important"}},[e("div",{class:t.getStatusClass(a.row.status_id,"status_id","fsm")},[t._v(" "+t._s(a.row.status_id)+" ")]),"accept"==a.row.TICKET_AR_TYPE&&1==a.row.is_field_service?e("div",{staticClass:"px-2 border border-success text-center text-success d-block",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Accepted"}},[t._v(" Accepted")]):t._e(),"reject"==a.row.TICKET_AR_TYPE&&1==a.row.is_field_service?e("div",{staticClass:"px-2 border border-danger text-center text-danger d-block",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Rejected"}},[t._v(" Rejected")]):t._e(),e("div",{staticClass:"card-action my-2"},["Yes"==t.IsAcceptRejectTicket?e("tempalte",[""==a.row.TICKET_AR_TYPE&&1==a.row.IS_SHOW_ACCEPT_REJECT&&1==a.row.is_field_service?e("a",{staticClass:"round-icon-small btn-success",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Accept",id:"scrollup"},on:{click:function(e){return t.AcceptRejectTicket(a.row,"accept")}}},[e("em",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):t._e(),""==a.row.TICKET_AR_TYPE&&1==a.row.IS_SHOW_ACCEPT_REJECT&&1==a.row.is_field_service?e("a",{staticClass:"round-icon-small btn-danger",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Reject",id:"scrollup"},on:{click:function(e){return t.AcceptRejectTicket(a.row,"reject")}}},[e("em",{staticClass:"fa fa-close",attrs:{"aria-hidden":"true"}})]):t._e()]):t._e(),"FSM"==a.row.is_field_service?e("a",{staticClass:"round-icon-small btn-secondary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"View On Map",id:"scrollup"},on:{click:function(e){return t.openAddNewEvent(a.row.ticket_id,a.row)}}},[e("em",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}})]):t._e(),e("a",{staticClass:"round-icon-small btn-secondary",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Edit"},on:{click:t.openaddTicket}},[e("i",{staticClass:"fa action-icon fa fa-edit"})]),a.row.is_field_service?e("a",{staticClass:"round-icon-small btn-info",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To View Ticket"},on:{click:function(e){return t.openViewTicketTab(a.row.ticket_id)}}},[e("em",{staticClass:"fa fa-ticket"})]):t._e(),a.row.is_field_service?t._e():e("a",{staticClass:"round-icon-small btn-info",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To View Ticket"},on:{click:function(e){return t.openViewTicketTab(a.row.ticket_id)}}},[e("em",{staticClass:"fa fa-ticket"})]),e("a",{staticClass:"round-icon-small btn-primary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Quick View",value:a.row.ticket_id},on:{click:function(e){return t.openQuickViewpopup(a.row.ticket_id,a.row.str_ticket_id,a.row.ticket_category_id,a.row.is_field_service)}}},[e("em",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}})]),e("a",{directives:[{name:"show",rawName:"v-show",value:t.ShowDeleteButton(a.row),expression:"ShowDeleteButton(data.row)"}],staticClass:"round-icon-small btn-danger",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click here todele teticket",href:"javascript:;",id:"aIndexDelete",value:a.row.ticket_id},on:{click:function(e){return t.commonDeleteData(a.row.ticket_id)}}},[e("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]),"TICKET_DRAFT"!=a.row.status_code?e("a",{staticClass:"round-icon-small btn-success",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To Edit FollowUp",id:"ManageFollowUp",value:a.row.ticket_id},on:{click:function(e){return t.ManageFollowUp(a.row.ticket_id,a.row)}}},[e("i",{staticClass:"fa fa-flag action-icon"})]):t._e(),a.row.parent_recurring_ticket>0?e("a",{staticClass:"round-icon-small btn-success",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Recurring Ticket View Detail",href:"javascript:;",id:"ManageRecurringTicketwDetail",value:a.row.ticket_id},on:{click:function(e){return t.openViewRecurringTicket(a.row)}}},[e("i",{staticClass:"fa fa-refresh action-icon"})]):t._e()],1)])])]}}])}),t.ShowAssignTicket?e("AssignTicket",{attrs:{ticketids:t.TicketIds},on:{closedialog:t.closedialog}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.showUpdateStatusModal?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"500px"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[t._t("header",(function(){return[e("h5",{staticClass:"modal-title"},[e("span",{staticClass:"form-group"},[t._v(" "+t._s(t.$t("Update Status"))+" ")])])]})),e("button",{staticClass:"close",attrs:{type:"button",title:"",id:"UpdateStatus","data-original-title":"Close"},on:{click:function(e){t.showUpdateStatusModal=!1}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row m-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-0 p-0"},[e("div",{staticClass:"col-12 p-0"},[e("Form",{ref:"form"},[e("div",{staticClass:"w-100 float-left bg-white pb-2 bordere4e4e4"},[e("div",{staticClass:"w-100 float-left"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"collapse show py-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("Status"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"Status",rules:{required:!0}}},[e("select",{directives:[{name:"model",rawName:"v-model.trim",value:t.StatusId,expression:"StatusId",modifiers:{trim:!0}}],staticClass:"form-control StatusId",class:{"form-control":!0},attrs:{name:"StatusId"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.StatusId=e.target.multiple?a:a[0]}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.StatusList,(function(a,i){return e("option",{key:i,domProps:{value:a.value}},[t._v(" "+t._s(a.name))])}))],2)])],1)])])]),e("div",{staticClass:"col-lg-12 col-xl-12 text-right float-left p-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"search-btm-btn"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("a",{staticClass:"btn btn-success mr-1",class:{disabled:!0===t.isSending},attrs:{href:"javascript:;",title:t.$t("Save"),disabled:t.isSending},on:{click:function(e){return t.SubmitTicketingUpdateStatus()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:t.$t("Close")},on:{click:function(e){return t.close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(" "+t._s(t.$t("Close")))])])])])])])])])])],1)]),e("input",{attrs:{type:"hidden",value:"10",id:"hdfEndIndex"}}),e("input",{attrs:{type:"hidden",value:"",id:"hdnTabClick"}})])])])])]):t._e()])]),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.showTags?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"500px"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[t._t("header",(function(){return[e("h5",{staticClass:"modal-title"},[e("span",{staticClass:"form-group"},[t._v(" "+t._s(t.$t("AssignTag"))+" ")])])]})),e("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){t.showTags=!1}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row m-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-0 p-0"},[e("div",{staticClass:"col-12 p-0"},[e("Form",{ref:"tags"},[e("div",{staticClass:"w-100 float-left bg-white pb-2 bordere4e4e4"},[e("div",{staticClass:"w-100 float-left"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"collapse show py-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("Status"))+":"),e("span",{staticClass:"text-danger"},[t._v("*")])]),e("Field",{attrs:{name:"Status",rules:{required:!0}}},[e("tags-input",{attrs:{"element-id":"tags","existing-tags":t.existingTags,limit:"6","allow-duplicate":!1,"hide-input-on-limit":"true",typeahead:!0,placeholder:"Search Tags"},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.IsTagError,expression:"IsTagError"}],staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},t._l(t.TagsError,(function(a,i){return e("span",{key:i,staticClass:"col-xl-12 float-left text-danger alert-danger p-1"},[t._v("Tag: "+t._s(a.TAG_NAME)+" is already used in ticket: "+t._s(a.TICKET_NUMBER))])})),0),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[e("p",{staticClass:"mandatory"},[t._v("Maximun Six Tags Allowed")])])])]),e("div",{staticClass:"col-lg-12 col-xl-12 text-right float-left p-0"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"search-btm-btn"},[e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[e("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{href:"javascript:;",title:"Save"},on:{click:function(e){return t.AssignTagAction()}}},[e("i",{staticClass:"fa fa-floppy-o pr-2"}),t._v("Save")]),e("a",{staticClass:"btn btn-primary delete-btn",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(e){t.showTags=!1}}},[e("i",{staticClass:"fa fa-times pr-2"}),t._v("Cancel")])])])])])])])])])],1)]),e("input",{attrs:{type:"hidden",value:"10",id:"hdfEndIndex"}}),e("input",{attrs:{type:"hidden",value:"",id:"hdnTabClick"}})])])])])]):t._e()])]),t.showquickviewModal?e("modalquickviewdetails",{attrs:{sourceIds:t.idForViewRecord,submodulecode:"Ticketing",modulename:"Ticketing",EncryptTicketId:t.str_ticket_id,isFileServiceIds:t.FieldServiceID,isTicketType:t.ticketType},on:{close:function(e){t.showquickviewModal=!1}}}):t._e()],1)},s=[],o=(a("14d9"),a("88a7"),a("271a"),a("5494"),a("9769")),r=a("42ed"),n=a("5e28"),l=a("33e4"),c={components:{modalquickviewdetails:n["a"],ManageMap:l["a"]},data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!0,isShowSearchBox:!1},isShowMap:!1,mapObj:[],componentKey:0,latLng:null,isSingleCommentforMultipleTicketing:null,CommentHeader:"",PinId:0,isLoading:!1,searchCondition:"",showAttachmentModal:!1,showReplyTicketModal:!1,showRecurringViewModal:!1,showRejectTicketModal:!1,showAddTicketPopup:!1,TotalRecords:0,PageNumber:1,PageSize:10,FieldServiceID:"",SortBy:"",SortExp:"",Headers:[],TicketText:"",StatusList:[],TicketList:[],TagNameData:[],cardViewData:[],ConfigData:[],DepartmentDataTemp:[],UnAssignedTicket:0,listheaderbuttons:r["a"].buttons,leftSearchFields:r["a"].leftsearchSchema,noRecord:!1,CurrentPage:1,TotalPages:0,IsTicketingView:!0,listActions:r["a"].listActions,showFileModal:!1,statuscode:"",TicketingStatusList:null,conditionForInstantSearch:"",StatusListForListing:[],CompanyType:"normal",IsFormSubmitted:!1,TicketNumberDataForCheckbox:[],UpdatedOn:"",ViewTicketType:"",userstatus:"",Priority:"",IsAcceptRejectTicket:"",SelectedItem:null,showFilter:!1,ShowAssignTicket:!1,TicketIds:"",appliedFilter:[],TicketStatus:"",showAddFollowUp:!1,showAttachmentpppup:!1,widgets:[{icon:"fa fa-list-ul",value:0,name:"Unassigned",class:"one_wid",onClick:this.widgetClick},{icon:"fa fa-ticket",value:0,name:"On hold",class:"two_wid",onClick:this.widgetClick},{icon:"fa fa-reply",value:0,name:"Response Due",class:"three_wid",onClick:this.widgetClick},{icon:"fa fa-calendar-check-o",value:0,name:"Resolve Due",class:"four_wid",onClick:this.widgetClick},{icon:"fa fa-file-text",value:0,name:"Response Over Due",class:"five_wid",onClick:this.widgetClick},{icon:"fa fa-line-chart",value:0,name:"Resolve Over Due",class:"six_wid",onClick:this.widgetClick}],LegendArray:[{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"}],ShowMoreFalse:!1,visibility:0,isDisabledButton:!1,ListNoteData:0,PinTypeId:0,access:1,userid:null,companyId:null,showUpdateStatusModal:!1,StatusId:"",isSending:!1,Supervisor:null,WorkOrderApprovalPending:null,IsAssigned:1,Product:null,Department:null,Contract:null,Category:null,Recurring:0,Tags:null,isShowAddNote:!1,AllCount:0,IsAccepted:null,selectedWidgetCode:"",Duration:null,SearchStatusText:"",usertype:null,SeeAllPendingApproval:"No",showTags:!1,existingTags:[],selectedTags:[],TagsError:[],IsTagError:!1,showquickviewModal:!1,str_ticket_id:null,ticketType:null,idForViewRecord:null,TicketAttachmentId:0,TicketNoteId:0,ViewList:[],ShowManageView:!1,mapHeaderText:null,MapType:"",ViewListId:"",latLong:"",viewId:0}},created:async function(){var t=this;t.userid=this.GetUserInfo.ID,t.companyId=this.GetUserInfo.CompanyId,t.UpdatedOn=t.$route.query.UpdatedOn?t.$route.query.UpdatedOn:"",t.Priority=t.$route.query.priorityCode?t.$route.query.priorityCode:"",t.Supervisor=t.$route.query.SupervisorId?t.$route.query.SupervisorId:"",t.WorkOrderApprovalPending=t.$route.query.WorkOrderApproval?t.$route.query.WorkOrderApproval:"",t.IsFormSubmitted=t.$route.query.IsFormSubmitted?t.$route.query.IsFormSubmitted:"",t.TicketText=t.$route.query.TicketText?t.$route.query.TicketText:"",t.IsFormSubmitted=t.$route.query.IsFormSubmitted?t.$route.query.IsFormSubmitted:"",t.Tags=t.$route.query.TagId?t.$route.query.TagId:"",t.IsFormSubmitted=t.$route.query.IsFormSubmitted?t.$route.query.IsFormSubmitted:"",t.Department=t.$route.query.IsDepartment?t.$route.query.IsDepartment:"",t.Category=t.$route.query.IsCategory?t.$route.query.IsCategory:"",t.Product=t.$route.query.IsProduct?t.$route.query.IsProduct:"",t.Contract=t.$route.query.IsClient?t.$route.query.IsClient:"",t.IsAccepted=t.$route.query.IsAccepted?t.$route.query.IsAccepted:"",t.Recurring=t.$route.query.IsRecurring?t.$route.query.IsRecurring:"",t.UserId=t.$route.query.OpenByUser?t.$route.query.OpenByUser:"",t.Duration=t.$route.query.duration?t.$route.query.duration:"",t.usertype=t.GetUserInfo.UserType,setTimeout((function(){"Critical"==t.Priority?$("#tab-ticket").trigger("click"):"High"==t.Priority?$("#tab-notes").trigger("click"):"Medium"==t.Priority?$("#tab-claim").trigger("click"):"Low"==t.Priority&&$("#tab-content").trigger("click")}),500),await t.GetPinView(!1),await t.setexistingtags(null),await t.GetDDLData(),await t.GetConfigurationValueByKey(),await t.GetDdlRecords_ViewList(),await t.fetchRecords(),await t.ManageLeftSearchFields(),setTimeout((async function(){await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Priority",t.TabList,t.AllCount)}),2e3),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","TICKET_RESOLVER"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","FSM_TICKET_TYPE"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","FSM_USERS"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Ticketing"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","TICKET_SUPERVISOR"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Recurring Type"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Critical Approval"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Form Submit"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","TAG_DATA"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","Pending Acceptance"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","DEPARTMENT"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","TICKET_CATEGORY"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","CLIENT"),await r["a"].bindleftCommonSearchdropdown(t,"Ticketing","PRODUCT"),this.UserCurrentStatus()},updated:function(){this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{RemoveTag:function(t,e){var a=this;a.confirmR(a.$t("ConfirmTag"),!0,"Confirm",(function(){var t=`TicketId=${e.ticket_id}&TagId=${e.tag_id}`;o["a"].RemoveTagData(t).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.status&&(a.ShowAlert(a.$t("RemovedSuccess"),a.$t("Tag")),a.$t("Alert"),a.fetchRecords())})}))},SetStyle:function(t){return null==t.bg_color||""==t.bg_color?"'background':'#17a2b8','color':'#464646'":`'background': ${t.bg_color},'color':${tagItem.font_color}`},ShowDeleteButton:function(t){return("CA"==this.UserType||"SA"==this.UserType||"PM"==this.UserType||"NU"==this.UserType)&&(("@loggedUserInfo.ID"==t.ticket_created_by||"TICKET_OPENED"!=t.status_code)&&(0==t.totalcomments&&0==t.is_field_service||"TICKET_DRAFT"==t.status_code&&"NU"!=this.UserType||(t.ticket_created_by==this.userid&&"NU"==this.UserType&&"TICKET_DRAFT"==t.status_code||void 0)))},getAttachmentCount:function(t,e){var a=0,i=JSON.parse(t);return i.length>0&&i.forEach((function(t){("Image"==t.TYPE&&"Image"==e||"Video"==t.TYPE&&"Video"==e||"Image"!=t.TYPE&&"Video"!=t.TYPE&&"Image"!=e&&"Video"!=e)&&(a+=t.COUNT)})),a},SetTicketColor:function(t){return""!=t&&null!=t&&"undefined"!=typeof t||(t="#28a745"),{border:"2px solid "+t,borderTop:"5px solid "+t}},ShowHideMap:function(){var t=$("#icnToggleMap");0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map",t.hasClass("fa-angle-double-down")&&(t.removeClass("fa-angle-double-down"),t.addClass("fa-angle-double-up"))):(this.isShowMap=!1,this.mapHeaderText="Expand map",t.hasClass("fa-angle-double-up")&&(t.removeClass("fa-angle-double-up"),t.addClass("fa-angle-double-down")))},searchFunction:function(t){var e=this;e.PageLevelSearchCondition="",e.IsSearchTrueOrFalse=!0,e.IsLocationSearch=!1,e.IsSubjectSearch=!1,e.IsAcceptedSearch=!1,e.IsTicketTextSearch=!1,e.IsTicketTypeSearch=!1,e.IsAssignedSearch=!1,e.IsStatusSearch=!1,e.IsSuperVisorSearch=!1,e.IsApprovalSearch=!1,e.IsFormSubmittedSearch=!1,e.IsTagSearch=!1,e.IsAnySearch=!1,e.IsRecurringSearch=!1,e.IsOpenByUserSearch=!1,""!=$.trim(e.LocationValue)&&(e.IsSearchTrueOrFalse=!0,e.IsLocationSearch=!0,e.IsAnySearch=!0,e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+="(ISNULL(TPIN.COUNTY,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.PLACE,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.ADDRNAME,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.ADDRFROM,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.DIGSTREET,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.STATE,'') LIKE '%25"+e.LocationValue+"%25' ) "),""!=$.trim(e.TicketType)&&(e.IsSearchTrueOrFalse=!0,e.IsTicketTypeSearch=!0,e.IsAnySearch=!0,e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TPIN.TYPE_ID = "+e.TicketType),""!=$.trim(e.Subject)&&(e.IsSearchTrueOrFalse=!0,e.IsSubjectSearch=!0,e.IsAnySearch=!0,e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TICK.TICKET_SUBJECT LIKE '%25"+e.Subject+"%25'"),""!=$.trim(e.ticketNumber)&&(e.IsSearchTrueOrFalse=!0,e.IsTicketNumberSearch=!0,e.IsAnySearch=!0,e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" (TICK.TICKET_NUMBER LIKE '%25"+e.ticketNumber+"%25' OR ",e.PageLevelSearchCondition+=" TICK.EXTERNAL_TICKET_NUMBER LIKE '%25"+e.ticketNumber+"%25')"),""!=$.trim(e.AssignedTo)&&(e.IsSearchTrueOrFalse=!0,e.IsAssignedSearch=!0,e.IsAnySearch=!0,"0"==e.AssignedTo?(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" isnull(TICK.Assigned_To,0)=0 "):"ALL"==e.AssignedTo?(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" ( isnull(TICK.Assigned_To,0) = 0 or TICK.Assigned_To>0) "):(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TICK.Assigned_To = "+e.AssignedTo)),""!=$.trim(e.Status)&&(e.IsSearchTrueOrFalse=!0,e.IsStatusSearch=!0,e.IsAnySearch=!0,e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TICK.status_id in( "+e.Status+" )"),""!=$.trim(e.TicketText)&&(e.IsSearchTrueOrFalse=!0,e.IsTicketTextSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.Supervisor)&&(e.IsSearchTrueOrFalse=!0,e.IsSuperVisorSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.OpenByUser)&&(e.IsSearchTrueOrFalse=!0,e.IsOpenByUserSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsDepartment)&&(e.IsSearchTrueOrFalse=!0,e.IsDepartmentSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsCategory)&&(e.IsSearchTrueOrFalse=!0,e.IsCategorySearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsClient)&&(e.IsSearchTrueOrFalse=!0,e.IsClientSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsProduct)&&(e.IsSearchTrueOrFalse=!0,e.IsProductSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.OpenDate)&&(e.IsSearchTrueOrFalse=!0,e.IsOpenDateSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.WorkOrderApprovalPending)&&(e.IsSearchTrueOrFalse=!0,e.IsApprovalSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsFormSubmitted)&&(e.IsSearchTrueOrFalse=!0,e.IsFormSubmittedSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsFormSubmitted)&&(e.IsSearchTrueOrFalse=!0,e.IsFormSubmittedSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.Tags)&&(e.IsSearchTrueOrFalse=!0,e.IsTagSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsAccepted)&&(e.IsAcceptedSearch=!0,e.IsAnySearch=!0),""!=$.trim(e.IsRecurring)&&(e.IsRecurringSearch=!0,e.IsAnySearch=!0),e.CurrentPage=1,e.PageSize=this.PageSize,t?(e.PageNumber=1,e.GroupStart=1,e.GroupEnd=3):e.PageNumber=this.PageNumber,e.fetchRecords(),e.SearchConditionByName=e.SearchConditionByName,e.ShowUserListData(!1)},widgetClick:function(t){var e=this;e.selectedWidgetCode=t.name,e.fetchRecords()},ManageView:function(){var t=this;t.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show")}),1e3)},openViewRecurringTicket:function(t){this.IsObject(t)||(t=JSON.parse(t));var e=this;e.RecurringTicketId=t.ticket_id,e.showRecurringViewModal=!e.showRecurringViewModal},DefaultView:function(){var t=this,e={ModuleName:"Ticketing",SubmoduleCode:"Ticketing"},a=JSON.stringify(e);o["a"].ClearView(a).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(t.ShowAlert(t.$t("ClearSuccess",[t.$t("DefaultView")]),"success",!0,t.$t("Alert")),t.fetchRecords()):t.ShowAlert(t.$t("ErrorWhileProcessingRequest"),"failure",!0,t.$t("Alert"))}))},OnApplyView(t){var e=this;if(0==t)e.DefaultView();else{var a={ViewId:t,ModuleName:"Ticketing",SubmoduleCode:"Ticketing"},i=JSON.stringify(a);o["a"].ApplyView(i).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ApplySuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.fetchRecords()):e.ShowAlert(e.$t("AddedError",[e.$t("View")]),"failure",!0,e.$t("Alert"))}))}},GetDdlRecords_ViewList:async function(){var t=this,e="moduleName=Ticketing&subModuleCode=Ticketing&viewId=0&pageSize=10&pageNum=1&sortBy=&sortExp=";await o["a"].GetViewList(e).then((function(e){t.ViewList=e.data.DATA;var a=0;t.ViewListId="0",null==t.ViewList||""==t.ViewList||t.ViewList.forEach((function(e){e.IS_SLECTED_USER_ID>0&&(a+=1,t.ViewListId=e.VIEW_ID)}));var i=0;a>0?t.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):null==t.ViewList||""==t.ViewList?t.ViewList.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):t.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}),setTimeout(()=>{t.ViewListId>0?t.$refs.tgList.$refs.tgListHeaderButtons.ViewListId=t.ViewListId:t.$refs.tgList.$refs.tgListHeaderButtons.ViewListId="0"},1e3)}))},SavePinView:function(){var t=this,e=($("#spnToggleMap").text(),t.mapHeaderText);$("#pinUnpinId").val(""),$("#pinUnpinId").val(e);var a="";"Expand map"!=e&&"Collapse map"!=e||(a="Expand map"==e||"Collapse map"==e?"1":"2");var i="";"0"==$("#pinUnpinId").attr("pinned")?i="PIN":(i="UNPIN",a=2);var s={PinID:""==t.PinId?0:t.PinId,typeid:a,type:"1"==a?"FSM_"+e:"UNPIN",action:i},r=JSON.stringify(s);o["a"].SavePinUnpin(r).then((function(a){if(t.isLoading=!1,null!=a.data&&""!=a.data&&"Success"==a.data.status&&"SUCCESS"==a.data.result.MSG)if("1"==a.data.code&&"PIN"==i){$("#pinUnpinId").attr("pinned","1"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN"),$("#spnPin").text("UnPin"),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"));var s=$("#icnToggleMap");"Expand map"==e?s.addClass("fa-angle-double-down"):s.addClass("fa-angle-double-up"),t.ShowAlert(t.$t("View Pinned Successfully"),"success",!0,t.$t("Alert"))}else if("1"==a.data.code&&"UNPIN"==i){$("#pinUnpinId").attr("pinned","0"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN"),$("#spnPin").text("Pin"),$("#ShowColorScheme").addClass("d-none"),$("#pinUnpinId").hasClass("pinscreenMap")&&($("#pinUnpinId").removeClass("pinscreenMap"),$("#pinUnpinId").addClass("unpinscreenMap")),$("#divmapdata").css("display","none");s=$("#icnToggleMap");"Collapse map"==e?s.addClass("fa-angle-double-up"):s.addClass("fa-angle-double-down"),t.ShowAlert(t.$t("View UnPinned Successfully"),"success",!0,t.$t("Alert"))}}))},GetPinView:function(t){var e=this;o["a"].GetPinView().then((function(t){if(null!=t.data&&""!=t.data&&"Success"==t.data.status&&t.data.result.DATA.length>0){t.data.result.DATA[0].TYPE_ID;var a=t.data.result.DATA[0].TYPE_ID,i=t.data.result.DATA[0].TYPE;if("2"==a&&"UNPIN"==i&&($("#pinUnpinId").attr("pinned","0"),$("#spnPin").text("Unpin")),"1"==a&&"FSM_Expand map"==i){$("#pinUnpinId").hasClass("unpinscreenMap")?($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("UnPin"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN")):($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("Pin"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN")),e.isShowMap=!1,e.mapHeaderText="Expand map";var s=$("#icnToggleMap");s.hasClass("fa-angle-double-down")&&(s.removeClass("fa-angle-double-up"),s.addClass("fa-angle-double-down")),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"))}if("1"==a&&"FSM_Collapse map"==i){$("#pinUnpinId").hasClass("unpinscreenMap")?($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("UnPin"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN")):($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("Pin"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN")),e.isShowMap=!0,e.mapHeaderText="Collapse map",$("#ShowColorScheme").removeClass("d-none");s=$("#icnToggleMap");s.hasClass("fa-angle-double-up")&&(s.removeClass("fa-angle-double-down"),s.addClass("fa-angle-double-up")),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"))}else{e.isShowMap=!1,e.mapHeaderText="Expand map";s=$("#icnToggleMap");$("#ShowColorScheme").removeClass("d-none"),s.hasClass("fa-angle-double-up")&&(s.removeClass("fa-angle-double-up"),s.addClass("fa-angle-double-down"))}}}))},ManageLeftSearchFields(){if("normal"==this.CompanyType){var t=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Location"==t.fieldName));t>-1&&this.leftSearchFields.splice(t,1);var e=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Form Submit"==t.fieldName));e>-1&&this.leftSearchFields.splice(e,1);var a=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Pending Acceptance"==t.fieldName));a>-1&&this.leftSearchFields.splice(a,1);var i=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Recurring Type"==t.fieldName));i>-1&&this.leftSearchFields.splice(i,1)}if("locating"!=this.CompanyType){var s=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Ticket Text"==t.fieldName));s>-1&&this.leftSearchFields.splice(s,1);var o=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Ticket Type"==t.fieldName));o>-1&&this.leftSearchFields.splice(o,1)}if("Closed and Locked"!=this.SearchStatusText||"Closed"!=this.SearchStatusText){var r=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Close Date"==t.fieldName));r>-1&&this.leftSearchFields.splice(r,1)}if("CA"!=this.usertype){var n=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Supervisor"==t.fieldName));n>-1&&this.leftSearchFields.splice(n,1)}if("yes"!=this.SeeAllPendingApproval){var l=this.leftSearchFields.indexOf(this.leftSearchFields.find(t=>"Critical Approval"==t.fieldName));l>-1&&this.leftSearchFields.splice(l,1)}},openFilterPopUp:function(){this.showFilter=!0},openAttachmentPopUp:function(t){var e=this;e.ListViewAttachment=1,e.id=t.row.ticket_id,e.showAttachmentModal=!0},OpenReplyTicketPopup:function(t){var e=this;e.id=t.row.ticket_id,e.showReplyTicketModal=!0},openNotesPopUp:function(t){var e=this;e.id=t.row.ticket_id,e.isShowAddNote=!0,e.ListNoteData=1},FilterData:function(t,e,a,i,s,o){this.pageNum=t,this.pageSize=e,this.sortBy=a,this.sortExp=i,this.searchCondition=s,null!=typeof o&&this.appliedFilter.push(o),this.fetchRecords()},GetConfigurationValueByKey:async function(){var t=this,e="key=AcceptRejectTicket";await o["a"].GetConfigurationValueByKey(e).then((function(e){t.IsAcceptRejectTicket=e.data}))},getStatusClassList:function(t){var e="";switch(t){case"UnPublish":e="px-2 text-center bg-danger text-white d-block";break;case"Active":e="px-2 text-center bg-success text-white d-block";break;case"On Hold":e="px-2 bg-warning text-center text-white d-block";break;case"Draft":e="px-2 text-center bg-warning text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;case"Open":e="px-2 text-center bg-success text-white d-block";break;case"Waiting":e="px-2 text-center bg-success text-white d-block";break;case"In progress":e="px-2 bg-secondary text-center text-white d-block";break;case"Completed":e="px-2 bg-secondary text-center text-white d-block";break;case"Cancelled":e="px-2 bg-danger text-center text-white d-block";break;case"Closed":e="px-2 bg-danger text-center text-white d-block";break;case"Closed and Locked":e="px-2 bg-danger text-center text-white d-block";break;case"Waiting Resolved":e="px-2 bg-secondary text-center text-white d-block";break;case"Waiting Response":e="px-2 bg-secondary text-center text-white d-block";break;default:e=""}return e},getStatusClassCard:function(t){var e="";switch(t){case"Active":e="ex-blue-bg-light";break;case"Draft":e="ex-green-bg-light";break;case"UnPublish":e="ex-yellow-bg-light";break;case"Inactive":e="ex-red-bg-light";break;case"OnHold":e="ex-orange-bg-light";break;case"open":e="ex-blue-bg-light";break;default:e=""}return e},updateURLParameter(t,e,a){var i="",s=t.split("?"),o=s[0],r=s[1],n="";if(r){s=r.split("&");for(var l=0;l<s.length;l++)s[l].split("=")[0]!=e&&(i+=n+s[l],n="&")}var c=n+""+e+"="+a;return o+"?"+i+c},openQuickViewpopup:function(t,e,a,i){var s=this;s.isForViewRecord=t,this.idForViewRecord=t,this.str_ticket_id=e,this.FieldServiceID=a,this.ticketType=i,this.showquickviewModal=!0},ForCheckBoxClear:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?(e.listheaderbuttons[1].isdisabled=!1,e.listheaderbuttons[4].isdisabled=!1,e.listheaderbuttons[5].isdisabled=!1,e.listheaderbuttons[7].isdisabled=!1):(e.listheaderbuttons[1].isdisabled=!0,e.listheaderbuttons[4].isdisabled=!0,e.listheaderbuttons[5].isdisabled=!0,e.listheaderbuttons[7].isdisabled=!0)},ShowTagDataList:function(){var t=this,e=t.TicketList,a=e.map((function(t){return t.ticket_id})).join(","),i="ticketId="+a;o["a"].TagData(i).then((function(a){t.TagNameData=[],null!=a.data&&""!=a.data&&"Success"==a.data.status&&(t.TagNameData=a.data.result.DATA,$.each(e,$.proxy((function(e,a){var i=a.ticket_id,s=$.grep(t.TagNameData,(function(t,e){return t.ticket_id==i}));a.TAG_NAME=s}),this)))}))},fetchRecords:async function(){this.isLoading=!0;var t=this,e="";t.isDisabledButton=!1,""!=t.UpdatedOn&&(e=moment(String(Globalize.culture().calendar.patterns.d).toUpperCase()).format("YYYY-MM-DD"));var a="";if(this.isBlank(this.searchCondition)||(a+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(a+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),this.isBlank(this.searchCondition)||(a+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(a+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=a){if(t.appliedFilter.length>0){const e=t.listheaderbuttons.findIndex(t=>"removeFilter"===t.callbackfunction);t.listheaderbuttons[e].isvisible=!0;const a=t.listheaderbuttons.findIndex(t=>"openFilterPopUp"===t.callbackfunction);t.listheaderbuttons[a].iconClass="fa fa-filter text-success"}}else if(0==t.appliedFilter.length){const e=t.listheaderbuttons.findIndex(t=>"removeFilter"===t.callbackfunction);t.listheaderbuttons[e].isvisible=!1;const a=t.listheaderbuttons.findIndex(t=>"openFilterPopUp"===t.callbackfunction);t.listheaderbuttons[a].iconClass="fa fa-filter"}var i=t.TicketText.split("#").join("%23").split("&").join("%26"),s=`priorityCode=${t.Priority}&duration=${t.Duration}&SupervisorId=${t.Supervisor}&PageSize=${t.PageSize}&PageNumber=${t.PageNumber}\n            &SortBy=${t.SortBy}&SortExp=${t.SortExp}&WorkOrderApproval=${t.WorkOrderApprovalPending}\n            &isAssigned=${t.$route.meta.IsAssigned}&IsFormSubmitted=${t.IsFormSubmitted}&TagId=${"ALL"==t.Tags?-1:t.Tags}\n            &IsDepartment=${t.Department}&IsCategory=${t.Category}&IsContract=${t.Contract}&IsProduct=${t.Product}&IsOpenBy=${t.UserId}\n            &UpdatedOn=${e}&viewtickettype=${t.ViewTicketType}&code=${t.selectedWidgetCode}\n            &ticketText=${i}&IsAccepted=${t.IsAccepted}\n            &IsRecurring=${t.Recurring}&IsOpenDate=${t.OpenDate}&search=${t.searchCondition}`;t.isBlank(t.searchCondition)||(s=s+"&Search="+t.searchCondition.split("&").join("%26")),await o["a"].GetFSMListing(s).then((function(e){t.isLoading=!1,t.TicketList=[],t.componentKey+=1,void 0!=e.data.result.mapdetail[0]&&(t.latLong=e.data.result.mapdetail[0].LATITUDE+","+e.data.result.mapdetail[0].LONGITUDE),t.MapType=void 0==e.data.result.MapType?"Google":e.data.result.MapType.TYPE,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=1,t.AllCount=0,t.CriticalCount=0,t.HighCount=0,t.MediumCount=0,t.LowCount=0,null!=e.data&&""!=e.data?("Success"==e.data.status&&(t.Headers=e.data.result.schema,t.Headers.forEach(t=>{"status_id"==t.COLUMN_NAME&&(t.DISPLAY_NAME="Status",t.settings={isInSlot:!0,isForTag:!0}),"ticket_subject"==t.COLUMN_NAME&&(t.DISPLAY_NAME="Ticket Subject",t.settings={isInSlot:!0}),"totalcomments"==t.COLUMN_NAME&&(t.DISPLAY_NAME="Reply",t.settings={isInSlot:!0}),"attachments_count"==t.COLUMN_NAME&&(t.DISPLAY_NAME="Attachment",t.settings={isInSlot:!0}),"no_of_notes"==t.COLUMN_NAME&&(t.DISPLAY_NAME="NOTE",t.settings={isInSlot:!0})}),t.ConfigData=e.data.result.configdata,t.TabList=e.data.result.tablist,t.TicketList=e.data.result.data,t.TicketList.forEach((function(t){t.str_ticket_id=encodeURIComponent(t.str_ticket_id),t.is_field_service?t.is_field_service="FSM":t.is_field_service="Normal"})),t.TicketList.forEach((function(e){"Closed"!=e.status_id&&"Closed and Locked"!=e.status_id||(t.isDisabledButton=!0)})),t.mapObj=[],t.TicketList.forEach((function(e){1==e.is_by_recurring&&(e.additionalClass="fsm-ticket");var a=t.$options.filters.formatDate(e.created_at),i={latlong:""==t.latLong?"32.779167,-96.808891":t.latLong,refValue:e.TicketNumber,popupHeaderHtml:'<div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+e.TicketNumber+'<span class="status">'+e.priority+"</span></h1>",popupHeaderColor:"",popupBodyHtml:'<p class="details"><i class="fa fa-calendar" style="font-size: 19px;margin-right: 6px;"></i><span style="text-transform:uppercase !important;">'+a+'</span></p><p class="details"><i class="fa fa-wrench" style="font-size: 19px;margin-right: 6px;"></i><span>'+e.TypeofWork.toLowerCase()+'</span></p><p class="details"><i class="fa fa-map-marker" style="font-size: 25px;margin-right: 7px;margin-left: 3px;"></i><span>'+e.Formated_address+" "+e.State+"</span></p>",popupFooterHtml:'<span class="p-2"><a href="javascript:;"><i class="fa fa-file-pdf-o"></i> 0</a><a href="javascript:;"><i class="fa fa-image"></i> 0</a><a href="javascript:;"><i class="fa fa-video-camera"></i> 0</a></span>',pinLatLong:{latitude:e.location_nw,longitude:e.location_nw},polygons:[{name:"",latLong:[{latitude:e.location_nw,longitude:e.location_nw}]}],address:e.Formated_address,priority:e.priority,color_code:e.color_code};t.mapObj.push(i)})),t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.listheaderbuttons[1].isdisabled=!0,t.listheaderbuttons[4].isdisabled=!0,t.listheaderbuttons[5].isdisabled=!0,t.listheaderbuttons[7].isdisabled=!0,t.CurrentPage=t.PageNumber,t.CompanyType=e.data.result.CompanyType,t.UnAssignedTicket=e.data.result.UnassignedCount,t.widgets[0].value=t.UnAssignedTicket,t.widgets[1].value=e.data.result.OnholdCount,t.widgets[2].value=e.data.result.ResponseDueCount,t.widgets[3].value=e.data.result.ResolveDueCount,t.widgets[4].value=e.data.result.ResponseOverDueCount,t.widgets[5].value=e.data.result.ResolveOverDueCount,t.AllCount=e.data.result.AllCount,t.CurrentItem=null,t.CriticalCount=e.data.result.CriticalCount,t.HighCount=e.data.result.HighCount,t.MediumCount=e.data.result.MediumCount,t.LowCount=e.data.result.LowCount,t.ShowUserName=e.data.result.USERTYPE_NAME,t.GetDdlRecords_ViewList(),t.TicketList.length>0?(t.TotalRecords=e.data.result.data[0].total_records,t.ShowTagDataList(),t.noRecord=!1,t.IsLoad=!0):t.noRecord=!0),t.IsLoad=!0):t.noRecord=!0,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(i=>{let s={...i};switch(s.title){case"Accept":s.isVisible=""==t.TICKET_AR_TYPE&&1==t.IS_SHOW_ACCEPT_REJECT&&"FSM"==t.is_field_service||1==t.is_field_service;break;case"Reject":s.isVisible=""==t.TICKET_AR_TYPE&&1==t.IS_SHOW_ACCEPT_REJECT&&"FSM"==t.is_field_service||0==t.is_field_service;break;case"View on Map":s.isVisible="FSM"==t.is_field_service;break;case"Edit":s.isVisible="TICKET_DRAFT"==t.status_code;break;case"Delete":s.isVisible="CA"==e.usertype||"SA"==e.usertype||"PM"==e.usertype;break;case"Add a Follow-Up":s.isVisible="TICKET_DRAFT"!=t.status_code;break;case"View Recurring Detail":s.isVisible=1==t.parent_recurring_ticket;break;case"Reopen":s.isVisible="Ticket_completed"===t.status_code||"TICKET_CLOSED"===t.status_code;break;default:s.isVisible=!0}a.push(s)}),a},AcceptRejectTicket:function(t,e){var a=this,i="",s="";"Accept"==e?(i=a.$t("Are you sure you want to Accept the Ticket?"),a.$t("Alert"),s=a.$t("Accept")):(i=a.$t("Are you sure you want to Reject the Ticket?"),a.$t("Alert"),s=a.$t("Reject")),"string"===typeof t&&(t=JSON.parse(t)),a.confirmR(i,!0,s,(function(){"Reject"==e?(a.SelectedItem=t,a.showRejectTicketModal=!0):a.AcceptRejectAction(t,e,"")}))},AcceptRejectAction:function(t,e,a){var i=this,s={TicketId:t.ticket_id,Type:e,Comment:a},r=JSON.stringify(s);o["a"].AcceptRejectTicket(r).then((function(t){null!=t.data?"1"==t.data.code?(i.fetchRecords(),"reject"==e?(i.ShowAlert(i.$t("Ticket Rejected Successfully"),"success",!0,i.$t("Alert")),i.ShowRejectModal=!1):i.ShowAlert(i.$t("Ticket Accepted Successfully"),"success",!0,i.$t("Alert"))):"2"==t.data.code?(i.ShowAlert(i.$t("Ticket AcceptRejectDenied"),"warning",!0,i.$t("Warning")),i.showRejectTicketModal=!1):i.ShowAlert(i.$t("ErrorMessage",[i.$t("Ticket")],[i.$t("Reject")]),"failure",!0,i.$t("Alert")):i.ShowAlert(i.$t("ErrorMessage",[i.$t("Ticket")],[i.$t("Reject")]),"failure",!0,i.$t("Alert"))}),(function(t){}))},leftCommonSearch:function(t){var e=this;e.IsFormSubmitted="",e.Department="",e.TicketText="",e.Duration="",e.Supervisor="",e.WorkOrderApprovalPending="",e.Category="",e.Contract="",e.Product="",e.UserId="",e.IsAccepted="",e.Tags="",this.searchCondition=t.searchCondition;const a=new URLSearchParams(t.searchConditionJson),i=a.entries(),s=this.paramsToObject(i);if(s.hasOwnProperty("Supervisor")){this.Supervisor=s["Supervisor"];let t=this.searchCondition.split("AND");var o="";t.forEach((t,e)=>{t.includes("TICK.SUPERVISOR")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Supervisor="";if(s.hasOwnProperty("TicketText")){this.TicketText=s["TicketText"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("TICK.TICKET_TEXT")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.TicketText="";if(s.hasOwnProperty("IsFormSubmitted")){this.IsFormSubmitted=s["IsFormSubmitted"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsFormSubmitted")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsDepartment")){this.Department=s["IsDepartment"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsDepartment")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Department="";if(s.hasOwnProperty("IsCategory")){this.Category=s["IsCategory"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsCategory")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Category="";if(s.hasOwnProperty("IsProduct")){this.Product=s["IsProduct"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsProduct")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Product="";if(s.hasOwnProperty("IsClient")){this.Contract=s["IsClient"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsClient")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Contract="";if(s.hasOwnProperty("TagId")){this.Tags=s["TagId"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("TagId")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsAccepted")){this.IsAccepted=s["IsAccepted"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("IsAccepted")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsRecurring")){this.Recurring=s["IsRecurring"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("TICK.RecurringType")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.Recurring="";if(s.hasOwnProperty("OpenUserId")){this.UserId=s["OpenUserId"];let t=this.searchCondition.split("AND");o="";t.forEach((t,e)=>{t.includes("TICK.OpenByUser")||(0==e?o=t:o+="AND"+t)}),this.searchCondition=o}else this.UserId="";this.PageNumber=t.PageNumber,this.isPaged=1,this.fetchRecords()},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.fetchRecords()},actionButtonClick:function(t,e,a,i){switch(t){case"Edit":break;case"OpenFileModal":this.OpenFileModal(e);break;case"ManageFollowUp":this.ManageFollowUp(e.ticket_id,e);break;case"openAddNewEvent":this.openAddNewEvent(e.ticket_id,e);break;case"openQuickViewpopup":this.openQuickViewpopup(e.ticket_id,e.str_ticket_id,e.ticket_category_id,e.is_field_service);break;case"openViewRecurringTicket":this.openViewRecurringTicket(e);break;case"AcceptRejectTicket":this.AcceptRejectTicket(e,i.currentTarget.innerText);break;case"openViewTicketTab":this.openViewTicketTab(e.ticket_id);break;case"MarkAsActive":this.MarkAsActive(e.ticket_id)}},MarkAsActive:function(t){if(""!=t&&null!=t){var e=this;e.confirmR(e.$t("AreYouSureToUpdateStatusActive"),!0,"Confirm",(function(){var a={CompanyId:e.companyId,UserId:e.userid,TicketIds:t,StatusId:1111},i=JSON.stringify(a);o["a"].TicketingUpdateStatus(i).then((function(t){null!=t.data&&""!=t.data&&("OK"==t.statusText?(e.fetchRecords(),e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Status")]),"success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("ErrorWhileUpdating",[e.$t("Status")]),"failure",!0,e.$t("Alert")))}))}))}},openViewTicketTab:function(t){var e=this;e.$router.push({path:"/Ticketing/Manage/"+t,query:{source:"Ticketing"}})},openAddNewEvent:function(t,e){var a=this;a.latLng=e,a.isShowMap=!0},ManageFollowUp(t,e){var a=this;a.TicketIds=t,a.TicketStatus=e.status_code,a.showAddFollowUp=!a.showAddFollowUp},OpenFileModal:function(t){this.showFileModal=!0,this.expid=t.expense_id,this.statuscode=t.status_code},CloseExpenseAttachments:function(){this.showFileModal=!1},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.fetchRecords(),$("#"+t+"  span:first-child").attr("class",e)},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"openaddTicket":this.openaddTicket();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break;case"ticketAssigned":this.TicketAssigned();break;case"commonDeleteData":this.commonDeleteData();break;case"openupdateStatus":this.openupdateStatus();break;case"DownloadExcelDataNew":this.DownloadExcelDataNew();break;case"openFilterPopUp":this.openFilterPopUp();break;case"opentags":this.AssignedTag();break;case"removeFilter":var e=this;e.searchCondition="";const t=e.listheaderbuttons.findIndex(t=>"removeFilter"===t.callbackfunction);e.listheaderbuttons[t].isvisible=!1;const i=e.listheaderbuttons.findIndex(t=>"openFilterPopUp"===t.callbackfunction);e.listheaderbuttons[i].iconClass="fa fa-filter";try{e.appliedFilter=[]}catch(a){}e.fetchRecords();break;case"ManageView":this.ManageView();break}},openupdateStatus:function(){var t=this,e="";if(t.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),!(e.length>0))return t.ShowAlert(t.$t("Select any record to update status"),"warning",!0,t.$t("Alert")),!1;this.showUpdateStatusModal=1!=this.showUpdateStatusModal,this.TicketIds=e},openaddTicket:function(){var t=this;t.$router.push({name:"add"})},commonDeleteData:function(t){var e=this,a="";1==$(".chkItems:checkbox:checked").prop("checked")?$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a+=t,a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Ticketing"),(function(){var t={ids:a,moduleName:"Ticketing",subModuleCode:"Ticketing"},i=JSON.stringify(t);o["a"].deleteActivityData(i).then((function(t){"Success"==t.data[0].Status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Ticket")]),"Success",!0,e.$t("Alert")),e.fetchRecords(),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<0&&(e.PageNumber=1)):e.ShowAlert(e.$t("DeletedError",[e.$t("Ticket")]),"failure",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete"),"warning",!0,e.$t("Alert"))},TicketAssigned:function(){var t=this,e="";if(t.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),!(e.length>0))return t.ShowAlert(t.$t("Select any record to Assign Ticket"),"warning",!0,t.$t("Alert")),!1;t.selectvalue="",t.isSubmitted=!1,t.TicketIds=e,t.ShowAssignTicket=!0},AssignedTag:function(){var t=this,e="";if(t.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){e.length>0&&(e+=","),e+=$(this).val()})),!(e.length>0))return t.ShowAlert(t.$t("Select any record to Assign Ticket"),"warning",!0,t.$t("Alert")),!1;t.selectvalue="",t.isSubmitted=!1,t.selectedTags="",t.TagsError="",t.TicketIds=e,setTimeout("SetBootstraptoolTip()",100),t.showTags=!0},closedialog:function(){this.SearchConditionByName="",this.selected=[],this.ShowAssignTicket=!1},GetTicketingStatusList:function(){var t=this,e="moduleName=Ticketing&type=";o["a"].getDDLData(e).then((function(e){var a=e.data;null!=a&&(t.leftSearchFields[1].listOptions=a.DATA,t.ExpenseStatusList=a.DATA)}))},GetDDLData:async function(t){var e=this,a=`id=&companyId=${e.companyId}&userId=${e.userid}&moduleName=FSM&type=FSM_TICKETING_STATUS`;await o["a"].GetDDLData(a).then((function(t){if(t.data){var a=t.data;null!=a&&(e.StatusList=a.DATA)}}))},SubmitTicketingUpdateStatus:function(){var t=this;this.$refs.form.validate().then(e=>{if(e){var a={CompanyId:t.companyId,UserId:t.userid,TicketIds:t.TicketIds,StatusId:t.StatusId},i=JSON.stringify(a);t.isSending=!0,o["a"].TicketingUpdateStatus(i).then((function(e){if(null!=e.data&&""!=e.data)if("Success"==e.data.status)if("1000"!=e.data.result&&"SUCCESS"==e.data.result.MSG)$("input:not(.chkAll):checkbox:checked").prop("checked",!1),t.$emit("close"),t.isSending=!1,t.showUpdateStatusModal=!1,t.fetchRecords(),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert"));else if("1000"==e.data.result){t.showUpdateStatusModal=!1;var a={refId:t.TicketIds,status_Id:t.StatusId,req_From:"TICKET"},i=JSON.stringify(a);o["a"].UpdateStatusByStatusMapping(i).then((function(e){null!=e.data&&""!=e.data?"SUCCESS"==e.data.result.MSG?(t.showUpdateStatusModal=!1,t.fetchRecords(),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert"))):(t.showUpdateStatusModal=!1,t.ShowAlert(t.$t("ErrorWhileUpdating",[t.$t("Status")]),"failure",!0,t.$t("Alert"))):(t.showUpdateStatusModal=!1,t.fetchRecords())}))}else t.showUpdateStatusModal=!1,t.ShowAlert(t.$t("ErrorWhileUpdating",[t.$t("Status")]),"failure",!0,t.$t("Alert"));else t.showUpdateStatusModal=!1,t.ShowAlert(t.$t("ErrorWhileUpdating",[t.$t("Status")]),"failure",!0,t.$t("Alert"));else t.showUpdateStatusModal=!1,t.ShowAlert(t.$t("ErrorWhileUpdating",[t.$t("Status")]),"failure",!0,t.$t("Alert"))}))}})},DownloadExcelDataNew:function(){var t=this;t.isLoading=!0,t.PageLevelSearchCondition="",""!=$.trim(t.LocationValue)&&(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+="(ISNULL(TPIN.COUNTY,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.PLACE,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.ADDRNAME,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.ADDRFROM,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.DIGSTREET,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.STATE,'') LIKE '%25"+t.LocationValue+"%25' ) "),""!=$.trim(t.TicketType)&&(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TPIN.TYPE_ID = "+t.TicketType),""!=$.trim(t.Subject)&&(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TPIN.TYPEOFWORK LIKE '%25"+t.Subject+"%25'"),""!=$.trim(t.ticketNumber)&&(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TPIN.TICKETNUMBER LIKE '%25"+t.ticketNumber+"%25'"),""!=$.trim(t.AssignedTo)&&("-1"==t.AssignedTo?(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" isnull(TICK.Assigned_To,0)=0 "):(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TICK.Assigned_To = "+t.AssignedTo)),""!=$.trim(t.Status)&&(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TICK.status_id = "+t.Status);var e="";""!=t.UpdatedOn&&(e=moment(String(Globalize.culture().calendar.patterns.d).toUpperCase()).format("YYYY-MM-DD"));var a=t.TicketText.split("#").join("%23").split("&").join("%26"),i=`priorityCode=${t.Priority}&SupervisorId=&PageSize=${t.TotalRecords}&PageNumber=${t.PageNumber}&SortBy=${t.SortBy}&SortExp=${t.SortExp}&WorkOrderApproval=&isAssigned=${t.IsAssigned}&IsFormSubmitted=&TagId=${"ALL"==t.Tags?-1:t.Tags}&UpdatedOn=${e}&ticketText=${a}`;t.isBlank(t.searchCondition)||(i=i+"&Search="+t.searchCondition.split("&").join("%26")),o["a"].GetFSMListing(i).then((function(e){"Success"==e.data.status&&(t.JSONToCSVConvertor(e.data.result,"Fsm-Detail",!0),t.isLoading=!1)}))},setexistingtags:async function(t){var e=this,a="moduleName=FSM&type=TAG_DATA";await o["a"].GetDDLData(a).then((function(t){if(200==t.status){var a=t.data;e.isLoading=!0;var i=[];null!=a&&($.each(a.DATA,(function(t,e){var a={key:e.value,value:e.name};i.push(a)})),e.existingTags=i),e.isLoading=!1}}))},AssignTagAction:function(){var t=this;t.isLoading=!0,t.isSubmitted=!0;var e=t.selectedTags;console.log(e),this.$refs.tags.validate().then(a=>{if(a){t.isSubmitted=!1;var i={TicketIds:t.TicketIds,selectedtagsdata:e},s=JSON.stringify(i);o["a"].AssignTags(s).then((function(e){if(null!=e.data)if("1"==e.data.code){if(t.fetchRecords(),t.ShowAlert(t.$t("AddedSuccess",[t.$t("Tags")]),"success",!0,t.$t("Alert")),t.showTags=!1,null!=e.data.result&&e.data.result.length>0){t.IsTagError=!0;var a="object"!=typeof e.data.result?JSON.parse(e.data.result):JSONData;t.TagsError=a.DATA}t.ShowTagDataList()}else t.isLoading=!1,t.ShowAlert(t.$t("ErrorMessage",[t.$t("Tag")],[t.$t("Assigned")]),"failure",!0,t.$t("Alert"));t.isLoading=!1}),(function(e){t.isLoading=!1}))}else t.isLoading=!1,t.ShowAlert(t.$t("CorrectHighlightedErrors"),"warning",!0,t.$t("Alert"))})},changeViewTicketType:function(){this.searchFunction(),this.fetchRecords()},UserCurrentStatus:function(){var t=this;if("online"==t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data,t.userstatus=e.status_code}))}));else if("online"!=t.userstatus&&""!=t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}));else if(""==t.userstatus){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}}}},d=c,u=(a("8169"),a("2877")),p=Object(u["a"])(d,i,s,!1,null,null,null);e["default"]=p.exports},a103:function(t,e,a){"use strict";a("a411")},a411:function(t,e,a){var i=a("5625");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("743791ce",i,!0,{sourceMap:!1,shadowMode:!1})},a4fd:function(t,e,a){var i=a("2377");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("7c99e989",i,!0,{sourceMap:!1,shadowMode:!1})},b0dd:function(t,e,a){"use strict";a("14d9");var i=a("9769");let s=[{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add WorkOrder",iconClass:"fa fa-plus",callbackfunction:"openaddWorkOrder",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"}],o=[{fieldName:"WO Number",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["WO.workorder_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Number",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TICK.ticket_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Assigned To",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TICK.assigned_to"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Created Date",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.created_at"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]},{fieldName:"Created By",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.created_by"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.parent_sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Sub Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Client",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.client_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Work Type",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.work_type_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Service Appointment",fieldType:"text",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSA.SA_Number"],isSearch:!1,value:"",listOptions:[]}],r=[{title:"View on Map",callbackfunction:"ViewonMap",href:"javascript:void(0)",icon:"fa action-icon fa-map",additionalSpan:""},{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"openQuickViewpopup",additionalSpan:""},{title:"Notes",callbackfunction:"ManageNote",href:"javascript:void(0)",icon:"fa fa-sticky-note",additionalSpan:""},{title:"Details",href:"javascript:void(0)",callbackfunction:"WorkOrderDetails",icon:"fa fa-ticket",additionalSpan:""},{title:"Status",href:"javascript:void(0)",icon:"fa fa-check",callbackfunction:"WorkOrderStatus",additionalSpan:""},{title:"Schdule",href:"javascript:void(0)",callbackfunction:"SchduleAppointment",icon:"fa fa-clock-o",additionalSpan:""},{title:"Add Service Appointment",href:"javascript:void(0)",icon:"fa fa-calendar-plus-o",callbackfunction:"AddServiceAppointment",additionalSpan:""}];async function n(t,e,a,s,o){var r=t,n="moduleName=FSM&type="+a;"USERS"==a?await i["a"].GetDDLData(n).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[2].listOptions.push(e),r.leftSearchFields[4].listOptions.push(e)})}):"Work_Order_Client_list"==a?await i["a"].GetDDLData(n).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[7].listOptions.push(e)})}):"Work_Order_Parent_Statuscode"==a?await i["a"].GetDDLData(n).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[5].listOptions.push(e)})}):"Work_Order_Child_Statuscode"==a?await i["a"].GetDDLData(n).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[6].listOptions.push(e)})}):"Work_Type_List"==a&&await i["a"].GetDDLData(n).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};r.leftSearchFields[8].listOptions.push(e)})})}e["a"]={buttons:s,leftsearchSchema:o,listActions:r,bindleftCommonSearchdropdown:n}},fc96:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[t._l(t.AttachmentList,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),e("div",{staticClass:"box border positionrelative float-left w-100"},[e("div",{staticClass:"default-tags"},[e("div",{staticClass:"defaultpic_control"},["FSM"==t.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?e("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:t.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-fileName":a.attachment_name,"data-filePath":a.C[0].ATTACHMENTFULLPATH,"data-fileType":a.attachment_desc,"data-GpxFile":a.GEOFILE_PATH,"data-placement":"left"}},[e("em",{staticClass:"fa fa-globe"})]):t._e(),1==t.ListViewAttachment?e("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:t.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(e){return t.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[e("em",{staticClass:"fa fa-eye"}),e("br")]):t._e(),e("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:t.$t("DownloadFile"),"data-placement":"left"},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"}),e("br")]),a.CREATED_BY==t.UserId?e("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:t.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash text-danger"}),e("br")]):t._e()])]),e("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t.setImageIcon(a)?"word-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-text-o"}):t._e():e("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:t.setImageIcon(a),alt:""}}):e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),e("hr",{staticClass:"my-1"}),e("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[e("div",{staticClass:"col-12 textelipsis px-2"},[t._v(t._s(a.attachment_name))]),e("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[e("small",{staticClass:"float-left textelipsis col-6 p-0"},[e("span",[t._v(t._s(a.PostedBy))])]),e("small",{staticClass:"float-right col-6 text-right p-0"},[t._v(t._s(a.CREATED_AT))])])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)],1)},s=[],o=a("9769"),r={components:{},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:null,UserId:null,isLoading:!1,index:0}},watch:{AttachmentData:function(t){var e=this;e.AttachmentList=t,e.AttachmentList.length>0?e.NoRecords=!1:(e.AttachmentList=[],e.NoRecords=!0)}},created(){var t=this;t.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{t.UserId=t.GetUserInfo.ID,t.RequestFrom=t.AttachmentData.RequestFrom,t.GalleryImages=t.galleryImages,t.AttachmentData.length>0?(t.AttachmentList=t.AttachmentData,t.NoRecords=!1):(t.AttachmentList=[],t.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(t,e){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",t,e),a.$parent.visible=!0},setImageIcon(t){var e=this,a="/Content/Responsive/images/",i=e.getExtension(t.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(t){let e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":e.slice(a+1)},deleteAttachment:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a="attachmentid="+t.ticket_attachment_id;o["a"].DeleteIncidentAttachment(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&"SUCCESS"==t.data.result.MSG?("AttachmentInDetail"==e.viewMode?e.$parent.GetAttachmentData():e.$parent.FetchAttachmentData(),e.ticket_attachment_id>0?e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")):(e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")),e.$emit("close"))):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachment_path}&fileName=${t.attachment_name}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachment_desc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.attachment_name),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-1c83863d.js.map