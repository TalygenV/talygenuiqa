{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.reduce.js","webpack:///./node_modules/core-js/internals/engine-is-node.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/month.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/timeline-month.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/@syncfusion/ej2-vue-navigations/src/treeview/treeview.component.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/timeline-view.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/view-base.js","webpack:///./node_modules/core-js/internals/array-reduce.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/timeline-header-row.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/agenda-base.js","webpack:///./node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/agenda.js"],"names":["$","$reduce","left","arrayMethodIsStrict","CHROME_VERSION","IS_NODE","CHROME_BUG","FORCED","target","proto","forced","reduce","callbackfn","length","arguments","this","undefined","module","exports","process","classof","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","_super","Month","parent","_this","call","dayNameFormat","viewClass","isInverseTableSelect","monthEvent","monthDates","addEventListener","on","onScrollUIUpdate","onDataReady","onCellClick","removeEventListener","off","args","renderAppointments","notify","event","onContentScroll","e","removeNewEventElement","scrollTopPanel","scrollLeftPanel","uiStateValues","top","scrollTop","scrollLeft","setPersistence","leftPanel","getLeftPanelElement","element","querySelector","headerHeight","getHeaderBarHeight","header","getDatesHeaderElement","content","getContentAreaElement","height","offsetHeight","setContentHeight","scrollBarWidth","util","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","offsetWidth","clientWidth","border","padding","setColWidth","scrollPosition","isPreventScrollUpdate","currentView","top_1","isInitial","scrollToSelectedDate","retainScrollPosition","headerCell","selectedDate","getTime","toString","enableRtl","getContentTable","offsetLeft","leftPanelElement","activeViewOptions","interval","getScrollXIndent","generateColumnLevels","colLevels","level","getDateSlots","renderDates","workDays","group","resources","resourceBase","generateResourceLevels","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","levels_1","byDate","hideNonWorkingDays","index","findIndex","x","date","getDay","slice","push","count","showWeekend","dateSlots","isCurrentMonth","col","classList","currentDateIndex","map","indexOf","currentTimezoneDate","parseInt","type","className","colSpan","getDayNameFormat","isAdaptive","renderLayout","setPanel","clsList","allowVirtualScrolling","rowAutoHeight","eventSettings","ignoreWhitespace","renderPanel","appendChild","createTableLayout","setAttribute","renderHeader","renderContent","activeView","getPanel","renderResourceMobileLayout","isCustomMonth","refreshHeader","wireCellEvents","add","workCellAction","cellMouseDown","cellClick","cellDblClick","tr","renderLeftIndent","dateTd","renderDatesHeader","showWeekNumber","renderedResources","renderWeekNumberContent","workTd","levels","virtualScrollModule","resetColLevels","wrap","contentArea","renderContentArea","monthAgendaWrapper","renderVirtualTrack","renderAppointmentContainer","dateCol","Date","td","contentWrapper","contentWrapTable","noOfDays","i","length_1","dates","splice","weekNumber","getWeekNumberContent","createWeekNumberElement","container","table","thead","createColGroup","trEle","ntr","cloneNode","j","createHeaderCell","tdEle","addAttributes","ele","innerHTML","getDayNames","setResourceHeaderContent","dateHeaderTemplate","cellArgs","elementId","id","viewName","dateHeaderTemplateName","templateId","dateTemplate","getDateHeaderTemplate","skeleton","title","globalize","formatDate","calendar","getCalendarMode","innerText","calendarUtil","isMonthStart","isCurrentDate","format","elementType","trigger","getContentSlots","slotDatas","prepareSlots","rowIndex","renderDate","resData","data","includeResource","startIndex","Number","colDates","out_j_1","k","_loop_1","colDate","lastRow","this_1","rowCount","resourcesTd","filter","resIndex","_i","_a","res","_b","colDates_1","updateClassList","isOtherMonth","isMinMaxDate","updateSelectedCellClass","start","end","tbl","setAriaAttributes","addAutoHeightClass","monthDate","firstDateOfMonth","lastDateOfMonth","tBody","getContentRows","trows","attrs","row","ntd","createContentTd","workHours","highlight","isWorkDay","renderDateHeaderElement","cellTemplate","args_1","scheduleId","cellTemplateName","getCellTemplate","dateHeader","cellHeaderTemplate","cellHeaderTemplateName","getCellHeaderTemplate","getModuleName","announcementText","getMonthStart","currentDate","useDisplayDate","displayDate","isCustomRange","monthStart","firstDayOfWeek","getFullYear","getMonth","getDate","getMonthEnd","numberOfDays","numberOfWeeks","endDate","lastWeekOfMonth","getCurrentViewDates","selectedTime","weekFirstDate","getRenderDates","monthEnd","getHours","headerModule","previousNextIconHandler","getNextPreviousDate","getStartDate","getEndDate","getEndDateFromStartDate","getDateRangeText","dateFormat","startDate","updateCustomRange","isUpdateDateRange","monthNames","text","formatDateRange","getLabelText","view","localeObj","getConstant","unWireEvents","contentScrollableEle","remove","destroy","isDestroyed","scheduleTouchModule","resetValues","TimelineMonth","appointment","scrollHeaderLabels","renderDates_1","renderResourceHeaderIndent","contentTr","resTd","createResourceColumn","contentTd","createEventTable","getRowCount","collapseRows","resLevel","resourceData","resource","workDaysField","concat","groupOrder","slotData","hourSlots","headerRows","renderGn","getAdjustedDate","startTime","timeSlots","fails","METHOD_NAME","argument","method","properties","modelProps","testProp","props","watch","emitProbs","keys","modelProps_1","props_1","TreeViewComponent","name","mixins","emits","provide","custom","ej2Instance","propKeys","models","hasChildDirective","hasInjectedModules","tagMapper","tagNameMapper","isVue3","templateCollection","created","bindProperties","ej2Instances","_setProperties","setProperties","clearTemplate","updated","render","createElement","h","slots","$slots","default","methods","templateNames","templateNames_1","tempName","elementCollection","elementCollection_1","__vue__","$destroy","prop","muteOnChange","referModels","key","model","test","vueInstance","$emit","addNodes","nodes","preventTargetExpand","beginEdit","node","checkAll","collapseAll","excludeHiddenNodes","disableNodes","enableNodes","ensureVisible","expandAll","getAllCheckedNodes","getDisabledNodes","getNode","getTreeData","moveNodes","sourceNodes","refreshNode","newData","removeNodes","uncheckAll","updateNode","newText","VerticalView","baseCssClass","scrollUiUpdate","renderEvents","timeScale","enable","quickPopup","quickPopupHide","onAdaptiveMove","action","preventDefault","onAdaptiveScroll","headerBarHeight","timeCells","getScrollableElement","scrollerHeight","isDateHeaderScroll","enableAllDayScroll","contains","scrollToWorkHour","highlightCurrentTime","isTimelineView","firstWorkHourCell","offsetTop","scrollToHour","hour","scrollDate","getStartEndTime","headerElement","conWrap","getTopFromDateTime","scrollToDate","columnLevels","previousNextAction","setCalendarDate","updateDateRange","resStartHour","startHourField","resEndHour","endHourField","workStartHour","workEndHour","startHour","endHour","isWorkHourRange","getStartHour","getEndHour","option","getCurrentTime","showTimeIndicator","getCurrentTimeIndicatorIndex","workCells","querySelectorAll","changeCurrentTimePosition","currentTimeIndicatorTimer","getSeconds","getMilliseconds","window","setTimeout","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","expandedResources","_c","getIndexOfDate","clearInterval","removeCurrentTimeIndicatorElements","setInterval","queryString","timeIndicator","timeIndicator_1","indicator","firstRow","rows","topInPx","Math","floor","cells","timeCellsWrap","timeTrs","isNaN","curTimeWrap","styles","currentDateIndex_1","day","currentTimeEle","getTimeString","lastElementChild","diffInMinutes","getMinutes","getWorkCellHeight","slotCount","parseFloat","getBoundingClientRect","toFixed","getTdContent","cntEle","wrapper","templateName","getTimelineDate","getDayName","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","indentTd","scrollContainer","renderTimeCells","touchMoveEvent","timesTd","nth","ntr_1","data_1","weekNo","template","createTd","renderHeaderIndentTemplate","appointmentExpandCollapse","lastLevel","createAllDayRow","tdData","eventBase","createEventWrapper","wireMouseEvents","handler","r","first","last","getTimeSlotRows","renderContentTable","renderContentTableHeader","clsName","getContentTdClass","cellDate","isWorkHour","tooltipTemplate","msMajorInterval","msInterval","setMilliseconds","round","msStartHour","msEndHour","duration","abs","getTimezoneOffset","dt","timeOffset","majorTickDivider","middle","setHours","TimelineViews","timelineAppointment","currDateTime","timeString","split","getWorkCellWidth","getLeftFromDateTime","generateTimeSlots","timeSlotData","dateSlots_1","tempTimeSlots","tempTimeSlots_1","slot","headerWrap","contentWrap","transform","diffInDates","width","getResourceTdData","resSHr","resEHr","trCount","ViewBase","refreshResourceHeader","timeFormat","eventTable","getEventRows","eventContainer","eventRows","hideResourceRows","tbody","value","prev","next","colGroupEle","clientHeight","headerTable","colWidth","applyLeft","headerCells","isRtl","currentCell","tdLeft","hiddenLeft","headerCells_2","cell","getAttribute","children","classNames","classNames_1","headerCells_1","getHeaderElement","resHeader","panel","getColumnLevels","length_2","dayCount","agendaDaysCount","daysCount","weekLength","viewStr","charAt","toLowerCase","substring","formattedStr","longDateFormat","mode","locale","trim","toLocaleLowerCase","substr","getMobileDateElement","tdElement","resourceHeaderTemplate","resourceHeaderTemplateName","quickTemplate","getResourceHeaderTemplate","resourceText","sanitize","textField","renderResourceHeader","renderResourceTree","getColElements","colElements","contentBody","colWidth_1","resourceColumn","cssClass","headerCellElements","forEach","headerCellColSpan","resetColWidth","colElements_1","wireExpandCollapseIconEvents","resourceCollection","treeIcons","treeIcons_1","icon","clearEvents","onTreeIconClick","scrollWrap","tdDate","dateElement","scrollWidth","enablePersistence","getViewStartDate","getResourceRenderDates","getViewEndDate","setDate","renderedCount","getRenderedCount","setRenderedDates","parentNode","aCallable","toObject","IndexedObject","lengthOfArrayLike","$TypeError","TypeError","createMethod","IS_RIGHT","that","argumentsLength","memo","O","self","right","TimelineHeaderRow","groupByYear","result","dates_1","groupByMonth","dates_2","groupByWeek","dates_3","jsDate","tzOffsetDiff","ceil","generateSlots","colspan","cls","dateParser","tdDatas","htmlCol","templateParser","viewTemplate","headerWrapper","lastLevelColspan","byYear","byMonth","byWeek","rows_1","AgendaBase","createAgendaContentElement","listData","aTd","listElement","fieldMapping","eventFields","noEvents","createList","moduleName","listClass","itemClass","listElements","li","templateEle","appWrapper","Guid","getReadonlyAttribute","getAnnouncementString","applyResourceColor","eventTemplate","createAppointment","eventTemplateName","getAppointmentTemplate","recurrenceRule","iconClass","recurrenceID","cancel","eventArgs","renderTemplates","eventSubject","subject","fields","eventLocation","location","appSubjectWrap","appSubjectText","appLocation","strDate","endTime","isAllDay","allDayStr","timeStr","milliSeconds","eventString","displayStr","appDateTime","processAgendaEvents","events","eventsProcessed","events_1","event_1","spanned","splitEventByDay","wireEventActions","eventElement","eventElement_1","wireAppointmentEvents","getEventDetails","dateHeaderElement","dateHeaderElement_1","agendaModule","dayNavigationClick","calculateResourceTableElement","agendaDate","agendaLastDate","days","resColl","initialDate","lastLevelInfo","tempLastLevelInfo","tempIndex","eventObj","dateObj","firstDate","finalDate","agendaCollection","filterEvents","hideEmptyAgendaDays","resDataCollection","resDayCollection","rowSpan","eventData","tempObj","topResources","tempGroupedData","totalRowSpan","y","dataSource","z","u","idField","createResourceTableRow","totalCollection","renderEmptyContent","tContent","tempData","tContentCollection","parentCollection","w","rowSpanCollection","createDateHeaderElement","insertBefore","eTr","createTableRowElement","eTd","dTd","Agenda","agendaDates","virtualScrollTop","wireEvents","eventLoad","eventsData","generatedDates","eventCollection","processedData","filterEventsByResource","renderInitialContent","refreshEvent","refreshDate","generateOccurrence","emptyTBody","lastDate","contentChild","emptyTBody_1","minDate","isObject","appointmentFiltering","updateHeaderText","updateHeaderItems","filterData","nTr","cTd","agendaScrolling","virtualScrolling","filterDate","scrollHeight","totalHeight","direction","topElement","getElementFromScrollerPosition","getDateFromElement","getPreviousNextDate","s","scrollToValue","selectedElements","getSelectedAppointments","focus","filterElement","liDetails","liCollection","a","showHeaderBar","getStartDateFromEndDate","dateStart","dateEnd","min","apply","max","maxDate","currentTarget","changeView","onAgendaScrollUiUpdate","getEvents","changeDate"],"mappings":"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","file":"js/chunk-7c765d23.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\nvar FORCED = CHROME_BUG || !arrayMethodIsStrict('reduce');\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    var length = arguments.length;\n    return $reduce(this, callbackfn, length, length > 1 ? arguments[1] : undefined);\n  }\n});\n","var classof = require('../internals/classof-raw');\n\nmodule.exports = typeof process != 'undefined' && classof(process) == 'process';\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { EventHandler, formatUnit, isNullOrUndefined, createElement, addClass, append, prepend, remove, extend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month view\n */\nvar Month = /** @class */ (function (_super) {\n    __extends(Month, _super);\n    function Month(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'wide';\n        _this.viewClass = 'e-month-view';\n        _this.isInverseTableSelect = false;\n        _this.monthEvent = null;\n        _this.monthDates = {};\n        return _this;\n    }\n    Month.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onScrollUIUpdate, this);\n        this.parent.on(event.dataReady, this.onDataReady, this);\n        this.parent.on(event.cellClick, this.onCellClick, this);\n    };\n    Month.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onScrollUIUpdate);\n            this.parent.off(event.dataReady, this.onDataReady);\n            this.parent.off(event.cellClick, this.onCellClick);\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onDataReady = function (args) {\n        this.monthEvent = new MonthEvent(this.parent);\n        this.monthEvent.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.onCellClick = function (event) { };\n    Month.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollTopPanel(e.target);\n        this.scrollLeftPanel(e.target);\n        this.parent.uiStateValues.top = e.target.scrollTop;\n        this.parent.uiStateValues.left = e.target.scrollLeft;\n        this.setPersistence();\n    };\n    Month.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (leftPanel) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    Month.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.WEEK_NUMBER_WRAPPER_CLASS);\n    };\n    Month.prototype.onScrollUIUpdate = function (args) {\n        var headerHeight = this.getHeaderBarHeight();\n        var header = this.getDatesHeaderElement();\n        var content = this.getContentAreaElement();\n        var height = this.parent.element.offsetHeight - headerHeight - header.offsetHeight;\n        var leftPanel = this.getLeftPanelElement();\n        if (this.parent.height !== 'auto') {\n            this.setContentHeight(content, leftPanel, height);\n        }\n        var scrollBarWidth = util.getScrollBarWidth();\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        this.setColWidth(content);\n        if (args.scrollPosition || !args.isPreventScrollUpdate && this.parent.currentView === 'TimelineMonth') {\n            var top_1 = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.top : args.scrollPosition.top;\n            if (leftPanel) {\n                leftPanel.scrollTop = top_1;\n            }\n            content.scrollTop = top_1;\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToSelectedDate();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollLeft = this.parent.currentView === 'TimelineMonth' ? this.parent.uiStateValues.left :\n                    args.scrollPosition.left;\n            }\n        }\n        else {\n            this.scrollToSelectedDate();\n        }\n        this.retainScrollPosition();\n    };\n    Month.prototype.scrollToSelectedDate = function () {\n        var headerCell = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"'\n            + this.parent.selectedDate.getTime().toString() + '\"]');\n        var content = this.getContentAreaElement();\n        if (!isNullOrUndefined(headerCell)) {\n            content.scrollLeft = !this.parent.enableRtl ?\n                headerCell.offsetLeft : -(this.parent.getContentTable().offsetWidth - headerCell.offsetLeft - headerCell.offsetWidth);\n        }\n        else {\n            content.scrollLeft = 0;\n        }\n        if (content.scrollLeft === 0 && this.parent.uiStateValues.isInitial) {\n            this.parent.uiStateValues.left = 0;\n        }\n    };\n    Month.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        content.style.height = 'auto';\n        if (this.parent.currentView === 'Month') {\n            content.style.height = formatUnit(height);\n        }\n        if (leftPanelElement) {\n            if (this.parent.currentView === 'MonthAgenda') {\n                height = (this.parent.activeViewOptions.interval > 1) ?\n                    this.getContentAreaElement().firstElementChild.offsetHeight :\n                    this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n            }\n            leftPanelElement.style.height = 'auto';\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n    };\n    Month.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            colLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.currentView === 'MonthAgenda') {\n                colLevels = [level];\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var levels_1 = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays);\n                if (this.parent.activeViewOptions.group.byDate && this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                    var index = levels_1.findIndex(function (x, index) {\n                        return index !== 0 && x.date.getDay() === levels_1[0].date.getDay();\n                    });\n                    levels_1 = index > -1 ? levels_1.slice(0, index) : levels_1;\n                }\n                colLevels = [levels_1];\n            }\n        }\n        else {\n            colLevels.push(level);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    Month.prototype.getDateSlots = function (renderDates, workDays) {\n        var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : workDays.length;\n        var dateSlots = [];\n        var isCurrentMonth = this.isCurrentMonth(this.parent.selectedDate);\n        for (var col = 0; col < count; col++) {\n            var classList = [cls.HEADER_CELLS_CLASS];\n            var currentDateIndex = renderDates.slice(0, count).map(function (date) { return date.getDay(); });\n            if (isCurrentMonth && currentDateIndex.indexOf(this.parent.currentTimezoneDate.getDay()) === col) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: renderDates[parseInt(col.toString(), 10)], type: 'monthDay', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    Month.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive || this.parent.activeViewOptions.group.resources.length > 0) {\n            return 'abbreviated';\n        }\n        return 'wide';\n    };\n    Month.prototype.renderLayout = function (type) {\n        this.dayNameFormat = this.getDayNameFormat();\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n            if (this.parent.currentView !== 'Month') {\n                this.parent.activeViewOptions.group.hideNonWorkingDays = false;\n            }\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        addClass([this.element], clsList);\n        this.renderPanel(type);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        var target = (this.parent.currentView === 'MonthAgenda') ? this.parent.activeView.getPanel() : this.parent.element;\n        if (this.parent.uiStateValues.isGroupAdaptive && !target.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n        if (this.parent.uiStateValues.isCustomMonth) {\n            this.parent.uiStateValues.isCustomMonth = false;\n        }\n    };\n    Month.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n    };\n    Month.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    Month.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        this.renderLeftIndent(tr);\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    Month.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(createElement('td', { className: 'e-left-indent' }));\n        }\n    };\n    Month.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.showWeekNumber) {\n            tr.appendChild(this.renderWeekNumberContent());\n        }\n        var workTd = createElement('td');\n        var levels = this.colLevels.slice(0);\n        if (this.parent.virtualScrollModule) {\n            this.resetColLevels();\n        }\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var contentArea = this.renderContentArea();\n        if (this.parent.currentView === 'Month') {\n            wrap.appendChild(contentArea);\n        }\n        else {\n            var monthAgendaWrapper = createElement('div', { className: cls.TABLE_CONTAINER_CLASS });\n            monthAgendaWrapper.appendChild(contentArea);\n            wrap.appendChild(monthAgendaWrapper);\n        }\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.colLevels = levels;\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n        this.renderAppointmentContainer();\n    };\n    Month.prototype.renderWeekNumberContent = function () {\n        var dateCol = this.renderDates.map(function (date) { return new Date(+date); });\n        var td = createElement('td');\n        var contentWrapper = createElement('div', { className: cls.WEEK_NUMBER_WRAPPER_CLASS });\n        td.appendChild(contentWrapper);\n        var contentWrapTable = this.createTableLayout();\n        contentWrapper.appendChild(contentWrapTable);\n        var noOfDays = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n            this.parent.activeViewOptions.workDays.length;\n        for (var i = 0, length_1 = (this.renderDates.length / noOfDays); i < length_1; i++) {\n            var dates = dateCol.splice(0, noOfDays);\n            var weekNumber = this.parent.getWeekNumberContent(dates);\n            contentWrapTable.querySelector('tbody').appendChild(this.createWeekNumberElement(weekNumber));\n        }\n        return td;\n    };\n    Month.prototype.renderAppointmentContainer = function () {\n        //Here needs to render mobile view appointment details on selected date\n    };\n    Month.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var table = this.createTableLayout();\n        if (this.parent.currentView === 'Month') {\n            var thead = createElement('thead');\n            thead.appendChild(createElement('tr'));\n            prepend([thead], table);\n        }\n        this.createColGroup(table, this.colLevels[this.colLevels.length - 1]);\n        var trEle = createElement('tr');\n        for (var i = 0; i < this.colLevels.length; i++) {\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            var ntr = trEle.cloneNode();\n            for (var j = 0; j < level.length; j++) {\n                var td = level[parseInt(j.toString(), 10)];\n                ntr.appendChild(this.createHeaderCell(td));\n            }\n            table.querySelector('tbody').appendChild(ntr);\n        }\n        wrap.appendChild(table);\n        return container;\n    };\n    Month.prototype.createHeaderCell = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.type === 'monthDay') {\n            var ele = createElement('span', { innerHTML: util.capitalizeFirstWord(this.parent.getDayNames(this.dayNameFormat)[td.date.getDay()], 'single') });\n            tdEle.appendChild(ele);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader') {\n            addClass([tdEle], cls.DATE_HEADER_CLASS);\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                var cellArgs = { date: td.date, type: td.type };\n                var elementId = this.parent.element.id + '_';\n                var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                var templateId = elementId + viewName + 'dateHeaderTemplate';\n                var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(cellArgs, this.parent, 'dateHeaderTemplate', templateId, false));\n                if (dateTemplate && dateTemplate.length) {\n                    append(dateTemplate, tdEle);\n                }\n            }\n            else {\n                var ele = createElement('span', { className: cls.NAVIGATE_CLASS });\n                var skeleton = 'full';\n                var title = this.parent.globalize.formatDate(td.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n                ele.setAttribute('title', util.capitalizeFirstWord(title, 'multiple'));\n                var innerText = (this.parent.calendarUtil.isMonthStart(td.date) && !this.isCurrentDate(td.date) && !this.parent.isAdaptive) ?\n                    this.parent.globalize.formatDate(td.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                    this.parent.globalize.formatDate(td.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n                ele.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n                tdEle.appendChild(ele);\n            }\n            this.wireCellEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    Month.prototype.getContentSlots = function () {\n        if (!(this.colLevels[this.colLevels.length - 1] && this.colLevels[this.colLevels.length - 1][0])) {\n            return [];\n        }\n        var slotDatas = [];\n        var prepareSlots = function (rowIndex, renderDate, resData, classList) {\n            var data = {\n                date: new Date(+renderDate), groupIndex: resData.groupIndex, workDays: resData.workDays,\n                type: 'monthCells', className: classList || [cls.WORK_CELLS_CLASS]\n            };\n            if (!slotDatas[parseInt(rowIndex.toString(), 10)]) {\n                slotDatas[parseInt(rowIndex.toString(), 10)] = [];\n            }\n            slotDatas[parseInt(rowIndex.toString(), 10)].push(data);\n        };\n        var includeResource = this.parent.currentView !== 'MonthAgenda' &&\n            this.parent.activeViewOptions.group.resources.length > 0;\n        if (includeResource && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeViewOptions.group.byDate) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 2]; _i < _a.length; _i++) {\n                var res = _a[_i];\n                var dates = res.renderDates.map(function (date) { return new Date(+date); });\n                var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH : res.workDays.length;\n                for (var i = 0; i < (res.renderDates.length / count); i++) {\n                    var colDates = dates.splice(0, count);\n                    for (var _b = 0, colDates_1 = colDates; _b < colDates_1.length; _b++) {\n                        var colDate = colDates_1[_b];\n                        prepareSlots(i, colDate, res);\n                    }\n                }\n            }\n        }\n        else {\n            var dates = this.renderDates.map(function (date) { return new Date(+date); });\n            var count = this.parent.activeViewOptions.showWeekend ? util.WEEK_LENGTH :\n                this.parent.activeViewOptions.workDays.length;\n            var level = this.colLevels.slice(0, 1)[0];\n            var startIndex = this.renderDates.map(Number).indexOf(+level[0].date);\n            for (var i = 0; i < (this.renderDates.length / count); i++) {\n                var colDates = dates.splice(0, count);\n                var k = startIndex;\n                var _loop_1 = function (j) {\n                    var colDate = colDates[parseInt(k.toString(), 10)];\n                    k++;\n                    if (includeResource) {\n                        var lastRow = this_1.colLevels[(this_1.colLevels.length - 1)];\n                        var rowCount = lastRow.length / count;\n                        var resourcesTd = lastRow.slice(0, rowCount);\n                        if (this_1.parent.activeViewOptions.group.hideNonWorkingDays) {\n                            resourcesTd = lastRow.filter(function (x) { return x.date.getDay() === colDate.getDay(); });\n                            if (resourcesTd.length === 0) {\n                                j = j - 1;\n                                return out_j_1 = j, \"continue\";\n                            }\n                        }\n                        for (var resIndex = 0; resIndex < resourcesTd.length; resIndex++) {\n                            var clsList = void 0;\n                            if (resIndex !== 0) {\n                                clsList = [cls.WORK_CELLS_CLASS, cls.DISABLE_DATE];\n                            }\n                            prepareSlots(i, colDate, resourcesTd[parseInt(resIndex.toString(), 10)], clsList);\n                        }\n                    }\n                    else {\n                        prepareSlots(i, colDate, this_1.colLevels[this_1.colLevels.length - 1][0]);\n                    }\n                    out_j_1 = j;\n                };\n                var this_1 = this, out_j_1;\n                for (var j = startIndex; j < (this.colLevels[0].length + startIndex) && j < colDates.length; j++) {\n                    _loop_1(j);\n                    j = out_j_1;\n                }\n            }\n        }\n        return slotDatas;\n    };\n    Month.prototype.updateClassList = function (data) {\n        if (!this.isCustomMonth() && this.isOtherMonth(data.date)) {\n            data.className.push(cls.OTHERMONTH_CLASS);\n        }\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n        this.updateSelectedCellClass(data);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    Month.prototype.updateSelectedCellClass = function (data) {\n        return;\n    };\n    Month.prototype.isOtherMonth = function (date) {\n        return date.getTime() < this.monthDates.start.getTime() || date.getTime() > this.monthDates.end.getTime();\n    };\n    Month.prototype.renderContentArea = function () {\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        if (this.parent.currentView === 'TimelineMonth') {\n            this.createColGroup(tbl, this.colLevels[this.colLevels.length - 1]);\n        }\n        var monthDate = new Date(this.parent.selectedDate.getTime());\n        this.monthDates = {\n            start: this.parent.calendarUtil.firstDateOfMonth(monthDate),\n            end: this.parent.calendarUtil.lastDateOfMonth(util.addMonths(monthDate, this.parent.activeViewOptions.interval - 1))\n        };\n        var tBody = tbl.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.wireCellEvents(tBody);\n        return tbl;\n    };\n    Month.prototype.getContentRows = function () {\n        var trows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var slotDatas = this.getContentSlots();\n        for (var row = 0; row < slotDatas.length; row++) {\n            var ntr = tr.cloneNode();\n            for (var col = 0; col < slotDatas[parseInt(row.toString(), 10)].length; col++) {\n                var ntd = this.createContentTd(slotDatas[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)], td);\n                ntr.appendChild(ntd);\n            }\n            trows.push(ntr);\n        }\n        return trows;\n    };\n    Month.prototype.createContentTd = function (data, td) {\n        var ntd = td.cloneNode();\n        if (data.colSpan) {\n            ntd.setAttribute('colspan', data.colSpan.toString());\n        }\n        this.updateClassList(data);\n        var type = data.type;\n        if (data.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            data.className.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && this.isWorkDay(data.date, data.workDays)) {\n            data.className.push(cls.WORKDAY_CLASS);\n        }\n        if (this.isCurrentDate(data.date)) {\n            data.className.push(cls.CURRENTDATE_CLASS);\n        }\n        addClass([ntd], data.className);\n        ntd.setAttribute('data-date', data.date.getTime().toString());\n        if (!isNullOrUndefined(data.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                data.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        this.renderDateHeaderElement(data, ntd);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: data.date, type: type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(cellTemplate, ntd);\n        }\n        var args = { elementType: type, element: ntd, date: data.date, groupIndex: data.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    Month.prototype.renderDateHeaderElement = function (data, ntd) {\n        if (this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var dateHeader = createElement('div', { className: cls.DATE_HEADER_CLASS });\n        if (this.parent.activeViewOptions.cellHeaderTemplate) {\n            var args = { date: data.date, type: data.type, groupIndex: data.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'cellHeaderTemplate';\n            var cellHeaderTemplate = [].slice.call(this.parent.getCellHeaderTemplate()(args, this.parent, 'cellHeaderTemplate', templateId, false));\n            append(cellHeaderTemplate, dateHeader);\n        }\n        else {\n            var innerText = (this.parent.calendarUtil.isMonthStart(data.date) && !this.isCurrentDate(data.date) && !this.parent.isAdaptive) ?\n                this.parent.globalize.formatDate(data.date, { format: 'MMM d', calendar: this.parent.getCalendarMode() }) :\n                this.parent.globalize.formatDate(data.date, { skeleton: 'd', calendar: this.parent.getCalendarMode() });\n            dateHeader.innerHTML = util.capitalizeFirstWord(innerText, 'single');\n        }\n        ntd.appendChild(dateHeader);\n        if (this.getModuleName() === 'month') {\n            addClass([dateHeader], cls.NAVIGATE_CLASS);\n            var skeleton = 'full';\n            var announcementText = this.parent.globalize.formatDate(data.date, { skeleton: skeleton, calendar: this.parent.getCalendarMode() });\n            ntd.setAttribute('aria-label', announcementText);\n        }\n    };\n    Month.prototype.getMonthStart = function (currentDate) {\n        var useDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && (this.parent.uiStateValues.isCustomMonth || this.isCustomRange());\n        var date = useDisplayDate ? this.parent.activeViewOptions.displayDate : !(this.parent.uiStateValues.isCustomMonth ||\n            this.isCustomRange()) && this.isCustomMonth() ? currentDate : this.parent.calendarUtil.firstDateOfMonth(currentDate);\n        var monthStart = util.getWeekFirstDate(date, this.parent.activeViewOptions.firstDayOfWeek);\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    Month.prototype.getMonthEnd = function (currentDate) {\n        if (this.isCustomMonth()) {\n            var start = this.getMonthStart(currentDate);\n            var numberOfDays = util.WEEK_LENGTH * (this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS);\n            return util.addDays(start, (numberOfDays - 1));\n        }\n        else {\n            var endDate = util.addMonths(currentDate, this.parent.activeViewOptions.interval - 1);\n            var lastWeekOfMonth = util.getWeekFirstDate(this.parent.calendarUtil.lastDateOfMonth(endDate), this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(lastWeekOfMonth, util.WEEK_LENGTH - 1);\n        }\n    };\n    Month.prototype.isCustomRange = function () {\n        var dates = this.parent.getCurrentViewDates();\n        if (dates && dates.length > 0) {\n            var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n            var weekFirstDate = util.getWeekFirstDate(dates[dates.length - 1], this.parent.activeViewOptions.firstDayOfWeek);\n            return !(selectedTime >= util.getWeekFirstDate(dates[0], this.parent.activeViewOptions.firstDayOfWeek).getTime() &&\n                selectedTime <= util.addDays(weekFirstDate, 6).getTime());\n        }\n        return false;\n    };\n    Month.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        var currentDate = util.resetTime(this.parent.selectedDate);\n        var start = this.getMonthStart(currentDate);\n        var monthEnd = this.getMonthEnd(currentDate);\n        do {\n            if (this.parent.activeViewOptions.showWeekend) {\n                renderDates.push(start);\n            }\n            else {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n            }\n            start = util.addDays(start, 1);\n            if (start.getHours() > 0) {\n                start = util.resetTime(start);\n            }\n        } while (start.getTime() <= monthEnd.getTime());\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    Month.prototype.getNextPreviousDate = function (type) {\n        if (this.isCustomMonth()) {\n            var dates = this.parent.getCurrentViewDates();\n            var date = util.getWeekFirstDate(type === 'next' ? dates[dates.length - 1]\n                : dates[0], this.parent.activeViewOptions.firstDayOfWeek);\n            return util.addDays(date, type === 'next' ? util.WEEK_LENGTH : -(this.parent.activeViewOptions.numberOfWeeks > 0 ?\n                this.parent.activeViewOptions.numberOfWeeks : util.DEFAULT_WEEKS) * util.WEEK_LENGTH);\n        }\n        else {\n            return util.addMonths(this.parent.selectedDate, ((type === 'next' ? 1 : -1) * this.parent.activeViewOptions.interval));\n        }\n    };\n    Month.prototype.getStartDate = function () {\n        return this.getMonthStart(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDate = function () {\n        return this.getMonthEnd(this.parent.selectedDate);\n    };\n    Month.prototype.getEndDateFromStartDate = function (start) {\n        return util.addDays(new Date(start.getTime()), 1);\n    };\n    Month.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive || isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var startDate = this.parent.selectedDate;\n            var endDate = void 0;\n            var updateCustomRange = false;\n            if (this.isCustomMonth()) {\n                var dates = this.parent.getCurrentViewDates();\n                updateCustomRange = dates[0].getMonth() !== dates[dates.length - 1].getMonth() ||\n                    dates[0].getFullYear() !== dates[dates.length - 1].getFullYear();\n                if (updateCustomRange) {\n                    startDate = dates[0];\n                    endDate = dates[dates.length - 1];\n                }\n            }\n            var isUpdateDateRange = (this.parent.currentView !== 'Month' || !this.isCustomMonth());\n            if (this.parent.activeViewOptions.interval > 1 && isUpdateDateRange || updateCustomRange) {\n                endDate = endDate ? endDate : util.addMonths(util.lastDateOfMonth(startDate), this.parent.activeViewOptions.interval - 1);\n                if (startDate.getFullYear() === endDate.getFullYear()) {\n                    var monthNames = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' - ' +\n                        (this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() })) +\n                        this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                    return util.capitalizeFirstWord(monthNames, 'single');\n                }\n                var text = (this.parent.globalize.formatDate(startDate, { format: 'MMMM', calendar: this.parent.getCalendarMode() })) + ' ' +\n                    startDate.getFullYear() + ' - ' +\n                    this.parent.globalize.formatDate(endDate, { format: 'MMMM ', calendar: this.parent.getCalendarMode() }) +\n                    this.parent.globalize.formatDate(endDate, { skeleton: 'y', calendar: this.parent.getCalendarMode() });\n                return util.capitalizeFirstWord(text, 'single');\n            }\n            var format = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(startDate, { format: format, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.parent.selectedDate);\n    };\n    Month.prototype.getLabelText = function (view) {\n        return this.parent.localeObj.getConstant(view) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    Month.prototype.createWeekNumberElement = function (text) {\n        var tr = createElement('tr');\n        var td = createElement('td', {\n            className: cls.WEEK_NUMBER_CLASS,\n            attrs: { 'title': (text ? this.parent.localeObj.getConstant('week') + ' ' + text : '') },\n            innerHTML: (text || '')\n        });\n        tr.appendChild(td);\n        var args = { elementType: 'weekNumberCell', element: td };\n        this.parent.trigger(event.renderCell, args);\n        return tr;\n    };\n    Month.prototype.unWireEvents = function () {\n        var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (contentScrollableEle) {\n            EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        }\n    };\n    Month.prototype.isCustomMonth = function () {\n        return this.parent.currentView === 'Month' &&\n            (!isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0);\n    };\n    Month.prototype.getModuleName = function () {\n        return 'month';\n    };\n    Month.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            if (this.monthEvent) {\n                this.monthEvent.destroy();\n                this.monthEvent = null;\n            }\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Month;\n}(ViewBase));\nexport { Month };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { EventHandler, createElement, formatUnit } from '@syncfusion/ej2-base';\nimport { Month } from './month';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * timeline month view\n */\nvar TimelineMonth = /** @class */ (function (_super) {\n    __extends(TimelineMonth, _super);\n    function TimelineMonth(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-timeline-month-view';\n        _this.isInverseTableSelect = true;\n        _this.appointment = null;\n        return _this;\n    }\n    TimelineMonth.prototype.getModuleName = function () {\n        return 'timelineMonth';\n    };\n    TimelineMonth.prototype.onDataReady = function () {\n        this.appointment = new TimelineEvent(this.parent, 'day');\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineMonth.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineMonth.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineMonth.prototype.setContentHeight = function (content, leftPanelElement, height) {\n        if (leftPanelElement) {\n            leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(content));\n        }\n        content.style.height = formatUnit(height);\n    };\n    TimelineMonth.prototype.getDateSlots = function (renderDates, workDays) {\n        var dateSlots = [];\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateSlots.push({ date: col, type: 'dateHeader', className: classList, colSpan: 1, workDays: workDays });\n        }\n        return dateSlots;\n    };\n    TimelineMonth.prototype.renderLeftIndent = function (tr) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n    };\n    TimelineMonth.prototype.renderContent = function () {\n        var contentTr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            contentTr.appendChild(resTd);\n        }\n        var contentTd = createElement('td');\n        this.element.querySelector('tbody').appendChild(contentTr);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        wrap.appendChild(this.renderContentArea());\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        contentTd.appendChild(wrap);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        contentTr.appendChild(contentTd);\n    };\n    TimelineMonth.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineMonth.prototype.getContentSlots = function () {\n        var slotDatas = [];\n        for (var row = 0; row < this.getRowCount(); row++) {\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var data = _a[_i];\n                data.className = [cls.WORK_CELLS_CLASS];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    var resLevel = this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)];\n                    data.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n                    data.className = data.className.concat(resLevel.className);\n                    data.groupIndex = resLevel.groupIndex;\n                    data.groupOrder = resLevel.groupOrder;\n                }\n                var slotData = {\n                    date: new Date(+data.date), colSpan: data.colSpan, groupIndex: data.groupIndex, workDays: data.workDays,\n                    type: 'monthCells', className: data.className\n                };\n                if (!slotDatas[parseInt(row.toString(), 10)]) {\n                    slotDatas[parseInt(row.toString(), 10)] = [];\n                }\n                slotDatas[parseInt(row.toString(), 10)].push(slotData);\n            }\n        }\n        return slotDatas;\n    };\n    TimelineMonth.prototype.updateClassList = function (data) {\n        if (!this.parent.isMinMaxDate(data.date)) {\n            data.className.push(cls.DISABLE_DATES);\n        }\n    };\n    TimelineMonth.prototype.unWireEvents = function () {\n        EventHandler.remove(this.getContentAreaElement(), 'scroll', this.onContentScroll);\n    };\n    TimelineMonth.prototype.getMonthStart = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return new Date(monthStart.getFullYear(), monthStart.getMonth(), monthStart.getDate());\n    };\n    TimelineMonth.prototype.getMonthEnd = function (currentDate) {\n        var monthStart = this.parent.calendarUtil.firstDateOfMonth(util.resetTime(currentDate));\n        return this.parent.calendarUtil.lastDateOfMonth(util.addMonths(new Date(+monthStart), this.parent.activeViewOptions.interval - 1));\n    };\n    TimelineMonth.prototype.generateColumnLevels = function () {\n        var colLevels = [];\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        colLevels.push(level);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(level, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            colLevels = renderGn.generateColumnLevels(level, hourSlots);\n        }\n        this.colLevels = colLevels;\n        return colLevels;\n    };\n    TimelineMonth.prototype.getAdjustedDate = function (startTime) {\n        var timeSlots = this.colLevels[this.colLevels.length - 1];\n        for (var i = 0; i < timeSlots.length; i++) {\n            if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startTime.getTime()) {\n                return timeSlots[i - 1].date;\n            }\n        }\n        return null;\n    };\n    TimelineMonth.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            var contentScrollableEle = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n        }\n        if (this.appointment) {\n            this.appointment.destroy();\n            this.appointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineMonth;\n}(Month));\nexport { TimelineMonth };\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call -- required for testing\n    method.call(null, argument || function () { return 1; }, 1);\n  });\n};\n","import { ComponentBase, gh, getProps, isExecute, vueDefineComponent } from '@syncfusion/ej2-vue-base';\nimport { isNullOrUndefined, getValue } from '@syncfusion/ej2-base';\nimport { TreeView } from '@syncfusion/ej2-navigations';\nexport var properties = ['isLazyUpdate', 'plugins', 'allowDragAndDrop', 'allowEditing', 'allowMultiSelection', 'allowTextWrap', 'animation', 'autoCheck', 'checkedNodes', 'cssClass', 'disabled', 'dragArea', 'enableHtmlSanitizer', 'enablePersistence', 'enableRtl', 'expandOn', 'expandedNodes', 'fields', 'fullRowNavigable', 'fullRowSelect', 'loadOnDemand', 'locale', 'nodeTemplate', 'selectedNodes', 'showCheckBox', 'sortOrder', 'actionFailure', 'created', 'dataBound', 'dataSourceChanged', 'destroyed', 'drawNode', 'keyPress', 'nodeChecked', 'nodeChecking', 'nodeClicked', 'nodeCollapsed', 'nodeCollapsing', 'nodeDragStart', 'nodeDragStop', 'nodeDragging', 'nodeDropped', 'nodeEdited', 'nodeEditing', 'nodeExpanded', 'nodeExpanding', 'nodeSelected', 'nodeSelecting'];\nexport var modelProps = [];\nexport var testProp = getProps({ props: properties });\nexport var props = testProp[0], watch = testProp[1], emitProbs = Object.keys(watch);\nemitProbs.push('modelchanged', 'update:modelValue');\nfor (var _i = 0, modelProps_1 = modelProps; _i < modelProps_1.length; _i++) {\n    var props_1 = modelProps_1[_i];\n    emitProbs.push('update:' + props_1);\n}\n/**\n * Represents the EJ2 VueJS TreeView Component.\n * ```html\n * <ejs-treeview></ejs-treeview>\n * ```\n */\nexport var TreeViewComponent = vueDefineComponent({\n    name: 'TreeViewComponent',\n    mixins: [ComponentBase],\n    props: props,\n    watch: watch,\n    emits: emitProbs,\n    provide: function () { return { custom: this.custom }; },\n    data: function () {\n        return {\n            ej2Instance: new TreeView({}),\n            propKeys: properties,\n            models: modelProps,\n            hasChildDirective: false,\n            hasInjectedModules: false,\n            tagMapper: {},\n            tagNameMapper: {},\n            isVue3: !isExecute,\n            templateCollection: {},\n        };\n    },\n    created: function () {\n        this.bindProperties();\n        this.ej2Instances._setProperties = this.ej2Instances.setProperties;\n        this.ej2Instances.setProperties = this.setProperties;\n        this.ej2Instances.clearTemplate = this.clearTemplate;\n        this.updated = this.updated;\n    },\n    render: function (createElement) {\n        var h = !isExecute ? gh : createElement;\n        var slots = null;\n        if (!isNullOrUndefined(this.$slots.default)) {\n            slots = !isExecute ? this.$slots.default() : this.$slots.default;\n        }\n        return h('div', slots);\n    },\n    methods: {\n        clearTemplate: function (templateNames) {\n            if (!templateNames) {\n                templateNames = Object.keys(this.templateCollection || {});\n            }\n            if (templateNames.length && this.templateCollection) {\n                for (var _i = 0, templateNames_1 = templateNames; _i < templateNames_1.length; _i++) {\n                    var tempName = templateNames_1[_i];\n                    var elementCollection = this.templateCollection[tempName];\n                    if (elementCollection && elementCollection.length) {\n                        for (var _a = 0, elementCollection_1 = elementCollection; _a < elementCollection_1.length; _a++) {\n                            var ele = elementCollection_1[_a];\n                            var destroy = getValue('__vue__.$destroy', ele);\n                            if (destroy) {\n                                ele.__vue__.$destroy();\n                            }\n                            if (ele.innerHTML) {\n                                ele.innerHTML = '';\n                            }\n                        }\n                        delete this.templateCollection[tempName];\n                    }\n                }\n            }\n        },\n        setProperties: function (prop, muteOnChange) {\n            var _this = this;\n            if (this.isVue3) {\n                this.models = !this.models ? this.ej2Instances.referModels : this.models;\n            }\n            if (this.ej2Instances && this.ej2Instances._setProperties) {\n                this.ej2Instances._setProperties(prop, muteOnChange);\n            }\n            if (prop && this.models && this.models.length) {\n                Object.keys(prop).map(function (key) {\n                    _this.models.map(function (model) {\n                        if ((key === model) && !(/datasource/i.test(key))) {\n                            if (_this.isVue3) {\n                                _this.ej2Instances.vueInstance.$emit('update:' + key, prop[key]);\n                            }\n                            else {\n                                _this.$emit('update:' + key, prop[key]);\n                                _this.$emit('modelchanged', prop[key]);\n                            }\n                        }\n                    });\n                });\n            }\n        },\n        custom: function () {\n            this.updated();\n        },\n        addNodes: function (nodes, target, index, preventTargetExpand) {\n            return this.ej2Instances.addNodes(nodes, target, index, preventTargetExpand);\n        },\n        beginEdit: function (node) {\n            return this.ej2Instances.beginEdit(node);\n        },\n        checkAll: function (nodes) {\n            return this.ej2Instances.checkAll(nodes);\n        },\n        collapseAll: function (nodes, level, excludeHiddenNodes) {\n            return this.ej2Instances.collapseAll(nodes, level, excludeHiddenNodes);\n        },\n        disableNodes: function (nodes) {\n            return this.ej2Instances.disableNodes(nodes);\n        },\n        enableNodes: function (nodes) {\n            return this.ej2Instances.enableNodes(nodes);\n        },\n        ensureVisible: function (node) {\n            return this.ej2Instances.ensureVisible(node);\n        },\n        expandAll: function (nodes, level, excludeHiddenNodes) {\n            return this.ej2Instances.expandAll(nodes, level, excludeHiddenNodes);\n        },\n        getAllCheckedNodes: function () {\n            return this.ej2Instances.getAllCheckedNodes();\n        },\n        getDisabledNodes: function () {\n            return this.ej2Instances.getDisabledNodes();\n        },\n        getNode: function (node) {\n            return this.ej2Instances.getNode(node);\n        },\n        getTreeData: function (node) {\n            return this.ej2Instances.getTreeData(node);\n        },\n        moveNodes: function (sourceNodes, target, index, preventTargetExpand) {\n            return this.ej2Instances.moveNodes(sourceNodes, target, index, preventTargetExpand);\n        },\n        refreshNode: function (target, newData) {\n            return this.ej2Instances.refreshNode(target, newData);\n        },\n        removeNodes: function (nodes) {\n            return this.ej2Instances.removeNodes(nodes);\n        },\n        uncheckAll: function (nodes) {\n            return this.ej2Instances.uncheckAll(nodes);\n        },\n        updateNode: function (target, newText) {\n            return this.ej2Instances.updateNode(target, newText);\n        },\n    }\n});\nexport var TreeViewPlugin = {\n    name: 'ejs-treeview',\n    install: function (Vue) {\n        Vue.component(TreeViewPlugin.name, TreeViewComponent);\n    }\n};\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        _this.appointment = null;\n        return _this;\n    }\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n            this.parent.off(event.dataReady, this.renderEvents);\n        }\n    };\n    VerticalView.prototype.renderEvents = function () {\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n        this.appointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        this.setPersistence();\n    };\n    VerticalView.prototype.onAdaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\n        if (this.parent && !this.parent.isDestroyed) {\n            this.parent.removeNewEventElement();\n            this.parent.uiStateValues.top = e.target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        if (!this.parent) {\n            return;\n        }\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timeCells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timeCells, scrollerHeight);\n        this.setColWidth(content);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        header.style[args.cssProperties.rtlPadding] = '';\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            header.style[args.cssProperties.padding] = '';\n        }\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                if (this.parent.currentView.indexOf('Timeline') > -1) {\n                    content.scrollTop = this.parent.uiStateValues.top;\n                }\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                if (timeCells) {\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\n                }\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n        this.retainScrollPosition();\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\n                    : formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (!isNullOrUndefined(scrollDate)) {\n            var headerElement = this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + '[data-date=\"' + new Date(util.resetTime(scrollDate)).getTime() + '\"]');\n            if (headerElement) {\n                if (this.parent.enableRtl) {\n                    var conWrap = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n                    this.getScrollableElement().scrollLeft = -(conWrap.offsetWidth - headerElement.offsetLeft - headerElement.offsetWidth);\n                }\n                else {\n                    this.getScrollableElement().scrollLeft = headerElement.offsetLeft;\n                }\n            }\n        }\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.scrollToDate = function (scrollDate) {\n        this.scrollToHour(null, scrollDate);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.activeViewOptions.group.hideNonWorkingDays) {\n                while (columnLevels[0].length === 0) {\n                    this.parent.setProperties({ selectedDate: this.parent.activeView.getNextPreviousDate(this.previousNextAction) }, true);\n                    this.parent.activeView.getRenderDates();\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.setCalendarDate(this.parent.selectedDate);\n                        this.parent.headerModule.updateDateRange();\n                    }\n                    level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n                    columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n                }\n            }\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    // eslint-disable-next-line max-len\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        var currentDate = this.parent.getCurrentTime();\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(currentDate)) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\n                        window.setTimeout(function () {\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                                _this.clearCurrentTimeIndicatorTimer();\n                                _this.changeCurrentTimePosition();\n                                _this.updateCurrentTimeIndicatorTimer();\n                            }\n                        }, interval);\n                    }\n                    this.updateCurrentTimeIndicatorTimer();\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            var currentDate = util.resetTime(this.parent.getCurrentTime());\n            if (this.parent.virtualScrollModule && this.parent.activeViewOptions.allowVirtualScrolling &&\n                this.parent.activeViewOptions.group.byDate) {\n                for (var _i = 0, _a = this.parent.resourceBase.expandedResources; _i < _a.length; _i++) {\n                    var resource = _a[_i];\n                    if (util.resetTime(resource.date).getTime() === currentDate.getTime()) {\n                        currentDateIndex.push(count);\n                    }\n                    count += 1;\n                }\n            }\n            else {\n                for (var _b = 0, _c = this.parent.resourceBase.renderedResources; _b < _c.length; _b++) {\n                    var resource = _c[_b];\n                    var index = this.parent.getIndexOfDate(resource.renderDates, currentDate);\n                    if (index >= 0) {\n                        var resIndex = this.parent.activeViewOptions.group.byDate ?\n                            (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                        currentDateIndex.push(resIndex);\n                    }\n                    count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n                }\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n        var _this = this;\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n            var indicator = timeIndicator_1[_i];\n            remove(indicator);\n        }\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[parseInt(i.toString(), 10)].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[parseInt(day.toString(), 10)].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            if (timeTrs[parseInt(rowIndex.toString(), 10)]) {\n                addClass([timeTrs[parseInt(rowIndex.toString(), 10)].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            }\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return parseFloat(this.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: date, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: date, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: date, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.refreshHeader = function () {\n        remove(this.element.querySelector('tbody tr'));\n        this.renderHeader();\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling && !this.parent.uiStateValues.isGroupAdaptive) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        if (this.parent.rowAutoHeight && this.parent.eventSettings.ignoreWhitespace) {\n            clsList.push(cls.IGNORE_WHITESPACE);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.renderedResources = extend([], this.parent.resourceBase.lastResourceLevel, null, true);\n        }\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            var levels = this.colLevels.slice(0);\n            if (this.parent.virtualScrollModule) {\n                this.resetColLevels();\n            }\n            var wrap = this.renderContentArea();\n            workTd.appendChild(wrap);\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n            if (this.parent.virtualScrollModule) {\n                this.colLevels = levels;\n                this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n            }\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var nth;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[parseInt(i.toString(), 10)][0] && this.colLevels[parseInt(i.toString(), 10)][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            nth = this.createTd(data_1);\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\n            ntr_1.appendChild(nth);\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        this.parent.renderHeaderIndentTemplate(data, nth);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr', { className: cls.HEADER_ROW_CLASS });\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            var level = this.colLevels[parseInt(i.toString(), 10)];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[parseInt(j.toString(), 10)]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        this.createColGroup(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr', { className: cls.ALLDAY_ROW_CLASS });\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[parseInt(j.toString(), 10)]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        this.addAutoHeightClass(tbl);\n        this.renderContentTable(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.getContentRows = function () {\n        var _this = this;\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        return rows;\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        var cellDate = util.resetTime(tdData.date);\n        if (!this.parent.isMinMaxDate(cellDate)) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.parent.eventBase.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.parent.eventBase.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            var duration = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / duration);\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    VerticalView.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.getTimeSlotRows();\n            var startDate = new Date(new Date(timeSlots[0].date.getTime()).\n                setHours(startTime.getHours(), startTime.getMinutes(), startTime.getMilliseconds()));\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > startDate.getTime()) {\n                    startTime.setHours(timeSlots[i - 1].date.getHours(), timeSlots[i - 1].date.getMinutes(), timeSlots[i - 1].date.getMilliseconds());\n                    return new Date(startTime);\n                }\n            }\n        }\n        return null;\n    };\n    VerticalView.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            if (this.appointment) {\n                this.appointment.destroy();\n                this.appointment = null;\n            }\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, createElement, prepend, extend, formatUnit, append, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { VerticalView } from './vertical-view';\nimport { TimelineEvent } from '../event-renderer/timeline-view';\nimport { TimelineHeaderRow } from './timeline-header-row';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * timeline views\n */\nvar TimelineViews = /** @class */ (function (_super) {\n    __extends(TimelineViews, _super);\n    function TimelineViews(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.timelineAppointment = null;\n        _this.baseCssClass = 'e-timeline-view';\n        return _this;\n    }\n    TimelineViews.prototype.getModuleName = function () {\n        return 'timelineViews';\n    };\n    TimelineViews.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    };\n    TimelineViews.prototype.scrollTopPanel = function (target) {\n        _super.prototype.scrollTopPanel.call(this, target);\n        this.scrollHeaderLabels(target);\n    };\n    TimelineViews.prototype.scrollToWorkHour = function () {\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var currDateTime = this.isWorkDay(this.parent.selectedDate) && this.parent.workHours.highlight &&\n            !isNullOrUndefined(start) ? new Date(+this.parent.selectedDate).setHours(start.getHours(), start.getMinutes(), 0, 0)\n            : new Date(+this.parent.selectedDate).setHours(0, 0, 0, 0);\n        var queryString = '[data-date=\"' + new Date(currDateTime).getTime().toString() + '\"]';\n        var firstWorkHourCell = this.element.querySelector(queryString);\n        if (firstWorkHourCell) {\n            this.getContentAreaElement().scrollLeft = !this.parent.enableRtl ? firstWorkHourCell.offsetLeft :\n                -(this.parent.getContentTable().offsetWidth - firstWorkHourCell.offsetLeft - firstWorkHourCell.offsetWidth);\n        }\n    };\n    TimelineViews.prototype.scrollToHour = function (hour, scrollDate) {\n        var date;\n        var index;\n        if (scrollDate) {\n            index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(scrollDate));\n            if (index >= 0) {\n                date = scrollDate;\n                if (!isNullOrUndefined(hour)) {\n                    var timeString = hour.split(':');\n                    if (timeString.length === 2) {\n                        date = new Date(scrollDate.setHours(parseInt(timeString[0], 10), parseInt(timeString[1], 10), 0));\n                    }\n                }\n            }\n        }\n        date = isNullOrUndefined(scrollDate) ? this.parent.getStartEndTime(hour) : date;\n        if (isNullOrUndefined(date)) {\n            return;\n        }\n        var scrollLeft;\n        if (isNullOrUndefined(hour) || !this.parent.activeViewOptions.timeScale.enable) {\n            scrollLeft = index * this.getWorkCellWidth();\n        }\n        else {\n            scrollLeft = isNullOrUndefined(scrollDate) ? this.getLeftFromDateTime(null, date) :\n                this.getLeftFromDateTime([index], date);\n        }\n        this.getScrollableElement().scrollLeft = !this.parent.enableRtl ? scrollLeft : -scrollLeft;\n    };\n    TimelineViews.prototype.generateColumnLevels = function () {\n        var levels = [];\n        var dateSlots = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        levels.push(dateSlots);\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            this.parent.resourceBase.generateResourceLevels(dateSlots, !this.parent.uiStateValues.isGroupAdaptive);\n        }\n        var hourSlots = [];\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            hourSlots = this.generateTimeSlots(levels[levels.length - 1]);\n            levels.push(hourSlots);\n        }\n        if (this.parent.activeViewOptions.headerRows.length > 0) {\n            var renderGn = new TimelineHeaderRow(this.parent, this.renderDates);\n            levels = renderGn.generateColumnLevels(dateSlots, hourSlots);\n        }\n        return levels;\n    };\n    TimelineViews.prototype.generateTimeSlots = function (dateSlots) {\n        var _this = this;\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.first ? [cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS, cls.TIME_CELLS_CLASS];\n            r.workDays = _this.parent.activeViewOptions.workDays;\n            return r;\n        };\n        var timeSlotData = this.getTimeSlotRows(handler);\n        var slots = [];\n        for (var _i = 0, dateSlots_1 = dateSlots; _i < dateSlots_1.length; _i++) {\n            var data = dateSlots_1[_i];\n            data.colSpan = timeSlotData.length;\n            var tempTimeSlots = extend([], timeSlotData, null, true);\n            for (var _a = 0, tempTimeSlots_1 = tempTimeSlots; _a < tempTimeSlots_1.length; _a++) {\n                var slot = tempTimeSlots_1[_a];\n                var cellDate = util.resetTime(new Date('' + data.date));\n                slot.date = util.setTime(cellDate, util.getDateInMs(slot.date));\n                slots.push(slot);\n            }\n        }\n        return slots;\n    };\n    TimelineViews.prototype.changeCurrentTimePosition = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var left = this.getLeftFromDateTime(currentDateIndex, this.parent.getCurrentTime());\n        var height = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS).offsetHeight;\n        var headerWrap = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var contentWrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        contentWrap.appendChild(createElement('div', {\n            className: cls.CURRENT_TIMELINE_CLASS,\n            styles: (this.parent.enableRtl ? 'right' : 'left') + ':' + formatUnit(left) + '; height:' + formatUnit(height)\n        }));\n        if (this.parent.virtualScrollModule) {\n            var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n            var element = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS + ' table');\n            setStyleAttribute(timeIndicator, {\n                transform: element.style.transform\n            });\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS\n        });\n        headerWrap.appendChild(currentTimeEle);\n        currentTimeEle.style[this.parent.enableRtl ? 'right' : 'left'] = formatUnit(left - (currentTimeEle.offsetWidth / 2));\n    };\n    TimelineViews.prototype.getLeftFromDateTime = function (currentDateIndex, date) {\n        var startHour = this.getStartHour();\n        var diffInDates = 0;\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        if (!isNullOrUndefined(currentDateIndex)) {\n            if (currentDateIndex[0] !== 0) {\n                var index = this.parent.activeView.colLevels.findIndex(function (level) { return level[0].type === 'dateHeader'; });\n                if (this.parent.activeView.colLevels[parseInt(index.toString(), 10)] &&\n                    this.parent.activeView.colLevels[parseInt(index.toString(), 10)][0].colSpan) {\n                    diffInDates = currentDateIndex[0] * this.parent.activeView.colLevels[parseInt(index.toString(), 10)][0].colSpan *\n                        this.getWorkCellWidth();\n                }\n                else {\n                    var endHour = this.getEndHour();\n                    var end = (endHour.getHours() === 0) ? 24 : endHour.getHours();\n                    diffInMinutes = diffInMinutes + ((currentDateIndex[0]) * (((end - startHour.getHours()) * 60) +\n                        (endHour.getMinutes() - startHour.getMinutes())));\n                }\n            }\n        }\n        return diffInDates + ((diffInMinutes * this.getWorkCellWidth() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval);\n    };\n    TimelineViews.prototype.getWorkCellWidth = function () {\n        return this.element.querySelector('.e-work-cells').getBoundingClientRect().width;\n    };\n    TimelineViews.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\n        }\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    TimelineViews.prototype.createAllDayRow = function (table, tdData) { };\n    TimelineViews.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        var index = this.parent.getIndexOfDate(this.renderDates, util.resetTime(this.parent.getCurrentTime()));\n        if (index >= 0) {\n            currentDateIndex.push(index);\n        }\n        return currentDateIndex;\n    };\n    TimelineViews.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            var resTd = createElement('td');\n            resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n            tr.appendChild(resTd);\n        }\n        var workTd = createElement('td');\n        var wrap = this.renderContentArea();\n        wrap.appendChild(this.createEventTable(this.getRowCount()));\n        this.collapseRows(wrap);\n        workTd.appendChild(wrap);\n        tr.appendChild(workTd);\n        if (this.parent.virtualScrollModule) {\n            this.parent.virtualScrollModule.renderVirtualTrack(wrap);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    TimelineViews.prototype.getRowCount = function () {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            return this.parent.resourceBase.renderedResources.length;\n        }\n        return 1;\n    };\n    TimelineViews.prototype.getResourceTdData = function (i, tdData) {\n        var resLevel = this.parent.resourceBase.renderedResources[parseInt(i.toString(), 10)];\n        var resSHr = resLevel.resourceData[resLevel.resource.startHourField] || this.parent.workHours.start;\n        var resEHr = resLevel.resourceData[resLevel.resource.endHourField] || this.parent.workHours.end;\n        tdData.startHour = this.parent.getStartEndTime(resSHr);\n        tdData.endHour = this.parent.getStartEndTime(resEHr);\n        tdData.workDays = resLevel.resourceData[resLevel.resource.workDaysField] || this.parent.workDays;\n        tdData.className = resLevel.className;\n        tdData.groupIndex = resLevel.groupIndex;\n        tdData.groupOrder = resLevel.groupOrder;\n        return tdData;\n    };\n    TimelineViews.prototype.renderContentTable = function (table) {\n        var tBody = table.querySelector('tbody');\n        append(this.getContentRows(), tBody);\n    };\n    TimelineViews.prototype.getContentRows = function () {\n        var rows = [];\n        var tr = createElement('tr');\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var trCount = this.getRowCount();\n        for (var i = 0; i < trCount; i++) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = this.colLevels[this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                    tdData = this.getResourceTdData(i, tdData);\n                }\n                var ntd = this.createContentTd(tdData, tdData, td);\n                ntr.appendChild(ntd);\n            }\n            rows.push(ntr);\n        }\n        return rows;\n    };\n    TimelineViews.prototype.getContentTdClass = function (r) {\n        return (r.first || !this.parent.activeViewOptions.timeScale.enable) ? [cls.WORK_CELLS_CLASS] :\n            [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    TimelineViews.prototype.renderEvents = function () {\n        this.timelineAppointment = new TimelineEvent(this.parent, this.parent.activeViewOptions.timeScale.enable ? 'hour' : 'day');\n        this.timelineAppointment.renderAppointments();\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    TimelineViews.prototype.getAdjustedDate = function (date) {\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            return new Date(date.setHours(0, 0, 0, 0));\n        }\n        else {\n            var timeSlots = this.colLevels[this.colLevels.length - 1];\n            for (var i = 0; i < timeSlots.length; i++) {\n                if (timeSlots[parseInt(i.toString(), 10)].date.getTime() > date.getTime()) {\n                    return timeSlots[i - 1].date;\n                }\n            }\n        }\n        return null;\n    };\n    TimelineViews.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.timelineAppointment) {\n            this.timelineAppointment.destroy();\n            this.timelineAppointment = null;\n        }\n        _super.prototype.destroy.call(this);\n    };\n    return TimelineViews;\n}(VerticalView));\nexport { TimelineViews };\n","import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, EventHandler, remove } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     *\n     * @param {Schedule} parent Accepts the schedule instance\n     */\n    function ViewBase(parent) {\n        this.previousNextAction = 'next';\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.refreshHeader = function () {\n        // Method to refresh the date header\n    };\n    ViewBase.prototype.refreshResourceHeader = function () {\n        remove(this.element.querySelector('tbody').lastElementChild.firstElementChild);\n        var resTd = createElement('td');\n        resTd.appendChild(this.parent.resourceBase.createResourceColumn());\n        prepend([resTd], this.element.querySelector('tbody').lastElementChild);\n        this.parent.notify(event.contentReady, {});\n    };\n    ViewBase.prototype.getDayName = function (date) {\n        return this.parent.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewBase.prototype.getDate = function (date) {\n        return this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() });\n    };\n    ViewBase.prototype.getTime = function (date) {\n        if (this.parent.isAdaptive) {\n            if (this.parent.activeViewOptions.timeFormat === 'HH:mm' || this.parent.activeViewOptions.timeFormat === 'HH.mm') {\n                return this.parent.globalize.formatDate(date, { format: 'H', calendar: this.parent.getCalendarMode() });\n            }\n            return this.parent.globalize.formatDate(date, { skeleton: 'h', calendar: this.parent.getCalendarMode() });\n        }\n        return this.parent.getTimeString(date);\n    };\n    ViewBase.prototype.getTimelineDate = function (date) {\n        var text = this.parent.globalize.formatDate(date, { skeleton: 'MMMd', calendar: this.parent.getCalendarMode() }) + ', ' +\n            this.parent.getDayNames('wide')[date.getDay()];\n        return util.capitalizeFirstWord(text, 'multiple');\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[parseInt(row.toString(), 10)].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.setAriaAttributes = function (table) {\n        table.setAttribute('role', 'grid');\n        table.setAttribute('aria-label', this.getLabelText(this.parent.currentView));\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? util.getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? -(target.scrollLeft) : target.scrollLeft;\n            for (var _i = 0, headerCells_2 = headerCells; _i < headerCells_2.length; _i++) {\n                var cell = headerCells_2[_i];\n                colSpan += parseInt(cell.getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = cell;\n                    break;\n                }\n                tdLeft += cell.offsetWidth;\n            }\n            if (!isNullOrUndefined(currentCell)) {\n                currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n            }\n        };\n        var classNames = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var _i = 0, classNames_1 = classNames; _i < classNames_1.length; _i++) {\n            var className = classNames_1[_i];\n            var headerCells = [].slice.call(this.element.querySelectorAll(className));\n            if (headerCells.length > 0) {\n                for (var _a = 0, headerCells_1 = headerCells; _a < headerCells_1.length; _a++) {\n                    var element = headerCells_1[_a];\n                    element.children[0].style[this.parent.enableRtl ? 'right' : 'left'] = '';\n                }\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += util.getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        return []; // Here getDateSlots only need in vertical and month views\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        return []; // Here generateColumnLevels only need in vertical and month views\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.getStartDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.getEndDate = function () {\n        return this.renderDates[this.renderDates.length - 1];\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === new Date(this.parent.currentTimezoneDate).setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        if (this.parent.activeViewOptions.displayDate || this.parent.activeViewOptions.numberOfWeeks > 0) {\n            return this.parent.activeView.getStartDate().getTime() <= this.parent.getCurrentTime().getTime() &&\n                this.parent.activeView.getEndDate().getTime() >= this.parent.getCurrentTime().getTime();\n        }\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        return !(util.getDateInMs(date) < util.getDateInMs(startHour) || util.getDateInMs(date) >= util.getDateInMs(endHour) ||\n            !this.isWorkDay(date, workDays));\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = util.resetTime(this.parent.selectedDate);\n            var start = util.getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = util.WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = util.addDays(start, 1);\n            }\n        }\n        else {\n            var dayCount = this.parent.currentView === 'Agenda' ? this.parent.agendaDaysCount :\n                this.parent.activeViewOptions.interval;\n            var start = util.resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = util.addDays(start, 1);\n            } while (dayCount !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        this.previousNextAction = type;\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return util.addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'next') {\n                    date = util.addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = util.addDays(date, 1);\n                    }\n                }\n                else {\n                    date = util.addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = util.addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        var weekLength = type === 'next' ? util.WEEK_LENGTH : -util.WEEK_LENGTH;\n        return util.addDays(this.parent.selectedDate, weekLength * this.parent.activeViewOptions.interval);\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return util.capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return util.capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n            longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n        }\n        else {\n            longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n        }\n        if (!endDate) {\n            return util.capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return util.capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' +\n                util.capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = cls.TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            var resourceText = createElement('div', { className: className });\n            this.parent.sanitize(tdData.resourceData[tdData.resource.textField], resourceText);\n            tdElement.appendChild(resourceText);\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = (contentBody.getBoundingClientRect().width / (colElements.length / 2));\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n            var cssClass = \".\" + cls.HEADER_CELLS_CLASS + \",.\" + cls.TIME_SLOT_CLASS + \",.\" + cls.HEADER_WEEK_CELLS_CLASS + \",.\" + cls.HEADER_MONTH_CELLS_CLASS + \",.\" + cls.HEADER_YEAR_CELLS_CLASS;\n            var headerCellElements = [].slice.call(this.element.querySelectorAll(cssClass));\n            headerCellElements.forEach(function (ele) {\n                var colSpan = isNullOrUndefined(ele.getAttribute('colspan')) ? '1' : ele.getAttribute('colspan');\n                var headerCellColSpan = parseInt(colSpan, 10);\n                setStyleAttribute(ele, { 'width': formatUnit(colWidth_1 * headerCellColSpan) });\n            });\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        for (var _i = 0, colElements_1 = colElements; _i < colElements_1.length; _i++) {\n            var col = colElements_1[_i];\n            col.style.width = '';\n        }\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n            for (var _i = 0, treeIcons_1 = treeIcons; _i < treeIcons_1.length; _i++) {\n                var icon = treeIcons_1[_i];\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', this.parent.resourceBase.onTreeIconClick, this.parent.resourceBase);\n            }\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var tdDate = new Date(util.resetTime(new Date(+scrollDate)).getTime()).getTime();\n        var dateElement = scrollWrap.querySelector(\".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + tdDate + \"\\\"]\");\n        if (this.parent.currentView === 'Month' && dateElement) {\n            if (scrollWrap.scrollWidth > scrollWrap.clientWidth) {\n                if (!this.parent.enableRtl) {\n                    scrollWrap.scrollLeft = dateElement.offsetLeft;\n                }\n                else {\n                    scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n                }\n            }\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            if (!this.parent.enableRtl) {\n                scrollWrap.scrollLeft = dateElement.offsetLeft;\n            }\n            else {\n                scrollWrap.scrollLeft = -(this.parent.getContentTable().offsetWidth - dateElement.offsetLeft - dateElement.offsetWidth);\n            }\n        }\n    };\n    ViewBase.prototype.setPersistence = function () {\n        if (this.parent.enablePersistence) {\n            var contentWrap = this.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(contentWrap)) {\n                this.parent.scrollLeft = contentWrap.scrollLeft;\n                this.parent.scrollTop = contentWrap.scrollTop;\n            }\n        }\n    };\n    ViewBase.prototype.retainScrollPosition = function () {\n        if (this.parent.enablePersistence) {\n            var conWrap = this.parent.element.querySelector('.e-content-wrap');\n            if (!isNullOrUndefined(conWrap) && !isNullOrUndefined(this.parent.scrollLeft) && !isNullOrUndefined(this.parent.scrollTop)) {\n                conWrap.scrollTop = this.parent.scrollTop;\n                conWrap.scrollLeft = this.parent.scrollLeft;\n            }\n        }\n    };\n    ViewBase.prototype.getViewStartDate = function () {\n        var startDate = this.renderDates[0];\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            startDate = this.parent.resourceBase.getResourceRenderDates()[0];\n        }\n        return startDate;\n    };\n    ViewBase.prototype.getViewEndDate = function () {\n        var endDate = util.addDays(this.renderDates[this.renderDates.length - 1], 1);\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.resourceBase.lastResourceLevel.length > 0) {\n            endDate = util.addDays(this.parent.resourceBase.getResourceRenderDates().slice(-1)[0], 1);\n        }\n        return endDate;\n    };\n    ViewBase.prototype.getAdjustedDate = function (startTime) {\n        if (!this.parent.activeViewOptions.timeScale.enable || this.parent.currentView === 'Month' ||\n            (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length === 0)) {\n            return new Date(startTime.setHours(0, 0, 0, 0));\n        }\n        else if (this.parent.currentView === 'TimelineYear' && this.parent.activeViewOptions.group.resources.length > 0) {\n            startTime.setHours(0, 0, 0, 0);\n            return new Date(startTime.setDate(1));\n        }\n        return null;\n    };\n    ViewBase.prototype.resetColLevels = function () {\n        this.parent.resourceBase.expandedResources = [];\n        var renderedCount = this.parent.virtualScrollModule.getRenderedCount();\n        var lastLevel = this.parent.activeViewOptions.group.byDate ? this.colLevels[0] :\n            this.parent.resourceBase.renderedResources;\n        var index = 0;\n        for (var i = 0; i < lastLevel.length; i++) {\n            if (index >= renderedCount) {\n                break;\n            }\n            index += lastLevel[parseInt(i.toString(), 10)].colSpan;\n            this.parent.resourceBase.expandedResources.push(lastLevel[parseInt(i.toString(), 10)]);\n        }\n        if (this.parent.activeViewOptions.group.byDate) {\n            this.colLevels[0] = this.parent.resourceBase.expandedResources;\n            this.parent.virtualScrollModule.setRenderedDates(this.parent.resourceBase.expandedResources);\n        }\n        else {\n            this.colLevels[this.colLevels.length - 2] = this.parent.resourceBase.expandedResources;\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources;\n        }\n        if (this.parent.currentView !== 'Month') {\n            this.colLevels[this.colLevels.length - 1] = this.colLevels[this.colLevels.length - 1].slice(0, index);\n            this.parent.resourceBase.expandedResources = this.colLevels[this.colLevels.length - 1];\n        }\n    };\n    ViewBase.prototype.destroy = function () {\n        if (this.element && this.element.parentNode) {\n            remove(this.element);\n        }\n        this.element = null;\n        this.renderDates = null;\n        this.colLevels = null;\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n","var aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nvar $TypeError = TypeError;\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aCallable(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = lengthOfArrayLike(O);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw $TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","import { createElement } from '@syncfusion/ej2-base';\nimport { MS_PER_DAY, capitalizeFirstWord } from '../base/util';\n/**\n * timeline header rows\n */\nvar TimelineHeaderRow = /** @class */ (function () {\n    function TimelineHeaderRow(parent, renderDates) {\n        this.parent = parent;\n        this.renderDates = renderDates;\n    }\n    TimelineHeaderRow.prototype.groupByYear = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_1 = dates; _i < dates_1.length; _i++) {\n            var d = dates_1[_i];\n            var key = d.getFullYear();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByMonth = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_2 = dates; _i < dates_2.length; _i++) {\n            var d = dates_2[_i];\n            var key = (d.getFullYear() - 1970) * 12 + d.getMonth();\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.groupByWeek = function (dates) {\n        var result = {};\n        for (var _i = 0, dates_3 = dates; _i < dates_3.length; _i++) {\n            var d = dates_3[_i];\n            var jsDate = +new Date(1970, 0, 1);\n            var tzOffsetDiff = d.getTimezoneOffset() - new Date(1970, 0, 1).getTimezoneOffset();\n            var key = Math.ceil(((((+d - jsDate) - (tzOffsetDiff * 60 * 1000)) / MS_PER_DAY) + new Date(jsDate).getDay() + 1) / 7);\n            if (this.parent.firstDayOfWeek && this.parent.firstDayOfWeek > new Date(+d).getDay()) {\n                key = key - 1;\n            }\n            result[parseInt(key.toString(), 10)] = result[parseInt(key.toString(), 10)] || [];\n            result[parseInt(key.toString(), 10)].push(d);\n        }\n        return result;\n    };\n    TimelineHeaderRow.prototype.generateSlots = function (data, colspan, row, cls, type) {\n        var _this = this;\n        var dateParser = function (date, format) {\n            return _this.parent.globalize.formatDate(date, { format: format, calendar: _this.parent.getCalendarMode() });\n        };\n        var tdDatas = [];\n        var keys = Object.keys(data);\n        for (var i = 0; i < keys.length; i++) {\n            var dates = data[keys[parseInt(i.toString(), 10)]];\n            var htmlCol = void 0;\n            if (row.template) {\n                var args = { date: dates[0], type: type };\n                var templateId = this.parent.element.id + '_headerRowTemplate';\n                htmlCol = [].slice.call(this.parent.templateParser(row.template)(args, this.parent, 'template', templateId, false));\n            }\n            else {\n                var viewTemplate = void 0;\n                switch (row.option) {\n                    case 'Year':\n                        viewTemplate = \"<span class=\\\"e-header-year\\\">\" + dateParser(dates[0], 'y') + \"</span>\";\n                        break;\n                    case 'Month':\n                        viewTemplate = \"<span class=\\\"e-header-month\\\">\" + capitalizeFirstWord(dateParser(dates[0], 'MMMM'), 'single') + \"</span>\";\n                        break;\n                    case 'Week':\n                        viewTemplate = \"<span class=\\\"e-header-week\\\">\" + this.parent.getWeekNumberContent(dates) + \"</span>\";\n                }\n                var headerWrapper = createElement('div', { innerHTML: viewTemplate });\n                htmlCol = [].slice.call(headerWrapper.childNodes);\n            }\n            tdDatas.push({ date: dates[0], type: type, className: [cls], colSpan: dates.length * colspan, template: htmlCol });\n        }\n        return tdDatas;\n    };\n    TimelineHeaderRow.prototype.generateColumnLevels = function (dateSlots, hourSlots) {\n        var levels = [];\n        var rows = this.parent.activeViewOptions.headerRows;\n        var lastLevelColspan = 1;\n        if (rows[rows.length - 1].option === 'Hour' && hourSlots.length > 0) {\n            lastLevelColspan = hourSlots.length / dateSlots.length;\n        }\n        var tdDatas = [];\n        var byYear;\n        var byMonth;\n        var byWeek;\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n            var row = rows_1[_i];\n            switch (row.option) {\n                case 'Year':\n                    byYear = this.groupByYear(this.renderDates);\n                    tdDatas = this.generateSlots(byYear, lastLevelColspan, row, 'e-header-year-cell', 'yearHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Month':\n                    byMonth = this.groupByMonth(this.renderDates);\n                    tdDatas = this.generateSlots(byMonth, lastLevelColspan, row, 'e-header-month-cell', 'monthHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Week':\n                    byWeek = this.groupByWeek(this.renderDates);\n                    tdDatas = this.generateSlots(byWeek, lastLevelColspan, row, 'e-header-week-cell', 'weekHeader');\n                    levels.push(tdDatas);\n                    break;\n                case 'Date':\n                    tdDatas = dateSlots;\n                    tdDatas = tdDatas.map(function (value) {\n                        value.colSpan = lastLevelColspan;\n                        return value;\n                    });\n                    levels.push(tdDatas);\n                    break;\n                case 'Hour':\n                    if (hourSlots.length > 0) {\n                        levels.push(hourSlots);\n                    }\n                    break;\n            }\n        }\n        return levels;\n    };\n    return TimelineHeaderRow;\n}());\nexport { TimelineHeaderRow };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, addClass, createElement, append, EventHandler, extend, remove } from '@syncfusion/ej2-base';\nimport { ListBase } from '@syncfusion/ej2-lists';\nimport { ViewBase } from '../renderer/view-base';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nvar AgendaBase = /** @class */ (function (_super) {\n    __extends(AgendaBase, _super);\n    function AgendaBase(parent) {\n        return _super.call(this, parent) || this;\n    }\n    // eslint-disable-next-line max-len\n    AgendaBase.prototype.createAgendaContentElement = function (type, listData, aTd, groupOrder, groupIndex) {\n        var _this = this;\n        var listElement;\n        var fieldMapping = this.parent.eventFields;\n        if (type === 'noEvents') {\n            var noEvents = [{ 'subject': this.parent.localeObj.getConstant('noEvents') }];\n            listElement = ListBase.createList(this.parent.createElement, noEvents, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass,\n                template: \"<div class=\\\"\" + cls.AGENDA_NO_EVENT_CLASS + \"\\\">\" + this.parent.localeObj.getConstant('noEvents') + \"</div>\"\n            });\n            if (listElement.querySelector('.e-agenda-item').children.length === 0) {\n                listElement.firstElementChild.appendChild(createElement('div', { className: cls.AGENDA_NO_EVENT_CLASS, innerHTML: this.parent.localeObj.getConstant('noEvents') }));\n            }\n        }\n        else {\n            listElement = ListBase.createList(this.parent.createElement, listData, {\n                moduleName: 'agenda',\n                listClass: this.parent.activeView.viewClass,\n                itemClass: this.parent.activeView.viewClass\n            });\n            var listElements = [].slice.call(listElement.children);\n            listElements.forEach(function (element, li) {\n                var appWrapper = createElement('div', {\n                    className: cls.APPOINTMENT_CLASS, attrs: {\n                        'data-id': 'Appointment_' + listData[parseInt(li.toString(), 10)][\"\" + _this.parent.eventFields.id],\n                        'data-guid': listData[parseInt(li.toString(), 10)].Guid,\n                        'role': 'button',\n                        'tabindex': '0',\n                        'aria-disabled': _this.parent.eventBase.getReadonlyAttribute(listData[parseInt(li.toString(), 10)]),\n                        'aria-label': _this.parent.getAnnouncementString(listData[parseInt(li.toString(), 10)])\n                    }\n                });\n                if (!isNullOrUndefined(groupIndex)) {\n                    appWrapper.setAttribute('data-group-index', groupIndex.toString());\n                }\n                _this.parent.eventBase.applyResourceColor(appWrapper, listData[parseInt(li.toString(), 10)], 'borderColor', groupOrder);\n                var templateEle;\n                if (!isNullOrUndefined(_this.parent.activeViewOptions.eventTemplate)) {\n                    addClass([appWrapper], cls.EVENT_TEMPLATE);\n                    var scheduleId = _this.parent.element.id + '_';\n                    var viewName = _this.parent.activeViewOptions.eventTemplateName;\n                    var templateId = scheduleId + viewName + 'eventTemplate';\n                    templateEle = _this.parent.getAppointmentTemplate()(listData[parseInt(li.toString(), 10)], _this.parent, 'eventTemplate', templateId, false);\n                    if (!isNullOrUndefined(listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceRule])) {\n                        var iconClass = (listData[parseInt(li.toString(), 10)][fieldMapping.id] ===\n                            listData[parseInt(li.toString(), 10)][fieldMapping.recurrenceID]) ?\n                            cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n                        appWrapper.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n                    }\n                }\n                else {\n                    templateEle = _this.createAppointment(listData[parseInt(li.toString(), 10)]);\n                }\n                append([].slice.call(templateEle), appWrapper);\n                util.removeChildren(element);\n                element.appendChild(appWrapper);\n                var args = {\n                    data: extend({}, listData[parseInt(li.toString(), 10)], null, true),\n                    element: element, cancel: false\n                };\n                _this.parent.trigger(event.eventRendered, args, function (eventArgs) {\n                    if (eventArgs.cancel) {\n                        remove(element);\n                    }\n                });\n            });\n        }\n        aTd.appendChild(listElement);\n        if ((this.parent.currentView === 'MonthAgenda' && this.parent.activeViewOptions.group.resources.length > 0)\n            || this.parent.currentView === 'Agenda') {\n            addClass([aTd], cls.AGENDA_DAY_BORDER_CLASS);\n        }\n        this.parent.renderTemplates();\n        return aTd;\n    };\n    AgendaBase.prototype.createAppointment = function (event) {\n        var fieldMapping = this.parent.eventFields;\n        var eventSubject = (event[fieldMapping.subject] || this.parent.eventSettings.fields.subject.default\n            || this.parent.localeObj.getConstant('addTitle'));\n        var eventLocation = (event[fieldMapping.location] || this.parent.eventSettings.fields.location.default);\n        var appSubjectWrap = createElement('div', { className: cls.SUBJECT_WRAP });\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            eventSubject += ',';\n        }\n        var appSubjectText = createElement('div', { className: cls.SUBJECT_CLASS });\n        this.parent.sanitize(eventSubject, appSubjectText);\n        appSubjectWrap.appendChild(appSubjectText);\n        if (!isNullOrUndefined(eventLocation) && eventLocation !== '') {\n            var appLocation = createElement('div', { className: cls.LOCATION_CLASS });\n            this.parent.sanitize(eventLocation, appLocation);\n            appSubjectWrap.appendChild(appLocation);\n        }\n        if (!isNullOrUndefined(event[fieldMapping.recurrenceRule])) {\n            var iconClass = (event[fieldMapping.id] === event[fieldMapping.recurrenceID]) ?\n                cls.EVENT_RECURRENCE_ICON_CLASS : cls.EVENT_RECURRENCE_EDIT_ICON_CLASS;\n            appSubjectWrap.appendChild(createElement('div', { className: cls.ICON + ' ' + iconClass }));\n        }\n        var strDate = event[fieldMapping.startTime];\n        var endDate = event[fieldMapping.endTime];\n        var isAllDay = event[fieldMapping.isAllDay];\n        var allDayStr = this.parent.localeObj.getConstant('allDay');\n        var timeStr = this.parent.getTimeString(strDate) + ' - ' + this.parent.getTimeString(endDate);\n        if (!isNullOrUndefined(event.data)) {\n            var milliSeconds = (endDate.getTimezoneOffset() !== strDate.getTimezoneOffset()) ?\n                (endDate.getTime() - strDate.getTime() + 3600000) : (endDate.getTime() - strDate.getTime());\n            var eventString = (milliSeconds / util.MS_PER_DAY) >= 1 ? allDayStr : timeStr;\n            allDayStr = eventString + ' (' + this.parent.localeObj.getConstant('day') + ' '\n                + event.data.index + '/' + event.data.count + ')';\n        }\n        var displayStr = (!isNullOrUndefined(event.data) || isAllDay) ? allDayStr : timeStr;\n        var appDateTime = createElement('div', { className: cls.DATE_TIME_CLASS, innerHTML: displayStr });\n        return [appSubjectWrap, appDateTime];\n    };\n    AgendaBase.prototype.processAgendaEvents = function (events) {\n        var eventsProcessed = [];\n        if (isNullOrUndefined(events)) {\n            return eventsProcessed;\n        }\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\n            var event_1 = events_1[_i];\n            var spanned = this.parent.eventBase.splitEventByDay(event_1);\n            eventsProcessed = eventsProcessed.concat(spanned.length > 1 ? spanned : event_1);\n        }\n        return eventsProcessed;\n    };\n    AgendaBase.prototype.wireEventActions = function () {\n        var eventElement = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CLASS));\n        for (var _i = 0, eventElement_1 = eventElement; _i < eventElement_1.length; _i++) {\n            var element = eventElement_1[_i];\n            this.parent.eventBase.wireAppointmentEvents(element, this.parent.getEventDetails(element), true);\n        }\n        var dateHeaderElement = [].slice.call(this.parent.element.querySelectorAll('.e-m-date'));\n        for (var _a = 0, dateHeaderElement_1 = dateHeaderElement; _a < dateHeaderElement_1.length; _a++) {\n            var element = dateHeaderElement_1[_a];\n            EventHandler.add(element, 'click', this.parent.agendaModule.dayNavigationClick, this);\n        }\n    };\n    AgendaBase.prototype.calculateResourceTableElement = function (tBody, noOfDays, agendaDate) {\n        if (isNullOrUndefined(this.parent.resourceBase.lastResourceLevel)) {\n            var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n            this.parent.resourceBase.generateResourceLevels(level);\n        }\n        var agendaLastDate = util.addDays(new Date(agendaDate.getTime()), noOfDays);\n        var days = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n        var resColl = this.parent.resourceBase.resourceCollection;\n        var resData = this.parent.resourceBase.lastResourceLevel;\n        var initialDate = agendaDate;\n        for (var i = 0; i < days; i++) {\n            var lastLevelInfo = [];\n            var tempLastLevelInfo = [];\n            var tempIndex = 0;\n            var eventObj = void 0;\n            var dateObj = void 0;\n            var firstDate = util.addDays(initialDate, i);\n            var finalDate = (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda')\n                ? util.addDays(firstDate, 1) : agendaLastDate;\n            var agendaCollection = this.parent.eventBase.filterEvents(firstDate, finalDate);\n            if (agendaCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                for (var res = 0; res < resData.length; res++) {\n                    noOfDays = (!this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') ? noOfDays : 1;\n                    var data = [];\n                    agendaDate = firstDate;\n                    // eslint-disable-next-line max-len\n                    var resDataCollection = this.parent.eventBase.filterEvents(agendaDate, agendaLastDate, agendaCollection, resData[parseInt(res.toString(), 10)]);\n                    if (resDataCollection.length > 0 || !this.parent.hideEmptyAgendaDays || this.parent.currentView === 'MonthAgenda') {\n                        for (var r = 0; r < noOfDays; r++) {\n                            // eslint-disable-next-line max-len\n                            var resDayCollection = this.parent.eventBase.filterEvents(agendaDate, util.addDays(agendaDate, 1), resDataCollection, undefined);\n                            if (resDayCollection.length > 0 || !this.parent.hideEmptyAgendaDays ||\n                                this.parent.currentView === 'MonthAgenda') {\n                                data.push(resDayCollection[0]);\n                                eventObj = {\n                                    rowSpan: 1, type: 'eventColumn', resource: resColl[resColl.length - 1],\n                                    groupIndex: resData[parseInt(res.toString(), 10)].groupIndex,\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    eventData: resDayCollection, date: agendaDate\n                                };\n                                dateObj = {\n                                    rowSpan: 1, type: 'dateColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder,\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    date: agendaDate\n                                };\n                                if (!lastLevelInfo[parseInt(tempIndex.toString(), 10)]) {\n                                    lastLevelInfo[parseInt(tempIndex.toString(), 10)] = [];\n                                }\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(eventObj);\n                                lastLevelInfo[parseInt(tempIndex.toString(), 10)].push(dateObj);\n                                tempIndex++;\n                            }\n                            agendaDate = util.addDays(agendaDate, 1);\n                            if (agendaDate.getTime() >= agendaLastDate.getTime() || this.parent.activeViewOptions.group.byDate\n                                || this.parent.currentView === 'MonthAgenda') {\n                                lastLevelInfo[lastLevelInfo.length - 1][1].cssClass = cls.AGENDA_DAY_BORDER_CLASS;\n                                var tempObj = {\n                                    rowSpan: data.length, type: 'resourceColumn', resource: resColl[parseInt((resColl.length - 1).toString(), 10)],\n                                    groupOrder: resData[parseInt(res.toString(), 10)].groupOrder.slice(0, -1),\n                                    resourceData: resData[parseInt(res.toString(), 10)].resourceData,\n                                    groupIndex: (lastLevelInfo.length - data.length), className: [cls.RESOURCE_NAME],\n                                    date: agendaDate\n                                };\n                                lastLevelInfo[parseInt((lastLevelInfo.length - data.length).toString(), 10)].push(tempObj);\n                                tempLastLevelInfo.push(extend({}, tempObj, null, true));\n                                break;\n                            }\n                        }\n                    }\n                }\n                var topResources = resColl.slice(0, -1);\n                var tempGroupedData = [];\n                var totalRowSpan = 0;\n                for (var y = 0; y < topResources.length; y++) {\n                    var data = topResources[topResources.length - (y + 1)].dataSource;\n                    for (var x = 0; x < data.length; x++) {\n                        var z = 0;\n                        for (var u = 0; u < tempLastLevelInfo.length; u++) {\n                            // eslint-disable-next-line max-len\n                            if (tempLastLevelInfo[parseInt(u.toString(), 10)].groupOrder[topResources.length - (y + 1)] === data[parseInt(x.toString(), 10)][topResources[topResources.length - (y + 1)].idField]) {\n                                totalRowSpan = totalRowSpan + tempLastLevelInfo[parseInt(u.toString(), 10)].rowSpan;\n                                tempGroupedData.push(extend({}, tempLastLevelInfo[parseInt(u.toString(), 10)], null, true));\n                            }\n                            if (++z === tempLastLevelInfo.length && tempGroupedData.length > 0) {\n                                tempGroupedData[0].rowSpan = totalRowSpan;\n                                tempGroupedData[0].type = 'parentColumnLevel_' + (y + 1);\n                                tempGroupedData[0].resource = topResources[topResources.length - (y + 1)];\n                                tempGroupedData[0].resourceData = data[parseInt(x.toString(), 10)];\n                                tempGroupedData[0].date = agendaDate;\n                                lastLevelInfo[tempGroupedData[0].groupIndex].push(tempGroupedData[0]);\n                                tempGroupedData = [];\n                                totalRowSpan = 0;\n                            }\n                        }\n                    }\n                }\n                this.createResourceTableRow(lastLevelInfo, tBody);\n            }\n        }\n        var totalCollection = this.parent.eventBase.filterEvents(initialDate, agendaLastDate);\n        if (totalCollection.length === 0 && !this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            this.renderEmptyContent(tBody, initialDate);\n        }\n    };\n    AgendaBase.prototype.createResourceTableRow = function (tContent, tBody) {\n        var tr = createElement('tr');\n        var ntr;\n        var td = createElement('td', { attrs: { 'aria-selected': 'false' } });\n        var tempData;\n        var rowSpan = 0;\n        var level;\n        if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n            var tContentCollection = [];\n            var parentCollection = this.parent.resourceBase.resourceCollection.slice(0, -1);\n            for (var w = 0; w < tContent.length; w++) {\n                tContentCollection = tContentCollection.concat(tContent[parseInt(w.toString(), 10)]);\n            }\n            level = (parentCollection.length > 0) ? 'parentColumnLevel_' + parentCollection.length : 'resourceColumn';\n            var rowSpanCollection = tContentCollection.filter(function (data) { return data.type === level; });\n            for (var x = 0; x < rowSpanCollection.length; x++) {\n                rowSpan = rowSpan + rowSpanCollection[parseInt(x.toString(), 10)].rowSpan;\n            }\n        }\n        for (var row = 0; row < tContent.length; row++) {\n            ntr = tr.cloneNode();\n            for (var col = tContent[parseInt(row.toString(), 10)].length - 1; col >= 0; col--) {\n                var data = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                var ntd = td.cloneNode();\n                if (data.type === 'dateColumn') {\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        tempData = tContent[parseInt(row.toString(), 10)][parseInt(col.toString(), 10)];\n                        continue;\n                    }\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    ntd.appendChild(this.createDateHeaderElement(data.date));\n                    var className = [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS];\n                    if (data.cssClass) {\n                        className.push(data.cssClass);\n                    }\n                    addClass([ntd], className);\n                    if (this.isCurrentDate(new Date(data.date.getTime()))) {\n                        addClass(ntd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else if (data.type === 'eventColumn') {\n                    var elementType = (data.eventData.length === 0) ? 'noEvents' : 'data';\n                    ntd = this.createAgendaContentElement(elementType, data.eventData, ntd, data.groupOrder, data.groupIndex);\n                    ntd.setAttribute('data-date', data.date.getTime().toString());\n                    if (this.parent.activeViewOptions.group.byDate || this.parent.currentView === 'MonthAgenda') {\n                        addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DAY_PADDING_CLASS]);\n                    }\n                    ntr.appendChild(ntd);\n                }\n                else {\n                    ntd.setAttribute('rowspan', data.rowSpan.toString());\n                    addClass([ntd], cls.AGENDA_RESOURCE_CLASS);\n                    this.setResourceHeaderContent(ntd, data, data.className[0]);\n                    ntr.appendChild(ntd);\n                }\n            }\n            if (this.parent.activeViewOptions.group.byDate && row === 0 && this.parent.currentView !== 'MonthAgenda') {\n                var ntd = td.cloneNode();\n                ntd.setAttribute('data-date', tempData.date.getTime().toString());\n                ntd.setAttribute('rowspan', rowSpan.toString());\n                ntd.appendChild(this.createDateHeaderElement(tempData.date));\n                addClass([ntd], [cls.AGENDA_CELLS_CLASS, cls.AGENDA_DATE_CLASS, cls.DATE_BORDER_CLASS]);\n                var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), tempData.date.getTime());\n                ntr.setAttribute('data-row-index', daysCount.toString());\n                if (this.parent.element.querySelector(\".e-agenda-view tr[data-row-index=\\\"\" + daysCount + \"\\\"]\")) {\n                    break;\n                }\n                ntr.insertBefore(ntd, ntr.childNodes[0]);\n            }\n            tBody.appendChild(ntr);\n        }\n    };\n    AgendaBase.prototype.createDateHeaderElement = function (date) {\n        var dateHeader;\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n            dateHeader = createElement('div', { className: cls.AGENDA_HEADER_CLASS });\n            var args = { date: date, type: 'dateHeader' };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'dateHeaderTemplate';\n            var dateTemplate = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, 'dateHeaderTemplate', templateId, false));\n            append(dateTemplate, dateHeader);\n        }\n        else {\n            dateHeader = this.getMobileDateElement(date, cls.AGENDA_HEADER_CLASS);\n        }\n        return dateHeader;\n    };\n    AgendaBase.prototype.renderEmptyContent = function (tBody, agendaDate) {\n        var eTr = this.createTableRowElement(agendaDate, 'noEvents');\n        var eTd = eTr.children[0];\n        var noEvents = createElement('div', {\n            className: cls.AGENDA_EMPTY_EVENT_CLASS,\n            innerHTML: this.parent.localeObj.getConstant('noEvents')\n        });\n        eTd.appendChild(noEvents);\n        tBody.appendChild(eTr);\n    };\n    AgendaBase.prototype.createTableRowElement = function (date, type) {\n        var daysCount = util.getDaysCount(this.parent.selectedDate.getTime(), date.getTime());\n        var tr = createElement('tr', { attrs: { 'data-row-index': daysCount.toString() } });\n        var td = createElement('td', {\n            attrs: {\n                'class': (type === 'monthHeader') ? cls.MONTH_HEADER_CLASS : cls.AGENDA_CELLS_CLASS,\n                'aria-selected': 'false',\n                'data-column-index': daysCount.toString(),\n                'data-date': date.getTime().toString()\n            }\n        });\n        var dTd = td.cloneNode();\n        var aTd = td.cloneNode();\n        tr.appendChild(dTd);\n        if (type !== 'noEvents') {\n            tr.appendChild(aTd);\n        }\n        return tr;\n    };\n    AgendaBase.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n    };\n    return AgendaBase;\n}(ViewBase));\nexport { AgendaBase };\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { formatUnit, isNullOrUndefined, closest, extend, append, prepend, remove } from '@syncfusion/ej2-base';\nimport { createElement, addClass, EventHandler } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * agenda view\n */\nvar Agenda = /** @class */ (function (_super) {\n    __extends(Agenda, _super);\n    function Agenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-agenda-view';\n        _this.isInverseTableSelect = false;\n        _this.agendaDates = {};\n        _this.virtualScrollTop = 1;\n        return _this;\n    }\n    Agenda.prototype.getModuleName = function () {\n        return 'agenda';\n    };\n    Agenda.prototype.renderLayout = function () {\n        this.agendaDates = {};\n        this.element = createElement('div', { className: cls.TABLE_WRAP_CLASS });\n        addClass([this.element], this.viewClass);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        var eTr = createElement('tr');\n        this.element.querySelector('tbody').appendChild(eTr);\n        var workTd = createElement('td');\n        eTr.appendChild(workTd);\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        workTd.appendChild(wrap);\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.setAriaAttributes(tbl);\n        wrap.appendChild(tbl);\n        var tBody = tbl.querySelector('tbody');\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        this.renderEmptyContent(tBody, agendaDate);\n        this.wireEvents();\n        if (this.parent.resourceBase) {\n            this.parent.resourceBase.generateResourceLevels([{ renderDates: this.parent.activeView.renderDates }]);\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n    };\n    Agenda.prototype.eventLoad = function (args) {\n        this.dataSource = extend([], this.parent.eventsData, null, true);\n        for (var _i = 0, _a = this.parent.eventsData; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            delete event_1.generatedDates;\n        }\n        var eventCollection = this.parent.activeViewOptions.allowVirtualScrolling ?\n            args.processedData : this.parent.eventsProcessed;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            this.dataSource = this.parent.eventBase.filterEventsByResource(resource, this.dataSource);\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.processAgendaEvents(eventCollection);\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        util.removeChildren(tBody);\n        this.renderInitialContent(tBody, agendaDate);\n        this.wireEventActions();\n        var contentArea = closest(tBody, '.' + cls.CONTENT_WRAP_CLASS);\n        contentArea.scrollTop = 1;\n        this.parent.notify(event.eventsLoaded, {});\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.retainScrollPosition();\n        }\n    };\n    Agenda.prototype.refreshEvent = function (refreshDate) {\n        var processedData = [];\n        var fields = this.parent.eventFields;\n        for (var _i = 0, _a = this.dataSource; _i < _a.length; _i++) {\n            var data = _a[_i];\n            if (isNullOrUndefined(data[fields.recurrenceID]) && !isNullOrUndefined(data[fields.recurrenceRule]) &&\n                !isNullOrUndefined(data.generatedDates) && refreshDate >= data.generatedDates.end) {\n                processedData = processedData.concat(this.parent.eventBase.generateOccurrence(data, refreshDate));\n            }\n        }\n        this.parent.eventsProcessed = this.parent.eventsProcessed.concat(this.processAgendaEvents(processedData));\n    };\n    Agenda.prototype.refreshHeader = function () {\n        var tBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        if (this.parent.activeViewOptions.group.byDate) {\n            util.removeChildren(tBody);\n        }\n        else {\n            remove(tBody.firstElementChild);\n        }\n        var agendaDate = util.resetTime(this.parent.selectedDate);\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n    };\n    Agenda.prototype.renderInitialContent = function (tBody, agendaDate) {\n        var emptyTBody = createElement('tbody');\n        var firstDate = new Date(agendaDate.getTime());\n        var lastDate = (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) ?\n            this.getEndDateFromStartDate(firstDate) : util.addDays(firstDate, this.parent.agendaDaysCount);\n        this.renderContent(emptyTBody, firstDate, lastDate);\n        append([].slice.call(emptyTBody.childNodes), tBody);\n        // Initial rendering, to load previous date events upto scroll bar enable\n        if (this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays && this.parent.eventsData.length > 0) {\n            var contentArea = this.getContentAreaElement();\n            var contentChild = contentArea.querySelector('.e-content-table');\n            while (contentArea.offsetWidth <= contentArea.clientWidth) {\n                if (this.parent.isAdaptive && contentChild.offsetHeight >= contentArea.clientHeight) {\n                    break;\n                }\n                var emptyTBody_1 = createElement('tbody');\n                lastDate = firstDate;\n                firstDate = util.addDays(lastDate, -this.parent.agendaDaysCount);\n                this.renderContent(emptyTBody_1, firstDate, lastDate);\n                prepend([].slice.call(emptyTBody_1.childNodes), tBody);\n                if (firstDate <= this.parent.minDate) {\n                    break;\n                }\n            }\n        }\n        if (tBody.childNodes.length <= 0) {\n            this.renderEmptyContent(tBody, agendaDate);\n        }\n    };\n    Agenda.prototype.renderContent = function (tBody, agendaDate, lastDate) {\n        var fieldMapping = this.parent.eventFields;\n        var firstDate = new Date(agendaDate.getTime());\n        var isObject = this.appointmentFiltering(firstDate, lastDate);\n        if (isObject.length > 0 && this.parent.activeViewOptions.allowVirtualScrolling && this.parent.hideEmptyAgendaDays) {\n            agendaDate = isObject[0][fieldMapping.startTime];\n            agendaDate = new Date(new Date(agendaDate.getTime()).setHours(0, 0, 0, 0));\n            this.updateHeaderText(isObject[0][fieldMapping.startTime]);\n        }\n        var endDate;\n        if (!this.parent.hideEmptyAgendaDays || (this.parent.agendaDaysCount > 0 && isObject.length > 0)) {\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n                var date = agendaDate;\n                if (!this.parent.activeViewOptions.group.byDate) {\n                    this.parent.activeViewOptions.allowVirtualScrolling = false;\n                    date = firstDate;\n                    if (this.parent.headerModule) {\n                        this.parent.headerModule.updateDateRange();\n                        this.parent.headerModule.updateHeaderItems('remove');\n                    }\n                }\n                this.calculateResourceTableElement(tBody, this.parent.agendaDaysCount, date);\n            }\n            else {\n                for (var day = 0; day < this.parent.agendaDaysCount; day++) {\n                    var filterData = this.appointmentFiltering(agendaDate);\n                    var nTr = this.createTableRowElement(agendaDate, 'data');\n                    if (this.element.querySelector('tr[data-row-index=\"' + parseInt(nTr.getAttribute('data-row-index'), 10) + '\"]')) {\n                        agendaDate = util.addDays(agendaDate, 1);\n                        continue;\n                    }\n                    var dTd = nTr.children[0];\n                    var aTd = nTr.children[1];\n                    if (filterData.length > 0 || (!this.parent.hideEmptyAgendaDays && filterData.length === 0)) {\n                        var elementType = (!this.parent.hideEmptyAgendaDays && filterData.length === 0) ? 'noEvents' : 'data';\n                        dTd.appendChild(this.createDateHeaderElement(agendaDate));\n                        nTr.appendChild(dTd);\n                        var cTd = this.createAgendaContentElement(elementType, filterData, aTd);\n                        nTr.appendChild(cTd);\n                        if (cTd.querySelectorAll('li').length > 0) {\n                            tBody.appendChild(nTr);\n                        }\n                    }\n                    else if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                        day--;\n                    }\n                    if (this.isCurrentDate(new Date(agendaDate.getTime()))) {\n                        addClass(dTd.childNodes, cls.AGENDA_CURRENT_DAY_CLASS);\n                    }\n                    agendaDate = util.addDays(agendaDate, 1);\n                    if (agendaDate.getTime() > lastDate.getTime()) {\n                        break;\n                    }\n                }\n            }\n            endDate = new Date(agendaDate.getTime() - util.MS_PER_DAY);\n        }\n        this.agendaDates = { start: firstDate, end: endDate };\n    };\n    Agenda.prototype.agendaScrolling = function (event) {\n        if (this.parent.quickPopup) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.virtualScrolling(event);\n        }\n        if (!this.parent.activeViewOptions.allowVirtualScrolling) {\n            this.setPersistence();\n        }\n    };\n    Agenda.prototype.virtualScrolling = function (event) {\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var direction = (this.virtualScrollTop < scrollTop) ? 'next' : 'previous';\n        var tBody = target.querySelector('tbody');\n        var emptyTBody = createElement('tbody');\n        var topElement = this.getElementFromScrollerPosition(event);\n        var scrollDate = this.parent.getDateFromElement(topElement);\n        var filterDate;\n        var filterData;\n        if (scrollTop === 0) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, -1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                prepend([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                for (var s = 0, element = tBody.children; s < element.length; s++) {\n                    if (element[parseInt(s.toString(), 10)].getAttribute('data-row-index') === topElement.getAttribute('data-column-index')) {\n                        var scrollToValue = element[parseInt(s.toString(), 10)].offsetTop -\n                            this.element.querySelector('.e-agenda-item').offsetHeight;\n                        target.scrollTop = scrollToValue;\n                        break;\n                    }\n                }\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else if (totalHeight >= (scrollHeight - 5)) {\n            filterDate = this.getPreviousNextDate(util.addDays(scrollDate, 1), direction);\n            filterData = this.appointmentFiltering(filterDate.start, filterDate.end);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                this.renderContent(emptyTBody, filterDate.start, filterDate.end);\n                append([].slice.call(emptyTBody.childNodes), tBody);\n                this.wireEventActions();\n                this.updateHeaderText(scrollDate);\n            }\n        }\n        else {\n            this.updateHeaderText(scrollDate);\n        }\n        this.virtualScrollTop = scrollTop;\n        var selectedElements = this.parent.eventBase.getSelectedAppointments();\n        if (selectedElements.length > 0) {\n            selectedElements[selectedElements.length - 1].focus();\n        }\n    };\n    Agenda.prototype.getElementFromScrollerPosition = function (event) {\n        var filterElement;\n        var target = event.target;\n        var scrollTop = target.scrollTop;\n        var scrollHeight = target.scrollHeight;\n        var offsetHeight = target.clientHeight;\n        var totalHeight = scrollTop + offsetHeight;\n        var liCollection = [].slice.call(target.querySelectorAll('.e-agenda-item'));\n        var li;\n        var liDetails;\n        if (liCollection.length > 0) {\n            if (scrollTop === 0) {\n                li = liCollection[0];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else if (totalHeight === scrollHeight) {\n                li = liCollection[liCollection.length - 1];\n                filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n            }\n            else {\n                for (var a = 0, length_1 = liCollection.length; a < length_1; a++) {\n                    li = liCollection[parseInt(a.toString(), 10)];\n                    liDetails = li.getBoundingClientRect();\n                    if (liDetails.top >= 0) {\n                        filterElement = closest(li, '.' + cls.AGENDA_CELLS_CLASS);\n                        break;\n                    }\n                }\n            }\n        }\n        return filterElement;\n    };\n    Agenda.prototype.updateHeaderText = function (date) {\n        if (this.parent.showHeaderBar) {\n            this.parent.headerModule.updateDateRange(date);\n        }\n    };\n    Agenda.prototype.getPreviousNextDate = function (date, type) {\n        var currentDate = new Date(date.getTime());\n        var firstDate = this.getStartDateFromEndDate(date);\n        var lastDate = this.getEndDateFromStartDate(date);\n        var daysCount = 0;\n        do {\n            var filterData = this.appointmentFiltering(currentDate);\n            if (filterData.length > 0 || !this.parent.hideEmptyAgendaDays) {\n                daysCount++;\n            }\n            currentDate = util.addDays(currentDate, (type === 'next') ? 1 : -1);\n            if (currentDate < firstDate || currentDate > lastDate) {\n                break;\n            }\n        } while (daysCount !== this.parent.agendaDaysCount);\n        var endDate = util.addDays(currentDate, (type === 'next') ? -1 : 1);\n        return (type === 'next') ? { start: date, end: util.addDays(endDate, 1) } : { start: endDate, end: util.addDays(date, 1) };\n    };\n    Agenda.prototype.appointmentFiltering = function (startDate, endDate) {\n        var dateStart;\n        var dateEnd;\n        if (!isNullOrUndefined(startDate) && isNullOrUndefined(endDate)) {\n            dateStart = util.resetTime(new Date(startDate.getTime()));\n            dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        }\n        else {\n            dateStart = new Date(startDate.getTime());\n            dateEnd = new Date(endDate.getTime());\n        }\n        var filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        if (filterData.length === 0) {\n            this.refreshEvent(startDate);\n            filterData = this.parent.eventBase.filterEvents(dateStart, dateEnd);\n        }\n        return filterData;\n    };\n    Agenda.prototype.getStartDateFromEndDate = function (endDate) {\n        var filterDate;\n        var fields = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var firstDate = Math.min.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fields.startTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(firstDate) : this.parent.minDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(endDate, -1) : this.parent.minDate;\n        }\n        return util.resetTime(filterDate);\n    };\n    Agenda.prototype.getEndDateFromStartDate = function (startDate) {\n        var filterDate;\n        var fieldMapping = this.parent.eventFields;\n        if (this.parent.eventsProcessed.length > 0) {\n            var lastDate = Math.max.apply(Math, this.parent.eventsProcessed.map(function (a) {\n                return a[fieldMapping.endTime].getTime();\n            }));\n            filterDate = this.parent.hideEmptyAgendaDays ? new Date(lastDate) : this.parent.maxDate;\n        }\n        else {\n            filterDate = this.parent.hideEmptyAgendaDays ? util.addMonths(startDate, 1) : this.parent.maxDate;\n        }\n        return util.resetTime(util.addDays(filterDate, 1));\n    };\n    Agenda.prototype.getNextPreviousDate = function (type) {\n        var noOfDays = (type === 'next') ? 1 : -1;\n        return util.addDays(this.parent.selectedDate, noOfDays);\n    };\n    Agenda.prototype.startDate = function () {\n        return util.resetTime(this.parent.selectedDate);\n    };\n    Agenda.prototype.endDate = function () {\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            return this.getEndDateFromStartDate(this.startDate());\n        }\n        else {\n            return util.addDays(this.startDate(), this.parent.agendaDaysCount);\n        }\n    };\n    Agenda.prototype.getDateRangeText = function (date) {\n        var formatDate = (this.parent.activeViewOptions.dateFormat) ? this.parent.activeViewOptions.dateFormat : 'MMMM y';\n        if (this.parent.activeViewOptions.allowVirtualScrolling || this.parent.isAdaptive) {\n            var currentDate = isNullOrUndefined(date) ? this.parent.selectedDate : date;\n            return util.capitalizeFirstWord(this.parent.globalize.formatDate(currentDate, { format: formatDate, calendar: this.parent.getCalendarMode() }), 'multiple');\n        }\n        else {\n            var startDate = this.parent.selectedDate;\n            var endDate = util.addDays(startDate, this.parent.agendaDaysCount - 1);\n            return this.formatDateRange(startDate, endDate);\n        }\n    };\n    Agenda.prototype.dayNavigationClick = function (e) {\n        var element = closest(e.currentTarget, '.' + cls.AGENDA_CELLS_CLASS);\n        var date = this.parent.getDateFromElement(element);\n        if (!isNullOrUndefined(date) && !this.parent.isAdaptive && this.parent.isMinMaxDate(date)) {\n            this.parent.setProperties({ selectedDate: date }, true);\n            this.parent.changeView('Day', e);\n        }\n    };\n    Agenda.prototype.wireEvents = function () {\n        EventHandler.add(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling, this);\n    };\n    Agenda.prototype.unWireEvents = function () {\n        EventHandler.remove(this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS), event.scroll, this.agendaScrolling);\n        var dateHeaderElement = [].slice.call(this.element.querySelectorAll('.e-m-date'));\n        for (var _i = 0, dateHeaderElement_1 = dateHeaderElement; _i < dateHeaderElement_1.length; _i++) {\n            var element = dateHeaderElement_1[_i];\n            EventHandler.remove(element, 'click', this.dayNavigationClick);\n        }\n    };\n    Agenda.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.onAgendaScrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.eventLoad, this);\n    };\n    Agenda.prototype.removeEventListener = function () {\n        if (this.parent) {\n            this.parent.off(event.scrollUiUpdate, this.onAgendaScrollUiUpdate);\n            this.parent.off(event.dataReady, this.eventLoad);\n        }\n    };\n    Agenda.prototype.onAgendaScrollUiUpdate = function () {\n        var headerHeight = this.getHeaderBarHeight();\n        if (this.parent.headerModule) {\n            if (this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('add');\n            }\n            else {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n        }\n        var contentArea = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        if (this.parent.height !== 'auto') {\n            contentArea.style.height = formatUnit(this.parent.element.offsetHeight - headerHeight);\n        }\n    };\n    Agenda.prototype.scrollToDate = function (scrollDate) {\n        var date = new Date(+util.resetTime(scrollDate));\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            if (!this.parent.hideEmptyAgendaDays || this.parent.getEvents(date, util.addDays(date, 1), true).length > 0) {\n                this.parent.changeDate(date);\n            }\n        }\n        else {\n            var dateElement = this.element.querySelector('.' + cls.AGENDA_CELLS_CLASS + '[data-date=\"' + date.getTime() + '\"]');\n            if (dateElement) {\n                this.getContentAreaElement().scrollTop = dateElement.offsetTop;\n            }\n        }\n    };\n    Agenda.prototype.destroy = function () {\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\n            return;\n        }\n        if (this.element) {\n            this.unWireEvents();\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (this.parent.headerModule && this.parent.activeViewOptions.allowVirtualScrolling) {\n                this.parent.headerModule.updateHeaderItems('remove');\n            }\n            _super.prototype.destroy.call(this);\n        }\n    };\n    return Agenda;\n}(AgendaBase));\nexport { Agenda };\n"],"sourceRoot":""}