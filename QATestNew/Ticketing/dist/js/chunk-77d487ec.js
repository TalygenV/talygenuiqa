(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77d487ec","chunk-6b4a4de2","chunk-2d0d0f48"],{"036f":function(e,t,a){"use strict";a("6f27")},"03bb":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Notes")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Notes")]),t("small",{staticClass:"float-right"},[0==e.isDisabledButton?t("a",{attrs:{href:"javascript:;",id:"showattachment",title:"Show/Hide Add"},on:{click:e.ShowNotePopUp}},[t("i",{staticClass:"fa fa-file-text-o pr-2"}),e._v(e._s(e.$t("Show/Hide"))+" "+e._s(e.$t("Add")))]):e._e()])])]),e.ShowNotePopUpData?t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.UploadFileWithNote},scopedSlots:e._u([{key:"tgslot-Description",fn:function({data:a}){return[t("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady},model:{value:a.fieldInfo.value,callback:function(t){e.$set(a.fieldInfo,"value",t)},expression:"data.fieldInfo.value"}}),t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(a.error))])]}}],null,!1,2349768450)}):e._e(),null!=e.NoteList?t("div",{staticClass:"w-100",attrs:{id:"tab-notes-content-quickview"}},[t("TicketNotes",{attrs:{NoteData:e.NoteList,ListNoteData:e.ListNoteData}})],1):e._e(),e.noRecord?t("div",{staticClass:"text-danger text-center no-record float-left w-100"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),l=a("0c69"),n=a("6930"),r=a.n(n),c=a("fb3d"),d=a.n(c),u=(a("d91b"),{components:{TicketNotes:l["a"],ckeditor:r.a.component},created:async function(){var e=this;e.ListNoteData=this.ListNoteData,this.configData(),e.LoadNotesForQuickView("FSM")},props:{isDisabledButton:{type:Boolean,required:!0},configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},ListNoteData:{type:Number,required:!1}},data(){return{showError:!1,editor:d.a,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],NoteList:[],Description:null,ShowNotePopUpData:!1,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("NoteDescription"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"Type",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"ListNoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{ShowNotePopUp:function(){0==this.ShowNotePopUpData?(this.ShowNotePopUpData=!0,this.noRecord=!1):this.ShowNotePopUpData=!1},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},setFile:function(e){var t=this;t.file=e.target.files[0],t.FileName=e.target.files[0].name},onChangeRadio:function(e,t){var a=this;a.ticketType=e.target.dataset.value},LoadNotesForQuickView:async function(e){var t=this;null!=e&&"undefined"!=e||(e=t.moduleName);var a=`ticketId=${t.id}&isSuptTckt=false&moduleName=${e}&isView=1`;await o["a"].GetWorkOrderNoteList(a).then((function(e){null!=e.data&&e.data.length>0?(t.NoteList=e.data,$("#tab-notes-content-quickview").removeClass("d-none")):($("#div_NotesLabel").removeClass("d-none"),t.NoteList=null,t.noRecord=!0)}))},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),o=a.name;t.fileName=o;var l=o.lastIndexOf("."),n=o.substring(l+1,o.length);t.fileExt+="."+n;var r='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;t.fileSize=c;var d={attachement_mime:r,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};t.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(e,t){var a=this;if(""==a._data.FormSchema[0].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var l=JSON.stringify(a.ticketModel);o["a"].AddNote(l).then(e=>{try{null!=e.data&&""!=e.data&&"Success"==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.Close(),a.callbackfunction()):(a.FileSrc="",$("input[type=text]").val(""))}catch(t){return HandleErrorOccured(t,"saveNote")}})}}},Close:function(){this._data.FormSchema[0].Data[0].value=null,this.FileName=null,this.file=null,this.FormSchema[2].Data[0].config.onChange=this.GetBase64String,this.$parent.isShowAddNote=!1,this.$parent.noRecord=!1}}}),p=u,m=a("2877"),f=Object(m["a"])(p,i,s,!1,null,null,null);t["a"]=f.exports},"0c69":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),e.NoteList.length>0?[t("div",{staticClass:"row card-view no-bg custom-box-width"},e._l(e.NoteList,(function(a,i){return t("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[t("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[t("div",{staticClass:"card-heading"},[t("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?t("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:e.$t("Image")}}):t("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:e.$t("Image"),border:"0"}})]),e._v(" "+e._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),t("div",{staticClass:"card-detail-main1 dynamiclistol"},[t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.CREATED_BY_NAME))])]),t("hr",{staticClass:"my-2"}),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"260px"}},[t("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:e._s(a.NOTE)}})])]),t("div",{staticClass:"bottom-action"},[t("div",{staticClass:"card-date"},[t("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),t("span",[e._v(" "+e._s(a.CREATED_AT?e.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),t("div",{staticClass:"card-action"},[t("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:e.$t("ClickHereDownloadAttachment"),alt:e.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(t){return e.DownloadAttachment(a)}}},[t("em",{staticClass:"fa fa-download"})]),1!=e.ListNoteData?t("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:e.$t("EditNotes"),alt:e.$t("EditNotes"),href:"javascript:;"},on:{click:function(t){return e.EditNote(a)}}},[t("em",{staticClass:"fa fa-edit"})]):e._e()])])])])})),0)]:e._e(),e.NoRecords?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[t("span",{staticClass:"text-danger text-center d-block no-record"},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)},s=[],o=a("9769"),l={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(e){var t=this;t.NoteList=e,t.NoteList.length>0?t.NoRecords=!1:(t.NoteList=[],t.NoRecords=!0)}},created(){setTimeout(()=>{var e=this;e.UserId=e.GetUserInfo.ID,e.ListNoteData=this.ListNoteData,null!=e.NoteData?(e.NoteList=e.NoteData,e.NoRecords=!1):(e.NoRecords=!0,e.NoteList=[])},2e3)},methods:{EditNote:function(e){var t=this;t.$parent.noteId=e.NOTE_ID,t.$parent.ticketId=e.TICKET_ID,t.$parent.note=e.NOTE,t.$parent.isShowAddNote=!0},DownloadAttachment(e){var t=this;t.isLoading=!0;var a=`filePath=${e.ATTACHMENT_PATH}&fileName=${e.ATTACHMENT_NAME}`;o["a"].DownloadFile(a).then((function(a){t.isLoading=!1;const i=a.data,s=`data:${JSON.parse(e.ATTACHMENT_DESC).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",e.ATTACHMENT_NAME),document.body.appendChild(o),o.click()})),t.isLoading=!1}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"1d10":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".my-popups .modal-dialog[data-v-e5b6f540]{max-width:85%!important}",""]),e.exports=t},2060:function(e,t,a){var i=a("6c98");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("18ee8031",i,!0,{sourceMap:!1,shadowMode:!1})},"33e4":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"container-fluid mt-2"},[t("div",[t("div",{staticClass:"row mt-0.5",attrs:{id:"checkForZone"}},["Google"==e.mapType&&1==e.config.isShowSearchBox?t("div",{staticClass:"col-lg-5 col-sm-12"},[t("div",{staticClass:"form-group d-flex"},[t("div",{staticClass:"input-group customsearchbox divcityshown"},[1==e.config.isShowSearchBox?t("input",{staticClass:"form-control",attrs:{type:"text",id:"pac-input",maxlength:"50",placeholder:"Enter Your Location or Zip Code"}}):e._e()])])]):e._e(),t("div",{staticClass:"col-lg-3 col-sm-12"},[void 0!=e.config&&1==e.config.isShowCurrentLocation?t("div",{staticClass:"form-group"},[t("a",{staticClass:"btn btn-secondary",attrs:{href:"javascript:;"},on:{click:e.CurrentLocation}},[e._v("Use my location")])]):e._e()])]),t("div",{staticClass:"search"},[t("div",{staticClass:"map-result"},[t("div",{staticClass:"map-actions"},[void 0!=e.config&&1==e.config.isShowGetDirection?t("span",{staticClass:"save legends_low"},[1==e.config.isShowGetDirection?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"GetDirection"},on:{click:e.GetDirection}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v("  "),void 0!=e.config&&1==e.config.isShowLocator?t("span",{staticClass:"save legends_low"},[1==e.config.isShowLocator?t("a",{class:{"mp-active":0==e.showSetting,"mg-success":1==e.showSetting},attrs:{href:"javascript:;",title:"View Locator on map"},on:{click:e.ViewLocatorOnMap}},[t("em",{staticClass:"fa fa-map-marker"})]):e._e()]):e._e(),e._v("  "),void 0!=e.config&&1==e.config.isShowEtaMap?t("span",{staticClass:"edit legends_profile"},[1==e.config.isShowEtaMap?t("a",{attrs:{href:"javascript:;",title:"ETA Map"},on:{click:function(t){return e.LoadLocatorDataonMap("locator")}}},[t("em",{staticClass:"fa fa-map"})]):e._e()]):e._e(),void 0!=e.config&&1==e.config.isShowEtaPipeLines?t("span",{staticClass:"edit legends_high esri_prof"},[e._m(0),t("div",{staticClass:"dropdown"},[e._m(1),t("div",{staticClass:"dropdown-menu esri_prof_data",staticStyle:{display:"block"}},[e._m(2),t("div",{staticClass:"w-100 mb-2"},e._l(e.UtilityMapData,(function(a,i){return t("a",{key:i,staticClass:"dropdown-item p-0",attrs:{href:"javascript:;"}},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxUtilityMap",attrs:{type:"checkbox"}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{type:"checkbox"}},[t("label",{staticClass:"font-weight-bold"},[e._v(e._s(a.LAYER_NAME))])])])])})),0),t("div",[t("a",{staticClass:"btn btn-primary d-block text-white py-2",attrs:{href:"javascript:;",title:"Go"},on:{click:e.ShowUtilityMap}},[e._v("Go"),t("i",{staticClass:"fa fa-angle-double-right pl-2"})])])])])]):e._e()]),e.showSaveZone?t("div",{staticClass:"gmnoprint",staticStyle:{position:"absolute",right:"0px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.OpenSaveZone}},[e._m(3)]):e._e(),e.showDeleteFeature?t("div",{staticStyle:{position:"absolute",right:"1670px","z-index":"999999",top:"0px"},attrs:{id:"customSaveButton"},on:{click:e.DeleteFeature}},[e._m(4)]):e._e(),t("div",{staticClass:"map"},[t("div",{staticClass:"map_canvas map_ipadcontrol",style:{"min-height":void 0==e.mapHeight?"500px":e.mapHeight,"min-width":void 0==e.mapWidth?"100%":e.mapWidth},attrs:{id:e.mapContainer}}),t("div",{staticClass:"w-100 float-left",staticStyle:{position:"absolute",top:"0px"}},[0==e.showSetting?t("a",{staticClass:"showduration anchideduration",attrs:{title:"Hide"},on:{click:e.ShowTravelMode}},[e._v("Hide")]):e._e(),1==e.showSetting?t("a",{staticClass:"showduration ancshowduration",attrs:{title:"Show Setting"},on:{click:e.ShowTravelMode}},[e._v("Show Setting")]):e._e(),t("div",{staticClass:"position-absolute float-left my24 mx24 bg-gray-faint round settingPopup d-none",staticStyle:{"z-index":"999999"}},[t("div",{attrs:{id:"params"}},[e._m(5),e._v(" "),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Travel Mode:")]),e._m(6),t("h4",{staticClass:"txt-m font-weight-bold"},[e._v("Choose Maximum Duration:")]),t("div",{staticClass:"w-100 float-left",staticStyle:{"margin-bottom":"15px"}},[t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:e.time},on:{onChange:function(t){return e.TravelMode(e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes10")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:2*e.time},on:{onChange:function(t){return e.TravelMode(2*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes20")])]),t("div",{staticClass:"w-30 float-left"},[t("label",{staticClass:"switch"},[t("input",{staticClass:"dynamic",attrs:{type:"checkbox",name:"duration",checked:"checked"},domProps:{value:3*e.time},on:{onChange:function(t){return e.TravelMode(3*e.time)}}}),t("span",{staticClass:"sliderchk round"})]),t("div",{staticClass:"fs_textname"},[e._v("Minutes30")])])])])])])])])])])]),t("div",{staticClass:"float-right mt-2"},[void 0!=e.config&&1==e.config.isShowSaveExtentButton?t("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{title:"",name:"btnSaveCity",tabindex:"6","data-toggle-tooltip":"tooltip","data-original-title":"Save"},on:{click:e.SaveMapExtent}},[t("i",{staticClass:"fa fa-floppy-o pr-1"}),e._v("Save")]):e._e()]),e.showAddZone?t("AddZone",{attrs:{polygonData:e.polygonData,polygonNewShapeId:e.polygonNewShapeId},on:{DeleteFeature:e.DeleteFeature,GetZoneManagementData:e.GetZoneManagementData,Close:e.Close}}):e._e(),e.showSaveZonePopUp?t("SaveZone",{on:{SaveZoneData:e.SaveZoneData,OpenSaveZone:e.OpenSaveZone,Close:e.Close}}):e._e()],1)},s=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"javascript:;",title:"UtilityMap"}},[t("i",{staticClass:"fa fa-map-pin",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 bg-grey"},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline w-100"},[t("input",{staticClass:"custom-control-input dynamic customcheckboxselectall",attrs:{id:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}}),t("label",{staticClass:"custom-control-label pt-1",attrs:{for:"customcheckboxselectallUtilityMap",type:"checkbox",value:""}},[e._v("SelectAll")])])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"background-color":"rgb(40, 167, 69)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save Zone")])])},function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"background-color":"rgb(240, 4, 4)",color:"rgb(255, 255, 255)","border-style":"solid","border-width":"1px","border-color":"rgb(204, 204, 204)","margin-top":"4px","margin-left":"-6px",cursor:"pointer","text-align":"center"},attrs:{title:"Delete Save Zone"}},[t("div",{staticStyle:{"font-family":"Arial, sans-serif","font-size":"14px",padding:"0.6rem 0.8rem"}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v("Delete Selected Shape")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row float-left"},[t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min10"}),e._v(" Minutes10 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min20"}),e._v(" Minutes20 ")]),t("div",{staticClass:"col float-left text-dark px-2"},[t("span",{staticClass:"timelegend min30"}),e._v(" Minutes30 ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"mr12 toggle-group text-center"},[t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"foot-walking"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Walking")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"cycling-regular"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Cycling")])]),t("label",{staticClass:"toggle-container"},[t("input",{staticClass:"dynamic",attrs:{name:"profile",type:"radio",value:"driving-car",checked:"checked"}}),t("div",{staticClass:"toggle toggle--active-null toggle--null"},[e._v("Driving")])])])}],o=(a("14d9"),a("13d5"),a("e192")),l=a.n(o),n=(a("ac6d"),a("e11e")),r=a.n(n),c=(a("6cc5"),a("cae8")),d=a.n(c),u=(a("bdd0"),a("885b")),p=a.n(u),m=(a("c307"),a("2573"),a("20d6"),a("5fbf"),a("ac00")),f=(a("1615"),a("9769")),h=a("3975"),g=a("e222"),v=(a("5bfd"),a("125d"),a("afaa")),_={components:{AddZone:h["a"],SaveZone:g["a"]},props:{mapType:{required:!0},Data:{required:!0},isShowDrawButton:{required:!0,type:String},config:{required:!1},mapWidth:{required:!1},mapHeight:{required:!1},latLng:{required:!1},mapContainer:{required:!0},selectedUser:{required:!0},UtilityMapData:{required:!0},editZone:{required:!0},zoneId:{required:!0}},data:function(){return{isLoading:!1,showDeleteFeature:!1,showSaveZonePopUp:!1,showSaveZone:!1,showAddZone:!1,time:600,colors:"",showSetting:null,address:[],UserName:null,UserEmailId:null,imageMarker:[],mapLayer:[],map:null,locations:[],locationPriority:[],locationname:[],ticketNumberList:[],LocationwithPriority:null,markers:[],mapZoom:!1,mapMarker:[],markerCluster:null,startingPoint:null,showSettingPopup:!1,lngLatData:[],fullAddress:[],leafLetReferenceNumber:[],polygonData:[],polygonNewShapeId:null,zoneData:[],drawingManager:null,currentSelectedShape:null,myPolygon:null,editableLayers:null,showHideEtaMap:!1}},watch:{Data:{handler:function(){setTimeout(()=>{this.ShowLocationOnGoogleMap()},500)},deep:!0},config:{handler:function(){this.ShowDrawingManager()},deep:!0},selectedUser:{handler:function(){this.ViewLocatorOnMap(this.selectedUser)},deep:!0},latLng:{handler:function(){this.ViewOnMap()}}},mounted:function(){"Google"==this.mapType?setTimeout(()=>{},2e3):"MapBox"==this.mapType?setTimeout(()=>{this.initMapBox(this.Data,"pk.eyJ1IjoiaGFycmlzbHVtZW4iLCJhIjoiY2s2dWtrMzJ3MDk2NTNncXMxMjlxa29mcCJ9.riRtpclzr9XfExHhclre8A")},2e3):"Esri"==this.mapType?setTimeout(()=>{this.initLeafletMap(this.Data)},2e3):"LeafLet"!=this.mapType&&"Esri"!=this.mapType||setTimeout(()=>{this.initLeafletMap(this.Data)},2e3)},created:function(){this.UserName=this.GetUserInfo.Name,this.UserEmailId=this.GetUserInfo.Email,void 0!=this.myPolygon&&null!=this.myPolygon&&this.myPolygon.setMap(null);let e=document.createElement("script");e.setAttribute("src","https://maps.googleapis.com/maps/api/js?key=AIzaSyAJdx4gmhGKWjPTBBVk5riFgpbE0lGS-xM&callback=initAutocompletes&libraries=geometry,drawing,places&v=weekly"),document.head.appendChild(e);let t=document.createElement("script");t.setAttribute("src","https://unpkg.com/@google/markerclustererplus@4.0.1/dist/markerclustererplus.min.js"),document.head.appendChild(t);let a=document.createElement("script");a.setAttribute("src","~/Scripts/FsmMaps/fontawesome-markers.min.js"),document.head.appendChild(a),setTimeout(()=>{this.ShowLocationOnGoogleMap()},2e3),"Google"==this.mapType&&setTimeout(()=>{this.initAutocompletes()},2e3)},methods:{initAutocompletes:function(){var e=this;const t=document.getElementById("pac-input"),a=new google.maps.places.SearchBox(t);e.map.addListener("bounds_changed",()=>{a.setBounds(e.map.getBounds())}),a.addListener("places_changed",()=>{var t,i,s=a.getPlaces(),o=new google.maps.LatLngBounds;for(t=0;i=s[t];t++)o.extend(i.geometry.location);e.map.fitBounds(o),e.map.setZoom(4)})},CurrentLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.GetCurrentLocation,e.geoError):alert("Geolocation is not supported by this browser.")},GetCurrentLocation:function(e){var t=this;if(e){var a=e.coords.latitude,i=e.coords.longitude,s=new google.maps.LatLng(a,i);t.map.setCenter(s),t.map.setZoom(18)}},SaveMapExtent:function(){var e=this;e.$emit("SaveMapExtent",e.fullAddress,e.mapType)},ShowUtilityMap:function(){var e=this,t=JSON.parse(localStorage.getItem("coordinates"));null==t&&(t={x:"43.133971",x1:"43.132812",y:"-76.088009",y1:"-76.087183"}),Object(v["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/Graphic","esri/layers/GraphicsLayer"]).then(([a,i,s,o,l])=>{var n=new a({basemap:"hybrid"});new i({container:"utilitymap",map:e.map,extent:{xmin:-13856051.7748509,ymin:2821931.08215458,xmax:-7488766.97004404,ymax:6364777.09974285,spatialReference:102100}});""!=layerUrl&&null!=layerUrl&&(Colors={},Colors.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00"},Colors.random=function(){var e,t=0;for(var a in this.names)Math.random()<1/++t&&(e=a);return{name:e,rgb:this.names[e]}},String(layerUrl).split(",").forEach((function(e){var t=String(e).split("^")[1];""!=t&&null!=t&&"null"!=t&&"undefined"!=typeof t||(t=String(Colors.random().rgb).toUpperCase());const a={type:"simple",symbol:{color:t,type:"simple-line",style:"solid"},visualVariables:[{type:"size",field:"ELEV_GAIN",minDataValue:0,maxDataValue:2300,minSize:"3px",maxSize:"7px"}]};var i=String(e).split("^")[0];n.add(new s({url:i,renderer:a}))})));new i({container:"utilitymap",map:n,basemap:"hybrid",center:[t.y,t.x],zoom:17});var r=new l;n.add(r);var c=null;void 0!=t&&null!=t&&(c=[[t.y1,t.x1],[t.y1,t.x],[t.y,t.x],[t.y,t.x1]]);c={type:"polygon",rings:c};var d={type:"simple-fill",color:[255,0,0,.35],outline:{color:[255,0,0],width:1}},u=new o({geometry:c,symbol:d});r.add(u)}).catch(e=>{console.error(e)})},GetDirection:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(e.showRoutePosition,e.geoError):alert("Geolocation is not supported by this browser.")},geoError:function(){},showRoutePosition:function(e){var t=this;if(e){var a=e.coords.latitude,i=e.coords.longitude,s=new google.maps.LatLng(a,i),o=new google.maps.LatLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1]),n=localStorage.getItem("UserImage");String(n).indexOf("blob")<=0&&(n="https://app.talygen.com/Content/images/Black/user.png");var c={lat:a,lng:i};if("Google"==t.mapType){var d={url:n,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},u=new google.maps.Marker({position:c,icon:d,map:t.map}),p=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+n+"' class='marker' /> <div style='display:block;width: 270px;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"});u.addListener("click",(function(){p.open(t.map,this)})),t.imageMarker.push(u);var m={path:google.maps.SymbolPath.CIRCLE,fillOpacity:1,scale:3},f={strokeColor:"#ff0000",strokeOpacity:0,fillOpacity:0,icons:[{icon:m,offset:"0",repeat:"4px"}]},h={map:t.map,suppressMarkers:!1,polylineOptions:f},g=new google.maps.DirectionsService,v=new google.maps.DirectionsRenderer(h),_=new google.maps.LatLng(a,i);function C(e,t){var a="DRIVING";e.route({origin:s,destination:o,travelMode:google.maps.TravelMode[a]},(function(e,a){if("OK"==a){t.setDirections(e);var i='<span style="font-weight:bold;">Distance: </span>'+e["routes"][0].legs[0].distance.text+'<br /><span style="font-weight:bold;">Time: </span>'+e["routes"][0].legs[0].duration.text,s=new google.maps.InfoWindow({content:i});google.maps.event.addListener(f,"click",(function(e){s.setPosition(e.latLng),s.open(map)})),google.maps.event.addListener(map,"click",(function(){s.close()}))}else window.alert("Directions request failed due to "+a+". Route exceeds maximum distance limitation.")}))}v.setMap(t.map),C(g,v)}else if("MapBox"==t.mapType){var S={lon:parseFloat(c.lng,10),lat:parseFloat(c.lat,10)},y='<img src="'+n+'" style="width:100px;height:100px;" />',b=new l.a.Popup({offset:25}).setHTML(y),T=document.createElement("div");T.className="marker",T.style.backgroundImage="url("+n+")",T.style.backgroundSize="cover",T.style.width="40px",T.style.height="40px";u=new l.a.Marker(T).setPopup(b).setLngLat(S).addTo(t.map);t.imageMarker.push(u);var k="https://api.mapbox.com/directions/v5/mapbox/driving/"+i+","+a+";"+t.Data[0].pinLatLong.latitude.split(",")[1]+","+t.Data[0].pinLatLong.latitude.split(",")[0]+"?steps=true&geometries=geojson&access_token="+l.a.accessToken;t.map.getLayer("point")||t.map.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:_}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}});var w=new XMLHttpRequest;w.open("GET",k,!0),w.onload=function(){var e=JSON.parse(w.response);if(""!=typeof e.code&&"InvalidInput"!=e.code){var a=e.routes[0],i=a.geometry.coordinates,s={type:"Feature",properties:{distance:a.distance,duration:a.duration},geometry:{type:"LineString",coordinates:i}};t.map.getSource("route")?t.map.getSource("route").setData(s):(t.map.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:s}}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),t.map.on("click","route",(function(e){t.map.queryRenderedFeatures(e.point,{layers:["route"]});var a=e.features[0].properties,i=a.distance;i=parseFloat(.000621371192*i,10).toFixed(2);var s='<span style="font-weight:bold;">Distance: </span>'+i+' mi<br /><span style="font-weight:bold;">Time: </span>'+timeConvert(a.duration);(new l.a.Popup).setLngLat(e.lngLat).setHTML(s).addTo(t.map)})))}else try{ShowMsgWithMsg("Route exceeds maximum distance limitation.","failure")}catch(o){alert("Route exceeds maximum distance limitation.")}},w.send()}else{var A=r.a.icon({iconUrl:n,iconSize:[40,40]});b=r.a.popup().setContent("<img src="+n+" />");r.a.marker([a,i],{icon:A}).bindPopup(b).openPopup().addTo(t.map);var I=r.a.Routing.control({waypoints:[r.a.latLng(a,i),r.a.latLng(t.Data[0].pinLatLong.latitude.split(",")[0],t.Data[0].pinLatLong.latitude.split(",")[1])],routeWhileDragging:!1,createMarker:function(){return null}}).addTo(t.map);I.on("routesfound",(function(e){var t=e.routes;t[0].summary}))}}},DeleteFeature:function(){var e=this;null!=e.currentSelectedShape&&"undefined"!=typeof e.currentSelectedShape&&(e.currentSelectedShape.setMap(null),e.currentSelectedShape=null,e.showAddZone=!1,e.showDeleteFeature=!1)},ShowDrawingManager:function(){var e=this;null==e.drawingManager&&void 0!=e.config&&1==e.config.isShowDrawButton&&(e.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"],setEditable:!0},polylineOptions:{editable:!0}}),e.drawingManager.setMap(e.map),google.maps.event.addListener(e.drawingManager,"overlaycomplete",e.GetGoogleAddressToDraw))},ViewLocatorOnMap:function(e){var t,a=this;a.isLoading=!0,t=void 0!=a.selectedUser?`selectedUser=${e}&reqFrom=`:"reqFrom=ETAMAP",f["a"].TrackByUserId(t).then((function(e){if(null!=e.data.data&&e.data.data.length>0){var t=e.data.data;a.ShowUserOnMap(t,a.map),a.isLoading=!1}else a.ShowAlert(a.$t("CurrentLocationNotFound"),"warning",!0,a.$t("Alert")),a.isLoading=!1}))},ShowUserOnMap:function(e,t){var a=this,i=[];$.each(e,(function(e,t){var s=t.IMAGE_PATH,o={lat:parseFloat(t.LATITUDE,10),lng:parseFloat(t.LONGITUDE,10)};i.push([o.lat,o.lng]);new google.maps.LatLng(o.lat,o.lng);String(s).indexOf("blob")<=0&&(s="/Content/images/user_avtar.png");var n='<div class="w-100 float-left popupcontent" style="padding:0px 6px 0px 0px;">';if(n+='<img src="'+s+'" class="float-left" style="width:50px;height:50px; border-radius: 100%;border: 3px solid #f2f2f2;" />',n+='<div style="padding-left:8px; padding-top:5px;width:80%;" class="float-left">',n+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Name: </b>"+t.NAME+" </p>",n+="<p style='margin-bottom: 2;'><b style='font-weight:bold;'>Department: </b>"+t.DEPARTMENT_NAME+" </p></div>",t.TRACK_ID>0&&(n+="<p style='margin-bottom:2px;' class='px-2 float-left'><b style='font-weight:bold;'>"+t.NAME+" </b> is going to ticket number: "+t.TICKET_NUMBER+" </p>"),n+="</div>","Google"==a.mapType){var c={url:s,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},d=new google.maps.Marker({position:o,icon:c,map:a.map});a.imageMarker.push(d);var u=new google.maps.InfoWindow({content:n});try{d.addListener("click",(function(){u.open(a.map,this)}))}catch(g){console.log(g)}}else if("MapBox"==a.mapType){var p={lon:parseFloat(o.lng,10),lat:parseFloat(o.lat,10)},m=new l.a.Popup({offset:25}).setHTML(n),f=document.createElement("div");f.className="marker",f.style.backgroundImage="url("+s+")",f.style.backgroundSize="cover",f.style.width="50px",f.style.height="50px";d=new l.a.Marker(f).setPopup(m).setLngLat(p).addTo(a.map);a.map.flyTo({center:[p.lon,p.lat],essential:!0}),a.imageMarker.push(d)}else{var h=r.a.icon({iconUrl:s,iconSize:[40,40]});m=r.a.popup().setContent(n),d=r.a.marker([o.lat,o.lng],{icon:h}).bindPopup(m).openPopup().addTo(a.map);a.imageMarker.push(d),a.map.fitBounds(i)}}))},ViewOnMap:function(){var e=this,t=new google.maps.LatLng(e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]);"Google"==e.mapType?(e.markers.forEach((function(t,a){if(t.title==(e.latLng.TicketNumber||e.latLng.ticket_number)){let i=new google.maps.InfoWindow;i.setContent(t.address),i.open(e.map,e.markers[a])}})),e.map.panTo(t),e.map.setZoom(18)):"MapBox"==e.mapType?e.markers[0].features.forEach((function(t,a){e.map.flyTo({center:[e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]],zoom:16,essential:!0}),t.properties.ticketNumber==(e.latLng.TicketNumber||e.latLng.ticket_number)&&new l.a.Popup({closeOnClick:!0}).setLngLat([e.latLng.location_nw.split(",")[1],e.latLng.location_nw.split(",")[0]]).setHTML(t.properties.address).addTo(e.map)})):(e.leafLetReferenceNumber.forEach((function(t,a){t.TicketNumber==(e.latLng.TicketNumber||e.latLng.ticket_number)&&r.a.popup().setLatLng([e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]]).setContent(t.Address).openOn(e.map)})),e.map.flyTo([e.latLng.location_nw.split(",")[0],e.latLng.location_nw.split(",")[1]],16,{animate:!0,duration:2}))},ShowLocationOnGoogleMap:function(){if("Google"==this.mapType){var e,t=this,a=null;const n=[];var i,s=null,o=new google.maps.InfoWindow;t.map=null,t.showLoader=!0,t.map=new google.maps.Map(document.getElementById(t.mapContainer),{zoom:7,zoomControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.BOTTOM_RIGHT},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},center:new google.maps.LatLng(30.7333,76.7794),mapTypeId:google.maps.MapTypeId.ROADMAP}),void 0!=t.config&&1==t.config.isShowDrawButton&&(t.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,markerOptions:{draggable:!0},drawingControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER,drawingModes:["marker","polygon"]},polylineOptions:{editable:!0}}),t.drawingManager.setMap(t.map),google.maps.event.addListener(t.drawingManager,"overlaycomplete",(function(e,a,i){var s=e.overlay;t.currentSelectedShape=s,t.GetGoogleAddressToDraw(e)}))),(this.mapType="Google")&&$.each(t.Data,(function(l,r){null!=r.pinLatLong.latitude&&(a=r.pinLatLong.latitude.split(",")[0],s=r.pinLatLong.latitude.split(",")[1]),i="Critical"==r.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png":"High"==r.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png":"Medium"==r.priority?"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png":"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png";let c='<div id="content"><div class="map-pop-header '+r.priority+'" style="background-color:'+r.color_code+'"><div id="siteNotice"></div>'+r.popupHeaderHtml+'</div><div id="bodyContent">'+r.popupBodyHtml+'<p class="view-details">'+r.popupFooterHtml+"</p></div></div>";e=new google.maps.Marker({position:new google.maps.LatLng(a,s),icon:i,title:r.refValue,map:t.map,address:c}),n.push(e),t.markers.push(e);let d=[];if(void 0!=t.Data[l]&&t.Data[l].polygons.forEach((function(e){e.latLong.forEach((function(e){d.push(new google.maps.LatLng(e.longitude,e.latitude))})),t.myPolygon=new google.maps.Polygon({paths:d,draggable:!1,editable:1==t.config.isEditable,strokeColor:"undefined"!=typeof e.strokeColor?e.strokeColor:"#FF0000",strokeOpacity:"undefined"!=typeof e.strokeOpacity?e.strokeOpacity:"#FF0000",strokeWeight:"undefined"!=typeof e.strokeWeight?e.strokeWeight:"#FF0000",fillColor:"undefined"!=typeof e.fillColor?e.fillColor:"#FF0000",fillOpacity:"undefined"!=typeof e.opacity?e.opacity:.35,Id:t.Data[l].refValue}),t.myPolygon.setMap(t.map),google.maps.event.addListener(t.myPolygon,"click",(function(e,a){t.currentSelectedShape=this,t.currentSelectedShape.setOptions({editable:!0,ShapeId:t.polygonNewShapeId}),t.showDeleteFeature=!0}))})),"zoneMapDiv"==t.mapContainer||"mapExtend"==t.mapContainer){for(var u=new google.maps.LatLngBounds,p=d,m=0,f=p.length;m<f;m++)u.extend(p[m]);t.map.fitBounds(u)}google.maps.event.addListener(t.myPolygon.getPath(),"set_at",(function(e,a){let i={FullAddress:""};if(t.lngLatData=[],"zoneMapDiv"==t.mapContainer){t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.myPolygon.setOptions({ShapeId:t.polygonNewShapeId}),t.showAddZone=!0,l=t.myPolygon.getPath().getArray(),l.forEach((function(e,a){t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})})),i={FullAddress:""};var s=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:s},(function(e,t){i.FullAddress=e[0].formatted_address})),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:i,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:i})}else{var l;t.lngLatData=[],l=t.myPolygon.getPath().getArray(),l.forEach((function(e,a){t.lngLatData.push({Lat:e.lat(),Lng:e.lng()})})),i={FullAddress:""};s=new google.maps.LatLng(t.lngLatData[0].Lat,t.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:s},(function(e,t){i.FullAddress=e[0].formatted_address})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:i})}})),google.maps.event.addListener(e,"click",function(e,a){return function(){o.setContent(c),o.open(t.map,e)}}(e));var h=new google.maps.LatLng(t.Data[0].latlong.split(",")[0],t.Data[0].latlong.split(",")[1]);t.map.panTo(h),t.map.setZoom(4)}));var l={gridSize:40,maxZoom:15,styles:[{width:30,height:30,url:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m1.png",textColor:"white",textSize:12}]};t.markerCluster=new MarkerClusterer(t.map,n,l)}},LoadLocatorDataonMap:function(){var e=this,t=null,a=null;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){t=e.coords.latitude,a=e.coords.longitude})):console.log("Geolocation is not supported by this browser."),e.showSetting=!0,"Google"==e.mapType?setTimeout(()=>{e.LoadGoogleHeatMap(t,a)},2e3):"MapBox"==e.mapType?setTimeout(()=>{e.LoadMapboxHeatMap(t,a)},4e3):setTimeout(()=>{e.ShowEtaMap(t,a)},4e3)},initMapBox:function(e,t,a,i){var s=this,o="";let n=3;if(e){var r=$.grep(e,(function(e,t){return""!=e.location_nw&&null!=e.location_nw&&void 0!=typeof e.location_nw&&","!=e.location_nw}));r=r[0],r&&(o=[parseFloat(String(r.location_nw).split(",")[1],10),parseFloat(String(r.location_nw).split(",")[0],10)])}if(s.startingPoint=o,l.a.accessToken=t,s.map=new l.a.Map({container:s.mapContainer,style:"mapbox://styles/mapbox/streets-v11",zoom:n,zoomControl:!0,scrollZoom:!0,boxZoom:!0}),void 0!=s.config&&1==s.config.isShowSearchBox){var c=new p.a({accessToken:t,mapboxgl:l.a,marker:!1,placeholder:"Search for places in Barbados"});s.map.addControl(c)}if(void 0!=s.config&&1==s.config.isShowDrawButton){var u=new d.a({displayControlsDefault:!1,controls:{line_string:!1,polygon:!0,point:!0,trash:!0}});s.map.addControl(u),s.map.on("draw.create",s.GetMapBoxAddressToDraw);var m=new l.a.NavigationControl;s.map.addControl(m,"top-left")}m=new l.a.NavigationControl;if(s.map.addControl(m,"bottom-right"),null!=e&&e.length>0){if($.each(e,(function(t,a){t++,s.map.flyTo({center:[s.Data[0].latlong.split(",")[1],s.Data[0].latlong.split(",")[0]],zoom:4,essential:!0});if("[]"!=a.attachmentCountWithExt&&""!=a.attachmentCountWithExt&&null!=a.attachmentCountWithExt){var i=JSON.parse(a.attachmentCountWithExt);$.each(i,(function(e,t){"Video"==t.TYPE?t.COUNT:"Image"==t.TYPE?t.COUNT:parseInt(t.COUNT)}))}if(void 0!=a.polygons[t]){a.polygons[t].latLong[t].latitude.split(",")[1],a.polygons[t].latLong[t].latitude.split(",")[0];s.map.addSource("maine",{type:"geojson",data:v}),s.map.addLayer({id:"maine",type:"fill",source:"maine",layout:{},paint:{"fill-color":"#FF0000","fill-opacity":.35}})}let o='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+a.priority+'" style="background-color:'+a.color_code+'"><div id="siteNotice"></div>'+a.popupHeaderHtml+'</div><div id="bodyContent">'+a.popupBodyHtml+'<p class="view-details">'+a.popupFooterHtml+"</p></div></div></div></div></div>";_(t,a.pinLatLong.latitude,e,a.priority,o,a.is_high_profile,a)})),null!=e.mapdetail&&e.mapdetail.length>0)if("MapBox"==e.mapdetail[0].MAP_TYPE){if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var f=JSON.parse(e.mapdetail[0].LAT_LNG),h=f.reduce((function(e,t){return e.extend(t)}),new l.a.LngLatBounds(f[0],f[0]));map.fitBounds(h)}}else if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var g=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(t,a){var i=[];"LeafLet"==e.mapdetail[0].MAP_TYPE||"Esri"==e.mapdetail[0].MAP_TYPE?i.push(a[1],a[0]):i.push(a.lng,a.lat),g.push(i)}));f=g,h=f.reduce((function(e,t){return e.extend(t)}),new l.a.LngLatBounds(f[0],f[0]));map.fitBounds(h)}var v;function _(e,t,a,i,o,n,r){if(""!=t&&null!=t&&"undefined"!=typeof t&&","!=typeof t){var c=parseFloat(String(t.split(",")[0]),10),d=parseFloat(String(t.split(",")[1]),10),u="https://app.talygen.com",p=r.color_code;if(""!=p&&null!=p&&"undefined"!=typeof p&&" "!=typeof p||(p="#4db567"),u+="https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",1==e||"undefined"==typeof v)v={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Ticket Priority: "+i,icon:""+u,color:p,address:o,ticketNumber:r.refValue},geometry:{type:"Point",coordinates:[]}}]},v.features[0].geometry.coordinates.push(d),v.features[0].geometry.coordinates.push(c),s.markers.push(v);else{var m={type:"Feature",properties:{title:"Ticket Priority: "+i,icon:""+u,color:p,address:o,ticketNumber:r.refValue},geometry:{type:"Point",coordinates:[]}};m.geometry.coordinates.push(d),m.geometry.coordinates.push(c),v.features.push(m),s.markers.push(m)}}e==a.length&&(s.map.loadImage("https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png",(e,t)=>{if(e)throw e;s.map.addImage("ticket-icon",t,{sdf:!0})}),s.map.on("load",(function(){s.map.addSource("ticketsourcedata",{type:"geojson",data:v,cluster:!0,clusterMaxZoom:14,clusterRadius:50}),s.map.addLayer({id:"clusters",type:"circle",source:"ticketsourcedata",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",100,"#f1f075",750,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,100,30,750,40]}}),s.map.addLayer({id:"cluster-count",type:"symbol",source:"ticketsourcedata",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12}}),s.map.addLayer({id:"unclustered_point",type:"circle",source:"ticketsourcedata",filter:["!",["has","point_count"]],paint:{"circle-color":["get","color"],"circle-radius":20,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),s.map.on("click","clusters",(function(e){var t=s.map.queryRenderedFeatures(e.point,{layers:["clusters"]}),a=t[0].properties.cluster_id;s.map.getSource("ticketsourcedata").getClusterExpansionZoom(a,(function(e,a){e||s.map.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),s.map.on("click","unclustered_point",(function(e){if(""!=a[0].popupBodyHtml&&1!=e.features[0].properties.cluster){var t=e.features[0].geometry.coordinates.slice(),i=e.features[0].properties.address;new l.a.Popup({closeOnClick:!0}).setLngLat(t).setHTML(i).addTo(s.map)}})),s.map.on("mouseenter","clusters",(function(){s.map.getCanvas().style.cursor="pointer"})),s.map.on("mouseleave","clusters",(function(){s.map.getCanvas().style.cursor=""})),s.map.on("mouseenter","unclustered_point",(function(){s.map.getCanvas().style.cursor="pointer"})),s.map.on("mouseleave","unclustered_point",(function(){s.map.getCanvas().style.cursor=""})),s.map&&s.map.on("wheel",e=>{e.originalEvent.ctrlKey?(e.originalEvent.preventDefault(),s.map.scrollZoom._enabled||s.map.scrollZoom.enable()):s.map.scrollZoom._enabled&&s.map.scrollZoom.disable()})})))}$(".mapboxgl-ctrl-compass").hide()}},initLeafletMap:function(e,t,a){var i,s=this;if(void 0!=e){if(s.map){s.map.off();try{s.map.remove()}catch{}}let t="",a="";if(null!=e&&e.length>0){var o=$.grep(e,(function(e,t){return""!=e.location_nw&&null!=e.location_nw&&"undefined"!=typeof e.location_nw&&","!=e.location_nw}));if(null!=o&&o.length>0){var l=o[0].location_nw;a=l.split(",")[1],t=l.split(",")[0]}}var n=r.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Points &copy '+(new Date).getFullYear()+" LINZ"}),c=(r.a.tileLayer("https://{s}.tiles.mapbox.com/v3/spatial.b625e395/{z}/{x}/{y}.png",{attribution:'<a href="http://www.mapbox.com/about/maps/" target="_blank">Terms &amp; Feedback</a>'}),r.a.latLng(t,a));s.startingPoint=[t,a];var d=10;if(""==t&&""==a&&(d=2),s.map=r.a.map(s.mapContainer,{zoom:d,center:c,layers:[n],zoomControl:!1}),r.a.control.zoom({position:"topright"}).addTo(s.map),void 0!=s.config&&1==s.config.isShowDrawButton&&s.GetLeafLetAddressToDraw(),void 0!=s.config&&1==s.config.isShowSearchBox){const e=new m["b"],t=new m["a"]({provider:e});s.map.addControl(t)}s.markers=r.a.markerClusterGroup({iconCreateFunction:function(e){return r.a.divIcon({html:'<div class="circle-leaflet">'+e.getChildCount()+"</div>"})}});var u=r.a.Icon.extend({options:{shadowSize:[50,64],iconAnchor:[22,94],shadowAnchor:[4,62],popupAnchor:[-3,-76]}});1==s.Data.length&&s.map.flyTo([s.Data[0].latlong.split(",")[0],s.Data[0].latlong.split(",")[1]],16,{animate:!0,duration:2});new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_critical.png"}),new u({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_high.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_low.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_medium.png"}),new u({iconUrls:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_fill.png"});function p(e){var o="",l="";if($.each(e,(function(e,n){if(""!=n.pinLatLong.latitude&&null!=n.pinLatLong.latitude&&void 0!=typeof n.pinLatLong.latitude||n.polygons.length>0){o=n.pinLatLong.latitude;let h=[];l=n.priority;if("[]"!=n.attachmentCountWithExt&&""!=n.attachmentCountWithExt&&null!=n.attachmentCountWithExt){var c=JSON.parse(n.attachmentCountWithExt);$.each(c,(function(e,t){"Video"==t.TYPE?t.COUNT:"Image"==t.TYPE?t.COUNT:parseInt(t.COUNT)}))}if(s.Data[e].polygons.forEach((function(e){e.latLong.forEach((function(e){h.push([e.latitude,e.longitude])}))})),void 0!=n.polygons[e]){if(s.Data[0].polygons[0].latLong.length>1){var d=r.a.polygon(h,{fill:!0}).addTo(s.editableLayers);s.map.fitBounds(d.getBounds())}}let g='<div class="gm-style-iw gm-style-iw-c"><div class="gm-style-iw-d"><div><div id="content"><div class="map-pop-header '+n.priority+'" style="background-color:'+n.color_code+'"><div id="siteNotice"></div>'+n.popupHeaderHtml+'</div><div id="bodyContent">'+n.popupBodyHtml+'<p class="view-details">'+n.popupFooterHtml+"</p></div></div></div></div></div>";""==a&&""==t||(a=o.split(",")[1],t=o.split(",")[0],a=parseFloat(a,10),t=parseFloat(t,10));var u=n.ticket_number,p=".leafleticoncustom_"+l+"{background-color:"+n.color_code+" }",m=document.createElement("style");m.innerHTML=p,document.head.appendChild(m);var f=r.a.icon({iconUrl:"https://talygenv.github.io/Vue-UI-Content/images/Ticketing/mapicon_leaffill.png",iconSize:[30,30],color:n.color_code,"icon-color":n.color_code,"background-color":n.color_code,className:"leafleticoncustom_"+l});i=r.a.marker(r.a.latLng(t,a),{icon:f}),i.bindPopup(g),s.markers.addLayer(i),s.leafLetReferenceNumber.push({TicketNumber:n.refValue,Address:g}),s.mapMarker.push(s.markers),i.on("click",(function(e){var t=$("a.ticketnumber[data-ticketnumber='"+u+"']");if(t.length>0&&"true"==localStorage.getItem("isMapView")){var a=t.closest(".lists");a.addClass("alert-info"),setTimeout((function(){a.removeClass("alert-info")}),5e3)}t=$("a.ticketnumberlist[data-ticketnumber='"+u+"']"),t.length>0&&"false"==localStorage.getItem("isMapView")&&(t=t.closest("tr"),t.addClass("alert-info"),setTimeout((function(){t.removeClass("alert-info")}),5e3))}))}})),null!=e.mapdetail&&e.mapdetail.length>0)if("MapBox"==e.mapdetail[0].MAP_TYPE){if(""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var n=JSON.parse(e.mapdetail[0].LAT_LNG),c=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t[1],t[0]),c.push(a)})),map.fitBounds(c)}}else if("Google"==e.mapdetail[0].MAP_TYPE&&""!=e.mapdetail[0].LONGITUDE&&""!=e.mapdetail[0].LATITUDE&&""!=e.mapdetail[0].LAT_LNG){var d=[];$.each(JSON.parse(e.mapdetail[0].LAT_LNG),(function(e,t){var a=[];a.push(t.lat,t.lng),d.push(a)}));n=d;var u=[];u.push(n),map.fitBounds(n)}s.map.addLayer(s.markers)}null!=e&&e.length>0&&p(e)}else s.map=r.a.map(s.mapContainer,{layers:[r.a.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'})],center:[0,0],zoom:5})},ShowEtaMap:function(e,t){var a=this,i=null,s=null,o="driving-car",l=600;if(a.showHideEtaMap)return $.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!1,!1;function n(){navigator.geolocation?navigator.geolocation.getCurrentPosition(d,c,{timeout:1e4}):alert("Geolocation is not supported by this browser")}function c(e){e.code;var t=e.message;alert(t)}n();function d(e){e=$.post("geocoordinates.php",{lat:e.coords.latitude,lng:e.coords.longitude})}function u(e,t){if(a.map){$.each(a.mapLayer,(function(e,t){a.map.removeLayer(t)})),a.showHideEtaMap=!0;var i=new r.a.latLng(e,t);a.map.panTo(i),a.map.setZoom(11)}var s=localStorage.getItem("UserImage");String(s).indexOf("blob")<=0&&(s="https://app.talygen.com/Content/images/Black/user.png");var o=r.a.icon({iconUrl:s,iconSize:[40,40]}),l=r.a.popup().setContent("<div style='padding:8px;'><img style='float:left;' src='"+s+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"),n=r.a.marker([e,t],{icon:o},{layers:""}).bindPopup(l).openPopup().addTo(a.map);a.imageMarker.push(n),p(!0)}function p(e){var t=[];$("input[name=duration]:checked").each((function(){t.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+o,data:JSON.stringify({location_type:"start",range_type:"time",range:t,interval:l,locations:[[i,s],[i,s]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){r.a.geoJson(e,{onEachFeature:function(e,t){t.bindPopup("Isochrone: "+e.properties.value),a.mapLayer.push(t)},style:function(e){var t=e.properties.value;return a.SetColor(t),{fillColor:a.colors,color:a.colors,weight:1,fillOpacity:.35}}}).addTo(a.map)}})}i=parseFloat(t,10)+.02,s=parseFloat(e,10)+.004,u(s,i),document.getElementById("params").addEventListener("change",(function(e){if("profile"===e.target.name)o=e.target.value,u(s,i);else if("duration"===e.target.name){var t="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){t.length>0&&(t+=",");var e=$(this).val();t+=e}));var a=String(t).split(",");l=a[0],a[a.length-1]}else l="600","1800";u(s,i)}}))},SetColor:function(e){var t=this;if(e=parseInt(e,10),"MapBox"!=t.mapType?e/=60:t.time=10,"MapBox"==t.mapType)switch(e){case 10:t.colors="3CEA19";break;case 20:t.colors="EFF60B";break;case 30:t.colors="F6320B";break;default:t.colors="F6320B"}else switch(e){case 10:t.colors="green";break;case 20:t.colors="yellow";break;case 30:t.colors="red";break;default:t.colors="red"}},LoadGoogleHeatMap:function(e,t){var a=this,i="driving-car",s=600;if(a.showHideEtaMap)return a.map.data.forEach((function(e){a.map.data.remove(e)})),a.showHideEtaMap=!1,!1;function o(o,l){if(a.map){$.each(a.map,(function(e,t){try{a.map.removeLayer(t)}catch(i){}})),a.showHideEtaMap=!0;var n=new r.a.latLng(o,l);a.map.panTo(n),a.map.setZoom(11)}var c={lat:e,lng:t},d=(n=new google.maps.LatLng(e,t),localStorage.getItem("UserImage"));String(d).indexOf("blob")<=0&&(d="https://app.talygen.com/Content/images/Black/user.png");var u={url:d,scaledSize:new google.maps.Size(40,40),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0)},p=new google.maps.Marker({position:c,icon:u,map:a.map}),m=new google.maps.InfoWindow({content:"<div style='padding:8px;'><img style='float:left;' src='"+d+"' class='marker' /> <div style='display:block;'>"+a.UserName+"</br>"+a.UserEmailId+"</div></div>"});p.addListener("click",(function(){m.open(a.map,this)})),a.imageMarker.push(p);var f=[];$("input[name=duration]:checked").each((function(){f.push($(this).val())})),$.ajax({type:"POST",dataType:"json",headers:{Authorization:"5b3ce3597851110001cf62485ecdd7b54dd545c4901722c53ac3d1d3"},url:"https://api.openrouteservice.org/v2/isochrones/"+i,data:JSON.stringify({location_type:"start",range_type:"time",range:f,interval:s,locations:[[l,o],[l,o]],intersections:!1}),async:!1,contentType:"application/json; charset=utf-8",success:function(e){a.map.data.addGeoJson(e)}}),a.map.data.setStyle((function(e){var t=e.getProperty("value");return a.SetColor(t),{fillColor:a.colors,opacity:.35,strokeWeight:1}}))}o(e,t),document.getElementById("params").addEventListener("change",(function(a){if("profile"===a.target.name)i=a.target.value,o(e,t);else if("duration"===a.target.name){var l="";if($(params).find("input:checkbox:checked").length>0){$(params).find("input:checkbox:checked").each((function(){l.length>0&&(l+=",");var e=$(this).val();l+=e}));var n=String(l).split(",");s=n[0],n[n.length-1]}else s="600","1800";o(e,t)}}))},Close:function(){var e=this;e.showAddZone=!1,e.showSaveZonePopUp=!1},GetZoneManagementData:function(e){var t=this;t.currentSelectedShape.setOptions({strokeOpacity:e.strokeOpacity,strokeColor:e.strokeColor,fillOpacity:.35,strokeWeight:e.strokeWeight,fillColor:e.fillColor}),t.polygonData.forEach((function(a,i){a.Id==e.Id&&(t.polygonData[i].strokeOpacity=e.strokeOpacity,t.polygonData[i].strokeWeight=e.strokeWeight,t.polygonData[i].fillColor=e.fillColor,t.polygonData[i].locatorids=e.locatorids,t.polygonData[i].strokeColor=e.strokeColor,t.showAddZone=!1,t.showSaveZone=!0)}))},OpenSaveZone:function(){var e=this;e.showSaveZonePopUp=!0},SaveZoneData:function(e){var t=this;let a={ZoneId:0==t.zoneId?e.ZoneId:t.zoneId,ResolverUserId:null,JsonData:{type:"FeatureCollection",features:[]},ZoneName:e.Name,description:e.Description,ZoneType:e.ZoneType,YardEmails:null};t.polygonData.forEach((function(e,t){a.JsonData.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:[[]]},properties:{stroke:e.strokeWeight,"stroke-opacity":e.strokeOpacity,"stroke-width":e.strokeWeight,fillColor:e.fillColor,"fill-opacity":e.fillOpacity,locatorname:null,locatorids:e.locatorids,userids:null}}),e.latLong.forEach((function(e,i){void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([e.longitude,e.latitude])})),void 0!=a.JsonData.features[t]&&a.JsonData.features[t].geometry.coordinates[0].push([a.JsonData.features[t].geometry.coordinates[0][0][0],a.JsonData.features[t].geometry.coordinates[0][0][1]])})),t.zoneData.push(a);var i=JSON.stringify(t.zoneData);f["a"].UploadGeoJSON(i).then((function(e){0==t.zoneId?t.ShowAlert("Zone Succesfully Added.","success"):t.ShowAlert("Zone Succesfully Updated.","success"),t.showSaveZonePopUp=!1,t.currentSelectedShape=null,t.$emit("FetchData")}))},GetLeafLetAddressToDraw:function(){var e=this;let t={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};r.a.featureGroup().addTo(e.map);e.editableLayers=(new r.a.FeatureGroup).addTo(e.map);new r.a.Control.Draw({edit:{featureGroup:e.editableLayers,poly:{allowIntersection:!0}},draw:{polygon:{allowIntersection:!1,drawError:{color:"#e1e100",message:"<strong>Oh snap!<strong> you can't draw that!"},shapeOptions:{color:"#bada55"}},polyline:!1,circle:!1,marker:!1,circlemarker:!1}}).addTo(e.map);e.map.addLayer(e.editableLayers),e.map.on("draw:editvertex",(function(a){var i=a.poly;i.getLatLngs(),i.getLatLngs()[0].forEach((function(a,i){e.lngLatData.push({Lat:a.lat,Lng:a.lng});var s=new google.maps.LatLng(e.lngLatData[0].Lat,e.lngLatData[0].Lng),o=new google.maps.Geocoder;o.geocode({latLng:s},(function(e,a){t.FullAddress=e[0].formatted_address})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t})}))})),e.map.on("draw:created",(function(a){var i=a.layerType,s=a.layer;if("polygon"===i){s.on("mouseover",(function(){console.log(s.getLatLngs())})),e.editableLayers.addLayer(s),s.getLatLngs()[0].forEach((function(t,a){e.lngLatData.push({Lat:t.lat,Lng:t.lng})}));var o=new google.maps.LatLng(s.getLatLngs()[0][0].lat,s.getLatLngs()[0][0].lng),l=new google.maps.Geocoder;l.geocode({latLng:o},(function(a,i){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,i){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}else{e.lngLatData.push({Lat:a.layer._latlng.lat,Lng:a.layer._latlng.lng});o=new google.maps.LatLng(a.layer._latlng.lat,a.layer._latlng.lng),l=new google.maps.Geocoder;l.geocode({latLng:o},(function(a,i){t.FullAddress=a[0].formatted_address,a[0].address_components.forEach((function(a,i){"country"==a.types[0]?(t.Country.Name=a.short_name,t.Country.LongName=a.long_name):"postal_code"==a.types[0]?t.PinCode=a.long_name:"administrative_area_level_1"==a.types[0]?(t.AdministrativeAreaLevel1.LongName=a.long_name,t.AdministrativeAreaLevel1.Name=a.short_name,t.State.LongName=a.long_name,t.State.Name=a.short_name):"administrative_area_level_2"==a.types[0]?(t.AdministrativeAreaLevel2.LongName=a.long_name,t.AdministrativeAreaLevel2.Name=a.short_name):"administrative_area_level_3"==a.types[0]?(e.address.push({AdministrativeArea3:a.long_name}),t.AdministrativeAreaLevel3.LongName=a.long_name,t.AdministrativeAreaLevel3.Name=a.short_name):"locality"==a.types[0]&&(e.address.push({City:a.long_name}),t.City.LongName=a.long_name,t.City.Name=a.short_name)})),e.fullAddress.push({LatLng:e.lngLatData,CompleteAddress:t}),e.$emit("GetAddress",e.fullAddress)}))}}))},GetGoogleAddressToDraw:function(e){var t=this,a=e.overlay;t.currentSelectedShape=a;let i={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},State:{Name:"",LongName:""},PinCode:"",FullAddress:""};if("polygon"==e.type){var s=e.overlay;s.type=e.type,t.lngLatData=[],"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=(new Date).getTime()+"_"+Math.floor(1e3*Math.random()),t.showAddZone=!0);e.overlay.bounds;e.overlay.latLngs.g[0].g.forEach((function(e,a){t.lngLatData.push({latitude:e.lat(),longitude:e.lng()})})),s["ShapeId"]=t.polygonNewShapeId,google.maps.event.addListener(s,"click",(function(e,a,i){"zoneMapDiv"==t.mapContainer&&(t.polygonNewShapeId=this.ShapeId,t.showAddZone=!0,t.currentSelectedShape=this)}));var o=new google.maps.LatLng(t.lngLatData[0].latitude,t.lngLatData[0].longitude),l=new google.maps.Geocoder;l.geocode({latLng:o},(function(e,a){i.FullAddress=e[0].formatted_address,a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(i.Country.Name=e.short_name,i.Country.LongName=e.long_name):"postal_code"==e.types[0]?i.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(i.AdministrativeAreaLevel1.LongName=e.long_name,i.AdministrativeAreaLevel1.Name=e.short_name,i.State.LongName=e.long_name,i.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(i.AdministrativeAreaLevel2.LongName=e.long_name,i.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),i.AdministrativeAreaLevel3.LongName=e.long_name,i.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),i.City.LongName=e.long_name,i.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:i}),t.$emit("GetAddress",t.fullAddress),t.polygonData.push({Id:t.polygonNewShapeId,latLong:t.lngLatData,CompleteAddress:i,strokeOpacity:"",strokeWeight:"",strokeColor:"",fillColor:"",locatorids:""}))}))}else if("marker"==e.type){t.lngLatData.push({name:"",latLong:[{latitude:e.overlay.getPosition().lat(),longitude:e.overlay.getPosition().lng()}]});o=new google.maps.LatLng(e.overlay.getPosition().lat(),e.overlay.getPosition().lng()),l=new google.maps.Geocoder;l.geocode({latLng:o},(function(e,a){a==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,a){"country"==e.types[0]?(i.Country.Name=e.short_name,i.Country.LongName=e.long_name):"postal_code"==e.types[0]?i.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(i.AdministrativeAreaLevel1.LongName=e.long_name,i.AdministrativeAreaLevel1.Name=e.short_name,i.State.LongName=e.long_name,i.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(i.AdministrativeAreaLevel2.LongName=e.long_name,i.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),i.AdministrativeAreaLevel3.LongName=e.long_name,i.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),i.City.LongName=e.long_name,i.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:i}),t.$emit("GetAddress",t.fullAddress))}))}},LoadMapboxHeatMap:function(e,t){var a=this;if("undefined"!=typeof a.map.getLayer("isoLayer")&&a.map.removeLayer("isoLayer"),"undefined"!=typeof a.map.getSource("iso"))return a.map.removeSource("iso"),!1;var i=document.getElementById("params"),s="https://api.mapbox.com/isochrone/v1/mapbox/",o=null,n=null,r=(s="https://api.mapbox.com/isochrone/v1/mapbox/",parseFloat(n,10),parseFloat(o,10),"driving"),c="10,20,30";function u(){var i=s+r+"/"+t+","+e+"?contours_minutes="+c+"&contours_colors="+a.colors+"&polygons=true&access_token="+l.a.accessToken;$.ajax({method:"GET",url:i}).done((function(e){a.map.getSource("iso").setData(e)}))}a.colors="3CEA19,EFF60B,F6320B",m(),a.map.flyTo({center:[t,e],zoom:10,essential:!0});var p=new d.a;function m(){a.map.addSource("iso",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),a.map.addLayer({id:"isoLayer",type:"fill",source:"iso",layout:{},paint:{"fill-color":["get","fillColor"],"fill-opacity":.5}},"poi-label");var i={lon:t,lat:e},s=localStorage.getItem("UserImage");String(s).indexOf("blob")<=0&&(s="https://app.talygen.com/Content/images/Black/user.png");var o=new l.a.Popup({offset:25}).setHTML("<div style='padding:8px;'><img style='float:left;' src='"+s+"' class='marker' /> <div style='display:block;'>@loggedUserInfo.Name </br>@loggedUserInfo.Email</div></div>"),n=document.createElement("div");n.className="marker",n.style.backgroundImage="url("+s+")",n.style.backgroundPosition="top center",n.style.backgroundSize="cover",n.style.width="40px",n.style.height="40px";var r=new l.a.Marker(n).setLngLat(i).setPopup(o).addTo(a.map);a.imageMarker.push(r),u()}a.map.addControl(p,"bottom-left"),i.addEventListener("change",(function(e){if("profile"===e.target.name)r=e.target.value,"foot-walking"==r?r="walking":"cycling-regular"==r?r="cycling":"driving-car"==r&&(r="driving"),u();else if("duration"===e.target.name){var t="",s="";$(i).find("input:checkbox:checked").length>0?($(i).find("input:checkbox:checked").each((function(){t.length>0&&(t+=","),s.length>0&&(s+=",");var e=$(this).val();t+=e,a.SetColor(e),s+=a.colors})),c=t,a.colors=s,u()):(c="10,20,30",a.colors="3CEA19,EFF60B,F6320B",u())}})),a.map.on("load",(function(){m()}))},TravelMode:function(e){var t=this;t.time=t.time-e,"LeafLet"==t.mapType?t.ShowEtaMap():"Google"==t.mapType?t.LoadGoogleHeatMap():"MapBox"==t.mapType&&t.LoadMapboxHeatMap()},ShowTravelMode:function(){var e=this;0==e.showSettingPopup?($(".settingPopup").removeClass("d-none"),e.showSetting=!1,e.showSettingPopup=!0):($(".settingPopup").addClass("d-none"),e.showSetting=!0,e.showSettingPopup=!1)},GetMapBoxAddressToDraw:function(e){var t=this;let a={City:{Name:"",LongName:""},Country:{Name:"",LongName:""},AdministrativeAreaLevel1:{Name:"",LongName:""},AdministrativeAreaLevel2:{Name:"",LongName:""},AdministrativeAreaLevel3:{Name:"",LongName:""},PinCode:"",State:{Name:"",LongName:""},FullAddress:""};if("Polygon"==e.features[0].geometry.type){e.features[0].geometry.coordinates[0].forEach((function(e,a){t.lngLatData.push({Lat:e[1],Lng:e[0]})}));var i=new google.maps.LatLng(e.features[0].geometry.coordinates[0][0][1],e.features[0].geometry.coordinates[0][0][0]),s=new google.maps.Geocoder;s.geocode({latLng:i},(function(e,i){a.FullAddress=e[0].formatted_address,i==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,i){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}else{t.lngLatData.push({Lat:e.features[0].geometry.coordinates[1],Lng:e.features[0].geometry.coordinates[0]});i=new google.maps.LatLng(e.features[0].geometry.coordinates[1],e.features[0].geometry.coordinates[0]),s=new google.maps.Geocoder;s.geocode({latLng:i},(function(e,i){a.FullAddress=e[0].formatted_address,i==google.maps.GeocoderStatus.OK&&(e[0].address_components.forEach((function(e,i){"country"==e.types[0]?(a.Country.Name=e.short_name,a.Country.LongName=e.long_name):"postal_code"==e.types[0]?a.PinCode=e.long_name:"administrative_area_level_1"==e.types[0]?(a.AdministrativeAreaLevel1.LongName=e.long_name,a.AdministrativeAreaLevel1.Name=e.short_name):"administrative_area_level_2"==e.types[0]?(a.AdministrativeAreaLevel2.LongName=e.long_name,a.AdministrativeAreaLevel2.Name=e.short_name,a.State.LongName=e.long_name,a.State.Name=e.short_name):"administrative_area_level_3"==e.types[0]?(t.address.push({AdministrativeArea3:e.long_name}),a.AdministrativeAreaLevel3.LongName=e.long_name,a.AdministrativeAreaLevel3.Name=e.short_name):"locality"==e.types[0]&&(t.address.push({City:e.long_name}),a.City.LongName=e.long_name,a.City.Name=e.short_name)})),t.fullAddress.push({LatLng:t.lngLatData,CompleteAddress:a}),t.$emit("GetAddress",t.fullAddress))}))}}}},C=_,S=(a("d6ba"),a("2877")),y=Object(S["a"])(C,i,s,!1,null,null,null);t["a"]=y.exports},3975:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Manage Polygon Details")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.$emit("Close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Stroke Width")]),e._v(":"+e._s(e.StrokeWidthValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalStrokeWidth)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.StrokeWidthValue,expression:"StrokeWidthValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"1",max:"10",step:"1",id:"txtstrokeWidth"},domProps:{value:e.StrokeWidthValue},on:{__r:function(t){e.StrokeWidthValue=t.target.value}}})])]),t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("StrokeOpacity")]),e._v(":"+e._s(e.StrokeOpacityValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalStrokeOpacity)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.StrokeOpacityValue,expression:"StrokeOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtStrokeOpacity"},domProps:{value:e.StrokeOpacityValue},on:{__r:function(t){e.StrokeOpacityValue=t.target.value}}})])]),t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("FillOpacity")]),e._v(":"+e._s(e.FillOpacityValue)),t("span",{staticClass:"slidervalve",domProps:{textContent:e._s(e.totalFillOpacity)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.FillOpacityValue,expression:"FillOpacityValue"}],staticClass:"cssSlider d-block mt-2 w-100",attrs:{type:"range",min:"0",max:"1",step:"0.1",id:"txtFillOpacity"},domProps:{value:e.FillOpacityValue},on:{__r:function(t){e.FillOpacityValue=t.target.value}}})])]),e._m(0),e._m(1)]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row mt-0"},[t("div",{staticClass:"col-md-6 col-sm-12 float-left mb-2"},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Locator,expression:"Locator"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by name"},domProps:{value:e.Locator},on:{input:function(t){t.target.composing||(e.Locator=t.target.value)}}})])]),t("div",{staticClass:"col-md-6 col-sm-12 float-left"},[t("div",{staticClass:"background-0 text-left form-check-inline search-btm-btn"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"},on:{click:e.GetUserSkillList}},[t("i",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear all "},on:{click:e.RefreshList}},[t("i",{staticClass:"fa fa-refresh"})])])])]),t("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Ticketing",SubModuleCode:"",IdentityColumn:"user_id",HeaderText:e.$t("Zone Management"),LegendArray:[],RenderRowActionMethod:e.renderActions,widgets:[],listType:["List"],ListData:e.LocatorData,HeaderData:e.Headers,HeaderButtons:"",TotalRecords:e.TotalRecords,ListDataCallBackFunction:e.FetchData,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,SortdataButtonClick:e.sortdata}}),t("div",{staticClass:"row flex-row-reverse pt-3"},[t("div",{staticClass:"col-lg-12 text-right"},[t("a",{staticClass:"btn btn-success formbtn",attrs:{title:"",name:"btnSave",tabindex:"6"},on:{click:e.SaveStyleShape}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v("Save Polygon")]),e._v("  "),t("a",{staticClass:"btn btn-danger formbtn",attrs:{title:"",name:"btnDelete",tabindex:"6"},on:{click:e.DeleteFeature}},[t("i",{staticClass:"fa fa-trash pr-2"}),e._v("Delete Polygon")])])])],1)])])])],1)])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Stroke Color")]),e._v(": "),t("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtstrokeColor",value:"#555555",title:"Stroke Color"}})])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",{},[e._v("Fill")]),e._v(": "),t("input",{staticClass:"dynamiccolorbox cursor-pointer",attrs:{type:"color",id:"txtFillColor",value:"#555555",title:"Fill Color"}})])])}],o=a("9769"),l={created:function(){var e=this;e.GetUserSkillList(),e.polygonData.forEach((function(t,a){t.Id==e.polygonNewShapeId&&(e.FillOpacityValue=e.polygonData[a].strokeOpacity,e.StrokeOpacityValue=e.polygonData[a].strokeOpacity,e.totalStrokeWidth=e.polygonData[a].strokeWeight)}))},props:{polygonNewShapeId:{type:String},polygonData:{type:String}},data(){return{Locator:"",Headers:[{COLUMN_NAME:"first_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"resourceTypeName",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"ResourceType",DISPLAY_ORDER:2},{COLUMN_NAME:"skills",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Skill",DISPLAY_ORDER:3},{COLUMN_NAME:"department",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Department",DISPLAY_ORDER:3}],LocatorData:[],tempLocatorData:[],StrokeWidthValue:"2",StrokeOpacityValue:"0.0",FillOpacityValue:"0.5"}},methods:{GetUserSkillList:function(){var e=this,t="search="+e.Locator;o["a"].GetUserSkillList(t).then(t=>{e.LocatorData=t.data.result.data,setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)})},actionButtonClick(e,t,a,i){},renderActions:function(e){},leftCommonSearch:function(e){},commonHeaderButtonClick:function(e){},sortdata:function(e){},RefreshList:function(){var e=this;e.Locator="",e.GetUserSkillList()},DeleteFeature:function(){var e=this;e.$emit("DeleteFeature")},SaveStyleShape:function(){var e=this,t="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()}));let a={Id:e.polygonNewShapeId,strokeOpacity:e.StrokeOpacityValue,strokeWeight:e.StrokeWidthValue,strokeColor:document.getElementById("txtstrokeColor").value,fillOpacity:document.getElementById("txtFillOpacity").value,fillColor:document.getElementById("txtFillColor").value,locatorids:t};e.$emit("GetZoneManagementData",a)}}},n=l,r=(a("036f"),a("2877")),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"3e91":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Attachment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchemaData},on:{OnSubmit:e.SaveAttachment}})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),l={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(e){try{var t=this;t.AttachmentfileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),o=a.name;t.AttachmentfileName=o;var l=o.lastIndexOf("."),n=o.substring(l+1,o.length);t.AttachmentfileExt+="."+n;var r='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;t.AttachmentfileSize=c;var d={attachement_mime:r,fileName:o,id:0==t.id||null==t.id?t.TicketAttachmentId:t.id,moduleName:t.modulename,subModuleCode:t.submodulecode,base64String:s,fileSize:c};t.AttachmentfileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var e=this,t=e.disallowFileTypes.split(",");t.includes(e.AttachmentfileExt)?(e.checkFileValidExt=!1,e.ShowAlert(e.$t("InvalidFileUploadMsg",e.fileName,e.disallowFileTypes),"warning",!0,e.$t("Alert"))):e.checkFileValidExt=!0;var a=this.SizeToMb(e.AttachmentfileSize);if(a>parseInt(e.allowedPerFileSizeInMb,10)?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,a<0?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,1==e.checkFileValidExt&&1==e.checkFileValidSize){var i=JSON.stringify(e.AttachmentfileData);o["a"].UploadFile(i).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.Status?(e.ShowAlert(e.$t("Attachment successfully added"),"success",!0,e.$t("Alert")),e.DisplayName="",e.FileSrc="",$("input[type=text]").val(""),e.Close(),e.$emit("FetchAttachmentData"),e.$parent.noRecord=!1,e.callbackfunction()):(e.FileSrc="",$("input[type=text]").val(""))},(function(e){}))}},Close:function(){var e=this;e.FormSchemaData[0].Data[0].value=null,e.AttachmentfileName="",e.Attachmentfile=null,e.AttachmentfileData=null,e.FormSchemaData[0].Data[1].config.onChange=e.GetBase64String,e.$parent.showAttachmentModal=!1,"Attachments"==e.viewMode?document.getElementById("tab-attachment").click():e.$parent.FetchAttachmentData(),e.$parent.noRecord=!1}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"42ed":function(e,t,a){"use strict";a("14d9");var i=a("9769");let s=[{title:"Add Ticket",iconClass:"fa fa-plus",callbackfunction:"openaddTicket",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"},{title:"Assign Ticket",iconClass:"fa fa-user",callbackfunction:"ticketAssigned",additionalClass:"",isdisabled:!0,isvisible:!0,id:"AssignTicket",isEnabledOnSelectedRow:!0},{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Update Status",iconClass:"fa fa-cog",callbackfunction:"openupdateStatus",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"UpdateStatus",isEnabledOnSelectedRow:!0},{title:"Assign Tag",iconClass:"fa fa-tags",callbackfunction:"opentags",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"AssignTag",isEnabledOnSelectedRow:!0},{title:"Export To Excel",iconClass:"fa fa-file-excel-o",callbackfunction:"DownloadExcelDataNew",additionalClass:"",href:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isEnabledOnSelectedRow:!0}],o=[{fieldName:"Priority",fieldType:"radio",fieldIcon:"fa fa-list-ul",paramName:"priorityCode",fieldSearchConditionName:["TP.PRIORITY_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Location",fieldType:"text",fieldIcon:"fa fa-map-marker",fieldSearchConditionName:["TPIN.COUNTY","TPIN.PLACE","TPIN.ADDRNAME","TPIN.ADDRFROM","TPIN.DIGSTREET","TPIN.STATE"],isSearch:!1,paramName:"LocationValue",value:"",listOptions:[]},{fieldName:"Subject",fieldType:"text",fieldIcon:"fa fa-file",fieldSearchConditionName:["TICK.TICKET_SUBJECT"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Text",fieldType:"text",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["TICK.TICKET_TEXT"],paramName:"TicketText",isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Number",fieldType:"text",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["TICK.TICKET_NUMBER"],isSearch:!1,paramName:"ticketNumber",value:"",listOptions:[]},{fieldName:"Assigned To",fieldType:"radio",fieldIcon:"fa fa-user",paramName:"AssignedTo",fieldSearchConditionName:["TICK.Assigned_To"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["STS.STATUS_NAME"],isSearch:!1,paramName:"Status",value:"",listOptions:[]},{fieldName:"Close Date",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TICK.CLOSE_DATE"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Supervisor",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",paramName:"SupervisorId",fieldSearchConditionName:["TICK.SUPERVISOR"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Critical Approval",fieldType:"radio",fieldIcon:"fa fa-certificate",fieldSearchConditionName:[""],isSearch:!1,value:"",listOptions:[]},{fieldName:"Form Submit",fieldType:"radio",fieldIcon:"fa fa-wpforms",fieldSearchConditionName:["IsFormSubmitted"],paramName:"IsFormSubmitted",isSearch:!1,value:"",listOptions:[]},{fieldName:"Tags",fieldType:"radio",fieldIcon:"fa fa-wpforms",fieldSearchConditionName:["TagId"],paramName:"TagId",isSearch:!1,value:"",listOptions:[]},{fieldName:"Pending Acceptance",fieldType:"radio",fieldIcon:"fa fa-ticket",fieldSearchConditionName:["IsAccepted"],paramName:"IsAccepted",isSearch:!1,value:"",listOptions:[]},{fieldName:"Recurring Type",fieldType:"radio",fieldIcon:"fa fa-refresh",fieldSearchConditionName:["TICK.RecurringType"],paramName:"IsRecurring",isSearch:!1,value:"",listOptions:[]},{fieldName:"Open By",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",fieldSearchConditionName:["TICK.OpenByUser"],paramName:"OpenUserId",isSearch:!1,value:"",listOptions:[]},{fieldName:"Open Date",fieldType:"date",fieldIcon:"fa fa-calendar",fieldSearchConditionName:[""],paramName:"OpenDate",isSearch:!1,value:"",listOptions:[]},{fieldName:"Department",fieldType:"radio",fieldIcon:"fa fa-users",fieldSearchConditionName:["IsDepartment"],paramName:"IsDepartment",isSearch:!1,value:"",listOptions:[]},{fieldName:"Category",fieldType:"radio",fieldIcon:"fa fa-list-ul",fieldSearchConditionName:["IsCategory"],paramName:"IsCategory",isSearch:!1,value:"",listOptions:[]},{fieldName:"Contract",fieldType:"radio",fieldIcon:"fa fa-user-circle-o",fieldSearchConditionName:["IsClient"],paramName:"IsClient",isSearch:!1,value:"",listOptions:[]},{fieldName:"Product",fieldType:"radio",fieldIcon:"fa fa-columns",fieldSearchConditionName:["IsProduct"],paramName:"IsProduct",isSearch:!1,value:"",listOptions:[]}],l=[{title:"Accept",href:"javascript:void(0)",callbackfunction:"AcceptRejectTicket",icon:"fa fa-check action-icon",additionalSpan:""},{title:"Reject",href:"javascript:void(0)",callbackfunction:"AcceptRejectTicket",icon:"fa fa-close action-icon",additionalSpan:""},{title:"View on Map",callbackfunction:"openAddNewEvent",href:"javascript:void(0)",icon:"fa fa-map-marker",additionalSpan:"",class:"bg-secondary"},{title:"Edit",href:"javascript:void(0)",icon:"ffa action-icon fa fa-edit",additionalSpan:""},{title:"View Ticket",href:"javascript:void(0)",icon:"fa fa-ticket",callbackfunction:"openViewTicketTab",additionalSpan:"",class:"round-icon-small btn-info"},{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"openQuickViewpopup",additionalSpan:"",class:"round-icon-small btn-primary"},{title:"Follow-Up",callbackfunction:"ManageFollowUp",href:"javascript:void(0)",icon:"fa fa-flag",additionalSpan:"",class:"round-icon-small  btn-success"},{title:"View Recurring Detail",callbackfunction:"openViewRecurringTicket",href:"javascript:void(0)",icon:"fa fa-refresh",additionalSpan:"",class:"round-icon-small  btn-success"},{title:"Reopen",callbackfunction:"MarkAsActive",href:"javascript:void(0)",icon:"fa fa-check",additionalSpan:"",class:"round-icon-small btn-success"}];async function n(e,t,a,s,o){var l=e,n="moduleName=Ticketing&type="+a;if("Priority"==a)l.leftSearchFields[0].listOptions.push({name:"All("+o+")",value:""}),s.forEach(e=>{let t={name:e.mapping_name+"("+e.tab_count_data+")",value:e.tab_mapping_id};l.leftSearchFields[0].listOptions.push(t)});else if("TICKET_RESOLVER"==a)await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[5].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[5].listOptions.push(t)})});else if("Ticketing"==a){var r="statusType=Ticketing";await i["a"].GetFsmStatusDDLData(r).then(e=>{l.leftSearchFields[6].listOptions=[],e.data.forEach(e=>{let t={name:e.STATUS,value:e.STATUS};l.leftSearchFields[6].listOptions.push(t)})})}else if("TICKET_SUPERVISOR"==a)await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[7].listOptions=[],e.data&&e.data.hasOwnProperty("DATA")&&(l.leftSearchFields[7].listOptions.push({name:"All",value:"All"}),e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[7].listOptions.push(t)}))});else if("Critical Approval"==a){l.leftSearchFields[9].listOptions=[];let e={name:"ALL",value:"ALL"},t={name:"Approval Pending",value:"APPROVE_PENDING"},a={name:"Approved",value:"APPROVED"};l.leftSearchFields[9].listOptions.push(e),l.leftSearchFields[9].listOptions.push(t),l.leftSearchFields[9].listOptions.push(a)}else if("Form Submit"==a){l.leftSearchFields[8].listOptions=[];let e={name:"Yes",value:1},t={name:"No",value:0};l.leftSearchFields[8].listOptions.push(e),l.leftSearchFields[8].listOptions.push(t)}else if("TAG_DATA"==a)await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[9].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[9].listOptions.push(t)})});else if("Pending Acceptance"==a){l.leftSearchFields[10].listOptions=[];let e={name:"All",value:2},t={name:"Yes",value:1},a={name:"No",value:0};l.leftSearchFields[10].listOptions.push(e),l.leftSearchFields[10].listOptions.push(t),l.leftSearchFields[10].listOptions.push(a)}else if("Recurring Type"==a){l.leftSearchFields[11].listOptions=[];let e={name:"ParentRecurringTicket",value:1},t={name:"RecurringTicket",value:2};l.leftSearchFields[11].listOptions.push(e),l.leftSearchFields[11].listOptions.push(t)}else"FSM_USERS"==a?await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[12].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[12].listOptions.push(t)})}):"DEPARTMENT"==a?await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[14].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[14].listOptions.push(t)})}):"TICKET_CATEGORY"==a?await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[15].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[15].listOptions.push(t)})}):"CLIENT"==a?await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[16].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[16].listOptions.push(t)})}):"PRODUCT"==a&&await i["a"].GetDDLData(n).then(e=>{l.leftSearchFields[17].listOptions=[],e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[17].listOptions.push(t)})})}t["a"]={buttons:s,leftsearchSchema:o,listActions:l,bindleftCommonSearchdropdown:n}},"47f3":function(e,t,a){"use strict";a("2060")},5437:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Reply")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-xl-8"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.UploadFileWithReply,InvalidSubmit:e.checkError},scopedSlots:e._u([{key:"tgslot-Description",fn:function({data:a}){return[t("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady},model:{value:a.fieldInfo.value,callback:function(t){e.$set(a.fieldInfo,"value",t)},expression:"data.fieldInfo.value"}}),t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(a.error))])]}},{key:"tgslot-Subject",fn:function({data:a}){return[t("label",[e._v(e._s(a.fieldInfo.value)+" "+e._s(e.ticketSubject))])]}},{key:"tgslot-ReplyTo",fn:function({data:a}){return[t("label",[e._v(e._s(a.fieldInfo.value)+e._s(e.ticketReplyTo)+" ")])]}}])})],1),t("div",{staticClass:"col-xl-4 pl-xl-0 mt-md-2"},[t("div",{staticClass:"border no-padding h-100 bg-light"},[t("div",{staticClass:"theme-primary partition"},[t("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("Related Article")))])]),t("div",{staticClass:"info-list infolistheight"},[t("div",{staticClass:"col-sm-12 col-md-12 float-left"},[t("div",{staticClass:"row mt-0",staticStyle:{display:"flex"}},[t("div",{staticClass:"col-12 col-sm-8 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.articleText,expression:"articleText"}],staticClass:"form-control",attrs:{id:"txtRelatedArticleList",maxlength:"50",type:"text",placeholder:e.$t("Search by KeyWords"),autocomplete:"off"},domProps:{value:e.articleText},on:{keypress:e.SearchRelatedArticle,input:function(t){t.target.composing||(e.articleText=t.target.value)}}})])]),t("div",{staticClass:"col-12 col-sm-4 float-left pl-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left",staticStyle:{display:"flex"}},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:e.$t("Search"),id:"ancRelatedArticleList",href:"javascript:;"},on:{click:function(t){return e.EnterRelatedArticleText()}}},[t("i",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",id:"ancClearRelatedArticleList",title:e.$t("Clear")},on:{click:function(t){return e.resetRelatedArticleText()}}},[t("i",{staticClass:"fa fa-refresh"})])])])])]),t("div",{staticClass:"clearfix",staticStyle:{clear:"both"}}),t("div",{staticClass:"search-related-articles",staticStyle:{display:"none"}},[t("i",{staticClass:"fa fa-search"}),t("div",{staticClass:"clearfix"}),t("span",[e._v(e._s(e.$t("Lookforticketrelated")))])]),t("div",{staticClass:"listing mb-2",staticStyle:{"max-height":"530px","overflow-y":"auto"},attrs:{id:"divRelatedArticleList"}},e._l(e.ArticleList,(function(a){return t("div",{staticClass:"listing articlesList p-2"},e._l(a.ART,(function(a){return t("div",{staticClass:"listing articlesList p-2"},[t("p",{staticClass:"mb-0"},[t("span",{staticClass:"blue-time w-100 d-block"},[e._v(e._s(a.TICKET_ARTICLE_TITLE)+" "),t("a",{staticClass:"text-right float-right ancsetartticle single-action",on:{click:function(t){return e.SetArticleOnDesc(a)}}},[t("i",{staticClass:"fa fa-plus-circle"})])]),t("br"),t("span",{staticClass:"txt",domProps:{innerHTML:e._s(a.TICKET_ARTICLE_DESC)}})])])})),0)})),0)])])])])])])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),l=a("6930"),n=a.n(l),r=a("fb3d"),c=a.n(r),d=(a("d91b"),{components:{ckeditor:n.a.component},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{editor:c.a,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,file:null,ReplyTicketList:[],checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",ArticleList:[],TicketThreadId:null,TicketThreadToId:0,IsSupportTicket:!1,StatusCode:"",ticketSubject:"",articleText:"",ticketReplyTo:"",ticketModel:{transferDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",TicketThreadId:"",TicketThreadToId:0,RepliedBy:0,StatusCode:"",fileData:[]},FormSchema:[{layoutType:"double",Data:[{astype:"SlotField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:""},{astype:"SlotField",label:this.$t("Reply To"),name:"ReplyTo",value:"",placeholder:""}]},{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Canned Reply"),name:"CannedReply",value:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},placeholder:this.$t("Select Template"),validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"ListAttachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var e=this;this.configData(),e.FetchData()},methods:{SearchRelatedArticle:function(e){var t=e.key,a=this;a.ShowRelatedArticleList(t)},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},EnterRelatedArticleText:function(){var e=this,t=e.articleText;e.ShowRelatedArticleList(t)},resetRelatedArticleText:function(){var e=this;e.articleText="",e._data.FormSchema[3].Data[0].value="",e.ArticleList=[]},SetArticleOnDesc:function(e){var t=this;t._data.FormSchema[3].Data[0].value="",t._data.FormSchema[3].Data[0].value=e.TICKET_ARTICLE_TITLE+"<br>"+e.TICKET_ARTICLE_DESC},checkError:function(e,t){},onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},setFile:function(e){var t=this;t.file=e.target.files[0],t.FileName=e.target.files[0].name},onChangeTemplate:async function(e){var t=this;t.Description=e.target.value},ShowRelatedArticleList:async function(e){var t=this,a="search="+e;await o["a"].RelatedArticleList(a).then((function(e){null!=e.data&&(t.ArticleList=e.data.result.data)}))},FetchData:async function(){var e=this,t="ticketId="+e.id;await o["a"].AssignTransferTicket(t).then((function(t){null!=t.data&&(e.ReplyTicketList=t.data.data,e.TicketThreadToId=e.ReplyTicketList.ticketThreadToId,e.StatusCode=e.ReplyTicketList.ticketStatus,e.ticketSubject=e.ReplyTicketList.ticketSubject,e.ticketReplyTo=e.ReplyTicketList.ticketThreadToName,e.ReplyTicketList.replyTemplate.forEach((t,a)=>{e.FormSchema[1].Data[0].config.options.push({value:t.value,name:t.name})}))}))},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),o=a.name;t.fileName=o;var l=o.lastIndexOf("."),n=o.substring(l+1,o.length);t.fileExt+="."+n;var r='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;t.fileSize=c;var d={attachement_mime:r,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};t.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithReply:function(e,t){var a=this;if(""==a._data.FormSchema[3].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==vueObj.checkFileValidExt&&1==vueObj.checkFileValidSize){a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData,a.ticketModel.RepliedBy=a.TicketThreadToId,a.ticketModel.TicketThreadToId=a.TicketThreadToId,a.ticketModel.transferDescription=a._data.FormSchema[3].Data[0].value;var l=JSON.stringify(a.ticketModel);o["a"].TicketReply(l).then(e=>{try{null!=e.data&&""!=e.data&&"Success"==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Reply")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.Close(),a.callbackfunction()):(a.FileSrc="",a.Close(),$("input[type=text]").val(""))}catch(t){return HandleErrorOccured(t,"saveNote")}})}}},Close:function(){this.$parent.showReplyTicketModal=!1}}}),u=d,p=a("2877"),m=Object(p["a"])(u,i,s,!1,null,null,null);t["a"]=m.exports},5774:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"listing"},[t("div",{staticClass:"w-100",attrs:{id:"accordion"}},[e._l(e.groupByDate,(function(a,i,s){return t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("a",{class:{"card-link collapsed":s>1,"card-link":s<=1},attrs:{"data-toggle":"collapse",href:"#collapseOneThread"+s}},[t("div",{staticClass:"conversation-date heading-border"},[t("span",[e._v(e._s(e.$t(i)))])])])]),t("div",[t("div",{class:{collapse:s>1,"collapse show":s<=1},attrs:{id:"collapseOneThread"+s}},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"conversation-main"},[e._l(a,(function(a,i){return[t("div",{staticClass:"conversation-time"},[t("span",[e._v(e._s(e.$options.filters.formatTime(a.createdAt)))])]),t("div",{staticClass:"conversation-box-con"},[t("div",{staticClass:"conversation-box"},[e._m(0,!0),t("div",{staticClass:"conversation-header addednote-ticket"},[t("span",[t("span",{staticClass:"sender-name"},[e._v(e._s(a.actionPerformedByName))]),t("span",{staticClass:"sender-department"},[e._v("("+e._s(a.actionPerformedByDeptName)+")")])]),a.ticketAttachmentId>0?t("span",{staticClass:"header-action"},[t("a",{staticClass:"btn-primary downloadAttachement round-icon-split round-icon split",attrs:{id:a.ticketAttachmentId,title:e.$t("ClickHereDownloadAttachment"),alt:e.$t("DownloadFile"),href:"javascript:;",value:a.ticketAttachmentId,"data-isSupportTicket":a.isSupportTicket},on:{click:function(t){return e.DownloadAttachment(a)}}},[t("em",{staticClass:"fa fa-download"})])]):e._e()]),t("div",{staticClass:"conversation-content addednote-ticket"},[t("p",[e._v(e._s(e.SetMessage(a)))]),null!=a.threadDescription&&a.threadDescription.length>0?t("div",{staticClass:"addednote-ticket-content"},[t("div",{staticClass:"col-12 p-0 notesdata"},[t("div",{staticClass:"readmore"},[t("span",{domProps:{innerHTML:e._s(a.threadDescription)}})])])]):e._e()])])])]}))],2)])])])])})),e.NoRecords?t("div",{staticClass:"col-sm-12 col-md-12 text-center col-lg-12 mt-2 float-left p-0"},[t("span",{staticClass:"text-danger no-record"},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)])},s=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"name-circle text-white light-yellow"},[t("em",{staticClass:"fa fa-file",staticStyle:{"font-size":"18px","margin-top":"18px !important"},attrs:{"aria-hidden":"true"}})])}],o=(a("14d9"),a("9769")),l={props:{TicketThreads:{type:Array,required:!0}},data(){return{ThreadsList:[],UserType:null,UserId:null,NoRecords:!1}},computed:{groupByDate(){var e=this;let t={};return e.TicketThreads.forEach(e=>{let a=e.createdAt.substring(0,10);t[a]||(t[a]=[]),t[a].push(e)}),t}},created(){var e=this;e.UserId=e.GetUserInfo.ID,e.UserType=e.GetUserInfo.UserType},methods:{DownloadAttachment(e){var t=this;t.isLoading=!0;var a=`filePath=${e.fileSrc}&fileName=${e.fileName}`;o["a"].DownloadFile(a).then((function(a){t.isLoading=!1;const i=a.data,s=`data:${JSON.parse(e.fileMime).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",e.fileName),document.body.appendChild(o),o.click()}))},SetMessage:function(e){var t=this,a="";if("TICKET_TRANSFER"==e.statusCode&&e.currentStatus==e.priviousStatus&&"CA"!=t.UserType){var i="TICKET_TRANSFER";"A"==e.threadType&&(i="TICKET_ASSIGNED"),a=e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus:t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus:"CA"!=t.UserType&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+("TICKET_TRANSFER"==i?e.actionPerformedByDeptName:e.actionPerformedByName)+" "+t.$t("To")+" "+i=="TICKET_TRANSFER"?e.departmentName:e.currentStatus:""==e.currentStatus?t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.departmentName:t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus}else if("TICKET_TRANSFER"==e.statusCode&&e.priviousStatus.length>0&&"CL"!=t.UserType){i="TICKET_TRANSFER";"A"==e.threadType&&(i="TICKET_ASSIGNED");var s="";e.actionPerformedByName!=e.priviousStatus&&""!=e.priviousStatus&&(s=t.$t("From")+" "+e.priviousStatus),e.currentStatus.toUpperCase()==e.priviousStatus.toUpperCase()&&(s=""),a=e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus+" "+s:t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus+" "+s:"CA"!=t.UserType&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+i=="TICKET_TRANSFER"?e.actionPerformedByDeptName:e.actionPerformedByName+" "+t.$t("To")+" "+i=="TICKET_TRANSFER"?e.departmentName:e.currentStatus+" "+s:e.isSupportTicket&&e.threadCreatedBy!=t.UserId&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.departmentName+" "+s:t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus+" "+s}else if("TICKET_TRANSFER"==e.statusCode&&e.priviousStatus.length<=0&&"CL"!=t.UserType){i="TICKET_TRANSFER";"A"==e.threadType&&(i="TICKET_ASSIGNED");s="";if(e.actionPerformedByName!=e.priviousStatus&&""!=e.priviousStatus&&(s=t.$t("From")+" "+e.priviousStatus),e.currentStatus==e.priviousStatus&&(s=""),e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType)a=e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?t.$t(i)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus+" "+s:t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?e.departmentName:e.currentStatus+" "+s;else if("CA"!=t.UserType&&"SA"!=t.UserType){var o=e.currentStatus;""==o&&(o=e.TicketThreadTo),a=e.departmentName.toUpperCase()==o.toUpperCase()?t.$t(i)+" "+$t("By")+" "+e.departmentName:t.$t(i)+" "+$t("By")+("TICKET_TRANSFER"==i?e.actionPerformedByDeptName:e.actionPerformedByName)+" "+t.$t("To")+" "+("TICKET_TRANSFER"==i?e.departmentName:o+" "+s)}else a=t.$t(i)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentStatus?e.departmentName:e.currentStatus)+" "+s}else if(("TICKET_REPLY_SENT"==e.statusCode||"TICKET_REPLY_DRAFT"==e.statusCode)&&e.priviousStatus.length>0)"CL"==t.UserType&&"TICKET_REPLY_DRAFT"==e.statusCode?a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName:"CL"==t.UserType&&e.threadCreatedBy==t.UserId?a=t.$t("TICKET_REPLY_CL_SEND",[e.ticketNumber]):"CL"==t.UserType?a=t.$t("TICKET_REPLY_CL",[e.ticketNumber]):e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?(e.statusCode.toUpperCase()==e.departmentName.toUpperCase()&&(e.departmentName=e.actionPerformedByName),a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus):a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus:"CA"!=t.UserType||"SA"!=t.UserType?(e.statusCode.toUpperCase()==e.departmentName.toUpperCase()&&(e.departmentName=e.actionPerformedByName),a=e.statusCode.toUpperCase()==e.actionPerformedByName.toUpperCase()?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("To")+" "+e.departmentName+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus:e.isSupportTicket?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus):a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("And")+" "+t.$t("Cc")+" "+e.priviousStatus;else if(("TICKET_REPLY_SENT"==e.statusCode||"TICKET_REPLY_DRAFT"==e.statusCode)&&e.priviousStatus.length<=0)if("CL"==t.UserType&&"TICKET_REPLY_DRAFT"==e.statusCode)a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("CL"==t.UserType&&e.threadCreatedBy==t.UserId)a=t.$t("TICKET_REPLY_CL_SEND",[e.ticketNumber]);else if("CL"==t.UserType)a=t.$t("TICKET_REPLY_CL",[e.ticketNumber]);else{o=e.currentStatus;e.currentStatus!=e.departmentName&&""!=o||(o=e.TicketThreadTo),a=e.isSupportTicket&&e.threadCreatedBy!=t.UserId&&"SA"!=t.UserType?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:e.actionPerformedByName.toUpperCase()==e.currentStatus.toUpperCase()?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.departmentName:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus}else if("TICKET_SPLIT"==e.statusCode)a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_STATUS_CHANGE"==e.statusCode&&e.currentStatus==e.priviousStatus)a="CL"==t.UserType?t.$t("TICKET_STATUS_CHANGE_CL",[e.ticketNumber]):e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.threadCreatedBy==t.UserId&&"CL"!=t.UserType||e.threadCreatedBy==e.ticketCreatedBy?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:"CA"!=t.UserType&&"SA"!=t.UserType?e.threadCreatedBy==t.UserId&&"CL"!=t.UserType||e.threadCreatedBy==e.ticketCreatedBy?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus;else if("TICKET_STATUS_CHANGE"==e.statusCode&&e.priviousStatus.length>0)a="CL"==t.UserType?t.$t("TICKET_STATUS_CHANGE_CL",[e.ticketNumber]):e.threadCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.ticketCreatedBy==t.UserId&&"CA"!=t.UserType&&"SA"!=t.UserType?e.threadCreatedBy==t.UserId&&"CL"!=t.UserType||e.threadCreatedBy==e.ticketCreatedBy?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:"CA"!=t.UserType&&"SA"!=t.UserType?e.threadCreatedBy==t.UserId&&"CL"!=t.UserType||e.threadCreatedBy==e.ticketCreatedBy?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:e.isSupportTicket&&e.threadCreatedBy!=t.UserId&&"SA"!=t.UserType?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.departmentName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+e.currentStatus==""?"--":e.currentStatus+" "+t.$t("From")+" "+e.priviousStatus;else if("TICKET_CLOSED"==e.statusCode)a="CL"==t.UserType?t.$t("TICKET_STATUS_CHANGE_CL",[e.ticketNumber]):t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_FEEDBACK"==e.statusCode||"TICKET_NOTES_CREATED"==e.statusCode||"TICKET_NOTES_DELETED"==e.statusCode)a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_ETA_CHANGE"==e.statusCode)a="CL"==t.UserType?t.$t("TICKET_ETA_CHANGE_CL",[e.ticketNumber]):""!=e.priviousStatus?t.$t("TICKET_ETA_CHANGE_MESSAGE")+" "+e.actionPerformedByName+" "+t.$t("From")+" "+e.priviousStatus+" "+t.$t("To")+" "+e.currentStatus:t.$t("TICKET_ETA_UPDATE_MESSAGE")+" "+e.currentStatus+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_CONCLUSION"==e.statusCode)a="TICKET CONCLUSION DRAFT"==e.currentStatus?t.$t("Conclusion")+" "+t.$t("Drafted")+" "+t.$t("By")+" "+e.actionPerformedByName:t.$t("Conclusion")+" "+t.$t("Created_By")+" "+e.actionPerformedByName;else if("CLAIM_CREATED"==e.statusCode||"CLAIM_APPROVE"==e.statusCode||"CLAIM_REJECT"==e.statusCode)a="CLAIM DRAFT"==e.currentStatus||"TICKET_CLAIM_DRAFT"==e.currentStatus?t.$t("TICKET_CLAIM_DRAFT")+" "+t.$t("By")+" "+e.actionPerformedByName:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_CREATED"==e.statusCode&&e.onBehalfUser)a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName;else if("TICKET_CREATED"==e.statusCode&&""!=e.onBehalfUser)a=t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("OnBehalf")+" "+t.$t("of")+" "+e.onBehalfUser;else if("TICKET_PRODUCT_CHANGE"==e.statusCode)if("CL"==t.UserType)a=t.$t("TICKET_PRODUCT_CHANGE_CL",[e.ticketNumber]);else{var l=null;""!=e.previousProduct&&(l=" "+t.$t("From")+" "+e.previousProduct),a=t.isBlank(e.previousProduct)||e.previousProduct.toLowerCase()!=e.currentProduct.toLowerCase()?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Product"):e.currentProduct)+l:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Product"):e.currentProduct)}else if("TICKET_CATEGORY_CHANGE"==e.statusCode)if("CL"==t.UserType)a=t.$t("TICKET_CATEGORY_CHANGE_CL",[e.ticketNumber]);else{l=null;""!=e.previousProduct&&(l=" "+t.$t("From")+" "+e.previousProduct),a=t.isBlank(e.previousProduct)||e.previousProduct.toLowerCase()!=e.currentProduct.toLowerCase()?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Category"):e.currentProduct)+l:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Category"):e.currentProduct)}else if("TICKET_PRIORITY_CHANGE"==e.statusCode)if("CL"==t.UserType)a=t.$t("TICKET_CATEGORY_CHANGE_CL",[e.ticketNumber]);else{l=null;""!=e.previousProduct&&(l=" "+t.$t("From")+" "+e.previousProduct),a=t.isBlank(e.previousProduct)||e.previousProduct.toLowerCase()!=e.currentProduct.toLowerCase()?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Priority"):e.currentProduct)+l:t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("To")+" "+(""==e.currentProduct?t.$t("No")+" "+t.$t("Priority"):e.currentProduct)}else a="TICKET_MERGE"==e.statusCode?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName:"TICKET_ESCALATES_NEXT_LEVEL"==e.statusCode?t.$t("TICKET_ESCALATES_NEXT_LEVEL",[t.$t("Level")+" "+e.currentStatus,e.actionPerformedByName]):"TICKET_DELETED"==e.statusCode?"CL"==t.UserType?t.$t("TICKET_DELETED_CL",[e.ticketNumber]):t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName:"ADD_ATTACHMENT"==e.statusCode||"TICKET_ACCEPT"==e.statusCode||"TICKET_REJECT"==e.statusCode||"TICKET_WO_ADDED"==e.statusCode||"REPORT_INCIDENT"==e.statusCode||"DELETE_REPORT_INCIDENT"==e.statusCode||"EDIT_REPORT_INCIDENT"==e.statusCode?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName:"TICKET_WO_SUB_STATUS_CHANGED"==e.statusCode||"WO_STATUS_CHANGE"==e.statusCode?t.$t(e.statusCode)+" "+t.$t("By")+" "+e.actionPerformedByName+" "+t.$t("From")+" "+e.previousProduct+" "+t.$t("To")+" "+e.currentProduct:"TICKET_WO_STATUS_CHANGED_HIGH_PROFILE_WHILE_PARSING"==e.statusCode?t.$t(e.statusCode):"HIGH_PROFILE_EMAIL_NOTIFICATION"==e.statusCode?t.$t(e.statusCode,[e.ticketNumber,e.currentProduct]):"TICKET_ASSIGN_SMS"==e.statusCode?t.$t("Ticket_Assign_SMS",[e.ticketNumber,e.currentProduct]):"WORK_ORDER_FORM_NOTIFICATION"==e.statusCode||"CORNER_LOT_EMAIL_NOTIFICATION"==e.statusCode||"GAS_FACILITY_EMAIL_NOTIFICATION"==e.statusCode||"CAST_IRON_EMAIL_NOTIFICATION"==e.statusCode||"GAS_PRINT_ISSUE_EMAIL_NOTIFICATION"==e.statusCode?t.$t(e.statusCode)+" "+e.threadType+" "+t.$t("By")+" "+e.actionPerformedByName:"PL_FORM_NOTIFICATION_HAS_BEEN_SENT"==e.statusCode?e.threadType:"WORK_ORDER_FORMS_ACCEPT"==e.statusCode?"Work Order Forms accepted "+t.$t("By")+" "+e.actionPerformedByName:"WORK_ORDER_FORMS_REJECT"==e.statusCode?"Work Order Forms rejected "+t.$t("By")+" "+e.actionPerformedByName:t.$t("AssignedTo")+" "+e.actionPerformedByName+" "+e.departmentName;return a}}},n=l,r=(a("47f3"),a("2877")),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"5e28":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("QuickView"))+" ")]),t("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"container-fluid p-3",attrs:{id:"quickViewData"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-5 mb-2"},[t("div",{staticClass:"p-2 bg-grey text-center"},[t("b",{staticClass:"font-weight-medium"},[e._v(e._s(e.$t("TicketNumber"))+":")]),e._v(" "+e._s(e.TicketNumber)+" ")])]),(e.IsFsmLocating,t("div",{staticClass:"col-lg-5 mb-2"},[t("div",{staticClass:"p-2 bg-grey text-center"},[t("b",{staticClass:"font-weight-medium"},[e._v(e._s(e.$t("Location"))+":")]),e._v(" "+e._s(e.TicketLocation))])])),t("div",{staticClass:"col-lg-2 mb-2"},[t("div",{staticClass:"p-2 bg-info text-center"},[(e.IsFieldService,t("RouterLink",{staticClass:"text-white",attrs:{to:"/Ticketing/Manage/"+e.NumericTicketId,title:e.$t("ViewDetail")}},[t("i",{staticClass:"fa fa-eye pr-2"}),e._v(e._s(e.$t("ViewDetail"))+" ")]))],1)])]),"FSM"==e.ticketType?t("div",{staticClass:"col-lg-12 mb-2"},[t("MapComponent",{key:e.componentKey,staticClass:"row",attrs:{mapType:"MapBox",mapContainer:"quickViewMapDiv",Data:e.mapObj,mapWidth:"1552px",mapHeight:"200px"}})],1):e._e()]),t("div",{staticClass:"accordion custom-accr m-3",attrs:{id:"accordionExample"}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingOneQV"}},[t("a",{attrs:{"data-toggle":"collapse","data-target":"#collapseQV","aria-expanded":"true","aria-controls":"collapseOn"},on:{click:function(t){return e.openTicketDetailTab()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("TicketDetail"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseQV","aria-labelledby":"headingQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},e._l(e.LeftViewData,(function(a,i){return t("div",{key:i,staticClass:"row px-2",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[t("div",{staticClass:"light-greybg w-100 mb-2 font-weight-bold mb-2 p-2"},[e._v(" "+e._s(e.$t(a.group_name,""))+" ")]),e._l(a.LeftViewData,(function(a){return t("p",{staticClass:"col-6"},["YES"==a.form_field_visibility?[t("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),t("span",{staticClass:"pl-1 font-weight-bold",attrs:{"data-visible":a.name+" "+a.form_field_visibility}},[e._v(e._s(e.$t(a.display_name))+": ")]),t("span",{domProps:{innerHTML:e._s(a.value)}})]:e._e()],2)}))],2)})),0)])]),""!=e.ShowOneCallSource?t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"headingOneQV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseOneQV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(t){return e.openTicketTextTab()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("TicketText"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapseOneQV","aria-labelledby":"headingOneQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},[""!=e.TicketTextDetail?t("pre",{domProps:{innerHTML:e._s(e.TicketTextDetail)}}):e._e(),""==e.TicketTextDetail?t("div",{staticClass:"col-12 text-center text-danger"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])])]):e._e(),0==e.isViewMode?t("div",{staticClass:"card"},[t("div",{staticClass:"card-header positionrelative",attrs:{id:"headingTwoQV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapseTwoQV","aria-expanded":"false","aria-controls":"collapseTwo"},on:{click:function(t){return e.LoadNotesForQuickView("FSM")}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Notes"))+" ")]),0==e.isViewMode&&e.showAddButton?t("a",{staticClass:"accordian-header-button btn btn-success addnotes",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample4",title:e.$t("AddNote")},on:{click:function(t){return e.LoadTicketTabData("addnotes",e.NumericTicketId,"FSM")}}},[t("i",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("AddNote")))]):e._e()]),t("div",{staticClass:"collapse",attrs:{id:"collapseTwoQV","aria-labelledby":"headingTwoQV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"w-100"},[t("div",{staticClass:"w-100"},[e.isShowAddNote?t("AddNoteData",{attrs:{id:e.sourceId,modulename:"Ticketing",submodulecode:"Ticketing",configdata:e.ConfigData,callbackfunction:e.LoadNotesForQuickView,HeaderName:e.$t("AddNotes")}}):e._e()],1)]),t("div",{staticClass:"pb-2",attrs:{id:"div_NotesLabel"}},[t("span",{staticClass:"legend-Progress colorboxsquare"}),e._v(e._s(e.$t("Private"))+" "),t("span",{staticClass:"legend-upcoming colorboxsquare ml-3"}),e._v(e._s(e.$t("Public"))+" ")]),e.NoteList.length>0?t("div",{staticClass:"w-100",attrs:{id:"tab-notes-content-quickview"}},[t("TicketNotes",{attrs:{NoteData:e.NoteList,ListNoteData:e.ListNoteData}})],1):e._e(),e.noRecord?t("div",{staticClass:"text-danger text-center d-block no-record"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()])])]):e._e(),0==e.isViewMode&&"NU"!=e.UserType?t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"heading3QV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse3QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(t){return e.LoadThreads()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Activities"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapse3QV","aria-labelledby":"heading3QV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body w-100 float-left"},[e.ThreadDetail.length>0?t("div",{staticClass:"w-100 activity-tab",attrs:{id:"divconversationbox-quickview"}},[t("ThreadsList",{attrs:{TicketThreads:e.ThreadDetail}})],1):e._e()])])]):e._e(),"Field Service"==e.IsFieldService?t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"heading4QV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse4QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(t){return e.FetchWorkOrderData()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("WorkOrder"))+" ")])]),t("div",{staticClass:"collapse",attrs:{id:"collapse4QV","aria-labelledby":"heading4QV","data-parent":"#accordionExample"}},[t("div",{staticClass:"card-body"},[t("div",{staticClass:"w-100",attrs:{id:"tab-workorder-content"}},[t("FsmworkOrder",{attrs:{workorderlist:e.WorkOrderList,sourceIds:e.sourceId,submodulecode:"Ticketing",modulename:"Ticketing"}})],1),t("div",{staticStyle:{clear:"both"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.WoTotalRecords>10,expression:"WoTotalRecords > 10"}],staticClass:"w-100"})])])]):e._e(),t("div",{staticClass:"card"},[t("div",{staticClass:"card-header",attrs:{id:"heading5QV"}},[t("a",{staticClass:"collapsed",attrs:{"data-toggle":"collapse","data-target":"#collapse5QV","aria-expanded":"false","aria-controls":"collapseOne"},on:{click:function(t){return e.FetchAttachmentData()}}},[t("i",{staticClass:"fa fa-angle-down rotate-icon mr-1",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Attachments"))+" ")]),e.showAddButton?["TICKET_CLOSED"!=e.TicketStatus&&"TICKET_CLOSEDLOCKED"!=e.TicketStatus?t("a",{staticClass:"accordian-header-button btn btn-success float-right mb-1",attrs:{"data-toggle":"collapse",href:"#collapseAddNotesData",role:"button","aria-expanded":"true","aria-controls":"collapseExample6",title:"Add Attachment"},on:{click:function(t){return e.openAttachmentModel()}}},[t("i",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("Attachment")))]):e._e()]:e._e()],2),t("div",{staticClass:"collapse",attrs:{id:"collapse5QV","aria-labelledby":"heading5QV","data-parent":"#accordionExample"}},[e.showAddButton?t("div",{staticClass:"card-body float-left w-100"},[t("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxFile"}}),t("div",{staticClass:"col-12 p-0 d-flex flex-wrap scroll",attrs:{id:"divAttachment"}},[e.showAttachmentModal?t("ShowTicketAttachmentData",{attrs:{id:e.sourceId,configdata:e.ConfigData,callbackfunction:e.FetchAttachmentData,modulename:"Ticketing",submodulecode:"Ticketing"},on:{close:function(t){e.showAttachmentModal=!1}}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Attachments")))])]):e._e(),null!=e.AttachmentList?t("div",{staticClass:"listing pt-1"},[t("TicketAttachment",{attrs:{AttachmentData:e.AttachmentList,ListViewAttachment:e.ListViewAttachment},on:{"open-image":e.openSpecificImage}})],1):e._e(),e.noRecord?t("div",{staticClass:"text-danger text-center no-record float-left w-100"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()],1)]):e._e()]),e.visible?t("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:e.galleryImages,customClasses:e.lightboxClasses},on:{close:function(t){e.visible=!1}}}):e._e()],1)])])])])],1)])},s=[],o=(a("14d9"),a("9769")),l=a("0c69"),n=a("5774"),r=a("fc96"),c=a("33e4"),d=a("6481"),u=function(){var e=this,t=e._self._c;return t("section",[t("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"FSM_WorkOrder",LegendArray:[],widgets:[],IdentityColumn:"id",listType:["List"],HeaderText:e.$t("Wokr Order"),ListData:e.WorkOrderList,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SortExp:e.SortExp,SortBy:e.SortBy,RenderRowActionMethod:e.renderActions,NorecordfoundText:e.$t("NoRecordfound")},on:{ActionButtonClick:e.actionButtonClick,PagerButtonClick:e.pagerMethod},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[t("td",{staticClass:"text-center single-action tourguide_a"},[t("span",{class:e.getStatusClass(a.row.status_id,"status_id")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")])])]:e._e()]}}])})],1)},p=[],m=a("b0dd"),f={components:{},props:{workorderlist:{type:Array,required:!1}},watch:{workorderlist:function(e){this.WorkOrderList=e,this.IsListView=this.$parent.IsListView}},data(){return{WorkOrderList:[],TotalRecords:0,PageSize:10,PageNumber:1,CurrentPage:1,SortBy:"",SortExp:"",IsInSlot:!0,listheaderbuttons:null,listActions:m["a"].workOrderlistActions,Headers:[{COLUMN_NAME:"workorder_number",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WO NUMBER",DISPLAY_ORDER:1},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"worktype_name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"WO Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"work_order_date",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Order Date",DISPLAY_ORDER:4},{COLUMN_NAME:"comment",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Comment",DISPLAY_ORDER:5},{COLUMN_NAME:"zone_name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"High Profile Zone Name",DISPLAY_ORDER:6},{COLUMN_NAME:"is_submited",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Form Submitted",DISPLAY_ORDER:7}]}},updated:function(){this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber},actionButtonClick:function(e,t,a,i){switch(e){case"Edit":break;case"OpenFileModal":this.OpenFileModal(t);break;case"ManageFollowUp":this.ManageFollowUp(t.ticket_id,t);break;case"openQuickViewpopup":this.openQuickViewpopup(t.ticket_id,t.str_ticket_id,t.ticket_category_id);break}},getStatusClass:function(e){var t="";switch(e){case"Active":t="px-2 text-center bg-success text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;case"Open":t="px-2 text-center bg-success text-white d-block";break;default:t=""}return t},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(i=>{let s={...i};switch(s.title){case"Detail":s.isVisible=1==t.IsInSlot&&""==e.TICKET_AR_TYPE&&0==e.IS_SHOW_ACCEPT_REJECT;break;case"Update Status":s.isVisible=1==t.IsInSlot&&""==e.TICKET_AR_TYPE&&0==e.IS_SHOW_ACCEPT_REJECT;break;default:s.isVisible=!0}a.push(s)}),a}}},h=f,g=a("2877"),v=Object(g["a"])(h,u,p,!1,null,null,null),_=v.exports,C=a("3e91"),S=a("e8b2"),y={components:{TicketNotes:l["a"],ThreadsList:n["a"],TicketAttachment:r["a"],MapComponent:c["a"],FsmworkOrder:_,AddNoteData:d["a"],ShowTicketAttachmentData:C["a"],VueEasyLightbox:S["a"]},mounted(){const e=document.querySelector("#headingOneQV a");e&&e.click()},props:{sourceIds:{type:Number,required:!0},EncryptTicketId:{type:String,required:!1},isFileServiceIds:{type:String,required:!1},isTicketType:{type:String,required:!1}},data(){return{ListViewAttachment:0,ListNoteData:0,moduleName:"FSM",isLoading:!1,IsFsmLocating:"normal",TicketId:"",NumericTicketId:"",IsSupportTicket:"",TicketStatus:"",TicketARType:"",IsShowAcceptReject:"",IsFieldService:"",OneCallSource:"",IsFSMVIEWMODE:"",isShowAddNote:!1,TicketTextDetail:"",WorkOrderList:[],noRecord:!1,WoTotalRecords:0,showUnauthorizedMessage:!0,TicketNumber:"",TicketLocation:"",AttachmentList:[],galleryFilesView:[],galleryImages:[],visible:!1,index:0,showAttachmentModal:!1,IsListView:!1,isView:1,isViewMode:0,currentObject:null,PageSize:10,PageNumber:1,CurrentPage:1,GroupStart:1,GroupEnd:3,ConfigData:[],showUpdateStatusHistoryModal:!1,showTrackHistoryModalList:!1,WorkOrderId:0,showUpdateStatusModal:!1,WorkOrderTicketIdForEdit:null,WorkOrderOneCallCenter:null,WorkOrderItemName:null,TicketStatus:"TicketStatus",ShowOneCallSource:"",LeftViewData:[],showAddButton:!0,NoteList:[],ThreadDetail:[],UserId:null,UserType:null,mapObj:[],componentKey:0,ticketType:null,TicketFileSize:0,TicketDisallowedFileTypes:null}},created:async function(){var e=this;e.UserType=e.GetUserInfo.UserType,e.IsFieldService=e.isFileServiceIds,e.UserId=e.GetUserInfo.ID,e.sourceId=e.sourceIds,e.NumericTicketId=e.EncryptTicketId,e.ticketType=e.isTicketType,await e.fetchTicketData()},methods:{openSpecificImage(e,t){var a=this,i={path:e,caption:t.split(".")[0]};a.galleryImages.push(i)},openVideoPlayer:function(e,t,a,i){$("#div_ShowGpxFile").html(""),$.ajax({url:"/FSM/ShowGpxPlayer",contentType:"application/html; charset=utf-8",type:"GET",dataType:"html",data:{videoFilePath:e,videoFileName:t,videoFileType:a,gpxFilePath:i}}).success((function(e){$("#div_ShowGpxFile").html(e),setTimeout((function(){$("#div_ShowGpxFile .dDataDropZone").prepend("<span class='closePlayer' style='position: absolute;right: -6px;top: -9px;background:#fff;padding:2px;width:25px;height:25px;text-align:center;border-radius:100%; cursor:pointer;'><i class='fa fa-times-circle fa-size text-danger'></i></span>"),$("#div_ShowGpxFile .dDataDropZone span.closePlayer").on("click",(function(){$("#div_ShowGpxFile").html("")}))}),100)}))},formatDateTime(e){if(e)try{var t=Globalize.culture().calendar.patterns.t;t=String(t).replace("t","A").replace("t","");var a=new Date(moment(String(e)).year(),moment(String(e)).month(),moment(String(e)).date(),moment(String(e)).hours(),moment(String(e)).minutes());return moment(a,"YYYY-MM-DD HH:mm:ss").format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(t))}catch(i){t=Globalize.culture().calendar.patterns.t;return t=String(t).replace("t","a").replace("t",""),moment(String(e)).format(String(Globalize.culture().calendar.patterns.d).toUpperCase()+" "+String(t))}},convertToTimeFormatHHMMSS(e){const t=parseInt(e,10);let a=Math.floor(t/3600),i=Math.floor((t-3600*a)/60),s=t-3600*a-60*i;return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),a+":"+i+":"+s},openTicketTextTab:function(){var e=`TicketId=${this.sourceId}&formId=`;o["a"].GetTicketText(e).then((function(e){null!=e.data&&"Success"==e.data.status&&(vueObj.TicketTextDetail=e.data.result.DATA[0].TICKETTEXT)}))},handleHide:function(){this.visible=!1},openTicketDetailTab:function(){var e=this;e.isLoading=!0;var t=`str_ticket_id=${e.sourceId}&moduleName=Ticketing&subModuleCode=Ticketing`;o["a"].ViewPageDetails(t).then((function(t){if(e.isLoading=!1,null!=t.data.result){var a=t.data.result.LEFTDATA;if(e.ConfigData=t.data.result.CONFIG_DATA,a=$.grep(a,(function(t,a){return"normal"==e.IsFsmLocating||"Field Service"==e.IsFieldService?"ticket_subject"==t.name||"priority_id"==t.name||"ticket_category_id"==t.name||"ticket_department_id"==t.name||"assigned_to"==t.name||"status_id"==t.name||"Description"==t.name?t.form_field_visibility="YES":t.form_field_visibility="NO":"ticket_subject"==t.name||"priority_id"==t.name||"ticket_category_id"==t.name||"City"==t.name||"ticket_department_id"==t.name||"AddrFrom"==t.name||"assigned_to"==t.name||"status_id"==t.name||"County"==t.name||"State"==t.name||"TypeofWork"==t.name||"Description"==t.name||"DigStreet"==t.name||"Place"==t.name||"Zip"==t.name||"Notes"==t.name?t.form_field_visibility="YES":t.form_field_visibility="NO","YES"==t.form_field_visibility})),"1"==t.data.result.IS_WORKORDER_COMPLETE?e.noStatus=!1:e.noStatus=!0,null!=a&&a.length>0){var i=a[0].group_id;$.each(a,$.proxy((function(t,s){"ticket_number"==s.name&&(e.TicketNumber=s.value),"TypeofWork"==s.name&&(e.TicketName=s.value),i=s.group_id;var o=$.grep(e.LeftViewData,(function(e,t){return e.group_id==i}));if(0==o.length){var l=$.grep(a,(function(e,t){return e.group_id==i}));if(l.length>0){var n={group_id:i,group_name:l[0].group_name,LeftViewData:l};e.LeftViewData.push(n)}}}),this)),console.log(e.LeftViewData)}setTimeout(()=>{e.SetResponsiveTab(),e.RadioButtonBootstrap()},500)}}))},FetchWorkOrderData:async function(){var e=this,t="ticketId="+e.sourceId;await o["a"].WorkOrderList(t).then((function(t){"Success"==t.data.status&&(e.WorkOrderList=t.data.result.data,null!=e.WorkOrderList&&e.WorkOrderList.length>0?(e.WoTotalRecords=t.data.result.data[0].TOTALRECORDS,e.noRecord=!1):(e.WoTotalRecords=0,e.noRecord=!0)),setTimeout((function(){e.CheckBoxBootstrap()}),100),setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},LoadThreads:async function(){var e=this;e.isLoading=!0;var t=`ticketId=${e.NumericTicketId}&isFor=${e.moduleName}&isView=1`;await o["a"].GetTicketById(t).then((function(t){e.isLoading=!1,null!=t.data&&(e.ThreadDetail=t.data.ticket.ticketThreads,console.log(e.ThreadDetail))}))},getExtension:function(e){e=String(e).toLowerCase();var t=e.split(/[\\/]/).pop(),a=t.lastIndexOf(".");return""===t||a<1?"":(t=t.slice(a+1),t="png"==t||"jpeg"==t||"jpg"==t||"gif"==t||"bmp"==t?"image":"doc"==t||"docx"==t?"word":"xls"==t||"xlsx"==t||"csv"==t?"excel":"mp3"==t||"wav"==t?"audio":"webm"==t||"mov"==t||"mpv"==t||"mp4"==t?"movie":"pdf"==t?"pdf":"txt",t)},showImg:function(e){this.index=e,this.visible=!0,$("#div_ShowGpxFile").html("")},handleHide:function(){this.visible=!1},downloadAttachment:function(e){$.download('@Url.Action("DownloadFile", "Ticketing", new { area = "" })',"fileId="+e.TICKET_ATTACHMENT_ID+"&filePath="+e.FILE_PATH+"&fileType="+e.ATTACHMENT_DESC+"&fileName="+e.ATTACHMENT_NAME+"&downloadType=single","Get")},openAttachmentModel:function(){var e=this;e.showAttachmentModal=!0,$("#divAttachment").scrollTop(0)},FetchAttachmentData:function(){var e=this;e.galleryImages=[],e.AttachmentList=[],e.galleryFilesView=[];var t="ticketId="+e.sourceId;o["a"].GetTicketFiles(t).then((function(t){"Success"==t.data.status?(e.AttachmentList=t.data.result.DATA,e.ListViewAttachment=1,null!=e.AttachmentList&&e.AttachmentList.length>0?e.galleryFilesView=$.grep(e.AttachmentList,(function(t,a){return e.noRecord=!1,"pdf"!=JSON.parse(t.attachment_desc).Extension&&"word"!=JSON.parse(t.attachment_desc).Extension&&"excel"!=JSON.parse(t.attachment_desc).Extension&&"txt"!=JSON.parse(t.attachment_desc).Extension})):e.noRecord=!0):(e.AttachmentList=null,e.noRecord=!0)}))},LoadTicketTabData:function(e,t,a){var i=this;if(""!=e){"addnotes"==e&&"/Ticketing/EditNote";var s=[];s.push({name:"ticketId",value:t}),"addnotes"!=e&&"transfer"!=e||s.push({name:"moduleName",value:a});var l=JSON.stringify(s);o["a"].EditNote(l).then(e=>{1003==e.TicketStatusId?($("#divloadticketdata").empty().html(""),ShowAlert(Globalize.localize("SorryThetickethavebeendeleted"),"failure",!0,Globalize.localize("Alert"),!0)):("FSM"==a&&($("#hdnissupttckt").val("@ViewBag.IsSupportTicket"),$("#divloadticketdata").removeClass("hide").addClass("show"),$("#div_NotesLabel").addClass("d-none"),$("#tab-notes-content-quickview").addClass("d-none"),i.isShowAddNote=!0,$("#divNotes").scrollTop(0)),$("#divloadticketdata").show().empty().html(e.data),$("#divNotes").scrollTop(0))})}},fetchTicketData:function(){var e=this;e.isLoading=!0,o["a"].ViewFSMTicketDetails("id="+e.sourceId).then((function(t){e.mapObj=[];var a={latlong:t.data.result.LOCATION_NW,refValue:t.data.result.TICKETNUMBER,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:t.data.result.LOCATION_NW,longitude:t.data.result.LOCATION_NW},polygons:[{name:"",latLong:[{latitude:t.data.result.LOCATION_NW,longitude:t.data.result.LOCATION_NW}]}],address:t.data.result.FORMATED_ADDRESS,priority:"",color_code:""};if(e.mapObj.push(a),e.isLoading=!1,null!=t.data.result&&(e.TicketLocation=t.data.result.FORMATED_ADDRESS,e.TicketNumber=t.data.result.TICKETNUMBER,e.TicketStatus=t.data.result.STATUS_CODE),null!=t.data.result&&"Google"==t.data.result.Type){var i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){initializeGoolgeMap("Google",t.data.result.API_KEY,t.data.result)},i.src="https://maps.googleapis.com/maps/api/js?key="+t.data.result.API_KEY+"&libraries=places",document.getElementsByTagName("head")[0].appendChild(i)}else if(null!=t.data.result&&"MapBox"==t.data.result.Type){i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){LoadMapBox("MapBox",t.data.result.API_KEY,t.data.result)},i.src="//api.mapbox.com/mapbox-gl-js/v1.8.0/mapbox-gl.js",document.getElementsByTagName("head")[0].appendChild(i);var s=document.createElement("script");s.type="text/javascript",s.src="//api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js",document.getElementsByTagName("head")[0].appendChild(s)}else{i=document.createElement("script");i.type="text/javascript",i.readyState?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||(i.onreadystatechange=null)}:i.onload=function(){},i.src="//unpkg.com/leaflet@1.6.0/dist/leaflet.js",document.getElementsByTagName("head")[0].appendChild(i);s=document.createElement("script");s.type="text/javascript",s.src="/Scripts/FsmMaps/dist/leaflet_markerclusterer.js",document.getElementsByTagName("head")[0].appendChild(s)}}))},fetchTicketDetail:async function(){var e=this,t="ticketId="+e.sourceId;await o["a"].ViewTicketDetails(t).then((function(t){null!=t.data&&"Success"==t.data.status?e.ShowOneCallSource=t.data:e.noRecord=!0}))},LoadNotesForQuickView:async function(e){var t=this;t.isLoading=!0,null!=e&&"undefined"!=e||(e=t.moduleName);var a=`ticketId=${t.sourceId}&isSuptTckt=false&moduleName=${e}&isView=1`;await o["a"].GetWorkOrderNoteList(a).then((function(e){t.isLoading=!1,null!=e.data&&e.data.length>0?(t.NoteList=e.data,t.ListNoteData=1,$("#tab-notes-content-quickview").removeClass("d-none")):($("#div_NotesLabel").removeClass("d-none"),t.noRecord=!0,t.isLoading=!1),t.isLoading=!1})),t.isLoading=!1}}},b=y,T=(a("dbc9"),Object(g["a"])(b,i,s,!1,null,"e5b6f540",null));t["a"]=T.exports},"5e2a":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'.mapboxgl-popup-content button.mapboxgl-popup-close-button{font-size:23px;top:3px}.mapboxgl-popup{width:340px;max-width:340px!important}.leaflet-popup-content .popupcontent{background:#fff}.leaflet-left .leaflet-control-zoom{display:none}.leaflet-marker-icon{border-radius:100%!important}.leaflet-popup-content p{margin:auto!important}.leaflet-popup-content-wrapper{padding:0!important}.leaflet-popup-content{margin:auto!important;line-height:1.4!important;width:340px!important}.leaflet-container a.leaflet-popup-close-button{color:#5c5c5c!important;padding:6px 5px 0 0!important}.gm-style-iw.gm-style-iw-c{background-color:#fff!important;padding-right:0!important;padding-bottom:0!important;max-width:648px!important;min-height:150px!important;padding:0!important;width:340px!important;border-radius:0}.gm-style-iw.gm-style-iw-c button.gm-ui-hover-effect{background:0 0!important;display:block!important;font-size:18px!important;border:0!important;margin:0!important;padding:0!important;position:absolute!important;cursor:pointer!important;-webkit-user-select:none!important;-moz-user-select:none!important;user-select:none!important;top:-6px!important;right:-6px!important;width:36px!important;height:40px!important}.gm-style-iw.gm-style-iw-c .gm-style-iw-d{overflow:hidden!important;width:100%!important}.gm-style-iw.gm-style-iw-c #content{padding:0!important;transition:all .3s;width:100%}.gm-style-iw.gm-style-iw-c .map-pop-header{color:#fff}.gm-style-iw.gm-style-iw-c .map-pop-header.Medium{background:#4cb4fb}.gm-style-iw.gm-style-iw-c .map-pop-header.Low{background:#4db567}.gm-style-iw.gm-style-iw-c .map-pop-header.High{background:#fbc648}.gm-style-iw.gm-style-iw-c .map-pop-header.Critical{background:#ef8934}.gm-style-iw.gm-style-iw-c .map-pop-header.highprofile{background:#de0303}.gm-style-iw.gm-style-iw-c .firstHeading{font-size:16px;display:flex;align-items:center;padding:5px 10px}.gm-style-iw.gm-style-iw-c .status{font-size:12px;background:#5c5c5c;font-weight:400;color:#fff;padding:4px 6px;margin-left:5px}.gm-style-iw.gm-style-iw-c p.details{display:flex;width:100%;font-weight:bolder;font-size:14px;padding:5px 10px;margin-bottom:4px}.gm-style-iw.gm-style-iw-c p.details span{font-size:12px;font-weight:400;text-transform:capitalize}.gm-style-iw.gm-style-iw-c .view-details{display:flex;width:100%;font-weight:bolder;font-size:14px;margin-bottom:0;border-top:2px solid #bfbfbf;flex-direction:row}.gm-style-iw.gm-style-iw-c .view-details a{padding:0 5px;margin-right:5px;color:#525e65}.mapboxgl-popup-content{padding:0!important}.mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.mail-box-pop .modal-dialog{max-width:570px!important;min-height:500px!important}.mail-box-pop.eta .modal-dialog{max-width:1200px!important;min-height:500px!important}.mail-box-pop.eta .modal-body{max-height:800px!important;height:800px!important}.motabod{border-right:10px solid #e5e5e5}.movedivider{background-repeat:no-repeat;background-position:0 0;width:37px;height:57px;position:absolute;z-index:999;right:-24px;top:160px;display:none}tr.bg-danger{background-color:#f7ccd0!important}.ui-resizable-handle{z-index:9999}.custom-tab-content ul.responsive-tabs.fsmtabcontrol li a{padding:10px}.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input-remove:after,.tags-input-remove:before{background:#fff!important}div[aria-describedby=divticketquickview] .modal-dialog{max-width:85%!important}ul.tags_fsm{float:left;margin:0;padding:0}ul.tags_fsm li{float:left;margin:0 5px 5px 0;padding:0 8px;display:inline-block;color:#fff;border-radius:5px!important;font-size:12px}.tags-input span{margin-bottom:.3em}.circle-leaflet{width:55px!important;height:55px!important;line-height:55px;background-image:url(https://talygenv.github.io/Vue-UI-Content/images/Ticketing/m2.png)!important;text-align:center!important;font-weight:700!important;position:absolute!important;top:-22px!important;left:-19px!important}.table-heading-wb .table-head-btn{padding:.5rem}.gmnoprint{right:0!important;left:auto!important}.bg-gray-faint{position:relative;background-color:#fff!important;font-family:Open Sans,sans-serif;padding:8px 16px!important;margin-top:55px!important;border:1px solid #2196f3;margin-left:12px!important}.bg-gray-faint:after{color:#2196f3;content:"\\f0d8";position:absolute;font:normal normal normal 14px/1 FontAwesome;top:-19px;left:10%;font-size:27px}.checkbox-container>input,.radio-container>input,.switch-container>input,.toggle-container>input{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap}.txt-m{font-size:15px;line-height:24px;margin-top:0;margin-bottom:0}.toggle-group{display:inline-flex;text-align:center;border-radius:18px}.toggle-container{display:block;max-width:100%}input:checked+.toggle{background:#448ee4;color:#fff}.toggle{flex-shrink:0;cursor:pointer;color:#999;font-weight:700;font-size:12px;padding:6px 18px;border-radius:18px!important;background-color:transparent;transition:color .125s,background-color .125s}.switch{position:relative;display:inline-block;width:60px;height:31px;margin:0 10px}.switch input{opacity:0;width:0;height:0}.sliderchk{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ccc}.sliderchk,.sliderchk:before{position:absolute;transition:.4s}.sliderchk:before{content:"";height:24px;width:24px;left:6px;bottom:4px;background-color:#fff}input:checked+.sliderchk{background-color:#2196f3}input:focus+.sliderchk{box-shadow:0 0 1px #2196f3}input:checked+.sliderchk:before{transform:translateX(26px)}.sliderchk.round{border-radius:34px!important}.sliderchk.round:before{border-radius:50%}.textname{top:29px;position:absolute;left:4px;font-size:13px;color:#999;font-weight:700}.timelegend{height:10px;padding:0 15px;display:inline-block}.timelegend.min10{background-color:#96d52d}.timelegend.min20{background-color:#f0c141}.timelegend.min30{background-color:#f18d76}.showduration{float:left;color:#565656!important;position:absolute;left:4px;top:0;cursor:pointer;font-size:18px;background-color:#fff;padding:7px 18px;margin:10px;margin-left:8px;font-family:Roboto,Arial,sans-serif;z-index:999}#divdataviewdata .card-box .custom-checkbox{padding-left:1rem!important}.tags-input-root .typeahead-badges{padding-top:.25rem!important}#divmapdata .map-result img{width:auto!important}.filterscrollForCardView{scrollbar-width:thin;scrollbar-color:#848484}.filterscrollForCardView::-webkit-scrollbar{width:8px;height:8px}.filterscrollForCardView::-webkit-scrollbar-track{background-clip:content-box;border:2px solid transparent}.filterscrollForCardView::-webkit-scrollbar-thumb{background-color:#848484}.filterscrollForCardView::-webkit-scrollbar-corner,.scrollbar-1::-webkit-scrollbar-track{background-color:#848484}.typeahead-badges>span{max-width:195px}[data-color_code]:after{background-color:attr(data-color_code)}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#f5f1ef!important}.pinscreenMap{background:#17a2b8;border-left:0!important}.pinscreenMap,.unpinscreenMap{padding:15px 0!important;width:50px;cursor:pointer}.unpinscreenMap{background:#525f65}.unpinscreenMap i{transform:rotate(-45deg)}.map-actions span.esri_prof:hover{transform:none!important}.map-actions span.esri_prof a{color:#212529}.mCustomScrollBox,.mCustomScrollBox .mCS-light{max-height:inherit!important}#scrollbarreplyuserguide{max-height:350px}a[href="/Ticketing/Index"]{background:none!important}.theme-primary.partition{overflow:visible}',""]),e.exports=t},6481:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Notes")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.UploadFileWithNote},scopedSlots:e._u([{key:"tgslot-Description",fn:function({data:a}){return[t("ckeditor",{attrs:{editor:e.editor},on:{ready:e.onReady},model:{value:a.fieldInfo.value,callback:function(t){e.$set(a.fieldInfo,"value",t)},expression:"data.fieldInfo.value"}}),t("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[e._v(e._s(a.error))])]}}])})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),l=a("6930"),n=a.n(l),r=a("fb3d"),c=a.n(r),d=(a("d91b"),{components:{ckeditor:n.a.component},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{editor:c.a,content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var e=this;this.configData(),e.$parent.noteId>0&&(e.TicketNoteId=e.$parent.noteId,e.ticketId=e.$parent.ticketId,e._data.FormSchema[0].Data[0].value=e.$parent.note)},methods:{onReady(e){e.ui.getEditableElement().parentElement.insertBefore(e.ui.view.toolbar.element,e.ui.getEditableElement())},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},setFile:function(e){var t=this;t.file=e.target.files[0],t.FileName=e.target.files[0].name},onChangeRadio:function(e,t){var a=this;a.ticketType=e.target.dataset.value},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),o=a.name;t.fileName=o;var l=o.lastIndexOf("."),n=o.substring(l+1,o.length);t.fileExt+="."+n;var r='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;t.fileSize=c;var d={attachement_mime:r,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};t.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(e,t){var a=this;if(""==a._data.FormSchema[0].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var l=JSON.stringify(a.ticketModel);o["a"].AddNote(l).then(e=>{try{null!=e.data&&""!=e.data&&"Success"==e.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.callbackfunction(),a.Close()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.FileSrc="",$("input[type=text]").val(""))}catch(t){return HandleErrorOccured(t,"saveNote")}})}}},Close:function(){var e=this;e._data.FormSchema[0].Data[0].value=null,e.FileName=null,e.file=null,e.FormSchema[2].Data[0].config.onChange=e.GetBase64String,this.$emit("Close"),e.$parent.isShowAddNote=!1,"Notes"==e.viewMode?document.getElementById("tab-notes").click():e.$parent.LoadNotesForQuickView(),e.$parent.noRecord=!1}}}),u=d,p=a("2877"),m=Object(p["a"])(u,i,s,!1,null,null,null);t["a"]=m.exports},"69d3":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h4",{staticClass:"modal-title",attrs:{name:"header"}},[e._v(e._s(e.$t("Search")))]),t("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[t("div",{staticClass:"form-content"},[e.showListData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divshowSearchCriteriaList"}},[e.filterData.length>=10?t("div",{staticClass:"form-group is-invalid"},[t("div",{staticClass:"invalid-feedback alert alert-danger",staticStyle:{display:"block"},attrs:{role:"alert"}},[e._v(" "+e._s(e.$t("NotAddMoreThanTen"))+" "),t("a",{attrs:{href:"javascript:;"}},[t("em",{staticClass:"fa fa-close float-right text-danger"})])])]):e._e(),t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(" "+e._s(e.$t("Filter")))]),e.filterData.length<10?t("small",{staticClass:"float-right"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Add")},on:{click:function(t){e.showListData=!1,e.showAddData=!0,e.filterName="",e.filterId=0,e.conditionText=""}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v(" "+e._s(e.$t("Add"))+" ")])]):e._e()])]),t("div",{staticClass:"listing mt-2"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{"aria-describedby":"serachfilter"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticStyle:{"min-width":"480px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Name")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Edit")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Apply")))])]),t("th",{staticClass:"text-center",staticStyle:{"min-width":"70px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Delete")))])])])]),t("tbody",[e._l(e.$parent.appliedFilter,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.field_name))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditFilter(a,"NotSaved")}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon",attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyFilter(a.searchCondition)}}},[t("em",{class:{"fa fa-check action-icon":!0,"text-success":e.$parent.searchCondition==a.searchCondition,"text-primary":e.$parent.searchCondition!=a.searchCondition},attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.ClearFilter()}}},[t("em",{staticClass:"fa fa-trash text-danger action-icon",attrs:{"aria-hidden":"true"}})])])])})),e._l(e.filterData,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.FILTER_NAME))]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditFilter(a,"")}}},[t("em",{staticClass:"fa fa-pencil text-success action-icon",attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{staticClass:"pr-2",attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyFilter(a.DATABASE_CONDITION)}}},[t("em",{class:{"fa fa-check action-icon":!0,"text-success":e.$parent.searchCondition==a.DATABASE_CONDITION,"text-primary":e.$parent.searchCondition!=a.DATABASE_CONDITION},attrs:{"aria-hidden":"true"}})])]),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteFilter(a)}}},[t("em",{staticClass:"fa fa-trash text-danger action-icon",attrs:{"aria-hidden":"true"}})])])])})),null!=e.filterData&&0!=e.filterData.length||void 0!=e.$parent.appliedFilter&&null!=e.$parent.appliedFilter&&(void 0==e.$parent.appliedFilter||0!=e.$parent.appliedFilter.length)?e._e():t("tr",[t("td",{staticClass:"text-center text-danger py-3",attrs:{colspan:"3"}},[e._v(e._s(e.$t("NoRecordfound")))])])],2)])])])]):e._e(),e.showAddData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divManageSearchCriteria"}},[t("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({values:a,meta:i}){return[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4 px-0"},[t("div",{staticClass:"form-group mb-0"},[t("label",[e._v(" "+e._s(e.$t("Name"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("Field",{attrs:{name:"name",rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:a}){return[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.filterName,expression:"filterName",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":a[0]},attrs:{name:"name",maxlength:"100",type:"text"},domProps:{value:e.filterName},on:{input:function(t){t.target.composing||(e.filterName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),a[0]?t("span",{staticClass:"invalid-feedback",attrs:{name:"name"}},[e._v(e._s(a[0]))]):e._e()]}}],null,!0)})],1)]),t("div",{staticClass:"listing mt-2 below768 p-0"},[t("div",{staticClass:"table-responsive overflow-visible"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline",attrs:{"aria-describedby":"search-filter-table"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticStyle:{"min-width":"110px","max-width":"110px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("fieldName")))])]),t("th",{staticStyle:{"min-width":"160px","max-width":"110px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("ConditionalOperator")))])]),t("th",{staticStyle:{"min-width":"350px"},attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("Value")))])]),t("th",{staticClass:"text-center",attrs:{scope:"col"}},[t("a",{staticClass:"text-success",attrs:{href:"javascript:void(0)"},on:{click:e.AddSearchData}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v(" "+e._s(e.$t("Add"))+" ")])])])]),t("tbody",e._l(e.filterItemData,(function(a,i){return t("tr",{key:i},[t("td",[t("Field",{attrs:{name:"field_name"+(i+1),rules:{required:!0},label:"Field Name"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.field_name,expression:"item.field_name"}],class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"field_name"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"field_name",t.target.multiple?i:i[0])},function(t){return e.GetOperatorData(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.fieldNameData,(function(a,i){return t("option",{key:i,domProps:{value:String(a.custom_field_id)}},[e._v(" "+e._s(e.GetFieldDisplayName(a.label,a.display_name)))])}))],2)]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"operator"+(i+1),rules:{required:!0},label:"operator"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.operator,expression:"item.operator"}],class:{"form-control":!0,disableAria:!0,"is-invalid":s[0]},attrs:{name:"operator"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"operator",t.target.multiple?i:i[0])},function(t){return e.ShowFieldValue(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.operator_list,(function(a,i){return t("option",{key:i,domProps:{value:String(a.OPERATOR_ID)}},[e._v(" "+e._s(a.OPERATOR_DISPLAY_NAME))])}))],2)]}}],null,!0)})],1),t("td",{staticClass:"overflow-visible"},["date"==a.dt_code||"datetime"==a.dt_code?t("div",{class:{"col-5 p-0 float-left pr-1":"between"==a.operator_expression}},[t("Field",{attrs:{name:"date"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return["date"==a.dt_code||"datetime"==a.dt_code?t("v-date-picker",{staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"date"+a.label+i,value:e.$options.filters.formatDate(a.value)},on:{dayclick:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e()]}}],null,!0)})],1):e._e(),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(" "+e._s(e.$t("And","And")))]),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{class:{"input-group":!0,"col-5 p-0 float-left":"between"==a.operator_expression}},[t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return["date"==a.dt_code||"datetime"==a.dt_code?t("v-date-picker",{ref:"SecondDatePicker",refInFor:!0,staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"second"+a.label+i},on:{dayclick:function(t){return e.SetValues(t,a,"second")}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.second_value,callback:function(t){e.$set(a,"second_value",t)},expression:"item.second_value"}}):e._e()]}}],null,!0)})],1),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code?t("Field",{attrs:{name:a.label+i,rules:{required:a.is_required},label:"Value"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{id:a.label+i,name:a.label+i,type:"text"},domProps:{value:a.value},on:{input:[function(t){t.target.composing||e.$set(a,"value",t.target.value)},function(t){return e.SetValues(t,a)}]}})]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(e._s(e.$t("And","And"))+" ")]):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:"second"+a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.second_value,expression:"item.second_value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{type:"text",id:a.label,name:"second"+a.label+i},domProps:{value:a.second_value},on:{input:[function(t){t.target.composing||e.$set(a,"second_value",t.target.value)},function(t){return e.SetValues(t,a,"second")}]}})]}}],null,!0)}):e._e(),"textarea"==a.dt_code?t("Field",{attrs:{name:"textarea"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==a.dt_code&&i[0]},attrs:{id:a.label},domProps:{value:a.value},on:{change:function(t){return e.SetValues(t,a)},input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})]}}],null,!0)}):e._e(),"radio"==a.dt_code?t("div",{staticClass:"form-control pl-4 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"form-check form-check-inline custom-control mx-4 pl-2 custom-radio",attrs:{key:i.name}},[t("Field",{attrs:{name:"rdo_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+a.custom_field_id+i.value,name:"rdo_"+a.custom_field_id+i.value,"data-resource":i.name,type:"radio"},domProps:{value:i.value,checked:i.value==a.value,checked:e._q(a.value,i.value)},on:{change:[function(t){return e.$set(a,"value",i.value)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-0 pt-0 dynamic",attrs:{for:"rdo_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"checkbox"==a.dt_code?t("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"custom-control custom-checkbox"},[t("Field",{attrs:{name:"chk_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select_value,expression:"item.select_value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+a.custom_field_id+i.value,name:"chk_"+a.custom_field_id+i.value,"data-resource-id":i.name,type:"checkbox"},domProps:{value:i.value,checked:Array.isArray(a.select_value)?e._i(a.select_value,i.value)>-1:a.select_value},on:{change:[function(t){var s=a.select_value,o=t.target,l=!!o.checked;if(Array.isArray(s)){var n=i.value,r=e._i(s,n);o.checked?r<0&&e.$set(a,"select_value",s.concat([n])):r>-1&&e.$set(a,"select_value",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(a,"select_value",l)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"Lookup"!=a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&s[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,name:"Multiselect"+a.label+i,placeholder:"Search a value",value:a.value,"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:"normal"==a.dropdown_type?e.MakeNormalArray(a.select_options):a.select_options,object:!0,label:"name",showNoOptions:!0},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)}},model:{value:a.select_value,callback:function(t){e.$set(a,"select_value",t)},expression:"item.select_value"}},[t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(" Type to search "+e._s(e.$t(a.label,a.display_name))+" ")])])]}}],null,!0)}),"Lookup"==a.picklist_options&&"select"==a.dt_code&&"normal"==a.dropdown_type&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select"+a.label+i,rules:{required:a.is_required}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select"+a.label+i},on:{change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeNormalArray(a.select_options),(function(a,i){return t("option",{key:i,domProps:{value:a.value}},[e._v(e._s(a.name))])}))],2)]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),"Lookup"!=a.picklist_options&&"select"==a.dt_code&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select2"+a.label+i,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select2"+a.label+i},on:{change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i){return null!=a.picklist_options?t("option",{domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name)+" ")]):e._e()}))],2)]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}}):e._e(),"Lookup"==a.picklist_options||null==a.picklist_options||"select"!=a.dt_code||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?e._e():t("Field",{attrs:{name:"Multiselect2"+a.label+i,rules:{required:a.is_required},label:"name"},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&i[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,taggable:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,placeholder:"Search a value",showNoOptions:!0,"filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:e.MakeArray(a.picklist_options,a.dt_code),object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)}},model:{value:a.select_value,callback:function(t){e.$set(a,"select_value",t)},expression:"item.select_value"}},[t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(" Type to search "+e._s(e.$t(a.label,a.display_name))+" ")])])]}}],null,!0)})],1),t("td",{staticClass:"text-center single-action"},[0!=i?t("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.DeleteSearchItem(a,i)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})]):e._e()])])})),0)])])]),e.isBlank(e.condition)?e._e():t("div",{staticClass:"col-12 float-left p-0 mt-2"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(e._s(e.$t("Condition"))+":")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.condition))])])]),t("div",{staticClass:"col-12 float-left p-0 mt-2 d-none"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(" Database Condition: ")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.databaseCondition))])])])])])]),t("div",{staticClass:"modal-footer text-right pr-0 pb-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0"},[t("a",{class:{"btn btn-success mr-2":!0},attrs:{href:"javascript:;",title:e.$t("SaveAndSearch")},on:{click:function(t){return e.SubmitData("save",a,i)}}},[t("em",{staticClass:"fa fa-floppy-o pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("SaveAndSearch"))+" ")]),t("a",{staticClass:"btn btn-success mr-2",attrs:{href:"javascript:;",title:e.$t("Search")},on:{click:function(t){return e.SubmitData("search",a,i)}}},[t("em",{staticClass:"fa fa-search pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Search"))+" ")]),t("a",{staticClass:"btn btn-primary delete-btn",attrs:{href:"javascript:;",title:e.$t("Cancel")},on:{click:function(t){e.showListData=!0,e.showAddData=!1,e.filterItemData=[],e.GetSearchFilterItemData()}}},[t("em",{staticClass:"fa fa-times pr-2",attrs:{"aria-hidden":"true"}}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])]}}],null,!1,2574438230)})],1):e._e()])])])])])])])])])},s=[],o=(a("14d9"),a("9769")),l={props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function}},data:function(){return{filterData:[],showListData:!0,showAddData:!1,filterItemData:[],fieldNameData:[],options:null,submited:!1,databaseCondition:"",condition:"",filterName:"",validationForName:"",filterId:0,isDefault:!1,FormatForSecond:"",isFirstTime:!1,exitstingFilterNameArray:[],ApiURL:"",BaseUrl:"",ImageVal:"Image",popover:{visibility:"click"},masks:{input:"MM-DD-YYYY"}}},created:async function(){await this.GetSearchFilterData(),await this.GetSearchFilterItemData(),await this.GetFieldNameData()},methods:{MakeArray:function(e,t){var a=[],i=String(e).split(",");if("radio"==t||"checkbox"==t){if(i.length>0)for(var s of i)if(s.split("|").length>1){var o={name:s.split("|")[0],value:s.split("|")[1]};a.push(o)}else{o={name:s,value:s};a.push(o)}}else if(i.length>0)for(var s of i){o={name:s,value:s.trim()};a.push(o)}return a},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e));return a!=String(e)?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t));return a!=String(t)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(i){console.log(i)}},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},isBlank:function(e){return!e||/^\s*$/.test(e)},returnDateObject:function(e){var t=null;return e=void 0==e?"":e,""!=e&&(t=new Date(Date.parse(e))),{format:String(Globalize.culture().calendar.patterns.d).toUpperCase(),useStrict:!0,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:t,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},GetValidationF:function(e){var t=this;if(null!=t.filterName&&""!=t.filterName&&!t.submited)return this.$validator.reset(),e;var a={};return e.is_required&&(a["required"]=!0),e.length>0&&("textarea"==e.dt_code?a["max"]=200:a["max"]=e.length),"email"==e.validation_type&&(a["email"]=!0),"date"!=e.dt_code&&"datetime"!=e.dt_code||(a["date_format"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"decimal"==e.dt_code&&(a["decimal"]=2),"int"!=e.dt_code&&"bigint"!=e.dt_code||(a["numeric"]=!0),"url"==e.dt_code&&(a["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(a["regex"]=e.regular_expression),t.submited=!1,a},onSearch:function(e,t){this.searchSelectData(e,this,t)},searchSelectData:function(e,t,a){this.ShowSearchData(e,t,a)},ShowSearchData:function(e,t,a,i){"undefined"==typeof i&&(i=0);var s="id=&moduleName="+t.modulename+"&type="+a.field_code;"fill"==a.dependent_type&&(s+="&refId="+i),o["a"].getDDLDataCrm(s+"&search="+escape(e)).then(e=>{var t=[];return e.data,""!=e.data&&(t=e.data),a.select_options=t.DATA})},setSelectedValue:function(e,t){var a=this;try{setTimeout(()=>{e.value=e.select_value,a.SetCondition()},100)}catch(i){}},AddSearchData:function(){this.GetSearchFilterItemData()},DeleteSearchItem:function(e,t){var a=this,i=a.$t("ConfirmDelete");a.confirmR(i,!0,null,(function(){a.filterItemData.splice(t,1),a.SetCondition()}))},GetSearchFilterData:async function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.filterData=[],await o["a"].SearchCriteriaListingCrm(t).then((function(t){var a=t.data;null!=a&&(e.filterData=a.DATA)}))},GetFieldNameData:async function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.fieldNameData=[],await o["a"].GetFieldNameCrm(t).then((function(t){var a=t.data;if(null!=a)return e.fieldNameData=a.DATA.length>0?a.DATA:void 0}))},GetOperatorData:async function(e,t,a){var i=this,s=e.target.value,l=$.grep(this.fieldNameData,(function(e,t){return e.custom_field_id==s})),n="";if(t.dt_code="",t.picklist_options=[],t.label="",t.dropdown_type="",t.select_options="",t.select_value="",t.length=0,t.operator="",t.field_code="",t.second_value="",t.display_name="",t.is_required=!0,l.length>0){if(n=l[0].sql_type,t.dt_code=l[0].dt_code,t.picklist_options=l[0].picklist_options,t.label=l[0].label,t.dropdown_type=l[0].dropdown_type,"normal"==l[0].dropdown_type&&"Lookup"==l[0].picklist_options&&"EVENT.event_reminder_id"==l[0].name){var r=i.MakeNormalArray(l[0].select_options);$.each(r,(function(e,t){r[e].name=i.$t(t.name)})),t.select_options=r}else t.select_options=l[0].select_options;t.length=l[0].length,t.display_name=l[0].display_name,t.field_code=l[0].field_code,t.is_required=l[0].is_required,t.validation_type=l[0].validation_type}var c="dataType="+n+"&customField="+s;t.operator_list=[],await o["a"].GetOperatorCrm(c).then((function(e){var a=e.data;if(null!=a)return t.operator_list=a.DATA})),t.field_name=s,t.value="",this.SetCondition()},SetValues:function(e,t,a){if("date"==t.dt_code||"datetime"==t.dt_code||"decimal"==t.dt_code){var i=/^(\+|-)?(\d*\.?\d*)$/;if(i.test(t.value)||"decimal"!=t.dt_code||(t.value=""),i.test(t.second_value)||"decimal"!=t.dt_code||(t.second_value=""),"second"==a){var s=t.second_value?this.$options.filters.formatDate(t.second_value):t.second_value;t.second_value=s}else if("decimal"==t.dt_code){s=t.value;t.value=s,t.second_value=s}else if("SA_Scheduled_StartTime"==t.label||"SA_Scheduled_EndTime"==t.label||"SA_Actual_StartTime"==t.label||"SA_Actual_EndTime"==t.label||"ArrivalWindowStartTime"==t.label||"ArrivalWindowEndTime"==t.label){s=t.value?this.$options.filters.formatDatee(t.value):t.value;t.value=s,t.second_value=s}else{s=t.value?this.$options.filters.formatDate(t.value):t.value;t.value=s,t.second_value=s}}else"second"==a?t.second_value=e.target.value:e.target.value&&(t.value=e.target.value);this.SetCondition()},SetCondition:function(){var e=this,t="",a="",i="";$.each(e.filterItemData,(function(s,o){s>0&&(t+=" And ",a+=" and ");var l=o.field_name,n=$.grep(e.fieldNameData,(function(e,t){return e.custom_field_id==l}));if("undefined"!=typeof n&&n.length>0)if(t+=e.GetLocalizedValue(n[0].label,n[0].display_name),console.log(t),"date"==n[0].dt_code||"datetime"==n[0].dt_code)if("datetimeoffset"==n[0].actual_data_type){var r="'+00:00'";a+=`convert(date, replace(${n[0].name}, ${r}, ''), 23)`}else a+="convert(date, "+n[0].name+", 23)";else a+=""+n[0].name.trimEnd();var c=o.operator;if(n=$.grep(o.operator_list,(function(e,t){return e.OPERATOR_ID==c})),"undefined"!=typeof n&&n.length>0&&(t=t+" "+n[0].OPERATOR_DISPLAY_NAME,i=n[0].OPERATOR_EXPRESSION,a+=" "+i),!e.isBlank(o.value)){var d=o.value,u=o.value;if("select"==o.dt_code&&"normal"==o.dropdown_type&&"IN"!=i&&"NOT IN"!=i){var p=e.MakeNormalArray(o.select_options);n=$.grep(p,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(d=n[0].name)}else if("select"==o.dt_code&&"custom"==o.dropdown_type||"select"==o.dt_code&&"normal"==o.dropdown_type&&("IN"==i||"NOT IN"==i))Array.isArray(o.value)?(u=e.createString(o.value,"value"),d=e.createString(o.value,"name")):(u=o.value.value?o.value.value:o.value,d=o.value.name),"IN"!=i&&"NOT IN"!=i||(u="("+u+")");else if("select"==o.dt_code&&"custom"!=o.dropdown_type&&"normal"!=o.dropdown_type)if("IN"==i||"NOT IN"==i)Array.isArray(o.value)?(u=e.createString(o.value,"value"),d=e.createString(o.value,"name")):(u=o.value.value,d=o.value.name),u="("+u+")";else{p=e.MakeArray(o.picklist_options,o.dt_code);n=$.grep(p,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(d=n[0].name),u=" '"+u+"'"}else if("date"==o.dt_code)"between"==i?(d=o.value+" And "+o.second_value,u="'"+o.value+"' and '"+o.second_value+"'"):(d=o.value,u="'"+o.value+"'");else if("radio"==o.dt_code){p=e.MakeArray(o.picklist_options,o.dt_code);n=$.grep(p,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(d=n[0].name,u="'"+n[0].value+"'")}else if("Like"==i||"Not Like"==i)u="'%"+o.value+"%'";else if("Starts With"==i)u="'"+o.value+"%'",a=a.replcae("Starts With","like");else if("Ends With"==i)u="'%"+o.value+"'",a=a.replcae("Ends With","like");else if("between"==i)d=o.value+" And "+o.second_value,u="'"+o.value+"' and '"+o.second_value+"'";else if("IN"==i||"NOT IN"==i){for(var m=String(o.value).split(","),f="",h=0;h<m.length;h++)h>0&&(f+=" , "),f+="'"+m[h]+"'";u="("+f+")"}else u="'"+u+"'";"select"==o.dt_code&&"normal"==o.dropdown_type&&"event_location"==o.label?a+=" '"+u+"'":"select"==o.dt_code&&"normal"==o.dropdown_type&&"forecast_category_name"==o.label?a+=i.indexOf("IN")>-1?" ("+d+")":" '"+d+"'":"select"==o.dt_code&&"normal"==o.dropdown_type&&"display_icon"==o.label||"select"==o.dt_code&&"normal"==o.dropdown_type&&"contract_currency"==o.label?a+=i.indexOf("IN")>-1?" "+u:" '"+u+"'":a+=" "+u,t=t+" "+d}})),this.condition=t,this.databaseCondition=a},ShowFieldValue:function(e,t,a){var i=e.target.value,s=$.grep(t.operator_list,(function(e,t){return e.OPERATOR_ID==i})),o="";s.length>0&&(o=s[0].OPERATOR_EXPRESSION),t.showSecondValue="between"==o,t.operator=i,t.value="",t.select_value=[],t.operator_expression=o,this.SetCondition()},GetSearchFilterItemData:async function(){var e={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:[],first_value:"",second_value:"",showSecondValue:!1,picklist_options:[],label:"",display_name:"",dropdown_type:"",select_options:"",length:0,field_code:"",select_value:"",is_required:!0};this.filterItemData.push(e)},ApplyFilter:function(e){this.databaseCondition=e,this.$parent.searchCondition=this.databaseCondition,"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?(this.$emit("FilterData",1,10,"","",this.databaseCondition,this.filterItemData),this.$parent.appliedFilter=[],this.callbackfunction()):(this.$parent.PageSize=10,this.$parent.fetchRecords()),this.$emit("close")},EditFilter:function(e,t){this.showListData=!1,this.showAddData=!0,"NotSaved"!=t?(this.filterId=e.FILTER_ID,this.EditSearchFilterData(this.filterId)):(this.filterName=this.$parent.appliedFilter[0].field_name.split("(")[0],this.filterItemData=this.$parent.appliedFilter[0],this.SetCondition())},deleteFilter:function(e){this.filterId=e.FILTER_ID;var t=this;t.confirmR(t.$t("ConfirmDeleteFilter"),!0,null,(function(){var a="id="+e.FILTER_ID+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&isDelete=1";o["a"].SearchCriteriaByIdCrm(a).then((function(a){var i=a.data;null!=i&&"SUCCESS"==i.MSG&&(t.GetSearchFilterData(),e.DATABASE_CONDITION==t.$parent.searchCondition&&(t.$parent.searchCondition="","undefined"!=typeof t.callbackfunction&&null!=t.callbackfunction?t.callbackfunction():t.$parent.fetchRecords()),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Filter")]),"success",!0,t.$t("Alert")))}))}))},checkEncodeURI(e){return/\%/i.test(e)},EditSearchFilterData:function(e){var t=this,a="id="+e+"&moduleName="+this.modulename+"&subModuleCode="+this.submodulecode;t.filterItemData=[],o["a"].SearchCriteriaByIdCrm(a).then((function(a){var i=a.data;if(null!=i){var s=i.DATA,o=$.grep(s,(function(t,a){return t.FILTER_ID==e})),l=t.checkEncodeURI(o[0].DATABASE_CONDITION);t.databaseCondition=l?decodeURIComponent(o[0].DATABASE_CONDITION):o[0].DATABASE_CONDITION,t.filterName=o[0].FILTER_NAME,t.condition=o[0].FILTER_CONDITION,t.isDefault=o[0].IS_DEFAULT,$.each(s,(function(e,a){var i=a.FIRST_VALUE,s=a.SECOND_VALUE;"date"==a.DT_CODE&&a.OPERATOR_EXPRESSION;var o=[];if("select"!=a.DT_CODE||"normal"!=a.DROPDOWN_TYPE&&(null!=a.DROPDOWN_TYPE||"Lookup"==a.PICKLIST_OPTIONS)||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION)o="Lookup"==a.PICKLIST_OPTIONS||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION?t.MakeNormalArray(a.SELECT_OPTIONS):t.MakeArray(i.replcae(/'/g,""),a.dt_code);else{var l=t.MakeArray(i.replcae(/'/g,""),a.dt_code);$.each(l,(function(e,i){if(-1==a.SELECT_OPTIONS.indexOf("[{")&&a.SELECT_OPTIONS.length>0){var s=a.SELECT_OPTIONS.split(","),l=[],n=[];$.each(s,(function(e,t){var a={name:t,value:t};l.push(a)})),n=l.filter((function(e){return e.value==i.value}))}else n=t.MakeNormalArray(a.SELECT_OPTIONS).filter((function(e){return e.value==i.value}));n.length>0&&o.push(n[0])}))}var n={field_name:a.FIELD_ID,dt_code:a.DT_CODE,operator:a.OPERATOR_ID,operator_expression:a.OPERATOR_EXPRESSION,operator_list:t.MakeNormalArray(a.OPERATOR_LIST),value:i,second_value:s,showSecondValue:!t.isBlank(a.SECOND_VALUE),picklist_options:a.PICKLIST_OPTIONS,label:a.LABEL,dropdown_type:a.DROPDOWN_TYPE,select_options:"Lookup"==a.PICKLIST_OPTIONS||"IN"!=a.OPERATOR_EXPRESSION&&" NOT IN"!=a.OPERATOR_EXPRESSION?t.MakeNormalArray(a.SELECT_OPTIONS):a.SELECT_OPTIONS,length:a.LENGTH,field_code:a.FIELD_CODE,select_value:o,is_required:a.IS_REQUIRED};t.filterItemData.push(n)}))}}))},ClearFilter:function(){this.$parent.appliedFilter[0].searchCondition==this.$parent.searchCondition&&(this.$parent.searchCondition="","undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():this.$parent.fetchRecords()),this.$parent.appliedFilter=[]},SubmitData:function(e,t,a){var i=this;i.submited=!0,i.$refs.form.validate().then(a=>{for(var s in console.log(this.$refs.form.errors),a.errors){var l=document.getElementsByName(s);t[s]||0==l.length?delete a.errors[s]:t.hasOwnProperty(s)||delete a.errors[s]}if(a)if("search"==e)i.$parent.searchcondition=i.databaseCondition,""==i.filterName?i.filterItemData.field_name="New Created Filter(Not Saved)":i.filterItemData.field_name=i.filterName+"(Not Saved)",i.filterItemData.searchCondition=i.databaseCondition,i.$parent.appliedFilter=[],i.$parent.PageNumber=1,i.$parent.PageSize=10,i.$parent.SortBy="",i.$parent.SortExp="","undefined"!=typeof i.callbackfunction&&null!=i.callbackfunction?i.$emit("FilterData",1,10,"","",i.databaseCondition,i.filterItemData):i.$parent.fetchRecords(),i.$emit("close");else{var n=[];if(0==i.filterId&&(n=$.grep(i.filterData,(function(e,t){return e.FILTER_NAME==$.trim(i.filterName)}))),0==n.length){i.$parent.appliedFilter=[];var r=i.filterItemData,c=[];$.each(r,(function(e,t){var a=t.value,s=t.second_value;("select"==t.dt_code&&"custom"==t.dropdown_type||"select"==t.dt_code&&"Lookup"!=t.picklist_options&&("IN"==t.operator_expression||"NOT IN"==t.operator_expression)||"select"==t.dt_code&&"normal"==t.dropdown_type&&("IN"==t.operator_expression||"NOT IN"==t.operator_expression))&&(a=Array.isArray(t.value)?i.createString(t.value,"value"):t.value.value?t.value.value:t.value),"date"==t.dt_code&&!i.isBlank(s)&&t.operator_expression;var o={fieldId:t.field_name,operatorId:t.operator,firstValue:a,secondValue:s};c.push(o)}));var d={filterId:i.filterId,filterName:i.filterName,condition:i.condition,databaseCondition:i.databaseCondition,isDefault:i.isDefault,moduleName:i.modulename,subModuleCode:i.submodulecode,data:c},u=JSON.stringify(d);o["a"].SaveFilterCrm(u).then((function(e){i.$parent.PageNumber=1,i.$parent.PageSize=10,i.$parent.SortBy="",i.$parent.SortExp="",i.$parent.searchCondition=i.databaseCondition,"undefined"!=typeof i.callbackfunction&&null!=i.callbackfunction?(i.$emit("FilterData",1,10,"","",i.databaseCondition,null),i.$parent.appliedFilter=[]):i.$parent.fetchRecords(),i.$emit("close")}))}else this.ShowAlert(this.$t("FilterNameAlreadyExist"))}})}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},"6c98":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".lessmorenotes .notesdata{max-height:100px;text-overflow:ellipsis;overflow:hidden}.readmorenotes{height:auto;text-overflow:ellipsis;overflow:visible}",""]),e.exports=t},"6f27":function(e,t,a){var i=a("dd82");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("59af9183",i,!0,{sourceMap:!1,shadowMode:!1})},"77ff":function(e,t,a){var i=a("e2ba");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("07df9355",i,!0,{sourceMap:!1,shadowMode:!1})},8751:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Attachment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Attachment")]),t("small",{staticClass:"float-right"},[0==e.isDisabledButton?t("a",{attrs:{href:"javascript:;",id:"showattachment",title:"Show/Hide Add"},on:{click:e.ShowAttachment}},[t("i",{staticClass:"fa fa-paperclip pr-2"}),e._v(e._s(e.$t("Show/Hide"))+" "+e._s(e.$t("Add")))]):e._e()])])]),e.ShowAttachmentData?t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.SaveAttachment}}):e._e(),null!=e.AttachmentList?t("div",{staticClass:"listing pt-1"},[t("TicketAttachment",{attrs:{AttachmentData:e.AttachmentList}})],1):e._e(),e.noRecord?t("div",{staticClass:"text-danger text-center no-record float-left w-100"},[e._v(" "+e._s(e.$t("NoRecordfound"))+" ")]):e._e()],1)])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),l=a("fc96"),n={components:{TicketAttachment:l["a"]},created:async function(){var e=this;this.configData(),e.FetchAttachmentData()},props:{configdata:{type:Array,required:!0},isDisabledButton:{type:Boolean,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{fileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,galleryImages:[],checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",fileExt:"",fileSize:"",fileName:"",isLoading:!1,TicketBindList:[],ShowAttachmentData:!1,Description:null,AttachmentList:[],galleryFilesView:[],FileName:null,ListViewAttachment:0,file:null,ticketModel:{NoteDescription:"",transferType:""},FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"ListAttachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{Close:function(){var e=this;e.FormSchema[0].Data[0].value=null,e.AttachmentfileName="",e.Attachmentfile=null,e.AttachmentfileData=null,e.FormSchema[0].Data[1].config.onChange=this.GetBase64String,this.$parent.showAttachmentModal=!1,this.$parent.noRecord=!1},SizeToMb:function(e){var t=this,a=1048576*parseInt(t.allowedPerFileSizeInMb,10);if(e>a)return-1;var i=e/1024/1024;return i},configData:function(e){var t=this,a=t.configdata;$.each(a,$.proxy((function(e,t){"TicketFileSize"==t.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=t.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==t.CORE_CONFIG_KEY&&(this.disallowFileTypes=t.CONFIG_DATA_VALUE)}),this))},setFile:function(e){console.log(e.target.files);for(let t=0;t<e.target.files.length;t++){const a=e.target.files[t];this.file.push(a)}},ShowAttachment:function(){0==this.ShowAttachmentData?(this.ShowAttachmentData=!0,this.noRecord=!1):this.ShowAttachmentData=!1},FetchAttachmentData:function(){var e=this;e.galleryImages=[],e.AttachmentList=[],e.galleryFilesView=[],e.isLoading=!0;var t="ticketId="+e.id;o["a"].GetTicketFiles(t).then((function(t){e.isLoading=!1,e.AttachmentList=t.data.result.DATA,e.$parent.fetchRecords(),null!=e.AttachmentList&&e.AttachmentList.length>0?e.noRecord=!1:(e.AttachmentList=null,e.noRecord=!0),e.isLoading=!1})),e.isLoading=!1},GetBase64String:function(e){try{var t=this;t.fileData=[];var a=e.target.files[0],i=new FileReader;i.onload=function(e){return function(e){var i=e.target.result,s=window.btoa(i),o=a.name;t.fileName=o;var l=o.lastIndexOf("."),n=o.substring(l+1,o.length);t.fileExt+="."+n;var r='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+n+'"}',c=a.size;t.fileSize=c;var d={attachement_mime:r,fileName:o,id:t.id,moduleName:t.modulename,subModuleCode:t.submodulecode,base64String:s,fileSize:c};t.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},SaveAttachment:function(){var e=this,t=e.disallowFileTypes.split(",");t.includes(e.fileExt)?(e.checkFileValidExt=!1,e.ShowAlert(e.$t("InvalidFileUploadMsg",e.fileName,e.disallowFileTypes),"warning",!0,e.$t("Alert"))):e.checkFileValidExt=!0;var a=this.SizeToMb(e.fileSize);if(a>parseInt(e.allowedPerFileSizeInMb,10)?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,a<0?(e.checkFileValidSize=!1,e.ShowAlert(e.$t("ExceedAllowedSize",e.fileName,e.allowedPerFileSizeInMb),"warning",!0,e.$t("Alert"))):e.checkFileValidSize=!0,1==e.checkFileValidExt&&1==e.checkFileValidSize){var i=JSON.stringify(e.fileData);o["a"].UploadFile(i).then(t=>{null!=t.data&&""!=t.data&&"Success"==t.data.Status?(e.ShowAlert(e.$t("Attachment successfully added"),"success",!0,e.$t("Alert")),e.DisplayName="",e.FileSrc="",$("input[type=text]").val(""),e.Close(),e.callbackfunction()):(e.FileSrc="",$("input[type=text]").val(""))},(function(e){}))}}}},r=n,c=a("2877"),d=Object(c["a"])(r,i,s,!1,null,null,null);t["a"]=d.exports},"87de":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal my-popups right fade",attrs:{id:"modalManageView",role:"dialog"}},[t("div",{staticClass:"modal-dialog mw-1100",attrs:{role:"document"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header mheader-user"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{id:"myModalLabel"}},[e._v(e._s(e.$t("ManageView")))]),t("span",{staticClass:"user-guide"},[e.ShowLisiting?e._e():t("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"javascript:void(0)",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},on:{click:function(t){return e.ShowUserGuide()}}},[e._v("User Guide")]),t("div",{class:"divancuserguide collapse"+e.toggleUserGuide,attrs:{id:"collapseReplyUG"}},[t("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[t("div",{staticClass:"con",domProps:{innerHTML:e._s(e.$t("MangeViewUG1"))}})])])])]),t("div",{staticClass:"modal-body"},[t("loader",{attrs:{"is-visible":e.isLoading}}),e.ShowLisiting?t("div",{staticClass:"w-100 float-left"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("ManageView")))]),t("small",{staticClass:"float-right"},[t("a",{attrs:{href:"javascript:;",title:e.$t("AddNew")},on:{click:function(t){return e.AddNewView()}}},[t("em",{staticClass:"fa fa-plus pr-1"}),e._v(" "+e._s(e.$t("AddNew"))+" ")]),t("a",{class:{disabled:e.isClearViewDisabled},attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearView()}}},[t("em",{staticClass:"fa fa-refresh pr-1 ml-3"}),e._v(" "+e._s(e.$t("Clear"))+" ")])])])]),t("div",{staticClass:"listing mt-3"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-describedby":"viewlayout"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Name")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Apply")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Edit")))]),t("th",{staticClass:"text-center",attrs:{scope:"col",width:"100"}},[e._v(e._s(e.$t("Delete")))])])]),t("tbody",[e._l(e.ListingData,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(a.VIEW_NAME))]),t("td",{staticClass:"text-center single-action"},[0==a.IS_SLECTED_USER_ID?t("a",{attrs:{href:"javascript:;",title:e.$t("Apply")},on:{click:function(t){return e.ApplyView(a.VIEW_ID,a.VIEW_NAME)}}},[t("em",{staticClass:"fa fa-check text-info"})]):e._e(),a.IS_SLECTED_USER_ID>0?t("a",{attrs:{title:e.$t("Applied")}},[t("em",{staticClass:"fa fa-check text-success"})]):e._e()]),t("td",{staticClass:"text-center single-action"},[a.CAN_EDIT?t("a",{attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.EditManageView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-pencil text-success"})]):e._e(),a.CAN_EDIT?e._e():t("a",{staticClass:"disabled",staticStyle:{cursor:"no-drop !important"},attrs:{href:"javascript:;",title:" $t('Edit') "}},[t("em",{staticClass:"fa fa-pencil text-success disabled"})])]),t("td",{staticClass:"text-center single-action"},[a.CAN_EDIT?t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-trash text-danger"})]):e._e(),a.CAN_EDIT?e._e():t("a",{class:{disabled:!a.CAN_EDIT},attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.deleteView(a.VIEW_ID)}}},[t("em",{staticClass:"fa fa-trash text-danger disabled"})])])])})),e.noRecord?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{attrs:{colspan:"4"}},[t("div",{staticClass:"text-center text-danger d-flex align-items-center justify-content-center norecs"},[e._v(e._s(e.$t("NoRecordfound")))])])]):e._e()],2)])])])]):e._e(),e.ShowLisiting?e._e():t("section",{staticClass:"tab mt-2"},[t("div",{staticClass:"tab-style"},[t("div",{staticClass:"tab_container"},[t("div",{staticClass:"responsive-tabs-container view_tab"},[t("ul",{staticClass:"nav nav-tabs all-tabs responsive-tabs cust"},[t("li",{staticClass:"nav-item general"},[t("a",{staticClass:"nav-link active",attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(1)}}},[t("span",{staticClass:"numb"},[e._v("1")]),e._v(" "+e._s(e.$t("General"))+" ")])]),t("li",{staticClass:"nav-item selectcolumn"},[t("a",{class:{"nav-link":!0,disabled:""==e.ViewData.Name||2==e.ViewData.ApplyTo&&0==e.ListSelectedUsers.length},attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(2)}}},[t("span",{staticClass:"numb"},[e._v("2")]),e._v(" "+e._s(e.$t("Select Column"))+" ")])]),t("li",{staticClass:"nav-item filter"},[t("a",{class:{"nav-link":!0,disabled:""==e.ViewData.Name||2==e.ViewData.ApplyTo&&0==e.ListSelectedUsers.length||0==e.SelectedItems.length},attrs:{"data-toggle":"tab",href:"javascript:void(0)"},on:{click:function(t){return e.ShowTabData(3)}}},[t("span",{staticClass:"numb"},[e._v("3")]),e._v(" "+e._s(e.$t("Filter"))+" ")])])]),t("Form",{ref:"ManageViewLayoutData"},[t("div",{staticClass:"tab-content"},[t("div",{staticClass:"tab-pane active",attrs:{id:"step1"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6"},[t("div",{staticClass:"form-group"},[t("label",[e._v(" "+e._s(e.$t("ViewName"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.ViewData.Name,expression:"ViewData.Name",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:e.ViewData.Name},on:{input:function(t){t.target.composing||e.$set(e.ViewData,"Name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),t("div",{staticClass:"col-lg-6 float-left"},[t("div",{staticClass:"col-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("label",[e._v(" "+e._s(e.$t("ApplyTo"))+": "),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("div",{staticClass:"form-group"},[t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio",name:"viewapplyto",value:"1"},domProps:{checked:e._q(e.ViewData.ApplyTo,"1")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","1")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio"}},[e._v("Only For Me")])]),"CA"==e.usertype?t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio2",name:"viewapplyto",value:"2"},domProps:{checked:e._q(e.ViewData.ApplyTo,"2")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","2")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio2"}},[e._v(e._s(e.$t("Others")))])]):e._e(),"CA"==e.usertype?t("div",{staticClass:"custom-control custom-radio custom-control-inline"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.ViewData.ApplyTo,expression:"ViewData.ApplyTo"}],staticClass:"custom-control-input dynamic",attrs:{type:"radio",id:"customRadio3",name:"viewapplyto",value:"3"},domProps:{checked:e._q(e.ViewData.ApplyTo,"3")},on:{change:function(t){return e.$set(e.ViewData,"ApplyTo","3")}}}),t("label",{staticClass:"custom-control-label",attrs:{for:"customRadio3"}},[e._v(e._s(e.$t("ALL")))])]):e._e()])])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.ViewData.ApplyTo,expression:"ViewData.ApplyTo==2"}],staticClass:"w-100 float-left mb-2 mt-2"},[e.ListUnselectedUsers.length>0?t("moveuser",{attrs:{leftItems:e.ListUnselectedUsers,"right-items":e.ListSelectedUsers,"title-left":e.$t("Available"),"title-right":e.$t("Selectedusers"),"moved-item-location":"bottom","target-id":"ListViewUsers"}}):e._e()],1),t("div",{staticClass:"col-lg-12 text-right mt-3"},[t("a",{staticClass:"btn btn-secondary mr-1",attrs:{href:"javascript:;",title:e.$t("BacktoList")},on:{click:function(t){return e.BackToList()}}},[t("em",{staticClass:"fa fa-angle-double-left pr-2"}),e._v(" "+e._s(e.$t("BacktoList"))+" ")]),t("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;",title:e.$t("Next")},on:{click:function(t){return e.ShowNextTab(2)}}},[t("em",{staticClass:"fa fa-angle-double-right pr-2"}),e._v(" "+e._s(e.$t("Next"))+" ")])])])])]),t("div",{staticClass:"tab-pane",attrs:{id:"step2"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[e.UnselectedItems&&e.UnselectedItems.length>0?t("mover",{attrs:{"left-items":e.UnselectedItems,"right-items":e.SelectedItems,"title-left":e.$t("AvailableFields"),"title-right":e.$t("SelectedFields"),"moved-item-location":"bottom","max-item":"25"}}):e._e()],1),t("div",{staticClass:"col-12 text-right mt-3"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",title:e.$t("Next")},on:{click:function(t){return e.ShowNextTab(3)}}},[t("em",{staticClass:"fa fa-angle-double-right pr-2"}),e._v(" "+e._s(e.$t("Next"))+" ")])])])])]),t("div",{staticClass:"tab-pane",attrs:{id:"step3"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"container-fluid p-0",staticStyle:{"min-height":"416px"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("searchfilter",{attrs:{submodulecode:e.SubmoduleCode,modulename:e.ModuleName,viewId:e.ViewData.ViewId,"filter-type":"VIEW"}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])])],1),t("div",{staticClass:"col-12 text-right mt-3"},[t("a",{staticClass:"btn btn-success mr-1",attrs:{href:"javascript:;",title:e.$t("Save")},on:{click:function(t){return e.SaveViewData()}}},[t("em",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("Save"))+" ")])])])])])])])])],1)])])])],1)])])])},s=[],o=(a("14d9"),a("9769")),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"listing mover-panel",attrs:{id:e.targetId}},[t("div",{staticClass:"border-0 p-0 d-flex flex-wrap"},[t("div",{staticClass:"mover-panel-box leftpanel",attrs:{id:"MoverLeft"}},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleLeft))])])]),t("div",{staticClass:"col-12 pl-0 mt-2 px-small-0"},[t("div",{staticClass:"col-sm-12 col-md-8 col-lg-8 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Search,expression:"Search"}],staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search by Name",autocomplete:"off"},domProps:{value:e.Search},on:{keyup:function(t){return e.SearchData()},input:function(t){t.target.composing||(e.Search=t.target.value)}}})])]),t("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 float-left pl-0 px-small-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:e.$t("Search"),href:"javascript:;"},on:{click:function(t){return e.SearchData()}}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearData()}}},[t("em",{staticClass:"fa fa-refresh"})])])])]),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{"aria-describedby":"fildname"}},[t("thead",{staticClass:"thead-bg"},[t("tr",{attrs:{role:"row"}},[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("fieldName")))])])]),t("tbody",{attrs:{id:e.targetId+"LeftItems"}},[e._l(e.unselectedItems,(function(a,i){return t("tr",{class:{"low-bar":a.isSelected,even:i%2==2,odd:i%2>0},attrs:{Key:a,"data-id":a.value,"data-side":"left","data-index":i},on:{click:function(t){return e.selectItem(a,e.unselectedItems)}}},[t("td",{staticClass:"sorting_1"},[e._v(e._s(e.$t(a.displayValue)))])])})),null==e.unselectedItems||0==e.unselectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger"},[e._v(" "+e._s(e.$t("NoRecordfound")))])]):e._e()],2)])])])],1)]),t("div",{staticClass:"mover-controls"},["false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllRight")},on:{click:function(t){return e.moveAllRight()}}},[t("em",{staticClass:"fa fa-angle-double-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-double-right fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]):e._e(),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveRight")},on:{click:function(t){return e.moveRight()}}},[t("em",{staticClass:"fa fa-angle-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-right fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveLeft")},on:{click:function(t){return e.moveLeft()}}},[t("em",{staticClass:"fa fa-angle-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-left fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]),"false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllLeft")},on:{click:function(t){return e.moveAllLeft()}}},[t("em",{staticClass:"fa fa-angle-double-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa fa-angle-double-left fa-2x d-none d-md-block d-block",attrs:{"aria-hidden":"true"}})]):e._e()]),t("div",{staticClass:"mover-panel-box rightpanel",attrs:{id:"MoverRight"}},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleRight))])])]),e._m(0),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{id:"example","aria-describedby":"mover"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("fieldName"))+" ")])]),t("th",{staticClass:"text-center",staticStyle:{width:"100px"},attrs:{scope:"col"}},[e._v(" "+e._s(e.$t("Sortable")))])])]),t("tbody",{attrs:{id:e.targetId+"RightItems"}},[e._l(e.selectedItems,(function(a,i){return t("tr",{class:{even:i%2==2,odd:i%2>0,"low-bar":a.isSelected},attrs:{"data-id":a.value,"data-side":"right","data-index":i,Key:a},on:{click:function(t){return e.selectItem(a,e.selectedItems)}}},[t("td",[t("span",{staticClass:"my-handle"},[e._v(e._s(e.$t(a.displayValue)))])]),t("td",{staticClass:"text-center"},[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.isSortable,expression:"item.isSortable"}],staticClass:"form-check-input float-right custom-control-input multilevel",staticStyle:{display:"none"},attrs:{disabled:0==a.isSortableEnabled,id:a.value,name:a.value,type:"checkbox"},domProps:{value:a.isSortable,checked:Array.isArray(a.isSortable)?e._i(a.isSortable,a.isSortable)>-1:a.isSortable},on:{change:function(t){var i=a.isSortable,s=t.target,o=!!s.checked;if(Array.isArray(i)){var l=a.isSortable,n=e._i(i,l);s.checked?n<0&&e.$set(a,"isSortable",i.concat([l])):n>-1&&e.$set(a,"isSortable",i.slice(0,n).concat(i.slice(n+1)))}else e.$set(a,"isSortable",o)}}}),t("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:a.value}})])])])})),null==e.selectedItems||0==e.selectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(" "+e._s(e.$t("NoFieldSelected")))])]):e._e()],2)])])])],1)])])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 pl-0 mt-2 d-none"},[t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pl-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",id:"Go",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"}},[t("em",{staticClass:"fa fa-refresh"})])])])])}],r=a("aa47"),c={props:{titleLeft:{type:String,default:"Available"},titleRight:{type:String,default:"Selected"},movedItemLocation:{type:String,default:"top"},leftItems:Array,rightItems:Array,targetId:{type:String,default:"Mover"},normalizeLists:{type:Boolean,default:!0},fontAwesome:{type:Boolean,default:!0},moveAll:{type:Boolean,default:!0},maxItem:{type:String,default:null}},methods:{raiseItemMoved:function(e,t,a){this.lastMovedItem={item:e,targetList:t,listType:a},this.$emit("item-moved",this.lastMovedItem)}},data:function(){var e={selectedSortable:null,unselectedSortable:null,selectedItem:{},selectedList:null,selectedItems:this.rightItems,unselectedItems:[],AllItems:[],lastMovedItem:null,Search:"",initialize:function(t){var a={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,sort:!1,disabled:!0},i={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,handle:".my-handle",nodeName:"tr"},s=t.targetId,o=document.getElementById(s+"LeftItems");e.unselectedSortable=r["a"].create(o,a);var l=document.getElementById(s+"RightItems");e.selectedSortable=r["a"].create(l,i),t.normalizeLists&&e.normalizeListValues()},selectItem:function(e,t){var a=this;if(e.hasOwnProperty("length")){if(t.length>0&&(e=t[0]),!e)return}else e.isSelected=!e.isSelected,a.selectedItem=e,a.selectedList=t},moveRight:function(e,t){var a=this;if(!e)e=$.grep(a.unselectedItems,(function(e,t){return e.isSelected}));e&&(a.selectedItems.length>a.maxItem-1&&a.maxItem>0?a.ShowAlert(a.$t([a.$t(a.maxItem)]),"warning",!0,a.$t("Alert")):e.length+a.selectedItems.length>a.maxItem&&a.maxItem>0?a.ShowAlert(a.$t("SelectFieldMessage",[a.$t(a.maxItem)]),"warning",!0,a.$t("Alert")):($.each(e,(function(e,t){t.isSelected=!1;var i=a.unselectedItems.indexOf(t);if(a.unselectedItems.splice(i,1),"number"===typeof e)a.selectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.selectedItems.unshift(t);else{a.selectedItems.push(t);var s=a.$el.querySelector(".mover-right>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){a.selectItem(e,a.selectedItems),a.raiseItemMoved(e,a.selectedItems,"right")}),1),a.SetCheckbox("right",a)))},moveLeft:function(){var e=this,t=$.grep(e.selectedItems,(function(e,t){return e.isSelected}));t&&($.each(t,(function(t,a){a.isSelected=!1;var i=e.selectedItems.indexOf(a);if(e.selectedItems.splice(i,1),"number"===typeof t)e.unselectedItems.splice(t,0,a);else if("top"==e.movedItemLocation)e.unselectedItems.unshift(a);else{e.unselectedItems.push(a);var s=e.$el.querySelector(".mover-left>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){e.selectItem(t,e.unselectedItems),e.raiseItemMoved(t,e.unselectedItems,"left")}),10),e.SetCheckbox("left",e))},SetCheckbox:function(e,t){setTimeout((function(){$(".mover-panel :checkbox").prop("checked",!0)}),100)},moveAllRight:function(){for(var e=this,t=e.unselectedItems.length-1;t>=0;t--){var a=e.unselectedItems[t];e.unselectedItems.splice(t,1),e.selectedItems.push(a)}},moveAllLeft:function(){for(var e=this,t=e.selectedItems.length-1;t>=0;t--){var a=e.selectedItems[t];e.selectedItems.splice(t,1),e.unselectedItems.push(a)}},refreshListDisplay:function(){setTimeout((function(){var t=e.selectedItems;e.selectedItems=[],e.selectedItems=t,t=e.unselectedItems,e.unselectedItems=[],e.unselectedItems=t}),10)},SearchData:function(){var e=this,t=e.Search;t=t.toLowerCase(),e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length})),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)}))},ClearData:function(){var e=this;e.Search="",e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length}))},onSorted:function(t){var a=t.item.dataset["id"],i=t.item.dataset["side"],s=t.item.dataset["index"];if("left"==i){var o=e.SortItemOfList(e.unselectedItems,a,s,t.newIndex);e.unselectedItems=[],setTimeout((function(){e.unselectedItems=o}),1)}else o=e.SortItemOfList(e.selectedItems,a,s,t.newIndex),e.selectedItems=[],setTimeout((function(){e.selectedItems=o}),1)},SortItemOfList:function(t,a,i,s){var o=t.find((function(e){return e.value==a}));return o?(t.splice(i,1),t.splice(s,0,o),t.forEach((function(e){e.isSelected=!1})),e.selectItem(o,t),t):t},onListDrop:function(e){return!1},normalizeListValues:function(){if(e.selectedItems&&0!=e.selectedItems.length&&e.unselectedItems&&0!=e.unselectedItems.length)for(var t of e.selectedItems){var a=t,i=e.unselectedItems.findIndex((function(e){return e.value==a.value}));i>-1&&e.unselectedItems.splice(i,1)}}},t=this;return setTimeout((function(){e.initialize(t)}),100),e},created:function(){var e=this;setTimeout((function(){var t=JSON.parse(JSON.stringify(e.leftItems));$.each(t,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)})),e.unselectedItems=JSON.parse(JSON.stringify(e.leftItems));var a=JSON.parse(JSON.stringify(e.rightItems));$.each(a,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)}))}),1e3),setTimeout((function(){e.SetBootstraptoolTip()}),200)}},d=c,u=a("2877"),p=Object(u["a"])(d,l,n,!1,null,null,null),m=p.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-fluid mover-panel"},[t("div",{staticClass:"border-0 p-0 d-flex flex-wrap"},[t("div",{staticClass:"mover-panel-box leftpanel"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleLeft))])])]),t("div",{staticClass:"col-12 pl-0 mt-2 px-small-0"},[t("div",{staticClass:"col-sm-12 col-md-4 col-lg-4 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.UserName,expression:"UserName"}],staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:e.GetPlaceHoder(),autocomplete:"off"},domProps:{value:e.UserName},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.SearchData()},input:function(t){t.target.composing||(e.UserName=t.target.value)}}})])]),t("div",{staticClass:"col-sm-12 col-md-5 col-lg-5 float-left pr-1 pl-0 px-small-0"},[t("div",{staticClass:"form-group mb-1"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.DepartmentName,expression:"DepartmentName"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.DepartmentName=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("SelectDepartment")))]),e._l(e.GetDistinctArray(e.leftItems),(function(a,i){return t("option",{key:i,domProps:{value:a}},[e._v(e._s(a))])}))],2)])]),t("div",{staticClass:"col-sm-12 col-md-3 col-lg-3 float-left pl-0 px-small-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline d-flex"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:e.$t("Search"),href:"javascript:;"},on:{click:function(t){return e.SearchData()}}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:e.$t("Clear")},on:{click:function(t){return e.ClearData()}}},[t("em",{staticClass:"fa fa-refresh"})])])])]),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{"aria-describedby":"moveruser"}},[t("thead",{staticClass:"thead-bg"},[t("tr",{attrs:{role:"row"}},[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("UserName")))]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Department")))])])]),t("tbody",{attrs:{id:e.targetId+"LeftItems"}},[e._l(e.unselectedItems,(function(a,i){return t("tr",{class:{"low-bar":a.isSelected,even:i%2==2,odd:i%2>0},attrs:{"data-id":a.value,"data-side":"left","data-index":i},on:{click:function(t){return e.selectItem(a,e.unselectedItems)}}},[t("td",{staticClass:"sorting_1"},[e._v(e._s(a.displayValue))]),t("td",{staticClass:"sorting_1"},[e._v(e._s(a.departmentName))])])})),null==e.unselectedItems||0==e.unselectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(e._s(e.$t("NoUserFound")))])]):e._e()],2)])])])],1)]),t("div",{staticClass:"mover-controls"},["false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllRight")},on:{click:function(t){return e.moveAllRight()}}},[t("em",{staticClass:"fa fa-angle-double-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-double-right fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]):e._e(),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveRight")},on:{click:function(t){return e.moveRight()}}},[t("em",{staticClass:"fa fa-angle-down fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-right fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]),t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveLeft")},on:{click:function(t){return e.moveLeft()}}},[t("em",{staticClass:"fa fa-angle-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa-angle-left fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]),"false"!=e.moveAll?t("button",{attrs:{type:"button","data-toggle-tooltip":"tooltip",title:e.$t("MoveAllLeft")},on:{click:function(t){return e.moveAllLeft()}}},[t("em",{staticClass:"fa fa-angle-double-up fa-2x d-md-none d-none",attrs:{"aria-hidden":"true"}}),t("em",{staticClass:"fa fa fa-angle-double-left fa-2x d-block d-md-block",attrs:{"aria-hidden":"true"}})]):e._e()]),t("div",{staticClass:"mover-panel-box rightpanel"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.titleRight))])])]),e._m(0),t("div",{staticClass:"listing mt-2"},[t("vue-scroll",[t("div",{staticClass:"table-responsive scrollmoverdiv",staticStyle:{"max-height":"500px"}},[t("table",{staticClass:"table table-bordered",attrs:{id:"example","aria-describedby":"mover"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("UserName")))]),t("th",{attrs:{scope:"col"}},[e._v(e._s(e.$t("Department")))])])]),t("tbody",{attrs:{id:e.targetId+"RightItems"}},[e._l(e.selectedItems,(function(a,i){return t("tr",{key:i,class:{even:i%2==2,odd:i%2>0,"low-bar":a.isSelected},attrs:{"data-id":a.value,"data-side":"right"},on:{click:function(t){return e.selectItem(a,e.selectedItems)}}},[t("td",[t("span",{staticClass:"my-handle"},[e._v(e._s(a.displayValue))])]),t("td",[e._v(e._s(a.departmentName))])])})),null==e.selectedItems||0==e.selectedItems.length?t("tr",{staticStyle:{cursor:"initial"}},[t("td",{staticClass:"text-center text-danger",attrs:{colspan:"2"}},[e._v(e._s(e.$t("UserNotSelect")))])]):e._e()],2)])])])],1)])])])},h=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12 pl-0 mt-2 d-none"},[t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pr-1 pl-0"},[t("div",{staticClass:"form-group mb-0"},[t("input",{staticClass:"form-control",attrs:{id:"search",maxlength:"50",type:"text",placeholder:"Search By Title",autocomplete:"off"}})])]),t("div",{staticClass:"col-4 float-left pl-0"},[t("div",{staticClass:"search-btm-btn background-0 text-left form-check-inline d-flex"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"",id:"Go",href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Search"}},[t("em",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Clear"}},[t("em",{staticClass:"fa fa-refresh"})])])])])}],g={props:{titleLeft:{type:String,default:"Available"},titleRight:{type:String,default:"Selected"},movedItemLocation:{type:String,default:"top"},leftItems:Array,rightItems:Array,targetId:{type:String,default:"Mover"},normalizeLists:{type:Boolean,default:!0},fontAwesome:{type:Boolean,default:!0},moveAll:{type:Boolean,default:!0},maxItem:{type:Number,default:0}},methods:{raiseItemMoved:function(e,t,a){this.lastMovedItem={item:e,targetList:t,listType:a},this.$emit("item-moved",this.lastMovedItem)},GetDistinctArray:function(e){return e.map((function(e){return e.departmentName})).filter((function(e,t,a){return a.indexOf(e)===t}))},GetPlaceHoder:function(){return this.$t("SearchbyFieldName"),this.$t("Name")}},data:function(){var e={selectedSortable:null,unselectedSortable:null,selectedItem:{},selectedList:null,selectedItems:this.rightItems,AllItems:[],unselectedItems:[],lastMovedItem:null,DepartmentArray:this.department,UserName:"",DepartmentName:"",initialize:function(t){var a={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,sort:!1,disabled:!0},i={group:"_mvgp_"+(new Date).getTime(),ghostClass:"mover-ghost",chosenClass:"mover-selected",onAdd:e.onListDrop,onUpdate:e.onSorted,handle:".my-handle"},s=t.targetId,o=document.getElementById(s+"LeftItems");e.unselectedSortable=r["a"].create(o,a);var l=document.getElementById(s+"RightItems");e.selectedSortable=r["a"].create(l,i),t.normalizeLists&&e.normalizeListValues()},selectItem:function(e,t){var a=this;(e||(t.length>0&&(e=t[0]),e))&&(e.isSelected=!e.isSelected,a.selectedItem=e,a.selectedList=t)},SetCheckbox:function(e){setTimeout((function(){$(".mover-panel :checkbox").prop("checked",!1)}),100)},moveRight:function(e,t){var a=this;if(!e)e=$.grep(a.unselectedItems,(function(e,t){return e.isSelected}));e&&(a.selectedItems.length>a.maxItem-1&&a.maxItem>0?alertR(this.$t("SelectFieldMessage")+a.maxItem,!0,this.$t("Alert")):($.each(e,(function(e,t){t.isSelected=!1;var i=a.unselectedItems.indexOf(t);if(a.unselectedItems.splice(i,1),console.log(a.selectedItems),"number"===typeof e)e=a.selectedItems.hasOwnProperty("length")?a.selectedItems.length:0,a.selectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.selectedItems.unshift(t);else{a.selectedItems.push(t);var s=a.$el.querySelector(".mover-right>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}console.log(a.selectedItems)})),setTimeout((function(){a.selectItem(e,a.selectedItems),a.raiseItemMoved(e,a.selectedItems,"right")}),10),a.SetCheckbox("right")))},moveLeft:function(e,t){var a=this;e=$.grep(a.selectedItems,(function(e,t){return e.isSelected}));e&&($.each(e,(function(e,t){t.isSelected=!1;var i=a.selectedItems.indexOf(t);if(a.selectedItems.splice(i,1),"number"===typeof e)a.unselectedItems.splice(e,0,t);else if("top"==a.movedItemLocation)a.unselectedItems.unshift(t);else{a.unselectedItems.push(t);var s=a.$el.querySelector(".mover-left>.mover-panel");setTimeout((function(){s.scrollTop=s.scrollHeight}))}})),setTimeout((function(){a.selectItem(e,a.unselectedItems),a.raiseItemMoved(e,a.unselectedItems,"left")}),10),a.SetCheckbox("left"))},moveAllRight:function(){for(var e=this,t=e.unselectedItems.length-1;t>=0;t--){var a=e.unselectedItems[t];e.unselectedItems.splice(t,1),e.selectedItems.push(a)}e.SetCheckbox()},moveAllLeft:function(){for(var e=this,t=e.selectedItems.length-1;t>=0;t--){var a=e.selectedItems[t];e.selectedItems.splice(t,1),e.unselectedItems.push(a)}e.SetCheckbox()},refreshListDisplay:function(){var e=this;setTimeout((function(){var t=e.selectedItems;e.selectedItems=[],e.selectedItems=t,t=e.unselectedItems,e.unselectedItems=[],e.unselectedItems=t}),10)},SearchData:function(){var e=this,t=e.UserName,a=e.DepartmentName;e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length})),""!=$.trim(t)&&""==$.trim(a)?(t=t.toLowerCase(),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)}))):""==$.trim(t)&&""!=$.trim(a)?e.unselectedItems=$.grep(e.unselectedItems,(function(e){return e.departmentName==a})):""!=$.trim(t)&&""!=$.trim(a)&&(t=t.toLowerCase(),e.unselectedItems=$.grep(e.unselectedItems,(function(e){return-1!=e.displayValue.toLowerCase().indexOf(t)&&e.departmentName==a})))},ClearData:function(){var e=this;e.UserName="",e.DepartmentName="",e.unselectedItems=e.AllItems.filter((function(t){return 0==e.selectedItems.filter((function(e){return e.value==t.value})).length}))},onSorted:function(t){var a=t.item.dataset["id"],i=t.item.dataset["side"],s=t.item.dataset["index"];if("left"==i){var o=e.SortItemOfList(e.unselectedItems,a,s,t.newIndex);e.unselectedItems=[],setTimeout((function(){e.unselectedItems=o}),1)}else o=e.SortItemOfList(e.selectedItems,a,s,t.newIndex),e.selectedItems=[],setTimeout((function(){e.selectedItems=o}),1)},SortItemOfList:function(e,t,a,i){var s=this,o=e.find((function(e){return e.value==t}));return o?(e.splice(a,1),e.splice(i,0,o),e.forEach((function(e){e.isSelected=!1})),s.selectItem(o,e),e):e},onListDrop:function(e){var t=this,a=e.item.dataset["id"],i=e.item.dataset["side"],s=e.newIndex;if("left"==i){var o=t.unselectedItems.find((function(e){return e.value==a}));t.moveRight(o,s),o.isSelected=!0;var l=t.unselectedItems;t.unselectedItems=[],setTimeout((function(){t.unselectedItems=l}))}else{o=t.selectedItems.find((function(e){return e.value==a}));o.isSelected=!0,t.moveLeft(o,s);l=t.selectedItems;t.selectedItems=[],setTimeout((function(){t.selectedItems=l}))}},normalizeListValues:function(){var e=this;if(e.selectedItems&&0!=e.selectedItems.length&&e.unselectedItems&&0!=e.unselectedItems.length)for(var t of e.selectedItems){var a=t,i=e.unselectedItems.findIndex((function(e){return e.value==a.value}));i>-1&&e.unselectedItems.splice(i,1)}}},t=this;return setTimeout((function(){e.initialize(t)}),100),e},created:function(){var e=this;setTimeout((function(){var t=JSON.parse(JSON.stringify(e.leftItems));$.each(t,(function(t,a){let i=e.AllItems.filter((function(e){return e.value==a.value}));0==i.length&&e.AllItems.push(a)})),e.unselectedItems=JSON.parse(JSON.stringify(e.leftItems));var a=JSON.parse(JSON.stringify(e.rightItems));$.each(a,(function(t,a){0==e.AllItems.filter((function(e){return e.value==a.value})).length&&e.AllItems.push(a)}))}),1e3),setTimeout((function(){e.SetBootstraptoolTip()}),200)}},v=g,_=Object(u["a"])(v,f,h,!1,null,null,null),C=_.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100 float-left px-3 listing"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"form-content border-0"},[e.showAddData?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left",attrs:{id:"divManageSearchCriteria"}},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("Form",{ref:"form",scopedSlots:e._u([{key:"default",fn:function({values:a,meta:i}){return[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered nowrap mt-0 mb-0",attrs:{"aria-describedby":"layoutfilter"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[t("span",[e._v(e._s(e.$t("fieldName")))])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("ConditionalOperator")))])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("Value")))])]),t("th",{staticClass:"text-center",attrs:{scope:"col"}})])]),t("tbody",e._l(e.filterItemData,(function(a,i){return t("tr",{key:i},[t("td",[t("Field",{attrs:{name:"field_name"+(i+1),"data-vv-name":"SearchFilter.fieldName"+(i+1),rules:{required:a.is_required},label:"Field Name"},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.field_name,expression:"item.field_name"}],class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"field_name"+(i+1)},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"field_name",t.target.multiple?i:i[0])},function(t){return e.GetOperatorData(t,a,i)}],"update:modelValue":o}},[t("option",{attrs:{"data-index":i,value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.fieldNameData,(function(a,i){return t("option",{key:i,domProps:{value:String(a.custom_field_id)}},[e._v(" "+e._s(e.$t(a.display_name)))])}))],2)]}}],null,!0)})],1),t("td",[t("Field",{attrs:{name:"operator"+(i+1),rules:{required:a.is_required},label:"operator"},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("select",{directives:[{name:"model",rawName:"v-model",value:a.operator,expression:"item.operator"}],class:{"form-control":!0,disableAria:!0,"is-invalid":s[0]},attrs:{name:"operator"+(i+1)},on:{"update:modelValue":o,change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(a,"operator",t.target.multiple?i:i[0])},function(t){return e.ShowFieldValue(t,a,i)}]}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(a.operator_list,(function(a,i){return t("option",{key:i,domProps:{value:String(a.OPERATOR_ID)}},[e._v(" "+e._s(a.OPERATOR_DISPLAY_NAME))])}))],2)]}}],null,!0)})],1),t("td",{staticClass:"overflow-visible"},["date"==a.dt_code||"datetime"==a.dt_code?t("div",{class:{"col-5 p-0 float-left pr-1":"between"==a.operator_expression}},[t("Field",{attrs:{name:"date"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("v-date-picker",{staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,name:"date"+a.label+i},on:{"dp-hide":function(t){a.second_value="",e.SetValues(t,a)},"update:modelValue":o,input:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)})],1):e._e(),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(" "+e._s(e.$t("And","And")))]),"date"!=a.dt_code&&"datetime"!=a.dt_code||"between"!=a.operator_expression?e._e():t("div",{class:{"input-group":!0,"col-5 p-0 float-left":"between"==a.operator_expression}},[t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("v-date-picker",{ref:"SecondDatePicker",refInFor:!0,staticClass:"input-group",class:{disableAria:!0,"is-invalid":("date"==a.dt_code||"datetime"==a.dt_code)&&s[0]},attrs:{popover:e.popover,"minute-increment":5,name:"second"+a.label+i},on:{"dp-hide":function(t){a.second_value="",e.SetValues(t,a)},"update:modelValue":o,input:function(t){return e.SetValues(t,a)}},scopedSlots:e._u([{key:"default",fn:function({inputValue:a,inputEvents:i,togglePopover:s}){return[t("input",e._g({staticClass:"form-control",domProps:{value:a}},i)),t("div",{staticClass:"input-group-append",on:{click:function(e){return s()}}},[t("span",{staticClass:"input-group-text"},[t("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:a.second_value,callback:function(t){e.$set(a,"second_value",t)},expression:"item.second_value"}})]}}],null,!0)})],1),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code?t("Field",{attrs:{name:a.label+i,rules:{required:a.is_required},label:"Value"},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{id:a.label+i,name:a.label+i,type:"text"},domProps:{value:a.value},on:{input:[function(t){t.target.composing||e.$set(a,"value",t.target.value)},function(t){return e.SetValues(t,a)}]}})]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("div",{staticClass:"col-2 float-left",staticStyle:{"margin-top":"6px"}},[e._v(e._s(e.$t("And","And"))+" ")]):e._e(),"Lookup"!=a.picklist_options&&"date"!=a.dt_code&&"datetime"!=a.dt_code&&"radio"!=a.dt_code&&"select"!=a.dt_code&&"textarea"!=a.dt_code&&"checkbox"!=a.dt_code&&"between"==a.operator_expression?t("Field",{attrs:{name:"second"+a.label+i,rules:{required:a.is_required},label:"second"+a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s}){return[t("input",{directives:[{name:"model",rawName:"v-model",value:a.second_value,expression:"item.second_value"}],class:{"form-control disableAria":!0,"is-invalid":s[0],"col-5 float-left":"between"==a.operator_expression},attrs:{type:"text",id:a.label,name:"second"+a.label+i},domProps:{value:a.second_value},on:{input:[function(t){t.target.composing||e.$set(a,"second_value",t.target.value)},function(t){return e.SetValues(t,a,"second")}]}})]}}],null,!0)}):e._e(),"textarea"==a.dt_code?t("Field",{attrs:{name:"textarea"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:i}){return[t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"textarea"==a.dt_code&&i[0]},attrs:{id:a.label},domProps:{value:a.value},on:{change:function(t){return e.SetValues(t,a)},input:function(t){t.target.composing||e.$set(a,"value",t.target.value)}}})]}}],null,!0)}):e._e(),"radio"==a.dt_code?t("div",{staticClass:"form-control pl-4 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"form-check form-check-inline custom-control mx-4 pl-2 custom-radio",attrs:{key:i.name}},[t("Field",{attrs:{name:"rdo_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.value,expression:"item.value"}],staticClass:"dynamic form-check-input custom-control-input",attrs:{id:"rdo_"+a.custom_field_id+i.value,name:"rdo_"+a.custom_field_id+i.value,"data-resource":i.name,type:"radio"},domProps:{value:i.value,checked:i.value==a.value,checked:e._q(a.value,i.value)},on:{change:[function(t){return e.$set(a,"value",i.value)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universalradio-custom-control-label pl-0 pt-0 dynamic",attrs:{for:"rdo_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"checkbox"==a.dt_code?t("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[t("div",{staticClass:"form-check form-check-inline"},e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return t("div",{key:s,staticClass:"custom-control custom-checkbox"},[t("Field",{attrs:{name:"chk_"+a.custom_field_id+i.value,rules:{required:a.is_required},label:a.label}},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.select_value,expression:"item.select_value"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+a.custom_field_id+i.value,name:"chk_"+a.custom_field_id+i.value,"data-resource-id":i.name,type:"checkbox"},domProps:{value:i.value,checked:Array.isArray(a.select_value)?e._i(a.select_value,i.value)>-1:a.select_value},on:{change:[function(t){var s=a.select_value,o=t.target,l=!!o.checked;if(Array.isArray(s)){var n=i.value,r=e._i(s,n);o.checked?r<0&&e.$set(a,"select_value",s.concat([n])):r>-1&&e.$set(a,"select_value",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(a,"select_value",l)},function(t){return e.SetValues(t,a)}]}})]),t("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+a.custom_field_id+i.value}},[e._v(e._s(i.name))])],1)})),0)]):e._e(),"Lookup"!=a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect"+a.label+i,rules:{required:a.is_required},label:a.label+i},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&s[0]},attrs:{multiple:"IN"==a.operator_expression||"NOT IN"==a.operator_expression,name:"Multiselect"+a.label+i,placeholder:"Search a value","filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:"normal"==a.dropdown_type?e.MakeNormalArray(a.select_options):a.select_options,object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:e.setSelectedValue,"update:modelValue":o},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)}),"Lookup"==a.picklist_options&&"select"==a.dt_code&&"normal"==a.dropdown_type&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select"+a.label+i,rules:{required:!0},label:a.operator},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select"+a.label+i},on:{"update:modelValue":o,change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeNormalArray(a.select_options),(function(i,s){return t("option",{key:s,domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name))])}))],2)]}}],null,!0)}):e._e(),"Lookup"!=a.picklist_options&&"select"==a.dt_code&&"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression?t("Field",{attrs:{name:"select2"+a.label+i,rules:{required:!0},label:a.operator},scopedSlots:e._u([{key:"default",fn:function({errors:s,changed:o}){return[t("select",{class:{"form-control disableAria":!0,"is-invalid":s[0]},attrs:{name:"select2"+a.label+i},on:{"update:modelValue":o,change:function(t){return e.SetValues(t,a,i)}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.MakeArray(a.picklist_options,a.dt_code),(function(i,s){return null!=a.picklist_options?t("option",{key:s,domProps:{selected:a.value==i.value,value:i.value}},[e._v(e._s(i.name))]):e._e()}))],2)]}}],null,!0)}):e._e(),"Lookup"==a.picklist_options||null==a.picklist_options||"select"!=a.dt_code||"custom"!=a.dropdown_type&&("normal"!=a.dropdown_type||"IN"!=a.operator_expression&&"NOT IN"!=a.operator_expression)?e._e():t("Field",{attrs:{name:"Multiselect2"+a.label+i,rules:{required:a.is_required},label:"name"},scopedSlots:e._u([{key:"default",fn:function({errors:i,changed:s}){return[t("Multiselect",{class:{disableAria:!0,"is-invalid":"Lookup"==a.picklist_options&&"select"==a.dt_code&&"custom"==a.dropdown_type&&i[0]},attrs:{placeholder:"Search a value","filter-results":!1,searchable:!0,"track-by":"value","show-no-results":!1,"internal-search":!1,"clear-on-select":!1,"close-on-select":!0,options:a.select_options,object:!0,label:"name"},on:{"search-change":function(t){return e.onSearch(t,a)},select:function(t){return e.setSelectedValue(a,t)},"update:modelValue":s},model:{value:a.value,callback:function(t){e.$set(a,"value",t)},expression:"item.value"}})]}}],null,!0)})],1),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.DeleteSearchItem(a,i)}}},[t("em",{staticClass:"fa fa-trash action-icon text-danger"})])])])})),0)]),t("div",{staticClass:"col-lg-12 text-right py-3"},[t("a",{staticClass:"btn btn-success",attrs:{href:"javascript:;",title:e.$t("Add")},on:{click:e.AddSearchData}},[t("em",{staticClass:"fa fa-plus pr-2",attrs:{"aria-hidden":"true"}}),e._v(e._s(e.$t("Add")))])])])]),e.isBlank(e.condition)?e._e():t("div",{staticClass:"col-12 float-left p-0 mt-2"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v(" "+e._s(e.$t("Condition"))+":")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.condition))])])]),t("div",{staticClass:"col-12 float-left p-0 mt-2 d-none"},[t("div",{staticClass:"alert alert-secondary py-2"},[t("label",{staticClass:"font-weight-bold mb-0"},[e._v("Database Condition:")]),t("label",{staticClass:"mb-0"},[e._v(e._s(e.databaseCondition))])])]),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left py-3 d-none"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"search-btm-btn"},[t("a",{staticClass:"btn btn-success formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("SaveAndSearch")},on:{click:function(t){return e.SubmitData("save")}}},[t("em",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("SaveAndSearch"))+" ")]),t("a",{staticClass:"btn btn-success formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("Search")},on:{click:function(t){return e.SubmitData("search")}}},[t("em",{staticClass:"fa fa-search pr-2"}),e._v(e._s(e.$t("Search")))]),t("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:e.$t("Cancel")},on:{click:function(t){e.showListData=!0,e.showAddData=!1,e.filterItemData=[],e.GetSearchFilterItemData()}}},[t("em",{staticClass:"fa fa-close pr-2"}),e._v(e._s(e.$t("Cancel")))])])])])]}}],null,!1,3916096390)})],1)]):e._e()])])])])},y=[],b=a("1157"),T=a.n(b),k={props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function},control:{type:Object},viewId:{type:Number},filterType:{type:String},tabId:{type:Number}},data:function(){return{filterData:[],showListData:!1,showAddData:!0,filterItemData:[],fieldNameData:[],options:"",submited:!1,databaseCondition:"",condition:"",filterName:"",validationForName:"",filterId:0,isDefault:!1,FormatForSecond:"",isFirstTime:!1,exitstingFilterNameArray:[],ApiURL:"",CurrentObject:null,ViewId:0,FilterType:"",TabId:0,popover:{visibility:"click"}}},created:function(){this.ViewId=this.viewId,this.FilterType=this.filterType,this.CurrentObject=this.control,this.TabId=this.tabId,this.GetSearchFilterItemData(),this.GetFieldNameData(),this.ViewId>0&&this.EditSearchFilterData(this.ViewId),setTimeout((function(){T()(".modal-dialog").draggable({handle:".modal-header"})}),1e3)},methods:{MakeArray:function(e,t){var a=[],i=String(e).split(",");if("radio"==t||"checkbox"==t){if(i.length>0)for(var s of i)if(s.split("|").length>1){var o={name:s.split("|")[0],value:s.split("|")[1]};a.push(o)}else{o={name:s,value:s};a.push(o)}}else if(i.length>0)for(var s of i){o={name:s,value:s};a.push(o)}return a},GetLocalizedValue:function(e,t){try{if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a!=String(e).toUpperCase()?a:(a=this.$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a!=String(t).toUpperCase()?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)}catch(i){console.log(i)}},MakeNormalArray:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}else e=[]},isBlank:function(e){return!e||/^\s*$/.test(e)},returnDateObject:function(e){var t=null;return e=void 0==e?"":e,""!=e&&(t=new Date(Date.parse(e))),{format:"MM-dd-yyyy",useStrict:!0,useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,minDate:t,widgetPositioning:{horizontal:"right",vertical:"bottom"}}},GetValidationF:function(e){var t={};return e.is_required&&(t["required"]=!0),e.length>0&&(t["max"]=e.length),"email"==e.validation_type&&(t["email"]=!0),"date"!=e.dt_code&&"datetime"!=e.dt_code||(t["date_format"]=String(Globalize.culture().calendar.patterns.d).toUpperCase()),"decimal"==e.dt_code&&(t["decimal"]=2),"mobile_phone"!=e.name&&"business_phone"!=e.name&&"fax"!=e.name&&"zipcode"!=e.name||"CRM_CONTACTS"!=this.submodulecode||(t["numeric"]=!0,t["max"]=15),"int"!=e.dt_code&&"bigint"!=e.dt_code||(t["numeric"]=!0),"url"==e.dt_code&&(t["url"]="require_protocol"),null!=e.regular_expression&&""!=e.regular_expression&&(t["regex"]=e.regular_expression),t},onSearch:async function(e,t){var a=t.value;"undefined"==typeof a&&(a=0);var i="id=&moduleName="+this.modulename+"&type="+t.field_code+"&search="+escape(e);"fill"==t.dependent_type&&(i+="&refId="+a),await o["a"].getDDLData(i).then((function(e){var a=[];return e.data,""!=e.data&&(a=e.data),t.select_options=a.DATA}))},setSelectedValue:function(e,t){try{setTimeout(()=>{this.SetCondition(),this.validateFilterData()},100)}catch(a){}},AddSearchData:function(){this.GetSearchFilterItemData()},DeleteSearchItem:function(e,t){var a=this,i=a.$t("ConfirmDelete");a.confirmR(i,!0,null,(function(){a.filterItemData.splice(t,1),a.SetCondition()}))},GetSearchFilterData:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;this.filterData=[],o["a"].SearchCriteriaListing(t).then((function(e){var t=e.data;if(null!=t)return this.filterData=t.DATA,this.filterData}))},GetFieldNameData:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode;"VIEW"==this.FilterType&&(t+="&reqFrom=MANAGEVIEW"),this.fieldNameData=[],o["a"].GetFieldName(t).then((function(t){var a=t.data;if(null!=a)return e.fieldNameData=a.DATA,e.fieldNameData}))},GetOperatorData:function(e,t){var a=e.target.value,i=T.a.grep(this.fieldNameData,(function(e,t){return e.custom_field_id==a})),s="";t.dt_code="",t.picklist_options=[],t.label="",t.dropdown_type="",t.select_options="",t.select_value="",t.length=0,t.operator="",t.field_code="",t.second_value="",t.display_name="",t.is_required=!1,i.length>0&&(s="ModifiedBy"==i[0].display_name||"Modified By"==i[0].display_name?"nvarchar":i[0].sql_type,t.dt_code=i[0].dt_code,t.picklist_options=i[0].picklist_options,t.label=i[0].label,t.dropdown_type=i[0].dropdown_type,t.select_options=i[0].select_options,t.length=i[0].length,t.display_name=i[0].display_name,t.field_code=i[0].field_code,t.is_required=i[0].is_required,t.validation_type=i[0].validation_type);var l="dataType="+s+"&customField="+a;t.operator_list=[],o["a"].GetOperator(l).then((function(e){var a=e.data;if(null!=a)return t.operator_list=a.DATA,t.operator_list})),t.field_name=a,t.value="",this.SetCondition(),this.validateFilterData()},SetValues:function(e,t,a){if("datetime"==t.dt_code||"decimal"==t.dt_code||"date"==t.dt_code)if("second"==a){var i=t.second_value;t.second_value=i}else{i=t.value;t.value=i}else"second"==a?t.second_value=e.target.value:t.value=e.target.value;this.SetCondition(),this.validateFilterData()},SetCondition:function(){var e="",t="",a=this,i="";T.a.each(a.filterItemData,(function(s,o){s>0&&(e+=" And ",t+=" and ");var l=o.field_name,n=T.a.grep(a.fieldNameData,(function(e){return e.custom_field_id==l}));"undefined"!=typeof n&&n.length>0&&(e+=a.GetLocalizedValue(n[0].label,n[0].display_name),"date"==n[0].dt_code||"datetime"==n[0].dt_code?t+="convert(date, "+n[0].name+", 23)":"CL.client"==n[0].name?n[0].name="CL.UserNames":"PMU.pm"==n[0].name?n[0].name="PMU.UserNames":t+=n[0].name.trimEnd());var r=o.operator;if(n=T.a.grep(o.operator_list,(function(e,t){return e.OPERATOR_ID==r})),"undefined"!=typeof n&&n.length>0&&(e=e+" "+n[0].OPERATOR_DISPLAY_NAME,i=n[0].OPERATOR_EXPRESSION,t+=" "+i),!a.isBlank(o.value)){var c=o.value,d=o.value;if("select"==o.dt_code&&"normal"==o.dropdown_type&&"IN"!=i&&"NOT IN"!=i){var u=a.MakeNormalArray(o.select_options);n=T.a.grep(u,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(c=n[0].name)}else if("select"==o.dt_code&&"custom"==o.dropdown_type||"select"==o.dt_code&&"normal"==o.dropdown_type&&("IN"==i||"NOT IN"==i)){if(Array.isArray(o.value)?(d=a.createString(o.value,"value"),c=a.createString(o.value,"name")):(d=o.value.value,c=o.value.name),"IN"==i||"NOT IN"==i){u=a.MakeNormalArray(o.select_options);n=T.a.grep(u,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(c=n[0].name),d="("+d+")"}}else if("select"==o.dt_code&&"custom"!=o.dropdown_type&&"normal"!=o.dropdown_type)if("IN"==i||"NOT IN"==i)Array.isArray(o.value)?(d=a.createString(o.value,"value"),c=a.createString(o.value,"name")):(d=o.value.value,c=o.value.name),d="("+d+")";else{u=a.MakeArray(o.picklist_options,o.dt_code);n=T.a.grep(u,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(c=n[0].name),d=" '"+d+"'"}else if("date"==o.dt_code||"datetime"==o.dt_code)"between"==i?(c=o.value+" And "+o.second_value,d="'"+a.$options.filters.formatDatee(o.value)+"' and '"+a.$options.filters.formatDatee(o.second_value)+"'"):(c=o.value,d="'"+a.$options.filters.formatDatee(o.value)+"'");else if("radio"==o.dt_code){u=a.MakeArray(o.picklist_options,o.dt_code);n=T.a.grep(u,(function(e,t){return e.value==o.value})),"undefined"!=typeof n&&n.length>0&&(c=n[0].name,d="'"+n[0].value+"'")}else if("Like"==i||"Not Like"==i)d="'%"+o.value+"%'";else if("Starts With"==i)d="'"+o.value+"%'",t=t.replace("Starts With","like");else if("Ends With"==i)d="'%"+o.value+"'",t=t.replace("Ends With","like");else if("between"==i)c=o.value+" And "+o.second_value,d="'"+o.value+"' and '"+o.second_value+"'";else if("IN"==i||"NOT IN"==i){for(var p=String(o.value).split(","),m="",f=0;f<p.length;f++)f>0&&(m+=" , "),m+="'"+p[f]+"'";d="("+m+")"}else d="'"+d+"'";"select"==o.dt_code&&"normal"==o.dropdown_type&&"event_location"==o.label?t+=" '"+d+"'":"select"==o.dt_code&&"normal"==o.dropdown_type&&"forecast_category_name"==o.label?t+=" '"+c+"'":"select"==o.dt_code&&"normal"==o.dropdown_type&&"display_icon"==o.label?t+=" '"+d+"'":t+=" "+d,e=e+" "+c}})),a.condition=e,a.databaseCondition=encodeURIComponent(t).replace(/'/g,"%27"),"undefined"!=typeof a.CurrentObject&&null!=a.CurrentObject?(a.CurrentObject.TabCondition=a.condition,a.CurrentObject.TabDatabaseCondition=a.databaseCondition):(a.$parent.$parent.ViewData.Condition=a.condition,a.$parent.$parent.ViewData.DatabaseCondition=a.databaseCondition),a.SubmitData()},ShowFieldValue:function(e,t){var a=e.target.value,i=T.a.grep(t.operator_list,(function(e,t){return e.OPERATOR_ID==a})),s="";i.length>0&&(s=i[0].OPERATOR_EXPRESSION),t.showSecondValue="between"==s,t.operator=a,t.operator_expression=s,this.SetCondition(),this.validateFilterData()},GetSearchFilterItemData:function(){var e={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:[],first_value:"",second_value:"",showSecondValue:!1,picklist_options:[],label:"",display_name:"",dropdown_type:"",select_options:"",length:0,field_code:"",select_value:"",is_required:!1};this.filterItemData.push(e)},ApplyFilter:function(e){this.databaseCondition=e,checkVue.searchCondition=this.databaseCondition,"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():(this.$parent.PageSize=10,this.$parent.FetchData()),this.$emit("close")},EditFilter:function(e,t){this.showListData=!1,this.showAddData=!0,"NotSaved"!=t?(this.filterId=e.FILTER_ID,this.EditSearchFilterData(this.filterId)):(this.filterName=this.$parent.appliedFilter[0].field_name.split("(")[0],this.filterItemData=this.$parent.appliedFilter[0])},deleteFilter:function(e){this.filterId=e.FILTER_ID;var t=this,a=t.$t("Delete"),i=t.$t("ConfirmDeleteFilter")+t.$t("Remove");t.confirmR(i,!0,a,(function(){var a="id="+e.FILTER_ID+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&isDelete=1";o["a"].SearchCriteriaById(a).then((function(a){var i=a.data;null!=i&&"SUCCESS"==i.MSG&&(t.GetSearchFilterData(),e.DATABASE_CONDITION==t.$parent.searchCondition&&(t.$parent.searchCondition="","undefined"!=typeof t.callbackfunction&&null!=t.callbackfunction?t.callbackfunction():t.$parent.FetchData()),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Filter")]),"success",!0,t.$t("Filter")))}))}))},EditSearchFilterData:function(e){var t=this,a=0;t.TabId>0&&(a=t.TabId);var i="id="+e+"&type="+t.FilterType+"&tabId="+a+"&moduleName="+t.modulename+"&subModuleCode="+t.submodulecode;t.filterItemData=[],o["a"].SearchCriteriaByIdView(i).then((function(a){var i=a.data;if(null!=i){var s=i.DATA,o=T.a.grep(s,(function(t,a){return t.VIEW_ID==e}));if(null!=o&&o.length>0&&(t.condition=o[0].CONDITION,t.databaseCondition=o[0].DATABASE_CONDITION),0==s.length){var l={field_name:"",dt_code:"",operator:"",operator_expression:"",operator_list:"",value:"",second_value:"",showSecondValue:!1,picklist_options:"",label:"",dropdown_type:"",select_options:"",length:"",field_code:"",select_value:"",is_required:!1};t.filterItemData.push(l)}T.a.each(s,(function(e,a){var i=a.FIRST_VALUE,s=a.SECOND_VALUE;"date"==a.DT_CODE&&(i=t.formatDate(i),"between"==a.OPERATOR_EXPRESSION&&(s=t.formatDate(s)));var o={field_name:a.FIELD_ID,dt_code:a.DT_CODE,operator:a.OPERATOR_ID,operator_expression:a.OPERATOR_EXPRESSION,operator_list:t.MakeNormalArray(a.OPERATOR_LIST),value:t.MakeNormalArray(i),second_value:s,showSecondValue:!t.isBlank(a.SECOND_VALUE),picklist_options:a.PICKLIST_OPTIONS,label:a.LABEL,dropdown_type:a.DROPDOWN_TYPE,select_options:t.MakeNormalArray(a.SELECT_OPTIONS),length:a.LENGTH,field_code:a.FIELD_CODE,select_value:t.MakeNormalArray(a.SELECT_OPTIONS),is_required:a.IS_REQUIRED};t.filterItemData.push(o)})),t.SubmitData()}}))},ClearFilter:function(){this.$parent.appliedFilter[0].searchCondition==this.$parent.searchCondition&&(this.$parent.searchCondition="","undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction?this.callbackfunction():this.$parent.FetchData()),this.$parent.appliedFilter=[]},SubmitData:function(e){var t=this;t.$refs.form.validate().then(e=>{if(e){t.$parent.appliedFilter=[];var a=t.filterItemData,i=[];T.a.each(a,(function(e,a){var s=a.value,o=a.second_value;"select"==a.dt_code&&"custom"==a.dropdown_type&&(s=Array.isArray(a.value)?t.createString(a.value,"value"):a.value.value),"date"==a.dt_code&&(t.isBlank(o)||"between"!=a.operator_expression||(o=t.$options.filters.formatDate(o)),s=t.$options.filters.formatDate(a.value));var l={fieldId:a.field_name,operatorId:a.operator,firstValue:s,secondValue:o};i.push(l)})),"undefined"!=typeof t.CurrentObject&&null!=t.CurrentObject?t.CurrentObject.TabData=i:t.$parent.$parent.ViewData.FilterData=i}})},validateFilterData:function(){var e=this;e.filterItemData.length>0&&""!=e.filterItemData[0].field_name&&null!=e.filterItemData[0].field_name?void 0!=e.$parent.$parent.isFilterDataValidationError&&e.$refs.form.validate().then(t=>{e.$parent.$parent.isFilterDataValidationError=!t}):e.$parent.$parent.isFilterDataValidationError=!1},inputEvents(){},inputValue(){}}},w=k,A=Object(u["a"])(w,S,y,!1,null,null,null),I=A.exports,N={components:{mover:m,moveuser:C,searchfilter:I},props:{submodulecode:{type:String,required:!0},modulename:{type:String,required:!0},callbackfunction:{type:Function},show:{type:Boolean},usertype:{type:String}},data:function(){return{isLoading:!1,StatusId:this.dataselected,ViewData:{ViewId:0,Name:"",Description:"",ApplyTo:1,ApplicableUser:"",SelectedUser:"",Selectoptions:"",ViewTabData:[],Condition:"",FilterData:[],DatabaseCondition:""},ListUnselectedUsers:[],ListSelectedUsers:[],ListDepartment:[],UnselectedItems:[],SelectedItems:[],SubmoduleCode:this.submodulecode,ModuleName:this.modulename,ShowLisiting:!0,ListingData:[],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,noRecord:!0,isClearViewDisabled:!0,isFilterDataValidationError:!1,toggleUserGuide:"d-none"}},created:function(){var e=this;e.GetViewList()},watch:{dataselected:function(e){this.StatusId=e}},methods:{close:function(){this.$parent.ShowManageView=!1,$("#modalManageView").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove()},AddNewView:function(){this.ShowLisiting=!1,this.ViewData.ViewId=0,this.ViewData.Name="",this.FetchData()},BackToList:function(){this.ShowLisiting=!0},ClearView:function(){var e=this,t={ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},a=e.$t("Leave_Confirm_Part1")+" "+e.$t("Clear")+" "+e.$t("View")+"?";e.confirmR(a,!0,e.$t("Confirm"),(function(){var a=JSON.stringify(t);o["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.body.Code)?(e.ShowAlert(e.$t("ClearSuccess",[e.$t("DefaultView")]),"success",!0,e.$t("Alert")),e.close(),e.callbackfunction()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))}))},DefaultView:function(){var e=this,t={ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},a=JSON.stringify(t);o["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ApplySuccess",[e.$t("Default View")]),"success",!0,e.$t("Alert")),e.close(),e.callbackfunction(),e.GetViewList()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))},OnChangeToggle:function(e){var t=this;e.target.checked?t.ViewData.ApplyTo=1:t.ViewData.ApplyTo=0},isBlank:function(e){return!e||/^\s*$/.test(e)},GetLocalizedValue:function(e,t){if(this.isBlank(t)){var a=this.$t(String(e).toUpperCase());return a||/^\s*$/.test(a)?a:(a=$t(String(e)),a||/^\s*$/.test(a)?a:e)}a=this.$t(String(t).toUpperCase());return a||/^\s*$/.test(a)?a:(a=this.$t(String(t)),a||/^\s*$/.test(a)?a:t)},CreateString:function(e,t,a){return e.map((function(e){return"int"==a?e[t]:"'"+e[t]+"'"})).join(",")},GetViewList:function(){var e=this,t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId+"&pageSize="+this.PageSize+"&pageNum="+this.PageNumber+"&sortBy="+this.SortBy+"&sortExp="+this.SortExp;o["a"].GetViewList(t).then((function(t){if(null!=t.data&&""!=t.data){e.ListingData=t.data.DATA,e.TotalRecords=e.ListingData[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1;var a=0;e.ListingData.forEach((function(e){e.IS_SLECTED_USER_ID>0&&(a+=1)}));var i=0;a>0?e.ListingData.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:parseInt(e.TotalRecords+1),VIEW_TYPE:"",USER_LIST:""}):e.ListingData.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:parseInt(e.TotalRecords+1),VIEW_TYPE:"",USER_LIST:""})}else e.noRecord=!1,e.TotalRecords=1,e.ListingData.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:e.TotalRecords,VIEW_TYPE:"",USER_LIST:""});setTimeout((function(){e.SetBootstraptoolTip()}),200),e.checkIfClearViewDisabled()}))},deleteView:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Remove"),(function(){var a={ids:e,moduleName:"",subModuleCode:"",refCode:"DELETE_HOME_MANAGE_VIEW"};t.isLoading=!0;var i=JSON.stringify(a);o["a"].CommonCommonDelete(i).then((function(e){t.isLoading=!1;"Success"==e.data[0].Status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("View")]),"success",!0,t.$t("Alert")),t.callbackfunction(),$("#modalManageView").modal("hide"),window.location.reload()):t.ShowAlert(t.$t("DeletedError",[t.$t("View")]),"warning",!0,t.$t("Alert"))}))}))},EditManageView:function(e){var t=this;t.ViewData.ViewId=e;var a="moduleName="+t.modulename+"&subModuleCode="+t.submodulecode+"&id="+t.ViewData.ViewId;o["a"].GetViewById(a).then((function(e){if(null!=e.data){var a=e.data.DATA;a.length>0&&(a=a[0],t.ViewData.Name=a.VIEW_NAME,t.ViewData.Description=a.DESCRIPTION,t.ViewData.ApplyTo=a.IS_APPLICABLE_TO_ALL,t.ViewData.Condition=a.CONDITION,t.ViewData.DatabaseCondition=encodeURIComponent(a.DATABASE_CONDITION)),t.ShowLisiting=!1,t.FetchData()}}))},ApplyView:function(e,t){var a=this;if(0==e)a.DefaultView();else{var i={ViewId:e,ModuleName:a.ModuleName,SubmoduleCode:a.submodulecode},s=JSON.stringify(i);o["a"].ApplyView(s).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(a.ShowAlert(a.$t("ApplySuccess",[a.$t(t)]),"success",!0,a.$t("Alert")),a.close(),a.callbackfunction(),a.GetViewList()):a.ShowAlert(a.$t("AddedError",[a.$t("View")]),"failure",!0,a.$t("Alert"))}))}},SaveViewData:function(){var e=this;$("#spnlistfieldssmessage").hide(),$("#spnusersmessage").hide(),$("#spncardfieldssmessage").hide(),$("#spncardtabsmessage").hide(),null!=e.SelectedItems&&0!=e.SelectedItems.length||$("#spnlistfieldssmessage").show(),"0"!=e.ViewData.IsApplicableToAll||null!=e.ListSelectedUsers&&0!=e.ListSelectedUsers.length||$("#spnusersmessage").show(),e.$refs.ManageViewLayoutData.validate().then(t=>{if(t){var a=[];$.each(e.SelectedItems,(function(e,t){var i={id:t.value,order:e+1,isSortable:t.isSortable};a.push(i)})),e.ViewData.DatabaseCondition=decodeURIComponent(e.ViewData.DatabaseCondition);var i={ViewData:e.ViewData,ListFields:a,FilterData:e.ViewData.FilterData,ShareUsers:e.CreateString(e.ListSelectedUsers,"value","int"),ModuleName:e.ModuleName,SubmoduleCode:e.submodulecode},s=JSON.stringify(i);o["a"].SaveView(s).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ViewData.ViewId>0?(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.callbackfunction()):(e.ShowAlert(e.$t("AddedSuccess",[e.$t("View")]),"success",!0,e.$t("Alert")),e.callbackfunction()),e.GetViewList(),e.ShowLisiting=!0,e.close()):e.ShowAlert(e.$t("AddedError",[e.$t("View")]),"failure",!0,e.$t("Alert"))}))}else console.log(this.$refs.ManageViewLayoutData.errors)})},FetchData:function(){var e=this;e.isLoading=!0;var t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId;e.UnselectedItems=[],e.SelectedItems=[],o["a"].ViewListFields(t).then((function(t){if(t.data.AVAILABLE_FIELDS.length!==t.data.SELECTED_FIELDS.length)for(var a=t.data.AVAILABLE_FIELDS.length-1;a>=0;a--)for(var i=0;i<t.data.SELECTED_FIELDS.length;i++)t.data.AVAILABLE_FIELDS[a]&&t.data.AVAILABLE_FIELDS[a].NAME===t.data.SELECTED_FIELDS[i].NAME&&t.data.AVAILABLE_FIELDS.splice(a,1);$.each(t.data.AVAILABLE_FIELDS,(function(t,a){var i={value:a.CUSTOM_FIELD_ID,displayValue:a.DISPLAY_NAME,isSortable:a.IS_SORTABLE,displayOrder:a.DISPLAY_ORDER,isSelected:!1,isSystemGenerated:a.IS_SYSTEM_GENERATED,isSortableEnabled:a.IS_SORTABLE_ENABLE};e.UnselectedItems.push(i)})),$.each(t.data.SELECTED_FIELDS,(function(t,a){var i={value:a.CUSTOM_FIELD_ID,displayValue:a.DISPLAY_NAME,isSortable:a.IS_SORTABLE,displayOrder:a.DISPLAY_ORDER,isSelected:!1,isSystemGenerated:a.IS_SYSTEM_GENERATED,isSortableEnabled:a.IS_SORTABLE_ENABLE};e.SelectedItems.push(i)})),e.isLoading=!1,e.FetchUserData()}))},FetchUserData:function(){var e=this;e.isLoading=!0,e.ListUnselectedUsers=[],e.ListSelectedUsers=[];var t="moduleName="+e.modulename+"&subModuleCode="+e.submodulecode+"&viewId="+e.ViewData.ViewId;o["a"].ViewListUsers(t).then((function(t){e.isLoading=!1;$.each(t.data.AVAILABLE_FIELDS,(function(t,a){var i={value:a.USER_ID,displayValue:a.USER_NAME,departmentName:a.DEPARTMENT_NAME,isSelected:!1};e.ListUnselectedUsers.push(i)})),$.each(t.data.SELECTED_FIELDS,(function(t,a){var i={value:a.USER_ID,displayValue:a.USER_NAME,departmentName:a.DEPARTMENT_NAME,isSelected:!1};e.ListSelectedUsers.push(i)}))}))},ShowNextTab:function(e){var t=this;if(2==e)$("#scrollbarreplyuserguideMangeView .con").html(t.$t("MangeViewUG2")),""==$.trim(t.ViewData.Name)?t.ShowAlert(t.$t("Required",[t.$t("ViewName")]),"warning",!0,t.$t("Alert")):2==t.ViewData.ApplyTo&&0==t.ListSelectedUsers.length?t.ShowAlert(t.$t("PleaseSelectAtleastOneUser"),"warning",!0,t.$t("Alert")):($(".view_tab a").removeClass("active show"),$("li.selectcolumn").find("a").addClass("active"),$(".view_tab .tab-pane").removeClass("active show"),$(".view_tab a[href='#step2']").addClass("active show"),$(".view_tab #step2").addClass("active show"));else if(3==e){$("#scrollbarreplyuserguideMangeView .con").html(t.$t("MangeViewUG3"));var a=25;""==$.trim(t.ViewData.Name)?t.ShowAlert(t.$t("Required",[t.$t("ViewName")]),!0,"warning",t.$t("Alert")):2==t.ViewData.ApplyTo&&0==t.ListSelectedUsers.length?t.ShowAlert(t.$t("PleaseSelectAtleastOneUser")):0==t.SelectedItems.length?t.ShowAlert(t.$t("Pleaseselectatleastonecolumn"),"warning",!0,t.$t("Alert")):t.SelectedItems.length>a?t.ShowAlert(t.$t("SelectFieldMessage",[a]),"warning",!0,t.$t("Alert")):($(".view_tab a").removeClass("active show"),$("li.filter").find("a").addClass("active"),$(".view_tab .tab-pane").removeClass("active show"),$(".view_tab a[href='#step3']").addClass("active show"),$(".view_tab #step3").addClass("active show"))}},checkIfClearViewDisabled:function(){var e=this;if(null!=e.ListingData&&e.ListingData.length>0){var t=e.ListingData.filter((function(e){return e.IS_SLECTED_USER_ID>0}));t.length>0?e.isClearViewDisabled=!1:e.isClearViewDisabled=!0}else e.isClearViewDisabled=!0},ShowTabData:function(e){"1"==e?($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG1")),$("li.general").find("a").addClass("active"),$("li.selectcolumn").find("a").removeClass("active"),$("li.filter").find("a").removeClass("active"),$("div#step1").addClass("active show"),$("div#step2").removeClass("active show"),$("div#step3").removeClass("active show")):"2"==e?($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG2")),$("li.general").find("a").removeClass("active"),$("li.selectcolumn").find("a").addClass("active"),$("li.filter").find("a").removeClass("active"),$("div#step1").removeClass("active show"),$("div#step2").addClass("active show"),$("div#step3").removeClass("active show")):"3"==e&&($("#scrollbarreplyuserguideMangeView .con").html(this.$t("MangeViewUG3")),$("li.general").find("a").removeClass("active"),$("li.selectcolumn").find("a").removeClass("active"),$("li.filter").find("a").addClass("active"),$("div#step1").removeClass("active show"),$("div#step2").removeClass("active show"),$("div#step3").addClass("active show")),this.$forceUpdate()},ShowUserGuide(){var e=this;"d-none"==e.toggleUserGuide&&(e.toggleUserGuide="d-block")}}},D=N,L=Object(u["a"])(D,i,s,!1,null,null,null);t["a"]=L.exports},"9d60":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("section",[t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v("Tickets")]),t("div",{staticClass:"p-name text-white px-2"},["normal"!=e.CompanyType?t("select",{directives:[{name:"model",rawName:"v-model",value:e.ViewTicketType,expression:"ViewTicketType"}],staticClass:"form-control float-left customized_ddl",staticStyle:{width:"168px"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.ViewTicketType=t.target.multiple?a:a[0]},function(t){return e.changeViewTicketType()}]}},[t("option",{attrs:{value:""}},[e._v("ALL Tickets")]),t("option",{attrs:{value:"FSM"}},[e._v("Field Service Ticket")]),t("option",{attrs:{value:"TKT"}},[e._v("Normal Tickets")])]):e._e(),t("select",{directives:[{name:"model",rawName:"v-model",value:e.userstatus,expression:"userstatus"}],staticClass:"form-control customized_ddl",staticStyle:{width:"150px"},attrs:{name:"ddlUserCurrentStatus",id:"ddlUserCurrentStatus"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.userstatus=t.target.multiple?a:a[0]},function(t){return e.UserCurrentStatus()}]}},[t("option",{attrs:{value:"Busy"}},[e._v("Busy")]),t("option",{attrs:{value:"Offline"}},[e._v("Offline")]),t("option",{attrs:{value:"Online"}},[e._v("Online")])])]),t("div",{directives:[{name:"show",rawName:"v-show",value:"normal"!=e.CompanyType,expression:"CompanyType != 'normal'"}],staticClass:"p-actions legends_topbar float-right"},[t("div",{staticClass:"clear showclear"}),t("a",{staticClass:"p-action-btn text-white align-items-center unpinscreenMap pinUnpinId",staticStyle:{display:"flex","align-items":"center","flex-direction":"column","align-content":"flex-end","justify-content":"flex-start","flex-wrap":"wrap",height:"52px"},attrs:{href:"javascript:;",id:"pinUnpinId",value:e.PinId,pinned:"0",title:"PIN"},on:{click:function(t){return e.SavePinView()}}},[t("i",{staticClass:"fa fa-thumb-tack",staticStyle:{"margin-top":"-3px",position:"absolute"},attrs:{"aria-hidden":"true"}}),t("span",{attrs:{id:"spnPin"}},[e._v(e._s(e.$t("PIN")))])]),t("div",{staticClass:"p-actions legends_topbar float-right"},[t("div",{staticClass:"p-action-map collapse_map"},[t("a",{staticClass:"e-c-map p-action-btn text-white align-items-center d-flex",attrs:{href:"javascript:;"},on:{click:e.ShowHideMap}},[t("i",{staticClass:"fa fa-angle-double-up pr-2",attrs:{id:"icnToggleMap"}}),t("span",{attrs:{id:"spnToggleMap"}},[e._v(e._s(e.mapHeaderText))])])])])])]),e.isShowMap?t("ManageMap",{key:e.componentKey,staticClass:"row",attrs:{mapType:e.MapType,mapContainer:"indexMapDiv",latLng:e.latLng,Data:e.mapObj,config:e.config}}):e._e(),t("loader",{attrs:{"is-visible":e.isLoading}}),t("tg-list",{directives:[{name:"show",rawName:"v-show",value:e.IsTicketingView,expression:"IsTicketingView"}],ref:"tgList",attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"ticket_id",listType:["List","Card"],ListData:e.TicketList,ViewList:e.ViewList,HeaderData:e.Headers,widgets:e.widgets,HeaderButtons:e.listheaderbuttons,TotalRecords:e.TotalRecords,SearchFields:e.leftSearchFields,RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.fetchRecords,showCheckBox:!0,SortExp:e.SortExp,SortBy:e.SortBy,LegendArray:e.LegendArray,NorecordfoundText:e.$t("NoRecordfound")},on:{ApplyView:e.OnApplyView,LeftsearchButtonClick:e.leftCommonSearch,PagerButtonClick:e.pagerMethod,HeaderButtonClick:e.commonHeaderButtonClick,ActionButtonClick:e.actionButtonClick,SortdataButtonClick:e.sortdata,RefreshManageView:e.fetchRecords},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[t("a",{staticClass:"inactive-disabled"},["Active"!=a.row.status_id&&"ApprovalPending"!=a.row.status_id?t("span",{class:e.getStatusClassList(a.row.status_id,"status_id")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")]):e._e()])]:e._e(),"ticket_subject"==a.column.COLUMN_NAME?[t("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/Manage/"+a.row.str_ticket_id,"data-toggle-tooltip":"tooltip"}},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME]))])]:e._e(),"totalcomments"==a.column.COLUMN_NAME?[t("a",{staticClass:"text-dark",attrs:{href:"javascript:;"},on:{click:function(t){return e.OpenReplyTicketPopup(a)}}},[t("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"noti-circle noti-green"},[e._v(e._s(a.row[a.column.COLUMN_NAME]))])])]:e._e(),"attachments_count"==a.column.COLUMN_NAME?[t("a",{staticClass:"text-dark",attrs:{href:"javascript:;"},on:{click:function(t){return e.openAttachmentPopUp(a)}}},[t("i",{staticClass:"fa fa-paperclip",attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"noti-circle noti-blue"},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME]))])])]:e._e(),"no_of_notes"==a.column.COLUMN_NAME?[t("a",{staticClass:"text-dark viewnotes",attrs:{href:"javascript:;"},on:{click:function(t){return e.openNotesPopUp(a)}}},[t("i",{staticClass:"fa fa-file-text-o",attrs:{"aria-hidden":"true"}}),t("span",{staticClass:"noti-circle noti-orange"},[e._v(e._s(a.row[a.column.COLUMN_NAME]))])])]:e._e()]}},{key:"customcard",fn:function({data:a}){return[t("div",{class:{"card-box":!0,"red-bg-light":"YES"==a.row.is_high_profile||"true"==a.row.is_high_profile,samplebar_card:1==a.row.is_sample_data,"fsm-ticket":1==a.row.is_by_recurring},style:e.SetTicketColor(a.row.color_code)},[t("div",{staticClass:"card-number"},[t("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[t("input",{staticClass:"chkItems custom-control-input",attrs:{id:a.row.TicketNumber,type:"checkbox",disabled:"TICKET_DRAFT"==a.row.status_code},domProps:{value:a.row.ticket_id},on:{change:function(t){return e.ForCheckBoxClear(t)}}}),t("label",{staticClass:"custom-control-label",attrs:{for:a.row.TicketNumber,type:"checkbox"}})]),e._v(" "+e._s(a.row.TicketNumber)+" "),null!=a.row.external_ticket_number?t("span",{staticStyle:{"font-size":"12px",color:"#bfbfbf"}},[e._v("("+e._s(a.row.external_ticket_number)+")")]):e._e(),"FSM"==a.row.is_field_service?t("span",{staticClass:"badge badge-info float-right",staticStyle:{"font-weight":"normal"}},[e._v("FSM")]):e._e(),"Normal"==a.row.is_field_service?t("span",{staticClass:"badge badge-primary float-right",staticStyle:{"font-weight":"normal"}},[e._v("Normal")]):e._e()]),t("div",{staticClass:"card-detail-main filterscrollForCardView"},[""!=a.row.ticket_subject?t("div",{staticClass:"card-detail",attrs:{"data-isfsm":e.CompanyType}},[t("em",{staticClass:"fa fa-newspaper-o",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",[e._v(e._s(a.row.ticket_subject))])]):e._e(),""!=a.row.Formated_address?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",[e._v(e._s(a.row.Formated_address)+" "+e._s(a.row.State))])]):e._e(),"FSM"==a.row.is_field_service?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-wrench",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",[e._v(e._s(""!=a.row.TypeofWork?a.row.TypeofWork:"--"))])]):e._e(),"Normal"==a.row.is_field_service?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-users",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",[e._v(e._s(""!=a.row.ticket_department_id?a.row.ticket_department_id:"--"))])]):e._e(),""!=a.row.assigned_to&&null!=a.row.assigned_to?t("div",{staticClass:"card-detail"},[t("i",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),t("span",[e._v(e._s(a.row.assigned_to))])]):e._e(),null!=a.row.remainingTime&&""!=a.row.remainingTime&&"--"!=a.row.remainingTime?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-clock-o",attrs:{"aria-hidden":"true"}}),t("span",{class:e.getTimerTextClass(a.row.remainingTime)},[e._v(e._s(a.row.remainingTime))])]):null==a.row.assigned_to?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-user-o",attrs:{"aria-hidden":"true"}}),t("span",[e._v("‒ ‒")])]):e._e(),null!=a.row.resolve_time?t("div",{staticClass:"card-detail"},[t("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),e._v(" "),t("span",[e._v(e._s(a.row.resolve_time)+" "+e._s(a.row.resolve_time))])]):e._e(),t("div",{staticClass:"card-detail bg-light px-2 mt-2"},[t("i",{staticClass:"fa fa-file-pdf-o",attrs:{"aria-hidden":"true"}}),t("span",{staticStyle:{width:"30px"}},[e._v(e._s(e.getAttachmentCount(a.row.attachmentCountWithExt,"Document")))]),t("i",{staticClass:"fa fa-image",attrs:{"aria-hidden":"true"}}),t("span",{staticStyle:{width:"30px"}},[e._v(e._s(e.getAttachmentCount(a.row.attachmentCountWithExt,"Image")))]),t("i",{staticClass:"fa fa-video-camera",attrs:{"aria-hidden":"true"}}),t("span",{staticStyle:{width:"30px"}},[e._v(e._s(e.getAttachmentCount(a.row.attachmentCountWithExt,"Video")))])]),""!=a.row.TAG_NAME?t("div",{staticClass:"card-tags"},e._l(a.row.TAG_NAME,(function(a,i){return t("div",{key:i,staticClass:"rounded",staticStyle:{background:"rgb(23, 162, 184)",color:"rgb(70, 70, 70)"},style:e.SetStyle(a)},[e._v(" "+e._s(a.tag_name)+" "),t("a",{staticClass:"ml-1",attrs:{href:"javascript:;",id:a.tag_id},on:{click:function(t){return e.RemoveTag(t,a)}}},[t("i",{staticClass:"fa fa-close text-white"})])])})),0):e._e()]),t("div",{staticClass:"bottom-action",staticStyle:{background:"none !important"}},[t("div",{class:e.getStatusClass(a.row.status_id,"status_id","fsm")},[e._v(" "+e._s(a.row.status_id)+" ")]),"accept"==a.row.TICKET_AR_TYPE&&1==a.row.is_field_service?t("div",{staticClass:"px-2 border border-success text-center text-success d-block",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Accepted"}},[e._v(" Accepted")]):e._e(),"reject"==a.row.TICKET_AR_TYPE&&1==a.row.is_field_service?t("div",{staticClass:"px-2 border border-danger text-center text-danger d-block",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Rejected"}},[e._v(" Rejected")]):e._e(),t("div",{staticClass:"card-action my-2"},["Yes"==e.IsAcceptRejectTicket?t("tempalte",[""==a.row.TICKET_AR_TYPE&&1==a.row.IS_SHOW_ACCEPT_REJECT&&1==a.row.is_field_service?t("a",{staticClass:"round-icon-small btn-success",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Accept",id:"scrollup"},on:{click:function(t){return e.AcceptRejectTicket(a.row,"accept")}}},[t("em",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}})]):e._e(),""==a.row.TICKET_AR_TYPE&&1==a.row.IS_SHOW_ACCEPT_REJECT&&1==a.row.is_field_service?t("a",{staticClass:"round-icon-small btn-danger",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Reject",id:"scrollup"},on:{click:function(t){return e.AcceptRejectTicket(a.row,"reject")}}},[t("em",{staticClass:"fa fa-close",attrs:{"aria-hidden":"true"}})]):e._e()]):e._e(),"FSM"==a.row.is_field_service?t("a",{staticClass:"round-icon-small btn-secondary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"View On Map",id:"scrollup"},on:{click:function(t){return e.openAddNewEvent(a.row.ticket_id,a.row)}}},[t("em",{staticClass:"fa fa-map-marker",attrs:{"aria-hidden":"true"}})]):e._e(),t("a",{staticClass:"round-icon-small btn-secondary",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Edit"},on:{click:e.openaddTicket}},[t("i",{staticClass:"fa action-icon fa fa-edit"})]),a.row.is_field_service?t("a",{staticClass:"round-icon-small btn-info",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To View Ticket"},on:{click:function(t){return e.openViewTicketTab(a.row.ticket_id)}}},[t("em",{staticClass:"fa fa-ticket"})]):e._e(),a.row.is_field_service?e._e():t("a",{staticClass:"round-icon-small btn-info",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To View Ticket"},on:{click:function(t){return e.openViewTicketTab(a.row.ticket_id)}}},[t("em",{staticClass:"fa fa-ticket"})]),t("a",{staticClass:"round-icon-small btn-primary",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Quick View",value:a.row.ticket_id},on:{click:function(t){return e.openQuickViewpopup(a.row.ticket_id,a.row.str_ticket_id,a.row.ticket_category_id,a.row.is_field_service)}}},[t("em",{staticClass:"fa fa-eye",attrs:{"aria-hidden":"true"}})]),t("a",{directives:[{name:"show",rawName:"v-show",value:e.ShowDeleteButton(a.row),expression:"ShowDeleteButton(data.row)"}],staticClass:"round-icon-small btn-danger",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click here todele teticket",href:"javascript:;",id:"aIndexDelete",value:a.row.ticket_id},on:{click:function(t){return e.commonDeleteData(a.row.ticket_id)}}},[t("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})]),"TICKET_DRAFT"!=a.row.status_code?t("a",{staticClass:"round-icon-small btn-success",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Click Here To Edit FollowUp",id:"ManageFollowUp",value:a.row.ticket_id},on:{click:function(t){return e.ManageFollowUp(a.row.ticket_id,a.row)}}},[t("i",{staticClass:"fa fa-flag action-icon"})]):e._e(),a.row.parent_recurring_ticket>0?t("a",{staticClass:"round-icon-small btn-success",attrs:{"data-toggle-tooltip":"tooltip","data-original-title":"Recurring Ticket View Detail",href:"javascript:;",id:"ManageRecurringTicketwDetail",value:a.row.ticket_id},on:{click:function(t){return e.openViewRecurringTicket(a.row)}}},[t("i",{staticClass:"fa fa-refresh action-icon"})]):e._e()],1)])])]}}])}),e.ShowAssignTicket?t("AssignTicket",{attrs:{ticketids:e.TicketIds},on:{closedialog:e.closedialog}}):e._e(),t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[e.showUpdateStatusModal?t("div",{staticClass:"modal d-block mail-box-pop dialog"},[t("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"500px"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._t("header",(function(){return[t("h5",{staticClass:"modal-title"},[t("span",{staticClass:"form-group"},[e._v(" "+e._s(e.$t("Update Status"))+" ")])])]})),t("button",{staticClass:"close",attrs:{type:"button",title:"",id:"UpdateStatus","data-original-title":"Close"},on:{click:function(t){e.showUpdateStatusModal=!1}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row m-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-0 p-0"},[t("div",{staticClass:"col-12 p-0"},[t("Form",{ref:"form"},[t("div",{staticClass:"w-100 float-left bg-white pb-2 bordere4e4e4"},[t("div",{staticClass:"w-100 float-left"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"collapse show py-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("label",[e._v(e._s(e.$t("Status"))+":"),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("Field",{attrs:{name:"Status",rules:{required:!0}}},[t("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.StatusId,expression:"StatusId",modifiers:{trim:!0}}],staticClass:"form-control StatusId",class:{"form-control":!0},attrs:{name:"StatusId"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.StatusId=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v(e._s(e.$t("Select")))]),e._l(e.StatusList,(function(a,i){return t("option",{key:i,domProps:{value:a.value}},[e._v(" "+e._s(a.name))])}))],2)])],1)])])]),t("div",{staticClass:"col-lg-12 col-xl-12 text-right float-left p-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"search-btm-btn"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("a",{staticClass:"btn btn-success mr-1",class:{disabled:!0===e.isSending},attrs:{href:"javascript:;",title:e.$t("Save"),disabled:e.isSending},on:{click:function(t){return e.SubmitTicketingUpdateStatus()}}},[t("i",{staticClass:"fa fa-save pr-2"}),e._v(" "+e._s(e.$t("Save")))]),t("a",{staticClass:"btn btn-danger",attrs:{href:"javascript:;",title:e.$t("Close")},on:{click:function(t){return e.close()}}},[t("i",{staticClass:"fa fa-close pr-2"}),e._v(" "+e._s(e.$t("Close")))])])])])])])])])])],1)]),t("input",{attrs:{type:"hidden",value:"10",id:"hdfEndIndex"}}),t("input",{attrs:{type:"hidden",value:"",id:"hdnTabClick"}})])])])])]):e._e()])]),t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[e.showTags?t("div",{staticClass:"modal d-block mail-box-pop dialog"},[t("div",{staticClass:"modal-dialog",staticStyle:{"max-width":"500px"}},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[e._t("header",(function(){return[t("h5",{staticClass:"modal-title"},[t("span",{staticClass:"form-group"},[e._v(" "+e._s(e.$t("AssignTag"))+" ")])])]})),t("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(t){e.showTags=!1}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])],2),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row m-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left mt-0 p-0"},[t("div",{staticClass:"col-12 p-0"},[t("Form",{ref:"tags"},[t("div",{staticClass:"w-100 float-left bg-white pb-2 bordere4e4e4"},[t("div",{staticClass:"w-100 float-left"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"collapse show py-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("label",[e._v(e._s(e.$t("Status"))+":"),t("span",{staticClass:"text-danger"},[e._v("*")])]),t("Field",{attrs:{name:"Status",rules:{required:!0}}},[t("tags-input",{attrs:{"element-id":"tags","existing-tags":e.existingTags,limit:"6","allow-duplicate":!1,"hide-input-on-limit":"true",typeahead:!0,placeholder:"Search Tags"},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.IsTagError,expression:"IsTagError"}],staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},e._l(e.TagsError,(function(a,i){return t("span",{key:i,staticClass:"col-xl-12 float-left text-danger alert-danger p-1"},[e._v("Tag: "+e._s(a.TAG_NAME)+" is already used in ticket: "+e._s(a.TICKET_NUMBER))])})),0),t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},[t("p",{staticClass:"mandatory"},[e._v("Maximun Six Tags Allowed")])])])]),t("div",{staticClass:"col-lg-12 col-xl-12 text-right float-left p-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"search-btm-btn"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{href:"javascript:;",title:"Save"},on:{click:function(t){return e.AssignTagAction()}}},[t("i",{staticClass:"fa fa-floppy-o pr-2"}),e._v("Save")]),t("a",{staticClass:"btn btn-primary delete-btn",attrs:{href:"javascript:;",title:"Cancel"},on:{click:function(t){e.showTags=!1}}},[t("i",{staticClass:"fa fa-times pr-2"}),e._v("Cancel")])])])])])])])])])],1)]),t("input",{attrs:{type:"hidden",value:"10",id:"hdfEndIndex"}}),t("input",{attrs:{type:"hidden",value:"",id:"hdnTabClick"}})])])])])]):e._e()])]),e.showRejectTicketModal?t("showRejectTicketModal",{on:{close:function(t){e.showRejectTicketModal=!1}}}):e._e(),e.showAttachmentModal?t("modalAttachment",{attrs:{id:e.id,configdata:e.ConfigData,callbackfunction:e.fetchRecords,isDisabledButton:e.isDisabledButton,modulename:"Ticketing",submodulecode:"Ticketing"},on:{close:function(t){e.showAttachmentModal=!1}}}):e._e(),e.showReplyTicketModal?t("modalReplyTicketpopup",{attrs:{id:e.id,configdata:e.ConfigData,callbackfunction:e.fetchRecords,modulename:"Ticketing",submodulecode:"Ticketing"},on:{close:function(t){e.showReplyTicketModal=!1}}}):e._e(),e.showRecurringViewModal?t("AddRecurringViewModal",{attrs:{TicketId:e.RecurringTicketId},on:{close:function(t){e.showRecurringViewModal=!1}}}):e._e(),e.showAddFollowUp?t("AddFollowUp",{attrs:{ticketId:e.TicketIds,ticketStatus:e.TicketStatus},on:{closeFollowup:function(t){e.showAddFollowUp=!1}}}):e._e(),e.isShowAddNote?t("AddNotes",{attrs:{id:e.id,modulename:"Ticketing",configdata:e.ConfigData,submodulecode:"Ticketing",callbackfunction:e.fetchRecords,isDisabledButton:e.isDisabledButton,ListNoteData:e.ListNoteData},on:{close:function(t){e.isShowAddNote=!1}}}):e._e(),e.showFilter?t("searchFilter",{attrs:{submodulecode:"Ticketing",modulename:"Ticketing",callbackfunction:e.fetchRecords},on:{close:function(t){e.showFilter=!1},FilterData:e.FilterData}},[t("h5",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e(),e.showquickviewModal?t("modalquickviewdetails",{attrs:{sourceIds:e.idForViewRecord,submodulecode:"Ticketing",modulename:"Ticketing",EncryptTicketId:e.str_ticket_id,isFileServiceIds:e.FieldServiceID,isTicketType:e.ticketType},on:{close:function(t){e.showquickviewModal=!1}}}):e._e(),e.ShowManageView?t("viewlayout",{attrs:{submodulecode:"Ticketing",modulename:"Ticketing",callbackfunction:e.fetchRecords,usertype:e.usertype},on:{close:function(t){e.ShowManageView=!1}}},[t("h5",{attrs:{slot:"header"},on:{GetViewId:e.GetViewId},slot:"header"},[e._v(e._s(e.$t("Search")))])]):e._e()],1)},s=[],o=(a("14d9"),a("88a7"),a("271a"),a("5494"),a("9769")),l=a("42ed"),n=a("a4af"),r=a("c054"),c=a("69d3"),d=a("5e28"),u=a("8751"),p=a("03bb"),m=a("87de"),f=a("33e4"),h=a("5437"),g=a("d5ad"),v=a("fbbc"),_={components:{AssignTicket:n["a"],AddFollowUp:r["a"],searchFilter:c["a"],modalquickviewdetails:d["a"],modalAttachment:u["a"],viewlayout:m["a"],ManageMap:f["a"],AddNotes:p["a"],modalReplyTicketpopup:h["a"],AddRecurringViewModal:g["a"],showRejectTicketModal:v["a"]},data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!0,isShowSearchBox:!1},isShowMap:!1,mapObj:[],componentKey:0,latLng:null,isSingleCommentforMultipleTicketing:null,CommentHeader:"",PinId:0,isLoading:!1,searchCondition:"",showAttachmentModal:!1,showReplyTicketModal:!1,showRecurringViewModal:!1,showRejectTicketModal:!1,showAddTicketPopup:!1,TotalRecords:0,PageNumber:1,PageSize:10,FieldServiceID:"",SortBy:"",SortExp:"",Headers:[],TicketText:"",StatusList:[],TicketList:[],TagNameData:[],cardViewData:[],ConfigData:[],DepartmentDataTemp:[],UnAssignedTicket:0,listheaderbuttons:l["a"].buttons,leftSearchFields:l["a"].leftsearchSchema,noRecord:!1,CurrentPage:1,TotalPages:0,IsTicketingView:!0,listActions:l["a"].listActions,showFileModal:!1,statuscode:"",TicketingStatusList:null,conditionForInstantSearch:"",StatusListForListing:[],CompanyType:"normal",IsFormSubmitted:!1,TicketNumberDataForCheckbox:[],UpdatedOn:"",ViewTicketType:"",userstatus:"",Priority:"",IsAcceptRejectTicket:"",SelectedItem:null,showFilter:!1,ShowAssignTicket:!1,TicketIds:"",appliedFilter:[],TicketStatus:"",showAddFollowUp:!1,showAttachmentpppup:!1,widgets:[{icon:"fa fa-list-ul",value:0,name:"Unassigned",class:"one_wid",onClick:this.widgetClick},{icon:"fa fa-ticket",value:0,name:"On hold",class:"two_wid",onClick:this.widgetClick},{icon:"fa fa-reply",value:0,name:"Response Due",class:"three_wid",onClick:this.widgetClick},{icon:"fa fa-calendar-check-o",value:0,name:"Resolve Due",class:"four_wid",onClick:this.widgetClick},{icon:"fa fa-file-text",value:0,name:"Response Over Due",class:"five_wid",onClick:this.widgetClick},{icon:"fa fa-line-chart",value:0,name:"Resolve Over Due",class:"six_wid",onClick:this.widgetClick}],LegendArray:[{class:"",backgroundColor:"rgb(245 234 222)",name:"Recurring Tickets"}],ShowMoreFalse:!1,visibility:0,isDisabledButton:!1,ListNoteData:0,PinTypeId:0,access:1,userid:null,companyId:null,showUpdateStatusModal:!1,StatusId:"",isSending:!1,Supervisor:null,WorkOrderApprovalPending:null,IsAssigned:1,Product:null,Department:null,Contract:null,Category:null,Recurring:0,Tags:null,isShowAddNote:!1,AllCount:0,IsAccepted:null,selectedWidgetCode:"",Duration:null,SearchStatusText:"",usertype:null,SeeAllPendingApproval:"No",showTags:!1,existingTags:[],selectedTags:[],TagsError:[],IsTagError:!1,showquickviewModal:!1,str_ticket_id:null,ticketType:null,idForViewRecord:null,TicketAttachmentId:0,TicketNoteId:0,ViewList:[],ShowManageView:!1,mapHeaderText:null,MapType:"",ViewListId:"",latLong:"",viewId:0}},created:async function(){var e=this;e.userid=this.GetUserInfo.ID,e.companyId=this.GetUserInfo.CompanyId,e.UpdatedOn=e.$route.query.UpdatedOn?e.$route.query.UpdatedOn:"",e.Priority=e.$route.query.priorityCode?e.$route.query.priorityCode:"",e.Supervisor=e.$route.query.SupervisorId?e.$route.query.SupervisorId:"",e.WorkOrderApprovalPending=e.$route.query.WorkOrderApproval?e.$route.query.WorkOrderApproval:"",e.IsFormSubmitted=e.$route.query.IsFormSubmitted?e.$route.query.IsFormSubmitted:"",e.TicketText=e.$route.query.TicketText?e.$route.query.TicketText:"",e.IsFormSubmitted=e.$route.query.IsFormSubmitted?e.$route.query.IsFormSubmitted:"",e.Tags=e.$route.query.TagId?e.$route.query.TagId:"",e.IsFormSubmitted=e.$route.query.IsFormSubmitted?e.$route.query.IsFormSubmitted:"",e.Department=e.$route.query.IsDepartment?e.$route.query.IsDepartment:"",e.Category=e.$route.query.IsCategory?e.$route.query.IsCategory:"",e.Product=e.$route.query.IsProduct?e.$route.query.IsProduct:"",e.Contract=e.$route.query.IsClient?e.$route.query.IsClient:"",e.IsAccepted=e.$route.query.IsAccepted?e.$route.query.IsAccepted:"",e.Recurring=e.$route.query.IsRecurring?e.$route.query.IsRecurring:"",e.UserId=e.$route.query.OpenByUser?e.$route.query.OpenByUser:"",e.Duration=e.$route.query.duration?e.$route.query.duration:"",e.usertype=e.GetUserInfo.UserType,setTimeout((function(){"Critical"==e.Priority?$("#tab-ticket").trigger("click"):"High"==e.Priority?$("#tab-notes").trigger("click"):"Medium"==e.Priority?$("#tab-claim").trigger("click"):"Low"==e.Priority&&$("#tab-content").trigger("click")}),500),await e.GetPinView(!1),await e.setexistingtags(null),await e.GetDDLData(),await e.GetConfigurationValueByKey(),await e.GetDdlRecords_ViewList(),await e.fetchRecords(),await e.ManageLeftSearchFields(),setTimeout((async function(){await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Priority",e.TabList,e.AllCount)}),2e3),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","TICKET_RESOLVER"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","FSM_TICKET_TYPE"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","FSM_USERS"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Ticketing"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","TICKET_SUPERVISOR"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Recurring Type"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Critical Approval"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Form Submit"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","TAG_DATA"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","Pending Acceptance"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","DEPARTMENT"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","TICKET_CATEGORY"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","CLIENT"),await l["a"].bindleftCommonSearchdropdown(e,"Ticketing","PRODUCT"),this.UserCurrentStatus()},updated:function(){this.SetScrolbar("dark-thick","","filterscroll_leftsearch")},methods:{RemoveTag:function(e,t){var a=this;a.confirmR(a.$t("ConfirmTag"),!0,"Confirm",(function(){var e=`TicketId=${t.ticket_id}&TagId=${t.tag_id}`;o["a"].RemoveTagData(e).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.status&&(a.ShowAlert(a.$t("RemovedSuccess"),a.$t("Tag")),a.$t("Alert"),a.fetchRecords())})}))},SetStyle:function(e){return null==e.bg_color||""==e.bg_color?"'background':'#17a2b8','color':'#464646'":`'background': ${e.bg_color},'color':${tagItem.font_color}`},ShowDeleteButton:function(e){return("CA"==this.UserType||"SA"==this.UserType||"PM"==this.UserType||"NU"==this.UserType)&&(("@loggedUserInfo.ID"==e.ticket_created_by||"TICKET_OPENED"!=e.status_code)&&(0==e.totalcomments&&0==e.is_field_service||"TICKET_DRAFT"==e.status_code&&"NU"!=this.UserType||(e.ticket_created_by==this.userid&&"NU"==this.UserType&&"TICKET_DRAFT"==e.status_code||void 0)))},getAttachmentCount:function(e,t){var a=0,i=JSON.parse(e);return i.length>0&&i.forEach((function(e){("Image"==e.TYPE&&"Image"==t||"Video"==e.TYPE&&"Video"==t||"Image"!=e.TYPE&&"Video"!=e.TYPE&&"Image"!=t&&"Video"!=t)&&(a+=e.COUNT)})),a},SetTicketColor:function(e){return""!=e&&null!=e&&"undefined"!=typeof e||(e="#28a745"),{border:"2px solid "+e,borderTop:"5px solid "+e}},ShowHideMap:function(){var e=$("#icnToggleMap");0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map",e.hasClass("fa-angle-double-down")&&(e.removeClass("fa-angle-double-down"),e.addClass("fa-angle-double-up"))):(this.isShowMap=!1,this.mapHeaderText="Expand map",e.hasClass("fa-angle-double-up")&&(e.removeClass("fa-angle-double-up"),e.addClass("fa-angle-double-down")))},searchFunction:function(e){var t=this;t.PageLevelSearchCondition="",t.IsSearchTrueOrFalse=!0,t.IsLocationSearch=!1,t.IsSubjectSearch=!1,t.IsAcceptedSearch=!1,t.IsTicketTextSearch=!1,t.IsTicketTypeSearch=!1,t.IsAssignedSearch=!1,t.IsStatusSearch=!1,t.IsSuperVisorSearch=!1,t.IsApprovalSearch=!1,t.IsFormSubmittedSearch=!1,t.IsTagSearch=!1,t.IsAnySearch=!1,t.IsRecurringSearch=!1,t.IsOpenByUserSearch=!1,""!=$.trim(t.LocationValue)&&(t.IsSearchTrueOrFalse=!0,t.IsLocationSearch=!0,t.IsAnySearch=!0,t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+="(ISNULL(TPIN.COUNTY,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.PLACE,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.ADDRNAME,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.ADDRFROM,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.DIGSTREET,'') LIKE '%25"+t.LocationValue+"%25' OR ",t.PageLevelSearchCondition+="ISNULL(TPIN.STATE,'') LIKE '%25"+t.LocationValue+"%25' ) "),""!=$.trim(t.TicketType)&&(t.IsSearchTrueOrFalse=!0,t.IsTicketTypeSearch=!0,t.IsAnySearch=!0,t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TPIN.TYPE_ID = "+t.TicketType),""!=$.trim(t.Subject)&&(t.IsSearchTrueOrFalse=!0,t.IsSubjectSearch=!0,t.IsAnySearch=!0,t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TICK.TICKET_SUBJECT LIKE '%25"+t.Subject+"%25'"),""!=$.trim(t.ticketNumber)&&(t.IsSearchTrueOrFalse=!0,t.IsTicketNumberSearch=!0,t.IsAnySearch=!0,t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" (TICK.TICKET_NUMBER LIKE '%25"+t.ticketNumber+"%25' OR ",t.PageLevelSearchCondition+=" TICK.EXTERNAL_TICKET_NUMBER LIKE '%25"+t.ticketNumber+"%25')"),""!=$.trim(t.AssignedTo)&&(t.IsSearchTrueOrFalse=!0,t.IsAssignedSearch=!0,t.IsAnySearch=!0,"0"==t.AssignedTo?(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" isnull(TICK.Assigned_To,0)=0 "):"ALL"==t.AssignedTo?(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" ( isnull(TICK.Assigned_To,0) = 0 or TICK.Assigned_To>0) "):(t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TICK.Assigned_To = "+t.AssignedTo)),""!=$.trim(t.Status)&&(t.IsSearchTrueOrFalse=!0,t.IsStatusSearch=!0,t.IsAnySearch=!0,t.PageLevelSearchCondition+=""!=$.trim(t.PageLevelSearchCondition)?" AND":"",t.PageLevelSearchCondition+=" TICK.status_id in( "+t.Status+" )"),""!=$.trim(t.TicketText)&&(t.IsSearchTrueOrFalse=!0,t.IsTicketTextSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.Supervisor)&&(t.IsSearchTrueOrFalse=!0,t.IsSuperVisorSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.OpenByUser)&&(t.IsSearchTrueOrFalse=!0,t.IsOpenByUserSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsDepartment)&&(t.IsSearchTrueOrFalse=!0,t.IsDepartmentSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsCategory)&&(t.IsSearchTrueOrFalse=!0,t.IsCategorySearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsClient)&&(t.IsSearchTrueOrFalse=!0,t.IsClientSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsProduct)&&(t.IsSearchTrueOrFalse=!0,t.IsProductSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.OpenDate)&&(t.IsSearchTrueOrFalse=!0,t.IsOpenDateSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.WorkOrderApprovalPending)&&(t.IsSearchTrueOrFalse=!0,t.IsApprovalSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsFormSubmitted)&&(t.IsSearchTrueOrFalse=!0,t.IsFormSubmittedSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsFormSubmitted)&&(t.IsSearchTrueOrFalse=!0,t.IsFormSubmittedSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.Tags)&&(t.IsSearchTrueOrFalse=!0,t.IsTagSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsAccepted)&&(t.IsAcceptedSearch=!0,t.IsAnySearch=!0),""!=$.trim(t.IsRecurring)&&(t.IsRecurringSearch=!0,t.IsAnySearch=!0),t.CurrentPage=1,t.PageSize=this.PageSize,e?(t.PageNumber=1,t.GroupStart=1,t.GroupEnd=3):t.PageNumber=this.PageNumber,t.fetchRecords(),t.SearchConditionByName=t.SearchConditionByName,t.ShowUserListData(!1)},widgetClick:function(e){var t=this;t.selectedWidgetCode=e.name,t.fetchRecords()},ManageView:function(){var e=this;e.ShowManageView=!0,setTimeout((function(){$("#modalManageView").modal("show")}),1e3)},openViewRecurringTicket:function(e){this.IsObject(e)||(e=JSON.parse(e));var t=this;t.RecurringTicketId=e.ticket_id,t.showRecurringViewModal=!t.showRecurringViewModal},DefaultView:function(){var e=this,t={ModuleName:"Ticketing",SubmoduleCode:"Ticketing"},a=JSON.stringify(t);o["a"].ClearView(a).then((function(t){null!=t.data&&("1"==t.data.code||"1"==t.data.Code)?(e.ShowAlert(e.$t("ClearSuccess",[e.$t("DefaultView")]),"success",!0,e.$t("Alert")),e.fetchRecords()):e.ShowAlert(e.$t("ErrorWhileProcessingRequest"),"failure",!0,e.$t("Alert"))}))},OnApplyView(e){var t=this;if(0==e)t.DefaultView();else{var a={ViewId:e,ModuleName:"Ticketing",SubmoduleCode:"Ticketing"},i=JSON.stringify(a);o["a"].ApplyView(i).then((function(e){null!=e.data&&("1"==e.data.code||"1"==e.data.Code)?(t.ShowAlert(t.$t("ApplySuccess",[t.$t("View")]),"success",!0,t.$t("Alert")),t.fetchRecords()):t.ShowAlert(t.$t("AddedError",[t.$t("View")]),"failure",!0,t.$t("Alert"))}))}},GetDdlRecords_ViewList:async function(){var e=this,t="moduleName=Ticketing&subModuleCode=Ticketing&viewId=0&pageSize=10&pageNum=1&sortBy=&sortExp=";await o["a"].GetViewList(t).then((function(t){e.ViewList=t.data.DATA;var a=0;e.ViewListId="0",null==e.ViewList||""==e.ViewList||e.ViewList.forEach((function(t){t.IS_SLECTED_USER_ID>0&&(a+=1,e.ViewListId=t.VIEW_ID)}));var i=0;a>0?e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:0,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):null==e.ViewList||""==e.ViewList?e.ViewList.push({SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}):e.ViewList.splice(i,0,{SUB_MODULE_NAME:"",SUB_MODULE_CODE:"",VIEW_NAME:"Default View",VIEW_ID:0,IS_APPLICABLE_TO_ALL:1,MODULE_NAME:"",CREATED_AT:"",IS_SLECTED_USER_ID:1,CAN_EDIT:0,ROWNUMBER:0,VIEW_TYPE:"",USER_LIST:""}),setTimeout(()=>{e.ViewListId>0?e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId=e.ViewListId:e.$refs.tgList.$refs.tgListHeaderButtons.ViewListId="0"},1e3)}))},SavePinView:function(){var e=this,t=($("#spnToggleMap").text(),e.mapHeaderText);$("#pinUnpinId").val(""),$("#pinUnpinId").val(t);var a="";"Expand map"!=t&&"Collapse map"!=t||(a="Expand map"==t||"Collapse map"==t?"1":"2");var i="";"0"==$("#pinUnpinId").attr("pinned")?i="PIN":(i="UNPIN",a=2);var s={PinID:""==e.PinId?0:e.PinId,typeid:a,type:"1"==a?"FSM_"+t:"UNPIN",action:i},l=JSON.stringify(s);o["a"].SavePinUnpin(l).then((function(a){if(e.isLoading=!1,null!=a.data&&""!=a.data&&"Success"==a.data.status&&"SUCCESS"==a.data.result.MSG)if("1"==a.data.code&&"PIN"==i){$("#pinUnpinId").attr("pinned","1"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN"),$("#spnPin").text("UnPin"),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"));var s=$("#icnToggleMap");"Expand map"==t?s.addClass("fa-angle-double-down"):s.addClass("fa-angle-double-up"),e.ShowAlert(e.$t("View Pinned Successfully"),"success",!0,e.$t("Alert"))}else if("1"==a.data.code&&"UNPIN"==i){$("#pinUnpinId").attr("pinned","0"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN"),$("#spnPin").text("Pin"),$("#ShowColorScheme").addClass("d-none"),$("#pinUnpinId").hasClass("pinscreenMap")&&($("#pinUnpinId").removeClass("pinscreenMap"),$("#pinUnpinId").addClass("unpinscreenMap")),$("#divmapdata").css("display","none");s=$("#icnToggleMap");"Collapse map"==t?s.addClass("fa-angle-double-up"):s.addClass("fa-angle-double-down"),e.ShowAlert(e.$t("View UnPinned Successfully"),"success",!0,e.$t("Alert"))}}))},GetPinView:function(e){var t=this;o["a"].GetPinView().then((function(e){if(null!=e.data&&""!=e.data&&"Success"==e.data.status&&e.data.result.DATA.length>0){e.data.result.DATA[0].TYPE_ID;var a=e.data.result.DATA[0].TYPE_ID,i=e.data.result.DATA[0].TYPE;if("2"==a&&"UNPIN"==i&&($("#pinUnpinId").attr("pinned","0"),$("#spnPin").text("Unpin")),"1"==a&&"FSM_Expand map"==i){$("#pinUnpinId").hasClass("unpinscreenMap")?($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("UnPin"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN")):($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("Pin"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN")),t.isShowMap=!1,t.mapHeaderText="Expand map";var s=$("#icnToggleMap");s.hasClass("fa-angle-double-down")&&(s.removeClass("fa-angle-double-up"),s.addClass("fa-angle-double-down")),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"))}if("1"==a&&"FSM_Collapse map"==i){$("#pinUnpinId").hasClass("unpinscreenMap")?($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("UnPin"),$("#pinUnpinId").attr("title","Un_PIN"),$("#pinUnpinId").attr("data-original-title","Un_PIN")):($("#pinUnpinId").attr("pinned","1"),$("#spnPin").text("Pin"),$("#pinUnpinId").attr("title","PIN"),$("#pinUnpinId").attr("data-original-title","PIN")),t.isShowMap=!0,t.mapHeaderText="Collapse map",$("#ShowColorScheme").removeClass("d-none");s=$("#icnToggleMap");s.hasClass("fa-angle-double-up")&&(s.removeClass("fa-angle-double-down"),s.addClass("fa-angle-double-up")),$("#pinUnpinId").hasClass("unpinscreenMap")&&($("#pinUnpinId").removeClass("unpinscreenMap"),$("#pinUnpinId").addClass("pinscreenMap"))}else{t.isShowMap=!1,t.mapHeaderText="Expand map";s=$("#icnToggleMap");$("#ShowColorScheme").removeClass("d-none"),s.hasClass("fa-angle-double-up")&&(s.removeClass("fa-angle-double-up"),s.addClass("fa-angle-double-down"))}}}))},ManageLeftSearchFields(){if("normal"==this.CompanyType){var e=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Location"==e.fieldName));e>-1&&this.leftSearchFields.splice(e,1);var t=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Form Submit"==e.fieldName));t>-1&&this.leftSearchFields.splice(t,1);var a=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Pending Acceptance"==e.fieldName));a>-1&&this.leftSearchFields.splice(a,1);var i=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Recurring Type"==e.fieldName));i>-1&&this.leftSearchFields.splice(i,1)}if("locating"!=this.CompanyType){var s=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Ticket Text"==e.fieldName));s>-1&&this.leftSearchFields.splice(s,1);var o=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Ticket Type"==e.fieldName));o>-1&&this.leftSearchFields.splice(o,1)}if("Closed and Locked"!=this.SearchStatusText||"Closed"!=this.SearchStatusText){var l=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Close Date"==e.fieldName));l>-1&&this.leftSearchFields.splice(l,1)}if("CA"!=this.usertype){var n=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Supervisor"==e.fieldName));n>-1&&this.leftSearchFields.splice(n,1)}if("yes"!=this.SeeAllPendingApproval){var r=this.leftSearchFields.indexOf(this.leftSearchFields.find(e=>"Critical Approval"==e.fieldName));r>-1&&this.leftSearchFields.splice(r,1)}},openFilterPopUp:function(){this.showFilter=!0},openAttachmentPopUp:function(e){var t=this;t.ListViewAttachment=1,t.id=e.row.ticket_id,t.showAttachmentModal=!0},OpenReplyTicketPopup:function(e){var t=this;t.id=e.row.ticket_id,t.showReplyTicketModal=!0},openNotesPopUp:function(e){var t=this;t.id=e.row.ticket_id,t.isShowAddNote=!0,t.ListNoteData=1},FilterData:function(e,t,a,i,s,o){this.pageNum=e,this.pageSize=t,this.sortBy=a,this.sortExp=i,this.searchCondition=s,null!=typeof o&&this.appliedFilter.push(o),this.fetchRecords()},GetConfigurationValueByKey:async function(){var e=this,t="key=AcceptRejectTicket";await o["a"].GetConfigurationValueByKey(t).then((function(t){e.IsAcceptRejectTicket=t.data}))},getStatusClassList:function(e){var t="";switch(e){case"UnPublish":t="px-2 text-center bg-danger text-white d-block";break;case"Active":t="px-2 text-center bg-success text-white d-block";break;case"On Hold":t="px-2 bg-warning text-center text-white d-block";break;case"Draft":t="px-2 text-center bg-warning text-white d-block";break;case"Inactive":t="px-2 text-center bg-danger text-white d-block";break;case"Open":t="px-2 text-center bg-success text-white d-block";break;case"Waiting":t="px-2 text-center bg-success text-white d-block";break;case"In progress":t="px-2 bg-secondary text-center text-white d-block";break;case"Completed":t="px-2 bg-secondary text-center text-white d-block";break;case"Cancelled":t="px-2 bg-danger text-center text-white d-block";break;case"Closed":t="px-2 bg-danger text-center text-white d-block";break;case"Closed and Locked":t="px-2 bg-danger text-center text-white d-block";break;case"Waiting Resolved":t="px-2 bg-secondary text-center text-white d-block";break;case"Waiting Response":t="px-2 bg-secondary text-center text-white d-block";break;default:t=""}return t},getStatusClassCard:function(e){var t="";switch(e){case"Active":t="ex-blue-bg-light";break;case"Draft":t="ex-green-bg-light";break;case"UnPublish":t="ex-yellow-bg-light";break;case"Inactive":t="ex-red-bg-light";break;case"OnHold":t="ex-orange-bg-light";break;case"open":t="ex-blue-bg-light";break;default:t=""}return t},updateURLParameter(e,t,a){var i="",s=e.split("?"),o=s[0],l=s[1],n="";if(l){s=l.split("&");for(var r=0;r<s.length;r++)s[r].split("=")[0]!=t&&(i+=n+s[r],n="&")}var c=n+""+t+"="+a;return o+"?"+i+c},openQuickViewpopup:function(e,t,a,i){var s=this;s.isForViewRecord=e,this.idForViewRecord=e,this.str_ticket_id=t,this.FieldServiceID=a,this.ticketType=i,this.showquickviewModal=!0},ForCheckBoxClear:function(e){var t=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?(t.listheaderbuttons[1].isdisabled=!1,t.listheaderbuttons[4].isdisabled=!1,t.listheaderbuttons[5].isdisabled=!1,t.listheaderbuttons[7].isdisabled=!1):(t.listheaderbuttons[1].isdisabled=!0,t.listheaderbuttons[4].isdisabled=!0,t.listheaderbuttons[5].isdisabled=!0,t.listheaderbuttons[7].isdisabled=!0)},ShowTagDataList:function(){var e=this,t=e.TicketList,a=t.map((function(e){return e.ticket_id})).join(","),i="ticketId="+a;o["a"].TagData(i).then((function(a){e.TagNameData=[],null!=a.data&&""!=a.data&&"Success"==a.data.status&&(e.TagNameData=a.data.result.DATA,$.each(t,$.proxy((function(t,a){var i=a.ticket_id,s=$.grep(e.TagNameData,(function(e,t){return e.ticket_id==i}));a.TAG_NAME=s}),this)))}))},fetchRecords:async function(){this.isLoading=!0;var e=this,t="";e.isDisabledButton=!1,""!=e.UpdatedOn&&(t=moment(String(Globalize.culture().calendar.patterns.d).toUpperCase()).format("YYYY-MM-DD"));var a="";if(this.isBlank(this.searchCondition)||(a+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(a+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),this.isBlank(this.searchCondition)||(a+=this.searchCondition),this.isBlank(this.conditionForInstantSearch)||(a+=this.isBlank(this.searchCondition)?this.conditionForInstantSearch:" AND "+this.conditionForInstantSearch),""!=a){if(e.appliedFilter.length>0){const t=e.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);e.listheaderbuttons[t].isvisible=!0;const a=e.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);e.listheaderbuttons[a].iconClass="fa fa-filter text-success"}}else if(0==e.appliedFilter.length){const t=e.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);e.listheaderbuttons[t].isvisible=!1;const a=e.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);e.listheaderbuttons[a].iconClass="fa fa-filter"}var i=e.TicketText.split("#").join("%23").split("&").join("%26"),s=`priorityCode=${e.Priority}&duration=${e.Duration}&SupervisorId=${e.Supervisor}&PageSize=${e.PageSize}&PageNumber=${e.PageNumber}\n            &SortBy=${e.SortBy}&SortExp=${e.SortExp}&WorkOrderApproval=${e.WorkOrderApprovalPending}\n            &isAssigned=${e.$route.meta.IsAssigned}&IsFormSubmitted=${e.IsFormSubmitted}&TagId=${"ALL"==e.Tags?-1:e.Tags}\n            &IsDepartment=${e.Department}&IsCategory=${e.Category}&IsContract=${e.Contract}&IsProduct=${e.Product}&IsOpenBy=${e.UserId}\n            &UpdatedOn=${t}&viewtickettype=${e.ViewTicketType}&code=${e.selectedWidgetCode}\n            &ticketText=${i}&IsAccepted=${e.IsAccepted}\n            &IsRecurring=${e.Recurring}&IsOpenDate=${e.OpenDate}&search=${e.searchCondition}`;e.isBlank(e.searchCondition)||(s=s+"&Search="+e.searchCondition.split("&").join("%26")),await o["a"].GetFSMListing(s).then((function(t){e.isLoading=!1,e.TicketList=[],e.componentKey+=1,void 0!=t.data.result.mapdetail[0]&&(e.latLong=t.data.result.mapdetail[0].LATITUDE+","+t.data.result.mapdetail[0].LONGITUDE),e.MapType=void 0==t.data.result.MapType?"Google":t.data.result.MapType.TYPE,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=1,e.AllCount=0,e.CriticalCount=0,e.HighCount=0,e.MediumCount=0,e.LowCount=0,null!=t.data&&""!=t.data?("Success"==t.data.status&&(e.Headers=t.data.result.schema,e.Headers.forEach(e=>{"status_id"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Status",e.settings={isInSlot:!0,isForTag:!0}),"ticket_subject"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Ticket Subject",e.settings={isInSlot:!0}),"totalcomments"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Reply",e.settings={isInSlot:!0}),"attachments_count"==e.COLUMN_NAME&&(e.DISPLAY_NAME="Attachment",e.settings={isInSlot:!0}),"no_of_notes"==e.COLUMN_NAME&&(e.DISPLAY_NAME="NOTE",e.settings={isInSlot:!0})}),e.ConfigData=t.data.result.configdata,e.TabList=t.data.result.tablist,e.TicketList=t.data.result.data,e.TicketList.forEach((function(e){e.str_ticket_id=encodeURIComponent(e.str_ticket_id),e.is_field_service?e.is_field_service="FSM":e.is_field_service="Normal"})),e.TicketList.forEach((function(t){"Closed"!=t.status_id&&"Closed and Locked"!=t.status_id||(e.isDisabledButton=!0)})),e.mapObj=[],e.TicketList.forEach((function(t){1==t.is_by_recurring&&(t.additionalClass="fsm-ticket");var a=e.$options.filters.formatDate(t.created_at),i={latlong:""==e.latLong?"32.779167,-96.808891":e.latLong,refValue:t.TicketNumber,popupHeaderHtml:'<div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">'+t.TicketNumber+'<span class="status">'+t.priority+"</span></h1>",popupHeaderColor:"",popupBodyHtml:'<p class="details"><i class="fa fa-calendar" style="font-size: 19px;margin-right: 6px;"></i><span style="text-transform:uppercase !important;">'+a+'</span></p><p class="details"><i class="fa fa-wrench" style="font-size: 19px;margin-right: 6px;"></i><span>'+t.TypeofWork.toLowerCase()+'</span></p><p class="details"><i class="fa fa-map-marker" style="font-size: 25px;margin-right: 7px;margin-left: 3px;"></i><span>'+t.Formated_address+" "+t.State+"</span></p>",popupFooterHtml:'<span class="p-2"><a href="javascript:;"><i class="fa fa-file-pdf-o"></i> 0</a><a href="javascript:;"><i class="fa fa-image"></i> 0</a><a href="javascript:;"><i class="fa fa-video-camera"></i> 0</a></span>',pinLatLong:{latitude:t.location_nw,longitude:t.location_nw},polygons:[{name:"",latLong:[{latitude:t.location_nw,longitude:t.location_nw}]}],address:t.Formated_address,priority:t.priority,color_code:t.color_code};e.mapObj.push(i)})),e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.listheaderbuttons[1].isdisabled=!0,e.listheaderbuttons[4].isdisabled=!0,e.listheaderbuttons[5].isdisabled=!0,e.listheaderbuttons[7].isdisabled=!0,e.CurrentPage=e.PageNumber,e.CompanyType=t.data.result.CompanyType,e.UnAssignedTicket=t.data.result.UnassignedCount,e.widgets[0].value=e.UnAssignedTicket,e.widgets[1].value=t.data.result.OnholdCount,e.widgets[2].value=t.data.result.ResponseDueCount,e.widgets[3].value=t.data.result.ResolveDueCount,e.widgets[4].value=t.data.result.ResponseOverDueCount,e.widgets[5].value=t.data.result.ResolveOverDueCount,e.AllCount=t.data.result.AllCount,e.CurrentItem=null,e.CriticalCount=t.data.result.CriticalCount,e.HighCount=t.data.result.HighCount,e.MediumCount=t.data.result.MediumCount,e.LowCount=t.data.result.LowCount,e.ShowUserName=t.data.result.USERTYPE_NAME,e.GetDdlRecords_ViewList(),e.TicketList.length>0?(e.TotalRecords=t.data.result.data[0].total_records,e.ShowTagDataList(),e.noRecord=!1,e.IsLoad=!0):e.noRecord=!0),e.IsLoad=!0):e.noRecord=!0,setTimeout((function(){e.ResponsiveDataTable("tablelistingdata")}),500)}))},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(i=>{let s={...i};switch(s.title){case"Accept":s.isVisible=""==e.TICKET_AR_TYPE&&1==e.IS_SHOW_ACCEPT_REJECT&&"FSM"==e.is_field_service||1==e.is_field_service;break;case"Reject":s.isVisible=""==e.TICKET_AR_TYPE&&1==e.IS_SHOW_ACCEPT_REJECT&&"FSM"==e.is_field_service||0==e.is_field_service;break;case"View on Map":s.isVisible="FSM"==e.is_field_service;break;case"Edit":s.isVisible="TICKET_DRAFT"==e.status_code;break;case"Delete":s.isVisible="CA"==t.usertype||"SA"==t.usertype||"PM"==t.usertype;break;case"Add a Follow-Up":s.isVisible="TICKET_DRAFT"!=e.status_code;break;case"View Recurring Detail":s.isVisible=1==e.parent_recurring_ticket;break;case"Reopen":s.isVisible="Ticket_completed"===e.status_code||"TICKET_CLOSED"===e.status_code;break;default:s.isVisible=!0}a.push(s)}),a},AcceptRejectTicket:function(e,t){var a=this,i="",s="";"Accept"==t?(i=a.$t("Are you sure you want to Accept the Ticket?"),a.$t("Alert"),s=a.$t("Accept")):(i=a.$t("Are you sure you want to Reject the Ticket?"),a.$t("Alert"),s=a.$t("Reject")),"string"===typeof e&&(e=JSON.parse(e)),a.confirmR(i,!0,s,(function(){"Reject"==t?(a.SelectedItem=e,a.showRejectTicketModal=!0):a.AcceptRejectAction(e,t,"")}))},AcceptRejectAction:function(e,t,a){var i=this,s={TicketId:e.ticket_id,Type:t,Comment:a},l=JSON.stringify(s);o["a"].AcceptRejectTicket(l).then((function(e){null!=e.data?"1"==e.data.code?(i.fetchRecords(),"reject"==t?(i.ShowAlert(i.$t("Ticket Rejected Successfully"),"success",!0,i.$t("Alert")),i.ShowRejectModal=!1):i.ShowAlert(i.$t("Ticket Accepted Successfully"),"success",!0,i.$t("Alert"))):"2"==e.data.code?(i.ShowAlert(i.$t("Ticket AcceptRejectDenied"),"warning",!0,i.$t("Warning")),i.showRejectTicketModal=!1):i.ShowAlert(i.$t("ErrorMessage",[i.$t("Ticket")],[i.$t("Reject")]),"failure",!0,i.$t("Alert")):i.ShowAlert(i.$t("ErrorMessage",[i.$t("Ticket")],[i.$t("Reject")]),"failure",!0,i.$t("Alert"))}),(function(e){}))},leftCommonSearch:function(e){var t=this;t.IsFormSubmitted="",t.Department="",t.TicketText="",t.Duration="",t.Supervisor="",t.WorkOrderApprovalPending="",t.Category="",t.Contract="",t.Product="",t.UserId="",t.IsAccepted="",t.Tags="",this.searchCondition=e.searchCondition;const a=new URLSearchParams(e.searchConditionJson),i=a.entries(),s=this.paramsToObject(i);if(s.hasOwnProperty("Supervisor")){this.Supervisor=s["Supervisor"];let e=this.searchCondition.split("AND");var o="";e.forEach((e,t)=>{e.includes("TICK.SUPERVISOR")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Supervisor="";if(s.hasOwnProperty("TicketText")){this.TicketText=s["TicketText"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("TICK.TICKET_TEXT")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.TicketText="";if(s.hasOwnProperty("IsFormSubmitted")){this.IsFormSubmitted=s["IsFormSubmitted"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsFormSubmitted")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsDepartment")){this.Department=s["IsDepartment"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsDepartment")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Department="";if(s.hasOwnProperty("IsCategory")){this.Category=s["IsCategory"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsCategory")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Category="";if(s.hasOwnProperty("IsProduct")){this.Product=s["IsProduct"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsProduct")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Product="";if(s.hasOwnProperty("IsClient")){this.Contract=s["IsClient"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsClient")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Contract="";if(s.hasOwnProperty("TagId")){this.Tags=s["TagId"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("TagId")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsAccepted")){this.IsAccepted=s["IsAccepted"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("IsAccepted")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.FormSubmit="";if(s.hasOwnProperty("IsRecurring")){this.Recurring=s["IsRecurring"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("TICK.RecurringType")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.Recurring="";if(s.hasOwnProperty("OpenUserId")){this.UserId=s["OpenUserId"];let e=this.searchCondition.split("AND");o="";e.forEach((e,t)=>{e.includes("TICK.OpenByUser")||(0==t?o=e:o+="AND"+e)}),this.searchCondition=o}else this.UserId="";this.PageNumber=e.PageNumber,this.isPaged=1,this.fetchRecords()},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.fetchRecords()},actionButtonClick:function(e,t,a,i){switch(e){case"Edit":break;case"OpenFileModal":this.OpenFileModal(t);break;case"ManageFollowUp":this.ManageFollowUp(t.ticket_id,t);break;case"openAddNewEvent":this.openAddNewEvent(t.ticket_id,t);break;case"openQuickViewpopup":this.openQuickViewpopup(t.ticket_id,t.str_ticket_id,t.ticket_category_id,t.is_field_service);break;case"openViewRecurringTicket":this.openViewRecurringTicket(t);break;case"AcceptRejectTicket":this.AcceptRejectTicket(t,i.currentTarget.innerText);break;case"openViewTicketTab":this.openViewTicketTab(t.ticket_id);break;case"MarkAsActive":this.MarkAsActive(t.ticket_id)}},MarkAsActive:function(e){if(""!=e&&null!=e){var t=this;t.confirmR(t.$t("AreYouSureToUpdateStatusActive"),!0,"Confirm",(function(){var a={CompanyId:t.companyId,UserId:t.userid,TicketIds:e,StatusId:1111},i=JSON.stringify(a);o["a"].TicketingUpdateStatus(i).then((function(e){null!=e.data&&""!=e.data&&("OK"==e.statusText?(t.fetchRecords(),t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert"))):t.ShowAlert(t.$t("ErrorWhileUpdating",[t.$t("Status")]),"failure",!0,t.$t("Alert")))}))}))}},openViewTicketTab:function(e){var t=this;t.$router.push({path:"/Ticketing/Manage/"+e,query:{source:"Ticketing"}})},openAddNewEvent:function(e,t){var a=this;a.latLng=t,a.isShowMap=!0},ManageFollowUp(e,t){var a=this;a.TicketIds=e,a.TicketStatus=t.status_code,a.showAddFollowUp=!a.showAddFollowUp},OpenFileModal:function(e){this.showFileModal=!0,this.expid=e.expense_id,this.statuscode=e.status_code},CloseExpenseAttachments:function(){this.showFileModal=!1},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.fetchRecords(),$("#"+e+"  span:first-child").attr("class",t)},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"openaddTicket":this.openaddTicket();break;case"setTourGuideSteps":this.setTourGuideSteps(0);break;case"ticketAssigned":this.TicketAssigned();break;case"commonDeleteData":this.commonDeleteData();break;case"openupdateStatus":this.openupdateStatus();break;case"DownloadExcelDataNew":this.DownloadExcelDataNew();break;case"openFilterPopUp":this.openFilterPopUp();break;case"opentags":this.AssignedTag();break;case"removeFilter":var t=this;t.searchCondition="";const e=t.listheaderbuttons.findIndex(e=>"removeFilter"===e.callbackfunction);t.listheaderbuttons[e].isvisible=!1;const i=t.listheaderbuttons.findIndex(e=>"openFilterPopUp"===e.callbackfunction);t.listheaderbuttons[i].iconClass="fa fa-filter";try{t.appliedFilter=[]}catch(a){}t.fetchRecords();break;case"ManageView":this.ManageView();break}},openupdateStatus:function(){var e=this,t="";if(e.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),!(t.length>0))return e.ShowAlert(e.$t("Select any record to update status"),"warning",!0,e.$t("Alert")),!1;this.showUpdateStatusModal=1!=this.showUpdateStatusModal,this.TicketIds=t},openaddTicket:function(){var e=this;e.$router.push({name:"add"})},commonDeleteData:function(e){var t=this,a="";1==$(".chkItems:checkbox:checked").prop("checked")?$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a+=e,a.length>0?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Ticketing"),(function(){var e={ids:a,moduleName:"Ticketing",subModuleCode:"Ticketing"},i=JSON.stringify(e);o["a"].deleteActivityData(i).then((function(e){"Success"==e.data[0].Status?(t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Ticket")]),"Success",!0,t.$t("Alert")),t.fetchRecords(),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<0&&(t.PageNumber=1)):t.ShowAlert(t.$t("DeletedError",[t.$t("Ticket")]),"failure",!0,t.$t("Alert"))}))})):t.ShowAlert(t.$t("Selectanyrecordtodelete"),"warning",!0,t.$t("Alert"))},TicketAssigned:function(){var e=this,t="";if(e.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),!(t.length>0))return e.ShowAlert(e.$t("Select any record to Assign Ticket"),"warning",!0,e.$t("Alert")),!1;e.selectvalue="",e.isSubmitted=!1,e.TicketIds=t,e.ShowAssignTicket=!0},AssignedTag:function(){var e=this,t="";if(e.IsMapView?$("#divdataviewdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})):$("#tablelistingdata").find("input:not(.chkAll):checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),!(t.length>0))return e.ShowAlert(e.$t("Select any record to Assign Ticket"),"warning",!0,e.$t("Alert")),!1;e.selectvalue="",e.isSubmitted=!1,e.selectedTags="",e.TagsError="",e.TicketIds=t,setTimeout("SetBootstraptoolTip()",100),e.showTags=!0},closedialog:function(){this.SearchConditionByName="",this.selected=[],this.ShowAssignTicket=!1},GetTicketingStatusList:function(){var e=this,t="moduleName=Ticketing&type=";o["a"].getDDLData(t).then((function(t){var a=t.data;null!=a&&(e.leftSearchFields[1].listOptions=a.DATA,e.ExpenseStatusList=a.DATA)}))},GetDDLData:async function(e){var t=this,a=`id=&companyId=${t.companyId}&userId=${t.userid}&moduleName=FSM&type=FSM_TICKETING_STATUS`;await o["a"].GetDDLData(a).then((function(e){if(e.data){var a=e.data;null!=a&&(t.StatusList=a.DATA)}}))},SubmitTicketingUpdateStatus:function(){var e=this;this.$refs.form.validate().then(t=>{if(t){var a={CompanyId:e.companyId,UserId:e.userid,TicketIds:e.TicketIds,StatusId:e.StatusId},i=JSON.stringify(a);e.isSending=!0,o["a"].TicketingUpdateStatus(i).then((function(t){if(null!=t.data&&""!=t.data)if("Success"==t.data.status)if("1000"!=t.data.result&&"SUCCESS"==t.data.result.MSG)$("input:not(.chkAll):checkbox:checked").prop("checked",!1),e.$emit("close"),e.isSending=!1,e.showUpdateStatusModal=!1,e.fetchRecords(),e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Status")]),"success",!0,e.$t("Alert"));else if("1000"==t.data.result){e.showUpdateStatusModal=!1;var a={refId:e.TicketIds,status_Id:e.StatusId,req_From:"TICKET"},i=JSON.stringify(a);o["a"].UpdateStatusByStatusMapping(i).then((function(t){null!=t.data&&""!=t.data?"SUCCESS"==t.data.result.MSG?(e.showUpdateStatusModal=!1,e.fetchRecords(),e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("Status")]),"success",!0,e.$t("Alert"))):(e.showUpdateStatusModal=!1,e.ShowAlert(e.$t("ErrorWhileUpdating",[e.$t("Status")]),"failure",!0,e.$t("Alert"))):(e.showUpdateStatusModal=!1,e.fetchRecords())}))}else e.showUpdateStatusModal=!1,e.ShowAlert(e.$t("ErrorWhileUpdating",[e.$t("Status")]),"failure",!0,e.$t("Alert"));else e.showUpdateStatusModal=!1,e.ShowAlert(e.$t("ErrorWhileUpdating",[e.$t("Status")]),"failure",!0,e.$t("Alert"));else e.showUpdateStatusModal=!1,e.ShowAlert(e.$t("ErrorWhileUpdating",[e.$t("Status")]),"failure",!0,e.$t("Alert"))}))}})},DownloadExcelDataNew:function(){var e=this;e.isLoading=!0,e.PageLevelSearchCondition="",""!=$.trim(e.LocationValue)&&(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+="(ISNULL(TPIN.COUNTY,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.PLACE,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.ADDRNAME,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.ADDRFROM,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.DIGSTREET,'') LIKE '%25"+e.LocationValue+"%25' OR ",e.PageLevelSearchCondition+="ISNULL(TPIN.STATE,'') LIKE '%25"+e.LocationValue+"%25' ) "),""!=$.trim(e.TicketType)&&(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TPIN.TYPE_ID = "+e.TicketType),""!=$.trim(e.Subject)&&(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TPIN.TYPEOFWORK LIKE '%25"+e.Subject+"%25'"),""!=$.trim(e.ticketNumber)&&(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TPIN.TICKETNUMBER LIKE '%25"+e.ticketNumber+"%25'"),""!=$.trim(e.AssignedTo)&&("-1"==e.AssignedTo?(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" isnull(TICK.Assigned_To,0)=0 "):(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TICK.Assigned_To = "+e.AssignedTo)),""!=$.trim(e.Status)&&(e.PageLevelSearchCondition+=""!=$.trim(e.PageLevelSearchCondition)?" AND":"",e.PageLevelSearchCondition+=" TICK.status_id = "+e.Status);var t="";""!=e.UpdatedOn&&(t=moment(String(Globalize.culture().calendar.patterns.d).toUpperCase()).format("YYYY-MM-DD"));var a=e.TicketText.split("#").join("%23").split("&").join("%26"),i=`priorityCode=${e.Priority}&SupervisorId=&PageSize=${e.TotalRecords}&PageNumber=${e.PageNumber}&SortBy=${e.SortBy}&SortExp=${e.SortExp}&WorkOrderApproval=&isAssigned=${e.IsAssigned}&IsFormSubmitted=&TagId=${"ALL"==e.Tags?-1:e.Tags}&UpdatedOn=${t}&ticketText=${a}`;e.isBlank(e.searchCondition)||(i=i+"&Search="+e.searchCondition.split("&").join("%26")),o["a"].GetFSMListing(i).then((function(t){"Success"==t.data.status&&(e.JSONToCSVConvertor(t.data.result,"Fsm-Detail",!0),e.isLoading=!1)}))},setexistingtags:async function(e){var t=this,a="moduleName=FSM&type=TAG_DATA";await o["a"].GetDDLData(a).then((function(e){if(200==e.status){var a=e.data;t.isLoading=!0;var i=[];null!=a&&($.each(a.DATA,(function(e,t){var a={key:t.value,value:t.name};i.push(a)})),t.existingTags=i),t.isLoading=!1}}))},AssignTagAction:function(){var e=this;e.isLoading=!0,e.isSubmitted=!0;var t=e.selectedTags;console.log(t),this.$refs.tags.validate().then(a=>{if(a){e.isSubmitted=!1;var i={TicketIds:e.TicketIds,selectedtagsdata:t},s=JSON.stringify(i);o["a"].AssignTags(s).then((function(t){if(null!=t.data)if("1"==t.data.code){if(e.fetchRecords(),e.ShowAlert(e.$t("AddedSuccess",[e.$t("Tags")]),"success",!0,e.$t("Alert")),e.showTags=!1,null!=t.data.result&&t.data.result.length>0){e.IsTagError=!0;var a="object"!=typeof t.data.result?JSON.parse(t.data.result):JSONData;e.TagsError=a.DATA}e.ShowTagDataList()}else e.isLoading=!1,e.ShowAlert(e.$t("ErrorMessage",[e.$t("Tag")],[e.$t("Assigned")]),"failure",!0,e.$t("Alert"));e.isLoading=!1}),(function(t){e.isLoading=!1}))}else e.isLoading=!1,e.ShowAlert(e.$t("CorrectHighlightedErrors"),"warning",!0,e.$t("Alert"))})},changeViewTicketType:function(){this.searchFunction(),this.fetchRecords()},UserCurrentStatus:function(){var e=this;if("online"==e.userstatus)e.confirmR(e.$t("TicketUserStatusChangeMessage"),!0,e.$t("Alert"),(function(){var t="statusCode="+e.userstatus;o["a"].UpdateUserCurrentStatus(t).then((function(t){t.data,e.userstatus=t.status_code}))}));else if("online"!=e.userstatus&&""!=e.userstatus)e.confirmR(e.$t("TicketUserStatusChangeMessage"),!0,e.$t("Alert"),(function(){var t="statusCode="+e.userstatus;o["a"].UpdateUserCurrentStatus(t).then((function(t){t.data.length,e.userstatus=t.data[0].status_code}))}));else if(""==e.userstatus){var t="statusCode="+e.userstatus;o["a"].UpdateUserCurrentStatus(t).then((function(t){t.data.length,e.userstatus=t.data[0].status_code}))}}}},C=_,S=(a("bd54"),a("2877")),y=Object(S["a"])(C,i,s,!1,null,null,null);t["default"]=y.exports},a4af:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Assign Ticket")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.Close()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("form",{ref:"AssignedTickets",attrs:{id:"AssignedTickets"}},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},[t("div",{staticClass:"col-md-12 p-0 float-left",attrs:{id:"divAttForm"}},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 searchpanel tablehead search float-left p-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 Search-panel float-left py-2 p-0"},[t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0"},[t("div",{staticClass:"row mt-0"},[t("div",{staticClass:"col-md-6 col-sm-12 float-left mb-2"},[t("div",{staticClass:"form-group"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.SearchConditionByName,expression:"SearchConditionByName"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search by name"},domProps:{value:e.SearchConditionByName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onEnter(t))},input:function(t){t.target.composing||(e.SearchConditionByName=t.target.value)}}})])]),t("div",{staticClass:"col-md-6 col-sm-12 float-left"},[t("div",{staticClass:"background-0 text-left form-check-inline search-btm-btn"},[t("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:"Search",href:"javascript:;"},on:{click:function(t){return e.searchFunction(t)}}},[t("i",{staticClass:"fa fa-search"})]),t("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",title:"Clear"},on:{click:function(t){return e.refreshUserList()}}},[t("i",{staticClass:"fa fa-refresh"})])])])])])])]),t("div",{staticClass:"col-md-12 p-0"},[t("div",{staticClass:"listing"},[t("div",{staticClass:"table-responsive table-fix-header",staticStyle:{"max-height":"300px"}},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tblUserList"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{staticClass:"ui-resizable"}),e._m(0),0==e.isUSIC?t("th",{staticClass:"ui-resizable"},[t("span",{attrs:{href:"javascript:;",id:"NAME"}},[e._v("Resource Type")])]):e._e(),e._m(1),e._m(2)])]),t("tbody",[e._l(e.UserListing,(function(a,i){return t("tr",{key:i},[t("td",[t("div",{staticClass:"custom-control custom-checkbox"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],staticClass:"chkItems chkUserId",attrs:{type:"checkbox",name:"chkItemUser"},domProps:{value:a.user_id,checked:Array.isArray(e.selected)?e._i(e.selected,a.user_id)>-1:e.selected},on:{click:function(t){return e.setSelectedValue(a.user_id)},change:function(t){var i=e.selected,s=t.target,o=!!s.checked;if(Array.isArray(i)){var l=a.user_id,n=e._i(i,l);s.checked?n<0&&(e.selected=i.concat([l])):n>-1&&(e.selected=i.slice(0,n).concat(i.slice(n+1)))}else e.selected=o}}})])]),t("td",[t("div",{staticClass:"d-flex"},[t("span",{staticClass:"my-image d-none d-lg-block img-lmenu",staticStyle:{"line-height":"normal"}},[null==a.user_image?t("img",{attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:"Image",border:"0"}}):e._e(),null!=a.user_image?t("img",{attrs:{src:a.user_image,alt:"Image",border:"0"}}):e._e()]),t("span",{staticClass:"mt-2"},[e._v(e._s(a.first_name)+" "+e._s(a.last_name))])])]),0==e.isUSIC?t("td",{attrs:{"data-toggle":"tooltip",title:a.resourceTypeName}},[e._v(e._s(e.TruncateStr(a.resourceTypeName,30)))]):e._e(),t("td",{attrs:{"data-toggle":"tooltip",title:a.skills}},[e._v(" "+e._s(e.TruncateStr(a.skills,30)))]),t("td",{attrs:{"data-toggle":"tooltip",title:a.department}},[e._v(e._s(e.TruncateStr(a.department,30)))])])})),null==e.UserListing||0==e.UserListing.length?t("tr",[t("td",{staticClass:"text-center text-danger no-record",attrs:{colspan:"7"}},[e._v(" NoRecordfound ")])]):e._e()],2)])])])])])])])])])]),t("div",{staticClass:"modal-footer"},[t("a",{staticClass:"btn btn-primary save-btn mr-2",attrs:{href:"javascript:;",title:"@Resources.Save"},on:{click:function(t){return e.AssignTicketAction()}}},[t("i",{staticClass:"fa fa-floppy-o pr-2"}),e._v("Save")]),t("a",{staticClass:"btn btn-primary delete-btn",attrs:{href:"javascript:;",title:"@Resources.Cancel"},on:{click:function(t){return e.Close()}}},[t("i",{staticClass:"fa fa-times pr-2"}),e._v("Cancel")])])])])])],1)},s=[function(){var e=this,t=e._self._c;return t("th",{staticClass:"ui-resizable"},[t("span",{attrs:{href:"javascript:;",id:"NAME"}},[e._v("Name")])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"ui-resizable"},[t("span",{attrs:{href:"javascript:;",id:"NAME"}},[e._v("Skill")])])},function(){var e=this,t=e._self._c;return t("th",{staticClass:"ui-resizable"},[t("span",{attrs:{href:"javascript:;",id:"NAME"}},[e._v("Department")])])}],o=a("9769"),l={props:{ticketids:null},data(){return{isLoading:!1,UserListing:[],SearchConditionByName:"",selected:[],isUSIC:!1}},created:async function(){await this.ShowUserListData()},methods:{ShowUserListData:async function(){var e=this;null!=e.SearchConditionByName&&e.SearchConditionByName;var t="search="+e.SearchConditionByName;await o["a"].GetUserSkillList(t).then((function(t){e.UserListing=[],"Success"==t.data.status&&(e.UserListing=t.data.result.data)}))},Close:function(){this.$emit("closedialog")},setSelectedValue:function(e){var t=this;t.selected=[];try{Array.isArray(e)?t.selectvalue=e[0]:t.selectvalue=e}catch(a){}},searchFunction:function(e){this.SearchConditionByName=this.SearchConditionByName,this.ShowUserListData()},refreshUserList:function(){var e=this;e.SearchConditionByName="",e.ShowUserListData()},AssignTicketAction:function(){var e=this;e.isLoading=!0,e.isSubmitted=!0;var t="";if($("#tblUserList tbody input:checkbox:checked").each((function(){t.length>0&&(t+=","),t+=$(this).val()})),t.length>0){e.isSubmitted=!1;var a=e.selectvalue,i={TicketIds:e.ticketids,SelectedUserId:a,Message:e.UserListing[0].first_name+" "+e.UserListing[0].last_name,TypeCode:"TICKET_ASSIGN"},s=JSON.stringify(i);o["a"].TicketingAssignTickets(s).then(t=>{null!=t.data&&("1"==t.data.code?(e.$parent.fetchRecords(),e.$parent.ShowAssignTicket=!1,$("input:not(.chkAll):checkbox:checked").prop("checked",!1),e.ShowAlert(e.$t("Ticket Assigned Successfully"),"success",!0,e.$t("Alert")),e.isLoading=!1):(e.ShowAlert(e.$t("Assign Ticket failed"),"failure",!0,e.$t("Alert")),e.isLoading=!1))})}else e.ShowAlert(e.$t("Select any record to Assign Ticket"),"warning",!0,e.$t("Alert")),e.isLoading=!1}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports},b0dd:function(e,t,a){"use strict";a("14d9");var i=a("9769");let s=[{title:"Reset",iconClass:"fa-filter text-danger",callbackfunction:"removeFilter",href:"",additionalClass:"",isdisabled:!1,isvisible:!1,checkPrivilege:!1},{title:"Filter",iconClass:"fa-filter",callbackfunction:"openFilterPopUp",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1},{title:"Add WorkOrder",iconClass:"fa fa-plus",callbackfunction:"openaddWorkOrder",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"}],o=[{fieldName:"WO Number",fieldType:"text",fieldIcon:"fa-envelope",fieldSearchConditionName:["WO.workorder_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Number",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TICK.ticket_number"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Assigned To",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TICK.assigned_to"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Created Date",fieldType:"date",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.created_at"],isSearch:!1,datePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},value:"",listOptions:[]},{fieldName:"Created By",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.created_by"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.parent_sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Sub Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.sub_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Client",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["WO.client_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Work Type",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["WO.work_type_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Service Appointment",fieldType:"text",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSA.SA_Number"],isSearch:!1,value:"",listOptions:[]}],l=[{title:"View on Map",callbackfunction:"ViewonMap",href:"javascript:void(0)",icon:"fa action-icon fa-map",additionalSpan:""},{title:"Quick View",href:"javascript:void(0)",icon:"fa fa-eye",callbackfunction:"openQuickViewpopup",additionalSpan:""},{title:"Notes",callbackfunction:"ManageNote",href:"javascript:void(0)",icon:"fa fa-sticky-note",additionalSpan:""},{title:"Details",href:"javascript:void(0)",callbackfunction:"WorkOrderDetails",icon:"fa fa-ticket",additionalSpan:""},{title:"Status",href:"javascript:void(0)",icon:"fa fa-check",callbackfunction:"WorkOrderStatus",additionalSpan:""},{title:"Schdule",href:"javascript:void(0)",callbackfunction:"SchduleAppointment",icon:"fa fa-clock-o",additionalSpan:""},{title:"Add Service Appointment",href:"javascript:void(0)",icon:"fa fa-calendar-plus-o",callbackfunction:"AddServiceAppointment",additionalSpan:""}];async function n(e,t,a,s,o){var l=e,n="moduleName=FSM&type="+a;"USERS"==a?await i["a"].GetDDLData(n).then(e=>{e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[2].listOptions.push(t),l.leftSearchFields[4].listOptions.push(t)})}):"Work_Order_Client_list"==a?await i["a"].GetDDLData(n).then(e=>{e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[7].listOptions.push(t)})}):"Work_Order_Parent_Statuscode"==a?await i["a"].GetDDLData(n).then(e=>{e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[5].listOptions.push(t)})}):"Work_Order_Child_Statuscode"==a?await i["a"].GetDDLData(n).then(e=>{e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[6].listOptions.push(t)})}):"Work_Type_List"==a&&await i["a"].GetDDLData(n).then(e=>{e.data.DATA.forEach(e=>{let t={name:e.name,value:e.value};l.leftSearchFields[8].listOptions.push(t)})})}t["a"]={buttons:s,leftsearchSchema:o,listActions:l,bindleftCommonSearchdropdown:n}},b948:function(e,t,a){var i=a("1d10");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("06f1ad79",i,!0,{sourceMap:!1,shadowMode:!1})},bd54:function(e,t,a){"use strict";a("77ff")},c054:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("FollowUp")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closePopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[t("div",{staticClass:"listing"},[e.followupList.length>0?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"folowuplist"}},[t("thead",{staticClass:"thead-bg"},[t("tr",[t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("ScheduleDate"))+" ")])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("Created BY")))])]),t("th",{attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("Comments"))+" ")])]),t("th",{staticClass:"text-center",attrs:{scope:"col"}},[t("span",[e._v(" "+e._s(e.$t("Action"))+" ")])])])]),t("tbody",e._l(e.followupList,(function(a,i){return t("tr",{key:i},[t("td",[e._v(e._s(e.SetScheduleDateTime(a.scheduleDate)))]),t("td",[e._v(e._s(a.createdBy))]),t("td",[e._v(e._s(a.followUpDescription))]),t("td",{staticClass:"text-center single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Edit")},on:{click:function(t){return e.openToAddEditFollowUp(a)}}},[t("em",{staticClass:"fa fa-pencil text-success"})])])])})),0)])]):e._e(),0==e.followupList.length?t("div",{staticClass:"text-center text-danger p-4 border no-record"},[e._v(" "+e._s(e.$t("NoRecordfound")))]):e._e()])]),t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"col-lg-6 text-right p-0"},[t("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(t){return e.openToAddEditFollowUp(null)}}},[t("em",{staticClass:"fa fa-plus pr-2"}),e._v(e._s(e.$t("Add"))+" "+e._s(e.$t("FollowUp")))])])])])])]),e.showAddEventModalForAddEdit?t("modaladdfollowup",{ref:"addEditFollowupModal",attrs:{followupListById:e.followupListById,followUpId:e.followUpId,sourceid:e.sourceId,ticketStatus:e.statustype},on:{close:function(t){e.showAddEventModalForAddEdit=!1}}}):e._e()],1)])},s=[],o=a("9769"),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header"},[t("h5",{staticClass:"modal-title"},[e._v(" Follow Up ")]),t("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(t){return e.$emit("close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),"ticket_closed"!=e.ticketStatus&&"ticket_closedlocked"!=e.ticketStatus?t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.SaveFollowup}})],1):e._e()])])])])},n=[],r={props:{ticketStatus:{type:String,required:!0},sourceid:{Type:String,required:!0},followUpId:{Type:String,required:!0},followupListById:{Type:Array,required:!0}},data:function(){return{ScheduleDate:new Date,time:"",Comment:"",FormSchema:[{layoutType:"double",Data:[{astype:"DateField",label:this.$t("Date(M/D/YYYY)"),name:"Date",value:"",placeholder:"",config:{format:"MM/DD/YYYY"},validationRules:{required:!0}},{astype:"DateField",label:this.$t("Time"),name:"Time",value:"",validationRules:{required:!0,max:100},config:{mode:"time",is24hr:!1,format:"hh:mm A"}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:"",validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created(){var e=this;e.edit()},methods:{SaveFollowup:function(){var e=this,t={ScheduleDate:e.$options.filters.formatDate(e.FormSchema[0].Data[0].value),time:e.$options.filters.formatTime(e.FormSchema[0].Data[1].value),FollowUpDescription:e.FormSchema[1].Data[0].value,ticketId:e.sourceid,FollowUpId:e.followUpId},a=JSON.stringify(t);o["a"].AddFollowUp(a).then(t=>{null!=t.data.msg?e.ShowAlert(t.data.msg,"failure",!0,e.$t("Alert")):null!=t.data.newId?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("FollowUp")]),"success",!0,e.$t("Alert")),e.$parent.loadFollowUpData(e.sourceid,e.ticketStatus),e.$emit("close")):e.ShowAlert(e.$t("AddedError",t.data.msg),"failure",!0,e.$t("Alert"))})},edit:function(){var e=this,t=e.followupListById.scheduleDate.split("-"),a=t[2]+"-"+t[1]+"-"+t[0];e._data.FormSchema[1].Data[0].value=e.followupListById.followUpDescription,e._data.FormSchema[0].Data[0].value=a,e._data.FormSchema[0].Data[1].value=e.followupListById.time},Close:function(){this.$parent.showAddEventModalForAddEdit=!1}}},c=r,d=a("2877"),u=Object(d["a"])(c,l,n,!1,null,null,null),p=u.exports,m={components:{modaladdfollowup:p},props:{ticketStatus:{type:String,required:!0},ticketId:{Type:String,required:!0}},data:function(){return{followupList:[],sourceId:null,listItem:null,statustype:null,showAddEventModalForAddEdit:!1,followupListById:[],followUpId:null}},created:function(){this.sourceId=this.ticketId,this.loadFollowUpData(this.ticketId,this.ticketStatus)},methods:{SetScheduleDateTime:function(e){var t="";return t=e,t},loadFollowUpData:function(e,t){if("undefined"!=typeof e&&null!=e&&""!=e){var a=this;a.statustype=t,a.sourceId=e,a.followupList=[];var i=`ticketId=${a.sourceId}&ticketStatus=${a.statustype}`;o["a"].FollowupList(i).then((function(e){""!=e.data&&null!=e.data&&e.data.length>0?a.followupList=e.data:a.followupList=[]}))}},closePopup:function(){this.$emit("closeFollowup")},openToAddEditFollowUp:function(e){var t=this;null!=e?(t.followUpId=e.followUpId,t.followupListById=e):(t.followUpId=e,t.followupListById=e),t.showAddEventModalForAddEdit=!0}}},f=m,h=Object(d["a"])(f,i,s,!1,null,null,null);t["a"]=h.exports},d5ad:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Recurring View Details")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"modal-body"},[t("form",{attrs:{"data-vv-scope":"ManageRecurringTicketData"}},[t("div",{staticClass:"accordion custom-accr",attrs:{id:"accordionExample"}},[t("div",{staticClass:"card mb-3 probx"},[t("div",{staticClass:"card-body"},e._l(e.recurringTicketViewDetail,(function(a,i){return t("div",{key:i,staticClass:"row"},[t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("TicketNumber:")))]),e._v(" "+e._s(a.TICKET_NUMBER))])])]),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("Frequency:")))]),e._v(" "+e._s(a.FREQUENCY))])])]),"Monthly"==a.FREQUENCY||"Quarterly"==a.FREQUENCY||"halfYearly"==a.FREQUENCY||"Annually"==a.FREQUENCY?t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("Date:")))]),e._v(" "+e._s(e.$options.filters.formatDate(a.DATE)?e.$options.filters.formatDate(a.DATE):"--"))])])]):e._e(),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("Time:")))]),e._v(" "+e._s(null!=a.TIME?a.TIME:"--"))])])]),"Weekly"==a.FREQUENCY||"BiWeekly"==a.FREQUENCY?t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("week_day:")))]),e._v(" "),t("span",{domProps:{innerHTML:e._s(e.getWeekDays(a.WEEK_DAYS))}})])])]):e._e(),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("NoOfReOccurence:")))]),e._v(" "+e._s(a.NO_OF_RECURRANCE))])])]),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("CrewName:")))]),e._v(" "+e._s(null!=a.CREW_NAME?a.CREW_NAME:"--"))])])]),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",[e._v(e._s(e.$t("ResourceName:")))]),e._v(" "+e._s(""!=a.RESOURCE_NAME?a.RESOURCE_NAME:"--"))])])]),t("div",{staticClass:"col-md-6 col-lg-4"},[t("div",{staticClass:"form-group"},[t("label",[t("b",{staticStyle:{float:"left"}},[e._v(e._s(e.$t("Status:")))]),t("span",{class:{"px-2 text-center text-white d-block":!0,"bg-success":"Active"==a.STATUS_ID,"bg-danger":"Stopped"==a.STATUS_ID},staticStyle:{float:"left"}},[e._v(" "+e._s(a.STATUS_ID)+" ")])])])])])})),0)])]),t("div",{staticClass:"row flex-row-reverse mt-2"},[t("div",{staticClass:"col-lg-6 text-right"},[t("span",[t("a",{staticClass:"btn btn-success mr-2 btn-sm",attrs:{href:"javascript:;","data-toggle-tooltip":"tooltip","data-original-title":"Edit Recurring"},on:{click:function(t){return e.editRecurringTicket()}}},[e._v(e._s(e.$t("Edit Recurring")))])])])]),t("tg-list",{attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"Ticketing",LegendArray:[],widgets:[],IdentityColumn:"id",listType:["List"],HeaderText:e.$t("Recurring Ticket List"),ListData:e.recurringTicketList,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,RenderRowActionMethod:e.listActions,NorecordfoundText:e.$t("NoRecordfound")},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[t("td",{staticClass:"text-center single-action tourguide_a"},[t("span",{class:e.getStatusClass(a.row.status_id,"status_id")},[e._v(" "+e._s(a.row[a.column.COLUMN_NAME])+" ")])])]:e._e()]}}])}),e.showRecurringTicketEditModal?t("showRecurringTicketEditModal",{attrs:{TicketId:e.recurrTicketId},on:{close:function(t){e.showRecurringTicketEditModal=!1}}}):e._e()],1)])])])])])],1)},s=[],o=(a("14d9"),a("9769")),l=(a("42ed"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Edit Recurring Detail")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[e._m(0),t("dynamic-form",{attrs:{lang:"en",schema:e.FormSchema}}),e._m(1),t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.ScheduledFormSchema},on:{OnSubmit:e.SubmitRecurringDetail}})],1)])])])],1)}),n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"heading-border mb-2"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Recurring")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"heading-border mb-2"},[t("h5",{staticClass:"h5"},[t("span",[e._v("Scheduled Appointment")])])])}],r={props:{TicketId:{type:Number,required:!0}},data(){return{isLoading:!1,ticketId:0,isWeekely:0,isBiWeekely:0,dateField:0,FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Frequency"),name:"Frequency",value:"",config:{options:[{name:"Daily",value:"Daily"},{name:"Weekly",value:"Weekly"},{name:"BiWeekly",value:"BiWeekly"},{name:"Monthly",value:"Monthly"},{name:"Quarterly",value:"Quarterly"},{name:"halfYearly",value:"halfYearly"},{name:"Annually",value:"Annually"}],onChange:this.ShowWeeklyDateData},placeholder:this.$t("Select Frequency"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Weekely"),name:"Weekely",value:"",config:{options:[{name:"Monday",value:1},{name:"Tuesday",value:2},{name:"Wednesday",value:3},{name:"Thursday",value:4},{name:"Friday",value:5},{name:"Saturday",value:6},{name:"Sunday",value:7}]},placeholder:this.$t("Select option"),visibility:!1,validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Bi-Weekely"),name:"Weekely",value:"",config:{options:[{name:"Monday",value:1},{name:"Tuesday",value:2},{name:"Wednesday",value:3},{name:"Thursday",value:4},{name:"Friday",value:5},{name:"Saturday",value:6},{name:"Sunday",value:7}]},placeholder:this.$t("Select Day"),visibility:1==this.isBiWeekely,validationRules:{required:!0,max:100}},{astype:"DateField",label:this.$t("Date"),name:"Monthly",value:"",config:{format:"M/D/YYYY"},placeholder:this.$t(""),visibility:this.dateField>0,validationRules:{required:!0,max:100}},{astype:"NumericField",label:this.$t("Number of Recurrences"),name:"NumberofRecurrences",value:"",placeholder:this.$t(""),validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",config:{options:[{name:"Active",value:1001},{name:"Stopped",value:1003}]},placeholder:this.$t("Select Status"),validationRules:{required:!1,max:100}}]}],ScheduledFormSchema:[{layoutType:"triple",Data:[{astype:"DateField",label:this.$t("Scheduled Start Time"),name:"ScheduledStartTime",value:"",placeholder:this.$t("StartDateTime"),config:{format:"M/D/YYYY"}},{astype:"DateField",label:this.$t("Scheduled End Time"),name:"ScheduledEndTime",value:"",placeholder:this.$t("StartDateTime"),config:{format:"M/D/YYYY"}},{astype:"SelectField",label:this.$t("Service Resource:"),name:"ServiceResource",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("Service Crew"),name:"ServiceCrew",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!1,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],ListData:[]}},created:async function(){var e=this;e.ticketId=e.TicketId,e.getResourceList(),e.getcrewList(),setTimeout((function(){e.RecurrTicketDetail()}),500)},methods:{ShowWeeklyDateData:function(e,t){var a=this;null!=t.value&&""!=t.value&&("Weekly"==t.value?(a.FormSchema[0].Data[1].visibility=!0,a.FormSchema[0].Data[2].visibility=!1,a.FormSchema[0].Data[3].visibility=!1):"BiWeekly"==t.value?(a.FormSchema[0].Data[1].visibility=!1,a.FormSchema[0].Data[2].visibility=!0,a.FormSchema[0].Data[3].visibility=!1):"Monthly"==t.value||"Quarterly"==t.value||"halfYearly"==t.value||"Annually"==t.value?(a.FormSchema[0].Data[1].visibility=!1,a.FormSchema[0].Data[2].visibility=!1,a.FormSchema[0].Data[3].visibility=!0):(a.FormSchema[0].Data[1].visibility=!1,a.FormSchema[0].Data[2].visibility=!1,a.FormSchema[0].Data[3].visibility=!1))},getResourceList:async function(){var e=this,t="id=&&moduleName=Ticketing&type=FSM_SA_RESOURCENAME&search=&refId=";await o["a"].GetDDLData(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.DATA.forEach((t,a)=>{e.ScheduledFormSchema[0].Data[2].config.options.push({value:t.value,name:t.name})})}}))},RecurrTicketDetail:function(){var e=this;if(e.recurrTicketView=this.$parent.recurringTicketViewDetail[0],e.FormSchema[0].Data[0].value=this.$parent.recurringTicketViewDetail[0].FREQUENCY,e.FormSchema[0].Data[1].value=this.$parent.recurringTicketViewDetail[0].NO_OF_RECURRANCE,e.FormSchema[1].Data[0].value=this.$parent.recurringTicketViewDetail[0].REC_STATUS_ID,"Weekly"==e.FormSchema[0].Data[0].value){var t=this.$parent.recurringTicketViewDetail[0].WEEK_DAYS;e.FormSchema[0].Data[1].value=t,e.FormSchema[0].Data[1].visibility=!0,e.FormSchema[0].Data[2].visibility=!1,e.FormSchema[0].Data[3].visibility=!1}else"BiWeekly"==e.FormSchema[0].Data[0].value?(e.FormSchema[0].Data[2].value=this.$parent.recurringTicketViewDetail[0].WEEK_DAYS,e.FormSchema[0].Data[1].visibility=!1,e.FormSchema[0].Data[2].visibility=!0,e.FormSchema[0].Data[3].visibility=!1):"Monthly"!=e.FormSchema[0].Data[0].value&&"Quarterly"!=e.FormSchema[0].Data[0].value&&"halfYearly"!=e.FormSchema[0].Data[0].value&&"Annually"!=e.FormSchema[0].Data[0].value||(e.FormSchema[0].Data[3].value=this.$parent.recurringTicketViewDetail[0].DATE,e.FormSchema[0].Data[1].visibility=!1,e.FormSchema[0].Data[2].visibility=!1,e.FormSchema[0].Data[3].visibility=!0);e.ScheduledFormSchema[0].Data[0].value=this.$parent.recurringTicketViewDetail[0].SCHEDULE_START_DATETIME,e.ScheduledFormSchema[0].Data[1].value=this.$parent.recurringTicketViewDetail[0].SCHEDULE_END_DATETIME,null!=this.$parent.recurringTicketViewDetail[0].CREW_ID&&(e.ScheduledFormSchema[1].Data[0].value=this.$parent.recurringTicketViewDetail[0].CREW_ID),null!=this.$parent.recurringTicketViewDetail[0].RESOURCE_ID&&(e.ScheduledFormSchema[0].Data[2].value=this.$parent.recurringTicketViewDetail[0].RESOURCE_ID),null!=e.scheduledStartDateTime&&null!=e.scheduledEndDateTime&&(e.divScheduledTime=!0)},getcrewList:async function(){var e=this,t="id=&&moduleName=Ticketing&type=FSM_CREWNAME&search=&refId=";await o["a"].GetDDLData(t).then((function(t){if(t.data){var a=t.data;null!=a&&t.data.DATA.forEach(t=>{e.ScheduledFormSchema[1].Data[0].config.options.push({value:t.value,name:t.name})})}}))},Close:function(){this.$parent.showRecurringTicketEditModal=!1},SubmitRecurringDetail:function(){var e=this,t={RefId:e.ticketId,FrequencyId:e.FormSchema[0].Data[0].value,WeeklyId:e.FormSchema[0].Data[1].value,BiWeeklyId:e.FormSchema[0].Data[2].value,MonthlyDate:e.FormSchema[0].Data[3].valuee,NoOfRecurrence:e.FormSchema[0].Data[4].value,ResourceId:e.ScheduledFormSchema[0].Data[2].value>0?e.ScheduledFormSchema[0].Data[2].value:0,CrewId:e.ScheduledFormSchema[1].Data[0].value>0?e.ScheduledFormSchema[1].Data[0].value:0,ScheduledStartDateTime:e.ScheduledFormSchema[0].Data[0].value,ScheduledEndDateTime:e.ScheduledFormSchema[0].Data[1].value,StatusId:e.FormSchema[1].Data[0].value},a=JSON.stringify(t);o["a"].UpdateRecurringDetail(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status?(e.ShowAlert(e.$t("UpdatedSuccess",[e.$t("RecurringDetail")]),"success",!0,e.$t("Alert")),e.$parent.openRecurringTicketQuickView(),e.$emit("close")):e.ShowAlert(e.$t("ErrorWhileSavingRecords"),"failure",!0,e.$t("Alert"))}))}}},c=r,d=a("2877"),u=Object(d["a"])(c,l,n,!1,null,null,null),p=u.exports,m={components:{showRecurringTicketEditModal:p},props:{TicketId:{type:Number,required:!0}},data(){return{isLoading:!1,TicketBindList:[],recurringTicketViewDetail:[],recurringTicketList:[],ticketId:0,listheaderbuttons:null,listActions:null,showRecurringTicketEditModal:!1,SortBy:"",SortExp:"",Headers:[],Headers:[{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Ticket Number",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKET_SUBJECT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Ticket Subject",DISPLAY_ORDER:2},{COLUMN_NAME:"PRIORITY_NAME",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Priority Name","DISPLAY_ORDER ":3},{COLUMN_NAME:"ASSIGNED_TO",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Assigned_To",DISPLAY_ORDER:4},{COLUMN_NAME:"STATUS_ID",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2}]}},created:async function(){var e=this;e.ticketId=e.TicketId,e.openRecurringTicketQuickView()},methods:{getWeekDays(e){if(null!=e){var t=[],a=e.split(",");return a.forEach(e=>{switch(e){case"0":a="--";break;case"1":a="Sunday";break;case"2":a="Monday";break;case"3":a="Tuesday";break;case"4":a="Wednesday";break;case"5":a="Thursday";break;case"6":a="Friday";break;case"7":a="Saturday"}t.push(a)}),t.join(", ")}return"--"},convertToTimeFormatHHMMSS(e){const t=parseInt(e,10);let a=Math.floor(t/3600),i=Math.floor((t-3600*a)/60),s=t-3600*a-60*i;return a<10&&(a="0"+a),i<10&&(i="0"+i),s<10&&(s="0"+s),a+":"+i+":"+s},openRecurringTicketQuickView:function(){var e=this,t="ticketId="+e.ticketId;o["a"].GetRecurringViewDetailAndListing(t).then(t=>{e.recurringTicketList=[],e.recurringTicketViewDetail=[],null!=t.data&&""!=t.data&&"Success"==t.data.status&&(e.recurringTicketViewDetail=t.data.result.VIEW_RECURRING_DETAIL,e.recurringTicketList=t.data.result.RECURRING_TICKET_LISTING)},(function(e){}))},editRecurringTicket:function(){var e=this;e.recurrTicketId=this.$parent.RecurringTicketId,e.showRecurringTicketEditModal=!e.showRecurringTicketEditModal},Close:function(){this.$parent.showRecurringViewModal=!1}}},f=m,h=Object(d["a"])(f,i,s,!1,null,null,null);t["a"]=h.exports},d6ba:function(e,t,a){"use strict";a("eac8")},dbc9:function(e,t,a){"use strict";a("b948")},dd82:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".mail-box-pop.dialog{background:rgba(0,0,0,.5)!important}.gm-style .gm-style-iw{padding:10px!important}.gm-style .gm-style-iw button{display:none!important}.cssSlider{-webkit-appearance:none;width:23%;height:17px;background:#d3d3d3;outline:none;opacity:.7;transition:opacity .2s;position:relative!important}.cssSlider:hover{opacity:1}.cssSlider::-webkit-slider-thumb{-webkit-appearance:none;width:25px;height:25px;background:#04aa6d;cursor:pointer}",""]),e.exports=t},e222:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full"},[t("h4",{staticClass:"modal-title"},[e._v("Add Zone")]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.$emit("Close")}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])])])},s=[],o=(a("9769"),{props:{zoneEditData:{required:!1}},data(){return{isLoading:!1,FormSchema:[{layoutType:"double",Data:[{astype:"TextField",label:"Zone Name",name:"txtZoneName",value:"",placeholder:"Enter Name",validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"RadioField",label:"ZoneType",name:"TypeFor",value:"Locator",placeholder:"",config:{options:[{name:"Locator Area",value:"Locator"},{name:"High Profile",value:"High_Profile"},{name:"Locator After Hours",value:"LocatorAfterHours"},{name:"Yard",value:"Yard"}],showAddIcon:!1,onChange:this.onChangeRadio},validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",validationRules:{required:!0,max:500}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.Save},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],ListData:[]}},created:function(){var e=this;e.FormSchema[0].Data[0].value=e.zoneEditData.ZONE_NAME,e.FormSchema[1].Data[0].value=e.zoneEditData.ZONE_TYPE,e.FormSchema[2].Data[0].value=e.zoneEditData.ZONE_DESCRIPTION},methods:{Close:function(){var e=this;e.$emit("Close")},Save:function(){var e=this;let t={ZoneId:void 0==e.zoneEditData?0:e.zoneEditData.ZONE_ID,Name:e.FormSchema[0].Data[0].value,ZoneType:e.FormSchema[1].Data[0].value,Description:e.FormSchema[2].Data[0].value};e.$emit("SaveZoneData",t)}}}),l=o,n=a("2877"),r=Object(n["a"])(l,i,s,!1,null,null,null);t["a"]=r.exports},e2ba:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'.tags-input-badge{font-size:12px!important;padding-top:5px!important;padding-bottom:5px!important;background-color:#3f637e!important;color:#fff!important}.tags-input span{margin-bottom:.3em}.tags-input-root .typeahead-badges{padding-top:.25rem!important}.tags-input-wrapper-default{padding:.5em .25em;background:#fff;border:1px solid transparent;border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent;border-radius:.25em;border-color:#dbdbdb}.tags-input{display:flex;flex-wrap:wrap;align-items:center}.tags-input input[type=text]{color:#495057}.tags-input input{flex:1;background:transparent;border:none}.typeahead-badges>span{cursor:pointer;margin-right:.3em;max-width:195px}.typeahead-hide-btn{color:#999!important;font-style:italic}.tags-input-badge{position:relative;display:inline-block;padding:.25em .4em;padding-top:.25em;padding-bottom:.25em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25em!important;overflow:hidden;text-overflow:ellipsis}.tags-input-remove{cursor:pointer;position:absolute;display:inline-block;right:.3em;top:.3em;padding:.5em;overflow:hidden}.tags-input-remove:before{transform:rotate(45deg)}.tags-input-remove:after,.tags-input-remove:before{content:"";position:absolute;width:75%;left:.15em;background:#5dc282;height:2px;margin-top:-1px;background:#fff!important}.tags-input-remove:after{transform:rotate(-45deg)}.tags-input span{margin-right:.3em}.tags-input-badge-pill{padding-right:1.25em;padding-left:.6em;border-radius:10em}.fsm-ticket,.table-bordered tr.fsm-ticket{background-color:#fff7f3!important}.card-box .card-detail span{width:auto}',""]),e.exports=t},eac8:function(e,t,a){var i=a("5e2a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=a("499e").default;s("4c94231f",i,!0,{sourceMap:!1,shadowMode:!1})},fbbc:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"my-popups"},[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[t("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("Comment")))]),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"modal-body"},[t("dynamic-form",{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchemaData},on:{OnSubmit:e.SaveRejectInfo}})],1)])])])],1)},s=[],o=(a("9769"),a("42ed"),{props:{TicketId:{type:Number,required:!0}},data(){return{isLoading:!1,ticketId:0,listheaderbuttons:null,listActions:null,SortBy:"",SortExp:"",Headers:[],FormSchemaData:[{layoutType:"single",Data:[{astype:"TextAreaField",mode:"Comment",label:this.$t("Comment "),name:"Comment",value:"",config:{options:[]},validationRules:{required:!0}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var e=this;e.ticketId=e.TicketId},methods:{Close:function(){this.$parent.showRejectTicketModal=!1},SaveRejectInfo:function(){var e=this,t=e.FormSchemaData[0].Data[0].value;null!=t?e.$parent.AcceptRejectAction(e.$parent.SelectedItem,"reject",t):e.ShowAlert(e.$t("ErrorMessage",[e.$t("Ticket")],[e.$t("Reject")]),"failure",!0,e.$t("Alert"))}}}),l=o,n=a("2877"),r=Object(n["a"])(l,i,s,!1,null,null,null);t["a"]=r.exports},fc96:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",[t("loader",{attrs:{"is-visible":e.isLoading}}),t("div",{staticClass:"clearfix"}),t("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[e._l(e.AttachmentList,(function(a,i){return t("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[t("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),t("div",{staticClass:"box border positionrelative float-left w-100"},[t("div",{staticClass:"default-tags"},[t("div",{staticClass:"defaultpic_control"},["FSM"==e.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?t("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:e.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-fileName":a.attachment_name,"data-filePath":a.C[0].ATTACHMENTFULLPATH,"data-fileType":a.attachment_desc,"data-GpxFile":a.GEOFILE_PATH,"data-placement":"left"}},[t("em",{staticClass:"fa fa-globe"})]):e._e(),1==e.ListViewAttachment?t("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:e.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(t){return e.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[t("em",{staticClass:"fa fa-eye"}),t("br")]):e._e(),t("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:e.$t("DownloadFile"),"data-placement":"left"},on:{click:function(t){return e.DownloadAttachment(a)}}},[t("em",{staticClass:"fa fa-download"}),t("br")]),a.CREATED_BY==e.UserId?t("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:e.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(t){return e.deleteAttachment(a)}}},[t("em",{staticClass:"fa fa-trash text-danger"}),t("br")]):e._e()])]),t("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[e.setImageIcon(a)?"word-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==e.setImageIcon(a)?t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==e.setImageIcon(a)?t("em",{staticClass:"fa fa-file-text-o"}):e._e():t("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=e.setImageIcon(a)?t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:e.setImageIcon(a),alt:""}}):t("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),t("hr",{staticClass:"my-1"}),t("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[t("div",{staticClass:"col-12 textelipsis px-2"},[e._v(e._s(a.attachment_name))]),t("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[t("small",{staticClass:"float-left textelipsis col-6 p-0"},[t("span",[e._v(e._s(a.PostedBy))])]),t("small",{staticClass:"float-right col-6 text-right p-0"},[e._v(e._s(a.CREATED_AT))])])])])])})),e.NoRecords?t("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[t("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[e._v(e._s(e.$t("NoRecordfound")))])]):e._e()],2)],1)},s=[],o=a("9769"),l={components:{},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:null,UserId:null,isLoading:!1,index:0}},watch:{AttachmentData:function(e){var t=this;t.AttachmentList=e,t.AttachmentList.length>0?t.NoRecords=!1:(t.AttachmentList=[],t.NoRecords=!0)}},created(){var e=this;e.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{e.UserId=e.GetUserInfo.ID,e.RequestFrom=e.AttachmentData.RequestFrom,e.GalleryImages=e.galleryImages,e.AttachmentData.length>0?(e.AttachmentList=e.AttachmentData,e.NoRecords=!1):(e.AttachmentList=[],e.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(e,t){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",e,t),a.$parent.visible=!0},setImageIcon(e){var t=this,a="/Content/Responsive/images/",i=t.getExtension(e.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(e){let t=e.split(/[\\/]/).pop(),a=t.lastIndexOf(".");return""===t||a<1?"":t.slice(a+1)},deleteAttachment:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Remove"),(function(){var a="attachmentid="+e.ticket_attachment_id;o["a"].DeleteIncidentAttachment(a).then((function(e){null!=e.data&&""!=e.data&&"Success"==e.data.status&&"SUCCESS"==e.data.result.MSG?("AttachmentInDetail"==t.viewMode?t.$parent.GetAttachmentData():t.$parent.FetchAttachmentData(),t.ticket_attachment_id>0?t.ShowAlert(t.$t("Attachment has been successfully deleted"),"success",!0,t.$t("Alert")):(t.ShowAlert(t.$t("Attachment has been successfully deleted"),"success",!0,t.$t("Alert")),t.$emit("close"))):t.ShowAlert(t.$t("ErrorWhileSavingRecords",[t.$t("failure")]),"success",!0,t.$t("Alert"))}))}))},DownloadAttachment(e){var t=this;t.isLoading=!0;var a=`filePath=${e.attachment_path}&fileName=${e.attachment_name}`;o["a"].DownloadFile(a).then((function(a){t.isLoading=!1;const i=a.data,s=`data:${JSON.parse(e.attachment_desc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",e.attachment_name),document.body.appendChild(o),o.click()})),t.isLoading=!1}}},n=l,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);t["a"]=c.exports}}]);
//# sourceMappingURL=chunk-77d487ec.js.map