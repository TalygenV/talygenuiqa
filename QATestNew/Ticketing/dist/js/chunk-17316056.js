(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17316056"],{"0c69":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),t.NoteList.length>0?[e("div",{staticClass:"row card-view no-bg custom-box-width"},t._l(t.NoteList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3"},[e("div",{class:{"card-box":!0,"green-bg-light":"Public"!=a.PRIVACY,"blue-bg-light":"Public"==a.PRIVACY}},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[a.AVATAR?e("img",{staticClass:"img-circle avatar",attrs:{src:a.AVATAR,alt:t.$t("Image")}}):e("img",{staticClass:"img-circle avatar",attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.DEPARTMENT_NAME?a.DEPARTMENT_NAME:"--")+" ")]),e("div",{staticClass:"card-detail-main1 dynamiclistol"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.CREATED_BY_NAME))])]),e("hr",{staticClass:"my-2"}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"260px"}},[e("div",{staticClass:"w-100 float-left custom-scrollbar-js",domProps:{innerHTML:t._s(a.NOTE)}})])]),e("div",{staticClass:"bottom-action"},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.CREATED_AT?t.$options.filters.formatDateTime(a.CREATED_AT):"--")+" ")])]),e("div",{staticClass:"card-action"},[e("a",{staticClass:"round-icon-small btn-primary-light downloadAttachement",attrs:{title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.TICKET_ATTACHMENT_ID},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})]),1!=t.ListNoteData?e("a",{staticClass:"round-icon-small btn-success-light",attrs:{title:t.$t("EditNotes"),alt:t.$t("EditNotes"),href:"javascript:;"},on:{click:function(e){return t.EditNote(a)}}},[e("em",{staticClass:"fa fa-edit"})]):t._e()])])])])})),0)]:t._e(),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center d-block no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)},s=[],o=a("9769"),l={props:{NoteData:{type:Array,required:!0},ListNoteData:{type:Number,required:!1}},data(){return{NoRecords:!1,isShowAddNote:!1,UserId:null,NoteList:[],isLoading:!1,noteId:0,noteDataById:[]}},watch:{NoteData:function(t){var e=this;e.NoteList=t,e.NoteList.length>0?e.NoRecords=!1:(e.NoteList=[],e.NoRecords=!0)}},created(){setTimeout(()=>{var t=this;t.UserId=t.GetUserInfo.ID,t.ListNoteData=this.ListNoteData,null!=t.NoteData?(t.NoteList=t.NoteData,t.NoRecords=!1):(t.NoRecords=!0,t.NoteList=[])},2e3)},methods:{EditNote:function(t){var e=this;e.$parent.noteId=t.NOTE_ID,e.$parent.ticketId=t.TICKET_ID,e.$parent.note=t.NOTE,e.$parent.isShowAddNote=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.ATTACHMENT_PATH}&fileName=${t.ATTACHMENT_NAME}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.ATTACHMENT_DESC).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.ATTACHMENT_NAME),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"0e3b":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".lessmorenotes .notesdata{max-height:100px;text-overflow:ellipsis;overflow:hidden}.readmorenotes{height:auto;text-overflow:ellipsis;overflow:visible}",""]),t.exports=e},"3e91":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Attachment")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchemaData},on:{OnSubmit:t.SaveAttachment}})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),l={components:{},props:{configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},created:async function(){this.configData()},data(){return{AttachmentfileData:[],DisplayName:"",FileSrc:"",btnDisable:!1,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",AttachmentfileExt:"",AttachmentfileSize:"",AttachmentfileName:"",isLoading:!1,noRecord:!1,TicketBindList:[],Description:null,Attachmentfile:null,FormSchemaData:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Display Name"),name:"DisplayName",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},methods:{GetBase64String:function(t){try{var e=this;e.AttachmentfileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.AttachmentfileName=o;var l=o.lastIndexOf("."),r=o.substring(l+1,o.length);e.AttachmentfileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',c=a.size;e.AttachmentfileSize=c;var d={attachement_mime:n,fileName:o,id:0==e.id||null==e.id?e.TicketAttachmentId:e.id,moduleName:e.modulename,subModuleCode:e.submodulecode,base64String:s,fileSize:c};e.AttachmentfileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},SaveAttachment:function(){var t=this,e=t.disallowFileTypes.split(",");e.includes(t.AttachmentfileExt)?(t.checkFileValidExt=!1,t.ShowAlert(t.$t("InvalidFileUploadMsg",t.fileName,t.disallowFileTypes),"warning",!0,t.$t("Alert"))):t.checkFileValidExt=!0;var a=this.SizeToMb(t.AttachmentfileSize);if(a>parseInt(t.allowedPerFileSizeInMb,10)?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,a<0?(t.checkFileValidSize=!1,t.ShowAlert(t.$t("ExceedAllowedSize",t.fileName,t.allowedPerFileSizeInMb),"warning",!0,t.$t("Alert"))):t.checkFileValidSize=!0,1==t.checkFileValidExt&&1==t.checkFileValidSize){var i=JSON.stringify(t.AttachmentfileData);o["a"].UploadFile(i).then(e=>{null!=e.data&&""!=e.data&&"Success"==e.data.Status?(t.ShowAlert(t.$t("Attachment successfully added"),"success",!0,t.$t("Alert")),t.DisplayName="",t.FileSrc="",$("input[type=text]").val(""),t.Close(),t.$emit("FetchAttachmentData"),t.$parent.noRecord=!1,t.callbackfunction()):(t.FileSrc="",$("input[type=text]").val(""))},(function(t){}))}},Close:function(){var t=this;t.FormSchemaData[0].Data[0].value=null,t.AttachmentfileName="",t.Attachmentfile=null,t.AttachmentfileData=null,t.FormSchemaData[0].Data[1].config.onChange=t.GetBase64String,t.$parent.showAttachmentModal=!1,"Attachments"==t.viewMode?document.getElementById("tab-attachment").click():t.$parent.FetchAttachmentData(),t.$parent.noRecord=!1}}},r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"42e5":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal d-block my-popups dialog"},[e("div",{staticClass:"modal-dialog mw-1000"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("div",{attrs:{name:"headerForModal"}},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Form")))])]),e("button",{staticClass:"close",attrs:{type:"button",title:"","data-original-title":"Close"},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body setheight"},[t._l(t.GroupsOfFields,(function(a,i){return[e("div",{staticClass:"col-lg-12 mb-3 px-0"},[a.header_name?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5",class:{"text-left":"left"==a.headerPositionType,"text-center":"center"==a.headerPositionType,"text-right":"right"==a.headerPositionType}},[e("span",[t._v(t._s(a.header_name))])])]):t._e()]),t._l(a.SectionData,(function(a,i){return e("div",{staticClass:"row pl-3 pr-0"},[e("div",{staticClass:"col-lg-12 mb-3"},[t.GetLocalizedValue(a.group_name,a.group_display_name)?e("div",{staticClass:"heading-border mt-2"},[e("h5",{staticClass:"h5"},[e("span",[t._v(t._s(t.GetLocalizedValue(a.group_name,a.group_display_name)))])])]):t._e()]),e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left p-0 d-flex flex-wrap"},t._l(a.FormFieldData,(function(s,o){return e("div",{key:o,class:{"col-sm-12 col-md-12 float-left":!0,"d-none":"NO"==s.form_field_visibility,"col-lg-12 col-xl-12":"single"==s.layout_type,"col-lg-6 col-xl-6":"double"==s.layout_type,"col-lg-4 col-xl-4":"triple"==s.layout_type,"col-lg-3 col-xl-3":"four"==s.layout_type},attrs:{id:s.name}},["NO"==s.form_field_visibility?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],attrs:{type:"hidden",id:s.name},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}):t._e(),e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.GetLocalizedValue(s.label,s.display_name))+":"),1==s.is_required?e("span",{class:{"text-danger":1==s.is_required}},[t._v("*")]):t._e()]),t.isBlank(s.user_guide)?t._e():e("a",{attrs:{href:"javascript:;",tabindex:-1,"data-toggle":"popoveruserguide","data-content":t.GetLocalizedValue(s.user_guide)}},[e("i",{staticClass:"fa fa-question-circle-o text-popover",staticStyle:{"font-size":"14px"}})]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 float-left"},["img"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"input-group"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],ref:"file",refInFor:!0,class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{type:"file",id:"file",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){return t.handleFileUpload(e,s)}}})]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"img"==s.dt_code?e("div",{staticClass:"mt-2",attrs:{id:"divimagedisplayImageId"}},[s.value.bass64?e("div",[e("img",{staticClass:"img-fluid mb-2",staticStyle:{"max-height":"99px",width:"auto"},attrs:{src:s.value.bass64,alt:"Logo",width:"200",height:"150"}})]):t._e()]):t._e(),"date"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("DatePicker",{class:{"input-group w-100":!0,"is-invalid":i[0]},staticStyle:{"flex-wrap":"nowrap"},attrs:{is24hr:t.is24hr,mode:t.mode,disabled:s.disabled,masks:t.masks,"minute-increment":5},scopedSlots:t._u([{key:"default",fn:function({inputValue:o,inputEvents:l,togglePopover:r}){return[e("input",t._g({ref:"inputDatePicker",refInFor:!0,class:{"form-control w-100":!0,"is-invalid":i[0]},attrs:{autocomplete:"off",disabled:s.disabled,name:s.name,placeholder:s.label},domProps:{value:o},on:{blur:function(e){return t.onBlur(e,a)}}},l)),e("div",{staticClass:"input-group-append"},[e("span",t._g({staticClass:"input-group-text"},s.disabled?null:l),[e("i",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{directives:[{name:"show",rawName:"v-show",value:i[0],expression:"errors[0]"}],ref:"errrorMessage",refInFor:!0,staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))])]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"date"!=s.dt_code&&"radio"!=s.dt_code&&"select"!=s.dt_code&&"textarea"!=s.dt_code&&"checkbox"!=s.dt_code&&"phone"!=s.dt_code&&"img"!=s.dt_code&&"signature"!=s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&i.length>0,disabled:"commission_type"==s.name||"agreement_type"==s.name},attrs:{readonly:t.isforshow,type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"textarea"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("textarea",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model.trim",value:s.value,expression:"item.value",modifiers:{trim:!0}}],class:{"form-control":!0,"is-invalid":"textarea"==s.dt_code&&i.length>0},attrs:{type:"text",placeholder:t.GetFieldPlaceHolder(s.label,s.display_name),id:s.name,name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"phone"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"col-md-12 col-sm-12 col-lg-12 p-0"},[e("vue-phone-number-input",{attrs:{name:s.name,"no-use-browser-locale":!0},on:{update:function(e){return t.GetPhoneNumber(s,e,"spanPhone"+o)}},model:{value:s.value,callback:function(e){t.$set(s,"value",e)},expression:"item.value"}}),e("span",{staticClass:"invalid-feedback",staticStyle:{display:"none"},attrs:{id:"spanPhone"+o}},[t._v("Enter valid number.")])],1)]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&2==t.MakeArray(s.picklist_options,s.dt_code).length?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:l}){return[e("div",{staticClass:"form-group"},[e("label",{staticClass:"switch"},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{type:"checkbox",name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled,tabindex:"5"},domProps:{value:s.value,checked:t.makeCheckBoxSelected(t.MakeArray(s.picklist_options,s.dt_code),s.value,"toggle")},on:{change:function(e){t.AssignToggleValues(e,s,t.MakeArray(s.picklist_options,s.dt_code),i,o)}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[0].name))]),e("span",{staticClass:"slider-no"},[t._v(t._s(t.MakeArray(s.picklist_options,s.dt_code)[1].name))])])])]),l[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(l[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:l}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),l[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(l[0]))]):t._e()]}}],null,!0)})]:t._e(),"radio"==s.dt_code&&t.MakeArray(s.picklist_options,s.dt_code).length>2&&!s.optionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:l}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"custom-control p-0"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{key:a.name,staticClass:"custom-control custom-radio"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"item.value"},{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"rdo_"+s.name+"_"+a.value,name:s.name,"data-resource":a.name,type:"radio","data-vv-as":t.GetLocalizedValue(s.name,s.display_name),disabled:s.is_Disabled},domProps:{value:a.value,checked:a.value==s.value,checked:t._q(s.value,a.value)},on:{change:[function(e){return t.$set(s,"value",a.value)},function(e){return t.showDependentItem(s,a.value,i,o)}]}}),e("label",{staticClass:"custom-control-label universalradio-custom-control-label dynamic",attrs:{for:"rdo_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])})),0)]),l[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(l[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"HorizantalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"form-check form-check-inline"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.name+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label universal-custom-control-label pl-2 pr-1 dynamic",attrs:{for:"chk_"+s.name+"_"+a.value}},[t._v(t._s(a.name))])])])})),0),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"checkbox"==s.dt_code&&"VerticalCheckBox"==s.ChkBoxoptionsType?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("div",{staticClass:"form-control pl-0 border-0 bg-transparent"},[e("div",{staticClass:"form-group"},t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"}],staticClass:"dynamic custom-control-input",attrs:{id:"chk_"+s.custom_field_id+"_"+a.value,name:s.name,"data-resource-id":a.name,type:"checkbox","data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},domProps:{value:a.value,checked:t.makeCheckBoxSelected(s.value,a.value)},on:{change:function(e){return t.onChangeCheckBox(s,a.value,e)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"chk_"+s.custom_field_id+"_"+a.value}},[t._v(" "+t._s(a.name)+" ")])])})),0)]),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("v-select",{directives:[{name:"validate",rawName:"v-validate",value:1==s.dependent_show_type?t.GetValidation(s):"",expression:"item.dependent_show_type == 1 ? GetValidation(item) : ''"}],class:{"custom-vselect":1==t.vSelectValidate,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"custom"==s.dropdown_type&&i.length>0},attrs:{label:"name",filterable:!1,name:s.name,placeholder:t.GetFieldPlaceHolder(s.label,s.display_name,s.dt_code),value:s.value,options:s.select_options,checkvalue:s.value,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{search:function(e){return t.onSearch(e,s)},"@input":function(e){return t.setSelectedValue(s,e)}},scopedSlots:t._u([{key:"option",fn:function(a){return[e("div",{staticClass:"d-center"},[t._v(" "+t._s(a.name)+" ")])]}},{key:"selected-option",fn:function(a){return[e("div",{staticClass:"selected d-center"},[t._v(" "+t._s(a.name)+" ")])]}}],null,!0),model:{value:s.select_value,callback:function(e){t.$set(s,"select_value",e)},expression:"item.select_value"}},[e("template",{slot:"no-options"},[t._v(" "+t._s(t.$t("TypeTosearch"))+" "+t._s(t.GetLocalizedValue(s.label,s.display_name))+" ")])],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:i,errors:o}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"==s.picklist_options&&"select"==s.dt_code&&"normal"==s.dropdown_type&&o.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name),"mousedown.native":"onKeyDown1"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])},function(e){t.FillDropdown(s,null),t.onchangechannel(s,a.LeadData)}]}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeNormalArray(s.select_options),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),o[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})]:t._e(),"Lookup"!=s.picklist_options&&"select"==s.dt_code?[e("Field",{attrs:{rules:t.GetValidation(s)},scopedSlots:t._u([{key:"default",fn:function({field:a,errors:i}){return[e("select",{directives:[{name:"validate",rawName:"v-validate",value:t.GetValidation(s),expression:"GetValidation(item)"},{name:"model",rawName:"v-model",value:s.value,expression:"item.value"}],class:{"form-control":!0,"is-invalid":"Lookup"!=s.picklist_options&&"select"==s.dt_code&&i.length>0},attrs:{name:s.name,"data-vv-as":t.GetLocalizedValue(s.name,s.display_name)},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.MakeArray(s.picklist_options,s.dt_code),(function(a){return e("option",{domProps:{selected:s.value==a.value,value:a.value}},[t._v(t._s(a.name)+" ")])}))],2),i[0]?e("span",{staticClass:"invalid-feedback d-block"},[t._v(t._s(i[0]))]):t._e()]}}],null,!0)})]:t._e(),"CA"==t.UserType?e("div",{staticClass:"ml-2 mt-1"},[1==s.isPlusIcon?e("a",{staticClass:"round-icon-small btn-dark theme-primary"},["industry_type_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddIndustrypopup(s)}}}):t._e(),"channel_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddLeadSourcepopup(s)}}}):t._e(),"role_title_id"==s.name?e("i",{staticClass:"fa fa-plus text-white pt-7 font-18",on:{click:function(e){return t.openaddRoleTitlepopup(s)}}}):t._e()]):t._e()]):t._e()],2)])])])})),0)])}))]})),0==t.isforshow?e("div",{staticClass:"row flex-row-reverse"},[e("div",{staticClass:"col-lg-6 text-right"},[e("a",{staticClass:"btn btn-success formbtn widthhalf mr-2",attrs:{href:"javascript:;",title:t.$t("Save")},on:{click:function(e){return t.SubmitData()}}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save"))+" ")]),e("a",{staticClass:"btn btn-danger formbtn widthhalf",attrs:{href:"javascript:;",title:t.$t("Cancel")},on:{click:function(e){return t.Close()}}},[e("i",{staticClass:"fa fa-close pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])]):t._e()],2)])])])])],1)},s=[],o=(a("14d9"),a("d91b"),a("9769")),l=a("d5da"),r={components:{DatePicker:l["DatePicker"]},props:{isforshow:{type:Boolean,required:!0},formIdForShow:{type:String,required:!0},moduleName:{type:String,required:!0},subModuleCode:{type:String,required:!0},workOrderId:{type:String,required:!0},subStatusId:{type:String,required:!0},listForSubmittedForm:{type:Array,required:!0},propFormId:{required:!0},callbackfunction:{type:Function}},data(){return{WorkOrderId:0,FormId:null,FormFieldData:null,isLoading:!1,GroupsOfFields:[],ApiURL:null,UserType:"",containername:""}},created(){var t=this;t.UserType=t.GetUserInfo.UserType,t.containername=t.GetUserInfo.ContainerName,t.FormId=t.formIdForShow,t.FetchData()},methods:{makeCheckBoxSelected:function(t,e,a){return"string"==typeof t&&(t=t.split(",")),"toggle"==a?t[1].value==e:!!t.includes(e)},onChangeCheckBox:function(t,e,a){"string"==typeof t.value&&(t.value=t.value.split(",")),1==a.target.checked?t.value.push(e):t.value.splice(t.value.indexOf(e),1)},Close:function(){var t=this;t.$parent.ShowWorkOrderStatusForm=!1,t.$emit("Close")},FetchData:function(){var t=this;t.isLoading=!0;var e=`id=${t.FormId}&moduleName=${t.moduleName}&subModuleCode=${t.subModuleCode}&otherData=${t.workOrderId}&subStatusId=${t.subStatusId}&isForLog=`+t.isforshow;o["a"].GetFormById(e).then((function(e){if(t.listForSubmittedForm.length>0){var a=t.listForSubmittedForm.filter(e=>e.formId==t.FormId&&null!=e.formSubnittedId&&1==e.hasOwnProperty("SaveFormJSON"));a.length>0?t.FormFieldData=a[0].SaveFormJSON:0==t.formIdForShow||"0"==t.formIdForShow?t.FormFieldData=t.listForSubmittedForm:t.FormFieldData=e.data.data}else t.FormFieldData=e.data.data;null!=t.FormFieldData&&t.FormFieldData.length>0&&$.each(t.FormFieldData,$.proxy((function(e,a){if("img"==a.dt_code){var i={fieldType:"FileUpload",fileName:"",length:"",fileType:"",containerName:t.containername,id:t.FormId,bass64:a.value};a.value=i}"checkbox"==a.dt_code&&(a.select_value=[]);var s=a.headerId,o=$.grep(t.GroupsOfFields,(function(t,e){return t.headerId==s}));if(0==o.length){var l={headerId:a.headerId,header_name:a.HeaderName,header_DisplayOrder:a.header_DisplayOrder,headerPositionType:a.headerPositionType,SectionData:[]},r=$.grep(t.FormFieldData,(function(t,e){return t.headerId==s}));$.each(r,$.proxy((function(e,a){var i=a.group_id,s=$.grep(l.SectionData,(function(t,e){return t.group_id==i}));if(0==s.length){var o=$.grep(r,(function(t,e){return t.group_id==i})),n={group_id:i,group_name:a.group_name,LayoutType:a.layout_type,group_display_name:t.GetLocalizedValue(a.group_name,a.group_display_name),group_is_system_generated:a.group_is_system_generated,FormFieldData:o};l.SectionData.push(n)}}),this)),t.GroupsOfFields.push(l),console.log("vm.GroupsOfFields",t.GroupsOfFields)}}),this)),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.RadioButtonBootstrap()}),100),setTimeout((function(){t.isLoading=!1}),500)}))},SubmitData:function(t){var e=this;e.submited=!0,e.isLoading=!0;var a=e.FormFieldData,i=[],s=0;if($.each(a,(function(t,a){var o=a.value;if("date"==a.dt_code&&(o=a.value),"contact_number"==a.name||"home_phone"==a.name||"business_phone"==a.name){var l=e.phoneList.filter(t=>t.field_id==a.custom_field_id);l.length>0&&(a.value=$.trim(l[0].value),o=$.trim(l[0].value),0==l[0].isValid&&$.trim(a.value).length>0&&s++)}if("checkbox"==a.dt_code&&(o=String(a.value)),"select"==a.dt_code)try{o="object"===typeof o&&null!==o?o.value:o}catch(n){}var r={field_name:a.name,field_value:o,custom_field_id:a.custom_field_id,dt_code:a.dt_code};console.log("dataObject1",r),i.push(r)})),s>0)return e.isLoading=!1,e.submited=!1,!1;var l={data:i,formId:e.FormId,refId:e.workOrderId,subModuleCode:e.subModuleCode},r=JSON.stringify(l);o["a"].SaveUserFormData(r).then((function(t){e.ShowAlert(t.data.msg,"success",!0,e.$t("Alert")),$.each(e.listForSubmittedForm,(function(i,s){s.formId==e.FormId&&(s.formSubnittedId=t.data.returnId,s.SaveFormJSON=a)})),e.submited=!1,e.Close(),e.callbackfunction(),setTimeout((function(){e.isLoading=!1}),500)}))},AssignToggleValues:function(t,e,a,i,s){var o=this,l="";if(t.target.checked){l=a[1].value;var r=$.grep(a,(function(t,e){return"yes"==String(t.value).toLowerCase()||"1"==String(t.value).toLowerCase()||"true"==String(t.value).toLowerCase()||"public"==String(t.value).toLowerCase()}));null!=r&&r.length>0&&(l=r[0].value)}else{l=a[0].value;r=$.grep(a,(function(t,e){return"no"==String(t.value).toLowerCase()||"0"==String(t.value).toLowerCase()||"false"==String(t.value).toLowerCase()||"private"==String(t.value).toLowerCase()}));null!=r&&r.length>0&&(l=r[0].value)}"0"==l||"no"==l.toLowerCase()?l=!1:"1"!=l&&"yes"!=l.toLowerCase()||(l=!0),e.value=l,o.showDependentItem(e,l,i,s)},handleFileUpload:function(t,e){var a=this;this.selectedFile=t.target.files[0];var i={fieldType:"FileUpload",fileName:t.target.files[0].name,length:t.target.files[0].size,fileType:t.target.files[0].type,containerName:a.containername,id:a.FormId},s=new FileReader;s.readAsDataURL(this.selectedFile),s.onload=()=>{i.bass64=s.result,e.value=i},console.log("selectedFile1",i)}}},n=r,c=a("2877"),d=Object(c["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},"47f3":function(t,e,a){"use strict";a("8586")},"4eba":function(t,e){},5437:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Reply")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-8"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithReply,InvalidSubmit:t.checkError},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}},{key:"tgslot-Subject",fn:function({data:a}){return[e("label",[t._v(t._s(a.fieldInfo.value)+" "+t._s(t.ticketSubject))])]}},{key:"tgslot-ReplyTo",fn:function({data:a}){return[e("label",[t._v(t._s(a.fieldInfo.value)+t._s(t.ticketReplyTo)+" ")])]}}])})],1),e("div",{staticClass:"col-xl-4 pl-xl-0 mt-md-2"},[e("div",{staticClass:"border no-padding h-100 bg-light"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("Related Article")))])]),e("div",{staticClass:"info-list infolistheight"},[e("div",{staticClass:"col-sm-12 col-md-12 float-left"},[e("div",{staticClass:"row mt-0",staticStyle:{display:"flex"}},[e("div",{staticClass:"col-12 col-sm-8 float-left pr-1 pl-0"},[e("div",{staticClass:"form-group"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.articleText,expression:"articleText"}],staticClass:"form-control",attrs:{id:"txtRelatedArticleList",maxlength:"50",type:"text",placeholder:t.$t("Search by KeyWords"),autocomplete:"off"},domProps:{value:t.articleText},on:{keypress:t.SearchRelatedArticle,input:function(e){e.target.composing||(t.articleText=e.target.value)}}})])]),e("div",{staticClass:"col-12 col-sm-4 float-left pl-0"},[e("div",{staticClass:"search-btm-btn background-0 text-left",staticStyle:{display:"flex"}},[e("a",{staticClass:"btn btn-success mr-1 px-4",attrs:{title:t.$t("Search"),id:"ancRelatedArticleList",href:"javascript:;"},on:{click:function(e){return t.EnterRelatedArticleText()}}},[e("i",{staticClass:"fa fa-search"})]),e("a",{staticClass:"btn btn-danger clearsearchtext px-4",attrs:{href:"javascript:;",id:"ancClearRelatedArticleList",title:t.$t("Clear")},on:{click:function(e){return t.resetRelatedArticleText()}}},[e("i",{staticClass:"fa fa-refresh"})])])])])]),e("div",{staticClass:"clearfix",staticStyle:{clear:"both"}}),e("div",{staticClass:"search-related-articles",staticStyle:{display:"none"}},[e("i",{staticClass:"fa fa-search"}),e("div",{staticClass:"clearfix"}),e("span",[t._v(t._s(t.$t("Lookforticketrelated")))])]),e("div",{staticClass:"listing mb-2",staticStyle:{"max-height":"530px","overflow-y":"auto"},attrs:{id:"divRelatedArticleList"}},t._l(t.ArticleList,(function(a){return e("div",{staticClass:"listing articlesList p-2"},t._l(a.ART,(function(a){return e("div",{staticClass:"listing articlesList p-2"},[e("p",{staticClass:"mb-0"},[e("span",{staticClass:"blue-time w-100 d-block"},[t._v(t._s(a.TICKET_ARTICLE_TITLE)+" "),e("a",{staticClass:"text-right float-right ancsetartticle single-action",on:{click:function(e){return t.SetArticleOnDesc(a)}}},[e("i",{staticClass:"fa fa-plus-circle"})])]),e("br"),e("span",{staticClass:"txt",domProps:{innerHTML:t._s(a.TICKET_ARTICLE_DESC)}})])])})),0)})),0)])])])])])])])])],1)},s=[],o=(a("14d9"),a("b7ef"),a("9769")),l={props:{classicEditor:null,configdata:{type:Array,required:!0},id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,file:null,ReplyTicketList:[],checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",ArticleList:[],TicketThreadId:null,TicketThreadToId:0,IsSupportTicket:!1,StatusCode:"",ticketSubject:"",articleText:"",ticketReplyTo:"",ticketModel:{transferDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",TicketThreadId:"",TicketThreadToId:0,RepliedBy:0,StatusCode:"",fileData:[]},FormSchema:[{layoutType:"double",Data:[{astype:"SlotField",label:this.$t("Subject"),name:"Subject",value:"",placeholder:""},{astype:"SlotField",label:this.$t("Reply To"),name:"ReplyTo",value:"",placeholder:""}]},{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Canned Reply"),name:"CannedReply",value:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},placeholder:this.$t("Select Template"),validationRules:{required:!1,max:100}}]},{layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"ListAttachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;this.configData(),t.FetchData()},methods:{SearchRelatedArticle:function(t){var e=t.key,a=this;a.ShowRelatedArticleList(e)},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},EnterRelatedArticleText:function(){var t=this,e=t.articleText;t.ShowRelatedArticleList(e)},resetRelatedArticleText:function(){var t=this;t.articleText="",t._data.FormSchema[3].Data[0].value="",t.ArticleList=[]},SetArticleOnDesc:function(t){var e=this;e._data.FormSchema[3].Data[0].value="",e._data.FormSchema[3].Data[0].value=t.TICKET_ARTICLE_TITLE+"<br>"+t.TICKET_ARTICLE_DESC},checkError:function(t,e){},onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onChangeTemplate:async function(t){var e=this;e.Description=t.target.value},ShowRelatedArticleList:async function(t){var e=this,a="search="+t;await o["a"].RelatedArticleList(a).then((function(t){null!=t.data&&(e.ArticleList=t.data.result.data)}))},FetchData:async function(){var t=this,e="ticketId="+t.id;await o["a"].AssignTransferTicket(e).then((function(e){null!=e.data&&(t.ReplyTicketList=e.data.data,t.TicketThreadToId=t.ReplyTicketList.ticketThreadToId,t.StatusCode=t.ReplyTicketList.ticketStatus,t.ticketSubject=t.ReplyTicketList.ticketSubject,t.ticketReplyTo=t.ReplyTicketList.ticketThreadToName,t.ReplyTicketList.replyTemplate.forEach((e,a)=>{t.FormSchema[1].Data[0].config.options.push({value:e.value,name:e.name})}))}))},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var l=o.lastIndexOf("."),r=o.substring(l+1,o.length);e.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithReply:function(t,e){var a=this;if(""==a._data.FormSchema[3].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==vueObj.checkFileValidExt&&1==vueObj.checkFileValidSize){a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData,a.ticketModel.RepliedBy=a.TicketThreadToId,a.ticketModel.TicketThreadToId=a.TicketThreadToId,a.ticketModel.transferDescription=a._data.FormSchema[3].Data[0].value;var l=JSON.stringify(a.ticketModel);o["a"].TicketReply(l).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Reply")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.Close(),a.callbackfunction()):(a.FileSrc="",a.Close(),$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){this.$parent.showReplyTicketModal=!1}}},r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},5774:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"listing"},[e("div",{staticClass:"w-100",attrs:{id:"accordion"}},[t._l(t.groupByDate,(function(a,i,s){return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("a",{class:{"card-link collapsed":s>1,"card-link":s<=1},attrs:{"data-toggle":"collapse",href:"#collapseOneThread"+s}},[e("div",{staticClass:"conversation-date heading-border"},[e("span",[t._v(t._s(t.$t(i)))])])])]),e("div",[e("div",{class:{collapse:s>1,"collapse show":s<=1},attrs:{id:"collapseOneThread"+s}},[e("div",{staticClass:"card-body"},[e("div",{staticClass:"conversation-main"},[t._l(a,(function(a,i){return[e("div",{staticClass:"conversation-time"},[e("span",[t._v(t._s(t.$options.filters.formatTime(a.createdAt)))])]),e("div",{staticClass:"conversation-box-con"},[e("div",{staticClass:"conversation-box"},[t._m(0,!0),e("div",{staticClass:"conversation-header addednote-ticket"},[e("span",[e("span",{staticClass:"sender-name"},[t._v(t._s(a.actionPerformedByName))]),e("span",{staticClass:"sender-department"},[t._v("("+t._s(a.actionPerformedByDeptName)+")")])]),a.ticketAttachmentId>0?e("span",{staticClass:"header-action"},[e("a",{staticClass:"btn-primary downloadAttachement round-icon-split round-icon split",attrs:{id:a.ticketAttachmentId,title:t.$t("ClickHereDownloadAttachment"),alt:t.$t("DownloadFile"),href:"javascript:;",value:a.ticketAttachmentId,"data-isSupportTicket":a.isSupportTicket},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"})])]):t._e()]),e("div",{staticClass:"conversation-content addednote-ticket"},[e("p",[t._v(t._s(t.SetMessage(a)))]),null!=a.threadDescription&&a.threadDescription.length>0?e("div",{staticClass:"addednote-ticket-content"},[e("div",{staticClass:"col-12 p-0 notesdata"},[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.threadDescription)}})])])]):t._e()])])])]}))],2)])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 text-center col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger no-record"},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)])},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"name-circle text-white light-yellow"},[e("em",{staticClass:"fa fa-file",staticStyle:{"font-size":"18px","margin-top":"18px !important"},attrs:{"aria-hidden":"true"}})])}],o=(a("14d9"),a("9769")),l={props:{TicketThreads:{type:Array,required:!0}},data(){return{ThreadsList:[],UserType:null,UserId:null,NoRecords:!1}},computed:{groupByDate(){var t=this;let e={};return t.TicketThreads.forEach(t=>{let a=t.createdAt.substring(0,10);e[a]||(e[a]=[]),e[a].push(t)}),e}},created(){var t=this;t.UserId=t.GetUserInfo.ID,t.UserType=t.GetUserInfo.UserType},methods:{DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.fileSrc}&fileName=${t.fileName}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.fileMime).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.fileName),document.body.appendChild(o),o.click()}))},SetMessage:function(t){var e=this,a="";if("TICKET_TRANSFER"==t.statusCode&&t.currentStatus==t.priviousStatus&&"CA"!=e.UserType){var i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED"),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus:"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+i=="TICKET_TRANSFER"?t.departmentName:t.currentStatus:""==t.currentStatus?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length>0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");var s="";t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus.toUpperCase()==t.priviousStatus.toUpperCase()&&(s=""),a=t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+i=="TICKET_TRANSFER"?t.actionPerformedByDeptName:t.actionPerformedByName+" "+e.$t("To")+" "+i=="TICKET_TRANSFER"?t.departmentName:t.currentStatus+" "+s:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s}else if("TICKET_TRANSFER"==t.statusCode&&t.priviousStatus.length<=0&&"CL"!=e.UserType){i="TICKET_TRANSFER";"A"==t.threadType&&(i="TICKET_ASSIGNED");s="";if(t.actionPerformedByName!=t.priviousStatus&&""!=t.priviousStatus&&(s=e.$t("From")+" "+t.priviousStatus),t.currentStatus==t.priviousStatus&&(s=""),t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType)a=t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?e.$t(i)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s:e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?t.departmentName:t.currentStatus+" "+s;else if("CA"!=e.UserType&&"SA"!=e.UserType){var o=t.currentStatus;""==o&&(o=t.TicketThreadTo),a=t.departmentName.toUpperCase()==o.toUpperCase()?e.$t(i)+" "+$t("By")+" "+t.departmentName:e.$t(i)+" "+$t("By")+("TICKET_TRANSFER"==i?t.actionPerformedByDeptName:t.actionPerformedByName)+" "+e.$t("To")+" "+("TICKET_TRANSFER"==i?t.departmentName:o+" "+s)}else a=e.$t(i)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentStatus?t.departmentName:t.currentStatus)+" "+s}else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length>0)"CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode?a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"CL"==e.UserType&&t.threadCreatedBy==e.UserId?a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]):"CL"==e.UserType?a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:"CA"!=e.UserType||"SA"!=e.UserType?(t.statusCode.toUpperCase()==t.departmentName.toUpperCase()&&(t.departmentName=t.actionPerformedByName),a=t.statusCode.toUpperCase()==t.actionPerformedByName.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("To")+" "+t.departmentName+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:t.isSupportTicket?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus):a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("And")+" "+e.$t("Cc")+" "+t.priviousStatus;else if(("TICKET_REPLY_SENT"==t.statusCode||"TICKET_REPLY_DRAFT"==t.statusCode)&&t.priviousStatus.length<=0)if("CL"==e.UserType&&"TICKET_REPLY_DRAFT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("CL"==e.UserType&&t.threadCreatedBy==e.UserId)a=e.$t("TICKET_REPLY_CL_SEND",[t.ticketNumber]);else if("CL"==e.UserType)a=e.$t("TICKET_REPLY_CL",[t.ticketNumber]);else{o=t.currentStatus;t.currentStatus!=t.departmentName&&""!=o||(o=t.TicketThreadTo),a=t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:t.actionPerformedByName.toUpperCase()==t.currentStatus.toUpperCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.departmentName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus}else if("TICKET_SPLIT"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.currentStatus==t.priviousStatus)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus;else if("TICKET_STATUS_CHANGE"==t.statusCode&&t.priviousStatus.length>0)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):t.threadCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.ticketCreatedBy==e.UserId&&"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:"CA"!=e.UserType&&"SA"!=e.UserType?t.threadCreatedBy==e.UserId&&"CL"!=e.UserType||t.threadCreatedBy==t.ticketCreatedBy?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:t.isSupportTicket&&t.threadCreatedBy!=e.UserId&&"SA"!=e.UserType?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.departmentName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+t.currentStatus==""?"--":t.currentStatus+" "+e.$t("From")+" "+t.priviousStatus;else if("TICKET_CLOSED"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_STATUS_CHANGE_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_FEEDBACK"==t.statusCode||"TICKET_NOTES_CREATED"==t.statusCode||"TICKET_NOTES_DELETED"==t.statusCode)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_ETA_CHANGE"==t.statusCode)a="CL"==e.UserType?e.$t("TICKET_ETA_CHANGE_CL",[t.ticketNumber]):""!=t.priviousStatus?e.$t("TICKET_ETA_CHANGE_MESSAGE")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.priviousStatus+" "+e.$t("To")+" "+t.currentStatus:e.$t("TICKET_ETA_UPDATE_MESSAGE")+" "+t.currentStatus+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CONCLUSION"==t.statusCode)a="TICKET CONCLUSION DRAFT"==t.currentStatus?e.$t("Conclusion")+" "+e.$t("Drafted")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t("Conclusion")+" "+e.$t("Created_By")+" "+t.actionPerformedByName;else if("CLAIM_CREATED"==t.statusCode||"CLAIM_APPROVE"==t.statusCode||"CLAIM_REJECT"==t.statusCode)a="CLAIM DRAFT"==t.currentStatus||"TICKET_CLAIM_DRAFT"==t.currentStatus?e.$t("TICKET_CLAIM_DRAFT")+" "+e.$t("By")+" "+t.actionPerformedByName:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName;else if("TICKET_CREATED"==t.statusCode&&""!=t.onBehalfUser)a=e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("OnBehalf")+" "+e.$t("of")+" "+t.onBehalfUser;else if("TICKET_PRODUCT_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_PRODUCT_CHANGE_CL",[t.ticketNumber]);else{var l=null;""!=t.previousProduct&&(l=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)+l:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Product"):t.currentProduct)}else if("TICKET_CATEGORY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{l=null;""!=t.previousProduct&&(l=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)+l:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Category"):t.currentProduct)}else if("TICKET_PRIORITY_CHANGE"==t.statusCode)if("CL"==e.UserType)a=e.$t("TICKET_CATEGORY_CHANGE_CL",[t.ticketNumber]);else{l=null;""!=t.previousProduct&&(l=" "+e.$t("From")+" "+t.previousProduct),a=e.isBlank(t.previousProduct)||t.previousProduct.toLowerCase()!=t.currentProduct.toLowerCase()?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)+l:e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("To")+" "+(""==t.currentProduct?e.$t("No")+" "+e.$t("Priority"):t.currentProduct)}else a="TICKET_MERGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_ESCALATES_NEXT_LEVEL"==t.statusCode?e.$t("TICKET_ESCALATES_NEXT_LEVEL",[e.$t("Level")+" "+t.currentStatus,t.actionPerformedByName]):"TICKET_DELETED"==t.statusCode?"CL"==e.UserType?e.$t("TICKET_DELETED_CL",[t.ticketNumber]):e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"ADD_ATTACHMENT"==t.statusCode||"TICKET_ACCEPT"==t.statusCode||"TICKET_REJECT"==t.statusCode||"TICKET_WO_ADDED"==t.statusCode||"REPORT_INCIDENT"==t.statusCode||"DELETE_REPORT_INCIDENT"==t.statusCode||"EDIT_REPORT_INCIDENT"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName:"TICKET_WO_SUB_STATUS_CHANGED"==t.statusCode||"WO_STATUS_CHANGE"==t.statusCode?e.$t(t.statusCode)+" "+e.$t("By")+" "+t.actionPerformedByName+" "+e.$t("From")+" "+t.previousProduct+" "+e.$t("To")+" "+t.currentProduct:"TICKET_WO_STATUS_CHANGED_HIGH_PROFILE_WHILE_PARSING"==t.statusCode?e.$t(t.statusCode):"HIGH_PROFILE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode,[t.ticketNumber,t.currentProduct]):"TICKET_ASSIGN_SMS"==t.statusCode?e.$t("Ticket_Assign_SMS",[t.ticketNumber,t.currentProduct]):"WORK_ORDER_FORM_NOTIFICATION"==t.statusCode||"CORNER_LOT_EMAIL_NOTIFICATION"==t.statusCode||"GAS_FACILITY_EMAIL_NOTIFICATION"==t.statusCode||"CAST_IRON_EMAIL_NOTIFICATION"==t.statusCode||"GAS_PRINT_ISSUE_EMAIL_NOTIFICATION"==t.statusCode?e.$t(t.statusCode)+" "+t.threadType+" "+e.$t("By")+" "+t.actionPerformedByName:"PL_FORM_NOTIFICATION_HAS_BEEN_SENT"==t.statusCode?t.threadType:"WORK_ORDER_FORMS_ACCEPT"==t.statusCode?"Work Order Forms accepted "+e.$t("By")+" "+t.actionPerformedByName:"WORK_ORDER_FORMS_REJECT"==t.statusCode?"Work Order Forms rejected "+e.$t("By")+" "+t.actionPerformedByName:e.$t("AssignedTo")+" "+t.actionPerformedByName+" "+t.departmentName;return a}}},r=l,n=(a("47f3"),a("2877")),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},6481:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Notes")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithNote},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)},s=[],o=(a("b7ef"),a("14d9"),a("9769")),l=(a("d91b"),{props:{configdata:{type:Array,required:!0},classicEditor:null,ckEditor:null,id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{content:"<h1>Some initial content</h1>",ticketType:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,checkFileValidSize:!1,checkFileValidExt:!1,allowedPerFileSizeInMb:0,disallowFileTypes:"",file:null,noteData:[],noteId:0,ticketId:0,TicketNoteId:0,TicketNoteId:0,note:"",ticketModel:{NoteDescription:"",transferType:"",TicketId:0,ModuleName:"",SubModuleCode:"",NoteId:0,WorkOrderId:0,fileData:[]},FormSchema:[{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Note Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{layoutType:"single",Data:[{astype:"RadioField",label:"",name:"QuickViewType",value:2,placeholder:"",validationRules:{required:!1,max:200},config:{options:[{name:"Private",value:1},{name:"Public",value:2}],showAddIcon:!1,onChange:this.onChangeRadio}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"NoteAttachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"doc",iconClass:"fa-file-word-o"},{fileType:"docx",iconClass:"fa-file-word-o"},{fileType:"txt",iconClass:"fa-file-text-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"jpeg",iconClass:"fa-file-image-o"},{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"gif",iconClass:"fa-file-image-o"},{fileType:"bmp",iconClass:"fa-file-image-o"},{fileType:"mp4",iconClass:"fa-file-video-o"},{fileType:"mov",iconClass:"fa-file-video-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!1}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;this.configData(),t.$parent.noteId>0&&(t.TicketNoteId=t.$parent.noteId,t.ticketId=t.$parent.ticketId,t._data.FormSchema[0].Data[0].value=t.$parent.note)},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},SizeToMb:function(t){var e=this,a=1048576*parseInt(e.allowedPerFileSizeInMb,10);if(t>a)return-1;var i=t/1024/1024;return i},configData:function(t){var e=this,a=e.configdata;$.each(a,$.proxy((function(t,e){"TicketFileSize"==e.CORE_CONFIG_KEY?this.allowedPerFileSizeInMb=e.CONFIG_DATA_VALUE:"TicketDisallowedFileTypes"==e.CORE_CONFIG_KEY&&(this.disallowFileTypes=e.CONFIG_DATA_VALUE)}),this))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},onChangeRadio:function(t,e){var a=this;a.ticketType=t.target.dataset.value},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var l=o.lastIndexOf("."),r=o.substring(l+1,o.length);e.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithNote:function(t,e){var a=this;if(""==a._data.FormSchema[0].Data[0].value||null==a._data.FormSchema[0].Data[0].value)this.showError=!0;else{var i=a.disallowFileTypes.split(",");i.includes(a.fileExt)?(a.checkFileValidExt=!1,a.ShowAlert(a.$t("InvalidFileUploadMsg",a.fileName,a.disallowFileTypes),"warning",!0,a.$t("Alert"))):a.checkFileValidExt=!0;var s=this.SizeToMb(a.fileSize);if(s>parseInt(a.allowedPerFileSizeInMb,10)?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,s<0?(a.checkFileValidSize=!1,a.ShowAlert(a.$t("ExceedAllowedSize",a.fileName,a.allowedPerFileSizeInMb),"warning",!0,a.$t("Alert"))):a.checkFileValidSize=!0,1==a.checkFileValidExt&&1==a.checkFileValidSize){a.ticketModel.transferType=1==a.ticketType?"Private":"Public",a.ticketModel.NoteDescription=a._data.FormSchema[0].Data[0].value,a.ticketModel.TicketId=0==a.id||null==a.id?a.TicketNoteId:a.id,a.ticketModel.NoteId=a.TicketNoteId,a.ticketModel.ModuleName=a.modulename,a.ticketModel.SubModuleCode=a.submodulecode,a.ticketModel.fileData=a.fileData;var l=JSON.stringify(a.ticketModel);o["a"].AddNote(l).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Notes")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.callbackfunction(),a.Close()):(a.ShowAlert(a.$t("InvalidFileTypMsg"),"failure",!0,a.$t("Alert")),a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveNote")}})}}},Close:function(){var t=this;t._data.FormSchema[0].Data[0].value=null,t.FileName=null,t.file=null,t.FormSchema[2].Data[0].config.onChange=t.GetBase64String,this.$emit("Close"),t.$parent.isShowAddNote=!1,"Notes"==t.viewMode?document.getElementById("tab-notes").click():t.$parent.LoadNotesForQuickView(),t.$parent.noRecord=!1}}}),r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},"78f9":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TimeTrack")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithTime},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},s=[],o=(a("14d9"),a("9769")),l=(a("d91b"),{components:{},props:{classicEditor:null,id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},viewMode:{type:String,required:!0}},data(){return{content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,Disabled:0,FormSchema:[{layoutType:"single",Data:[{astype:"SelectField",label:this.$t("WorkOrder"),name:"WorkOrder",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){this.GetDDLData("FSM_TRACK_HISTORY")},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},GetDDLData:async function(t){var e=this,a=`id=${e.id}&moduleName='FSM'&type=`+t;await o["a"].GetDDLDataFSM(a).then((function(t){"Success"==t.data.status&&t.data.result.DATA.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}))},UploadFileWithTime:function(t,e){var a=this,i={TicketId:a.id,WorkOrderId:a._data.FormSchema[0].Data[0].value,TrackDescription:a._data.FormSchema[1].Data[0].value,IsBillable:!0,TrackId:0,RequestFor:"FSM",RequestForType:"START",IPAddress:"",WorkOrderSubject:a._data.FormSchema[0].Data[0].name},s=JSON.stringify(i);a.confirmR(a.$t("ConfirmTimerMsg"),!0,a.$t("StartTimer"),(function(t){a.Disabled=1,o["a"].SaveTrackHistory(s).then(t=>{try{"Success"==t.data.status?(a.$parent.ShowTimer=!0,a.$parent.AddEditText="Edit",a.Disabled=0,a.ShowAlert(a.$t("AddedSuccess",[a.$t("TimeTrack")]),"success",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedError",[a.$t("TimeTrack")]),"failure",!0,a.$t("Alert")),a.Disabled=0,a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.$emit("Close"),t._data.FormSchema[0].Data[0].value=null,t._data.FormSchema[1].Data[0].value=null,t.$parent.isShowWOTimer=!1,"Timer"==t.viewMode&&t.callbackfunction()}}}),r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports},8586:function(t,e,a){var i=a("0e3b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("499e").default;s("075f0807",i,!0,{sourceMap:!1,shadowMode:!1})},c054:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("FollowUp")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closePopup()}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body",staticStyle:{"max-height":"600px","overflow-y":"auto"}},[e("div",{staticClass:"listing"},[t.followupList.length>0?e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"table-openactivities-content","aria-describedby":"folowuplist"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("ScheduleDate"))+" ")])]),e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Created BY")))])]),e("th",{attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Comments"))+" ")])]),e("th",{staticClass:"text-center",attrs:{scope:"col"}},[e("span",[t._v(" "+t._s(t.$t("Action"))+" ")])])])]),e("tbody",t._l(t.followupList,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(t.SetScheduleDateTime(a.scheduleDate)))]),e("td",[t._v(t._s(a.createdBy))]),e("td",[t._v(t._s(a.followUpDescription))]),e("td",{staticClass:"text-center single-action"},[e("a",{attrs:{href:"javascript:;",title:t.$t("Edit")},on:{click:function(e){return t.openToAddEditFollowUp(a)}}},[e("em",{staticClass:"fa fa-pencil text-success"})])])])})),0)])]):t._e(),0==t.followupList.length?e("div",{staticClass:"text-center text-danger p-4 border no-record"},[t._v(" "+t._s(t.$t("NoRecordfound")))]):t._e()])]),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"col-lg-6 text-right p-0"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{href:"javascript:;"},on:{click:function(e){return t.openToAddEditFollowUp(null)}}},[e("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("FollowUp")))])])])])])]),t.showAddEventModalForAddEdit?e("modaladdfollowup",{ref:"addEditFollowupModal",attrs:{followupListById:t.followupListById,followUpId:t.followUpId,sourceid:t.sourceId,ticketStatus:t.statustype},on:{close:function(e){t.showAddEventModalForAddEdit=!1}}}):t._e()],1)])},s=[],o=a("9769"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(" Follow Up ")]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),"ticket_closed"!=t.ticketStatus&&"ticket_closedlocked"!=t.ticketStatus?e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.SaveFollowup}})],1):t._e()])])])])},r=[],n={props:{ticketStatus:{type:String,required:!0},sourceid:{Type:String,required:!0},followUpId:{Type:String,required:!0},followupListById:{Type:Array,required:!0}},data:function(){return{ScheduleDate:new Date,time:"",Comment:"",FormSchema:[{layoutType:"double",Data:[{astype:"DateField",label:this.$t("Date(M/D/YYYY)"),name:"Date",value:"",placeholder:"",config:{format:"MM/DD/YYYY"},validationRules:{required:!0}},{astype:"DateField",label:this.$t("Time"),name:"Time",value:"",validationRules:{required:!0,max:100},config:{mode:"time",is24hr:!1,format:"hh:mm A"}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",placeholder:"",validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created(){var t=this;t.edit()},methods:{SaveFollowup:function(){var t=this,e={ScheduleDate:t.$options.filters.formatDate(t.FormSchema[0].Data[0].value),time:t.$options.filters.formatTime(t.FormSchema[0].Data[1].value),FollowUpDescription:t.FormSchema[1].Data[0].value,ticketId:t.sourceid,FollowUpId:t.followUpId},a=JSON.stringify(e);o["a"].AddFollowUp(a).then(e=>{null!=e.data.msg?t.ShowAlert(e.data.msg,"failure",!0,t.$t("Alert")):null!=e.data.newId?(t.ShowAlert(t.$t("AddedSuccess",[t.$t("FollowUp")]),"success",!0,t.$t("Alert")),t.$parent.loadFollowUpData(t.sourceid,t.ticketStatus),t.$emit("close")):t.ShowAlert(t.$t("AddedError",e.data.msg),"failure",!0,t.$t("Alert"))})},edit:function(){var t=this,e=t.followupListById.scheduleDate.split("-"),a=e[2]+"-"+e[1]+"-"+e[0];t._data.FormSchema[1].Data[0].value=t.followupListById.followUpDescription,t._data.FormSchema[0].Data[0].value=a,t._data.FormSchema[0].Data[1].value=t.followupListById.time},Close:function(){this.$parent.showAddEventModalForAddEdit=!1}}},c=n,d=a("2877"),u=Object(d["a"])(c,l,r,!1,null,null,null),m=u.exports,p={components:{modaladdfollowup:m},props:{ticketStatus:{type:String,required:!0},ticketId:{Type:String,required:!0}},data:function(){return{followupList:[],sourceId:null,listItem:null,statustype:null,showAddEventModalForAddEdit:!1,followupListById:[],followUpId:null}},created:function(){this.sourceId=this.ticketId,this.loadFollowUpData(this.ticketId,this.ticketStatus)},methods:{SetScheduleDateTime:function(t){var e="";return e=t,e},loadFollowUpData:function(t,e){if("undefined"!=typeof t&&null!=t&&""!=t){var a=this;a.statustype=e,a.sourceId=t,a.followupList=[];var i=`ticketId=${a.sourceId}&ticketStatus=${a.statustype}`;o["a"].FollowupList(i).then((function(t){""!=t.data&&null!=t.data&&t.data.length>0?a.followupList=t.data:a.followupList=[]}))}},closePopup:function(){this.$emit("closeFollowup")},openToAddEditFollowUp:function(t){var e=this;null!=t?(e.followUpId=t.followUpId,e.followupListById=t):(e.followUpId=t,e.followupListById=t),e.showAddEventModalForAddEdit=!0}}},h=p,f=Object(d["a"])(h,i,s,!1,null,null,null);e["a"]=f.exports},df18:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("section",{staticClass:"main-content",attrs:{id:"main-content"}},[1==t.ticketType?e("section",{staticClass:"page-action"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 padding-t_8"},[e("div",{staticClass:"theme-primary partition-full"},[e("span",{staticClass:"p-name text-white"},[t._v(t._s(t.TicketNumber))]),e("span",{staticClass:"p-actions float-md-right float-left mb-wid-100"},[t._m(0),t._m(1),e("a",{staticClass:"e-c-map p-action-btn text-white align-items-center d-flex",attrs:{href:"javascript:;"},on:{click:t.ShowHideMap}},[e("i",{staticClass:"fa fa-angle-double-up pr-2",attrs:{id:"icnToggleMap"}}),e("span",{attrs:{id:"spnToggleMap"}},[t._v(t._s(t.mapHeaderText))])]),t._m(2)])])])])])]):t._e(),e("section",{staticClass:"main-content"},[e("div",{staticClass:"container-fluid padding-t_8"},[1==t.ticketType&&1==t.isShowMap?e("map-component",{staticClass:"row",attrs:{mapType:t.mapType,mapContainer:"detailMapDiv",Data:t.mapObj,config:t.config,UtilityMapData:t.UtilityMapData}}):t._e(),e("loader",{attrs:{"is-visible":t.isLoading}})],1),e("div",{staticClass:"container-fluid padding-t_10"},[e("div",{staticClass:"left-menu-tab",attrs:{id:"divTicketDataDetails"}},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition"},[e("span",{staticClass:"p-name text-white",staticStyle:{"font-size":"19px"}},[t._v(t._s(t.$t("Ticketing")))])])]),e("div",{staticClass:"w-100 float-left mt-2"},[e("div",{staticClass:"input-group font-weight-bold"},[e("div",{staticClass:"input-group-prepend w-100"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.userstatus,expression:"userstatus"}],staticClass:"form-control d-inline-block float-right",staticStyle:{"max-width":"350px","min-width":"100px"},attrs:{name:"ddlUserCurrentStatus",id:"ddlUserCurrentStatus"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.userstatus=e.target.multiple?a:a[0]},function(e){return t.UserCurrentStatus()}]}},[e("option",{attrs:{value:"Busy"}},[t._v("Busy")]),e("option",{attrs:{value:"Offline"}},[t._v("Offline")]),e("option",{attrs:{value:"Online"}},[t._v("Online")])])])])]),e("ul",{staticClass:"nav nav-pills flex-column left-tab mt-2 responivecustomtab w-100 float-left",attrs:{id:"myTab",role:"tablist"}},[e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link active left-menu",attrs:{"data-toggle":"tab",id:"tab-ticketdetails",href:"#tab-ticket-content",role:"tab","aria-controls":"Activities","aria-selected":"false"},on:{click:function(e){return t.LoadTab("activities")}}},[e("em",{staticClass:"fa fa-calendar",attrs:{"aria-hidden":"true"}}),t._v(t._s(t.$t("Activities")))])]),"CL"!=t.UserType?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-notes-content",role:"tab","aria-controls":"Notes","aria-selected":"false",id:"tab-notes"},on:{click:function(e){return t.LoadTab("notes")}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Notes"))+" "),e("span",{attrs:{id:"spntotalticketnotes"}},[t._v(" "+t._s(t.TicketData.noOfNotes>0?"("+t.TicketData.noOfNotes+")":""))])])]):t._e(),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",href:"#tab-attachment-content",role:"tab","aria-controls":"Attachments",id:"tab-attachment","aria-selected":"false"},on:{click:function(e){return t.LoadTab("attachments")}}},[e("em",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Attachments"))+" "),e("span",{attrs:{id:"spntotalticketattachment"}},[t._v(t._s(t.TicketData.attachmentsCount>0?"("+t.TicketData.attachmentsCount+")":""))])])]),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-relatedticket",href:"#tab-relatedticket-content",role:"tab","aria-controls":"RelatedTicket","aria-selected":"false"},on:{click:function(e){return t.LoadTab("relatedticket")}}},[e("em",{staticClass:"fa fa-ticket",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Related")+" "+t.$t("Ticket")))])]):t._e(),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-cliam",href:"#tab-cliam-content",role:"tab","aria-controls":"Claim","aria-selected":"false"},on:{click:function(e){return t.LoadTab("claims")}}},[e("em",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Claim"))),e("span",{attrs:{id:"spntotalticketclaim"}},[t._v(" "+t._s(t.TicketData.noOfClaims>0?"("+t.TicketData.noOfClaims+")":""))])])]),e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-call",href:"#tab-call-content",role:"tab","aria-controls":"TrackHistory","aria-selected":"false"},on:{click:function(e){return t.LoadTab("calls")}}},[e("em",{staticClass:"fa fa-phone",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Call")+" "+t.$t("Details"))+" ")])]),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-trackhistory",href:"#tab-trackhistory-content",role:"tab","aria-controls":"TrackHistory","aria-selected":"false"},on:{click:function(e){return t.LoadTab("trackhistory")}}},[e("em",{staticClass:"fa fa-history",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("Track")+" "+t.$t("History")))])]):t._e(),t.TicketData.isFieldServiceTicket?e("li",{staticClass:"nav-item"},[e("a",{staticClass:"nav-link left-menu",attrs:{"data-toggle":"tab",id:"tab-workorder",href:"#tab-workorder-content",role:"tab","aria-controls":"WorkOrder","aria-selected":"false"},on:{click:function(e){return t.LoadTab("workorder")}}},[e("em",{staticClass:"fa fa-circle-o-notch",attrs:{"aria-hidden":"true"}}),t._v(" "+t._s(t.$t("WorkOrder")))])]):t._e()])]),e("div",{staticClass:"right-content"},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"col-lg-12 p-0",attrs:{id:"tabscontentTicketDetails"}},[e("div",{staticClass:"col-md-12 p-0"},[e("div",{staticClass:"theme-primary partition p-actions-expand"},[e("span",{staticClass:"float-left p-name text-white"},[t._v(t._s(t.TicketNumber))]),t.TicketData.isFieldServiceTicket?e("span",{staticClass:"badge badge-success",staticStyle:{padding:"7px 15px","margin-top":"8px","font-size":"16px","font-weight":"normal"}},[t._v("FSM")]):t._e(),t.TicketData.isFieldServiceTicket?t._e():e("span",{staticClass:"badge badge-primary",staticStyle:{padding:"7px 15px","margin-top":"8px","font-size":"16px","font-weight":"normal"}},[t._v("NORMAL")]),e("span",{staticClass:"p-actions float-right",attrs:{id:"tabscontent"}},[t.TicketData.isFieldServiceTicket?t._e():e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white edit":!0},attrs:{href:"javascript:;",title:t.$t("Update")},on:{click:function(e){return t.UpdateTicket()}}},[e("em",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Update")))]),"CA"==t.UserType||"SA"==t.UserType||"yes"==t.isTicketResolve||"yes"==t.isTicketHOD?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white transfer":!0},attrs:{href:"javascript:;",title:"Assign / Transfer"},on:{click:function(e){t.isShowTransferTicket=!0}}},[e("em",{staticClass:"fa fa-exchange",attrs:{"aria-hidden":"true"}}),e("br"),t._v("Assign / Transfer")]):t._e(),t.TicketData.isFieldServiceTicket?t._e():e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white merge":!0},attrs:{href:"javascript:;",title:t.$t("Merge")},on:{click:function(e){t.isShowMergeTicket=!0}}},[e("em",{staticClass:"fa fa-random",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Merge")))]),e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white reply":!0},attrs:{href:"javascript:;",title:t.$t("Reply")},on:{click:function(e){return t.openReplyModel()}}},[e("em",{staticClass:"fa fa-reply",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Reply")))]),"CL"!=t.UserType?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white addnotes":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"Notes","aria-selected":"false",title:t.$t("AddNotes")},on:{click:function(e){t.isShowAddNote=!0}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("AddNotes")))]):t._e(),"CL"!=t.UserType&&t.TicketData.isFieldServiceTicket?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white addattachment":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"Attachment","aria-selected":"false",title:"Add Attachment"},on:{click:function(e){return t.openAttachmentModel()}}},[e("em",{staticClass:"fa fa-file-text",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Add"))+" "+t._s(t.$t("Attachment")))]):t._e(),e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white claim":!0},attrs:{href:"javascript:;",title:t.$t("AddClaim")},on:{click:function(e){t.isShowAddClaim=!0}}},[e("em",{staticClass:"fa fa-dollar",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("AddClaim")))]),e("a",{staticClass:"p-action-btn text-white esclatehs",attrs:{href:"javascript:;",title:t.$t("Esclate")},on:{click:function(e){return t.openEscalatePopUp()}}},[e("em",{staticClass:"fa fa-list",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("Esclate")))]),t.TicketData.followUpId&&!t.TicketData.isFieldServiceTicket?e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white manageFollowup":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"ManageFollowUp","aria-selected":"false",title:t.$t("ClickHereToEditFollowUp")},on:{click:function(e){t.isshowFolloupList=!0}}},[e("em",{staticClass:"fa fa-flag ml-2 flag-color",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("FollowUp")))]):t._e(),t.TicketData.followUpId||t.TicketData.isFieldServiceTicket?t._e():e("a",{class:{disabled:t.isDisabledHeaderButton,"p-action-btn text-white manageFollowup":!0},attrs:{href:"javascript:;",role:"tab","aria-controls":"ManageFollowUp","aria-selected":"false",title:t.$t("ClickHereToEditFollowUp")},on:{click:function(e){t.isshowFolloupList=!0}}},[e("em",{staticClass:"fa fa-flag ml-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("FollowUp")))]),t.TicketData.isFieldServiceTicket&&"Edit"!==t.AddEditText&&"yes"===t.ShowWorkOrderTimer?e("a",{staticClass:"p-action-btn text-white",class:{disabled:t.isDisabledHeaderButton,"d-none":"no"==t.ShowWorkOrderTimer},attrs:{href:"javascript:;",title:t.$t("StartTimer"),id:"StartTimer"},on:{click:function(e){return t.openStartPopUp()}}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("StartTimer")))]):t._e(),t.TicketData.isFieldServiceTicket&&"Edit"===t.AddEditText&&"yes"===t.ShowWorkOrderTimer?e("a",{staticClass:"p-action-btn text-white",class:{disabled:t.isDisabledHeaderButton,"d-none":"no"==t.ShowWorkOrderTimer},attrs:{href:"javascript:;",title:t.$t("StopTimer"),id:"StopTimer"},on:{click:function(e){return t.openStopPopUp()}}},[e("i",{staticClass:"fa fa-clock-o pr-2",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("StopTimer")))]):t._e(),"Ticketing"==t.SourcePage?e("RouterLink",{staticClass:"p-action-btn text-white d-none d-md-inline-block",attrs:{href:"javascript:;",to:"/Ticketing/Index",title:t.$t("BacktoList")}},[e("em",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("BacktoList"))+" ")]):"PendingAcceptance"==t.SourcePage?e("RouterLink",{staticClass:"p-action-btn text-white d-none d-md-inline-block",attrs:{href:"javascript:;",to:"/Ticketing/PendingAcceptance",title:t.$t("BacktoList")}},[e("em",{staticClass:"fa fa-angle-double-left",attrs:{"aria-hidden":"true"}}),e("br"),t._v(t._s(t.$t("BacktoList"))+" ")]):t._e()],1),t._m(3)])]),e("div",{staticClass:"bg-secondary text-white p-2 d-block d-md-none"},[t._v(t._s(t.TicketNumber))]),e("div",{staticClass:"clearfix"})]),e("div",{class:{listing:!0},attrs:{id:"divticketdetaildleftpanel"}},[e("div",{attrs:{id:"divDetails"}},[t.isShowTicketDetail?e("ticketdetails",{attrs:{TicketId:t.TicketId,ListOfCCUsers:t.ListOfCCUsers,TicketDetailDataForPopup:t.TicketDetailDataForPopup,TicketData:t.TicketData}}):t._e()],1),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"listing tab-content"},[t.isShowActivities?e("div",{staticClass:"col-12 d-flex border border-bottom-0 bg-f5f5f5",attrs:{id:"divconversationbox"}},[e("div",{staticClass:"col-md-6 pl-0"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(" "+t._s(t.$t("Activities"))+" ")])]),e("div",{staticClass:"col-md-6 text-right pr-0 bottom_filter_button"},[e("a",{staticClass:"position-relative",staticStyle:{"z-index":"999"},attrs:{href:"javascript:;",id:"ancreplyExpandAllCollapseAll",title:t.$t("ExpandAllCollapseAll"),"data-toggle-tooltip":"tooltip"}},[t._v(t._s(t.$t("ExpandAllCollapseAll")))])])]):t._e(),e("div",{staticClass:"tab-pane fade show activity-tab active pt-3",attrs:{id:"tab-ticket-content",role:"tabpanel","aria-labelledby":"Activities-tab"}},[e("div",{staticClass:"d-md-inline-block w-100"},[e("div",{staticClass:"merged-ticket",staticStyle:{display:"none"}},[e("div",{staticClass:"merged-ticket-header"},[t._v(t._s(t.$t("MergedTickets")))]),e("div",{staticClass:"merged-ticket-content"})]),e("div",{staticClass:"cont_100P",attrs:{id:"divloadticketdata"}}),t.isShowActivities?e("ThreadsList",{attrs:{TicketThreads:t.TicketThreadsData}}):t._e(),e("div",{staticClass:"cont_100P",attrs:{id:"divSplitConversationBox"}})],1)]),"CL"!=t.UserType?e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-notes-content",role:"tabpanel","aria-labelledby":"Notes-tab"}},[t.isShowNotes?e("TicketNotes",{attrs:{NoteData:t.NoteData}}):t._e()],1):t._e(),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-attachment-content",role:"tabpanel","aria-labelledby":"Attachment-tab"}},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxFile"}}),e("div",{staticClass:"listing pt-1"},[e("TicketAttachment",{attrs:{AttachmentData:t.AttachmentData,viewMode:"AttachmentInDetail"},on:{"open-image":t.openSpecificImage}})],1)]),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-cliam-content"}},[t.isShowClaims?e("TicketClaim",{attrs:{ClaimData:t.ClaimData,classicEditor:t.editor}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-call-content"}},[t.isShowCalls?e("TicketCalls",{attrs:{CallData:t.CallData}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-relatedticket-content"}},[t.isShowRelatedticket?e("RelatedTicketList",{attrs:{ticketId:t.TicketId}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-trackhistory-content"}},[t.isShowTrackHistory?e("TrackHistoryList",{attrs:{ticketId:t.TicketId}}):t._e()],1),e("div",{staticClass:"tab-pane fade",attrs:{id:"tab-workorder-content"}},[t.isShowWorkOrder?e("WorkOrderList",{attrs:{isLocateorNonLocate:t.isLocateorNonLocate,ticketId:t.TicketId,callbackfunction:t.FetchData}}):t._e()],1)])])]),t.visible?e("VueEasyLightbox",{ref:"lightbox",attrs:{show:!0,images:t.galleryImages,customClasses:t.lightboxClasses},on:{close:function(e){t.visible=!1}}}):t._e()],1)])]),t.isshowFolloupList?e("FollowUp",{attrs:{ticketStatus:"",ticketId:t.TicketId},on:{closeFollowup:function(e){t.isshowFolloupList=!1}}}):t._e(),t.isShowAddNote?e("AddNoteData",{attrs:{id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Notes",callbackfunction:t.GetNoteData,configdata:t.ConfigData,HeaderName:t.$t("AddNotes"),classicEditor:t.editor}}):t._e(),t.showReplyTicketModal?e("modalReplyTicketpopup",{attrs:{id:t.TicketId,callbackfunction:t.FetchData,modulename:"Ticketing",submodulecode:"Ticketing",classicEditor:t.editor},on:{close:function(e){t.showReplyTicketModal=!1}}}):t._e(),t.isShowEscalate?e("AddEscalatePopUp",{attrs:{ticketId:t.TicketId,ParentCompanyId:t.ParentCompanyId,ParentCompanyName:t.ParentCompanyName},on:{close:function(e){t.isShowEscalate=!1}}}):t._e(),t.showAttachmentModal?e("ShowAttachmentData",{attrs:{id:t.TicketId,viewMode:"Attachments",callbackfunction:t.GetAttachmentData,modulename:"Ticketing",configdata:t.ConfigData,submodulecode:"Ticketing"},on:{close:function(e){t.showAttachmentModal=!1}}},[e("h5",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.$t("Attachments")))])]):t._e(),t.isShowAddClaim?e("AddClaimData",{attrs:{id:t.TicketId,claimId:t.TicketData.claimId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Claims",callbackfunction:t.GetClaimData,HeaderName:t.$t("AddClaim"),classicEditor:t.editor}}):t._e(),t.isShowTicketUpdate?e("ticketupdate",{attrs:{TicketId:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.FetchData},on:{close:function(e){t.isShowTicketUpdate=!1}}}):t._e(),t.isShowTransferTicket?e("transfertickets",{attrs:{TicketId:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.FetchData},on:{close:function(e){t.isShowTransferTicket=!1}}}):t._e(),t.isShowMergeTicket?e("MergeTicketData",{attrs:{str_ticket_id:t.str_ticket_id,id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.FetchData,classicEditor:t.editor}}):t._e(),t.isShowWOTimer?e("WorkOrderTimerPopup",{attrs:{id:t.TicketId,modulename:"Ticketing",submodulecode:"Ticketing",viewMode:"Timer",callbackfunction:t.FetchData,classicEditor:t.editor}}):t._e()],1)},s=[function(){var t=this,e=t._self._c;return e("h5",{staticClass:"Response-t px-3"},[t._v("Response Time:"),e("br"),e("span",[t._v("00:00:00")])])},function(){var t=this,e=t._self._c;return e("h5",{staticClass:"Resolve-t px-3"},[t._v("Resolve Time:"),e("br"),e("span",[t._v("00:00:00")])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"p-action-btn text-white d-md-inline-block mble_50",attrs:{href:"/Ticketing/Index",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Back to list"}},[e("i",{staticClass:"fa fa-angle-double-left"}),e("br"),t._v("Back to list")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"collapse-head-btns"},[e("a",{staticClass:"collapse-btns",attrs:{href:"javascript:;"}},[e("em",{staticClass:"fa fa-angle-up text-white"})])])}],o=(a("14d9"),a("9769")),l=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"col-lg-12 mb-2 mt-2 p-0",attrs:{id:"week-stat"}},[t._m(0),e("div",{staticClass:"border eqcol h-100 pt-0 px-3 pb-3"},[e("div",{staticClass:"updatefull-widg"},[e("div",{staticClass:"row border-bottom bg-f5f5f5 mb-2"},[e("div",{staticClass:"col-md-6"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(" "+t._s(t.$t("Raised")+" "+t.$t("By"))+": "),t.TicketData.createdBy==t.GetUserInfo.ID&&"CL"==t.UserType?[e("span",{staticClass:"blue-time"},[t._v(t._s(t.TicketData.raisedBy))]),t._v(t._s(t.$t("You"))+" ")]:[e("span",{staticClass:"blue-time"},[t._v(t._s(t.TicketData.raisedBy))]),4==t.TicketData.createdUserTypeId?[t._v(" "+t._s(t.$t("Client"))+" ")]:[t._v(" ("+t._s(t.TicketData.raisedByDepartmentName)+") ")]]],2)]),e("div",{staticClass:"col-md-6 text-right"},[e("h6",{staticClass:"py-3 mb-0"},[t._v(t._s(t.$t("AssignedTo"))+": "),e("span",{staticClass:"blue-time"},[t._v(t._s(null==t.TicketData.assignedTo?t.$t("NotAssigned"):t.TicketData.assignedTo)+" ")]),t._v(" ("+t._s(t.TicketData.departmentName.DEPT_NAME)+") ")])])]),e("div",{staticClass:"row pt-1 px-3"},[e("div",{staticClass:"col-lg-6 p-0"},[e("h2",{staticClass:"time_info"},[t._v(" "+t._s(t.TicketData.ticketSubject)+" "),"TICKET_OPENED"==t.TicketData.status?e("span",{staticClass:"status-open d-inline-block text-center"},[t._v(t._s(t.$t("Open")))]):"TICKET_CLOSED"==t.TicketData.status?e("span",{staticClass:"status-close d-inline-block text-center"},[t._v(t._s(t.$t("Closed")))]):"TICKET_CLOSEDLOCKED"==t.TicketData.status?e("span",{staticClass:"sts-ticket_closedlocked d-inline-block text-center"},[t._v(t._s(t.$t("ClosedandLocked")))]):"TICKET_ON_HOLD"==t.TicketData.status?e("span",{staticClass:"status-onhold d-inline-block text-center"},[t._v(t._s(t.$t("TICKET_ON_HOLD")))]):"TICKET_REOPEN"==t.TicketData.status?e("span",{staticClass:"status-reopen d-inline-block text-center"},[t._v(t._s(t.$t("Reopen")))]):"TICKET_WAITING"==t.TicketData.status?e("span",{staticClass:"status-waiting d-inline-block text-center"},[t._v(t._s(t.$t("Waiting")))]):"TICKET_WAITING_RESOLVED"==t.TicketData.status?e("span",{staticClass:"status-waitingresolve d-inline-block text-center"},[t._v(t._s(t.$t("Waiting")+" "+t.$t("Resolved")))]):"TICKET_WAITING_RESPONSE"==t.TicketData.status?e("span",{staticClass:"status-waitingresolve d-inline-block text-center"},[t._v(t._s(t.$t("Waiting")+" "+t.$t("Response")))]):e("span",{staticClass:"status-open d-inline-block text-center"},[t._v(" "+t._s(""==t.$t(t.TicketData.status)?t.TicketData.status:t.$t(t.TicketData.status))+" ")])]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Category"))+":")]),t._v(" "+t._s(""==t.$t(t.TicketData.ticketCategoryName)?"--":t.$t(t.TicketData.ticketCategoryName))+" ")]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Priority"))+": ")]),"Critical"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white critical-color",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"Medium"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-blue",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"High"==t.TicketData.priority||"Highest"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-orange",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):"Low"==t.TicketData.priority?e("span",{staticClass:"Timer d-inline text-white noti-green",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])]):e("span",{staticClass:"Timer d-inline text-white noti-blue",staticStyle:{cursor:"default"}},[e("span",{staticClass:"tag-name px-2 text-center"},[t._v(" "+t._s(t.TicketData.priority)+" ")])])]),e("p",{staticClass:"mb-1 float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("OpenDate"))+": ")]),t._v(t._s(t.$options.filters.formatDateTime(t.TicketData.createdAt)))]),e("p",{staticClass:"float-left col-sm-12 col-lg-6 p-0"},[e("b",[t._v(t._s(t.$t("Expected_Resolution"))+": ")]),t._v(" "+t._s(null==t.TicketData.expectedResolutionDate?"--":t.$options.filters.formatDate(t.TicketData.expectedResolutionDate))+" ")])]),e("div",{staticClass:"col-lg-6 text-lg-right p-0"})]),e("div",{staticClass:"mb-1 col-12 p-0"},[e("b",[t._v(t._s(t.$t("CCuppercase"))+":")])]),e("div",{staticClass:"ticketShortDesciption mb-2 mt-2"},[e("div",{staticClass:"addednote-ticket-content"},[e("div",{staticClass:"col-12 p-0",attrs:{id:"divlessdata"}},[e("div",{staticClass:"readmore textelipsis_inner"},[e("div",[e("b",[t._v(" "+t._s(t.$t("Description"))+": ")]),e("span",{domProps:{innerHTML:t._s(t.TruncateStr(t.TicketData.description,185))}})])])]),e("div",{staticClass:"col-12 p-0",staticStyle:{display:"none","pointer-events":"none"},attrs:{id:"divshowmoredata"}},[e("div",{staticClass:"readmore"},[e("div",[e("b",[t._v(" "+t._s(t.$t("Description"))+": ")]),e("span",{domProps:{innerHTML:t._s(t.TicketData.description)}})])])]),1!=t.TicketData.isFieldServiceTicket||t.isBlank(t.TicketData.external_ticket_number)?1==t.TicketData.isFieldServiceTicket&&t.isBlank(t.TicketData.external_ticket_number)?e("a",{staticClass:"lessmoredesc ancreadmoredesc",attrs:{href:"javascript:;"},on:{click:t.showTicketDetail}},[t._v(t._s(t.$t("readmore")))]):t._e():e("a",{staticClass:"lessmoredesc ancreadmoredesc",attrs:{href:"javascript:;"},on:{click:t.openTicketTextTab}},[t._v(t._s(t.$t("readmore")))]),e("div",{staticClass:"addednote-ticket-content readmoredesc",staticStyle:{display:"none"}},[e("a",{staticClass:"anclessmoredesc",attrs:{href:"javascript:;"}},[t._v(" "+t._s(t.$t("Read")+" "+t.$t("Less"))+" ")])])])])]),e("div",{staticClass:"communication"}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12 d-flex"},[e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("Call"))+": "),t._m(1)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("VideoCall"))+": "),t._m(2)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("SMS"))+": "),t._m(3)]),e("p",{staticClass:"mr-4"},[t._v(t._s(t.$t("Chat"))+": "),t._m(4)])])])])]),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.isMoreTicketDetail?e("div",{staticClass:"modal d-block dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[t.isTicketDetail?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TicketDetails")))]):t._e(),t.isTicketText?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("TicketText")))]):t._e(),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"cardv-body float-left pt-0 border col-12 float-left p-1"},[e("div",{staticClass:"card-text evemgmt_details"},[t.isTicketDetail?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left panel1 mb-0 p-0",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[t._l(t.LeftViewData,(function(a){return["YES"!=a.form_field_visibility||"Ticket Number"!=a.display_name&&"Ticket Subject"!=a.display_name&&"Priority"!=a.display_name&&"Created At"!=a.display_name&&"Modified At"!=a.display_name&&"Zip"!=a.display_name&&"Type of Work"!=a.display_name&&"State"!=a.display_name&&"City"!=a.display_name&&"Country"!=a.display_name&&"Address"!=a.display_name&&"Description"!=a.display_name&&"Ticket Number"!=a.display_name&&"Last Activity Date"!=a.display_name&&"Status"!=a.display_name&&"Company Name"!=a.display_name?t._e():e("p",{staticClass:"px-2 w-50 float-left"},[e("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),e("span",{staticClass:"pl-1 font-weight-bold"},[t._v(t._s(t.GetLocalizedValue(a.name,a.display_name))+": ")]),"status_id"!=a.name&&null!=a.value?e("span",{domProps:{innerHTML:t._s(a.value)}}):null==a.value?e("span",[t._v("--")]):t._e(),"status_id"==a.name?e("span",{class:{"bg-secondary text-center px-2 text-white":!0,"bg-success":"Open"==a.value,"bg-danger":"Closed"==a.value||"Cancelled"==a.value||"Closed and Locked"==a.value,"bg-warning":"Draft"==a.value}},[t._v(t._s(a.value))]):t._e()])]})),e("p",{staticClass:"px-2 w-50 float-left"},[e("i",{staticClass:"fa fa-dot-circle-o text-dark float-left pr-2",staticStyle:{"font-size":"12pt"}}),e("span",{staticClass:"pl-1 font-weight-bold"},[t._v("CC Users: ")]),e("span",[t._v(t._s(t.ListOfCCUsers))])])],2):t._e(),t.isTicketText?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left panel1 mb-0 p-0",staticStyle:{"min-height":"100px","max-height":"500px","overflow-x":"hidden"}},[t.isBlank(t.TicketTextDetail)?t._e():e("pre",{domProps:{innerHTML:t._s(t.TicketTextDetail)}}),t.isBlank(t.TicketTextDetail)?t._e():e("div",{staticClass:"col-12 text-center text-danger"},[t._v(" "+t._s(t.$t("NoRecordfound")))])]):t._e()])])])])])]):t._e()],1)])],1)},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"expand-list"},[e("a",{staticClass:"expand-list-btn justify-content-center align-items-center",attrs:{href:"javascript:;"}},[e("i",{staticClass:"icon-solid arrow-solid-left",staticStyle:{"font-size":"9pt"}})])])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"voicecall",attrs:{href:"javascript:;",id:"call",title:"Call"}},[e("i",{staticClass:"fa fa-phone call-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"videocall",attrs:{href:"javascript:;",id:"videocall",title:"Video Call"}},[e("i",{staticClass:"fa fa-video-camera video-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"sendsms",attrs:{href:"javascript:;",id:"sms",title:"Send SMS"}},[e("i",{staticClass:"fa fa-commenting sms-color"})])},function(){var t=this,e=t._self._c;return e("a",{staticClass:"chat",attrs:{href:"javascript:;",id:"chat",title:"Chat"}},[e("i",{staticClass:"fa fa-comments chat-color"})])}],n={props:{TicketId:{type:Number,required:!1},TicketData:{type:Object,required:!0},TicketDetailDataForPopup:{type:Array,required:!0},ListOfCCUsers:{type:String,required:!0}},data(){return{UserType:null,isMoreTicketDetail:!1,TicketTextDetail:"",isTicketText:!1,isTicketDetail:!1,LeftViewData:[]}},created(){var t=this;t.UserType=t.GetUserInfo.UserType},methods:{Close:function(){var t=this;t.isMoreTicketDetail=!1},showTicketDetail:function(){var t=this;t.isMoreTicketDetail=!0,t.isTicketDetail=!0,t.isTicketText=!1,t.LeftViewData=t.TicketDetailDataForPopup},openTicketTextTab:function(){var t=this;t.isMoreTicketDetail=!0,t.isTicketText=!0,t.isTicketDetail=!1;var e=`TicketId=${this.TicketId}&formId=`;o["a"].GetTicketText(e).then((function(e){null!=e.data&&"Success"==e.data.status&&(t.TicketTextDetail=e.data.result.DATA[0].TICKETTEXT)}))}}},c=n,d=a("2877"),u=Object(d["a"])(c,l,r,!1,null,null,null),m=u.exports,p=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Escalate")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-TicketEscalateType",fn:function({data:a}){return[e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"form-check-input rdoTicketEsclateType",attrs:{type:"radio",id:"TicketEsclateType",name:"TicketEsclateType",value:"0"},domProps:{checked:t._q(t.selectedValue,"0")},on:{change:function(e){t.selectedValue="0"}}}),e("label",{staticClass:"mb-0"},[t._v(" "+t._s(t.$t("With In Company"))+" ")])]),e("div",{staticClass:"custom-control custom-radio custom-control-inline"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedValue,expression:"selectedValue"}],staticClass:"form-check-input rdoTicketEsclateType",attrs:{type:"radio",id:"TicketEsclateType",name:"TicketEsclateType",value:"1"},domProps:{checked:t._q(t.selectedValue,"1")},on:{click:t.showDepartmentDropdown,change:function(e){t.selectedValue="1"}}}),e("label",{staticClass:"mb-0"},[t._v(" "+t._s(t.$t("Parent Company(R.LAW)"))+" ")])])]}}])})],1)])])])],1)},h=[],f={props:{ParentCompanyId:{type:String,required:!0},ticketId:{Type:Number,required:!0},ParentCompanyName:{Type:String,required:!0}},data(){return{isLoading:!1,TicketId:null,FormSchema:[{layoutType:"double",Data:[{astype:"slotField",label:this.$t("Escalate To"),name:"TicketEscalateType",value:"",config:{options:[]},placeholder:"",validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("Department Name"),name:"Department",value:"",visibility:!1,config:{options:[]},placeholder:this.$t("Select Department"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Reason"),name:"Reason",value:"",placeholder:"",validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.GetDepartmentListbyCompanyForClient()},methods:{showDepartmentDropdown(){var t=this;t.FormSchema[0].Data[1].visibility=!0},Close:function(){this.$parent.isShowEscalate=!1},GetDepartmentListbyCompanyForClient:async function(){var t=this;await o["a"].GetDepartmentListbyCompanyForClient().then(async e=>{e.data.length>0&&(t.DepartmentList=e.data,t.DepartmentList.forEach((e,a)=>{t.FormSchema[0].Data[1].config.options.push({value:e.departmenT_ID,name:e.departmenT_NAME})}))})},onSubmit(t,e){var a=this,i={TicketId:a.ticketId,TicketGroupId:0,TicketEsclateId:0,TicketEsclateReason:a.FormSchema[1].Data[0].value,TicketEsclateType:this.selectedValue,ParentCompanyId:a.ParentCompanyId,TicketEsclateDepartment:a.FormSchema[0].Data[1].value,TicketbBoardStatus:"Escalate"},s=JSON.stringify(i);o["a"].SaveTicketEsclate(s).then(t=>{"Success"==t.data.status?(1==t.data.result.STATUSCODE?(a.ShowAlert(a.$t("Ticket is escalated successfully."),"success",!0,a.$t("Alert")),a.Close()):null==t.data.result.STATUSCODE?a.ShowAlert(a.$t("Next Higher Level Doesn't Exist."),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("Escalated CAn't Saved."),"failure",!0,a.$t("Alert")),a.Close()):(a.ShowAlert(a.$t("AddedError",[a.$t("Resource")]),"failure",!0,a.$t("Alert")),a.Close())})}}},v=f,C=Object(d["a"])(v,p,h,!1,null,null,null),T=C.exports,_=a("5774"),S=a("0c69"),y=a("fc96"),k=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"row card-view no-bg custom-box-width",attrs:{id:"divclaimattch"}},[t._l(t.ClaimList,(function(a,i){return e("div",{key:i,staticClass:"col-md-12 col-lg-6 col-xl-3 mb-3",attrs:{id:"trclaimList_"+a.claimId}},[e("div",{staticClass:"card-box blue-bg-light"},[e("div",{staticClass:"card-heading"},[e("span",{staticClass:"user-img-con mr-2"},[e("img",{attrs:{src:"/Content/images/DefaultImages/avatar-icon.jpg",alt:t.$t("Image"),border:"0"}})]),t._v(" "+t._s(a.createdByDepartmentName?a.createdByDepartmentName:"--")+" ")]),e("div",{staticClass:"card-detail-main1"},[e("div",{staticClass:"card-detail"},[e("em",{staticClass:"fa fa-user",attrs:{"aria-hidden":"true"}}),e("span",[t._v(t._s(a.createdByName))])]),e("p",[t._v(t._s(t.$t("ClaimValue"))+": "),e("span",{domProps:{innerHTML:t._s(a.claimValue)}})]),e("hr",{staticClass:"my-2"}),a.approvedClaimAmount>0?e("span",{staticClass:"ticket-priority greentxt"},[t._v(t._s(t.$t("ApprovedClaimAmount")+" "+a.approvedClaimAmount))]):t._e(),e("div",{staticClass:"commentnoteslist",staticStyle:{"max-height":"265px"}},[e("div",{staticClass:"custom-scrollbar-js",domProps:{innerHTML:t._s(a.claimNotes)}})]),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("div",[a.claimId>0&&a.attachmentsCount>0?e("div",{class:"ifattachmentviss-cont d-none "+a.claimId},[e("div",{staticClass:"attachments",attrs:{"data-ClaimId":a.claimId}})]):t._e()]):t._e(),1001==a.statusId?e("div",[e("div",{directives:[{name:"i",rawName:"v-i",value:a.claimId>0&&a.attachmentsCount>0,expression:"item.claimId > 0 && item.attachmentsCount > 0"}],class:"ifattachmentviss-cont d-none "+a.claimId},[e("div",{staticClass:"attachments",attrs:{"data-ClaimId":a.claimId}})])]):t._e()]),a.arComments?e("div",[a.approvedClaimAmount>0?e("div",[e("hr",{staticClass:"my-2"}),e("a",{staticClass:"fontlinkblue showCliamARComment approved-reject-cmnt",attrs:{href:"javascript:;","data-claimId":a.claimId,title:t.$t("ApprovedClaimComment")},on:{click:function(e){t.isShowingApprove=!t.isShowingApprove}}},[t._v(" "+t._s(t.$t("ApprovedClaimComment"))+" ")])]):e("div",[e("hr",{staticClass:"my-2"}),e("a",{staticClass:"fontlinkblue showCliamARComment approved-reject-cmnt",attrs:{href:"javascript:;","data-claimId":a.claimId,title:t.$t("RejectClaimComment")},on:{click:function(e){t.isShowingApprove=!t.isShowingApprove}}},[t._v(" "+t._s(t.$t("RejectClaimComment"))+" ")])]),e("div",{staticStyle:{clear:"both"}}),t.isShowingApprove?e("div",{staticClass:"commentlist",staticStyle:{"max-height":"260px","margin-bottom":"50px"}},[e("div",{staticClass:"custom-scrollbar-js",domProps:{innerHTML:t._s(a.arComments)}})]):t._e()]):t._e(),e("div",{staticClass:"bottom-action",staticStyle:{"padding-top":"8px","padding-bottom":"8px"}},[e("div",{staticClass:"card-date"},[e("em",{staticClass:"fa fa-calendar-o",attrs:{"aria-hidden":"true"}}),e("span",[t._v(" "+t._s(a.createdAt?t.$options.filters.formatDateTime(a.createdAt):"--"))])]),e("div",{staticClass:"card-action"},[a.claimId>0&&a.attachmentsCount>0&&1001==a.statusId?e("a",{staticClass:"anchrAttachmentsclaim round-icon-small btn-info-light",attrs:{href:"javascript:;","data-ClaimId":a.claimId},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-paperclip text-white p-2"})]):t._e(),1!=t.isTicketHod&&!t.IsDefault||1001!=a.statusId?t._e():e("a",{staticClass:"approveClaim round-icon-small btn-success-light",staticStyle:{cursor:"pointer"},attrs:{checkprivilege:"Yes",title:t.$t("Approve"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.ApproveTicketClaim(a,"A")}}},[e("em",{staticClass:"fa fa-thumbs-up text-white"})]),1!=t.isTicketHod&&!t.IsDefault||1001!=a.statusId?t._e():e("a",{staticClass:"rejectClaim round-icon-small btn-danger-light",staticStyle:{cursor:"pointer"},attrs:{checkprivilege:"Yes",title:t.$t("Reject"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.ApproveTicketClaim(a,"R")}}},[e("em",{staticClass:"fa fa-thumbs-down text-white"})]),a.claimId>0&&a.attachmentsCount>0&&a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"anchrAttachmentsclaim round-icon-small btn-info-light",attrs:{href:"javascript:;","data-ClaimId":a.claimId}},[e("em",{staticClass:"fa fa-paperclip text-white p-2"})]):t._e(),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"editTicketClaim round-icon-small btn-success-light",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:;",title:t.$t("Edit"),"data-ClaimId":a.claimId,"data-claimAmount":a.claimValue,"data-createdby":a.createdBy,"data-createdbyName":a.createdByName},on:{click:function(e){return t.EditTicketClaim(a)}}},[e("em",{staticClass:"fa fa-pencil"})]):t._e(),a.createdBy==t.UserId&&"TICKET_CLAIM_DRAFT"==a.statusCode?e("a",{staticClass:"clsdeleteticketclaim round-icon-small btn-danger-light",staticStyle:{cursor:"pointer"},attrs:{href:"javascript:;",title:t.$t("Delete"),"data-ClaimId":a.claimId,value:a.ticketId},on:{click:function(e){return t.DeleteTicketClaim(a)}}},[e("em",{staticClass:"fa fa-trash-o"})]):t._e()])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2),t.isShowAddClaim?e("AddClaimData",{attrs:{id:t.ticketId,claimId:t.claimId,modulename:"Ticketing",submodulecode:"Ticketing",callbackfunction:t.GetClaimData,HeaderName:t.$t("AddClaim")}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),t.approveTicketClaim?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[t.isApproveTitle?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Approve")+" "+t.$t("Ticket")+" "+t.$t("Claim")))]):t._e(),t.isRejectTitle?e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Reject")+" "+t.$t("Ticket")+" "+t.$t("Claim")))]):t._e(),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.approveBtn,schema:t.approveFormSchema},on:{OnSubmit:t.SaveApproveTicketClaim},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}],null,!1,649871411)})],1)])])]):t._e()],1)])],1)},g=[],b=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Claim")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},D=[],A=(a("b7ef"),a("d91b"),{props:{classicEditor:null,id:{type:Number,required:!1},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function},claimId:{type:Number,required:!1},viewMode:{type:String,required:!0}},data(){return{content:"<h1>Some initial content</h1>",ClaimAmount:"",isLoading:!1,TicketBindList:[],Description:null,FileName:null,file:null,ClaimTicketModel:{ClaimNote:"",ClaimValue:"",TicketId:0,ModuleName:"",SubModuleCode:"",fileData:[],IsDraft:"",ClaimId:0},FormSchema:[{layoutType:"single",Data:[{astype:"NumericField",label:this.$t("Claim Amount"),name:"ClaimAmount",value:"",placeholder:"",validationRules:{required:!0,max:200}},{astype:"SlotField",label:this.$t("Claim Note"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"Attachment",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}}]}],buttons:[{type:"submit",class:"btn btn-warning save",value:"Y",text:"<i class='fa fa-save pr-2'></i>Save As Draft",onClick:this.UploadFileWithClaim},{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit",onClick:this.UploadFileWithClaim},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){this.$parent.ticketId>0&&this.FetchData()},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},FetchData:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.$parent.ticketId}&claimId=${t.$parent.claimId}&isHod=`;await o["a"].TicketClaimList(e).then((function(e){t.isLoading=!1,null!=e.data&&""!=e.data&&(t.FormSchema[0].Data[0].value=e.data.claim[0].claimValue,t.FormSchema[0].Data[1].value=e.data.claim[0].claimNotes)}))},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var l=o.lastIndexOf("."),r=o.substring(l+1,o.length);e.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},UploadFileWithClaim:function(t){var e=this;"Y"==t.value&&(e.ClaimTicketModel.IsDraft="Y"),e.ClaimTicketModel.ClaimId=e.claimId,e.ClaimTicketModel.ClaimValue=e._data.FormSchema[0].Data[0].value,e.ClaimTicketModel.ClaimNote=e._data.FormSchema[0].Data[1].value,e.ClaimTicketModel.TicketId=0==e.id||null==e.id?e.TicketNoteId:e.id,e.ClaimTicketModel.ModuleName=e.modulename,e.ClaimTicketModel.SubModuleCode=e.submodulecode,e.ClaimTicketModel.fileData=e.fileData;var a=JSON.stringify(e.ClaimTicketModel);o["a"].AddClaim(a).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(e.ShowAlert(e.$t("AddedSuccess",[e.$t("Claim")]),"success",!0,e.$t("Alert")),$("input[type=text]").val(""),e.Close()):(e.FileSrc="",$("input[type=text]").val(""))}catch(a){return HandleErrorOccured(a,"saveClaim")}})},Close:function(){var t=this;t.FormSchema[0].Data[0].value=null,t.FormSchema[0].Data[1].value=null,t.FileName=null,t.file=null,t.FormSchema[1].Data[0].config.onChange=this.GetBase64String,t.$parent.isShowAddClaim=!1,"Claims"==t.viewMode&&document.getElementById("tab-cliam").click()}}}),I=A,E=Object(d["a"])(I,b,D,!1,null,null,null),w=E.exports,F={components:{AddClaimData:w},props:{classicEditor:null,ClaimData:{type:Array,required:!0}},data(){return{content:"<h1>Some initial content</h1>",UserId:null,ClaimList:[],NoRecords:!1,isLoading:!1,ClaimAmount:"",btnType:"",confirmMsg:"",successMsg:"",Description:null,approveTicketClaim:!1,isShowingApprove:!0,isApproveTitle:!1,isTicketHod:0,IsDefault:!1,isShowAddClaim:!1,ApproveClaimTicketModel:{ClaimNote:"",ClaimValue:"",TicketId:0,ClaimId:0,Type:""},approveFormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Amount (USD)"),name:"ClaimAmount",value:"",placeholder:"",validationRules:{required:!0,max:200},visibility:!1},{astype:"SlotField",label:this.$t("Claim Note"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],approveBtn:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-thumbs-up pr-2'></i>Approve",isVisible:!1},{type:"submit",class:"btn btn-danger save",text:"<i class='fa fa-thumbs-down pr-2'></i>Reject",isVisible:!1}]}},created(){var t=this;t.UserId=t.GetUserInfo.ID,t.IsDefault=t.GetUserInfo.IsDefault,t.companyId=this.GetUserInfo.CompanyId,void 0!=t.ClaimData.isTicketHod&&(t.isTicketHod=t.ClaimData.isTicketHod),t.ClaimData.claim.length>0?(t.ClaimList=t.ClaimData.claim,t.NoRecords=!1):(t.ClaimList=[],t.NoRecords=!0)},methods:{EditTicketClaim:function(t){var e=this;e.ticketId=t.ticketId,e.claimId=t.claimId,e.isShowAddClaim=!0},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachmentPath}&fileName=${t.attachmentName}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachmentDesc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.ticketFileName),document.body.appendChild(o),o.click()}))},DeleteTicketClaim:function(t){var e=this;e.isLoading=!0,e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Claim"),(function(){var a={ids:t.claimId,companyId:e.companyId,userId:e.UserId,moduleName:"FSM",refCode:"TALYGEN_TICKET_CLAIM"},i=JSON.stringify(a);o["a"].deleteActivityData(i).then(t=>{e.isLoading=!1,"Success"==t.data[0].Status?(document.getElementById("tab-cliam").click(),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Claim")]),"Success",!0,e.$t("Alert"))):e.ShowAlert(e.$t("DeletedError",[e.$t("Claim")]),"failure",!0,e.$t("Alert")),e.$emit("close")})}))},ApproveTicketClaim:function(t,e){var a=this;a.btnType=e,a.ticketId=t.ticketId,a.claimId=t.claimId,"A"==e?(a.confirmMsg=a.$t("ClaimAcceptConfirmMessage"),a.successMsg=a.$t("TicketClaimAcceptMessage"),a.approveBtn[0].isVisible=!0,a.approveBtn[1].isVisible=!1,a.approveFormSchema[0].Data[0].visibility=!0,a.isApproveTitle=!0,a.isRejectTitle=!1):(a.confirmMsg=a.$t("ClaimRejectConfirmMessage"),a.successMsg=a.$t("TicketClaimRejectMessage"),a.approveBtn[0].isVisible=!1,a.approveBtn[1].isVisible=!0,a.approveFormSchema[0].Data[0].visibility=!1,a.isApproveTitle=!1,a.isRejectTitle=!0),a.confirmR(a.confirmMsg,!0,a.$t("Confirm"),(function(e){a.approveTicketClaim=!0,t.claimValue>0&&(a.approveFormSchema[0].Data[0].value=t.claimValue)}))},SaveApproveTicketClaim:function(t,e){var a=this;a.ApproveClaimTicketModel.ClaimId=a.claimId,a.ApproveClaimTicketModel.ClaimValue=a._data.approveFormSchema[0].Data[0].value,a.ApproveClaimTicketModel.ClaimNote=a._data.approveFormSchema[0].Data[1].value,a.ApproveClaimTicketModel.TicketId=a.ticketId,a.ApproveClaimTicketModel.Type=a.btnType;var i=JSON.stringify(a.ApproveClaimTicketModel);a.confirmR(a.confirmMsg,!0,a.$t("Confirm"),(function(t){o["a"].ApproveRejectClaim(i).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status&&(a.ShowAlert(a.successMsg,"success",!0,a.$t("Alert")),a.Close())}catch(e){return HandleErrorOccured(e,"failure")}})}))},Close:function(){var t=this;t.approveFormSchema[0].Data[0].value=null,t.approveFormSchema[0].Data[1].value=null,t.approveTicketClaim=!1,document.getElementById("tab-cliam").click()}}},N=F,L=Object(d["a"])(N,k,g,!1,null,null,null),R=L.exports,x=function(){var t=this,e=t._self._c;return e("section",[t.NoRecords?t._e():e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0"},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("Type")))])]),e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("From")))])]),e("th",[e("span",[t._v(t._s(t.$t("Call")+" "+t.$t("To")))])]),e("th",[e("span",[t._v(t._s(t.$t("EventStartTime")))])]),e("th",[e("span",[t._v(t._s(t.$t("EventEndTime")))])]),e("th",[e("span",[t._v(t._s(t.$t("Duration")))])]),e("th",[e("span",[t._v(t._s(t.$t("Comment")))])]),e("th",[e("span",[t._v(t._s(t.$t("Status")))])])])]),e("tbody",t._l(t.CallList,(function(a){return e("tr",[e("td",[e("span",[t._v(t._s(a.CALL_TYPE))])]),e("td",[e("span",[t._v(t._s(a.CALL_FROM))])]),e("td",[e("span",[t._v(t._s(a.CALL_TO))])]),e("td",[e("span",[t._v(t._s(a.START_TIME))])]),e("td",[e("span",[t._v(t._s(a.END_TIME))])]),e("td",[e("span",[t._v(t._s(a.DURATION))])]),e("td",[e("span",[t._v(t._s(a.COMMENT))])]),e("td",[e("span",{staticClass:"px-2 bg-success text-white d-block text-center"},[t._v(t._s(1001==a.STATUS_ID?"Active":""))])])])})),0)])])]),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()])},O=[],M={props:{CallData:{type:Array,required:!0}},data(){return{CallList:[],NoRecords:!1}},created(){var t=this;t.CallData.result.data.length>0?(t.CallList=t.CallData.result.data,t.NoRecords=!1):(t.CallList=[],t.NoRecords=!0)}},P=M,B=Object(d["a"])(P,x,O,!1,null,null,null),U=B.exports,G=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.RelatedTicketListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!0,RenderRowActionMethod:()=>{},ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["CREATED_AT"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.CREATED_AT))+" ")])]:t._e(),"TICKET_NUMBER"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{to:"/Ticketing/Manage/"+a.row.str_ticket_id,title:a.row[a.column.COLUMN_NAME],"data-toggle-tooltip":"tooltip","data-original-title":"Click here to view Ticket Detail"}},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])]:t._e()]}}])})],1)},V=[],H={props:{ticketId:{type:Number,required:!1}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,Headers:[{COLUMN_NAME:"TICKET_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Ticket Number",DISPLAY_ORDER:1},{COLUMN_NAME:"TICKET_SUBJECT",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:2},{COLUMN_NAME:"CDC",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"CDC",DISPLAY_ORDER:3},{COLUMN_NAME:"CREATED_AT",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created At",DISPLAY_ORDER:4}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,GroupEnd:3,RelatedTicketListing:[]}},created:async function(){var t=this;await t.FetchRecords()},methods:{FetchRecords:async function(){var t=this;t.RelatedTicketListing=[];var e=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN&parentticketId=`+t.ticketId;await o["a"].GetRelatedTicketList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"CREATED_AT"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TICKET_NUMBER"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.DATA.length>0?(t.RelatedTicketListing=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.RelatedTicketListing=[]),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()}}},W=H,K=Object(d["a"])(W,G,V,!1,null,null,null),z=K.exports,j=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"Ticketing",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.TrackHistoryListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!1,RenderRowActionMethod:()=>{},ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["WORKORDER_NUMBER"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/WorkOrderDetail/"+a.row.WORKORDER_ID+"/"+a.row.TICKET_ID,"data-toggle-tooltip":"tooltip"}},[e("span",[e("span",[t._v("#")]),t._v(t._s(a.row.WORKORDER_NUMBER)+" ")])])]:t._e(),"TRACK_START_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.TRACK_START_TIME))+" ")])]:t._e(),"TRACK_END_TIME"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDateTime(a.row.TRACK_END_TIME))+" ")])]:t._e(),"TRACK_DESCRIPTION"==a.column.COLUMN_NAME?[e("span",[e("div",{staticClass:"readmore"},[e("span",{domProps:{innerHTML:t._s(a.row.TRACK_DESCRIPTION)}})])])]:t._e()]}}])})],1)},q=[],Y={props:{ticketId:{type:Number,required:!1}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,Headers:[{COLUMN_NAME:"WORKORDER_NUMBER",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WO Number",DISPLAY_ORDER:1},{COLUMN_NAME:"TRACK_DESCRIPTION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"DESCRIPTION",DISPLAY_ORDER:2},{COLUMN_NAME:"TRACK_START_TIME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"START TIME",DISPLAY_ORDER:3},{COLUMN_NAME:"TRACK_END_TIME",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"END TIME",DISPLAY_ORDER:4},{COLUMN_NAME:"DURATION",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Duration (HH:MM:SS)",DISPLAY_ORDER:5}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,GroupEnd:3,TrackHistoryListing:[]}},created:async function(){var t=this;await t.FetchRecords()},methods:{FetchRecords:async function(){var t=this,e=`ticketingId=${t.ticketId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN`;await o["a"].GetTrackHistoryList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"WORKORDER_NUMBER"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_START_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_END_TIME"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"TRACK_DESCRIPTION"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.DATA.length>0?(t.TrackHistoryListing=e.data.result.DATA,t.TotalRecords=e.data.result.DATA[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.TrackHistoryListing=[]),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()}}},J=Y,X=Object(d["a"])(J,j,q,!1,null,null,null),Q=X.exports,Z=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{attrs:{ModuleName:"Ticketing",SubModuleCode:"FSM_WorkOrder",IdentityColumn:"TICKET_ID",listType:["List"],ListData:t.GetWorkOrderListing,HeaderData:t.Headers,TotalRecords:t.TotalRecords,IsShowAction:!0,RenderRowActionMethod:t.workOrderRenderActions,ListDataCallBackFunction:t.FetchRecords,NorecordfoundText:t.$t("NoRecordfound")},on:{ActionButtonClick:t.workorderActionButtonClick,PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["work_order_date"==a.column.COLUMN_NAME?[e("span",[t._v(" "+t._s(t.$options.filters.formatDate(a.row.work_order_date))+" ")])]:t._e(),"workorder_number"==a.column.COLUMN_NAME?[e("RouterLink",{attrs:{title:a.row[a.column.COLUMN_NAME],to:"/Ticketing/WorkOrderDetail/"+a.row.id+"/"+a.row.ticket_id,"data-toggle-tooltip":"tooltip"}},[e("span",[e("span",[t._v("#")]),t._v(t._s(a.row.workorder_number)+" ")])])]:t._e(),"status_id"==a.column.COLUMN_NAME?[e("span",{class:t.getStatusClass(a.row.status_id,"status_name","fsm")},[t._v(" "+t._s(a.row.status_id)+" ")])]:t._e()]}}])}),t.showWorkOrderStatusModal?e("WorkOrderStatusModal",{attrs:{updateWorkOrderStatus:t.updateWorkOrderStatus,isLocateorNonLocate:t.isLocateorNonLocate,callbackfunction:t.callbackfunction}}):t._e(),e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"my-popups"},[t.workOrderModalStatus?e("div",{staticClass:"modal d-block mail-box-pop dialog"},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("WorkOrder")+" "+t.$t("Status")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:e}){return[t._v(" "+t._s(e.fieldInfo)+" ")]}}],null,!1,1171166564)})],1),e("div",{staticClass:"modal-footer"},[e("a",{staticClass:"btn btn-success formbtn text-white",attrs:{tabindex:"13",title:t.$t("Save"),id:"btnSave"},on:{click:t.SubmitWOrkOrderUpdateStatus}},[e("i",{staticClass:"fa fa-save pr-2"}),t._v(" "+t._s(t.$t("Save")))]),e("a",{staticClass:"btn btn-danger",attrs:{tabindex:"14",title:t.$t("Cancel"),id:"btnCancel"},on:{click:t.Close}},[e("i",{staticClass:"fa fa-times"}),t._v(" "+t._s(t.$t("Cancel")))])])])])]):t._e()])])],1)},tt=[],et=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("UpdateStatus")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[t.isLocateorNonLocate?e("dynamic-form",{attrs:{lang:"en",schema:t.locateFormSchema},on:{OnSubmit:t.onSubmit}}):t._e(),t.isLocateorNonLocate?t._e():e("dynamic-form",{attrs:{lang:"en",schema:t.nonLocateFormSchema},on:{OnSubmit:t.onSubmit}})],1),t.formListForSubmit.length>0?e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"listing"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered dt-responsive nowrap mt-0",attrs:{id:"tbl_formList"}},[e("thead",{staticClass:"thead-bg"},[e("tr",[e("th",{staticClass:"sorting"},[e("span",[t._v(t._s(t.$t("FormName")))])]),e("th",{staticClass:"text-center"},[e("span",[t._v(t._s(t.$t("FormSubmitted")))])]),e("th",{staticClass:"text-center sorting"},[e("span",[t._v(t._s(t.$t("Action")))])])])]),e("tbody",t._l(t.formListForSubmit,(function(a,i){return e("tr",[e("td",[t._v(" "+t._s(a.name)+" "),"1"==a.second_value?e("span",{staticClass:"text-danger font-weight-bold"},[t._v("*")]):t._e()]),e("td",{staticClass:"text-center"},["Yes"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-success text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e(),"No"==t.checkFormSubmitted(a.value)?e("span",{staticClass:"px-2 bg-danger text-white text-center"},[t._v(t._s(t.checkFormSubmitted(a.value)))]):t._e()]),0==t.EditEnabled?e("td",{staticClass:"text-center"},[t._m(0,!0)]):t._e(),t.EditEnabled?e("td",{staticClass:"text-center"},[e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.GetCustomFieldFormForEdit(a)}}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success"})])]):t._e()])})),0)])])])]):t._e(),e("div",{staticClass:"modal-footer col-12 px-0 pb-0"},[t.isLocateorNonLocate?e("dynamic-form",{attrs:{lang:"en",buttons:t.locateButtons},on:{OnSubmit:t.SubmitUpdateStatus}}):t._e(),!t.isLocateorNonLocate&&t.formListForSubmit.length>0?e("dynamic-form",{attrs:{lang:"en",buttons:t.nonLocateButtons},on:{OnSubmit:t.SubmitUpdateStatus}}):t._e(),t.isLocateorNonLocate||0!=t.formListForSubmit.length?t._e():e("dynamic-form",{attrs:{lang:"en",buttons:t.nonLocateWorkOrderStatusButtons},on:{OnSubmit:t.SubmitUpdateStatus}})],1)])])])],1),t.ShowWorkOrderStatusForm?e("EditViewFSMForm",{attrs:{isforshow:!1,formIdForShow:t.formIdForShow,listForSubmittedForm:t.listForSubmittedForm,moduleName:t.moduleName,subModuleCode:t.subModuleCode,workOrderId:t.workOrderId,subStatusId:t.subStatusId,callbackfunction:t.callbackfunction}}):t._e()],1)},at=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"javascript:;"}},[e("i",{staticClass:"fa fa-edit fa-lg action-icon text-success disabled"})])}],it=a("42e5"),st={components:{EditViewFSMForm:it["a"]},props:{updateWorkOrderStatus:{type:Array,required:!0},isLocateorNonLocate:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{workOrderTicketId:0,workOrderId:0,isLoading:!1,ShowWorkOrderStatusForm:!1,ChildSubStatusId:"",ParentSubStatusId:"",WorkOrderStatusId:"",ChildSubStatusName:"",moduleName:"TICKETING",subModuleCode:"TICKETING",ParentSubStatusName:"",Description:"",MinutesWorked:"",formListForSubmit:[],listForSubmittedForm:[],workorderStatusDataList:[],formIdForShow:null,subStatusId:0,FeetLocated:"",EditEnabled:!1,IsAction:!1,locateFormSchema:[{layoutType:"double",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.SetParentSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}},{astype:"SelectField",label:this.$t("SubStatus"),name:"SubStatus",value:"",config:{options:[],onChange:this.GetFormsOnBehalfOfSubStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]},{layoutType:"double",Data:[{astype:"NumericField",label:this.$t("MinutesWorked"),name:"Minutes Worked",value:"",validationRules:{required:!1}},{astype:"NumericField",label:this.$t("FeetLocated"),name:"FeetLocated",value:"",validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Comment"),name:"Comment",value:"",validationRules:""}]}],locateButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[],onChange:this.onChangeStatus},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],nonLocateButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}],nonLocateWorkOrderStatusButtons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Update Status",onClick:this.WorkOrderUpdateStatus},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:async function(){var t=this;t.workOrderTicketId=t.updateWorkOrderStatus.ticket_id,t.workOrderId=t.updateWorkOrderStatus.id,""!=t.updateWorkOrderStatus.WO_Status_Id&&(t.WorkOrderStatusId=t.updateWorkOrderStatus.WO_Status_Id),t.GetDropDownData("WORK_ORDER_FINAL_STATUS"),t.GetUpdateStatusDataForEdit(t.workOrderId,t.workOrderTicketId),1==t.isLocateorNonLocate&&t.GetFSMDDLData("FSM_WORK_ORDER",t.workOrderTicketId,t.workOrderId)},methods:{GetCustomFieldFormForEdit:function(t){var e=this;e.formIdForShow=t.value,e.subStatusId=e._data.locateFormSchema[0].Data[1].value,e.ShowWorkOrderStatusForm=!e.ShowWorkOrderStatusForm},onChangeStatus:function(t){var e=this;e.WorkOrderStatusId=t.target.value;let a=e.workorderStatusDataList.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"!=a.name&&"Completed"!=a.name||1!=e.IsAction?e.EditEnabled=!0:e.EditEnabled=!1},checkFormSubmitted:function(t){var e=this,a="No";return $.each(e.listForSubmittedForm,(function(e,i){i.formId==t&&i.formSubmittedId>0&&(a="Yes")})),a},GetUpdateStatusDataForEdit:async function(t,e){var a=this,i=`TicketId=${e}&WOId=${t}`;await o["a"].GetSingleWorkOrder(i).then((function(e){if("Success"==e.data.status){var i=e.data.result;null!=i&&(1==a.isLocateorNonLocate?(a.ParentSubStatusId=null==i.PARENT_SUB_STATUS_ID?"":i.PARENT_SUB_STATUS_ID,a.ChildSubStatusId=null==i.SUB_STATUS_ID?"":i.SUB_STATUS_ID,a.WorkOrderStatusId=null==i.STATUS_ID?"":i.STATUS_ID,a.ParentSubStatusName=i.PARENT_SUB_STATUS_NAME,a.ChildSubStatusName=i.CHILD_SUB_STATUS_NAME,a.Description=i.COMMENT,a.SetParentSubStatus(t),a.MinutesWorked=i.MINUTES_WORKED>0?i.MINUTES_WORKED:"",a.FeetLocated=i.FEET_LOCATED>0?i.FEET_LOCATED:"",a.ChildSubStatusId>0&&a.GetFormsOnBehalfOfSubStatus()):(a._data.nonLocateFormSchema[0].Data[0].value=a.WorkOrderStatusId,a.GetFormsWithoutSubStatus()))}}))},SetParentSubStatus:function(){var t=this;t.GetFSMDDLData("FSM_WORK_ORDER_CHILD_SUB_STATUS",t.workOrderTicketId,t.workOrderId),t.GetFormsOnBehalfOfSubStatus(t._data.locateFormSchema[0].Data[0].value)},GetFSMDDLData:async function(t,e,a){var i=this,s="",l="";"FSM_WORK_ORDER"==t&&(l=""),l=i._data.locateFormSchema[0].Data[0].value,i._data.locateFormSchema[0].Data[1].config.options=[];var r="id="+e+"&moduleName=&type="+t+"&refId="+l+"&workOrderId="+a;await o["a"].GetFSMDDLData(r).then((function(e){i.isBlank(e.data)||"Success"!=e.data.status||(s=e.data.result.DATA,null!=s?"FSM_WORK_ORDER"==t?s.forEach((t,e)=>{i._data.locateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})}):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&s.forEach((t,e)=>{i._data.locateFormSchema[0].Data[1].config.options.push({value:t.value,name:t.name})}):"FSM_WORK_ORDER_CHILD_SUB_STATUS"==t&&(i._data.locateFormSchema[0].Data[1].value=""))}))},GetFormsWithoutSubStatus:async function(){var t=this;t.formListForSubmit=[];var e=`id=${t.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_WITHOUT_STATUS_FOR_NON_LOCATE&search=&refId=`;await o["a"].GetDDLData(e).then((function(e){!t.isBlank(e.data)&&e.data.DATA.length>0&&(t.formListForSubmit=e.data.DATA,$.each(e.data.DATA,(function(e,a){var i={formId:a.value,formSubmittedId:a.first_value,isAllFormMandatory:a.second_value};t.listForSubmittedForm.push(i)})))}))},WorkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t.WorkOrderStatusId},a=JSON.stringify(e);await o["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.callbackfunction()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},GetFormsOnBehalfOfSubStatus:async function(t){var e=this;let a=e._data.locateFormSchema[0].Data[1].value;e.formListForSubmit=[],e.listForSubmittedForm=[];var i=`id=${e.workOrderId}&moduleName=TICKETING&type=FSM_FORMS_BY_STATUS&search=&refId=`+a;await o["a"].GetDDLData(i).then((function(t){!e.isBlank(t.data)&&t.data.DATA.length>0&&(e.formListForSubmit=t.data.DATA,$.each(t.data.DATA,(function(t,a){var i={formId:a.value,formSubmittedId:a.first_value,isAllFormMandatory:a.second_value};e.listForSubmittedForm.push(i)})))}))},GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await o["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e._data.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})});let i=a.find(t=>t.value==e.WorkOrderStatusId);"Cancelled"==i.name||"Completed"==i.name?(e.EditEnabled=!1,e.IsAction=!0):e.EditEnabled=!0}}))},Close:function(){this.$parent.showWorkOrderStatusModal=!1},SubmitUpdateStatus(t,e){var a=this;let i=a.workorderStatusDataList.find(t=>t.value==a.WorkOrderStatusId);"Cancelled"!=i.name&&($.each(a.listForSubmittedForm,(function(t,e){null!=e.formSubnittedId&&0!=e.formSubnittedId||"1"!=e.isAllFormMandatory||(IsFormValid=!1)})),$.each(a.listForSubmittedForm,(function(t,e){1==e.hasOwnProperty("SaveFormJSON")&&delete e.SaveFormJSON})));var s={WorkOrderId:a.workOrderId,TicketId:a.workOrderTicketId,ParentSubStatusId:a._data.locateFormSchema[0].Data[0].value,ChildSubStatusId:a._data.locateFormSchema[0].Data[1].value,Description:a._data.locateFormSchema[2].Data[0].value,IsCornerLot:0,IsGasfacility:0,IsCastIron:0,IsPrivateLocateOpportunity:0,IsGasPrintIssue:0,NumberofCIMains:"",MainSizeAndDistance:"",FormSaveId:0,formBaseString:a.listForSubmittedForm,MinutesWorked:a._data.locateFormSchema[1].Data[0].value,FeetLocated:a._data.locateFormSchema[1].Data[1].value,ReqFrom:"WEB",WorkOrderStatusId:a.WorkOrderStatusId},l=JSON.stringify(s);o["a"].UpdateSubStatus(l).then(t=>{"SUCCESS"==t.data.result.MSG?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Status")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.ShowAlert(vm.$t("ErrorWhileSavingRecords",[a.$t("Status")]),"failure",!0,a.$t("Alert")),a.Close())})}}},ot=st,lt=Object(d["a"])(ot,et,at,!1,null,null,null),rt=lt.exports,nt={components:{WorkOrderStatusModal:rt},props:{ticketId:{type:Number,required:!1},isLocateorNonLocate:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{noRecords:!1,TotalRecords:0,CurrentPage:1,TotalPages:0,listActions:[{title:"Update Status",href:"javascript:void(0)",icon:"fa fa-cog text-info",callbackfunction:"Update",additionalSpan:""},{title:"Details",href:"javascript:void(0)",callbackfunction:"ClickOnDetail",icon:"fa fa-ticket",additionalSpan:""},{title:"Status",href:"javascript:void(0)",icon:"fa fa-tag",callbackfunction:"Status",additionalSpan:""}],nonLocateFormSchema:[{layoutType:"single",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Status"),name:"Status",value:"",config:{options:[]},placeholder:this.$t("Select"),validationRules:{required:!0,max:100}}]}],Headers:[{COLUMN_NAME:"workorder_number",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"WO Number",DISPLAY_ORDER:1},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:2},{COLUMN_NAME:"work_order_date",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Order Date",DISPLAY_ORDER:3},{COLUMN_NAME:"worktype_name",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Work Type",DISPLAY_ORDER:4},{COLUMN_NAME:"subject",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Subject",DISPLAY_ORDER:5},{COLUMN_NAME:"created_by",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Client",DISPLAY_ORDER:6},{COLUMN_NAME:"is_submited",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"FormSubmitted",DISPLAY_ORDER:7}],SortBy:"",SortExp:"",PageSize:"10",PageNumber:"1",GroupStart:1,workOrderId:0,GroupEnd:3,GetWorkOrderListing:[],showWorkOrderStatusModal:!1,updateWorkOrderStatus:[],workOrderModalStatus:!1}},created:async function(){var t=this;setTimeout(()=>{t.FetchRecords()},500)},methods:{GetDropDownData:async function(t){var e=this,a=`id=&moduleName=Ticketing&type=${t}&search=&refId=`;e.workorderStatusDataList=[],await o["a"].GetDDLData(a).then((function(t){if(t.data.DATA.length>0){var a=t.data.DATA;e.workorderStatusDataList=t.data.DATA,null!=a&&t.data.DATA.forEach((t,a)=>{e._data.nonLocateFormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}}))},FetchRecords:async function(){var t=this,e=`ticketId=${t.ticketId}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&lang=EN`;await o["a"].WorkOrderList(e).then((function(e){t.Headers.forEach(t=>{t.settings=null,"work_order_date"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"workorder_number"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),""!=e.data&&null!=e.data&&e.data.result.data.length>0?(t.GetWorkOrderListing=e.data.result.data,t.TotalRecords=e.data.result.data[0].TOTALRECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1,t.IsLoad=!0):(t.noRecord=!0,t.TotalRecords=0,t.GetWorkOrderListing=[]),setTimeout((function(){t.CheckBoxBootstrap()}),100),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchRecords()},sortdata:function(t){this.SortBy=t;var e="ASC";"ASC"==this.SortExp&&(e="DESC"),this.SortExp=e,this.SortBy=t,this.SortExp=e,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.FetchRecords()},workorderActionButtonClick(t,e,a,i){switch(t){case"Update":this.openPopupForUpdateStatus(e);break;case"ClickOnDetail":this.WordOrderDetailLink(e);break;case"Status":this.WorkOrderStatus(e);break}},WordOrderDetailLink:function(t){var e=this;e.$router.push({path:"/Ticketing/WorkOrderDetail/"+t.id+"/"+t.ticket_id})},SubmitWOrkOrderUpdateStatus:async function(){var t=this,e={Id:t.workOrderId,StatusId:t._data.nonLocateFormSchema[0].Data[0].value},a=JSON.stringify(e);await o["a"].MarkAsDone(a).then((function(e){1==e.data?(t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("Status")]),"success",!0,t.$t("Alert")),t.Close(),t.FetchRecords()):(t.ShowAlert(t.$t("AddedError",[t.$t("Status")]),"failure",!0,t.$t("Alert")),t.Close())}))},Close:function(){this.workOrderModalStatus=!1},WorkOrderStatus:function(t){var e=this;e.workOrderId=t.id,e.GetDropDownData("WORK_ORDER_FINAL_STATUS"),e.workOrderModalStatus=!e.workOrderModalStatus},openPopupForUpdateStatus:function(t){var e=this;e.updateWorkOrderStatus=t,e.showWorkOrderStatusModal=!e.showWorkOrderStatusModal},workOrderRenderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let i={...t};switch(i.title){case"Update":i.isVisible=!0;break;case"Details":i.isVisible=!0;break;case"Status":i.isVisible=1==e.isLocateorNonLocate;break;default:i.isVisible=!0}a.push(i)}),a}}},ct=nt,dt=Object(d["a"])(ct,Z,tt,!1,null,null,null),ut=dt.exports,mt=a("c054"),pt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Merge")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.UploadFileWithMerge},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}])})],1)])])])],1)])},ht=[],ft={components:{},props:{classicEditor:null,id:{type:Number,required:!1},str_ticket_id:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{content:"<h1>Some initial content</h1>",isLoading:!1,search:"",TicketBindList:[],Description:null,FormSchema:[{layoutType:"double",Data:[{astype:"MultiSelectField",mode:"tag",label:this.$t("CombineTicket"),name:"MergeTicket",value:"",config:{options:[],onSearchChange:this.onTicketType,onChange:this.onChangeCombinedTicket},placeholder:this.$t("SelectTicket"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("PrimaryTicket"),name:"PrimaryTicket",value:"",config:{options:[]},placeholder:this.$t("SelectPrimaryTicket"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"SlotField",label:this.$t("Reason"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){},methods:{onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},onTicketType:async function(t,e,a){var i=this;i.search="T";var s=`ticketId=${i.str_ticket_id}&search=${i.search}`;await o["a"].GetTicketListData(s).then((function(t){if(null!=t.data&&""!=t.data){var e=t.data;null!=e&&t.data.forEach((t,e)=>{i.FormSchema[0].Data[0].config.options.push({value:t.value,name:t.name})})}}))},onChangeCombinedTicket:async function(t,e,a){var i=this;i.FormSchema[0].Data[1].config.options.push({value:a.value,name:a.label})},UploadFileWithMerge:async function(t,e){var a=this,i="",s=0;for(s=0;s<a._data.FormSchema[0].Data[0].value.length;s++)i=0==s?a._data.FormSchema[0].Data[0].value[s].value:i+","+a._data.FormSchema[0].Data[0].value[s].value;var l={TicketId:a.id,CombinedTicketIds:i,PrimaryTicketId:a._data.FormSchema[0].Data[1].value,Reason:a._data.FormSchema[1].Data[0].value},r=JSON.stringify(l);await o["a"].SaveMergeTicket(r).then(t=>{if("Success"==t.data.status)if(""!=t.data.url){var e=[a.$t("TICKET_SAVED")]+" "+[a.$t("RedirectToMerge")]+" #"+t.data.PrimaryTicket;a.ShowAlert(e,"success",!0,a.$t("Alert")),window.location.href="/Ticketing/Manage/"+t.data.url}else{e=[a.$t("TICKET_SAVED")]+" "+[a.$t("RedirectToMerge")]+" #"+t.data.PrimaryTicket;a.ShowAlert(e,"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()}else a.ShowAlert(a.$t("AddedError",[a.$t("TICKET_MERGE")]),"failure",!0,a.$t("Alert")),a.Close()})},Close:function(){var t=this;t._data.FormSchema[0].Data[1].value=null,t._data.FormSchema[1].Data[0].value=null,t._data.FormSchema[0].Data[0].value=null,t.$parent.isShowMergeTicket=!1}}},vt=ft,Ct=Object(d["a"])(vt,pt,ht,!1,null,null,null),Tt=Ct.exports,_t=a("6481"),St=a("3e91"),yt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Update")))]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"#collapseReply",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.$t("UserGuide")))]),e("div",{staticClass:"divancuserguide collapse",attrs:{id:"collapseReply"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarmergeuserguide"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("UgTicketingViewUpdate"))}})])])]),t.DataLoaded?e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}}):t._e()],1)])])])])])},kt=[],gt={props:{TicketId:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{statusList:[],CCUserList:[],CategoryList:[],priorityList:[],productList:[],DataLoaded:0,ccOption:[],isLoading:!1,isProductChanged:0,isETAChanged:0,isStatusChanged:0,isCategoryChanged:0,isPriorityChanged:0,FormSchema:[{layoutType:"triple",Data:[{astype:"SelectField",label:this.$t("Status"),name:"Status",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"DateField",label:this.$t("Expected Resolution (M/D/YYYY)"),name:"ExpectedResolution",value:"",placeholder:"",validationRules:{required:!1}},{astype:"MultiSelectField",mode:"tag",label:this.$t("CC Users"),name:"CCUsers",value:"",config:{options:[]},placeholder:this.$t("CC Users"),validationRules:{required:!1}},{astype:"SelectField",label:this.$t("Ticket Category"),name:"TicketCategory",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"SelectField",label:this.$t("Product"),name:"Product",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""},{astype:"SelectField",label:this.$t("Priority"),name:"Priority",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:""}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Update"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.onCancel}]}},async created(){var t=this;await t.GetStatusList(),await t.GetCCUserList(),await t.GetCategoryForTicket(),await t.GetPrioritybyCompanyId(),await t.GetProductsList(),t.DataLoaded=1,t.FetchTicketData()},methods:{FetchTicketData:async function(){var t=this;t.isLoading=!0;var e="ticketId="+t.TicketId;await o["a"].GetTicketById(e).then((function(e){if(t.isLoading=!1,null!=e.data.ticket){t._data.FormSchema[0].Data[0].value=e.data.ticket.statusId,t._data.FormSchema[0].Data[1].value=e.data.ticket.expectedResolutionDate,t.isBlank(e.data.ticket.ticketCategoryId)||(t._data.FormSchema[0].Data[3].value=e.data.ticket.ticketCategoryId),t.isBlank(e.data.ticket.productId)||(t._data.FormSchema[0].Data[4].value=e.data.ticket.productId),t._data.FormSchema[0].Data[5].value=e.data.ticket.priorityId;var a=e.data.ticket.ccUser;if(!t.isBlank(a)){var i=[];t.ccOption=t.CCUserList.filter(t=>a.indexOf(t.value)>-1),t.ccOption.forEach((t,e)=>{i.push({value:t.value,label:t.name})}),t._data.FormSchema[0].Data[2].value=i}}}))},GetStatusList:async function(){var t=this,e="statusType=Ticketing&&hasglobal=false";await o["a"].GetStatusList(e).then(async e=>{e.data.length>0&&(t.statusList=[],t.statusList=e.data,t.FormSchema[0].Data[0].config.options=[],t.statusList.forEach((e,a)=>{t.FormSchema[0].Data[0].config.options.push({value:e.STATUS_ID,name:e.STATUS})}))})},GetCCUserList:async function(){var t=this,e="id=&moduleName=Ticketing&type=CC_USER_LIST&search=&refId=";await o["a"].GetDDLData(e).then(async e=>{if(e.data.DATA.length>0){var a=e.data.DATA;t.CCUserList=e.data.DATA,null!=a&&e.data.DATA.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({value:e.value,name:e.name})})}})},GetCategoryForTicket:async function(){var t=this,e="categoryTypeId=TICKET_CATEGORY&is_Global=false&showActiveStatus=true";await o["a"].GetDDLCategoryForTicket(e).then(async e=>{e.data.length>0&&(t.CategoryList=[],t.CategoryList=e.data,t.FormSchema[0].Data[3].config.options=[],t.CategoryList.forEach((e,a)=>{t.FormSchema[0].Data[3].config.options.push({value:e.value,name:e.name})}))})},GetProductsList:async function(){var t=this;await o["a"].GetProductsList().then(async e=>{e.data.length>0&&(t.productList=e.data,t.productList.forEach((e,a)=>{t.FormSchema[0].Data[4].config.options.push({value:e.value,name:e.name})}))})},GetPrioritybyCompanyId:async function(){var t=this;await o["a"].GetPrioritybyCompanyId().then(async e=>{e.data.length>0&&(t.priorityList=e.data,t.priorityList.forEach((e,a)=>{t.FormSchema[0].Data[5].config.options.push({value:e.prioritY_ID,name:e.prioritY_NAME})}))})},onChangeDropdown:async function(t){var e=this,a=t.target.name;"Product"==a?e.isProductChanged=1:"Priority"==a?e.isPriorityChanged=1:"TicketCategory"==a?e.isCategoryChanged=1:"Status"==a&&(e.isStatusChanged=1)},onSubmit:async function(t,e){var a=this,i="",s=0;for(s=0;s<a._data.FormSchema[0].Data[2].value.length;s++)i=0==s?a._data.FormSchema[0].Data[2].value[s].value:i+","+a._data.FormSchema[0].Data[2].value[s].value;var l={ticketId:a.TicketId,statusId:a._data.FormSchema[0].Data[0].value,isSuptTckt:a.user_id,productId:!0!==a.isBlank(a._data.FormSchema[0].Data[4].value)?a._data.FormSchema[0].Data[4].value:null,ccOption:!0!==a.isBlank(i)?i:null,ticketCategory:a.isBlank(!0!==a._data.FormSchema[0].Data[3].value)?a._data.FormSchema[0].Data[3].value:null,priorityId:a.isBlank(!0!==a._data.FormSchema[0].Data[5].value)?a._data.FormSchema[0].Data[5].value:null,expectedResolutionDate:1!=a.isBlank(a.$options.filters.formatDate(a.FormSchema[0].Data[1].value))?a.$options.filters.formatDate(a.FormSchema[0].Data[1].value):null,isProductChanged:!0!==a.isBlank(a.isProductChanged)?a.isProductChanged:0,isETAChanged:!0!==a.isBlank(a.$options.filters.formatDate(a.FormSchema[0].Data[1].value))?1:0,isStatusChanged:!0!==a.isBlank(a.isStatusChanged)?a.isStatusChanged:0,isCategoryChanged:!0!==a.isBlank(a.isCategoryChanged)?a.isCategoryChanged:0,isPriorityChanged:!0!==a.isBlank(a.isPriorityChanged)?a.isPriorityChanged:0,ticketOpenDate:!0!==a.isBlank(a.$options.filters.formatDateTime(a.FormSchema[0].Data[1].value))?a.$options.filters.formatDateTime(a.FormSchema[0].Data[1].value):null},r=JSON.stringify(l);o["a"].TicketUpdate(r).then(t=>{try{null!=t.data&&""!=t.data&&"Success"==t.data.status?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Ticket")]),"success",!0,a.$t("Alert")),$("input[type=text]").val(""),a.Close()):(a.FileSrc="",a.Close(),$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"Ticket")}})},Close:function(){var t=this;t._data.FormSchema[0].Data[0].value=null,t._data.FormSchema[0].Data[1].value=null,t._data.FormSchema[0].Data[2].value=null,t._data.FormSchema[0].Data[3].value=null,t._data.FormSchema[0].Data[4].value=null,t._data.FormSchema[0].Data[5].value=null,t.$parent.isShowTicketUpdate=!1,t.callbackfunction()}}},bt=gt,Dt=a("4eba"),At=a.n(Dt),It=Object(d["a"])(bt,yt,kt,!1,null,null,null);"function"===typeof At.a&&At()(It);var Et=It.exports,wt=function(){var t=this,e=t._self._c;return e("section",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v(t._s(t.$t("Assign")+" / "+t.$t("Transfer")))]),e("button",{staticClass:"close",attrs:{href:"javascript:;"},on:{click:function(e){return t.$emit("close")}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("span",{staticClass:"user-guide"},[e("a",{staticClass:"ancuserguide",attrs:{"data-toggle":"collapse",href:"#collapseReply",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.$t("UserGuide")))]),e("div",{staticClass:"divancuserguide collapse",attrs:{id:"collapseReply"}},[e("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarmergeuserguide"}},[e("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("USER_GUIDE_TICKET_TRANSFER"))}})])])]),t.DataLoaded?e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Description",fn:function({data:a}){return[e("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Description"}},[t._v(t._s(a.error))])]}}],null,!1,649871411)}):t._e()],1)])])])])])},Ft=[],Nt={components:{},props:{classicEditor:null,TicketId:{type:String,required:!0},modulename:{type:String,required:!0},submodulecode:{type:String,required:!0},callbackfunction:{type:Function}},data(){return{DataLoaded:0,TransferTicketData:[],priorityList:[],DepartmentList:[],TicketType:null,Description:null,FileName:null,file:null,TicketId:0,ticketModel:{assignedToId:"",replyTemplate:"",departmentId:"",transferDescription:"",priorityId:"",fileData:[],transferType:"",moduleName:"",subModuleCode:""},FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:this.$t("Type"),name:"Type",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeType},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Priority"),name:"Priority",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Department"),name:"Department",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeDropdown},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Assigned To"),name:"AssignedTo",value:"",placeholder:"",config:{options:[],showAddIcon:!1},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Canned Reply"),name:"CannedReply",value:"",placeholder:"",config:{options:[],showAddIcon:!1,onChange:this.onChangeTemplate},validationRules:""}]},{group_name:"Attachment",layoutType:"single",Data:[{astype:"FileField",showLabel:!1,name:"Attachment",value:"",placeholder:"",validationRules:"",FieldIndex:0,config:{maxSize:5,accept:[{fileType:"png",iconClass:"fa-file-image-o"},{fileType:"jpg",iconClass:"fa-file-image-o"},{fileType:"pdf",iconClass:"fa-file-archive-o"}],onChange:this.GetBase64String,showAddIcon:!1,onAddButtonClick:"",multiple:!0}},{astype:"SlotField",label:this.$t("Description"),name:"Description",value:"",placeholder:"",config:{options:[]},settings:{isInSlot:!0},visibility:!0,validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success save",text:"<i class='fa fa-save pr-2'></i>Submit"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},async created(){var t=this;await t.FetchData(),await t.BindTicketType(),await t.GetPrioritybyCompanyId(),await t.BindCannedReply(),t.TransferTicketData.isSupportTicket?await t.GetDepartmentListForSupport():await t.GetDepartmentListbyCompanyForClient(),t.DataLoaded=1},methods:{FetchData:async function(){var t=this,e="ticketId="+t.TicketId;await o["a"].AssignTransferTicket(e).then((function(e){t.TransferTicketData=e.data.data}))},BindTicketType:async function(){var t=this;1==t.TransferTicketData.ticketTransferAssignEnabled?await t.FormSchema[0].Data[0].config.options.push({name:t.$t("Assign"),value:"A"}):await t.FormSchema[0].Data[0].config.options.push({name:t.$t("Assign"),value:"A"},{name:t.$t("Transfer"),value:"T"})},GetPrioritybyCompanyId:async function(){var t=this,e="isSupportTicket="+t.TransferTicketData.isSupportTicket;await o["a"].GetPrioritybyCompanyId(e).then(async e=>{e.data.length>0&&(t.priorityList=e.data,t.priorityList.forEach((e,a)=>{t.FormSchema[0].Data[1].config.options.push({value:e.prioritY_ID,name:e.prioritY_NAME})}))})},GetDepartmentListForSupport:async function(){var t=this;await o["a"].GetDepartmentListForSupport().then(async e=>{e.data.length>0&&(t.DepartmentList=e.data,t.DepartmentList.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({value:e.departmenT_ID,name:e.departmenT_NAME})}))})},GetDepartmentListbyCompanyForClient:async function(){var t=this;await o["a"].GetDepartmentListbyCompanyForClient().then(async e=>{e.data.length>0&&(t.DepartmentList=e.data,t.DepartmentList.forEach((e,a)=>{t.FormSchema[0].Data[2].config.options.push({value:e.departmenT_ID,name:e.departmenT_NAME})}))})},BindCannedReply:async function(){var t=this;await t.TransferTicketData.replyTemplate.forEach((e,a)=>{t.FormSchema[0].Data[4].config.options.push({value:e.value,name:e.name})})},onChangeType:async function(t){var e=this;e.TicketType=t.target.value},onChangeDropdown:async function(t){var e=this,a=`departmentId=${t.target.value}&reqFrom=${e.TicketType}`;await o["a"].GetUserListByDepId(a).then(async t=>{e.FormSchema[0].Data[3].config.options=t.data})},onReady(t){t.ui.getEditableElement().parentElement.insertBefore(t.ui.view.toolbar.element,t.ui.getEditableElement())},setFile:function(t){var e=this;e.file=t.target.files[0],e.FileName=t.target.files[0].name},GetBase64String:function(t){try{var e=this;e.fileData=[];var a=t.target.files[0],i=new FileReader;i.onload=function(t){return function(t){var i=t.target.result,s=window.btoa(i),o=a.name;e.fileName=o;var l=o.lastIndexOf("."),r=o.substring(l+1,o.length);e.fileExt+="."+r;var n='{"ContentType":"'+a.type+'","Size":"'+a.size+'","Extension":"'+r+'"}',c=a.size;e.fileSize=c;var d={attachement_mime:n,fileName:o,base64String:s,fileSize:a.size,contentType:a.type};e.fileData.push(d)}}(),i.readAsBinaryString(a)}catch(s){}},onChangeTemplate:async function(t){var e=this;e.Description=t.target.value},onSubmit:async function(t,e){var a=this;a.ticketModel.TicketId=a.TicketId,a.ticketModel.transferType=a._data.FormSchema[0].Data[0].value,a.ticketModel.priorityId=a._data.FormSchema[0].Data[1].value,a.ticketModel.departmentId=a._data.FormSchema[0].Data[2].value,a.ticketModel.assignedToId=a._data.FormSchema[0].Data[3].value,a.ticketModel.replyTemplate=a._data.FormSchema[0].Data[4].value,a.ticketModel.transferDescription=a._data.FormSchema[1].Data[1].value,a.ticketModel.fileData=a.fileData,a.ticketModel.moduleName=a.modulename,a.ticketModel.subModuleCode=a.submodulecode;var i=JSON.stringify(a.ticketModel);o["a"].TransferOrAssignTicket(i).then(t=>{try{null!=t.data&&""!=t.data&&"SUCCESS"==t.data.result.MSG?"A"==a.ticketModel.transferType?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("TICKET_ASSIGNED")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.ShowAlert(a.$t("AddedSuccess",[a.$t("TICKET_TRANSFER")]),"success",!0,a.$t("Alert")),a.Close(),a.callbackfunction()):(a.FileSrc="",$("input[type=text]").val(""))}catch(e){return HandleErrorOccured(e,"saveClaim")}})},Close:function(){var t=this;t._data.FormSchema[0].Data[0].value=null,t._data.FormSchema[0].Data[1].value=null,t._data.FormSchema[0].Data[2].value=null,t._data.FormSchema[0].Data[3].value=null,t._data.FormSchema[0].Data[4].value=null,t._data.FormSchema[1].Data[1].value=null,t.FileName=null,t.file=null,t.FormSchema[1].Data[0].config.onChange=this.GetBase64String,t.$parent.isShowTransferTicket=!1}}},$t=Nt,Lt=Object(d["a"])($t,wt,Ft,!1,null,null,null),Rt=Lt.exports,xt=a("33e4"),Ot=a("5437"),Mt=a("78f9"),Pt=a("e8b2"),Bt=a("2b0e");Bt["default"].use(CKEditor);var Ut={components:{ticketdetails:m,ThreadsList:_["a"],TicketNotes:S["a"],TicketAttachment:y["a"],AddEscalatePopUp:T,TicketClaim:R,TicketCalls:U,FollowUp:mt["a"],ShowAttachmentData:St["a"],AddNoteData:_t["a"],AddClaimData:w,MergeTicketData:Tt,ticketupdate:Et,transfertickets:Rt,MapComponent:xt["a"],modalReplyTicketpopup:Ot["a"],WorkOrderTimerPopup:Mt["a"],RelatedTicketList:z,TrackHistoryList:Q,WorkOrderList:ut,VueEasyLightbox:Pt["a"]},data(){return{config:{isShowDrawButton:!1,isShowEtaMap:!0,isShowLocator:!1,isShowEtaPipeLines:!1,isShowGetDirection:!0},editor:ClassicEditor,isLoading:!1,TicketId:null,ticketId:null,TicketNumber:null,TicketData:[],TicketDetailData:[],UserType:null,isTicketResolve:null,galleryImages:[],ConfigData:[],ShowWorkOrderTimer:"no",isTicketHOD:null,TicketThreadsData:[],AttachmentData:[],NoteData:[],visible:!1,ClaimData:[],CallData:[],userstatus:"",isShowTicketDetail:!1,isShowActivities:!1,isShowAddClaim:!1,isShowEscalate:!1,isShowNotes:!1,isShowClaims:!1,isShowCalls:!1,isShowRelatedticket:!1,isshowFolloupList:!1,isShowAddNote:!1,isShowMergeTicket:!1,isShowTicketUpdate:!1,isShowTransferTicket:!1,showAttachmentModal:!1,showReplyTicketModal:!1,isShowTrackHistory:!1,isShowWorkOrder:!1,isShowWOTimer:!1,UserStatus:null,mapObj:[],UtilityMapData:[],ticketType:null,isShowMap:!0,mapHeaderText:"Collapse Map",TicketDetailDataForPopup:[],PageNumber:1,PageSize:10,TotalRecords:0,ParentCompanyId:null,ParentCompanyName:null,ShowTimer:!1,AddEditText:"",SortBy:"",SortExp:"",noRecord:!1,index:0,isLocateorNonLocate:"",ListOfCCUsers:"",ticketStatus:"",isDisabledHeaderButton:!1,mapType:null,SourcePage:null}},mounted(){var t=this;const e=this.$route.query.source;t.SourcePage=e},created(){var t=this;t.str_ticket_id=t.$route.params.id,t.UserType=t.GetUserInfo.UserType,t.FetchData(),t.UserCurrentStatus()},updated:function(){var t=this;setTimeout((function(){t.setHeaderForSelectedTab()}),500),$("#ancreplyExpandAllCollapseAll").click((function(){"0"==$(this).attr("show")?($(this).attr("show","1"),$("#tab-ticket-content").find("#accordion").find(".collapse").addClass("show")):($(this).attr("show","0"),$("#tab-ticket-content").find("#accordion").find(".collapse").removeClass("show"))}))},updated:function(){var t=this;setTimeout((function(){t.setHeaderForSelectedTab()}),500)},methods:{handleHide:function(){this.visible=!1},openSpecificImage(t,e){var a=this,i={path:t,caption:e.split(".")[0]};a.galleryImages.push(i)},showImg:function(t){this.index=t,this.visible=!0,$("#div_ShowGpxFile").html("")},openStartPopUp:function(){var t=this;t.isShowWOTimer=!0},openEscalatePopUp:function(){var t=this;t.isShowEscalate=!0,t.ParentCompanyId=t.ParentCompanyId,t.ParentCompanyName=t.ParentCompanyName},openStopPopUp:function(){var t=this,e={TicketId:t.TicketId,TrackId:0,RequestFor:"FSM",RequestForType:"STOP",IPAddress:""},a=JSON.stringify(e);t.confirmR(t.$t("AreYouSureToStopTimer"),!0,t.$t("StopTimer"),(function(e){t.Disabled=1,o["a"].StopTrackHistory(a).then(e=>{try{"Success"==e.data.status?(t.$parent.ShowTimer=!1,t.AddEditText="Add",t.Disabled=0,t.ShowAlert(t.$t("UpdatedSuccess",[t.$t("TimeTrack")]),"success",!0,t.$t("Alert")),document.getElementById("tab-trackhistory").click()):(t.ShowAlert(t.$t("AddedError",[t.$t("TimeTrack")]),"failure",!0,t.$t("Alert")),t.Disabled=0,t.Close())}catch(a){return HandleErrorOccured(a,"failure")}})}))},openReplyModel:function(){var t=this;t.showReplyTicketModal=!0},FetchData:async function(){var t=this;t.isLoading=!0;var e=`str_ticket_id=${t.str_ticket_id}&moduleName=Ticketing&subModuleCode=Ticketing`;await o["a"].GetTicketDetails(e).then((function(e){t.isLoading=!1;let a={};if(t.ticketType=e.data.result.IS_FIELD_SERVICE,t.ConfigData=e.data.result.CONFIG_DATA,e.data.result.LEFTDATA.length>0){var i=e.data.result.LEFTDATA;t.TicketDetailDataForPopup=e.data.result.LEFTDATA,t.UtilityMapData=e.data.result.FSM_MAP_CONFIG,t.mapType=e.data.result.FSM_MAP_CONFIG[0].TYPE,i.forEach((function(t){"ticket_id"==t.name?a["ticketId"]=t.value:"sla_id"==t.name?a["TicketSlaId"]=t.value:"ticket_number"==t.name?a["ticket_number"]=t.value:"created_by"==t.name?a["createdBy"]=t.value:"assigned_to"==t.name?a["assignedTo"]=t.value:"external_ticket_number"==t.name?a["external_ticket_number"]=t.value:"ticket_subject"==t.name?a["ticketSubject"]=t.value:"status_id"==t.name?a["status"]=t.value:"ticket_category_id"==t.name?a["ticketCategoryName"]=t.value:"priority_id"==t.name?a["priority"]=t.value:"created_at"==t.name?a["createdAt"]=t.value:"expected_resolution_date"==t.name?a["expectedResolutionDate"]=t.value:"Description"==t.name?a["description"]=t.value:"location_nw"==t.name?a["location_nw"]=t.value:"location_se"==t.name?a["location_se"]=t.value:"created_by"==t.name&&(a["createdBy"]=t.value)})),a["noOfNotes"]=e.data.result.NO_OF_NOTES,a["attachmentsCount"]=e.data.result.ATTACHMENTS_COUNT,a["noOfClaims"]=e.data.result.NO_OF_CLAIM,a["isFieldServiceTicket"]=1==e.data.result.IS_FIELD_SERVICE,a["departmentName"]=e.data.result.DEPARTMENT_NAME,a["followUpId"]=e.data.result.FOLLOW_UP_ID,a["raisedBy"]=e.data.result.RAISED_BY,a["raisedByDepartmentName"]=e.data.result.DEPT_NAME,a["createdUserTypeId"]=e.data.result.TICKET_CREATED_USER_TYPE,t.isLocateorNonLocate=e.data.result.IS_FSM_LOCATING,t.ListOfCCUsers=e.data.result.CC_USERS_NON_LOCATE,t.TicketData=a,t.TicketNumber=t.TicketData.ticket_number,t.TicketId=t.TicketData.ticketId,console.log("TicketId",t.TicketId),t.ParentCompanyId=e.data.result.PARENT_COMPANY_ID,t.ParentCompanyName=e.data.result.PARENT_COMPANY_NAME,"Closed"!=t.TicketData.status&&"Closed and Locked"!=t.TicketData.status&&"Cancelled"!=t.TicketData.status&&"Completed"!=t.TicketData.status||(t.isDisabledHeaderButton=!0),t.isTicketResolve=e.data.result.IS_TICKET_RESOLVE,"yes"==e.data.result.SHOW_Work_Order_Timer.CONFIGURATION_Work_Order_Timer?t.ShowWorkOrderTimer="yes":t.ShowWorkOrderTimer="no","1"==e.data.result.IN_COMPLETE_ENTRY&&(t.AddEditText="Edit"),t.isTicketHOD=e.data.result.IS_TICKET_HOD,t.UserStatus=e.data.result.STATUS_CODE.toLowerCase(),setTimeout((function(){t.LoadTab("activities")}),500);var s={latlong:t.TicketData.location_nw,refValue:t.TicketNumber,popupHeaderHtml:"",popupHeaderColor:"",popupBodyHtml:"",popupFooterHtml:"",pinLatLong:{latitude:t.TicketData.location_nw,longitude:t.TicketData.location_nw},polygons:[{name:"",latLong:[{latitude:t.TicketData.location_nw,longitude:t.TicketData.location_nw}]}],address:"",priority:"",color_code:""};t.mapObj.push(s)}}))},ShowHideMap:function(){0==this.isShowMap?(this.isShowMap=!0,this.mapHeaderText="Collapse map"):(this.isShowMap=!1,this.mapHeaderText="Expand map")},FetchActivityData:async function(){var t=this;t.isLoading=!0;var e="ticketId="+t.str_ticket_id;await o["a"].GetThreadsList(e).then((function(e){t.isLoading=!1;var a=e.data.TicketThreads;t.TicketId=e.data.ticket_id,a.length>0&&(t.TicketThreadsData=a)}))},FetchTicketData:async function(){var t=this;t.isLoading=!0;var e=`id=${t.TicketId}&moduleName=Ticketing&subModuleCode=Ticketing`;await o["a"].GetTicketDetails(e).then((function(e){t.isLoading=!1;var a=e.data.result.LEFTDATA;a.length>0&&(t.TicketDetailData=e.data.result.LEFTDATA)}))},GetNoteData:async function(){var t=this;t.isLoading=!0;var e="ticketId="+t.TicketId;await o["a"].GetWorkOrderNoteList(e).then((function(e){t.isLoading=!1,e.data.length>0?(t.NoteData=e.data,t.TicketData.noOfNotes=e.data.length,t.GetAttachmentData()):t.NoteData=[]}))},GetClaimData:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.TicketId}&claimId=0&isHod=`;await o["a"].TicketClaimList(e).then((function(e){t.isLoading=!1,null!=e.data?(t.ClaimData=e.data,t.TicketData.noOfClaims=e.data.claim.length):t.ClaimData=[]}))},GetCallData:async function(){var t=this;t.isLoading=!0;var e=`ticketId=${t.TicketId}&subModuleCode=Ticketing&reqFrom=`;await o["a"].GetCallList(e).then((function(e){t.isLoading=!1,null!=e.data?t.CallData=e.data:t.CallData=[]}))},openAttachmentModel:function(){var t=this;t.showAttachmentModal=!0,$("#divAttachment").scrollTop(0)},GetAttachmentData:function(){var t=this;t.galleryImages=[],t.AttachmentData=[],t.galleryFilesView=[],t.isLoading=!0;var e="ticketId="+t.TicketId;o["a"].GetTicketFiles(e).then((function(e){t.isLoading=!1,""!=e.data.result&&e.data.result.DATA.length>0?(t.AttachmentData=e.data.result.DATA,t.TicketData.attachmentsCount=e.data.result.DATA.length):(t.TicketData.attachmentsCount=[],t.AttachmentData=[])}))},async LoadTab(t){var e=this;"activities"==t?(e.isShowCalls=!1,e.isShowClaims=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1,e.isShowNotes=!1,e.isShowActivities=!0,e.isShowTicketDetail=!0,e.FetchActivityData()):"notes"==t?(await e.GetNoteData(),e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowCalls=!1,e.isShowClaims=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1,e.isShowNotes=!0):"attachments"==t?(await e.GetAttachmentData(),e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowCalls=!1,e.isShowClaims=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1):"claims"==t?(await e.GetClaimData(),e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowCalls=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1,e.isShowClaims=!0):"calls"==t?(await e.GetCallData(),e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowClaims=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1,e.isShowCalls=!0):"relatedticket"==t?(e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowCalls=!1,e.isShowClaims=!1,e.isShowTrackHistory=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!0):"trackhistory"==t?(e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowCalls=!1,e.isShowClaims=!1,e.isShowWorkOrder=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!0):"workorder"==t&&(e.isShowActivities=!1,e.isShowTicketDetail=!1,e.isShowNotes=!1,e.isShowCalls=!1,e.isShowClaims=!1,e.isShowRelatedticket=!1,e.isShowTrackHistory=!1,e.isShowWorkOrder=!0)},UserCurrentStatus:function(){var t=this;if("online"==t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data,t.userstatus=e.status_code}))}));else if("online"!=t.userstatus&&""!=t.userstatus)t.confirmR(t.$t("TicketUserStatusChangeMessage"),!0,t.$t("Alert"),(function(){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}));else if(""==t.userstatus){var e="statusCode="+t.userstatus;o["a"].UpdateUserCurrentStatus(e).then((function(e){e.data.length,t.userstatus=e.data[0].status_code}))}},UpdateTicket:async function(){var t=this;t.isShowTicketUpdate=!0}}},Gt=Ut,Vt=Object(d["a"])(Gt,i,s,!1,null,null,null);e["default"]=Vt.exports},fc96:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("section",[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"clearfix"}),e("div",{staticClass:"row custom-box-width",attrs:{id:"OuterDivForVueCodeAttachment"}},[t._l(t.AttachmentList,(function(a,i){return e("div",{key:i,staticClass:"col-sm-12 col-md-6 col-lg-4 col-xl-3 default-tag-vissible"},[e("div",{staticClass:"col-12 p-0 d-flex flex-wrap",attrs:{id:"div_ShowGpxImage"}}),e("div",{staticClass:"box border positionrelative float-left w-100"},[e("div",{staticClass:"default-tags"},[e("div",{staticClass:"defaultpic_control"},["FSM"==t.RequestFrom&&null!=a.GEOFILE_PATH&&""!=a.GEOFILE_PATH?e("a",{staticClass:"text-primary round-icons mr-2 dev_ShowGPXPopup",attrs:{href:"javascript:;",title:t.$t("ViewOnMap"),value:a.ticket_attachment_id,"data-fileName":a.attachment_name,"data-filePath":a.C[0].ATTACHMENTFULLPATH,"data-fileType":a.attachment_desc,"data-GpxFile":a.GEOFILE_PATH,"data-placement":"left"}},[e("em",{staticClass:"fa fa-globe"})]):t._e(),1==t.ListViewAttachment?e("a",{staticClass:"text-primary round-icons mr-2",attrs:{href:"javascript:;",title:t.$t("View"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.ticketFilePath,fileType:a.contentType,"data-placement":"left"},on:{click:function(e){return t.showImg(a.C[0].ATTACHMENTFULLPATH,a.attachment_name)}}},[e("em",{staticClass:"fa fa-eye"}),e("br")]):t._e(),e("a",{staticClass:"text-primary round-icons mr-2 downloadfile",attrs:{href:"javascript:;",title:t.$t("DownloadFile"),"data-placement":"left"},on:{click:function(e){return t.DownloadAttachment(a)}}},[e("em",{staticClass:"fa fa-download"}),e("br")]),a.CREATED_BY==t.UserId?e("a",{staticClass:"text-primary round-icons mr-2 attachmentdraftdelete",attrs:{href:"javascript:;",title:t.$t("ClickHereDeleteAttachment"),value:a.ticket_attachment_id,fileName:a.attachment_name,filePath:a.attachment_path,fileType:a.attachment_desc,"data-placement":"left"},on:{click:function(e){return t.deleteAttachment(a)}}},[e("em",{staticClass:"fa fa-trash text-danger"}),e("br")]):t._e()])]),e("div",{staticClass:"img-ico text-center p-4 ticket-attachments"},[t.setImageIcon(a)?"word-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-word-o"}):"excel-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-excel-o"}):"pdf-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-pdf-o"}):"png-ico.png"==t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}}):"audio-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-audio-o"}):"file-ico.png"==t.setImageIcon(a)?e("em",{staticClass:"fa fa-file-text-o"}):t._e():e("em",{staticClass:"fa fa-file-video-o"}),["/Content/Responsive/images/png-ico.png"!=t.setImageIcon(a)?e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:t.setImageIcon(a),alt:""}}):e("img",{staticClass:"img-fluid",staticStyle:{width:"auto",height:"102px","min-height":"102px"},attrs:{src:a.C[0].ATTACHMENTFULLPATH,alt:""}})]],2),e("hr",{staticClass:"my-1"}),e("div",{staticClass:"col-12 p-0 mx-0 align-items-end float-left"},[e("div",{staticClass:"col-12 textelipsis px-2"},[t._v(t._s(a.attachment_name))]),e("div",{staticClass:"col-md-12 px-2 py-1 bg-light mt-1 float-left"},[e("small",{staticClass:"float-left textelipsis col-6 p-0"},[e("span",[t._v(t._s(a.PostedBy))])]),e("small",{staticClass:"float-right col-6 text-right p-0"},[t._v(t._s(a.CREATED_AT))])])])])])})),t.NoRecords?e("div",{staticClass:"col-sm-12 col-md-12 col-lg-12 mt-2 float-left p-0"},[e("span",{staticClass:"text-danger text-center no-record",staticStyle:{display:"block"}},[t._v(t._s(t.$t("NoRecordfound")))])]):t._e()],2)],1)},s=[],o=a("9769"),l={components:{},props:{AttachmentData:{type:Array,required:!0},galleryImages:{type:Array,required:!1},viewMode:{type:String,required:!1},ListViewAttachment:{type:Number,required:!1}},data(){return{AttachmentList:[],ListViewAttachment:0,GalleryImages:[],NoRecords:!1,visible:!1,RequestFrom:null,UserId:null,isLoading:!1,index:0}},watch:{AttachmentData:function(t){var e=this;e.AttachmentList=t,e.AttachmentList.length>0?e.NoRecords=!1:(e.AttachmentList=[],e.NoRecords=!0)}},created(){var t=this;t.ListViewAttachment=this.ListViewAttachment,setTimeout(()=>{t.UserId=t.GetUserInfo.ID,t.RequestFrom=t.AttachmentData.RequestFrom,t.GalleryImages=t.galleryImages,t.AttachmentData.length>0?(t.AttachmentList=t.AttachmentData,t.NoRecords=!1):(t.AttachmentList=[],t.NoRecords=!0)},1e3)},methods:{handleHide:function(){this.visible=!1},showImg:function(t,e){var a=this;a.$parent.galleryImages=[],a.$emit("open-image",t,e),a.$parent.visible=!0},setImageIcon(t){var e=this,a="/Content/Responsive/images/",i=e.getExtension(t.attachment_name);switch(i.toLowerCase()){case"doc":case"docx":a="word-ico.png";break;case"xlsx":case"xls":a="excel-ico.png";break;case"pdf":a="pdf-ico.png";break;case"jpg":case"jpeg":case"png":case"gif":case"bmp":a="png-ico.png";break;case"webm":case"mov":case"mpv":case"mp4":case"avi":a="";break;case"mp3":case"wav":a="audio-ico.png";break;default:a="file-ico.png";break}return a},getExtension(t){let e=t.split(/[\\/]/).pop(),a=e.lastIndexOf(".");return""===e||a<1?"":e.slice(a+1)},deleteAttachment:function(t){var e=this;e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Remove"),(function(){var a="attachmentid="+t.ticket_attachment_id;o["a"].DeleteIncidentAttachment(a).then((function(t){null!=t.data&&""!=t.data&&"Success"==t.data.status&&"SUCCESS"==t.data.result.MSG?("AttachmentInDetail"==e.viewMode?document.getElementById("tab-attachment").click():e.$parent.FetchAttachmentData(),e.ticket_attachment_id>0?e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")):(e.ShowAlert(e.$t("Attachment has been successfully deleted"),"success",!0,e.$t("Alert")),e.$emit("close"))):e.ShowAlert(e.$t("ErrorWhileSavingRecords",[e.$t("failure")]),"success",!0,e.$t("Alert"))}))}))},DownloadAttachment(t){var e=this;e.isLoading=!0;var a=`filePath=${t.attachment_path}&fileName=${t.attachment_name}`;o["a"].DownloadFile(a).then((function(a){e.isLoading=!1;const i=a.data,s=`data:${JSON.parse(t.attachment_desc).ContentType};base64,${i}`;var o=document.createElement("a");o.href=s,o.setAttribute("download",t.attachment_name),document.body.appendChild(o),o.click()})),e.isLoading=!1}}},r=l,n=a("2877"),c=Object(n["a"])(r,i,s,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-17316056.js.map