(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2217d9"],{cb26:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t._self._c;return a("section",[a("tg-list",{directives:[{name:"show",rawName:"v-show",value:t.IsMapConfigView,expression:"IsMapConfigView"}],attrs:{IsShowAction:!0,ModuleName:"Ticketing",SubModuleCode:"FSM_MapExtend",LegendArray:[],widgets:[],IdentityColumn:"ID",HeaderText:t.$t("MapExtend"),listType:["List"],ListData:t.mapList,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,ListDataCallBackFunction:t.fetchMapConfigList,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),RenderRowActionMethod:t.renderActions},on:{SortdataButtonClick:t.sortdata,PagerButtonClick:t.pagerMethod,ActionButtonClick:t.actionButtonClick,HeaderButtonClick:t.commonHeaderButtonClick},scopedSlots:t._u([{key:"slotdata",fn:function({data:e}){return["status_id"==e.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action tourguide_a"},[a("span",{class:t.getStatusClass(e.row.STATUS_ID)},[a("a",{attrs:{href:"javascript:;",title:"","data-toggle-tooltip":"tooltip","data-original-title":"Active"}},[1001==e.row[e.column.COLUMN_NAME]?a("em",{staticClass:"fa fa-check text-success action-icon",on:{click:function(a){return t.changeMapStatus(e,"INACTIVE")}}}):t._e(),1002==e.row[e.column.COLUMN_NAME]?a("em",{staticClass:"fa fa-close text-danger action-icon",on:{click:function(a){return t.changeMapStatus(e,"ACTIVE")}}}):t._e()])])])]:t._e(),"created_at"==e.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action tourguide_a"},[t._v(" "+t._s(t.$options.filters.formatDate(e.row.created_at))+" ")])]:t._e()]}}])}),1==t.ShowManageMap?a("ManageMap",{attrs:{EditData:t.EditData}}):t._e()],1)},i=[];e("14d9");let r=[{title:"Add New",iconClass:"fa fa-plus",callbackfunction:"openaddMap",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"Addticketing"}],o=[{title:"Edit",href:"javascript:void(0)",callbackfunction:"openshowaddNewModal",icon:"fa action-icon fa fa-pencil",additionalSpan:""},{title:"Delete",href:"javascript:void(0)",callbackfunction:"deleteMap",icon:"fa fa-trash action-icon",additionalSpan:""}];var l={buttons:r,listActions:o},n=e("9769"),c=function(){var t=this,a=t._self._c;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full d-flex"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ManageMap")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),a("span",{staticClass:"user-guide"},[t._m(0),a("div",{staticClass:"divancuserguide collapse overflow-auto",attrs:{id:"collapseReplyUG"}},[a("div",{staticClass:"custom-scrollbar-js",attrs:{id:"scrollbarreplyuserguideMangeView"}},[a("div",{staticClass:"con",domProps:{innerHTML:t._s(t.$t("ManageMapUserGuide"))}})])])])]),a("div",{staticClass:"modal-body"},[a("Form",{ref:"ProductAssignmentForm"},[a("div",{staticClass:"col-md-12"},[t.IsLoaded?a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema}}):t._e(),a("div",{ref:"tbleBox",staticClass:"listing"},[a("div",{staticClass:"table-responsive tableborder overflow-visible"},[a("table",{staticClass:"table-sorting table table-bordered m-0"},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{staticStyle:{"min-width":"300px",width:"300px"}},[a("span",[t._v("Service Name "),a("i",{staticClass:"text-danger"},[t._v("*")])])]),a("th",{staticStyle:{"min-width":"150px",width:"150px"}},[a("span",[t._v("Layer Color")])]),t._v(" "),a("th",[a("span",[t._v("Service Url"),a("i",{staticClass:"text-danger"},[t._v("*")])])]),a("th",{staticClass:"px-1 text-center",staticStyle:{width:"120px"}},[a("a",{attrs:{href:"javascript:;",title:"Add More"},on:{click:function(a){return t.AddServiceCondition()}}},[a("i",{staticClass:"fa fa-plus-circle pr-2 fa-size text-success"}),t._v("Add More")])])])]),a("tbody",t._l(t.MapTypeSetting,(function(e,s){return a("tr",{key:s},[a("td",[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.LayerName,expression:"item.LayerName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter Service Name"},domProps:{value:e.LayerName},on:{input:function(a){a.target.composing||t.$set(e,"LayerName",a.target.value)}}})]),a("td",{staticClass:"overflow-visible"},[a("div",{staticClass:"input-group color-picker"},[a("Vue2ColorPicker",{attrs:{color:e.LAYER_COLOR},model:{value:e.LayerColor,callback:function(a){t.$set(e,"LayerColor",a)},expression:"item.LayerColor"}})],1)]),a("td",[a("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.LayerUrl,expression:"item.LayerUrl"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.LayerUrl},on:{input:function(a){a.target.composing||t.$set(e,"LayerUrl",a.target.value)}}})]),a("td",{staticClass:"text-center"},[s>0?a("a",{attrs:{href:"javascript:;",title:"Delete"},on:{click:function(a){return t.DeleteServiceCondition(s)}}},[a("i",{staticClass:"fa fa-trash fa-size text-danger"})]):t._e(),0==s?a("a",{staticClass:"disabled",attrs:{href:"javascript:;",title:"Delete"}},[a("i",{staticClass:"fa fa-trash fa-size text-secondary"})]):t._e()])])})),0)])]),a("br")])],1),a("div",{staticClass:"row flex-row-reverse"},[a("div",{staticClass:"col-lg-6 text-right"},[a("div",{staticClass:"col-12 p-0"},[a("a",{staticClass:"btn btn-success formbtn",attrs:{href:"javascript:;",tabindex:"3",title:"Save"},on:{click:t.SaveMap}},[a("i",{staticClass:"fa fa-save pr-2"}),t._v(" Save")]),t._v("Â  "),a("a",{staticClass:"btn btn-danger formbtn",attrs:{href:"javascript:;",tabindex:"4",title:"Cancel"},on:{click:t.Close}},[a("i",{staticClass:"fa fa-close pr-2"}),t._v(" Cancel")])])]),a("div",{staticClass:"col-lg-6"},[a("div",{staticClass:"py-2"},[a("span",{staticClass:"mandatory"},[t._v(t._s(t.$t("MandatoryString")))])])])])])],1)])])])],1)},d=[function(){var t=this,a=t._self._c;return a("a",{staticClass:"ancuserguide text-white",attrs:{"data-toggle":"collapse",href:"#collapseReplyUG",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[a("em",{staticClass:"fa fa-files-o pr-2"}),t._v("User Guide")])}],p=e("b9d7"),u=e.n(p),h={components:{Vue2ColorPicker:u.a},props:{EditData:{type:String,required:!1}},data(){return{IsLoaded:0,isLoading:!1,ShowDiv:!1,ttype:"Esri",ShowTitle:!0,UtilityData:[],MapTypeSetting:[{Utility:"",LayerUrl:"",LayerColor:"",LayerName:""}],FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("Title"),name:"Title",value:"",placeholder:this.$t("Title Name"),validationRules:{required:!0,max:200}},{astype:"RadioField",label:this.$t("MapType"),name:"MapType",value:"Esri",config:{options:[{name:"Esri",value:"Esri"},{name:"Google",value:"Google"},{name:"MapBox",value:"MapBox"},{name:"LeafLet",value:"LeafLet"}],onChange:this.changeDiv}},{astype:"TextField",label:this.$t("ApiKey"),name:"ApiKey",value:"",placeholder:this.$t("Api Key"),validationRules:{required:!0,max:200}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onClick:this.SaveMap,isVisible:!1}]}},created:function(){this.FetchData(),this.IsLoaded=1},methods:{FetchData:function(){var t=this;if(""!=t.EditData&&null!=t.EditData&&void 0!=t.EditData){t.MapTypeSetting=[];var a="MapId="+t.EditData;n["a"].MapList(a).then(a=>{"Esri"==JSON.parse(a.data.result).data[0].type?(t.FormSchema[0].Data[0].value=JSON.parse(a.data.result).data[0].title,t.FormSchema[0].Data[1].value=JSON.parse(a.data.result).data[0].type,t.FormSchema[0].Data[2].value=JSON.parse(a.data.result).data[0].api_key,JSON.parse(a.data.result).EsriSetting.forEach(a=>{t.MapTypeSetting.push({Utility:a.UTILITY_ID,LayerUrl:a.LAYER_URL,LayerColor:a.LAYER_COLOR,LayerName:a.LAYER_NAME})}),t.$refs.tbleBox.classList.remove("d-none")):(t.FormSchema[0].Data[0].value=JSON.parse(a.data.result).data[0].title,t.FormSchema[0].Data[1].value=JSON.parse(a.data.result).data[0].type,t.FormSchema[0].Data[2].value=JSON.parse(a.data.result).data[0].api_key,t.MapTypeSetting=JSON.parse(a.data.result).EsriSetting,t.$refs.tbleBox.classList.add("d-none"),t.MapTypeSetting.push({Utility:"",LayerUrl:"",LayerColor:"",LayerName:""}))})}},changeDiv:function(t,a){var e=this;a.value=t.target.getAttribute("data-value"),"Esri"==a.value?(e.ttype="Esri",e.$refs.tbleBox.classList.remove("d-none"),e.ShowTitle=!0):"Google"==a.value?(e.ttype="Google",e.$refs.tbleBox.classList.add("d-none")):"MapBox"==a.value?(e.ttype="MapBox",e.$refs.tbleBox.classList.add("d-none")):"LeafLet"==a.value&&(e.ttype="LeafLet",e.$refs.tbleBox.classList.add("d-none"))},DeleteServiceCondition:function(t){var a=this;a.confirmR(a.$t("ConfirmDelete"),!0,a.$t("Delete"),(function(){a.MapTypeSetting.splice(t,1)}))},SaveMap:function(){var t=this;t.$refs.ProductAssignmentForm.validate().then(a=>{if(a){var e={Title:t.FormSchema[0].Data[0].value,Apikey:t.FormSchema[0].Data[2].value,Type:t.FormSchema[0].Data[1].value,EsriMapTypeSetting:t.MapTypeSetting,MapId:t.modalItem,QueryType:parseInt(t.modalItem)>0?"UPD":"INS"},s=JSON.stringify(e);n["a"].SaveMap(s).then(a=>{"Success"==a.data.status&&(t.ShowAlert(t.$t("DataSavedSuccessfully"),"success",!0,t.$t("Alert")),t.$parent.fetchMapConfigList(),t.$parent.Close())})}})},AddServiceCondition:function(){var t=this;null!=t.UtilityData&&t.UtilityData.length>0&&t.UtilityData.length,this.MapTypeSetting.length;var a={Utility:"",LayerName:"",LayerColor:"",LayerUrl:""};t.MapTypeSetting.push(a)},Close:function(){var t=this;t.$parent.Close()}}},f=h,m=e("2877"),v=Object(m["a"])(f,c,d,!1,null,null,null),S=v.exports,g=e("69d3"),M={components:{ManageMap:S,SearchFilter:g["a"]},data(){return{MapId:null,EditData:null,Headers:[{COLUMN_NAME:"title",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Title",DISPLAY_ORDER:1},{COLUMN_NAME:"api_key",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"API Key",DISPLAY_ORDER:2},{COLUMN_NAME:"type",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Mode Type","DISPLAY_ORDER ":3},{COLUMN_NAME:"created_at",DATA_TYPE:"string",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Created At",DISPLAY_ORDER:4},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:5}],TotalRecords:0,PageNumber:1,PageSize:10,SortBy:"",SortExp:"",searchKeyWord:"",mapList:[],ItemObject:null,showaddNewModal:!1,noRecord:!1,ShowManageMap:!1,listheaderbuttons:l.buttons,listActions:l.listActions,IsMapConfigView:!0,modalItem:""}},created:function(){this.fetchMapConfigList(),setTimeout(()=>{$(".theme-primary").prepend('<span class="p-name text-white">Map Accounts</span>')},500)},methods:{commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"openadd":this.openaddTicket();break;case"openaddMap":this.openaddMaps();break}},openaddMaps:function(){var t=this;t.ShowManageMap=!0,this.EditData=""},renderActions:function(){var t=this;let a=[];return t.listActions.forEach(t=>{let e={...t};switch(e.title){case"Add New":e.isVisible=!0;break;default:e.isVisible=!0}a.push(e)}),a},actionButtonClick:function(t,a,e,s){switch(t){case"openshowaddNewModal":this.openshowaddNewModal(a.map_id);break;case"deleteMap":this.deleteMap(a.map_id);break}},Close:function(){var t=this;t.ShowManageMap=!1},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.fetchMapConfigList()},fetchMapConfigList:function(){var t=this,a=`sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNumber=${t.PageNumber}&searchKeyWord=${t.searchKeyWord}`;n["a"].MapList(a).then((function(a){null!=a.data.result&&(JSON.parse(a.data.result).data.length>0&&(t.TotalRecords=JSON.parse(a.data.result).data[0].total_records),t.Headers.forEach(t=>{t.settings=null,"Edit"!=t.COLUMN_NAME&&"Delete"!=t.COLUMN_NAME&&"status_id"!=t.COLUMN_NAME&&"created_at"!=t.COLUMN_NAME||(t.settings={isInSlot:!0})}),t.mapList=JSON.parse(a.data.result).data,t.mapList.length>0?t.noRecord=!1:t.noRecord=!0,setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500))}))},openshowaddNewModal:function(t){this.ShowManageMap=!0,this.modalItem=t,this.EditData=t},sortdata:function(t){this.SortBy=t;var a="ASC";"ASC"==this.SortExp&&(a="DESC"),this.SortExp=a,this.SortBy=t,this.SortExp=a,this.PageNumber=1,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.fetchMapConfigList()},deleteMap:function(t){var a=this;a.confirmR(a.$t("ConfirmDelete"),!0,a.$t("Delete")+"  "+a.$t("Map")+" "+a.$t("Setting"),(function(){var e={MapId:t,QueryType:"DEL"},s=JSON.stringify(e);n["a"].SaveMap(s).then(t=>{"Success"==t.data.status&&(a.ShowAlert(a.$t("DeletedSuccess",[a.$t("Record")]),"Success",!0,a.$t("Alert")),a.fetchMapConfigList())})}))},changeMapStatus:function(t,a){var e=this,s={MapId:t.row.map_id,StatusForUpdate:a,QueryType:"UPDSTS"},i=JSON.stringify(s);e.confirmR(e.$t("UpdateTicketRouteStatus"),!0,e.$t("Active/Inactive"),(function(t){n["a"].SaveMap(i).then(t=>{null!=t.data.status?"Success"===t.data.status?(e.ShowAlert(e.$t("RecordUpdatedSuccessfully"),"success",!0,e.$t("Alert")),e.fetchMapConfigList()):e.ShowAlert(e.$t("UnknownErrorOccur"),"failure",!0,e.$t("Alert")):ShowAlert(e.$t("UnknownErrorOccur"),"failure",!0,e.$t("Alert"))})}))}}},C=M,y=Object(m["a"])(C,s,i,!1,null,null,null);a["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d2217d9.js.map