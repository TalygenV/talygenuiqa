(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0af277"],{"0cb0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("section",[e("tg-list",{directives:[{name:"show",rawName:"v-show",value:t.IsGroupView,expression:"IsGroupView"}],attrs:{IsShowAction:!1,ModuleName:"FSM",SubModuleCode:"FSM_Map_Status",IdentityColumn:"id",HeaderText:t.$t("Map Status"),LegendArray:[],RenderRowActionMethod:()=>{},widgets:[],listType:["List"],ListData:t.MapStatusListing,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecords,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound")},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["status_id"==a.column.COLUMN_NAME?[t.isCRMShowStausDrop(a.row.statusId,"Ticketing")?e("listing-status",{ref:"updatestatus",attrs:{isfor:"MapStatus",dataid:a.row.id,"data-controller":"Crm",statuslist:t.StatusListForListing,item:a.statusId,"data-action":"index",dataselected:1001==a.row.status_id?"Active":"Inactive",callbackfunction:t.FetchData,isselectedvaluestring:!0}}):t._e(),t.isCRMShowStausDrop(a.row.status_id,"Ticketing")?t._e():e("a",{staticClass:"inactive-disabled"},[e("span",{class:t.getStatusClassList(a.row.status_id,"status_id")},[t._v(" "+t._s(a.row[a.column.COLUMN_NAME])+" ")])])]:t._e()]}}])}),t.AddMapStatusPopup?e("AddMapStatusPopup",{attrs:{MapTypeId:t.mapStatusId}}):t._e()],1)},i=[],o=(a("14d9"),a("9769"));let n=[{title:"Add",iconClass:"fa fa-plus",callbackfunction:"openMapStatus",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0,id:"AddMapStatus"},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],d=[{fieldName:"Name",fieldType:"text",fieldIcon:"fa fa-info-circle",fieldSearchConditionName:["TSM.name"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Service Appointment Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSM.sa_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Work Order Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSM.wo_status_id"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Ticket Status",fieldType:"ddl-check",fieldIcon:"fa fa-file-text-o",fieldSearchConditionName:["TSM.ticket_status_id"],isSearch:!1,value:"",listOptions:[]}];async function r(t,e,a,s,i){var n=t,d="moduleName=FSM&type="+a;"SERVICEAPPOINTMENT_STATUS"==a?await o["a"].GetDDLData(d).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};n.leftSearchFields[1].listOptions.push(e)})}):"WORK_ORDER_FINAL_STATUS"==a?await o["a"].GetDDLData(d).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};n.leftSearchFields[2].listOptions.push(e)})}):"FSM_TICKETING_STATUS"==a&&await o["a"].GetDDLData(d).then(t=>{t.data.DATA.forEach(t=>{let e={name:t.name,value:t.value};n.leftSearchFields[3].listOptions.push(e)})})}var c={buttons:n,leftsearchSchema:d,bindleftCommonSearchdropdown:r},l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"my-popups"},[e("loader",{attrs:{"is-visible":t.isLoading}}),e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header theme-primary partition-full"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("Manage Status Mapping")))]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),e("div",{staticClass:"modal-body"},[e("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},u=[],S={props:{MapStatusId:{type:Number,required:!0}},data(){return{isLoading:!1,serviceAppointmentStatusList:[],FormSchema:[{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Status Mapping Name"),name:"StatusMappingName",value:"",placeholder:this.$t("Enter Status Mapping Name"),validationRules:{required:!0,max:100}}]},{layoutType:"single",Data:[{astype:"TextField",label:this.$t("Description"),name:"Description",value:"",placeholder:this.$t("Enter Description"),validationRules:{required:!1,max:100}}]},{layoutType:"double",Data:[{astype:"SelectField",mode:"tag",label:this.$t("Service Appointment Status "),name:"ServiceUser",value:"",config:{options:[]},placeholder:this.$t("Select Status"),validationRules:{required:!0,max:100}},{astype:"SelectField",mode:"tag",label:this.$t("Work Order Status "),name:"WorkOrder",value:"",config:{options:[]},placeholder:this.$t("Select Status"),validationRules:{required:!0,max:100}},{astype:"SelectField",mode:"tag",label:this.$t("Ticket Status "),name:"TicketStatus",value:"",config:{options:[]},placeholder:this.$t("Select Status"),validationRules:{required:!0,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}],ListData:[]}},created:async function(){this.BindServiceAppointmentStatusType(),this.BindWorkOrderStatusType(),this.BindTicketStatusType()},methods:{Close:function(){this.$parent.AddMapStatusPopup=!1},BindServiceAppointmentStatusType:async function(){var t=this,e=`id=&companyId=${t.companyId}&userId=${t.userid}&moduleName=FSM&type=SERVICEAPPOINTMENT_STATUS`;await o["a"].GetDDLData(e).then((function(e){if(e.data){var a=e.data;null!=a&&e.data.DATA.forEach((e,a)=>{t.FormSchema[2].Data[0].config.options.push({name:e.name,value:e.value})})}}))},BindWorkOrderStatusType:async function(){var t=this,e=`id=&companyId=${t.companyId}&userId=${t.userid}&moduleName=FSM&type=WORK_ORDER_FINAL_STATUS`;await o["a"].GetDDLData(e).then((function(e){if(e.data){var a=e.data;null!=a&&e.data.DATA.forEach((e,a)=>{t.FormSchema[2].Data[1].config.options.push({value:e.value,name:e.name})})}}))},BindTicketStatusType:async function(){var t=this,e=`id=&companyId=${t.companyId}&userId=${t.userid}&moduleName=FSM&type=FSM_TICKETING_STATUS`;await o["a"].GetDDLData(e).then((function(e){if(e.data){var a=e.data;null!=a&&e.data.DATA.forEach((e,a)=>{t.FormSchema[2].Data[2].config.options.push({value:e.value,name:e.name})})}}))},onSubmit(t,e){var a=this,s={statusMappingName:t.StatusMappingName,description:t.Description,serviceAppointmentStatus:t.ServiceUser,workOrderStatus:t.WorkOrder,ticketStatus:t.TicketStatus},i=JSON.stringify(s);o["a"].SaveMapStatusTicketType(i).then((function(t){"Success"==t.data.status?("NAME_ALREADY_EXISTS"==t.data.result?(a.ShowAlert(a.$t("AlreadyExists",[a.$t("StatusMapping")],[a.$t("Name")]),"warning",!0,a.$t("Alert")),a.Close()):"MAPPING_ALREADY_EXISTS"==t.data.result?a.ShowAlert(a.$t("AlreadyExists",[a.$t("StatusMapping")]),"warning",!0,a.$t("Alert")):"SA_STATUS_ALREADY_EXISTS"==t.data.result?a.ShowAlert(a.$t("AlreadyExists",[a.$t("ServiceAppointment")],[a.$t("Status")]),"warning",!0,a.$t("Alert")):a.ShowAlert(a.$t("OffHoursSuccess",[a.$t("StatusMapping")]),"success",!0,a.$t("Alert")),a.Close(),a.$parent.FetchData()):(a.ShowAlert(a.$t("DeletedError",[a.$t("StatusCode")]),"failure",!0,a.$t("Alert")),a.Close())}))}}},p=S,h=a("2877"),m=Object(h["a"])(p,l,u,!1,null,null,null),A=m.exports,f={components:{AddMapStatusPopup:A},data(){return{MapStatusListing:[],AddMapStatusPopup:!1,mapStatusId:0,TotalRecords:0,PageSize:10,PageNumber:1,CurrentPage:1,SortBy:"",SortExp:"",user_type:null,user_id:null,companyId:null,Headers:[{COLUMN_NAME:"name",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Name",DISPLAY_ORDER:1},{COLUMN_NAME:"sa_status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Service Appointment Status",DISPLAY_ORDER:2},{COLUMN_NAME:"wo_status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Work Order Status",DISPLAY_ORDER:3},{COLUMN_NAME:"ticket_status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Ticket Status",DISPLAY_ORDER:4},{COLUMN_NAME:"created_by",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created By",DISPLAY_ORDER:5},{COLUMN_NAME:"created_at",DATA_TYPE:"date",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Created At",DISPLAY_ORDER:5},{COLUMN_NAME:"status_id",DATA_TYPE:"string",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:5}],listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,IsGroupView:!0,noRecord:!1,StatusListForListing:[{STATUS:"Active",STATUS_ID:1001,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#28a745"},{STATUS:"Inactive",STATUS_ID:1002,STATUS_COLOR:"#ffffff",STATUS_BG_COLOR:"#f50606"}]}},created:async function(){var t=this;this.user_id=this.GetUserInfo.ID,this.user_type=this.GetUserInfo.UserType,this.companyId=this.GetUserInfo.CompanyId,await this.FetchData(),await c.bindleftCommonSearchdropdown(t,"FSM","SERVICEAPPOINTMENT_STATUS"),await c.bindleftCommonSearchdropdown(t,"FSM","WORK_ORDER_FINAL_STATUS"),await c.bindleftCommonSearchdropdown(t,"FSM","FSM_TICKETING_STATUS")},methods:{paramsToObject(t){const e={};for(const[a,s]of t)e[a]=s;return e},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,this.isPaged=1,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},FetchData:async function(){var t=this,e="";this.isBlank(this.searchCondition)||(e+=this.searchCondition),"undefined"!=typeof t.conditionForInstantSearch&&(e=vm.conditionForInstantSearch);var a=`pageSize=${t.PageSize}&pageNum=${t.PageNumber}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&searchCondition=${e}`;await o["a"].FetchTicketStatusList(a).then((function(e){""!=e.data&&null!=e.data?(t.Headers.forEach(t=>{t.settings=null,"status_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),e.data.result.data.length>0?(t.MapStatusListing=e.data.result.data,t.TotalRecords=e.data.result.data[0].total_records,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.listheaderbuttons[1].isdisabled=!0,t.noRecord=!1):(t.MapStatusListing=e.data.result.data,t.noRecord=!0,t.TotalRecords=0)):(t.noRecord=!0,t.Headers=[],t.TotalRecords=0),setTimeout((function(){t.ResponsiveDataTable("tablelistingdata")}),500)}))},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"openMapStatus":this.openAddMapStatus(null);break;case"commonDeleteData":this.commonDeleteData();break}},getStatusClassList:function(t){var e="";switch(t){case"Active":e="px-2 text-center bg-success text-white d-block";break;case"Inactive":e="px-2 text-center bg-danger text-white d-block";break;default:e=""}return e},openAddMapStatus:function(t){void 0==t&&(t=0),this.mapStatusId=t,this.AddMapStatusPopup=!this.AddMapStatusPopup},commonDeleteData:function(t){var e=this,a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Resource"),(function(){var t={ids:a,companyId:e.companyId,userId:e.user_id,moduleName:"FSM",refCode:"TICKET_MAP_STATUS"},s=JSON.stringify(t);o["a"].deleteActivityData(s).then(t=>{var a="";"Success"==t.data[0].Status?($("[id^='chkAll']").prop("checked",!1).removeAttr("checked"),$("[id^='DeleteItem']").removeClass("enable").addClass("disabled"),$(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.FetchData(),a=e.ShowAlert(e.$t("DeletedSuccess",[e.$t("StatusMapping")]),"Success",!0,e.$t("Alert"))):a=e.ShowAlert(e.$t("DeletedError",[e.$t("StatusMapping")]),"failure",!0,e.$t("Alert")),setTimeout((function(){a.modal("hide")}),2e3)})})):alert(e.$t("Selectanyrecordtodelete"))},UpdateStatus:async function(t){var e=this;t="Active"==t?1001:1002;var a="";$(".chkItems:checkbox:checked").not("[id^='chkAll']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})),a.length>0&&e.confirmR(e.$t("Confirm"),!0,e.$t("update")+"  "+e.$t("status"),(function(){var s=`id=${a}&status_id=${t}&isFor=group`;o["a"].updatestatus(s).then(t=>{1==t.data&&($(".chkItems:checkbox:checked").prop("checked",!1).removeAttr("checked"),e.FetchData())})}))}}},T=f,_=Object(h["a"])(T,s,i,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d0af277.js.map