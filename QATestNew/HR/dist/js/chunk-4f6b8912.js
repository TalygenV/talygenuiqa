(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f6b8912","chunk-2d0c1909"],{4049:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Policy",SubModuleCode:"",RenderRowActionMethod:t.renderActions,IdentityColumn:"id",HeaderText:t.$t("Policies"),listType:["List"],ListData:t.PolicyData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,TotalRecords:t.TotalRecord,SearchFields:t.leftSearchFields,ListDataCallBackFunction:t.FetchData,showCheckBox:!0,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{LeftsearchButtonClick:t.leftCommonSearch,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["start_date"==i.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action tourguide_a"},[t._v(" "+t._s(t.$options.filters.formatDate(i.row.start_date))+" ")])]:t._e(),"status"==i.column.COLUMN_NAME?[1001==i.row.status?a("span",{class:t.getStatusClassList(i.row.status,"status")},[t._v(" "+t._s("Active")+" ")]):t._e(),1002==i.row.status?a("span",{class:t.getStatusClassList(i.row.status,"status")},[t._v(" "+t._s("InActive")+" ")]):t._e()]:t._e(),"ProbationPeriod"==i.column.COLUMN_NAME?[a("a",{staticClass:"action-link",attrs:{title:"Probation Period View",href:"javascript:;"},on:{click:function(e){return t.ProbationNotice(i.row.id,"0","ProbationPeriod")}}},[a("em",{staticClass:"fa fa-file-text text-primary action-icon"}),a("span",{staticClass:"text"})])]:t._e(),"NoticePeriod"==i.column.COLUMN_NAME?[a("a",{staticClass:"action-link",attrs:{title:"Notice Period View",href:"javascript:;"},on:{click:function(e){return t.ProbationNotice(i.row.id,"1","NoticePeriod")}}},[a("em",{staticClass:"fa fa-wpforms text-info action-icon"}),a("span",{staticClass:"text"})])]:t._e()]}}])}),t.ShowManagePeriodDetail?a("ManagePeriodDetail",{attrs:{ModalId:t.ModalId,FromType:t.FromType,Name:t.Name}}):t._e(),t.ShowAddPolicy?a("AddPolicy"):t._e()],1)},o=[],s=(a("14d9"),a("9769"));let n=[{title:"Add Policy",iconClass:"fa-plus",callbackfunction:"AddPolicy",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!1,id:"AddPolicy"},{title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",additionalClass:"",isdisabled:!0,isvisible:!0,checkPrivilege:!1,id:"DeleteMultiple",isEnabledOnSelectedRow:!0}],r=[{fieldName:"Policy Name",fieldType:"text",fieldIcon:"fa fa fa-file",fieldSearchConditionName:[""],isSearch:!1,paramName:"search",value:"",listOptions:[]},{fieldName:"DATE RANGE",fieldType:"date-range",fieldIcon:"fa fa-calendar",fieldSearchConditionName:["Policy.start_date|Policy.start_date"],isSearch:!1,datePickerConfig:{useCurrent:!0,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}},secondDatePickerConfig:{useCurrent:!1,showClear:!0,showClose:!0,allowInputToggle:!1,minDate:!0,maxDate:!0,widgetPositioning:{horizontal:"right",vertical:"bottom"}}}];var l={buttons:n,leftsearchSchema:r},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":t.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[t.ProbationPeriodDetail?a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("ProbationPeriodDetail")))]):t._e(),t.NoticePeriodDetail?a("h4",{staticClass:"modal-title"},[t._v(t._s(t.$t("NoticePeriodDetail")))]):t._e(),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("tg-list",{attrs:{IsShowAction:!1,ModuleName:"Hiring",SubModuleCode:"HR_JOB",RenderRowActionMethod:t.renderActions,IdentityColumn:"policy_id",HeaderText:t.$t(""),listType:["List"],ListData:t.ItemData,HeaderData:t.Headers,TotalRecords:t.TotalRecord,ListDataCallBackFunction:t.FetchData,showCheckBox:!1,SortExp:t.SortExp,SortBy:t.SortBy,NorecordfoundText:t.$t("NoRecordfound"),CurrentPageNumber:t.PageNumber},on:{ActionButtonClick:t.actionButtonClick,PagerButtonClick:t.pagerMethod,HeaderButtonClick:t.commonHeaderButtonClick,SortdataButtonClick:t.sortdata,LeftsearchButtonClick:t.leftCommonSearch},scopedSlots:t._u([{key:"slotdata",fn:function(e){var i=e.data;return["AssociatedEmployeeCount"==i.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action"},[a("a",{staticClass:"text-dark"},[a("em",{staticClass:"fa fa-user"}),a("span",{staticClass:"noti-circle noti-blue"},[t._v(t._s(i.row.AssociatedEmployeeCount))])])])]:t._e(),"duration_type_id"==i.column.COLUMN_NAME?[a("td",{staticClass:"text-center single-action"},[a("span",{},[t._v(t._s(i.row.duration)+" "+t._s(i.row.duration_type_id))])])]:t._e()]}}])})],1),a("div",{staticClass:"modal-body"},[a("dynamic-form",{attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)])])])],1)},c=[],u={props:{ModalId:{type:Object,required:!0},FromType:{type:Object,required:!0},Name:{type:Object,required:!0}},data(){return{NoticePeriodDetail:!1,ProbationPeriodDetail:!1,isLoading:!1,ItemData:[],TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,Headers:[{COLUMN_NAME:"department_name",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Department",DISPLAY_ORDER:1},{COLUMN_NAME:"duration_type_id",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Duration",DISPLAY_ORDER:2},{COLUMN_NAME:"days_type_id",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Days",DISPLAY_ORDER:3},{COLUMN_NAME:"AssociatedEmployeeCount",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Employee Assigned",DISPLAY_ORDER:4}],buttons:[{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},async created(){var t=this;await t.FetchData(),"ProbationPeriod"==t.Name?t.ProbationPeriodDetail=!0:"NoticePeriod"==t.Name&&(t.NoticePeriodDetail=!0)},methods:{leftCommonSearch:function(t){},pagerMethod:function(t){},sortdata:function(t){},commonHeaderButtonClick:function(t){},actionButtonClick:function(t,e){},renderActions:function(t){},Close:function(){this.$parent.ShowManagePeriodDetail=!1},FetchData:async function(){var t=this,e=`Id=${t.ModalId}&periodTpye=${t.FromType}`;await s["a"].GetProbationNoticePeriod(e).then(e=>{e.data&&e.data.length>0&&(t.Headers.forEach(t=>{t.settings=null,"AssociatedEmployeeCount"==t.COLUMN_NAME&&(t.settings={isInSlot:!0}),"duration_type_id"==t.COLUMN_NAME&&(t.settings={isInSlot:!0})}),t.ItemData=e.data)})}}},p=u,m=a("2877"),_=Object(m["a"])(p,d,c,!1,null,null,null),h=_.exports,y=a("471a"),f={components:{ManagePeriodDetail:h,AddPolicy:y["default"]},data(){return{isLoading:!1,ShowAddPolicy:!1,ShowManagePeriodDetail:!1,PolicyData:[],listheaderbuttons:l.buttons,leftSearchFields:l.leftsearchSchema,TotalRecord:0,SortExp:"",SortBy:"",PageNumber:1,PageSize:10,TotalPages:0,CurrentPage:1,fromDate:"",toDate:"",ModalId:0,FromType:"",Name:"",PolicyId:"",Headers:[{COLUMN_NAME:"name",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Policy Name",DISPLAY_ORDER:1},{COLUMN_NAME:"description",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Description",DISPLAY_ORDER:2},{COLUMN_NAME:"start_date",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Start Date",DISPLAY_ORDER:3},{COLUMN_NAME:"ProbationPeriod",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Probation Period",DISPLAY_ORDER:4},{COLUMN_NAME:"NoticePeriod",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Notice Period",DISPLAY_ORDER:5},{COLUMN_NAME:"status",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Status",DISPLAY_ORDER:6}]}},async created(){var t=this;await t.FetchData()},methods:{AddPolicy:function(t){this.PolicyId=t,this.ShowAddPolicy=!0,this.$router.push({name:"AddPolicy",params:{reqfrom:"Policy/AddPolicy",id:t}})},ProbationNotice:function(t,e,a){var i=this;i.ModalId=t,i.FromType=e,i.Name=a,i.ShowManagePeriodDetail=!0},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},getStatusClassList:function(t){var e="";switch(t){case 1001:e="px-2 text-center text-white d-block bg-success";break;case 1002:e="px-2 text-center text-white d-block bg-danger";break;default:e=""}return e},renderActions:function(){},leftCommonSearch:function(t){var e=this;if(this.PageNumber=t.PageNumber,this.isPaged=1,""!=t.searchConditionJson)if("undefined"!=typeof t.searchCondition){let e=t.searchConditionJson,a=e.split("=")[1];this.searchCondition=a}else this.searchCondition="";else if(""!=t.searchCondition){const a=t.searchCondition,i=/(\d{4}-\d{2}-\d{2})/g,o=a.match(i);e.fromDate=o[0],e.toDate=o[1]}else this.searchCondition="",e.fromDate="",e.toDate="";this.FetchData()},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"commonDeleteData":this.commonDeleteData();break;case"AddPolicy":this.AddPolicy(0,"AddPolicy");break}},commonDeleteData:function(t){var e=this,a="";e.isLoading=!0,null==t?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=t,null!=a?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Group"),(function(){var t=`ids=${a}&tablename=TALYGEN_HR_POLICY&key=id`;s["a"].DeleteItems(t).then((function(t){200==t.status?(e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Policy")]),"success",!0,e.$t("Alert")),e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Policy")]),"Success",!0,e.$t("Alert"))}))})):e.ShowAlert(e.$t("Selectanyrecordtodelete")),e.isLoading=!1},clickEventOfColumn:function(t,e){var a=this;"name"==e.COLUMN_NAME&&a.$router.push({name:"AddPolicy",params:{id:t.id}})},FetchData:async function(){var t=this,e=`fromDate=${t.fromDate}&toDate=${t.toDate}&sortBy=${t.SortBy}&sortExp=${t.SortExp}&pageSize=${t.PageSize}&pageNum=${t.PageNumber}&statusIds=`;t.isBlank(this.searchCondition)||(e+="&search="+this.searchCondition),await s["a"].PolicyListing(e).then(e=>{e.data&&e.data.length>0?(t.Headers.forEach(e=>{e.settings=null,"start_date"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"status"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"ProbationPeriod"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"NoticePeriod"==e.COLUMN_NAME&&(e.settings={isInSlot:!0}),"name"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn,formatter:t.columnDataFormatter})}),t.PolicyData=e.data,t.TotalRecord=e.data[0].TOTAL_RECORD,t.TotalPages=Math.ceil(t.TotalRecord/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecords=!1):(t.PolicyData=[],t.TotalRecords=0,t.noRecords=!0),document.querySelector('input[placeholder="DateFrom"]').setAttribute("placeholder","Date From"),document.querySelector('input[placeholder="DateTo"]').setAttribute("placeholder","Date To")})}}},v=f,C=Object(m["a"])(v,i,o,!1,null,null,null);e["default"]=C.exports},"471a":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader",{attrs:{"is-visible":t.isLoading}}),a("section",{staticClass:"main-content"},[a("div",{ref:"hellp",attrs:{id:"divMaindealData"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 padding-t_8"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[t._v(t._s(t.$t("AddPolicy")))]),a("span",{staticClass:"float-right"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:t.$t("BacktoList")},on:{click:t.Close}},[a("em",{staticClass:"fa fa-angle-double-left pr-2",attrs:{"aria-hidden":"true"}}),a("br"),t._v(t._s(t.$t("BacktoList"))+" ")])])])])]),a("div",{staticClass:"border p-3"},[a("dynamic-form",{ref:"AddEmployee",attrs:{buttons:t.buttons,schema:t.FormSchema,mandatorytext:t.MandatoryString},on:{OnSubmit:t.onSubmit},scopedSlots:t._u([{key:"tgslot-Probation_Period",fn:function(e){e.data;return[a("div",{staticClass:"col-lg-12 mt-3"},[a("div",{staticClass:"heading-border mb-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("ProbationPeriod")))]),a("small",{staticClass:"float-right"},[a("a",{attrs:{href:"javascript:;",id:"ProbationPeriod"},on:{click:t.addNewProbation}},[a("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNew")))])])])])]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dataTable no-footer",attrs:{id:"tblProbationPeriod"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{"min-width":"150px !important;"}},[a("span",{staticClass:"reqfield"},[t._v(t._s(t.$t("Department")))])]),a("th",{attrs:{"min-width":"150px !important;"}},[a("span",{staticClass:"reqfield"},[t._v(t._s(t.$t("Duration")))])]),a("th",{attrs:{"min-width":"150px !important;"}},[a("span",[t._v(t._s(t.$t("Days")))])]),a("th",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",t._l(t.probations,(function(e,i){return a("tr",{key:i},[a("td",[a("Field",{attrs:{name:"Department",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.department_id,expression:"probation.department_id"}],class:{"form-control valid":!0,"is-invalid":o[0]},on:{change:[function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"department_id",a.target.multiple?i:i[0])},function(a){return t.probationDepartmentChange(e)}]}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.DepartmentData,(function(e,i){return a("option",{key:i,domProps:{value:String(e.value)}},[t._v(" "+t._s(t.$t(e.name)))])}))],2),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Department"}},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})],1),a("td",[a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"Duration",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.duration,expression:"probation.duration"}],class:{"form-control txtFirstValue":!0,"is-invalid":o[0]},attrs:{type:"text",autocomplete:"off"},domProps:{value:e.duration},on:{input:[function(a){a.target.composing||t.$set(e,"duration",a.target.value)},function(a){return t.checkLength(e)}],keypress:function(e){return t.check(e)}}}),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"Duration"}},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)}),a("span",{staticClass:"input-group-text p-0 border-0 bg-white"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.duration_type,expression:"probation.duration_type"}],staticClass:"nosearch form-control",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"duration_type",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("Month/s")))]),a("option",{attrs:{value:"2"}},[t._v(t._s(t.$t("Day/s")))])])])],1),a("span",{staticClass:"field-validation-valid",staticStyle:{display:"none","font-weight":"normal","font-size":"90%"},attrs:{id:"messageProbationDuration"}})]),a("td",{staticClass:"align-top"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.days_type,expression:"probation.days_type"}],staticClass:"form-control",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"days_type",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("Calendar")))]),a("option",{attrs:{value:"2"}},[t._v(t._s(t.$t("Business")))])])]),a("td",{staticClass:"single-action text-center"},[a("a",{directives:[{name:"show",rawName:"v-show",value:i>0,expression:"index > 0"}],staticClass:"delete-row",attrs:{title:"Delete"},on:{click:function(e){return t.deleteProbation(i)}}},[a("em",{staticClass:"fa fa-trash text-danger"})])])])})),0)])])])])]}},{key:"tgslot-Notice_period",fn:function(e){e.data;return[a("div",{staticClass:"col-lg-12 mt-3"},[a("div",{staticClass:"heading-border mt-3 mb-2"},[a("h5",{staticClass:"h5"},[a("span",[t._v(t._s(t.$t("NoticePeriod")))]),a("small",{staticClass:"float-right"},[a("a",{attrs:{href:"javascript:;",id:"NoticePeriod"},on:{click:t.addNewNotice}},[a("em",{staticClass:"fa fa-plus pr-2"}),t._v(t._s(t.$t("AddNew")))])])])])]),a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-bordered dataTable no-footer",attrs:{id:"tblNoticePeriod"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",{attrs:{"min-width":"150px !important;"}},[a("span",{staticClass:"reqfield"},[t._v(t._s(t.$t("Department")))])]),a("th",{attrs:{"min-width":"150px !important;"}},[a("span",{staticClass:"reqfield"},[t._v(t._s(t.$t("Duration")))])]),a("th",{attrs:{"min-width":"150px !important;"}},[a("span",[t._v(t._s(t.$t("Days")))])]),a("th",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$t("Action")))])])])]),a("tbody",t._l(t.notices,(function(e,i){return a("tr",{key:i},[a("td",[a("Field",{attrs:{name:"department",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.errors;return[a("select",{directives:[{name:"model",rawName:"v-model",value:e.department_id,expression:"notice.department_id"}],class:{"form-control valid":!0,"is-invalid":o[0]},on:{change:[function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"department_id",a.target.multiple?i:i[0])},function(a){return t.noticeDepartmentChange(e)}]}},[a("option",{attrs:{value:""}},[t._v(t._s(t.$t("Select")))]),t._l(t.DepartmentData,(function(e,i){return a("option",{key:i,domProps:{value:String(e.value)}},[t._v(" "+t._s(t.$t(e.name)))])}))],2),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"department"}},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)})],1),a("td",[a("div",{staticClass:"input-group"},[a("Field",{attrs:{name:"duration",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(i){var o=i.errors;return[a("input",{directives:[{name:"model",rawName:"v-model",value:e.duration,expression:"notice.duration"}],class:{"form-control txtFirstValue":!0,"is-invalid":o[0]},attrs:{type:"text",autocomplete:"off"},domProps:{value:e.duration},on:{input:[function(a){a.target.composing||t.$set(e,"duration",a.target.value)},function(a){return t.checkLength(e)}],keypress:function(e){return t.check(e)}}}),o[0]?a("span",{staticClass:"invalid-feedback d-block",attrs:{name:"duration"}},[t._v(t._s(o[0]))]):t._e()]}}],null,!0)}),a("span",{staticClass:"input-group-text p-0 border-0 bg-white"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.duration_type,expression:"notice.duration_type"}],staticClass:"nosearch form-control",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"duration_type",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("Month/s")))]),a("option",{attrs:{value:"2"}},[t._v(t._s(t.$t("Day/s")))])])])],1),a("span",{staticClass:"field-validation-valid",staticStyle:{display:"none","font-weight":"normal","font-size":"90%"},attrs:{id:"messageNoticeDuration"}})]),a("td",{staticClass:"align-top"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.days_type,expression:"notice.days_type"}],staticClass:"form-control",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"days_type",a.target.multiple?i:i[0])}}},[a("option",{attrs:{value:"1"}},[t._v(t._s(t.$t("Calendar")))]),a("option",{attrs:{value:"2"}},[t._v(t._s(t.$t("Business")))])])]),a("td",{staticClass:"single-action text-center"},[a("a",{directives:[{name:"show",rawName:"v-show",value:i>0,expression:"index > 0"}],staticClass:"delete-row",attrs:{title:"Delete"},on:{click:function(e){return t.deleteNotice(i)}}},[a("em",{staticClass:"fa fa-trash text-danger"})])])])})),0)])])])])]}}])})],1)])])],1)},o=[],s=(a("14d9"),a("9769")),n={data(){return{probations:[{department_id:"",duration:"",duration_type:"1",days_type:"1"}],notices:[{department_id:"",duration:"",duration_type:"1",days_type:"1"}],isLoading:!1,DepartmentData:[],CompanyId:null,Userid:null,policyModels:[],MandatoryString:"Fields marked with an asterisk (*) are mandatory.",FormSchema:[{layoutType:"triple",Data:[{astype:"TextField",label:this.$t("PolicyName"),name:"PolicyName",value:"",placeholder:"Policy Name",validationRules:{required:!0,max:100}},{astype:"DateField",label:this.$t("StartDate"),name:"StartDate",value:"",placeholder:"Enter Start Date",config:{options:[],minDate:new Date},validationRules:{required:!0},visibility:!0}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",validationRules:""}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Probation_Period",value:"",visibility:!0,validationRules:{required:!1}}]},{layoutType:"single",Data:[{astype:"SlotField",name:"Notice_period",value:"",visibility:!0,validationRules:{required:!1}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",isVisible:!0},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.Close}]}},created:async function(){var t=this;t.CompanyId=this.GetUserInfo.CompanyId,t.Userid=this.GetUserInfo.ID,t.PolicyId=this.$route.params.id,await t.ShowDepartment(),t.PolicyId>0&&await t.GetPolicyDataById()},methods:{Close:function(){this.$router.push({name:"PolicyListing"})},GetPolicyDataById:async function(){var t=this,e="id="+t.PolicyId;await s["a"].GetPolicyDataById(e).then((function(e){if(e.data){t.FormSchema[0].Data[0].value=e.data[0].name,t.FormSchema[0].Data[1].value=e.data[0].start_date,t.FormSchema[1].Data[0].value=e.data[0].description;var a=0;e.data.forEach((e,i)=>{0==i&&(t.probations.splice(i,1),t.notices.splice(i,1)),0==e.period_type?(t.probations.push({department_id:"",duration:"",duration_type:"1",days_type:"1"}),t.probations[i].department_id=e.department_id,t.probations[i].duration=e.duration,t.probations[i].duration_type=e.duration_type_id,t.probations[i].days_type=e.days_type_id):(t.notices.push({department_id:"",duration:"",duration_type:"1",days_type:"1"}),t.notices[a].department_id=e.department_id,t.notices[a].duration=e.duration,t.notices[a].duration_type=e.duration_type_id,t.notices[a].days_type=e.days_type_id,a++)})}}))},ShowDepartment:async function(){var t=this;t.DepartmentData=[];var e="ids=&moduleName=&type=DEPARTMENT_TYPE&search=&refId=";await s["a"].GetDDLData(e).then((function(e){e.data.DATA.length>0&&(t.FormSchema[0].Data[1].config.options=e.data.DATA,t.DepartmentData=e.data.DATA),t.$refs.AddEmployee.UpdateKeyValue()}))},addNewProbation(){this.probations.push({department_id:"",duration:"",duration_type:"1",days_type:"1"})},addNewNotice(){this.notices.push({department_id:"",duration:"",duration_type:"1",days_type:"1"})},deleteProbation(t){t>0&&this.probations.splice(t,1)},deleteNotice(t){t>0&&this.notices.splice(t,1)},probationDepartmentChange(t){},noticeDepartmentChange(t){},checkLength(t){this.inputId;const e=t.duration,a=e.length;a>3&&(t.duration=e.substring(0,3))},check:function(t){const e=t.keyCode;(e<48||e>57)&&t.preventDefault()},onSubmit(t,e){var a=this,i="";i=a.PolicyId>0?"UPDATE":"INSERT";var o=t.PolicyName,n=t.Description,r=t.StartDate;a.probations.forEach(t=>{var e={policy_id:a.PolicyId,name:o,description:n,start_date:r,status:1001,company_id:a.CompanyId,user_id:a.Userid,department_id:t.department_id,duration_type_id:t.duration_type,duration:t.duration,days_type_id:t.days_type,period_type:0,TYPE_VAL:i,DurationType:t.duration_type,DaysType:t.days_type};a.policyModels.push(e)}),a.notices.forEach(t=>{var e={policy_id:a.PolicyId,name:o,description:n,start_date:r,status:1001,company_id:a.CompanyId,user_id:a.Userid,department_id:t.department_id,duration_type_id:t.duration_type,duration:t.duration,days_type_id:t.days_type,period_type:1,TYPE_VAL:"INSERT",DurationType:t.duration_type,DaysType:t.days_type};a.policyModels.push(e)});var l=a.policyModels,d=JSON.stringify(l);s["a"].AddEditPolicy(d).then(t=>{1==t.data[0].result?(a.ShowAlert(a.$t("AddedSuccess",[a.$t("Policy")]),"success",!0,a.$t("Alert")),a.Close(),a.$parent.FetchData()):-5==t.data[0].result?(a.ShowAlert(a.$t("UpdatedSuccess",[a.$t("Policy")]),"success",!0,a.$t("Alert")),a.Close(),a.$parent.FetchData()):(a.ShowAlert(a.$t("AddedError",[a.$t("Policy")]),"failure",!0,a.$t("Alert")),a.Close())})}}},r=n,l=a("2877"),d=Object(l["a"])(r,i,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-4f6b8912.js.map