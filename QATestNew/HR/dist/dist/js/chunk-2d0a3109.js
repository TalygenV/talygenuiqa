(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a3109"],{"011c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-content"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{attrs:{id:"divMainLeadData"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 padding-t_8"},[a("div",{staticClass:"theme-primary partition-full"},[a("span",{staticClass:"p-name text-white"},[e._v(e._s(e.$t("RequestEmployee")))]),a("span",{staticClass:"float-right"},[a("a",{staticClass:"p-action-btn text-white",attrs:{href:"javascript:;",title:e.$t("BacktoList")},on:{click:e.Close}},[a("em",{staticClass:"fa fa-angle-double-left pr-2",attrs:{"aria-hidden":"true"}}),a("br"),e._v(e._s(e.$t("BacktoList"))+" ")])])])])]),a("div",{staticClass:"border p-3"},[a("Form",{ref:"form"},[a("dynamic-form",{ref:"RequestEmployeeForm",attrs:{buttons:e.buttons,schema:e.FormSchema,mandatorytext:e.MandatoryString},on:{OnSubmit:e.onSubmit},scopedSlots:e._u([{key:"tgslot-divLicenses",fn:function(t){t.data;return[a("div",{staticClass:"listing"},[a("div",{staticClass:"table-responsive table-wrapper-scroll-y my-custom-scrollbar"},[a("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"}},[a("thead",{staticClass:"thead-bg"},[a("tr",[a("th",[a("div",{staticClass:"text-center"},[a("span",{staticClass:"textaligncenter",attrs:{href:"javascript:;"}},[e._v("Select Module")])])]),a("th",[a("span",[e._v("Serial Number")])]),a("th",[a("span",[e._v("License Name")])]),a("th",[a("span",[e._v("Number of Users")])]),a("th",[a("span",[e._v("From Date")])]),a("th",[a("span",[e._v("To Date")])]),a("th",[a("span",[e._v("Request Mode")])]),a("th",[a("span",[e._v("Info Mode")])])])]),a("tbody",e._l(e.divLicensesData,(function(t,i){return a("tr",{key:i,staticClass:"trrowdata"},[a("td",{staticClass:"text-center"},[a("label",{staticClass:"form-check form-check-inline"},[a("div",{staticClass:"custom-control custom-checkbox custom-control-inline"},[a("input",{staticClass:"chkItems custom-control-input",attrs:{name:"Checkbox_"+t.AVAILABLE_LICENSE_ID,id:"Checkbox_"+t.AVAILABLE_LICENSE_ID,type:"checkbox","data-licenseid":t.AVAILABLE_LICENSE_ID,"data-moduleMasterID":t.MODULE_MASTER_ID}}),a("label",{staticClass:"custom-control-label",attrs:{for:"Checkbox_"+t.AVAILABLE_LICENSE_ID}})])])]),a("td",{staticClass:"textaligncenter"},[e._v(e._s(i+1))]),a("td",[e._v(e._s(t.MODULE_MASTER_NAME))]),a("td",[a("Field",{attrs:{name:"txtNoOfUsers"+t.REQUEST_QUANTITY}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.REQUEST_QUANTITY,expression:"item.REQUEST_QUANTITY"}],class:{"form-control":!0},attrs:{type:"text",name:"txtNoOfUsers"+t.REQUEST_QUANTITY},domProps:{value:t.REQUEST_QUANTITY},on:{input:function(a){a.target.composing||e.$set(t,"REQUEST_QUANTITY",a.target.value)}}})])],1),a("td",{staticClass:"overflow-visible"},[a("Field",{attrs:{name:"txtFromDate"+t.AVAILABLE_LICENSE_ID},scopedSlots:e._u([{key:"default",fn:function(i){i.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"txtFromDate"+t.AVAILABLE_LICENSE_ID,value:t.FROM_DATE},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,s=t.inputEvents,o=t.togglePopover;return[a("input",e._g({staticClass:"form-control",domProps:{value:i}},s)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.FROM_DATE,callback:function(a){e.$set(t,"FROM_DATE",a)},expression:"item.FROM_DATE"}})]}}],null,!0)})],1),a("td",{staticClass:"overflow-visible"},[a("Field",{attrs:{name:"txtFromDate"+t.AVAILABLE_LICENSE_ID},scopedSlots:e._u([{key:"default",fn:function(i){i.errors;return[a("v-date-picker",{staticClass:"input-group",attrs:{popover:e.popover,"minute-increment":5,masks:e.masks,name:"txtFromDate"+t.AVAILABLE_LICENSE_ID,value:t.TO_DATE},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.inputValue,s=t.inputEvents,o=t.togglePopover;return[a("input",e._g({staticClass:"form-control",domProps:{value:i}},s)),a("div",{staticClass:"input-group-append",on:{click:function(e){return o()}}},[a("span",{staticClass:"input-group-text"},[a("em",{staticClass:"fa fa-calendar"})])])]}}],null,!0),model:{value:t.TO_DATE,callback:function(a){e.$set(t,"TO_DATE",a)},expression:"item.TO_DATE"}})]}}],null,!0)})],1),a("td",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"chkLicense form-check-input text-center custom-control-input",attrs:{type:"checkbox",name:"chk_"+i,id:"chk_"+i}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chk_"+i}},[e._v("Sharing")])])]),a("td",[a("div",{staticClass:"custom-control custom-checkbox"},[a("input",{staticClass:"chkLicense form-check-input text-center custom-control-input",attrs:{type:"checkbox",name:"chkk_"+i,id:"chkk_"+i}}),a("label",{staticClass:"custom-control-label universal-custom-control-label pt-1",attrs:{for:"chkk_"+i}},[e._v("Visible")])])])])})),0)])])])]}}])})],1)],1)]),e.isAssociateCompany?a("AssociateCompany"):e._e()],1)},s=[],o=(a("14d9"),a("9769")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-popups"},[a("loader",{attrs:{"is-visible":e.isLoading}}),a("div",{staticClass:"modal d-block"},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header theme-primary partition-full  d-flex"},[a("h4",{staticClass:"modal-title"},[e._v(e._s(e.$t("AssociateCompanies")))]),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:e.Close}},[a("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),a("div",{staticClass:"modal-body"},[a("dynamic-form",{ref:"AssociateCompanies",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)])])])],1)},r=[],l={data(){return{isLoading:!1,FormSchema:[{layoutType:"single",Data:[{astype:"CustomSelectField",label:this.$t("SelectCompanies"),mode:"tag",name:"SelectCompanies",value:"",config:{options:[]},placeholder:this.$t("Select Companies"),validationRules:{required:!0,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Associate"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Close",onClick:this.Close}]}},created:function(){this.BindCompanyDropdown()},methods:{BindCompanyDropdown:function(){var e=this;o["a"].BindCompanyDropdown().then(t=>{if(t.data.result.length>0){var a=t.data.result;a.forEach((t,a)=>{var i={name:t.company_name,value:t.company_id};e.FormSchema[0].Data[0].config.options.push(i)}),e.$refs.AssociateCompanies.UpdateKeyValue()}})},Close:function(){this.$parent.isAssociateCompany=!1},onSubmit(e,t){var a=e.SelectCompanies.map((function(e){return e.value})).join(","),i="companies="+a;o["a"].AssociateCompanies(i).then(e=>{e.data.result.length>0&&e.data.result[0].value>0&&(this.Close(),this.$parent.GetLinkedCompanyDetail())})}}},c=l,u=a("2877"),m=Object(u["a"])(c,n,r,!1,null,null,null),d=m.exports,p={components:{AssociateCompany:d},data(){return{isLoading:!1,divLicensesData:[],FormSchema:[{layoutType:"triple",Data:[{astype:"RadioField",label:this.$t("CompanyType"),name:"CompanyType",value:"Resource",placeholder:"",config:{options:[{name:"Company",value:"Resource"},{name:"Vendor",value:"Service"}],onChange:this.LoadCompanies,showAddIcon:!1},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Linkedcompany"),name:"Linkedcompany",value:"",config:{options:[],showAddIcon:!0,onChange:this.ddlLinkedCompany,onAddButtonClick:this.AssociateCompany},placeholder:this.$t("Select Linked Company"),validationRules:{required:!0}},{astype:"RadioField",label:this.$t("RequestType"),name:"RequestType",value:"",placeholder:"",visibility:!1,config:{options:[],showAddIcon:!1,onChange:this.LoadServices},validationRules:{required:!0}},{astype:"RadioField",label:this.$t("ShareYourLicenseMessage"),name:"ShareYourLicenseMessage",value:"Resource",placeholder:"",visibility:!1,config:{options:[{name:"Yes",value:"Yes"},{name:"No",value:"No"}],onChange:this.ShareLicenseRadio,showAddIcon:!1},validationRules:{required:!0}},{astype:"SelectField",label:this.$t("Project"),name:"Project",value:"",config:{options:[],showAddIcon:!1,onChange:this.ddlProject},placeholder:this.$t("Select Project"),validationRules:{required:!0}},{astype:"SelectField",label:this.$t("SelectService"),name:"SelectService",visibility:!1,value:"",config:{options:[],showAddIcon:!1},placeholder:this.$t("Select Service"),validationRules:{required:!1}},{astype:"TextField",label:this.$t("ResourceText"),name:"ResourceText",visibility:!1,value:"",validationRules:{required:!0}}]},{layoutType:"single",Data:[{astype:"SlotField",name:"divLicenses",value:"",visibility:!1,validationRules:""}]},{layoutType:"single",Data:[{astype:"TextAreaField",label:this.$t("Description"),name:"Description",value:"",visibility:!1,validationRules:{required:!0}}]}],MandatoryString:"Fields marked with an asterisk (*) are mandatory.",buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-paper-plane pr-2'></i>Send Request",isVisible:!1}],vendorId:null,projectId:null,RequestID:null,isAssociateCompany:!1,Companytype:null,Requesttype:null,ProjectId:null,linkedcompanyID:null,IsShared:null,Servicelist:[],Requestquantity:[]}},created:function(){var e=this;e.RequestID=e.$route.params.RequestID,e.linkedcompanyID=e.$route.params.linkedcompanyID,null!=e.RequestID&&(e.GetRequestData(),e.SearchLicense()),e.GetLinkedCompanyDetail(),e.GetProjectList()},methods:{AssociateCompany:function(){this.isAssociateCompany=!0},GetRequestData:function(){var e=this,t="RequestID="+e.RequestID;o["a"].GetRequestData(t).then(t=>{if(t.data.result.length>0)if(e.Companytype=t.data.result[0].company_type,e.Requesttype=t.data.result[0].request_type,e.ProjectId=t.data.result[0].PROJECT_ID,e.FormSchema[0].Data[4].value=t.data.result[0].PROJECT_ID,e.FormSchema[0].Data[1].value=t.data.result[0].REQUEST_TO_COMPANY_ID,e.FormSchema[2].Data[0].value=t.data.result[0].DESCRIPTION,e.IsShared=t.data.result[0].is_shared,1==e.Companytype?e.BindCompanyAndVendorList("Company"):e.BindCompanyAndVendorList("Vendor"),2==e.Requesttype&&e.GetCompanySevices("SERVICES"),1==e.Requesttype&&0==e.IsShared&&e.GetCompanySevices("L_NOSHARE"),1==e.Requesttype){var a=[{name:"Resource",value:"Resource"},{name:"Service",value:"Service"}];e.FormSchema[0].Data[2].config.options=a,e.FormSchema[0].Data[2].value="Resource",e.FormSchema[0].Data[3].visibility=!0,e.FormSchema[0].Data[2].visibility=!0,e.FormSchema[1].Data[0].visibility=!0,e.FormSchema[2].Data[0].visibility=!0,e.buttons[0].isVisible=!1,e.IsShared?(e.FormSchema[0].Data[6].visibility=!1,e.FormSchema[0].Data[3].value="Yes"):(e.FormSchema[0].Data[6].visibility=!0,e.FormSchema[2].Data[0].visibility=!1,e.FormSchema[0].Data[3].value="No",e.FormSchema[0].Data[6].value=e.Requestquantity)}else{a=[{name:"Resource",value:"Resource"},{name:"Service",value:"Service"}];e.FormSchema[0].Data[2].config.options=a,e.FormSchema[0].Data[2].value="Service",e.FormSchema[0].Data[0].value="Service",e.FormSchema[0].Data[2].visibility=!0,e.FormSchema[0].Data[5].visibility=!0,e.FormSchema[2].Data[0].visibility=!0,e.buttons[0].isVisible=!0}})},GetCompanySevices:function(e){var t=this,a=`linkedcompanyID=${t.linkedcompanyID}&RequestID=${t.RequestID}&calledFrom=${e}`;o["a"].GetCompanyLicense(a).then(e=>{e.data.result.length>0&&(t.Servicelist=e.data.result[0].SERVICE_ID,t.FormSchema[0].Data[5].value=t.Servicelist,t.Requestquantity=e.data.result[0].REQUEST_QUANTITY,t.ProjectId=t.FormSchema[0].Data[4].value,t.vendorId=t.FormSchema[0].Data[1].value,t.BindServiceOnProjectChange(),t.$refs.RequestEmployeeForm.UpdateKeyValue())})},BindCompanyAndVendorList:function(e){var t=this,a="UserType="+e;o["a"].GetLinkedCompanyDetail(a).then(e=>{if(e.data.result.length>0){var a=e.data.result;a.forEach((e,a)=>{var i={name:e.COMPANY_NAME,value:e.RELATED_COMPANY_ID};t.FormSchema[0].Data[1].config.options.push(i)}),t.$refs.RequestEmployeeForm.UpdateKeyValue()}})},GetProjectList:function(){var e=this;o["a"].GetProjectList().then(t=>{if(t.data.result.length>0){var a=t.data.result;a.forEach((t,a)=>{var i={name:t.project_name,value:t.project_id};e.FormSchema[0].Data[4].config.options.push(i)}),e.$refs.RequestEmployeeForm.UpdateKeyValue()}})},GetLinkedCompanyDetail:function(){var e=this,t="UserType=Company";o["a"].GetLinkedCompanyDetail(t).then(t=>{if(t.data.result.length>0){var a=t.data.result;a.forEach((t,a)=>{var i={name:t.COMPANY_NAME,value:t.RELATED_COMPANY_ID};e.FormSchema[0].Data[1].config.options.push(i)}),e.$refs.RequestEmployeeForm.UpdateKeyValue()}})},LoadCompanies:function(e,t,a){var i=this;i.isLoading=!0,i.FormSchema[0].Data[1].value="",i.FormSchema[0].Data[1].config.options=[];var s="Resource"==t.value?"Company":"Vendor",n="UserType="+s;i.FormSchema[0].Data[2].visibility=!1,i.FormSchema[0].Data[5].visibility=!1,i.FormSchema[1].Data[0].visibility=!1,i.FormSchema[2].Data[0].visibility=!1,i.FormSchema[0].Data[3].visibility=!1,i.FormSchema[0].Data[3].value="",i.buttons[0].isVisible="Vendor"==s,o["a"].GetLinkedCompanyDetail(n).then(e=>{if(e.data.result.length>0){var t=e.data.result;t.forEach((e,t)=>{var a={name:e.COMPANY_NAME,value:e.RELATED_COMPANY_ID};i.FormSchema[0].Data[1].config.options.push(a)}),i.$refs.RequestEmployeeForm.UpdateKeyValue(),i.isLoading=!1}})},ddlLinkedCompany:function(e,t,a){var i=this;if(i.vendorId=t.value,"Resource"==i.FormSchema[0].Data[0].value){var s=[{name:"Resource",value:"Resource"}];i.FormSchema[0].Data[2].visibility=!0,i.FormSchema[0].Data[5].visibility=!0,i.FormSchema[2].Data[0].visibility=!0,i.FormSchema[0].Data[2].config.options=s,i.buttons[0].isVisible=!0}if("Service"==i.FormSchema[0].Data[0].value){s=[{name:"Resource",value:"Resource"},{name:"Service",value:"Service"}];i.FormSchema[0].Data[2].visibility=!0,i.FormSchema[0].Data[5].visibility=!0,i.FormSchema[2].Data[0].visibility=!0,i.FormSchema[0].Data[2].value="Service",i.FormSchema[0].Data[2].config.options=s}i.BindServiceOnProjectChange()},ddlProject:function(e,t,a){var i=this;i.projectId=t.value,i.BindServiceOnProjectChange()},LoadServices:function(e,t,a){var i=this;i.SearchLicense(),i.SetDivData(t.value)},SearchLicense:function(){var e=this,t=`linkedcompanyID=${e.linkedcompanyID}&RequestID=${e.RequestID}&calledFrom=compayLicense`;o["a"].GetCompanyLicense(t).then(t=>{t.data.result.length>0&&(e.divLicensesData=t.data.result)})},ShareLicenseRadio:function(e,t,a){var i=this;"No"==t.value?(i.FormSchema[0].Data[6].visibility=!0,i.FormSchema[1].Data[0].visibility=!1):(i.FormSchema[0].Data[6].visibility=!1,i.FormSchema[1].Data[0].visibility=!0)},SetDivData:function(e){var t=this;(t.FormSchema[0].Data[0].value="Resource")&&(t.FormSchema[0].Data[2].value="Resource")&&(t.FormSchema[1].Data[0].visibility=!0,t.FormSchema[0].Data[3].visibility=!0,t.FormSchema[0].Data[5].visibility=!1,t.FormSchema[0].Data[3].value="Yes")},BindServiceOnProjectChange:function(){var e=this,t=`vendorId=${e.vendorId}&projectId=${e.projectId}`;o["a"].BindVendorServicesByVendorWise(t).then(t=>{if(t.data.result.length>0){var a=t.data.result;a.forEach((t,a)=>{var i={name:t.category_name,value:t.category_id};e.FormSchema[0].Data[5].config.options.push(i)}),e.$refs.RequestEmployeeForm.UpdateKeyValue(),e.isLoading=!1}})},async onSubmit(e,t){var a=this;a.isLoading=!0;t="";var i=0,s=e.CompanyType,n=1,r=e.RequestType,l=1,c="",u=null,m=null;if("Resource"==s?n=1:"Service"==s&&(n=2),"Resource"==r){if(l=1,c=e.ShareYourLicenseMessage,u=!1,"Yes"==c)u=!0;else if("No"==c){if(u=!1,""==e.ResourceText)return a.ShowAlert(a.$t("EnterResource"),"failure",!0,a.$t("Alert")),!1;e.ResourceText}}else if("Service"==r){if(l=2,u="",""==e.SelectService)return a.ShowAlert(a.$t("SelectService"),"failure",!0,a.$t("Alert")),!1;m=e.SelectService,m=m.toString()}var d=`requestLicenses=${t}&linkedcompanyID=${e.Linkedcompany}&description=${e.Description}&RequestId=${a.RequestID}&TotalEmp=${i}&IsShared=${u}&RequestType=${l}&CompanyType=${n}&ServiceVal=${m}&ResourceNumber=${e.ResourceText}&projectId=${e.Project}`;o["a"].SaveRequestEmployee(d).then(e=>{a.isLoading=!1,1==e.data.status?a.Close():a.ShowAlert(a.$t("AddedError",[a.$t("RequestEmployee")]),"failure",!0,a.$t("Alert"))})},Close:function(){this.$router.push({name:"EmployeeSharingList"})}}},v=p,h=Object(u["a"])(v,i,s,!1,null,null,null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-2d0a3109.js.map