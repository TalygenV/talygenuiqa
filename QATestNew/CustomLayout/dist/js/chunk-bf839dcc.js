(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bf839dcc"],{"0b3e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[e("loader",{attrs:{isVisible:t.isLoading}}),e("section",{staticClass:"main-content"},[e("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CustomField",SubModuleCode:"CustomField",LegendArray:[],showCheckBox:!0,IdentityColumn:"CUSTOM_LAYOUT_ID",listType:["List"],HeaderText:t.$t("Custom_Layout"),ListData:t.LayoutListingData,HeaderData:t.Headers,HeaderButtons:t.listheaderbuttons,SearchFields:t.leftSearchFields,NorecordfoundText:t.$t("NoRecordfound"),RenderRowActionMethod:t.renderActions,ListDataCallBackFunction:t.FetchData,TotalRecords:t.TotalRecords,SortExp:t.SortExp,SortBy:t.SortBy},on:{PagerButtonClick:t.pagerMethod,SortdataButtonClick:t.sortdata,ActionButtonClick:t.actionButtonClick,HeaderButtonClick:t.commonHeaderButtonClick,LeftsearchButtonClick:t.leftCommonSearch},scopedSlots:t._u([{key:"slotdata",fn:function({data:a}){return["MODIFY_DATE"==a.column.COLUMN_NAME?[t._v(" "+t._s(t.$filters.formatDate(a.row.MODIFY_DATE))+" ")]:t._e(),"IS_SYSTEM_DEFAULT_TEMPLATE"==a.column.COLUMN_NAME?[e("label",{class:{switch:0==a.row.IS_SYSTEM_DEFAULT_TEMPLATE,"switch disabled":1==a.row.IS_SYSTEM_DEFAULT_TEMPLATE}},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheckDefault",type:"checkbox"},domProps:{checked:a.row.IS_SYSTEM_DEFAULT_TEMPLATE},on:{change:function(e){return t.ChangeTemplateStatus(a.row,e,"Default")}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v("Yes")]),e("span",{staticClass:"slider-no"},[t._v("No")])])])]:t._e(),"IS_ACTIVE_TEMPLATE"==a.column.COLUMN_NAME?[e("label",{class:{switch:!0,"switch disabled":1==a.row.IS_SYSTEM_DEFAULT_TEMPLATE}},[e("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheck",type:"checkbox"},domProps:{checked:a.row.IS_ACTIVE_TEMPLATE},on:{change:function(e){return t.ChangeTemplateStatus(a.row,e,"Active")}}}),e("span",{staticClass:"slider round"},[e("span",{staticClass:"slider-yes"},[t._v("Active")]),e("span",{staticClass:"slider-no"},[t._v("In-Active")])])])]:t._e(),"MODIFY_DATE"==a.column.COLUMN_NAME?[t._v(" "+t._s(t.$filters.formatDate(a.row.LAST_MODIFY_DATE))+" ")]:t._e()]}}])})],1),t.showLayoutPopup?e("Addlayoutpopup",{attrs:{CustomlayoutId:t.CustomlayoutId},on:{closepopup:t.closepopup,refreshlist:t.refreshlist}}):t._e(),t.sharetopopup?e("SharedRoles",{attrs:{CustomlayoutId:t.CustomlayoutId,MODULEID:t.MODULEID,SUBMODULEID:t.SUBMODULEID,LAYOUTNAME:t.LAYOUTNAME,PLATFORM:t.PLATFORM,LAYOUTTYPE:t.LAYOUTTYPE,DESCRIPTION:t.DESCRIPTION,LAYOUTSHARETOID:t.LAYOUTSHARETOID},on:{closepopup:t.closepopup,refreshlist:t.refreshlist}}):t._e()],1)},s=[],l=(a("14d9"),a("9769"));let i=[{title:"Custom Fields",iconClass:"fa-list",callbackfunction:"CustomFieldListing",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{title:"Add Layout",iconClass:"fa-plus",callbackfunction:"AddCustomLayout",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],n=[{fieldName:"LAYOUT NAME",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TCL.LAYOUT_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"MODULE",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TM.MODULE_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Device TYPE",fieldType:"ddl-check",fieldIcon:"fa-folder",fieldSearchConditionName:["TCL.PLATFORM"],isSearch:!1,value:"",listOptions:[]},{fieldName:"LAYOUT TYPE",fieldType:"ddl-check",fieldIcon:"fa-calendar",fieldSearchConditionName:["TCL.LAYOUT_TYPE"],isSearch:!1,value:"",listOptions:[]}],d=[{title:"Preview",callbackfunction:"OpenAddPAge",icon:"fa fa-eye text-success action-icon",additionalSpan:""},{title:"Edit",callbackfunction:"EditCustomLayout",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Share",callbackfunction:"ShareTORole",href:"javascript:void(0)",icon:"fa fa-share-alt text-success action-icon",additionalSpan:""},{title:"Clone",callbackfunction:"CloneCustomLayout",href:"javascript:void(0)",icon:"fa fa-paper-plane text-success action-icon",additionalSpan:""},{title:"Delete",callbackfunction:"DeleteSingleRecord",href:"javascript:void(0)",additionalSpan:"",icon:"fa fa-trash-o",isdisabled:!0,isvisible:!0}],u=[{COLUMN_NAME:"LAYOUT_NAME",DATA_TYPE:"Text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Name",DISPLAY_ORDER:1},{COLUMN_NAME:"LAYOUT_TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Type",DISPLAY_ORDER:2},{COLUMN_NAME:"MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Module Name",DISPLAY_ORDER:3},{COLUMN_NAME:"SUB_MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sub Module",DISPLAY_ORDER:4},{COLUMN_NAME:"LAYOUT_SHARE_TO",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Roles",DISPLAY_ORDER:5},{COLUMN_NAME:"IS_SYSTEM_DEFAULT_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Default",DISPLAY_ORDER:6},{COLUMN_NAME:"IS_ACTIVE_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Template Status",DISPLAY_ORDER:7},{COLUMN_NAME:"PLATFORM",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Device Type",DISPLAY_ORDER:8},{COLUMN_NAME:"MODIFY_DATE",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Device Type",DISPLAY_ORDER:9},{COLUMN_NAME:"SYSTEM_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"System Gernated",DISPLAY_ORDER:10},{COLUMN_NAME:"USER_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"User Defined",DISPLAY_ORDER:11},{COLUMN_NAME:"TOTAL_RECORDS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Total Field",DISPLAY_ORDER:12}];function r(t,e,a){var o=t;let s={};s["moduleName"]=e,s["type"]=a;var i=[{id:"Web",name:"Web"},{id:"Mobile",name:"Mobile"}],n=[{id:"Add",name:"Add"},{id:"View",name:"View"},{id:"Edit",name:"Edit"}];l["a"].Modulenamedata(s).then((function(t){var e=t.data.Data;null!=e&&"Module_Name"==a&&(o.leftSearchFields[1].listOptions=e.map(t=>{const e={};return e.name=t.module_name,e.value=t.module_id.toString(),e}))})),"DeviceType"==a&&(o.leftSearchFields[2].listOptions=i.map(t=>{const e={};return e.name=t.name,e.value=t.id.toString(),e})),"LayOutType"==a&&(o.leftSearchFields[3].listOptions=n.map(t=>{const e={};return e.name=t.name,e.value=t.id.toString(),e}))}var c={buttons:i,leftsearchSchema:n,listActions:d,TableHeader:u,bindleftCommonSearchdropdown:r},m=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",[e("section",[e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header ui-draggable-handle"},[e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closepopup(e)}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),null==this.CustomlayoutId?e("h4",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("AddLayout"))+" ")]):e("h4",{staticClass:"modal-title"},[t._v(" "+t._s(t.$t("CloneLayout"))+" ")])]),e("div",{staticClass:"modal-body"},[e("Form",{ref:"form"},[e(a.DynamicForm,{ref:"AddLayoutPopup",attrs:{lang:"en",buttons:t.buttons,schema:t.FormSchema},on:{OnSubmit:t.onSubmit}})],1)],1)])])])]),t.AssignRolePopup?e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header ui-draggable-handle py-0"},[e("h4",{staticClass:"modal-title py-3"},[t._v(" "+t._s(t.$t("AssignRole"))+" ")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"RolesCheckData listing"}},[t._m(0),e("tbody",t._l(t.RolesCheckData,(function(a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[e("span",{staticClass:"text-center"},[t._v(" "+t._s(a.layoutname)+" ")])]),e("td",{staticClass:"text-center"},[e("span",{staticClass:"text-center"},[t._v(" "+t._s(a.platform)+" ")])])])})),0)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-2"},[e("div",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:t.$t("Submit")},on:{click:function(e){return t.closeAssignpopup(e)}}},[e("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),t._v(" "+t._s(t.$t("un assgin from previous layout and assign to new"))+" ")]),e("button",{staticClass:"btn btn-primary delete-btn my-sm-0",attrs:{title:t.$t("Cancel")},on:{click:function(e){return t.roleListingDelete(e)}}},[e("em",{staticClass:"fa fa-times pl-2 pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])])])])])])])]):t._e()])])},p=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",{staticClass:"thead-bg"},[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"text-center"},[e("span",[t._v("Layout Name")])]),e("th",{staticClass:"text-center"},[e("span",[t._v("PlatForm")])])])])}],h=a("240d");const C={components:{DynamicForm:h["DynamicForm"]},props:{showlayoutpopup:{type:Boolean},CustomlayoutId:{type:Number,required:!0}},data(){return{isLoading:!1,headertext:"",submoduleId:"",layoutName:"",platForm:"",SharetoRole:[],layoutType:"",description:"",moduleNameList:[],subModuleNameList:[],shearedtypeRole:[],searchable:!0,moduleId:null,userTypeId:1,reqFrom:null,loggeduserid:"",companyId:"",ddlModuleId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,ShareToItems:[],fieldValue:"",ModuleName:"",SubmoduleName:"",RolesCheckReturnData:[],RolesCheckData:[],ShareToRoleitem:"",FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:"Module Name",name:"ModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.GetModuleId},validationRules:"required"},{astype:"SelectField",label:"Sub Module Name",name:"SubModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"TextField",label:"Layout Name",name:"LayoutName",value:"",placeholder:"Enter Layout Name",validationRules:{required:!0},config:{onChange:function(t,e){console.log("On Change Textbox",t)},onBlur:function(t,e){console.log("On Change Textbox",t)}}},{astype:"SelectField",label:"Platform",name:"Platform",value:"",placeholder:"",config:{options:[{value:"Web",name:"Web"},{value:"Mobile",name:"Mobile"}],showAddIcon:!1,onChange:function(t,e){},onAddButtonClick:function(t,e){}},validationRules:"required"},{astype:"MultiSelectField",label:"Layout Type",name:"LayoutType",value:[],placeholder:"",disabled:!1,config:{options:[{value:"Add",name:"Add or edit"},{value:"View",name:"View"}],showAddIcon:!1,onChange:function(t,e){},onAddButtonClick:function(t,e){}},validationRules:"required"},{astype:"MultiSelectField",label:"Share To Role",mode:"tag",name:"ShareToRole",value:[],placeholder:"",disabled:!1,config:{options:[],onChange:this.onChangeOnDropdownChange},validationRules:""}]},{layoutType:"signle",Data:[{astype:"TextAreaField",label:"Description",name:"Description",value:"",placeholder:"",validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success saveSendforApproval",text:"<i class='fa fa-save pr-2'></i> Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i> Cancel",onClick:this.onCancel}],AssignRolePopup:!1,shareroleids:""}},async created(){var t=this;t.loggeduserid=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.CompanyId,t.FetchModuleData(),await t.FetchRoleData(),t.FetchClone()},methods:{roleListingDelete:function(t){var e=this;e.AssignRolePopup=!1,e.FormSchema[0].Data[5].value.splice(-1,1)},onChangeOnDropdownChange:function(t,e){var a=this,o=a.FormSchema[0].Data[0].value,s=a.FormSchema[0].Data[1].value,i=a.FormSchema[0].Data[3].value,n=a.FormSchema[0].Data[4].value,d=null,u=null,r=e.value,c=r.length-1,m=r[c];a.ShareToRoleitem=m;var p=`module_id=${o}&sub_module_id=${s}&layout_name=${d}&platform=${i}&layout_type=${n}&description=${u}&rolesdetail=${a.ShareToRoleitem}`;l["a"].CheckRolesOnCustomLayout(p).then((function(t){a.RolesCheckReturnData=t.data.data,""!=t.data.data&&null!=t.data.data&&(a.RolesCheckData=[],a.RolesCheckReturnData[0].forEach((t,e)=>{a.RolesCheckData.push({Customlayout_id:t.custom_layout_id,layoutname:t.layout_name,platform:t.platform})}),a.AssignRolePopup=!0)}))},FetchModuleData:function(){var t=this,e="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";l["a"].Modulenamedata(e).then(e=>{null!=e.data.Data&&(t.moduleNameList=e.data.Data,t.moduleNameList.forEach((e,a)=>{t.FormSchema[0].Data[0].config.options.push({value:e.module_id,name:e.module_name})}),t.$refs.AddLayoutPopup.UpdateKeyValue())})},GetModuleId(t,e,a){var o=this;o.ddlModuleId=a||t.target.value,o.FormSchema[0].Data[1].config.options=[];var s=`moduleId=${o.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;l["a"].Modulenamedata(s).then(t=>{null!=t.data.Data&&(o.subModuleNameList=t.data.Data,o.subModuleNameList.forEach((t,e)=>{o.FormSchema[0].Data[1].config.options.push({value:t.sub_module_id,name:t.sub_module_name})}),o.$refs.AddLayoutPopup.UpdateKeyValue())})},FetchRoleData:async function(t,e){var a=this,o=`companyId=${a.companyId}&pageSize=${a.pageSize}&statusId=1001`;await l["a"].Roledata(o).then((function(t){null!=t.data.length&&(a.shearedtypeRole=t.data,a.shearedtypeRole.forEach((t,e)=>{a.FormSchema[0].Data[5].config.options.push({value:t.rolE_ID,name:t.rolE_NAME})}))})),a.isLoading=!1},closepopup(t){var e=this;e.$emit("closepopup",t),e.$emit("refreshlist",t)},closeAssignpopup(){var t=this;t.AssignRolePopup=!1},onCancel:function(t){var e=this;e.FormSchema[0].Data[1].config.options=[],this.closepopup(t)},FetchClone:function(){var t=this;t.Cloneheader=!0;var e="custom_layout_id="+t.CustomlayoutId;l["a"].GetCustomLayoutPopUp(e).then((function(e){if(e.data){var a=JSON.parse(e.data),o=a.data[0].layout_type.split(","),s=a.shareto;if(t.GetModuleId("","",a.data[0].MODULE_ID),null!=a){t.GetModuleId(null,null,a.data[0].MODULE_ID),t.FormSchema[0].Data[0].value=a.data[0].MODULE_ID,t.FormSchema[0].Data[0].disabled=!0,t.FormSchema[0].Data[1].value=a.data[0].sub_module_id,t.FormSchema[0].Data[1].disabled=!0,t.FormSchema[0].Data[2].value=a.data[0].layout_name,t.FormSchema[0].Data[3].value=a.data[0].platform,t.FormSchema[1].Data[0].value=a.data[0].description;var l=[];o.map(t=>{"Edit"!=t&&l.push({label:t,value:t})}),t.FormSchema[0].Data[4].value=l;var i=[];s.map(e=>{var a=t.shearedtypeRole.find(t=>t.rolE_ID==e.role_id);i.push({label:a.rolE_NAME,value:a.rolE_ID})}),t.FormSchema[0].Data[5].value=i}}}))},onSubmit(t,e){var a=this;a.isLoading=!0,a.fieldValue=t;let o=[],s=[];if(null!=a.fieldValue.LayoutType&&o.push(a.fieldValue.LayoutType.value),null!=a.fieldValue.ShareToRole&&a.fieldValue.ShareToRole.length>0&&a.fieldValue.ShareToRole.forEach(t=>{s.push(t.value)}),o.includes("Add")&&!o.includes("Edit")&&o.push("Edit"),void 0!=a.fieldValue||null!=a.fieldValue)if(null==a.CustomlayoutId||""==a.CustomlayoutId){var i=`module_id=${a.fieldValue.ModuleName}&sub_module_id=${a.fieldValue.SubModuleName}&layout_name=${a.fieldValue.LayoutName}&platform=${a.fieldValue.Platform}&layout_type=${o.join(",")}&description=${a.fieldValue.Description}&rolesdetail=${s.join(",")}`;l["a"].AddCustomLayoutData(i).then((function(t){"2"==t.data?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==t.data?a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):t.data>=1?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:t.data}})):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert"))}))}else if(null!=a.CustomlayoutId||""!=a.CustomlayoutId){a.isLoading=!1;i=`custom_layout_id=${a.CustomlayoutId}&layout_name=${a.fieldValue.LayoutName}&layout_type=${o.join(",")}&description=${a.fieldValue.Description}&platform=${a.fieldValue.Platform}&rolesdetail=${s.join(",")}`;l["a"].SaveCloneCustomLayout(i).then((function(t){"1"==t.data?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.closepopup()):"2"==t.data?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==t.statusText?a.ShowAlert(a.$t("Talygen_coustom_Field not exists",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert"))}))}a.isLoading=!1,a.FetchRoleData(a.fieldValue)}}};var _=Object.assign(C,{__name:"AddLayoutpopup",setup(t){return{__sfc:!0,DynamicForm:h["DynamicForm"]}}}),S=_,A=a("2877"),E=Object(A["a"])(S,m,p,!1,null,null,null),L=E.exports,f=function(){var t=this,e=t._self._c,a=t._self._setupProxy;return e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header ui-draggable-handle"},[e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.closepopup()}}},[e("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),e("h4",{staticClass:"modal-title",attrs:{name:"header"}},[t._v(" "+t._s(t.$t("AddLayout"))+" ")])]),e("Form",[e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("Field",{attrs:{name:"SharetoRole",label:"Share To Role"},model:{value:t.SharetoRole,callback:function(e){t.SharetoRole=e},expression:"SharetoRole"}},[e("label",[t._v(t._s(t.$t("SharetoRole"))+":")]),e(a.Multiselect,t._b({staticClass:"form-control",attrs:{options:t.Options,searchable:!0,taggable:!0,label:"name",multiple:!0,"track-by":"name",placeholder:"Select",mode:"multiple",hideSelected:!1,"close-on-select":!1},on:{input:t.onChangeOnDropdownChange},model:{value:t.SharetoRole,callback:function(e){t.SharetoRole=e},expression:"SharetoRole"}},"Multiselect",t.field,!1))],1)],1)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-2"},[e("div",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:t.$t("Submit")},on:{click:function(e){return t.ModifySharetoRole()}}},[e("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),t._v(" "+t._s(t.$t("Submit"))+" ")]),e("button",{staticClass:"btn btn-primary delete-btn",attrs:{title:t.$t("Cancel")},on:{click:t.closepopup}},[e("em",{staticClass:"fa fa-times pl-2 pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])])])])])],1),t.AssignRolePopup?e("div",{staticClass:"my-popups"},[e("div",{staticClass:"modal d-block"},[e("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header ui-draggable-handle py-0"},[e("h4",{staticClass:"modal-title py-3"},[t._v(" "+t._s(t.$t("AssignRole"))+" ")])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"table-responsive table-fix-header"},[e("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"RolesCheckData listing"}},[t._m(0),e("tbody",t._l(t.RolesCheckData,(function(a){return e("tr",{key:a},[e("td",{staticClass:"text-center"},[e("span",{staticClass:"text-center"},[t._v(" "+t._s(a.layoutname)+" ")])]),e("td",{staticClass:"text-center"},[e("span",{staticClass:"text-center"},[t._v(" "+t._s(a.platform)+" ")])])])})),0)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-2"},[e("div",{staticClass:"float-right"},[e("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:t.$t("Submit")},on:{click:function(e){return t.closeAssignpopup(e)}}},[e("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),t._v(" "+t._s(t.$t("un assgin from previous layout and assign to new"))+" ")]),e("button",{staticClass:"btn btn-primary delete-btn my-sm-0",attrs:{title:t.$t("Cancel")},on:{click:function(e){return t.roleListingDelete(e)}}},[e("em",{staticClass:"fa fa-times pl-2 pr-2"}),t._v(" "+t._s(t.$t("Cancel"))+" ")])])])])])])])])]):t._e()])])])},D=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("thead",{staticClass:"thead-bg"},[e("tr",{staticClass:"text-center"},[e("th",{staticClass:"text-center"},[e("span",[t._v("Layout Name")])]),e("th",{staticClass:"text-center"},[e("span",[t._v("PlatForm")])])])])}],T=a("8e5f"),y=a.n(T);const M={components:{Multiselect:y.a},props:{showlayoutpopup:{type:Boolean},CustomlayoutId:{type:Number,required:!0},MODULEID:{type:Number,required:!0},SUBMODULEID:{type:Number,required:!0},LAYOUTNAME:{type:String,required:!0},PLATFORM:{type:String,required:!0},LAYOUTTYPE:{type:String,required:!0},DESCRIPTION:{type:String,required:!0},LAYOUTSHARETOID:{type:String,required:!0}},data(){return{SharetoRole:[],shearedtypeRole:[],searchable:!0,reqFrom:null,loggeduserid:"",companyId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,AssignRolePopup:!1,RolesCheckData:[],RolesCheckReturnData:[],ShareToRoleitem:"",mode:"tags"}},created(){var t=this;t.loggeduserid=t.GetUserInfo.ID,t.companyId=t.GetUserInfo.CompanyId,t.FetchRoleData(),t.FetchClone()},methods:{closeAssignpopup(){var t=this;t.AssignRolePopup=!1},roleListingDelete:function(t){var e=this;e.AssignRolePopup=!1,e.SharetoRole.pop()},onChangeOnDropdownChange:function(){var t=this,e=t.SharetoRole.length-1;t.ShareToRoleitem=t.SharetoRole[e].value;var a=`module_id=${t.MODULEID}&sub_module_id=${t.SUBMODULEID}&custom_layout_id=${t.CustomlayoutId}&layout_name=${t.LAYOUTNAME}&platform=${t.PLATFORM}&layout_type=${t.LAYOUTTYPE}&description=${t.DESCRIPTION}&rolesdetail=${t.ShareToRoleitem}`;l["a"].CheckRolesOnCustomLayout(a).then((function(e){t.RolesCheckReturnData=e.data.data,""!=e.data.data&&null!=e.data.data&&(t.RolesCheckData=[],t.RolesCheckReturnData[0].forEach((e,a)=>{t.RolesCheckData.push({Customlayout_id:e.custom_layout_id,layoutname:e.layout_name,platform:e.platform})}),t.AssignRolePopup=!0)}))},FetchRoleData:async function(){var t=this;t.Options=[];var e=`companyId=${t.companyId}&pageSize=${t.pageSize}&statusId=1001`;await l["a"].Roledata(e).then((function(e){null!=e.data.length&&(t.shearedtypeRole=e.data,t.shearedtypeRole.forEach((e,a)=>{t.Options.push({name:e.rolE_NAME,value:e.rolE_ID})}))})),null!=t.CustomlayoutId&&t.FetchClone(),t.isLoading=!1},FetchClone:function(){var t=this;t.Cloneheader=!0;var e=[],a=[],o=[],s="custom_layout_id="+t.CustomlayoutId;l["a"].GetCustomLayoutPopUp(s).then((function(s){o=JSON.parse(s.data),null!=o&&(e=o.shareto,e.map(e=>{var o=t.shearedtypeRole.find(t=>t.rolE_ID==e.role_id);a.push({name:o.rolE_NAME,value:o.rolE_ID})}),t.SharetoRole=a)}))},closepopup(t){var e=this;e.$emit("closepopup",t),e.$emit("refreshlist",t)},ModifySharetoRole:function(){var t=this;let e=[];null!=t.SharetoRole&&t.SharetoRole.length>0&&t.SharetoRole.forEach(t=>{e.push(t.value)});var a=`custom_layout_id=${t.CustomlayoutId}&rolesdetail=${e.join(",")}`;l["a"].ModifyShareWithOnCustomLayout(a).then((function(e){"OK"==e.statusText&&t.closepopup()})).catch(t=>{console.log(t)})}}};var g=Object.assign(M,{__name:"SharedRolesPopup",setup(t){return{__sfc:!0,Multiselect:y.a}}}),v=g,O=Object(A["a"])(v,f,D,!1,null,null,null),b=O.exports,I={components:{Addlayoutpopup:L,SharedRoles:b},data(){return{isLoading:!1,showLayoutPopup:!1,sharetopopup:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,id:80,LayoutListingData:[],sub_module_id:null,module_id:"",noRecord:!1,showSharePopup:!1,moduleNameList:[],subModuleNameList:[],moduleId:null,userTypeId:1,reqFrom:null,deviceType:[{id:"Web",name:"Web"},{id:"Andriod",name:"Andriod"},{id:"Window",name:"Window"}],LayoutType:[{id:"Add",name:"Add"},{id:"View",name:"View"},{id:"Edit",name:"Edit"}],ddlModuleId:"",listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,Headers:c.TableHeader,searchCondition:"",TotalRecords:0,CustomlayoutId:null,headertext:"",MODULEID:"",SUBMODULEID:"",LAYOUTNAME:"",PLATFORM:"",LAYOUTTYPE:"",DESCRIPTION:"",LAYOUTSHARETOID:""}},created:function(){var t=this;t.FetchData(),t.FetchModuleData(),c.bindleftCommonSearchdropdown(t,"CustomField","Module_Name"),c.bindleftCommonSearchdropdown(t,"CustomField","DeviceType"),c.bindleftCommonSearchdropdown(t,"CustomField","LayOutType")},methods:{OpenAddPAge(t,e){var a=this;a.CustomlayoutId=t.CUSTOM_LAYOUT_ID,a.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:a.CustomlayoutId,PreviewMode:e}})},closepopup:function(){this.showLayoutPopup=!1,this.sharetopopup=!1},refreshlist:function(){var t=this;t.FetchData()},renderActions:function(t){var e=this;let a=[];return e.listActions.forEach(t=>{let e={...t};switch(e.title){case"Preview":e.isVisible=!0;break;case"Edit":e.isVisible=!0;break;case"Share":e.isVisible=!0;break;case"Clone":e.isVisible=!0;break;case"Delete":e.isVisible=!0;break}a.push(e)}),a},leftCommonSearch:function(t){this.PageNumber=t.PageNumber,"undefined"!=typeof t.searchCondition?this.searchCondition=t.searchCondition:this.searchCondition="",this.FetchData()},actionButtonClick:function(t,e,a,o){var s=this;switch(t){case"OpenAddPAge":s.OpenAddPAge(e,"Preview");break;case"EditCustomLayout":s.EditCustomLayout(e);break;case"ShareTORole":s.ShareTORole(e);break;case"CloneCustomLayout":s.AddCustomLayout(e);break;case"DeleteSingleRecord":s.commonDeleteData(e.CUSTOM_LAYOUT_ID);break}},ShareTORole:function(t){var e=this;null!=t.CUSTOM_LAYOUT_ID&&(e.CustomlayoutId=t.CUSTOM_LAYOUT_ID,e.MODULEID=t.MODULE_ID,e.SUBMODULEID=t.SUB_MODULE_ID,e.LAYOUTNAME=t.LAYOUT_NAME,e.PLATFORM=t.PLATFORM,e.LAYOUTTYPE=t.LAYOUT_TYPE,e.DESCRIPTION=t.DESCRIPTION,e.LAYOUTSHARETOID=t.LAYOUT_SHARE_TO_ID,e.sharetopopup=!0,e.$emit("FetchClone"))},commonHeaderButtonClick:function(t){switch(t.callbackfunction){case"CustomFieldListing":this.CustomFieldListing();break;case"AddCustomLayout":this.AddCustomLayout(t);break;case"commonDeleteData":this.commonDeleteData();break}},CustomFieldListing:function(){this.$router.push({name:"CustomFieldsListing"})},EditCustomLayout:function(t){var e=this;null!=t.CUSTOM_LAYOUT_ID&&(e.CustomlayoutId=t.CUSTOM_LAYOUT_ID),e.$router.push({path:"/Custom/ManageLayout/"+e.CustomlayoutId})},commonDeleteData:function(t){var e=this,a="";e.isLoading=!0,null==t?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=t,null!=a?e.confirmR(e.$t("ConfirmDelete"),!0,e.$t("Delete")+"  "+e.$t("Report"),(function(){var t={ids:a,moduleName:"",subModuleCode:"",refCode:"TALYGEN_CUSTOM_LAYOUT"},o=JSON.stringify(t);l["a"].CommonCommonDelete(o).then((function(t){200==t.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),e.ShowAlert(e.$t("DeletedSuccess",[e.$t("Record")]),"success",!0,e.$t("Alert")),e.PageNumber=parseInt(e.PageNumber)-1,e.PageNumber<=0&&(e.PageNumber=1),e.FetchData()):e.ShowAlert(e.$t("DeletedError",[e.$t("Report")]),"Success",!0,e.$t("Alert"))}))})):ShowAlert(e.$t("Selectanyrecordtodelete")),e.isLoading=!1},AddCustomLayout:function(t){var e=this;null!=t.CUSTOM_LAYOUT_ID?(e.CustomlayoutId=t.CUSTOM_LAYOUT_ID,e.showLayoutPopup=!0):(e.showLayoutPopup=!0,e.CustomlayoutId=null)},sortdata:function(t){var e="sort tb_headerSortDown";this.SortBy=t,t===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",e="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",e="sort tb_headerSortUp"):(this.SortExp="ASC",e="sort tb_headerSortDown")),this.FetchData(),$("#"+t+"  span:first-child").attr("class",e)},FetchModuleData:function(){var t=this,e="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";l["a"].Modulenamedata(e).then(e=>{null!=e.data.Data&&(t.moduleNameList=e.data.Data)})},SelectSubmodule(t){var e=this;e.ddlModuleId=t;var a=`moduleId=${e.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;l["a"].Modulenamedata(a).then(t=>{null!=t.data.Data&&(e.subModuleNameList=t.data.Data)})},CloseAddPopup:function(){var t=this;t.showLayoutPopup=!1},clickEventOfColumn:function(t,e){"LAYOUT_NAME"==e.COLUMN_NAME&&this.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:t.CUSTOM_LAYOUT_ID}})},clickEventOfColumn1:function(t,e){e.COLUMN_NAME},clickEventOfColumn2:function(t,e){e.COLUMN_NAME},columnDataFormatter:function(t,e){return"LAYOUT_SHARE_TO"==e.COLUMN_NAME?""==t.LAYOUT_SHARE_TO?"-":t.LAYOUT_SHARE_TO.split(",").length:"SYSTEM_GENRATED_COLUMN"==e.COLUMN_NAME?""==t.SYSTEM_GENRATED_COLUMN?"-":t.SYSTEM_GENRATED_COLUMN.split(",").length:"USER_GENRATED_COLUMN"==e.COLUMN_NAME?""==t.USER_GENRATED_COLUMN?"-":t.USER_GENRATED_COLUMN.split(",").length:"TOTAL_RECORDS"==e.COLUMN_NAME?(""==t.USER_GENRATED_COLUMN?"":t.USER_GENRATED_COLUMN.split(",").length)+(""==t.SYSTEM_GENRATED_COLUMN?"":t.SYSTEM_GENRATED_COLUMN.split(",").length):t[e.COLUMN_NAME]},getRequestParams:function(t,e,a,o,s,l){let i={};return t&&(i["pageNum"]=t),l&&(i["searchcondition"]=l),s&&(i["isPaged"]=s),a&&(i["sortBy"]=a),o&&(i["sortExp"]=o),e&&(i["pageSize"]=e),i},pagerMethod:function(t){this.PageSize=t.PageSize,this.PageNumber=t.PageNumber,this.FetchData()},FetchData:function(){var t=this;t.isLoading=!0;const e=this.getRequestParams(this.sortBy,this.sortExp,this.pageSize,this.pageNumber,this.isPaged,this.searchcondition);e.pageSize=t.PageSize,e.pageNumber=t.PageNumber,e.searchCondition=t.searchCondition,t.PageNumber?e.pageNumber=t.PageNumber:t.PageNumber=e.pageNumber=1,"undefined"!=typeof t.isPaged?e.isPaged=t.isPaged:t.isPaged=e.isPaged=1,e.isPaged=t.isPaged,e.sortBy=t.SortBy,e.sortExp=t.SortExp;var a="";t.isBlank(t.searchCondition)||(a+=t.searchCondition),t.isBlank(t.conditionForInstantSearch)||(a+=t.isBlank(t.searchCondition)?t.conditionForInstantSearch:" AND "+t.conditionForInstantSearch),""!=a&&(e.searchCondition=a),l["a"].GetCustomLayout(e).then((function(e){t.isLoading=!1,null!=JSON.parse(e.data)?(t.LayoutListingData=JSON.parse(e.data).data,t.Headers.forEach(e=>{e.settings=null,"LAYOUT_NAME"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn}),"IS_SYSTEM_DEFAULT_TEMPLATE"==e.COLUMN_NAME&&(e.settings={isInSlot:!0,clickEvent:t.ChangeTemplateStatus}),"IS_ACTIVE_TEMPLATE"==e.COLUMN_NAME&&(e.settings={isInSlot:!0,clickEvent:t.ChangeTemplateStatus}),"LAYOUT_SHARE_TO"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn1,formatter:t.columnDataFormatter}),"LAST_MODIFY_DATE"==e.COLUMN_NAME&&(e.settings={inSlot:!0}),"SYSTEM_GENRATED_COLUMN"==e.COLUMN_NAME&&(e.settings={clickEvent:t.clickEventOfColumn2,formatter:t.columnDataFormatter}),"USER_GENRATED_COLUMN"==e.COLUMN_NAME&&(e.settings={formatter:t.columnDataFormatter}),"TOTAL_RECORDS"==e.COLUMN_NAME&&(e.settings={formatter:t.columnDataFormatter})}),null!=t.LayoutListingData?(t.TotalRecords=t.LayoutListingData[0].TOTAL_RECORDS,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.CurrentPage=t.PageNumber,t.noRecord=!1):(t.noRecord=!0,t.LayoutListingData=[],t.TotalRecords=0,t.isLoading=!1)):(t.noRecord=!0,t.LayoutListingData=[],t.TotalRecords=0,t.isLoading=!1)})),t.isLoading=!1},SharePopup(){var t=this;t.showSharePopup=!0},ClosePopupShare(){var t=this;t.showSharePopup=!1},ChangeTemplateStatus:function(t,e,a){var o=this,s=!t.IS_ACTIVE_TEMPLATE,i=!t.IS_SYSTEM_DEFAULT_TEMPLATE,n=a;s=s?1:0,i=i?1:0;var d=`custom_layout_id=${t.CUSTOM_LAYOUT_ID}&is_active_template=${s}&is_default_template=${i}&update_field=${n}`;l["a"].ChangeTemplateStatus(d).then((function(t){"1"==t.data&&(o.ShowAlert(o.$t("CustomLayoutStatusSuccess",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert")),o.FetchData()),"2"==t.data&&(o.ShowAlert(o.$t("CustomLayoutStatusSuccessDefault",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert")),o.FetchData()),""==t.data&&o.ShowAlert(o.$t("CustomLayoutStatusDefault",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert"))})),$(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled")}}},R=I,N=(a("1d93"),Object(A["a"])(R,o,s,!1,null,"74d9e256",null));e["default"]=N.exports},"1d93":function(t,e,a){"use strict";a("cd02")},2166:function(t,e,a){var o=a("24fb");e=o(!1),e.push([t.i,".is-visible[data-v-74d9e256]{display:inline-block;height:auto}",""]),t.exports=e},cd02:function(t,e,a){var o=a("2166");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var s=a("499e").default;s("6d526828",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-bf839dcc.js.map