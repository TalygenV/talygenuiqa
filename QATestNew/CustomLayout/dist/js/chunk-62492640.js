(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62492640"],{"07ef":function(e,t,a){var s=a("24fb");t=s(!1),t.push([e.i,".is-visible[data-v-a8a8a596]{display:inline-block;height:auto}",""]),e.exports=t},"0b3e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",[t("loader",{attrs:{isVisible:e.isLoading}}),t("section",{staticClass:"main-content"},[t("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CustomField",SubModuleCode:"CustomField",LegendArray:[],showCheckBox:!0,IdentityColumn:"CUSTOM_LAYOUT_ID",listType:["List"],HeaderText:e.$t("Custom_Layout"),ListData:e.LayoutListingData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,SearchFields:e.leftSearchFields,NorecordfoundText:e.$t("NoRecordfound"),RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,TotalRecords:e.TotalRecords,SortExp:e.SortExp,SortBy:e.SortBy},on:{PagerButtonClick:e.pagerMethod,SortdataButtonClick:e.sortdata,ActionButtonClick:e.actionButtonClick,HeaderButtonClick:e.commonHeaderButtonClick,LeftsearchButtonClick:e.leftCommonSearch},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["MODIFY_DATE"==a.column.COLUMN_NAME?[e._v(" "+e._s(e.$filters.formatDate(a.row.MODIFY_DATE))+" ")]:e._e(),"IS_SYSTEM_DEFAULT_TEMPLATE"==a.column.COLUMN_NAME?["QuickAdd"!=a.row.LAYOUT_TYPE?t("label",{class:{switch:0==a.row.IS_SYSTEM_DEFAULT_TEMPLATE,disabled:"QuickAdd"==a.row.LAYOUT_TYPE}},[t("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheckDefault",type:"checkbox"},domProps:{checked:a.row.IS_SYSTEM_DEFAULT_TEMPLATE},on:{change:function(t){return e.ChangeTemplateStatus(a.row,t,"Default")}}}),t("span",{staticClass:"slider round"},[t("span",{staticClass:"slider-yes"},[e._v("Yes")]),t("span",{staticClass:"slider-no"},[e._v("No")])])]):e._e(),"QuickAdd"==a.row.LAYOUT_TYPE?t("label",{staticClass:"text-center"},[e._v("-")]):e._e()]:e._e(),"IS_ACTIVE_TEMPLATE"==a.column.COLUMN_NAME?[t("label",{class:{switch:!0,"switch disabled":1==a.row.IS_SYSTEM_DEFAULT_TEMPLATE}},[t("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheck",type:"checkbox"},domProps:{checked:a.row.IS_ACTIVE_TEMPLATE},on:{change:function(t){return e.ChangeTemplateStatus(a.row,t,"Active")}}}),t("span",{staticClass:"slider round"},[t("span",{staticClass:"slider-yes"},[e._v("Active")]),t("span",{staticClass:"slider-no"},[e._v("In-Active")])])])]:e._e(),"LAYOUT_SHARE_TO"==a.column.COLUMN_NAME?[e._v(" "+e._s(e.$filters.formatDate(a.row.LAYOUT_SHARE_TO))+" ")]:e._e(),"feature_name"==a.column.COLUMN_NAME?[e._v(" "+e._s(e.$filters.formatDate(a.row.feature_name))+" ")]:e._e()]}}])})],1),e.showLayoutPopup?t("Addlayoutpopup",{attrs:{openclonepopup:e.openclonepopup,CustomlayoutId:e.CustomlayoutId},on:{closepopup:e.closepopup,refreshlist:e.refreshlist}}):e._e(),e.QuickAddpopup?t("QuickAddpopup",{attrs:{LayoutListingData:e.LayoutListingData}}):e._e(),e.manageform?t("Manageformlayout",{attrs:{getvalues:e.getvalues}}):e._e(),e.sharetopopup?t("SharedRoles",{attrs:{CustomlayoutId:e.CustomlayoutId,MODULEID:e.MODULEID,SUBMODULEID:e.SUBMODULEID,LAYOUTNAME:e.LAYOUTNAME,PLATFORM:e.PLATFORM,LAYOUTTYPE:e.LAYOUTTYPE,DESCRIPTION:e.DESCRIPTION,LAYOUTSHARETOID:e.LAYOUTSHARETOID},on:{closepopup:e.closepopup,refreshlist:e.refreshlist}}):e._e()],1)},o=[],i=(a("14d9"),a("9769"));let l=[{title:"Custom Fields",iconClass:"fa-list",callbackfunction:"CustomFieldListing",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{title:"Add Layout",iconClass:"fa-plus",callbackfunction:"AddCustomLayout",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],r=[{fieldName:"LAYOUT NAME",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TCL.LAYOUT_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"MODULE",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TM.MODULE_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Device TYPE",fieldType:"ddl-check",fieldIcon:"fa-folder",fieldSearchConditionName:["TCL.PLATFORM"],isSearch:!1,value:"",listOptions:[]},{fieldName:"LAYOUT TYPE",fieldType:"ddl-check",fieldIcon:"fa-calendar",fieldSearchConditionName:["TCL.LAYOUT_TYPE"],isSearch:!1,value:"",listOptions:[]}],n=[{title:"Detail",callbackfunction:"OpenAddPAge",icon:"fa fa-eye text-success action-icon",additionalSpan:"",isvisible:!0},{title:"Edit",callbackfunction:"EditCustomLayout",icon:"fa fa-pencil text-success action-icon",additionalSpan:"",isvisible:!0},{title:"Share",callbackfunction:"ShareTORole",href:"javascript:void(0)",icon:"fa fa-share-alt text-success action-icon",additionalSpan:"",isvisible:!0},{title:"Clone",callbackfunction:"CloneCustomLayout",href:"javascript:void(0)",icon:"fa fa-paper-plane text-success action-icon",additionalSpan:"",isvisible:!0},{title:"Delete",callbackfunction:"DeleteSingleRecord",href:"javascript:void(0)",additionalSpan:"",icon:"fa fa-trash-o",isdisabled:!0,isvisible:!0}],u=[{COLUMN_NAME:"LAYOUT_NAME",DATA_TYPE:"Text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Name",DISPLAY_ORDER:1},{COLUMN_NAME:"LAYOUT_TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Type",DISPLAY_ORDER:2},{COLUMN_NAME:"MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Module Name",DISPLAY_ORDER:3},{COLUMN_NAME:"SUB_MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sub Module",DISPLAY_ORDER:4},{COLUMN_NAME:"LAYOUT_SHARE_TO",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Share With",DISPLAY_ORDER:5},{COLUMN_NAME:"IS_SYSTEM_DEFAULT_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Default",DISPLAY_ORDER:6},{COLUMN_NAME:"IS_ACTIVE_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Template Status",DISPLAY_ORDER:7},{COLUMN_NAME:"PLATFORM",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Device Type",DISPLAY_ORDER:8},{COLUMN_NAME:"MODIFY_DATE",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Modify Date",DISPLAY_ORDER:9},{COLUMN_NAME:"SYSTEM_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"System Generated",DISPLAY_ORDER:10},{COLUMN_NAME:"USER_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"User Defined",DISPLAY_ORDER:11},{COLUMN_NAME:"TOTAL_RECORDS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Total Field",DISPLAY_ORDER:12}];function d(e,t,a){var s=e;let o={};o["moduleName"]=t,o["type"]=a;var l=[{id:"Web",name:"Web"},{id:"Mobile",name:"Mobile"}],r=[{id:"Add or edit",name:"Add or edit"},{id:"View",name:"View"},{id:"Quick Add",name:"Quick Add"}];i["a"].Modulenamedata(o).then((function(e){var t=e.data.Data;null!=t&&"Module_Name"==a&&(s.leftSearchFields[1].listOptions=t.map(e=>{const t={};return t.name=e.module_name,t.value=e.module_id.toString(),t}))})),"DeviceType"==a&&(s.leftSearchFields[2].listOptions=l.map(e=>{const t={};return t.name=e.name,t.value=e.id.toString(),t})),"LayOutType"==a&&(s.leftSearchFields[3].listOptions=r.map(e=>{const t={};return t.name=e.name,t.value=e.id.toString(),t}))}var c={buttons:l,leftsearchSchema:r,listActions:n,TableHeader:u,bindleftCommonSearchdropdown:d},m=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup(t)}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),null==this.CustomlayoutId?t("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("AddLayout"))+" ")]):t("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("CloneLayout"))+" ")])]),t("div",{staticClass:"modal-body"},[t("Form",{ref:"form"},[t(a.DynamicForm,{ref:"AddLayoutPopup",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)],1)])])])]),e.AssignRolePopup?t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-0"},[t("h4",{staticClass:"modal-title py-3"},[e._v(" "+e._s(e.$t("AssignRole"))+" ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"RolesCheckData listing"}},[e._m(0),t("tbody",e._l(e.RolesCheckData,(function(a){return t("tr",{key:a},[t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.layoutname)+" ")])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.platform)+" ")])])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"float-right"},[t("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:e.$t("Submit")},on:{click:function(t){return e.closeAssignpopup(t)}}},[t("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),e._v(" "+e._s(e.$t("un assgin from previous layout and assign to new"))+" ")]),t("button",{staticClass:"btn btn-primary delete-btn my-sm-0",attrs:{title:e.$t("Cancel")},on:{click:function(t){return e.roleListingDelete(t)}}},[t("em",{staticClass:"fa fa-times pl-2 pr-2"}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])])])])])]):e._e()])])},h=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",{staticClass:"thead-bg"},[t("tr",{staticClass:"text-center"},[t("th",{staticClass:"text-center"},[t("span",[e._v("Layout Name")])]),t("th",{staticClass:"text-center"},[t("span",[e._v("PlatForm")])])])])}],p=a("240d");const S={components:{DynamicForm:p["DynamicForm"]},props:{showlayoutpopup:{type:Boolean},CustomlayoutId:{type:Number,required:!0},openclonepopup:{type:Boolean}},data(){return{isLoading:!1,headertext:"",submoduleId:"",layoutName:"",platForm:"",SharetoRole:[],layoutType:"",description:"",moduleNameList:[],subModuleNameList:[],shearedtypeRole:[],searchable:!0,moduleId:null,userTypeId:1,reqFrom:null,loggeduserid:"",companyId:"",ddlModuleId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,ShareToItems:[],fieldValue:"",ModuleName:"",SubmoduleName:"",RolesCheckReturnData:[],RolesCheckData:[],ShareToRoleitem:"",fetchuserdata:[],FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:"Module Name",name:"ModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.GetModuleId},validationRules:"required"},{astype:"SelectField",label:"Sub Module Name",name:"SubModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"TextField",label:"Layout Name",name:"LayoutName",value:"",placeholder:"Enter Layout Name",validationRules:{required:!0},config:{onChange:function(e,t){console.log("On Change Textbox",e)},onBlur:function(e,t){console.log("On Change Textbox",e)}}},{astype:"SelectField",label:"Platform",name:"Platform",value:"",placeholder:"",config:{options:[{value:"Web",name:"Web"},{value:"Mobile",name:"Mobile"}],showAddIcon:!1,onChange:function(e,t){},onAddButtonClick:function(e,t){}},validationRules:"required"},{astype:"MultiSelectField",label:"Layout Type",name:"LayoutType",value:[],placeholder:"Select Layout Type",disabled:!1,config:{options:[{value:"Add or edit",name:"Add or edit"},{value:"View",name:"View"},{value:"QuickAdd",name:"Quick Add"}],showAddIcon:!1,onChange:this.selectlayouttype},validationRules:"required"},{astype:"TextAreaField",label:"Description",name:"Description",value:"",placeholder:"",validationRules:"required"}]},{layoutType:"Single",Data:[{astype:"RadioField",label:"Share with",name:"Sharewithtype",value:"",placeholder:"",visibility:!1,config:{options:[{value:"User",name:"User"},{value:"Role",name:"Role"}],showAddIcon:!1,onChange:this.SelectshareType},validationRules:""}]},{layoutType:"double",Data:[{astype:"CustomSelectField",mode:"tag",label:this.$t("User "),name:"User",value:"",placeholder:"Please Select User ",visibility:!1,config:{options:[],showAddIcon:!1,onChange:this.GetUSerId,onRemove:this.onRemoveuser},placeholder:this.$t("SelectUser"),validationRules:{required:!1,max:100}},{astype:"CustomSelectField",mode:"tag",label:this.$t("Role "),name:"Role",value:"",placeholder:"Please Select Role ",visibility:!1,config:{options:[],showAddIcon:!1,onChange:this.GetRolesID},placeholder:this.$t("SelectUser"),visibility:!1,validationRules:{required:!1,max:100}}]},{layoutType:"double",Data:[{astype:"CustomSelectField",mode:"tag",label:"Extra Feature",name:"ExtraFeature",value:"",placeholder:"",disabled:!1,visibility:!1,config:{options:[],showAddIcon:!1}}]}],buttons:[{type:"submit",class:"btn btn-success saveSendforApproval",text:"<i class='fa fa-save pr-2'></i> Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i> Cancel",onClick:this.onCancel}],AssignRolePopup:!1,shareroleids:"",sharedtoUser:!0,sharedtoUserIds:[],sharedtoRoleIds:[],ShareRole:[],detailsIDs:[],sharetovalue:"",FeatureListData:[],selectQuickadd:!1,shareto:[],values:[],arrayValues:[]}},async created(){var e=this;e.loggeduserid=e.GetUserInfo.ID,e.companyId=e.GetUserInfo.CompanyId,e.FetchModuleData(),await e.FetchRoleData(),e.FetchClone(),e.FetchData()},methods:{onRemoveuser(e,t){var a=this;a.shareto.forEach((t,s)=>{t===e.label&&a.shareto.splice(s,1)}),a.FormSchema[2].Data[0].config.options.forEach((e,t)=>{a.detailsIDs.forEach((t,s)=>{e.value,a.detailsIDs.splice(s,1)})})(a.FormSchema)[2].Data[1].config.options.forEach((e,t)=>{a.detailsIDs.forEach((t,s)=>{e.value===t&&a.detailsIDs.splice(s,1)})})},showshareuserRole(){var e=this;e.FormSchema[2].Data[0].visibility=!1,e.FormSchema[2].Data[1].visibility=!1,e.FormSchema[1].Data[0].visibility=!1},selectlayouttype(e,t,a){var s=this;s.layoutType=a.value,s.FormSchema[0].Data[4].value.value=s.layoutType,"QuickAdd"==a.value?(s.selectQuickadd=!0,s.FormSchema[2].Data[1].value="",s.FormSchema[2].Data[0].visibility=!1,s.FormSchema[2].Data[1].visibility=!1,s.FormSchema[1].Data[0].visibility=!1):"Add or edit"==a.value&&1==s.openclonepopup||"View"==a.value&&1==s.openclonepopup?(s.selectQuickadd=!1,s.showshareuserRole()):(s.FormSchema[2].Data[0].visibility=!0,s.FormSchema[2].Data[1].visibility=!1,s.FormSchema[1].Data[0].visibility=!0)},SelectshareType(e,t){var a=this;t.value=e.target.getAttribute("data-value"),"User"==t.value?(a.FormSchema[2].Data[1].value="",a.FormSchema[2].Data[0].visibility=!0,a.FormSchema[2].Data[1].visibility=!1,a.FetchData()):(a.FormSchema[2].Data[1].value="",a.FormSchema[2].Data[0].visibility=!1,a.FormSchema[2].Data[1].visibility=!0,a.FetchRoleData()),a.$refs.AddLayoutPopup.validateForm.reset()},GetUSerId(e,t,a){var s=this;s.sharedtoUser=!0},GetRolesID(e,t,a){var s=this;s.sharedtoUser=!1},FetchData:function(){var e=this;e.isLoading=!0,i["a"].UserDDL().then(t=>{""!=t.data&&null!=t.data&&(e.fetchuserdata=t.data,e.FormSchema[2].Data[0].config.options=[],e.fetchuserdata.forEach(t=>{e.FormSchema[2].Data[0].config.options.push({value:t.userid,name:t.username})})),e.$refs.AddLayoutPopup.UpdateKeyValue(),e.isLoading=!1}).catch(e=>{console.log(e)})},roleListingDelete:function(e){var t=this;t.AssignRolePopup=!1,t.FormSchema[0].Data[5].value.splice(-1,1)},FetchModuleData:function(){var e=this,t="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";i["a"].Modulenamedata(t).then(t=>{null!=t.data.Data&&(e.moduleNameList=t.data.Data,e.moduleNameList.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.module_id,name:t.module_name})}),e.$refs.AddLayoutPopup.UpdateKeyValue())})},GetModuleId(e,t,a){var s=this;s.ddlModuleId=a||e.target.value,s.FormSchema[0].Data[1].config.options=[];var o=`moduleId=${s.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;i["a"].Modulenamedata(o).then(e=>{null!=e.data.Data&&(s.subModuleNameList=e.data.Data,s.subModuleNameList.forEach((e,t)=>{"MANAGE_PRODUCT"==e.sub_module_code&&(e.sub_module_name="Manage Product"),s.FormSchema[0].Data[1].config.options.push({value:e.sub_module_id,name:e.sub_module_name})}),s.$refs.AddLayoutPopup.UpdateKeyValue())});var l=s.FormSchema[0].Data[0].value;s.FormSchema[0].Data[0].config.options.forEach(e=>{e.value===l&&(s.ModuleName=e.name)})},FetchRoleData:async function(e,t){var a=this,s=`companyId=${a.companyId}&pageSize=${a.pageSize}&statusId=1001`;await i["a"].Roledata(s).then((function(e){null!=e.data.length&&(a.shearedtypeRole=e.data,a.shearedtypeRole.forEach((e,t)=>{a.FormSchema[2].Data[1].config.options.push({value:e.rolE_ID,name:e.rolE_NAME})}))})),a.$refs.AddLayoutPopup.UpdateKeyValue(),a.isLoading=!1},closepopup(e){var t=this;t.$emit("closepopup",e),t.$emit("refreshlist",e)},closeAssignpopup(){var e=this;e.AssignRolePopup=!1},onCancel:function(e){var t=this;t.FormSchema[0].Data[1].config.options=[],this.closepopup(e)},FetchClone:function(){var e=this;e.Cloneheader=!0,e.showshareuserRole();var t="custom_layout_id="+e.CustomlayoutId;i["a"].GetCustomLayoutPopUp(t).then((function(t){if(t.data){var a=JSON.parse(t.data),s=[];if(e.ShareRole=a.shareto,e.GetModuleId("","",a.data[0].MODULE_ID),null!=a.data[0].layout_type){var o=a.data[0].layout_type;e.FormSchema[0].Data[4].config.options.forEach(e=>{"Add,Edit"==o&&(o="Add or edit"),o==e.value&&s.push({label:e.name,value:e.value})})}if(null!=a){if(e.GetModuleId(null,null,a.data[0].MODULE_ID),e.FormSchema[0].Data[0].value=a.data[0].MODULE_ID,e.FormSchema[0].Data[0].disabled=!0,1==e.FormSchema[0].Data[0].disabled){var i=e.FormSchema[0].Data[0].value;e.FormSchema[0].Data[0].config.options.forEach(t=>{t.value===i&&(e.ModuleName=t.name)})}e.FormSchema[0].Data[1].value=a.data[0].sub_module_id,e.FormSchema[0].Data[1].disabled=!0,e.FormSchema[0].Data[3].value=a.data[0].platform,e.FormSchema[0].Data[5].value=a.data[0].description,e.FormSchema[0].Data[4].value=s}}}))},onSubmit(e,t){var a=this;a.isLoading=!0,a.fieldValue=e;let s=[];null!=a.fieldValue.LayoutType&&s.push(a.fieldValue.LayoutType.value);if(1==a.sharedtoUser&&a.FormSchema[2].Data[0].value&&a.FormSchema[2].Data[0].value.forEach(e=>{a.detailsIDs.push(e.value)}),a.FormSchema[2].Data[1].value&&a.FormSchema[2].Data[1].value.forEach(e=>{a.detailsIDs.push(e.value)}),void 0!=a.fieldValue||null!=a.fieldValue)if(null==a.CustomlayoutId||""==a.CustomlayoutId){if(a.fieldValue.ExtraFeature[0])var o=a.fieldValue.ExtraFeature[0].value;else o="";var l=`module_id=${a.fieldValue.ModuleName}&sub_module_id=${a.fieldValue.SubModuleName}&layout_name=${a.fieldValue.LayoutName}&platform=${a.fieldValue.Platform}&layout_type=${s.join(",")}&description=${a.fieldValue.Description}&share_based_on=${a.FormSchema[1].Data[0].value}&rolesdetail=${a.detailsIDs}&extra_feature_id=${o}`;i["a"].AddCustomLayoutData(l).then((function(e){"-2"==e.data.code?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==e.data.code?a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"-5"==e.data.code?a.ShowAlert(a.$t("addlayoutforQuickadd"),"warning",!0,a.$t("Alert")):"-6"==e.data.code?(a.shareto=e.data.otherData,a.values=e.data.otherData.split(","),a.arrayValues=[],a.FormSchema[2].Data[0].value?(a.FormSchema[2].Data[0].value.forEach(e=>{a.arrayValues.push(e.label),a.shareto=a.values.filter(e=>a.arrayValues.includes(e.trim()))}),a.shareto.length>=0&&a.ShowAlert("This Layout is already share to "+a.shareto,"warning",!0,a.$t("Alert"))):a.FormSchema[2].Data[1].value&&(a.FormSchema[2].Data[1].value.forEach(e=>{a.arrayValues.push(x.label),a.shareto=a.values.filter(e=>a.arrayValues.includes(e.trim()))}),a.shareto.length>=0&&a.ShowAlert("This Layout is already share to "+a.shareto,"warning",!0,a.$t("Alert")))):e.data.code>=1?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:e.data.code}})):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")),a.FormSchema[2].Data[0].value="",a.FormSchema[2].Data[1].value="",a.shareto=[],a.detailsIDs=[],values=[],arrayValues=[]}))}else if(null!=a.CustomlayoutId||""!=a.CustomlayoutId){if(a.isLoading=!1,a.fieldValue.ExtraFeature[0])o=a.fieldValue.ExtraFeature[0].value;else o="";"undefined"===typeof a.FormSchema[0].Data[4].value.value&&(a.FormSchema[0].Data[4].value.value=a.fieldValue.LayoutType[0].value);l=`custom_layout_id=${a.CustomlayoutId}&layout_name=${a.fieldValue.LayoutName}&layout_type=${a.FormSchema[0].Data[4].value.value}&description=${a.fieldValue.Description}&platform=${a.fieldValue.Platform}&share_based_on=&rolesdetail=&extra_feature_id=${o}`;i["a"].SaveCloneCustomLayout(l).then((function(e){"1"==e.data?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.closepopup()):"2"==e.data?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==e.statusText?a.ShowAlert(a.$t("Talygen_coustom_Field not exists",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert"))}))}a.isLoading=!1,a.FetchRoleData(a.fieldValue)}}};var g=Object.assign(S,{__name:"AddLayoutpopup",setup(e){return{__sfc:!0,DynamicForm:p["DynamicForm"]}}}),_=g,f=a("2877"),v=Object(f["a"])(_,m,h,!1,null,null,null),C=v.exports,A=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-0"},[e._m(0),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])]),t("div",{staticClass:"border p-3 scroll"},[t("dynamic-form",{ref:"ManageForm",attrs:{buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.Submit}})],1)])])])])])},D=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"theme-primary partition-full"},[t("span",{staticClass:"p-name text-white"},[e._v("Manage Form")])])}],y={props:{getvalues:{type:Object,required:!0}},data(){return{isLoading:!1,UserName:null,UserId:null,FormSchema:[],modulename:"",submodulecode:"",buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Save",onclick:this.Submit},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup,isVisible:!0}]}},async created(){var e=this;e.UserId=e.GetUserInfo.ID,e.UserName=e.GetUserInfo.Name,e.getForm(e.getvalues)},methods:{closepopup(){var e=this;e.$parent.closeQuickAddLayoutform()},getForm:function(e){var t=this;t.isLoading=!0,t.modulename=e.module_name,t.submodulecode=e.sub_module_code;var a=`id=&moduleName=${e.module_name}&subModuleCode=${e.sub_module_code}&otherData=&langCode=en&CustomLayoutId=${e.custom_layout_id}&usefor=QuickAdd`;i["a"].GetFormCustomLayout(a).then((function(e){t.isLoading=!1,null!=e&&null!=e.data&&(t.FormSchema=t.$refs.ManageForm.ConvertCustomFieldIntoDynamicFormObj(e.data.data),t.isLoading=!1)}))},Submit:function(){var e=this;e.isLoading=!0;var t=e.$refs.ManageForm.ConvertDynamicFormObjToCustomFieldObj(e.FormSchema),a={data:t,moduleCode:e.modulename,subModuleCode:e.submodulecode};i["a"].SaveDynamicForm(JSON.stringify(a)).then((function(t){null!=t&&null!=t.data&&"Success"==t.data[0].Status&&e.ShowAlert("Form save Successfully","success",!0,e.$t("Alert"))})),e.isLoading=!1}}},L=y,b=Object(f["a"])(L,A,D,!1,null,null,null),T=b.exports,E=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-0"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title py-3",attrs:{name:"header"}},[e._v(" Get Quick Add List ")])]),t("div",{staticClass:"container-fluid padding-t_10"},[t("div",{staticClass:"row new_tab"},[t("form",{staticClass:"w-100 p-4"},e._l(e.Quicklistdata,(function(a,s){return t("div",{key:s,staticClass:"collapse show mt-2 col-md-4"},[t("div",{key:a.sub_module_id,staticClass:"btn-group btn-group-toggle custom-reports-icons my-2 w-100",attrs:{"data-toggle":"buttons"},on:{click:function(t){return e.getForm(a)}}},[t("label",{class:{"btn btn_cstm":!0,active:a.sub_module_id==e.selectedModuleId},attrs:{for:"cls_usertype"+s}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedModuleId,expression:"selectedModuleId"}],attrs:{type:"radio",name:"cls_usertype",id:"cls_usertype"+s},domProps:{value:a.sub_module_id,checked:e._q(e.selectedModuleId,a.sub_module_id)},on:{change:function(t){e.selectedModuleId=a.sub_module_id}}}),e._m(0,!0),e._v(" Add "+e._s(e.$t(a.sub_module_name))+" ")])])])})),0)])])])])])])])},P=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"d-block pb-2"},[t("em",{staticClass:"fa fa-plus bg-transparent",attrs:{"aria-hidden":"true"}})])}],M={props:{LayoutListingData:{type:Array,required:!0}},data(){return{isLoading:!1,Quicklistdata:[],getvalues:{},selectedModuleId:null}},created(){var e=this;e.getQuickAddData()},methods:{getForm(e){var t=this;t.LayoutListingData.forEach(t=>{e.custom_layout_id===t.CUSTOM_LAYOUT_ID&&(e.is_active_template=t.IS_ACTIVE_TEMPLATE)}),t.$parent.getFormpopup(e)},getQuickAddData(){var e=this;i["a"].GetQuickAddDataListing().then(t=>{e.Quicklistdata=t.data.data})},closepopup(){var e=this;e.$parent.closeQuickAddpopup()}}},N=M,I=Object(f["a"])(N,E,P,!1,null,null,null),O=I.exports,R=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("Shareto"))+" ")])]),t("div",{staticClass:"modal-body"},[t(a.DynamicForm,{ref:"SharePopup",attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}}),t("div",{staticClass:"w-100 float-left mt-4"},[t("div",{staticClass:"heading-border"},[t("h5",{staticClass:"h5"},[t("span",[e._v(e._s(e.$t("SharedAlready")))])])]),t("div",{staticClass:"col-12 p-0 mt-3 px-small-0"},[t("div",{staticClass:"form-group mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.Search,expression:"Search"}],staticClass:"form-control",attrs:{id:"searchdata",maxlength:"50",type:"text",placeholder:"Search by User or Role"},domProps:{value:e.Search},on:{keyup:function(t){return e.SearchData()},input:function(t){t.target.composing||(e.Search=t.target.value)}}})])]),t("div",{staticClass:"table-responsive table-fix-header mb-3"},[t("table",{staticClass:"table table-bordered mb-0 mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"ShareUserRole listing"}},[t("tbody",[e._l(e.UserListingData.JsonData,(function(a,s){return a.USERNAME?t("tr",{key:s},[t("td",[t("div",{staticClass:"conversation-box_custreps"},["User"==a.share_based_on?t("div",{staticClass:"name-square"},[t("em",{staticClass:"fa fa-user text-white fa-2x",attrs:{"aria-hidden":"true"}})]):e._e(),"Role"==a.share_based_on?t("div",{staticClass:"role-square"},[t("em",{staticClass:"fa fa-user-circle text-white fa-2x",attrs:{"aria-hidden":"true"}})]):e._e(),t("div",{staticClass:"conversation-header"},[e._v(" "+e._s(a.USERNAME)+" ")]),t("div",{staticClass:"conversation-header"},[t("small",[e._v(" "+e._s(a.share_based_on)+" ")])])])]),t("td",{staticClass:"text-right pr-3 single-action"},[t("a",{attrs:{href:"javascript:;",title:e.$t("Delete")},on:{click:function(t){return e.shareroleListingDelete(a)}}},[e.TotalRecords>0?t("em",{staticClass:"fa fa-trash text-danger ml-4"}):e._e()])])]):e._e()})),1==e.NoRecordfound?t("tr",[t("td",{staticClass:"text-center text-danger no-record"},[e._v("No Record(s) Found.")])]):e._e()],2)])]),t(a.Pager,{attrs:{numberofrecords:e.TotalRecords,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next"},on:{pagerMethod:e.pagerMethod,change:e.SetPageSize}})],1)],1)])])])])},F=[],U=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.TotalPages>0?t("div",{staticClass:"nu-paging"},[t("nav",{attrs:{"aria-label":"Page navigation example col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"}},[t("ul",{staticClass:"pagination row"},[t("li",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left choose-page"},[t("span",{staticClass:"mr-2"},[e._v("Show")]),t("span",{staticClass:"select"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.PageSize,expression:"PageSize"}],staticClass:"form-control form-control-sm",attrs:{id:"pageSize",name:"pageSize"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.PageSize=t.target.multiple?a:a[0]},e.SetPageSize]}},e._l(e.PageSizeOption,(function(a){return t("option",{domProps:{value:a}},[e._v(e._s(a))])})),0)]),t("span",{staticClass:"ml-2"},[e._v(e._s(e.$t("PagingText",[(e.CurrentPage-1)*e.PageSize+1,e.PageSize*e.CurrentPage>e.TotalRecords?e.TotalRecords:e.PageSize*e.CurrentPage,e.TotalRecords])))])]),t("li",{staticClass:"col-sm-12 col-md-6 col-lg-6 col-xl-6 float-left"},[e.TotalPages>1?t("ul",{staticClass:"paging-count"},[t("li",{staticClass:"page-item"},[1!=e.CurrentPage?t("a",{staticClass:"page-link first",attrs:{title:e.firstText,href:"javascript:;",val:"1"},on:{click:function(t){return e.SetCurrentPage(1)}}},[e._v(e._s(e.firstText))]):e._e(),1==e.CurrentPage?t("a",{staticClass:"page-link first disabled",attrs:{title:e.firstText,val:"1"}},[e._v(e._s(e.firstText))]):e._e()]),t("li",{staticClass:"page-item"},[1!=e.CurrentPage?t("a",{staticClass:"page-link previous",attrs:{title:e.prevText,href:"javascript:;"},on:{click:function(t){return e.SetCurrentPage(e.CurrentPage-1)}}},[e._v(e._s(e.prevText))]):e._e(),1==e.CurrentPage?t("a",{staticClass:"page-link previous disabled",attrs:{title:e.prevText}},[e._v(e._s(e.prevText))]):e._e()]),e._l(e.TotalPages,(function(a,s){return[a>=e.GroupStart&&a<=e.GroupEnd?t("li",{staticClass:"page-item"},[s+1==e.CurrentPage?t("a",{staticClass:"page-link active",attrs:{href:"javascript:;"}},[e._v(e._s(s+1))]):e._e(),s+1!=e.CurrentPage?t("a",{staticClass:"page-link",attrs:{href:"javascript:;",val:s},on:{click:function(t){return e.SetCurrentPage(s+1)}}},[e._v(e._s(s+1))]):e._e()]):e._e()]})),t("li",{staticClass:"page-item"},[e.CurrentPage<e.TotalPages?t("a",{staticClass:"page-link next",attrs:{title:e.nextText,href:"javascript:;"},on:{click:function(t){return e.SetCurrentPage(e.CurrentPage+1)}}},[e._v(e._s(e.nextText))]):e._e(),e.CurrentPage>=e.TotalPages?t("a",{staticClass:"page-link disabled next",attrs:{title:e.nextText}},[e._v(e._s(e.nextText))]):e._e()]),t("li",{staticClass:"page-item"},[e.CurrentPage!=e.TotalPages?t("a",{staticClass:"page-link next",attrs:{title:e.lastText,href:"javascript:;",val:e.TotalPages},on:{click:function(t){return e.SetCurrentPage(e.TotalPages)}}},[e._v(e._s(e.lastText))]):e._e(),e.CurrentPage==e.TotalPages?t("a",{staticClass:"page-link next disabled",attrs:{title:e.lastText,val:e.TotalPages}},[e._v(e._s(e.lastText))]):e._e()])],2):e._e()])])])]):e._e()},k=[];const Y={data:function(){return{TotalRecords:0,PageNumber:1,PageSize:10,PageSizeOption:null,CurrentPage:1,TotalPages:0,GroupStart:1,GroupEnd:3,LastPage:!1}},watch:{numberofrecords:function(e){this.CurrentPage>this.PageNumber&&(this.CurrentPage=this.PageNumber),this.TotalRecords=e,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.TotalPages==this.PageNumber&&this.PageNumber>3?(this.GroupStart=this.PageNumber-2,this.GroupEnd=this.PageNumber):this.TotalPages>this.PageNumber&&this.PageNumber>=3?(this.GroupStart=this.PageNumber-1,this.GroupEnd=this.PageNumber+1):(this.GroupStart=1,this.GroupEnd=3)},CurrentPageNumber:function(e){var t=this;t.CurrentPage=e,1==e&&t.SetCurrentPage(e)}},created:function(){this.GetPageSizeOption()},methods:{GetData:function(){this.$emit("SetCurrentPage",{PageNumber:this.PageNumber,PageSize:this.PageSize}),this.$emit("pagerMethod",{PageNumber:this.PageNumber,PageSize:this.PageSize}),"undefined"!=typeof this.callbackfunction&&null!=this.callbackfunction&&this.callbackfunction()},SetPageSize:function(e){this.PageSize=e.target.value,this.PageNumber=1,this.CurrentPage=this.PageNumber,this.GroupStart=this.PageNumber,this.GroupEnd=this.PageNumber+2,this.TotalPages=Math.ceil(this.TotalRecords/this.PageSize),this.GetData()},SetCurrentPage:function(e){this.PageNumber=e,this.CurrentPage=e,this.TotalPages==this.PageNumber&&this.PageNumber>3?(this.GroupStart=this.PageNumber-2,this.GroupEnd=this.PageNumber):this.TotalPages>this.PageNumber&&this.PageNumber>=3?(this.GroupStart=this.PageNumber-1,this.GroupEnd=this.PageNumber+1):(this.GroupStart=1,this.GroupEnd=3),this.GetData()},GetPageSizeOption:function(){for(var e=[],t=10,a=t;a<t+95;a+=5)e.push(a);this.PageSizeOption=e}}};var w=Object.assign(Y,{__name:"Pager",props:{numberofrecords:{type:Number,required:!0},prevText:{type:String,required:!0},nextText:{type:String,required:!0},firstText:{type:String,required:!0},lastText:{type:String,required:!0},callbackfunction:{type:Function},CurrentPageNumber:{type:Number}},setup(e){return{__sfc:!0}}}),B=w,V=Object(f["a"])(B,U,k,!1,null,null,null),G=V.exports;const z={components:{DynamicForm:p["DynamicForm"],Pager:G},props:{CustomlayoutId:{type:Number,required:!0}},data(){return{SharetoRole:[],shearedtypeRole:[],searchable:!0,reqFrom:null,loggeduserid:"",companyId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,AssignRolePopup:!1,RolesCheckData:[],RolesCheckReturnData:[],ShareToRoleitem:"",mode:"tags",FormSchema:[{layoutType:"Single",Data:[{astype:"RadioField",label:"Share with",name:"Sharewithtype",value:"User",placeholder:"",config:{options:[{value:"User",name:"User"},{value:"Role",name:"Role"}],showAddIcon:!1,onChange:this.SelectshareType},validationRules:""}]},{layoutType:"double",Data:[{astype:"MultiSelectField",mode:"tag",label:this.$t("User "),name:"User",value:"",config:{options:[],showAddIcon:!1,onChange:this.GetUSerId},placeholder:this.$t("SelectUser"),validationRules:{required:!0,max:100}},{astype:"MultiSelectField",mode:"tag",label:this.$t("Role "),name:"Role",value:"",config:{options:[],showAddIcon:!1,onChange:this.GetRolesID},placeholder:this.$t("SelectUser"),visibility:!1,validationRules:{required:!0,max:100}}]}],buttons:[{type:"submit",class:"btn btn-success",text:"<i class='fa fa-save pr-2'></i>Share"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i>Cancel",onClick:this.closepopup}],AssignRolePopup:!1,shareroleids:"",companyId:"",username:"",pageSize:1e4,RolesCheckData:[],sharedtoUser:!0,sharedtoUserIds:[],sharedtoRoleIds:[],is_paged:1,sortBy:"",sortExp:"",Page_Size:10,PageNumber:1,UserListingData:[],isLoading:!1,TotalPages:0,TotalRecords:0,Search:"",shareddatainlist:!1,NoRecordfound:!1,sharetoarray:[],sharedto:!0}},created(){var e=this;e.loggeduserid=e.GetUserInfo.ID,e.companyId=e.GetUserInfo.CompanyId,e.FetchRoleData(),e.FetchData(),e.BindUserRoleListing()},methods:{SearchData:function(){var e=this,t=`username=${e.Search}&is_paged=${e.is_paged}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&pageSize=${e.Page_Size}&pageNumber=${e.PageNumber}&custom_layout_id=${e.CustomlayoutId}`;i["a"].ShareUserRoleListing(t).then((function(t){e.UserListingData=JSON.parse(t.data),0==e.UserListingData.JsonData.length?e.TotalRecords=[]:e.TotalRecords=e.UserListingData.JsonData[0].TOTAL_RECORDS}))},BindUserRoleListing:function(){var e=this;e.isLoading=!0;var t=`username=${e.username}&is_paged=${e.is_paged}&sortBy=${e.sortBy}&sortExp=${e.sortExp}&pageSize=${e.Page_Size}&pageNumber=${e.PageNumber}&custom_layout_id=${e.CustomlayoutId}`;i["a"].ShareUserRoleListing(t).then((function(t){e.UserListingData=JSON.parse(t.data),0==e.UserListingData.JsonData[0].length?e.NoRecordfound=!0:e.NoRecordfound=!1,e.UserListingData.JsonData.length>0?(e.TotalRecords=e.UserListingData.JsonData[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.Page_Size),e.isLoading=!1):(e.TotalRecords=0,e.TotalPages=0)}))},pagerMethod(e){var t=this;t.PageNumber=e.PageNumber,t.Page_Size=e.PageSize,t.BindUserRoleListing()},SetPageSize:function(e){var t=this;t.isLoading=!0,t.Page_Size=e.target.value,t.PageNumber=1,t.TotalPages=Math.ceil(t.TotalRecords/t.Page_Size),t.BindUserRoleListing()},closeAssignpopup(){var e=this;e.AssignRolePopup=!1},roleListingDelete:function(e){var t=this;t.AssignRolePopup=!1,t.SharetoRole.pop()},SelectshareType(e,t){var a=this;a.sharedtoRoleIds=[],a.sharedto=!0,a.FormSchema[1].Data[0].value="",a.FormSchema[1].Data[1].value="",t.value=e.target.getAttribute("data-value"),"User"==t.value?(a.FormSchema[1].Data[0].visibility=!0,a.FormSchema[1].Data[1].visibility=!1,a.FormSchema[1].Data[1].value="",a.FetchData()):(a.FormSchema[1].Data[0].visibility=!1,a.FormSchema[1].Data[1].visibility=!0,a.FormSchema[1].Data[0].value="",a.FormSchema[0].Data[0].value="Role",a.FetchRoleData())},FetchData:function(){var e=this;(e.FormSchema[0].Data[0].name="User")&&(e.isLoading=!0,i["a"].UserDDL().then(t=>{""!=t.data&&null!=t.data&&(e.fetchuserdata=t.data,e.FormSchema[1].Data[0].config.options=[],e.fetchuserdata.forEach(t=>{e.FormSchema[1].Data[0].config.options.push({value:t.userid,name:t.username})})),e.isLoading=!1}))},FetchRoleData:async function(e,t){var a=this,s=`companyId=${a.companyId}&pageSize=${a.pageSize}&statusId=1001`;await i["a"].Roledata(s).then((function(e){null!=e.data.length&&(a.shearedtypeRole=e.data,a.shearedtypeRole.forEach((e,t)=>{a.FormSchema[1].Data[1].config.options.push({value:e.rolE_ID,name:e.rolE_NAME})}))})),a.isLoading=!1},closepopup(e){var t=this;t.$emit("closepopup",e),t.$emit("refreshlist",e)},GetUSerId(e,t,a){var s=this;s.sharedtoUser=!0,s.sharedtoUserIds.push(a.value);let o=s.fetchuserdata.findIndex(e=>e.userid==a.value);o>-1&&s.fetchuserdata.splice(o,1)},GetRolesID(e,t,a){var s=this;s.sharedtoUser=!1,s.sharedtoRoleIds.push(a.value);let o=s.shearedtypeRole.findIndex(e=>e.rolE_ID==a.value);o>-1&&s.shearedtypeRole.splice(o,1)},onSubmit:function(){var e=this,t=[];if(e.sharetoarray=[],t=1==e.sharedtoUser?e.sharedtoUserIds:e.sharedtoRoleIds,e.FormSchema[1].Data[0].value&&e.FormSchema[1].Data[0].value.forEach(t=>{e.UserListingData.JsonData.forEach(a=>{t.label===a.USERNAME&&(e.sharetoarray.push(a.USERNAME),e.sharedto=!1,e.ShowAlert(e.$t("ConfirmShareduservalue",!0,[e.sharetoarray]),"warning",!0,e.$t("Alert")))})}),e.FormSchema[1].Data[1].value&&e.FormSchema[1].Data[1].value.forEach(t=>{e.UserListingData.JsonData.forEach(a=>{t.label===a.USERNAME&&(e.sharetoarray.push(a.USERNAME),e.sharedto=!1,e.ShowAlert(e.$t("ConfirmSharedRolevalue",!0,[e.sharetoarray]),"warning",!0,e.$t("Alert")))})}),""!=e.FormSchema[1].Data[0].value||""!=e.FormSchema[1].Data[1].value){var a=`custom_layout_id=${e.CustomlayoutId}&rolesdetail=${t}&share_based_on=${e.FormSchema[0].Data[0].value}`;i["a"].ModifyShareWithOnCustomLayout(a).then((function(t){1==t.data&&(1==e.sharedto&&e.ShowAlert(e.$t("successmessagesharelayout"),"success",!0,e.$t("Alert")),e.FormSchema[1].Data[0].value="",e.FormSchema[1].Data[1].value="",e.sharetoarray=[],e.$refs.SharePopup.validateForm.reset(),e.sharedtoRoleIds=[],e.BindUserRoleListing())}))}},shareroleListingDelete:function(e){var t=this;t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t(t.FormSchema[0].Data[0].value),(function(){var a=`Custom_layout_id=${e.custom_layout_id}&share_based_on=${e.share_based_on}&sharedwithId=${e.role_id}`;i["a"].DeleteShareUserRole(a).then((function(e){"Success"==e.data[0].Status&&(t.ShowAlert(t.$t("ShareAndRole"),"success",!0,t.$t("Alert")),t.BindUserRoleListing())}))}))}}};var Q=Object.assign(z,{__name:"SharedRolesPopup",setup(e){return{__sfc:!0,Pager:G,DynamicForm:p["DynamicForm"]}}}),q=Q,j=Object(f["a"])(q,R,F,!1,null,null,null),H=j.exports,J={components:{Addlayoutpopup:C,SharedRoles:H,QuickAddpopup:O,Manageformlayout:T},data(){return{openclonepopup:!1,isLoading:!1,showLayoutPopup:!1,sharetopopup:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,id:80,LayoutListingData:[],sub_module_id:null,module_id:"",noRecord:!1,showSharePopup:!1,moduleNameList:[],subModuleNameList:[],moduleId:null,userTypeId:1,reqFrom:null,deviceType:[{id:"Web",name:"Web"},{id:"Andriod",name:"Andriod"},{id:"Window",name:"Window"}],LayoutType:[{value:"Add or edit",name:"Add or edit"},{value:"View",name:"View"},{value:"QuickAdd",name:"Quick Add"}],ddlModuleId:"",listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,Headers:c.TableHeader,searchCondition:"",TotalRecords:0,CustomlayoutId:null,headertext:"",MODULEID:"",SUBMODULEID:"",LAYOUTNAME:"",PLATFORM:"",LAYOUTTYPE:"",DESCRIPTION:"",LAYOUTSHARETOID:"",QuickAddpopup:!1,manageform:!1,getvalues:{},ActiveTemplet:null}},created:function(){var e=this;e.FetchData(),e.FetchModuleData(),c.bindleftCommonSearchdropdown(e,"CustomField","Module_Name"),c.bindleftCommonSearchdropdown(e,"CustomField","DeviceType"),c.bindleftCommonSearchdropdown(e,"CustomField","LayOutType")},methods:{OpenAddPAge(e,t){var a=this;a.CustomlayoutId=e.CUSTOM_LAYOUT_ID,a.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:a.CustomlayoutId,PreviewMode:t}})},getFormpopup(e){var t=this;t.manageform=!0,t.QuickAddpopup=!1,t.getvalues=e},closeQuickAddLayoutform:function(){var e=this;e.manageform=!1,e.QuickAddpopup=!0},closepopup:function(){this.showLayoutPopup=!1,this.sharetopopup=!1},closeQuickAddpopup:function(){this.QuickAddpopup=!1},refreshlist:function(){var e=this;e.FetchData()},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(t=>{let s={...t};switch(s.title){case"Detail":s.isVisible=!0;break;case"Edit":s.isVisible=!0;break;case"Share":"QuickAdd"==e.LAYOUT_TYPE?s.isVisible=!1:s.isVisible=!0;break;case"Clone":s.isVisible=!0;break;case"Delete":1==e.IS_ACTIVE_TEMPLATE&&""!=e.LAYOUT_SHARE_TO||1==e.IS_ACTIVE_TEMPLATE&&1==e.IS_SYSTEM_DEFAULT_TEMPLATE?s.isVisible=!1:s.isVisible=!0;break}a.push(s)}),a},leftCommonSearch:function(e){"(( TCL.LAYOUT_TYPE in ('Quick Add')))"==e.searchCondition?e.searchCondition="(( TCL.LAYOUT_TYPE in ('QuickAdd')))":"(( TCL.LAYOUT_TYPE in ('Add or edit')))"==e.searchCondition&&(e.searchCondition="(( TCL.LAYOUT_TYPE in ('Add,Edit')))"),this.PageNumber=e.PageNumber,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},actionButtonClick:function(e,t,a,s){var o=this;switch(e){case"OpenAddPAge":o.OpenAddPAge(t,"Detail");break;case"EditCustomLayout":o.EditCustomLayout(t);break;case"ShareTORole":o.ShareTORole(t);break;case"CloneCustomLayout":o.AddCustomLayout(t);break;case"DeleteSingleRecord":o.commonDeleteData(t.CUSTOM_LAYOUT_ID);break}},ShareTORole:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID&&(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID,t.MODULEID=e.MODULE_ID,t.SUBMODULEID=e.SUB_MODULE_ID,t.LAYOUTNAME=e.LAYOUT_NAME,t.PLATFORM=e.PLATFORM,t.LAYOUTTYPE=e.LAYOUT_TYPE,t.DESCRIPTION=e.DESCRIPTION,t.LAYOUTSHARETOID=e.LAYOUT_SHARE_TO_ID,t.sharetopopup=!0,t.$emit("FetchClone"))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"GetQuickAdd":this.GetQuickAdd(e);break;case"CustomFieldListing":this.CustomFieldListing();break;case"AddCustomLayout":this.AddCustomLayout(e);break;case"commonDeleteData":this.commonDeleteData();break}},GetQuickAdd:function(e){var t=this;t.QuickAddpopup=!0},CustomFieldListing:function(){this.$router.push({name:"CustomFieldsListing"})},EditCustomLayout:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID&&(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID),t.$router.push({path:"/Custom/ManageLayout/"+t.CustomlayoutId})},commonDeleteData:function(e){var t=this,a="";t.isLoading=!0,null==e?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=e,null!=a?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Report"),(function(){var e={ids:a,moduleName:"",subModuleCode:"",refCode:"TALYGEN_CUSTOM_LAYOUT"},s=JSON.stringify(e);i["a"].CommonCommonDelete(s).then((function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Record")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Report")]),"Success",!0,t.$t("Alert"))}))})):ShowAlert(t.$t("Selectanyrecordtodelete")),t.isLoading=!1},AddCustomLayout:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID?(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID,t.showLayoutPopup=!0,t.openclonepopup=!0):(t.showLayoutPopup=!0,t.CustomlayoutId=null,t.openclonepopup=!1)},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},FetchModuleData:function(){var e=this,t="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";i["a"].Modulenamedata(t).then(t=>{null!=t.data.Data&&(e.moduleNameList=t.data.Data)})},SelectSubmodule(e){var t=this;t.ddlModuleId=e;var a=`moduleId=${t.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;i["a"].Modulenamedata(a).then(e=>{null!=e.data.Data&&(t.subModuleNameList=e.data.Data)})},CloseAddPopup:function(){var e=this;e.showLayoutPopup=!1},clickEventOfColumn:function(e,t){"LAYOUT_NAME"==t.COLUMN_NAME&&this.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:e.CUSTOM_LAYOUT_ID}})},clickEventOfColumn1:function(e,t){t.COLUMN_NAME},clickEventOfColumn2:function(e,t){t.COLUMN_NAME},columnDataFormatter:function(e,t){return"LAYOUT_SHARE_TO"==t.COLUMN_NAME?""==e.LAYOUT_SHARE_TO?"-":e.LAYOUT_SHARE_TO.split(",").length:"feature_name"==t.COLUMN_NAME?null==e.feature_name?"-":e.feature_name:"SYSTEM_GENRATED_COLUMN"==t.COLUMN_NAME?""==e.SYSTEM_GENRATED_COLUMN?"-":e.SYSTEM_GENRATED_COLUMN.split(",").length:"USER_GENRATED_COLUMN"==t.COLUMN_NAME?""==e.USER_GENRATED_COLUMN?"-":e.USER_GENRATED_COLUMN.split(",").length:"TOTAL_RECORDS"==t.COLUMN_NAME?(""==e.USER_GENRATED_COLUMN?"":e.USER_GENRATED_COLUMN.split(",").length)+(""==e.SYSTEM_GENRATED_COLUMN?"":e.SYSTEM_GENRATED_COLUMN.split(",").length):e[t.COLUMN_NAME]},getRequestParams:function(e,t,a,s,o,i){let l={};return e&&(l["pageNum"]=e),i&&(l["searchcondition"]=i),o&&(l["isPaged"]=o),a&&(l["sortBy"]=a),s&&(l["sortExp"]=s),t&&(l["pageSize"]=t),l},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},FetchData:function(){var e=this;e.isLoading=!0;const t=this.getRequestParams(this.sortBy,this.sortExp,this.pageSize,this.pageNumber,this.isPaged,this.searchcondition);t.pageSize=e.PageSize,t.pageNumber=e.PageNumber,t.searchCondition=e.searchCondition,e.PageNumber?t.pageNumber=e.PageNumber:e.PageNumber=t.pageNumber=1,"undefined"!=typeof e.isPaged?t.isPaged=e.isPaged:e.isPaged=t.isPaged=1,t.isPaged=e.isPaged,t.sortBy=e.SortBy,t.sortExp=e.SortExp;var a="";e.isBlank(e.searchCondition)||(a+=e.searchCondition),e.isBlank(e.conditionForInstantSearch)||(a+=e.isBlank(e.searchCondition)?e.conditionForInstantSearch:" AND "+e.conditionForInstantSearch),""!=a&&(t.searchCondition=a),i["a"].GetCustomLayout(t).then((function(t){e.isLoading=!1,null!=JSON.parse(t.data)?(e.LayoutListingData=JSON.parse(t.data).data,e.Headers.forEach(t=>{t.settings=null,"LAYOUT_NAME"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn}),"IS_SYSTEM_DEFAULT_TEMPLATE"==t.COLUMN_NAME&&(t.settings={isInSlot:!0,clickEvent:e.ChangeTemplateStatus}),"IS_ACTIVE_TEMPLATE"==t.COLUMN_NAME&&(t.settings={isInSlot:!0,clickEvent:e.ChangeTemplateStatus}),"LAYOUT_SHARE_TO"==t.COLUMN_NAME&&(t.settings={inSlot:!0,clickEvent:e.clickEventOfColumn1,formatter:e.columnDataFormatter}),"feature_name"==t.COLUMN_NAME&&(t.settings={inSlot:!0,clickEvent:e.clickEventOfColumn1,formatter:e.columnDataFormatter}),"LAST_MODIFY_DATE"==t.COLUMN_NAME&&(t.settings={inSlot:!0}),"SYSTEM_GENRATED_COLUMN"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn2,formatter:e.columnDataFormatter}),"USER_GENRATED_COLUMN"==t.COLUMN_NAME&&(t.settings={formatter:e.columnDataFormatter}),"TOTAL_RECORDS"==t.COLUMN_NAME&&(t.settings={formatter:e.columnDataFormatter})}),null!=e.LayoutListingData?(e.TotalRecords=e.LayoutListingData[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.LayoutListingData=[],e.TotalRecords=0,e.isLoading=!1)):(e.noRecord=!0,e.LayoutListingData=[],e.TotalRecords=0,e.isLoading=!1)})),e.isLoading=!1},SharePopup(){var e=this;e.showSharePopup=!0},ClosePopupShare(){var e=this;e.showSharePopup=!1},ChangeTemplateStatus:function(e,t,a){var s=this,o=!e.IS_ACTIVE_TEMPLATE,l=!e.IS_SYSTEM_DEFAULT_TEMPLATE,r=a;o=o?1:0,l=l?1:0;var n=`custom_layout_id=${e.CUSTOM_LAYOUT_ID}&is_active_template=${o}&is_default_template=${l}&update_field=${r}`;i["a"].ChangeTemplateStatus(n).then((function(e){"1"==e.data&&(s.ShowAlert(s.$t("CustomLayoutStatusSuccess",[s.$t("Custom_Layout")]),"success",!0,s.$t("Alert")),s.FetchData()),"2"==e.data&&(s.ShowAlert(s.$t("CustomLayoutStatusSuccessDefault",[s.$t("Custom_Layout")]),"success",!0,s.$t("Alert")),s.FetchData()),""==e.data&&s.ShowAlert(s.$t("CustomLayoutStatusDefault",[s.$t("Custom_Layout")]),"success",!0,s.$t("Alert"))})),$(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled")}}},W=J,K=(a("caf1"),Object(f["a"])(W,s,o,!1,null,"a8a8a596",null));t["default"]=K.exports},b817:function(e,t,a){var s=a("07ef");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var o=a("499e").default;o("4faba232",s,!0,{sourceMap:!1,shadowMode:!1})},caf1:function(e,t,a){"use strict";a("b817")}}]);
//# sourceMappingURL=chunk-62492640.js.map