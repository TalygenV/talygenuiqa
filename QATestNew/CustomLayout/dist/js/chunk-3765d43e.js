(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3765d43e"],{"0b3e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e._self._c;return t("div",[t("loader",{attrs:{isVisible:e.isLoading}}),t("section",{staticClass:"main-content"},[t("tg-list",{attrs:{IsShowAction:!0,ModuleName:"CustomField",SubModuleCode:"CustomField",LegendArray:[],showCheckBox:!0,IdentityColumn:"CUSTOM_LAYOUT_ID",listType:["List"],HeaderText:e.$t("Custom_Layout"),ListData:e.LayoutListingData,HeaderData:e.Headers,HeaderButtons:e.listheaderbuttons,SearchFields:e.leftSearchFields,NorecordfoundText:e.$t("NoRecordfound"),RenderRowActionMethod:e.renderActions,ListDataCallBackFunction:e.FetchData,TotalRecords:e.TotalRecords,SortExp:e.SortExp,SortBy:e.SortBy},on:{PagerButtonClick:e.pagerMethod,SortdataButtonClick:e.sortdata,ActionButtonClick:e.actionButtonClick,HeaderButtonClick:e.commonHeaderButtonClick,LeftsearchButtonClick:e.leftCommonSearch},scopedSlots:e._u([{key:"slotdata",fn:function({data:a}){return["MODIFY_DATE"==a.column.COLUMN_NAME?[e._v(" "+e._s(e.$filters.formatDate(a.row.MODIFY_DATE))+" ")]:e._e(),"IS_SYSTEM_DEFAULT_TEMPLATE"==a.column.COLUMN_NAME?[t("label",{class:{switch:0==a.row.IS_SYSTEM_DEFAULT_TEMPLATE,"switch disabled":1==a.row.IS_SYSTEM_DEFAULT_TEMPLATE}},[t("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheckDefault",type:"checkbox"},domProps:{checked:a.row.IS_SYSTEM_DEFAULT_TEMPLATE},on:{change:function(t){return e.ChangeTemplateStatus(a.row,t,"Default")}}}),t("span",{staticClass:"slider round"},[t("span",{staticClass:"slider-yes"},[e._v("Yes")]),t("span",{staticClass:"slider-no"},[e._v("No")])])])]:e._e(),"IS_ACTIVE_TEMPLATE"==a.column.COLUMN_NAME?[t("label",{class:{switch:!0,"switch disabled":1==a.row.IS_SYSTEM_DEFAULT_TEMPLATE}},[t("input",{staticClass:"form-check-input rdoticketfor custom-control-input dynamic",attrs:{id:"isTrueCheck",type:"checkbox"},domProps:{checked:a.row.IS_ACTIVE_TEMPLATE},on:{change:function(t){return e.ChangeTemplateStatus(a.row,t,"Active")}}}),t("span",{staticClass:"slider round"},[t("span",{staticClass:"slider-yes"},[e._v("Active")]),t("span",{staticClass:"slider-no"},[e._v("In-Active")])])])]:e._e(),"MODIFY_DATE"==a.column.COLUMN_NAME?[e._v(" "+e._s(e.$filters.formatDate(a.row.LAST_MODIFY_DATE))+" ")]:e._e()]}}])})],1),e.showLayoutPopup?t("Addlayoutpopup",{attrs:{CustomlayoutId:e.CustomlayoutId},on:{closepopup:e.closepopup,refreshlist:e.refreshlist}}):e._e(),e.sharetopopup?t("SharedRoles",{attrs:{CustomlayoutId:e.CustomlayoutId,MODULEID:e.MODULEID,SUBMODULEID:e.SUBMODULEID,LAYOUTNAME:e.LAYOUTNAME,PLATFORM:e.PLATFORM,LAYOUTTYPE:e.LAYOUTTYPE,DESCRIPTION:e.DESCRIPTION,LAYOUTSHARETOID:e.LAYOUTSHARETOID},on:{closepopup:e.closepopup,refreshlist:e.refreshlist}}):e._e()],1)},s=[],l=(a("14d9"),a("9769"));let i=[{title:"Custom Fields",iconClass:"fa-list",callbackfunction:"CustomFieldListing",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{title:"Add Layout",iconClass:"fa-plus",callbackfunction:"AddCustomLayout",additionalClass:"",isdisabled:!1,isvisible:!0,checkPrivilege:!0},{id:"DeleteMultiple",title:"Delete",iconClass:"fa-trash-o",callbackfunction:"commonDeleteData",isdisabled:!0,isvisible:!0,isEnabledOnSelectedRow:!0}],n=[{fieldName:"LAYOUT NAME",fieldType:"text",fieldIcon:"fa-file",fieldSearchConditionName:["TCL.LAYOUT_NAME"],isSearch:!1,value:"",listOptions:[]},{fieldName:"MODULE",fieldType:"ddl-check",fieldIcon:"fa-user",fieldSearchConditionName:["TM.MODULE_ID"],isSearch:!1,value:"",listOptions:[]},{fieldName:"Device TYPE",fieldType:"ddl-check",fieldIcon:"fa-folder",fieldSearchConditionName:["TCL.PLATFORM"],isSearch:!1,value:"",listOptions:[]},{fieldName:"LAYOUT TYPE",fieldType:"ddl-check",fieldIcon:"fa-calendar",fieldSearchConditionName:["TCL.LAYOUT_TYPE"],isSearch:!1,value:"",listOptions:[]}],u=[{title:"Preview",callbackfunction:"OpenAddPAge",icon:"fa fa-eye text-success action-icon",additionalSpan:""},{title:"Edit",callbackfunction:"EditCustomLayout",icon:"fa fa-pencil text-success action-icon",additionalSpan:""},{title:"Share",callbackfunction:"ShareTORole",href:"javascript:void(0)",icon:"fa fa-share-alt text-success action-icon",additionalSpan:""},{title:"Clone",callbackfunction:"CloneCustomLayout",href:"javascript:void(0)",icon:"fa fa-paper-plane text-success action-icon",additionalSpan:""},{title:"Delete",callbackfunction:"DeleteSingleRecord",href:"javascript:void(0)",icon:"fa fa-clock-o text-warning action-icon",additionalSpan:""}],d=[{COLUMN_NAME:"LAYOUT_NAME",DATA_TYPE:"Text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Name",DISPLAY_ORDER:1},{COLUMN_NAME:"LAYOUT_TYPE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Layout Type",DISPLAY_ORDER:2},{COLUMN_NAME:"MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Module Name",DISPLAY_ORDER:3},{COLUMN_NAME:"SUB_MODULE_NAME",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Sub Module",DISPLAY_ORDER:4},{COLUMN_NAME:"LAYOUT_SHARE_TO",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Roles",DISPLAY_ORDER:5},{COLUMN_NAME:"IS_SYSTEM_DEFAULT_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Default",DISPLAY_ORDER:6},{COLUMN_NAME:"IS_ACTIVE_TEMPLATE",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Template Status",DISPLAY_ORDER:7},{COLUMN_NAME:"PLATFORM",DATA_TYPE:"text",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Device Type",DISPLAY_ORDER:8},{COLUMN_NAME:"MODIFY_DATE",DATA_TYPE:"date",SORTABLE:!0,VISIBLE:!0,DISPLAY_NAME:"Device Type",DISPLAY_ORDER:9},{COLUMN_NAME:"SYSTEM_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"System Gernated",DISPLAY_ORDER:10},{COLUMN_NAME:"USER_GENRATED_COLUMN",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"User Defined",DISPLAY_ORDER:11},{COLUMN_NAME:"TOTAL_RECORDS",DATA_TYPE:"text",SORTABLE:!1,VISIBLE:!0,DISPLAY_NAME:"Total Field",DISPLAY_ORDER:12}];function r(e,t,a){var o=e;let s={};s["moduleName"]=t,s["type"]=a;var i=[{id:"Web",name:"Web"},{id:"Mobile",name:"Mobile"}],n=[{id:"Add",name:"Add"},{id:"View",name:"View"},{id:"Edit",name:"Edit"}];l["a"].Modulenamedata(s).then((function(e){var t=e.data.Data;null!=t&&"Module_Name"==a&&(o.leftSearchFields[1].listOptions=t.map(e=>{const t={};return t.name=e.module_name,t.value=e.module_id.toString(),t}))})),"DeviceType"==a&&(o.leftSearchFields[2].listOptions=i.map(e=>{const t={};return t.name=e.name,t.value=e.id.toString(),t})),"LayOutType"==a&&(o.leftSearchFields[3].listOptions=n.map(e=>{const t={};return t.name=e.name,t.value=e.id.toString(),t}))}var c={buttons:i,leftsearchSchema:n,listActions:u,TableHeader:d,bindleftCommonSearchdropdown:r},m=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[t("section",[t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup(t)}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),null==this.CustomlayoutId?t("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("AddLayout"))+" ")]):t("h4",{staticClass:"modal-title"},[e._v(" "+e._s(e.$t("CloneLayout"))+" ")])]),t("div",{staticClass:"modal-body"},[t("Form",{ref:"form"},[t(a.DynamicForm,{attrs:{lang:"en",buttons:e.buttons,schema:e.FormSchema},on:{OnSubmit:e.onSubmit}})],1)],1)])])])]),e.AssignRolePopup?t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-0"},[t("h4",{staticClass:"modal-title py-3"},[e._v(" "+e._s(e.$t("AssignRole"))+" ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"RolesCheckData listing"}},[e._m(0),t("tbody",e._l(e.RolesCheckData,(function(a){return t("tr",{key:a},[t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.layoutname)+" ")])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.platform)+" ")])])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"float-right"},[t("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:e.$t("Submit")},on:{click:function(t){return e.closeAssignpopup(t)}}},[t("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),e._v(" "+e._s(e.$t("un assgin from previous layout and assign to new"))+" ")]),t("button",{staticClass:"btn btn-primary delete-btn my-sm-0",attrs:{title:e.$t("Cancel")},on:{click:function(t){return e.roleListingDelete(t)}}},[t("em",{staticClass:"fa fa-times pl-2 pr-2"}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])])])])])]):e._e()])])},p=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",{staticClass:"thead-bg"},[t("tr",{staticClass:"text-center"},[t("th",{staticClass:"text-center"},[t("span",[e._v("Layout Name")])]),t("th",{staticClass:"text-center"},[t("span",[e._v("PlatForm")])])])])}],h=a("240d");const C={components:{DynamicForm:h["DynamicForm"]},props:{showlayoutpopup:{type:Boolean},CustomlayoutId:{type:Number,required:!0}},data(){return{isLoading:!1,headertext:"",submoduleId:"",layoutName:"",platForm:"",SharetoRole:[],layoutType:"",description:"",moduleNameList:[],subModuleNameList:[],shearedtypeRole:[],searchable:!0,moduleId:null,userTypeId:1,reqFrom:null,loggeduserid:"",companyId:"",ddlModuleId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,ShareToItems:[],fieldValue:"",ModuleName:"",SubmoduleName:"",RolesCheckReturnData:[],RolesCheckData:[],ShareToRoleitem:"",FormSchema:[{layoutType:"double",Data:[{astype:"SelectField",label:"Module Name",name:"ModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1,onChange:this.GetModuleId},validationRules:"required"},{astype:"SelectField",label:"Sub Module Name",name:"SubModuleName",value:"",placeholder:"",disabled:!1,config:{options:[],showAddIcon:!1},validationRules:"required"},{astype:"TextField",label:"Layout Name",name:"LayoutName",value:"",placeholder:"Enter Layout Name",validationRules:{required:!0},config:{onChange:function(e,t){console.log("On Change Textbox",e)},onBlur:function(e,t){console.log("On Change Textbox",e)}}},{astype:"SelectField",label:"Platform",name:"Platform",value:"",placeholder:"",config:{options:[{value:"Web",name:"Web"},{value:"Mobile",name:"Mobile"}],showAddIcon:!1,onChange:function(e,t){},onAddButtonClick:function(e,t){}},validationRules:"required"},{astype:"MultiSelectField",label:"Layout Type",mode:"tag",name:"LayoutType",value:[],placeholder:"",disabled:!1,config:{options:[{value:"Add",name:"Add"},{value:"Edit",name:"Edit"},{value:"View",name:"View"}],showAddIcon:!1,onChange:function(e,t){},onAddButtonClick:function(e,t){}},validationRules:"required"},{astype:"MultiSelectField",label:"Share To Role",mode:"tag",name:"ShareToRole",value:[],placeholder:"",disabled:!1,config:{options:[],onChange:this.onChangeOnDropdownChange},validationRules:""}]},{layoutType:"signle",Data:[{astype:"TextAreaField",label:"Description",name:"Description",value:"",placeholder:"",validationRules:"required"}]}],buttons:[{type:"submit",class:"btn btn-success saveSendforApproval",text:"<i class='fa fa-save pr-2'></i> Save"},{type:"button",class:"btn btn-danger",text:"<i class='fa fa-close pr-2'></i> Cancel",onClick:this.onCancel}],AssignRolePopup:!1,shareroleids:""}},async created(){var e=this;e.loggeduserid=e.GetUserInfo.ID,e.companyId=e.GetUserInfo.CompanyId,e.FetchModuleData(),await e.FetchRoleData(),e.FetchClone()},methods:{roleListingDelete:function(e){var t=this;t.AssignRolePopup=!1,t.FormSchema[0].Data[5].value.splice(-1,1)},onChangeOnDropdownChange:function(e,t){var a=this,o=a.FormSchema[0].Data[0].value,s=a.FormSchema[0].Data[1].value,i=a.FormSchema[0].Data[3].value,n=a.FormSchema[0].Data[4].value,u=null,d=null,r=t.value,c=r.length-1,m=r[c];a.ShareToRoleitem=m;var p=`module_id=${o}&sub_module_id=${s}&layout_name=${u}&platform=${i}&layout_type=${n}&description=${d}&rolesdetail=${a.ShareToRoleitem}`;l["a"].CheckRolesOnCustomLayout(p).then((function(e){a.RolesCheckReturnData=e.data.data,""!=e.data.data&&null!=e.data.data&&(a.RolesCheckData=[],a.RolesCheckReturnData[0].forEach((e,t)=>{a.RolesCheckData.push({Customlayout_id:e.custom_layout_id,layoutname:e.layout_name,platform:e.platform})}),a.AssignRolePopup=!0)}))},FetchModuleData:function(){var e=this,t="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";l["a"].Modulenamedata(t).then(t=>{null!=t.data.Data&&(e.moduleNameList=t.data.Data,e.moduleNameList.forEach((t,a)=>{e.FormSchema[0].Data[0].config.options.push({value:t.module_id,name:t.module_name})}))})},GetModuleId(e,t,a){var o=this;o.ddlModuleId=a||e.target.value,o.FormSchema[0].Data[1].config.options=[];var s=`moduleId=${o.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;l["a"].Modulenamedata(s).then(e=>{null!=e.data.Data&&(o.subModuleNameList=e.data.Data,o.subModuleNameList.forEach((e,t)=>{o.FormSchema[0].Data[1].config.options.push({value:e.sub_module_id,name:e.sub_module_name})}))})},FetchRoleData:async function(e,t){var a=this,o=`companyId=${a.companyId}&pageSize=${a.pageSize}&statusId=1001`;await l["a"].Roledata(o).then((function(e){null!=e.data.length&&(a.shearedtypeRole=e.data,a.shearedtypeRole.forEach((e,t)=>{a.FormSchema[0].Data[5].config.options.push({value:e.rolE_ID,name:e.rolE_NAME})}))})),a.isLoading=!1},closepopup(e){var t=this;t.$emit("closepopup",e),t.$emit("refreshlist",e)},closeAssignpopup(){var e=this;e.AssignRolePopup=!1},onCancel:function(e){var t=this;t.FormSchema[0].Data[1].config.options=[],this.closepopup(e)},FetchClone:function(){var e=this;e.Cloneheader=!0;var t="custom_layout_id="+e.CustomlayoutId;l["a"].GetCustomLayoutPopUp(t).then((function(t){if(t.data){var a=JSON.parse(t.data),o=a.data[0].layout_type.split(","),s=a.shareto;if(e.GetModuleId("","",a.data[0].MODULE_ID),null!=a){e.GetModuleId(null,null,a.data[0].MODULE_ID),e.FormSchema[0].Data[0].value=a.data[0].MODULE_ID,e.FormSchema[0].Data[0].disabled=!0,e.FormSchema[0].Data[1].value=a.data[0].sub_module_id,e.FormSchema[0].Data[1].disabled=!0,e.FormSchema[0].Data[2].value=a.data[0].layout_name,e.FormSchema[0].Data[3].value=a.data[0].platform,e.FormSchema[1].Data[0].value=a.data[0].description;var l=[];o.map(e=>{l.push({label:e,value:e})}),e.FormSchema[0].Data[4].value=l;var i=[];s.map(t=>{var a=e.shearedtypeRole.find(e=>e.rolE_ID==t.role_id);i.push({label:a.rolE_NAME,value:a.rolE_ID})}),e.FormSchema[0].Data[5].value=i}}}))},onSubmit(e,t){var a=this;a.isLoading=!0,a.fieldValue=e;let o=[],s=[];if(null!=a.fieldValue.LayoutType&&a.fieldValue.LayoutType.length>0&&a.fieldValue.LayoutType.forEach(e=>{o.push(e.value)}),null!=a.fieldValue.ShareToRole&&a.fieldValue.ShareToRole.length>0&&a.fieldValue.ShareToRole.forEach(e=>{s.push(e.value)}),void 0!=a.fieldValue||null!=a.fieldValue)if(null==a.CustomlayoutId||""==a.CustomlayoutId){var i=`module_id=${a.fieldValue.ModuleName}&sub_module_id=${a.fieldValue.SubModuleName}&layout_name=${a.fieldValue.LayoutName}&platform=${a.fieldValue.Platform}&layout_type=${o.join(",")}&description=${a.fieldValue.Description}&rolesdetail=${s.join(",")}`;l["a"].AddCustomLayoutData(i).then((function(e){"2"==e.data?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==e.data?a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):e.data>=1?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:e.data}})):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert"))}))}else if(null!=a.CustomlayoutId||""!=a.CustomlayoutId){a.isLoading=!1;i=`custom_layout_id=${a.CustomlayoutId}&layout_name=${a.fieldValue.LayoutName}&layout_type=${o.join(",")}&description=${a.fieldValue.Description}&platform=${a.fieldValue.Platform}&rolesdetail=${s.join(",")}`;l["a"].SaveCloneCustomLayout(i).then((function(e){"1"==e.data?(a.ShowAlert(a.$t("CustomFieldsAdd",[a.$t("Custom_Layout")]),"success",!0,a.$t("Alert")),a.closepopup()):"2"==e.data?a.ShowAlert(a.$t("AddLayoutError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):"3"==e.statusText?a.ShowAlert(a.$t("Talygen_coustom_Field not exists",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert")):a.ShowAlert(a.$t("AddLayoutSystemFieldError",[a.$t("Custom_Layout")]),"failure",!0,a.$t("Alert"))}))}a.isLoading=!1,a.FetchRoleData(a.fieldValue)}}};var _=Object.assign(C,{__name:"AddLayoutpopup",setup(e){return{__sfc:!0,DynamicForm:h["DynamicForm"]}}}),S=_,A=a("2877"),E=Object(A["a"])(S,m,p,!1,null,null,null),L=E.exports,f=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle"},[t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.closepopup()}}},[t("em",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t("h4",{staticClass:"modal-title",attrs:{name:"header"}},[e._v(" "+e._s(e.$t("AddLayout"))+" ")])]),t("Form",[t("div",{staticClass:"modal-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"form-group"},[t("Field",{attrs:{name:"SharetoRole",label:"Share To Role"},model:{value:e.SharetoRole,callback:function(t){e.SharetoRole=t},expression:"SharetoRole"}},[t("label",[e._v(e._s(e.$t("SharetoRole"))+":")]),t(a.Multiselect,e._b({staticClass:"form-control",attrs:{options:e.Options,searchable:!0,taggable:!0,label:"name",multiple:!0,"track-by":"name",placeholder:"Select",mode:"multiple",hideSelected:!1,"close-on-select":!1},on:{input:e.onChangeOnDropdownChange},model:{value:e.SharetoRole,callback:function(t){e.SharetoRole=t},expression:"SharetoRole"}},"Multiselect",e.field,!1))],1)],1)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"float-right"},[t("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:e.$t("Submit")},on:{click:function(t){return e.ModifySharetoRole()}}},[t("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),e._v(" "+e._s(e.$t("Submit"))+" ")]),t("button",{staticClass:"btn btn-primary delete-btn",attrs:{title:e.$t("Cancel")},on:{click:e.closepopup}},[t("em",{staticClass:"fa fa-times pl-2 pr-2"}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])])])],1),e.AssignRolePopup?t("div",{staticClass:"my-popups"},[t("div",{staticClass:"modal d-block"},[t("div",{staticClass:"modal-dialog modal-dialog-centered ui-draggable"},[t("div",{staticClass:"modal-content"},[t("div",{staticClass:"modal-header ui-draggable-handle py-0"},[t("h4",{staticClass:"modal-title py-3"},[e._v(" "+e._s(e.$t("AssignRole"))+" ")])]),t("div",{staticClass:"modal-body"},[t("div",{staticClass:"table-responsive table-fix-header"},[t("table",{staticClass:"table table-bordered mt-0",staticStyle:{width:"100%"},attrs:{id:"example","aria-label":"RolesCheckData listing"}},[e._m(0),t("tbody",e._l(e.RolesCheckData,(function(a){return t("tr",{key:a},[t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.layoutname)+" ")])]),t("td",{staticClass:"text-center"},[t("span",{staticClass:"text-center"},[e._v(" "+e._s(a.platform)+" ")])])])})),0)])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-2"},[t("div",{staticClass:"float-right"},[t("a",{staticClass:"btn btn-success mr-2 my-sm-0",attrs:{href:"javascript:;",title:e.$t("Submit")},on:{click:function(t){return e.closeAssignpopup(t)}}},[t("em",{staticClass:"fa fa-floppy-o pl-2 pr-2"}),e._v(" "+e._s(e.$t("un assgin from previous layout and assign to new"))+" ")]),t("button",{staticClass:"btn btn-primary delete-btn my-sm-0",attrs:{title:e.$t("Cancel")},on:{click:function(t){return e.roleListingDelete(t)}}},[t("em",{staticClass:"fa fa-times pl-2 pr-2"}),e._v(" "+e._s(e.$t("Cancel"))+" ")])])])])])])])])]):e._e()])])])},D=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("thead",{staticClass:"thead-bg"},[t("tr",{staticClass:"text-center"},[t("th",{staticClass:"text-center"},[t("span",[e._v("Layout Name")])]),t("th",{staticClass:"text-center"},[t("span",[e._v("PlatForm")])])])])}],T=a("8e5f"),y=a.n(T);const M={components:{Multiselect:y.a},props:{showlayoutpopup:{type:Boolean},CustomlayoutId:{type:Number,required:!0},MODULEID:{type:Number,required:!0},SUBMODULEID:{type:Number,required:!0},LAYOUTNAME:{type:String,required:!0},PLATFORM:{type:String,required:!0},LAYOUTTYPE:{type:String,required:!0},DESCRIPTION:{type:String,required:!0},LAYOUTSHARETOID:{type:String,required:!0}},data(){return{SharetoRole:[],shearedtypeRole:[],searchable:!0,reqFrom:null,loggeduserid:"",companyId:"",pageSize:1e4,pageNum:1,role_id:"",Options:[],Cloneheader:!1,AssignRolePopup:!1,RolesCheckData:[],RolesCheckReturnData:[],ShareToRoleitem:"",mode:"tags"}},created(){var e=this;e.loggeduserid=e.GetUserInfo.ID,e.companyId=e.GetUserInfo.CompanyId,e.FetchRoleData(),e.FetchClone()},methods:{closeAssignpopup(){var e=this;e.AssignRolePopup=!1},roleListingDelete:function(e){var t=this;t.AssignRolePopup=!1,t.SharetoRole.pop()},onChangeOnDropdownChange:function(){var e=this,t=e.SharetoRole.length-1;e.ShareToRoleitem=e.SharetoRole[t].value;var a=`module_id=${e.MODULEID}&sub_module_id=${e.SUBMODULEID}&custom_layout_id=${e.CustomlayoutId}&layout_name=${e.LAYOUTNAME}&platform=${e.PLATFORM}&layout_type=${e.LAYOUTTYPE}&description=${e.DESCRIPTION}&rolesdetail=${e.ShareToRoleitem}`;l["a"].CheckRolesOnCustomLayout(a).then((function(t){e.RolesCheckReturnData=t.data.data,""!=t.data.data&&null!=t.data.data&&(e.RolesCheckData=[],e.RolesCheckReturnData[0].forEach((t,a)=>{e.RolesCheckData.push({Customlayout_id:t.custom_layout_id,layoutname:t.layout_name,platform:t.platform})}),e.AssignRolePopup=!0)}))},FetchRoleData:async function(){var e=this;e.Options=[];var t=`companyId=${e.companyId}&pageSize=${e.pageSize}&statusId=1001`;await l["a"].Roledata(t).then((function(t){null!=t.data.length&&(e.shearedtypeRole=t.data,e.shearedtypeRole.forEach((t,a)=>{e.Options.push({name:t.rolE_NAME,value:t.rolE_ID})}))})),null!=e.CustomlayoutId&&e.FetchClone(),e.isLoading=!1},FetchClone:function(){var e=this;e.Cloneheader=!0;var t=[],a=[],o=[],s="custom_layout_id="+e.CustomlayoutId;l["a"].GetCustomLayoutPopUp(s).then((function(s){o=JSON.parse(s.data),null!=o&&(t=o.shareto,t.map(t=>{var o=e.shearedtypeRole.find(e=>e.rolE_ID==t.role_id);a.push({name:o.rolE_NAME,value:o.rolE_ID})}),e.SharetoRole=a)}))},closepopup(e){var t=this;t.$emit("closepopup",e),t.$emit("refreshlist",e)},ModifySharetoRole:function(){var e=this;let t=[];null!=e.SharetoRole&&e.SharetoRole.length>0&&e.SharetoRole.forEach(e=>{t.push(e.value)});var a=`custom_layout_id=${e.CustomlayoutId}&rolesdetail=${t.join(",")}`;l["a"].ModifyShareWithOnCustomLayout(a).then((function(t){"OK"==t.statusText&&e.closepopup()})).catch(e=>{console.log(e)})}}};var g=Object.assign(M,{__name:"SharedRolesPopup",setup(e){return{__sfc:!0,Multiselect:y.a}}}),v=g,O=Object(A["a"])(v,f,D,!1,null,null,null),b=O.exports,I={components:{Addlayoutpopup:L,SharedRoles:b},data(){return{isLoading:!1,showLayoutPopup:!1,sharetopopup:!1,PageSize:10,PageNumber:1,isPaged:1,TotalPages:0,SortBy:"",SortExp:"",PageSizeOption:null,CurrentPage:1,id:80,LayoutListingData:[],sub_module_id:null,module_id:"",noRecord:!1,showSharePopup:!1,moduleNameList:[],subModuleNameList:[],moduleId:null,userTypeId:1,reqFrom:null,deviceType:[{id:"Web",name:"Web"},{id:"Andriod",name:"Andriod"},{id:"Window",name:"Window"}],LayoutType:[{id:"Add",name:"Add"},{id:"View",name:"View"},{id:"Edit",name:"Edit"}],ddlModuleId:"",listheaderbuttons:c.buttons,leftSearchFields:c.leftsearchSchema,listActions:c.listActions,Headers:c.TableHeader,searchCondition:"",TotalRecords:0,CustomlayoutId:null,headertext:"",MODULEID:"",SUBMODULEID:"",LAYOUTNAME:"",PLATFORM:"",LAYOUTTYPE:"",DESCRIPTION:"",LAYOUTSHARETOID:""}},created:function(){var e=this;e.FetchData(),e.FetchModuleData(),c.bindleftCommonSearchdropdown(e,"CustomField","Module_Name"),c.bindleftCommonSearchdropdown(e,"CustomField","DeviceType"),c.bindleftCommonSearchdropdown(e,"CustomField","LayOutType")},methods:{OpenAddPAge(e){var t=this,a="ModuleName=CRM&SubModuleName=CRM_DEALS&Platform=WEB&LayoutType=Add";l["a"].GetAssignedLayoutIdToUser(a).then((function(a){t.CustomlayoutId=a.data,t.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:t.CustomlayoutId,PreviewMode:e}})}))},closepopup:function(){this.showLayoutPopup=!1,this.sharetopopup=!1},refreshlist:function(){var e=this;e.FetchData()},renderActions:function(e){var t=this;let a=[];return t.listActions.forEach(e=>{let t={...e};switch(t.title){case"Preview":t.isVisible=!0;break;case"Edit":t.isVisible=!0;break;case"Share":t.isVisible=!0;break;case"Clone":t.isVisible=!0;break;case"Delete":t.isVisible=!0;break}a.push(t)}),a},leftCommonSearch:function(e){this.PageNumber=e.PageNumber,"undefined"!=typeof e.searchCondition?this.searchCondition=e.searchCondition:this.searchCondition="",this.FetchData()},actionButtonClick:function(e,t,a,o){var s=this;switch(e){case"OpenAddPAge":s.OpenAddPAge("Preview");break;case"EditCustomLayout":s.EditCustomLayout(t);break;case"ShareTORole":s.ShareTORole(t);break;case"CloneCustomLayout":s.AddCustomLayout(t);break;case"DeleteSingleRecord":s.commonDeleteData(t.CUSTOM_LAYOUT_ID);break}},ShareTORole:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID&&(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID,t.MODULEID=e.MODULE_ID,t.SUBMODULEID=e.SUB_MODULE_ID,t.LAYOUTNAME=e.LAYOUT_NAME,t.PLATFORM=e.PLATFORM,t.LAYOUTTYPE=e.LAYOUT_TYPE,t.DESCRIPTION=e.DESCRIPTION,t.LAYOUTSHARETOID=e.LAYOUT_SHARE_TO_ID,t.sharetopopup=!0,t.$emit("FetchClone"))},commonHeaderButtonClick:function(e){switch(e.callbackfunction){case"CustomFieldListing":this.CustomFieldListing();break;case"AddCustomLayout":this.AddCustomLayout(e);break;case"commonDeleteData":this.commonDeleteData();break}},CustomFieldListing:function(){this.$router.push({name:"CustomFieldsListing"})},EditCustomLayout:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID&&(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID),t.$router.push({path:"/Custom/ManageLayout/"+t.CustomlayoutId})},commonDeleteData:function(e){var t=this,a="";t.isLoading=!0,null==e?$(".chkItems:checkbox:checked").not("[id^='chkAll_0']").each((function(){a.length>0&&(a+=","),a+=$(this).val()})):a=e,null!=a?t.confirmR(t.$t("ConfirmDelete"),!0,t.$t("Delete")+"  "+t.$t("Report"),(function(){var e={ids:a,moduleName:"",subModuleCode:"",refCode:"TALYGEN_CUSTOM_LAYOUT"},o=JSON.stringify(e);l["a"].CommonCommonDelete(o).then((function(e){200==e.status?($(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled"),t.ShowAlert(t.$t("DeletedSuccess",[t.$t("Record")]),"success",!0,t.$t("Alert")),t.PageNumber=parseInt(t.PageNumber)-1,t.PageNumber<=0&&(t.PageNumber=1),t.FetchData()):t.ShowAlert(t.$t("DeletedError",[t.$t("Report")]),"Success",!0,t.$t("Alert"))}))})):ShowAlert(t.$t("Selectanyrecordtodelete")),t.isLoading=!1},AddCustomLayout:function(e){var t=this;null!=e.CUSTOM_LAYOUT_ID?(t.CustomlayoutId=e.CUSTOM_LAYOUT_ID,t.showLayoutPopup=!0):(t.showLayoutPopup=!0,t.CustomlayoutId=null)},sortdata:function(e){var t="sort tb_headerSortDown";this.SortBy=e,e===this.SortBy&&(""==this.SortExp?(this.SortExp="ASC",t="sort tb_headerSortDown"):"ASC"==this.SortExp?(this.SortExp="DESC",t="sort tb_headerSortUp"):(this.SortExp="ASC",t="sort tb_headerSortDown")),this.FetchData(),$("#"+e+"  span:first-child").attr("class",t)},FetchModuleData:function(){var e=this,t="moduleId=&userTypeId=1&requestFrom=&isCustomFieldEnable=1";l["a"].Modulenamedata(t).then(t=>{null!=t.data.Data&&(e.moduleNameList=t.data.Data)})},SelectSubmodule(e){var t=this;t.ddlModuleId=e;var a=`moduleId=${t.ddlModuleId}&userTypeId=1&requestFrom=&isCustomFieldEnable=1`;l["a"].Modulenamedata(a).then(e=>{null!=e.data.Data&&(t.subModuleNameList=e.data.Data)})},CloseAddPopup:function(){var e=this;e.showLayoutPopup=!1},clickEventOfColumn:function(e,t){"LAYOUT_NAME"==t.COLUMN_NAME&&this.$router.push({name:"ManageCustomLayout",params:{CustomlayoutId:e.CUSTOM_LAYOUT_ID}})},clickEventOfColumn1:function(e,t){t.COLUMN_NAME},clickEventOfColumn2:function(e,t){t.COLUMN_NAME},columnDataFormatter:function(e,t){return"LAYOUT_SHARE_TO"==t.COLUMN_NAME?""==e.LAYOUT_SHARE_TO?"-":e.LAYOUT_SHARE_TO.split(",").length:"SYSTEM_GENRATED_COLUMN"==t.COLUMN_NAME?""==e.SYSTEM_GENRATED_COLUMN?"-":e.SYSTEM_GENRATED_COLUMN.split(",").length:"USER_GENRATED_COLUMN"==t.COLUMN_NAME?""==e.USER_GENRATED_COLUMN?"-":e.USER_GENRATED_COLUMN.split(",").length:"TOTAL_RECORDS"==t.COLUMN_NAME?(""==e.USER_GENRATED_COLUMN?"":e.USER_GENRATED_COLUMN.split(",").length)+(""==e.SYSTEM_GENRATED_COLUMN?"":e.SYSTEM_GENRATED_COLUMN.split(",").length):e[t.COLUMN_NAME]},getRequestParams:function(e,t,a,o,s,l){let i={};return e&&(i["pageNum"]=e),l&&(i["searchcondition"]=l),s&&(i["isPaged"]=s),a&&(i["sortBy"]=a),o&&(i["sortExp"]=o),t&&(i["pageSize"]=t),i},pagerMethod:function(e){this.PageSize=e.PageSize,this.PageNumber=e.PageNumber,this.FetchData()},FetchData:function(){var e=this;e.isLoading=!0;const t=this.getRequestParams(this.sortBy,this.sortExp,this.pageSize,this.pageNumber,this.isPaged,this.searchcondition);t.pageSize=e.PageSize,t.pageNumber=e.PageNumber,t.searchCondition=e.searchCondition,e.PageNumber?t.pageNumber=e.PageNumber:e.PageNumber=t.pageNumber=1,"undefined"!=typeof e.isPaged?t.isPaged=e.isPaged:e.isPaged=t.isPaged=1,t.isPaged=e.isPaged,t.sortBy=e.SortBy,t.sortExp=e.SortExp;var a="";e.isBlank(e.searchCondition)||(a+=e.searchCondition),e.isBlank(e.conditionForInstantSearch)||(a+=e.isBlank(e.searchCondition)?e.conditionForInstantSearch:" AND "+e.conditionForInstantSearch),""!=a&&(t.searchCondition=a),l["a"].GetCustomLayout(t).then((function(t){e.isLoading=!1,null!=JSON.parse(t.data)?(e.LayoutListingData=JSON.parse(t.data).data,e.Headers.forEach(t=>{t.settings=null,"LAYOUT_NAME"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn}),"IS_SYSTEM_DEFAULT_TEMPLATE"==t.COLUMN_NAME&&(t.settings={isInSlot:!0,clickEvent:e.ChangeTemplateStatus}),"IS_ACTIVE_TEMPLATE"==t.COLUMN_NAME&&(t.settings={isInSlot:!0,clickEvent:e.ChangeTemplateStatus}),"LAYOUT_SHARE_TO"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn1,formatter:e.columnDataFormatter}),"LAST_MODIFY_DATE"==t.COLUMN_NAME&&(t.settings={inSlot:!0}),"SYSTEM_GENRATED_COLUMN"==t.COLUMN_NAME&&(t.settings={clickEvent:e.clickEventOfColumn2,formatter:e.columnDataFormatter}),"USER_GENRATED_COLUMN"==t.COLUMN_NAME&&(t.settings={formatter:e.columnDataFormatter}),"TOTAL_RECORDS"==t.COLUMN_NAME&&(t.settings={formatter:e.columnDataFormatter})}),null!=e.LayoutListingData?(e.TotalRecords=e.LayoutListingData[0].TOTAL_RECORDS,e.TotalPages=Math.ceil(e.TotalRecords/e.PageSize),e.CurrentPage=e.PageNumber,e.noRecord=!1):(e.noRecord=!0,e.LayoutListingData=[],e.TotalRecords=0,e.isLoading=!1)):(e.noRecord=!0,e.LayoutListingData=[],e.TotalRecords=0,e.isLoading=!1)})),e.isLoading=!1},SharePopup(){var e=this;e.showSharePopup=!0},ClosePopupShare(){var e=this;e.showSharePopup=!1},ChangeTemplateStatus:function(e,t,a){var o=this,s=!e.IS_ACTIVE_TEMPLATE,i=!e.IS_SYSTEM_DEFAULT_TEMPLATE,n=a;s=s?1:0,i=i?1:0;var u=`custom_layout_id=${e.CUSTOM_LAYOUT_ID}&is_active_template=${s}&is_default_template=${i}&update_field=${n}`;l["a"].ChangeTemplateStatus(u).then((function(e){"1"==e.data&&(o.ShowAlert(o.$t("CustomLayoutStatusSuccess",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert")),o.FetchData()),"2"==e.data&&(o.ShowAlert(o.$t("CustomLayoutStatusSuccessDefault",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert")),o.FetchData()),""==e.data&&o.ShowAlert(o.$t("CustomLayoutStatusDefault",[o.$t("Custom_Layout")]),"success",!0,o.$t("Alert"))})),$(".chkItems:checkbox:checked,#chkAll_0").prop("checked",!1).removeAttr("checked"),$("#DeleteMultiple").addClass("disabled")}}},R=I,N=(a("975e"),Object(A["a"])(R,o,s,!1,null,"b0615184",null));t["default"]=N.exports},"50c1":function(e,t,a){var o=a("98ce");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=a("499e").default;s("7c944aee",o,!0,{sourceMap:!1,shadowMode:!1})},"975e":function(e,t,a){"use strict";a("50c1")},"98ce":function(e,t,a){var o=a("24fb");t=o(!1),t.push([e.i,".is-visible[data-v-b0615184]{display:inline-block;height:auto}",""]),e.exports=t}}]);
//# sourceMappingURL=chunk-3765d43e.js.map